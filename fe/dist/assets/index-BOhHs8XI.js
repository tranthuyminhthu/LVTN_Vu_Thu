const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AboutView-d3JIr0Hu.js","assets/AboutView-Dsi8QJpw.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))l(m);new MutationObserver(m=>{for(const d of m)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&l(x)}).observe(document,{childList:!0,subtree:!0});function n(m){const d={};return m.integrity&&(d.integrity=m.integrity),m.referrerPolicy&&(d.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?d.credentials="include":m.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(m){if(m.ep)return;m.ep=!0;const d=n(m);fetch(m.href,d)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function q2(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Qi={},cf=[],Hl=()=>{},uD=()=>!1,g_=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),H2=t=>t.startsWith("onUpdate:"),Wo=Object.assign,G2=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},dD=Object.prototype.hasOwnProperty,Gi=(t,e)=>dD.call(t,e),xr=Array.isArray,uf=t=>e0(t)==="[object Map]",y_=t=>e0(t)==="[object Set]",BT=t=>e0(t)==="[object Date]",Hr=t=>typeof t=="function",po=t=>typeof t=="string",ol=t=>typeof t=="symbol",eo=t=>t!==null&&typeof t=="object",zE=t=>(eo(t)||Hr(t))&&Hr(t.then)&&Hr(t.catch),BE=Object.prototype.toString,e0=t=>BE.call(t),hD=t=>e0(t).slice(8,-1),FE=t=>e0(t)==="[object Object]",W2=t=>po(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ng=q2(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),v_=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},pD=/-(\w)/g,Aa=v_(t=>t.replace(pD,(e,n)=>n?n.toUpperCase():"")),fD=/\B([A-Z])/g,Yu=v_(t=>t.replace(fD,"-$1").toLowerCase()),b_=v_(t=>t.charAt(0).toUpperCase()+t.slice(1)),kb=v_(t=>t?`on${b_(t)}`:""),qu=(t,e)=>!Object.is(t,e),Tb=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},$E=(t,e,n,l=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:l,value:n})},qb=t=>{const e=parseFloat(t);return isNaN(e)?t:e},mD=t=>{const e=po(t)?Number(t):NaN;return isNaN(e)?t:e};let FT;const __=()=>FT||(FT=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Wl(t){if(xr(t)){const e={};for(let n=0;n<t.length;n++){const l=t[n],m=po(l)?bD(l):Wl(l);if(m)for(const d in m)e[d]=m[d]}return e}else if(po(t)||eo(t))return t}const gD=/;(?![^(]*\))/g,yD=/:([^]+)/,vD=/\/\*[^]*?\*\//g;function bD(t){const e={};return t.replace(vD,"").split(gD).forEach(n=>{if(n){const l=n.split(yD);l.length>1&&(e[l[0].trim()]=l[1].trim())}}),e}function vn(t){let e="";if(po(t))e=t;else if(xr(t))for(let n=0;n<t.length;n++){const l=vn(t[n]);l&&(e+=l+" ")}else if(eo(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function ka(t){if(!t)return null;let{class:e,style:n}=t;return e&&!po(e)&&(t.class=vn(e)),n&&(t.style=Wl(n)),t}const _D="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xD=q2(_D);function NE(t){return!!t||t===""}function wD(t,e){if(t.length!==e.length)return!1;let n=!0;for(let l=0;n&&l<t.length;l++)n=x_(t[l],e[l]);return n}function x_(t,e){if(t===e)return!0;let n=BT(t),l=BT(e);if(n||l)return n&&l?t.getTime()===e.getTime():!1;if(n=ol(t),l=ol(e),n||l)return t===e;if(n=xr(t),l=xr(e),n||l)return n&&l?wD(t,e):!1;if(n=eo(t),l=eo(e),n||l){if(!n||!l)return!1;const m=Object.keys(t).length,d=Object.keys(e).length;if(m!==d)return!1;for(const x in t){const s=t.hasOwnProperty(x),T=e.hasOwnProperty(x);if(s&&!T||!s&&T||!x_(t[x],e[x]))return!1}}return String(t)===String(e)}function SD(t,e){return t.findIndex(n=>x_(n,e))}const VE=t=>!!(t&&t.__v_isRef===!0),Ue=t=>po(t)?t:t==null?"":xr(t)||eo(t)&&(t.toString===BE||!Hr(t.toString))?VE(t)?Ue(t.value):JSON.stringify(t,jE,2):String(t),jE=(t,e)=>VE(e)?jE(t,e.value):uf(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[l,m],d)=>(n[ew(l,d)+" =>"]=m,n),{})}:y_(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ew(n))}:ol(e)?ew(e):eo(e)&&!xr(e)&&!FE(e)?String(e):e,ew=(t,e="")=>{var n;return ol(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rs;class UE{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Rs,!e&&Rs&&(this.index=(Rs.scopes||(Rs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Rs;try{return Rs=this,e()}finally{Rs=n}}}on(){Rs=this}off(){Rs=this.parent}stop(e){if(this._active){this._active=!1;let n,l;for(n=0,l=this.effects.length;n<l;n++)this.effects[n].stop();for(this.effects.length=0,n=0,l=this.cleanups.length;n<l;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,l=this.scopes.length;n<l;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const m=this.parent.scopes.pop();m&&m!==this&&(this.parent.scopes[this.index]=m,m.index=this.index)}this.parent=void 0}}}function qE(t){return new UE(t)}function HE(){return Rs}function CD(t,e=!1){Rs&&Rs.cleanups.push(t)}let io;const tw=new WeakSet;class GE{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Rs&&Rs.active&&Rs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,tw.has(this)&&(tw.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||KE(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,$T(this),ZE(this);const e=io,n=il;io=this,il=!0;try{return this.fn()}finally{XE(this),io=e,il=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)X2(e);this.deps=this.depsTail=void 0,$T(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?tw.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){$w(this)&&this.run()}get dirty(){return $w(this)}}let WE=0,Vg,jg;function KE(t,e=!1){if(t.flags|=8,e){t.next=jg,jg=t;return}t.next=Vg,Vg=t}function K2(){WE++}function Z2(){if(--WE>0)return;if(jg){let e=jg;for(jg=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Vg;){let e=Vg;for(Vg=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(l){t||(t=l)}e=n}}if(t)throw t}function ZE(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function XE(t){let e,n=t.depsTail,l=n;for(;l;){const m=l.prevDep;l.version===-1?(l===n&&(n=m),X2(l),kD(l)):e=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=m}t.deps=e,t.depsTail=n}function $w(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(YE(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function YE(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ny))return;t.globalVersion=ny;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!$w(t)){t.flags&=-3;return}const n=io,l=il;io=t,il=!0;try{ZE(t);const m=t.fn(t._value);(e.version===0||qu(m,t._value))&&(t._value=m,e.version++)}catch(m){throw e.version++,m}finally{io=n,il=l,XE(t),t.flags&=-3}}function X2(t,e=!1){const{dep:n,prevSub:l,nextSub:m}=t;if(l&&(l.nextSub=m,t.prevSub=void 0),m&&(m.prevSub=l,t.nextSub=void 0),n.subs===t&&(n.subs=l,!l&&n.computed)){n.computed.flags&=-5;for(let d=n.computed.deps;d;d=d.nextDep)X2(d,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function kD(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let il=!0;const JE=[];function Ju(){JE.push(il),il=!1}function Qu(){const t=JE.pop();il=t===void 0?!0:t}function $T(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=io;io=void 0;try{e()}finally{io=n}}}let ny=0;class TD{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Y2{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!io||!il||io===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==io)n=this.activeLink=new TD(io,this),io.deps?(n.prevDep=io.depsTail,io.depsTail.nextDep=n,io.depsTail=n):io.deps=io.depsTail=n,QE(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const l=n.nextDep;l.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=l),n.prevDep=io.depsTail,n.nextDep=void 0,io.depsTail.nextDep=n,io.depsTail=n,io.deps===n&&(io.deps=l)}return n}trigger(e){this.version++,ny++,this.notify(e)}notify(e){K2();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Z2()}}}function QE(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let l=e.deps;l;l=l.nextDep)QE(l)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Hb=new WeakMap,vh=Symbol(""),Nw=Symbol(""),ry=Symbol("");function ys(t,e,n){if(il&&io){let l=Hb.get(t);l||Hb.set(t,l=new Map);let m=l.get(n);m||(l.set(n,m=new Y2),m.map=l,m.key=n),m.track()}}function Pc(t,e,n,l,m,d){const x=Hb.get(t);if(!x){ny++;return}const s=T=>{T&&T.trigger()};if(K2(),e==="clear")x.forEach(s);else{const T=xr(t),E=T&&W2(n);if(T&&n==="length"){const A=Number(l);x.forEach((z,j)=>{(j==="length"||j===ry||!ol(j)&&j>=A)&&s(z)})}else switch((n!==void 0||x.has(void 0))&&s(x.get(n)),E&&s(x.get(ry)),e){case"add":T?E&&s(x.get("length")):(s(x.get(vh)),uf(t)&&s(x.get(Nw)));break;case"delete":T||(s(x.get(vh)),uf(t)&&s(x.get(Nw)));break;case"set":uf(t)&&s(x.get(vh));break}}Z2()}function ED(t,e){const n=Hb.get(t);return n&&n.get(e)}function Jp(t){const e=Li(t);return e===t?e:(ys(e,"iterate",ry),Pa(t)?e:e.map(vs))}function w_(t){return ys(t=Li(t),"iterate",ry),t}const ID={__proto__:null,[Symbol.iterator](){return nw(this,Symbol.iterator,vs)},concat(...t){return Jp(this).concat(...t.map(e=>xr(e)?Jp(e):e))},entries(){return nw(this,"entries",t=>(t[1]=vs(t[1]),t))},every(t,e){return Cc(this,"every",t,e,void 0,arguments)},filter(t,e){return Cc(this,"filter",t,e,n=>n.map(vs),arguments)},find(t,e){return Cc(this,"find",t,e,vs,arguments)},findIndex(t,e){return Cc(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Cc(this,"findLast",t,e,vs,arguments)},findLastIndex(t,e){return Cc(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Cc(this,"forEach",t,e,void 0,arguments)},includes(...t){return rw(this,"includes",t)},indexOf(...t){return rw(this,"indexOf",t)},join(t){return Jp(this).join(t)},lastIndexOf(...t){return rw(this,"lastIndexOf",t)},map(t,e){return Cc(this,"map",t,e,void 0,arguments)},pop(){return Cg(this,"pop")},push(...t){return Cg(this,"push",t)},reduce(t,...e){return NT(this,"reduce",t,e)},reduceRight(t,...e){return NT(this,"reduceRight",t,e)},shift(){return Cg(this,"shift")},some(t,e){return Cc(this,"some",t,e,void 0,arguments)},splice(...t){return Cg(this,"splice",t)},toReversed(){return Jp(this).toReversed()},toSorted(t){return Jp(this).toSorted(t)},toSpliced(...t){return Jp(this).toSpliced(...t)},unshift(...t){return Cg(this,"unshift",t)},values(){return nw(this,"values",vs)}};function nw(t,e,n){const l=w_(t),m=l[e]();return l!==t&&!Pa(t)&&(m._next=m.next,m.next=()=>{const d=m._next();return d.value&&(d.value=n(d.value)),d}),m}const PD=Array.prototype;function Cc(t,e,n,l,m,d){const x=w_(t),s=x!==t&&!Pa(t),T=x[e];if(T!==PD[e]){const z=T.apply(t,d);return s?vs(z):z}let E=n;x!==t&&(s?E=function(z,j){return n.call(this,vs(z),j,t)}:n.length>2&&(E=function(z,j){return n.call(this,z,j,t)}));const A=T.call(x,E,l);return s&&m?m(A):A}function NT(t,e,n,l){const m=w_(t);let d=n;return m!==t&&(Pa(t)?n.length>3&&(d=function(x,s,T){return n.call(this,x,s,T,t)}):d=function(x,s,T){return n.call(this,x,vs(s),T,t)}),m[e](d,...l)}function rw(t,e,n){const l=Li(t);ys(l,"iterate",ry);const m=l[e](...n);return(m===-1||m===!1)&&tS(n[0])?(n[0]=Li(n[0]),l[e](...n)):m}function Cg(t,e,n=[]){Ju(),K2();const l=Li(t)[e].apply(t,n);return Z2(),Qu(),l}const AD=q2("__proto__,__v_isRef,__isVue"),eI=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ol));function RD(t){ol(t)||(t=String(t));const e=Li(this);return ys(e,"has",t),e.hasOwnProperty(t)}class tI{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,l){if(n==="__v_skip")return e.__v_skip;const m=this._isReadonly,d=this._isShallow;if(n==="__v_isReactive")return!m;if(n==="__v_isReadonly")return m;if(n==="__v_isShallow")return d;if(n==="__v_raw")return l===(m?d?VD:oI:d?iI:rI).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(l)?e:void 0;const x=xr(e);if(!m){let T;if(x&&(T=ID[n]))return T;if(n==="hasOwnProperty")return RD}const s=Reflect.get(e,n,Mo(e)?e:l);return(ol(n)?eI.has(n):AD(n))||(m||ys(e,"get",n),d)?s:Mo(s)?x&&W2(n)?s:s.value:eo(s)?m?Q2(s):Tf(s):s}}class nI extends tI{constructor(e=!1){super(!1,e)}set(e,n,l,m){let d=e[n];if(!this._isShallow){const T=xh(d);if(!Pa(l)&&!xh(l)&&(d=Li(d),l=Li(l)),!xr(e)&&Mo(d)&&!Mo(l))return T?!1:(d.value=l,!0)}const x=xr(e)&&W2(n)?Number(n)<e.length:Gi(e,n),s=Reflect.set(e,n,l,Mo(e)?e:m);return e===Li(m)&&(x?qu(l,d)&&Pc(e,"set",n,l):Pc(e,"add",n,l)),s}deleteProperty(e,n){const l=Gi(e,n);e[n];const m=Reflect.deleteProperty(e,n);return m&&l&&Pc(e,"delete",n,void 0),m}has(e,n){const l=Reflect.has(e,n);return(!ol(n)||!eI.has(n))&&ys(e,"has",n),l}ownKeys(e){return ys(e,"iterate",xr(e)?"length":vh),Reflect.ownKeys(e)}}class MD extends tI{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const DD=new nI,LD=new MD,OD=new nI(!0);const Vw=t=>t,lb=t=>Reflect.getPrototypeOf(t);function zD(t,e,n){return function(...l){const m=this.__v_raw,d=Li(m),x=uf(d),s=t==="entries"||t===Symbol.iterator&&x,T=t==="keys"&&x,E=m[t](...l),A=n?Vw:e?jw:vs;return!e&&ys(d,"iterate",T?Nw:vh),{next(){const{value:z,done:j}=E.next();return j?{value:z,done:j}:{value:s?[A(z[0]),A(z[1])]:A(z),done:j}},[Symbol.iterator](){return this}}}}function cb(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function BD(t,e){const n={get(m){const d=this.__v_raw,x=Li(d),s=Li(m);t||(qu(m,s)&&ys(x,"get",m),ys(x,"get",s));const{has:T}=lb(x),E=e?Vw:t?jw:vs;if(T.call(x,m))return E(d.get(m));if(T.call(x,s))return E(d.get(s));d!==x&&d.get(m)},get size(){const m=this.__v_raw;return!t&&ys(Li(m),"iterate",vh),Reflect.get(m,"size",m)},has(m){const d=this.__v_raw,x=Li(d),s=Li(m);return t||(qu(m,s)&&ys(x,"has",m),ys(x,"has",s)),m===s?d.has(m):d.has(m)||d.has(s)},forEach(m,d){const x=this,s=x.__v_raw,T=Li(s),E=e?Vw:t?jw:vs;return!t&&ys(T,"iterate",vh),s.forEach((A,z)=>m.call(d,E(A),E(z),x))}};return Wo(n,t?{add:cb("add"),set:cb("set"),delete:cb("delete"),clear:cb("clear")}:{add(m){!e&&!Pa(m)&&!xh(m)&&(m=Li(m));const d=Li(this);return lb(d).has.call(d,m)||(d.add(m),Pc(d,"add",m,m)),this},set(m,d){!e&&!Pa(d)&&!xh(d)&&(d=Li(d));const x=Li(this),{has:s,get:T}=lb(x);let E=s.call(x,m);E||(m=Li(m),E=s.call(x,m));const A=T.call(x,m);return x.set(m,d),E?qu(d,A)&&Pc(x,"set",m,d):Pc(x,"add",m,d),this},delete(m){const d=Li(this),{has:x,get:s}=lb(d);let T=x.call(d,m);T||(m=Li(m),T=x.call(d,m)),s&&s.call(d,m);const E=d.delete(m);return T&&Pc(d,"delete",m,void 0),E},clear(){const m=Li(this),d=m.size!==0,x=m.clear();return d&&Pc(m,"clear",void 0,void 0),x}}),["keys","values","entries",Symbol.iterator].forEach(m=>{n[m]=zD(m,t,e)}),n}function J2(t,e){const n=BD(t,e);return(l,m,d)=>m==="__v_isReactive"?!t:m==="__v_isReadonly"?t:m==="__v_raw"?l:Reflect.get(Gi(n,m)&&m in l?n:l,m,d)}const FD={get:J2(!1,!1)},$D={get:J2(!1,!0)},ND={get:J2(!0,!1)};const rI=new WeakMap,iI=new WeakMap,oI=new WeakMap,VD=new WeakMap;function jD(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function UD(t){return t.__v_skip||!Object.isExtensible(t)?0:jD(hD(t))}function Tf(t){return xh(t)?t:eS(t,!1,DD,FD,rI)}function sI(t){return eS(t,!1,OD,$D,iI)}function Q2(t){return eS(t,!0,LD,ND,oI)}function eS(t,e,n,l,m){if(!eo(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const d=m.get(t);if(d)return d;const x=UD(t);if(x===0)return t;const s=new Proxy(t,x===2?l:n);return m.set(t,s),s}function Hu(t){return xh(t)?Hu(t.__v_raw):!!(t&&t.__v_isReactive)}function xh(t){return!!(t&&t.__v_isReadonly)}function Pa(t){return!!(t&&t.__v_isShallow)}function tS(t){return t?!!t.__v_raw:!1}function Li(t){const e=t&&t.__v_raw;return e?Li(e):t}function nS(t){return!Gi(t,"__v_skip")&&Object.isExtensible(t)&&$E(t,"__v_skip",!0),t}const vs=t=>eo(t)?Tf(t):t,jw=t=>eo(t)?Q2(t):t;function Mo(t){return t?t.__v_isRef===!0:!1}function Ke(t){return aI(t,!1)}function qD(t){return aI(t,!0)}function aI(t,e){return Mo(t)?t:new HD(t,e)}class HD{constructor(e,n){this.dep=new Y2,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Li(e),this._value=n?e:vs(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,l=this.__v_isShallow||Pa(e)||xh(e);e=l?e:Li(e),qu(e,n)&&(this._rawValue=e,this._value=l?e:vs(e),this.dep.trigger())}}function Ie(t){return Mo(t)?t.value:t}const GD={get:(t,e,n)=>e==="__v_raw"?t:Ie(Reflect.get(t,e,n)),set:(t,e,n,l)=>{const m=t[e];return Mo(m)&&!Mo(n)?(m.value=n,!0):Reflect.set(t,e,n,l)}};function lI(t){return Hu(t)?t:new Proxy(t,GD)}function WD(t){const e=xr(t)?new Array(t.length):{};for(const n in t)e[n]=ZD(t,n);return e}class KD{constructor(e,n,l){this._object=e,this._key=n,this._defaultValue=l,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ED(Li(this._object),this._key)}}function ZD(t,e,n){const l=t[e];return Mo(l)?l:new KD(t,e,n)}class XD{constructor(e,n,l){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Y2(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ny-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&io!==this)return KE(this,!0),!0}get value(){const e=this.dep.track();return YE(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function YD(t,e,n=!1){let l,m;return Hr(t)?l=t:(l=t.get,m=t.set),new XD(l,m,n)}const ub={},Gb=new WeakMap;let hh;function JD(t,e=!1,n=hh){if(n){let l=Gb.get(n);l||Gb.set(n,l=[]),l.push(t)}}function QD(t,e,n=Qi){const{immediate:l,deep:m,once:d,scheduler:x,augmentJob:s,call:T}=n,E=re=>m?re:Pa(re)||m===!1||m===0?Ac(re,1):Ac(re);let A,z,j,U,K=!1,oe=!1;if(Mo(t)?(z=()=>t.value,K=Pa(t)):Hu(t)?(z=()=>E(t),K=!0):xr(t)?(oe=!0,K=t.some(re=>Hu(re)||Pa(re)),z=()=>t.map(re=>{if(Mo(re))return re.value;if(Hu(re))return E(re);if(Hr(re))return T?T(re,2):re()})):Hr(t)?e?z=T?()=>T(t,2):t:z=()=>{if(j){Ju();try{j()}finally{Qu()}}const re=hh;hh=A;try{return T?T(t,3,[U]):t(U)}finally{hh=re}}:z=Hl,e&&m){const re=z,ze=m===!0?1/0:m;z=()=>Ac(re(),ze)}const fe=HE(),me=()=>{A.stop(),fe&&fe.active&&G2(fe.effects,A)};if(d&&e){const re=e;e=(...ze)=>{re(...ze),me()}}let ne=oe?new Array(t.length).fill(ub):ub;const te=re=>{if(!(!(A.flags&1)||!A.dirty&&!re))if(e){const ze=A.run();if(m||K||(oe?ze.some((_t,Me)=>qu(_t,ne[Me])):qu(ze,ne))){j&&j();const _t=hh;hh=A;try{const Me=[ze,ne===ub?void 0:oe&&ne[0]===ub?[]:ne,U];T?T(e,3,Me):e(...Me),ne=ze}finally{hh=_t}}}else A.run()};return s&&s(te),A=new GE(z),A.scheduler=x?()=>x(te,!1):te,U=re=>JD(re,!1,A),j=A.onStop=()=>{const re=Gb.get(A);if(re){if(T)T(re,4);else for(const ze of re)ze();Gb.delete(A)}},e?l?te(!0):ne=A.run():x?x(te.bind(null,!0),!0):A.run(),me.pause=A.pause.bind(A),me.resume=A.resume.bind(A),me.stop=me,me}function Ac(t,e=1/0,n){if(e<=0||!eo(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Mo(t))Ac(t.value,e,n);else if(xr(t))for(let l=0;l<t.length;l++)Ac(t[l],e,n);else if(y_(t)||uf(t))t.forEach(l=>{Ac(l,e,n)});else if(FE(t)){for(const l in t)Ac(t[l],e,n);for(const l of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,l)&&Ac(t[l],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function t0(t,e,n,l){try{return l?t(...l):t()}catch(m){S_(m,e,n)}}function sl(t,e,n,l){if(Hr(t)){const m=t0(t,e,n,l);return m&&zE(m)&&m.catch(d=>{S_(d,e,n)}),m}if(xr(t)){const m=[];for(let d=0;d<t.length;d++)m.push(sl(t[d],e,n,l));return m}}function S_(t,e,n,l=!0){const m=e?e.vnode:null,{errorHandler:d,throwUnhandledErrorInProduction:x}=e&&e.appContext.config||Qi;if(e){let s=e.parent;const T=e.proxy,E=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const A=s.ec;if(A){for(let z=0;z<A.length;z++)if(A[z](t,T,E)===!1)return}s=s.parent}if(d){Ju(),t0(d,null,10,[t,T,E]),Qu();return}}eL(t,n,m,l,x)}function eL(t,e,n,l=!0,m=!1){if(m)throw t;console.error(t)}const Ms=[];let Fl=-1;const df=[];let zu=null,nf=0;const cI=Promise.resolve();let Wb=null;function Th(t){const e=Wb||cI;return t?e.then(this?t.bind(this):t):e}function tL(t){let e=Fl+1,n=Ms.length;for(;e<n;){const l=e+n>>>1,m=Ms[l],d=iy(m);d<t||d===t&&m.flags&2?e=l+1:n=l}return e}function rS(t){if(!(t.flags&1)){const e=iy(t),n=Ms[Ms.length-1];!n||!(t.flags&2)&&e>=iy(n)?Ms.push(t):Ms.splice(tL(e),0,t),t.flags|=1,uI()}}function uI(){Wb||(Wb=cI.then(hI))}function nL(t){xr(t)?df.push(...t):zu&&t.id===-1?zu.splice(nf+1,0,t):t.flags&1||(df.push(t),t.flags|=1),uI()}function VT(t,e,n=Fl+1){for(;n<Ms.length;n++){const l=Ms[n];if(l&&l.flags&2){if(t&&l.id!==t.uid)continue;Ms.splice(n,1),n--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function dI(t){if(df.length){const e=[...new Set(df)].sort((n,l)=>iy(n)-iy(l));if(df.length=0,zu){zu.push(...e);return}for(zu=e,nf=0;nf<zu.length;nf++){const n=zu[nf];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}zu=null,nf=0}}const iy=t=>t.id==null?t.flags&2?-1:1/0:t.id;function hI(t){try{for(Fl=0;Fl<Ms.length;Fl++){const e=Ms[Fl];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),t0(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Fl<Ms.length;Fl++){const e=Ms[Fl];e&&(e.flags&=-2)}Fl=-1,Ms.length=0,dI(),Wb=null,(Ms.length||df.length)&&hI()}}let Go=null,pI=null;function Kb(t){const e=Go;return Go=t,pI=t&&t.type.__scopeId||null,e}function Xe(t,e=Go,n){if(!e||t._n)return t;const l=(...m)=>{l._d&&t5(-1);const d=Kb(e);let x;try{x=t(...m)}finally{Kb(d),l._d&&t5(1)}return x};return l._n=!0,l._c=!0,l._d=!0,l}function _r(t,e){if(Go===null)return t;const n=P_(Go),l=t.dirs||(t.dirs=[]);for(let m=0;m<e.length;m++){let[d,x,s,T=Qi]=e[m];d&&(Hr(d)&&(d={mounted:d,updated:d}),d.deep&&Ac(x),l.push({dir:d,instance:n,value:x,oldValue:void 0,arg:s,modifiers:T}))}return t}function lh(t,e,n,l){const m=t.dirs,d=e&&e.dirs;for(let x=0;x<m.length;x++){const s=m[x];d&&(s.oldValue=d[x].value);let T=s.dir[l];T&&(Ju(),sl(T,n,8,[t.el,s,t,e]),Qu())}}const fI=Symbol("_vte"),mI=t=>t.__isTeleport,Ug=t=>t&&(t.disabled||t.disabled===""),jT=t=>t&&(t.defer||t.defer===""),UT=t=>typeof SVGElement<"u"&&t instanceof SVGElement,qT=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Uw=(t,e)=>{const n=t&&t.to;return po(n)?e?e(n):null:n},gI={name:"Teleport",__isTeleport:!0,process(t,e,n,l,m,d,x,s,T,E){const{mc:A,pc:z,pbc:j,o:{insert:U,querySelector:K,createText:oe,createComment:fe}}=E,me=Ug(e.props);let{shapeFlag:ne,children:te,dynamicChildren:re}=e;if(t==null){const ze=e.el=oe(""),_t=e.anchor=oe("");U(ze,n,l),U(_t,n,l);const Me=(Ce,$e)=>{ne&16&&(m&&m.isCE&&(m.ce._teleportTarget=Ce),A(te,Ce,$e,m,d,x,s,T))},he=()=>{const Ce=e.target=Uw(e.props,K),$e=yI(Ce,e,oe,U);Ce&&(x!=="svg"&&UT(Ce)?x="svg":x!=="mathml"&&qT(Ce)&&(x="mathml"),me||(Me(Ce,$e),Eb(e,!1)))};me&&(Me(n,_t),Eb(e,!0)),jT(e.props)?As(()=>{he(),e.el.__isMounted=!0},d):he()}else{if(jT(e.props)&&!t.el.__isMounted){As(()=>{gI.process(t,e,n,l,m,d,x,s,T,E),delete t.el.__isMounted},d);return}e.el=t.el,e.targetStart=t.targetStart;const ze=e.anchor=t.anchor,_t=e.target=t.target,Me=e.targetAnchor=t.targetAnchor,he=Ug(t.props),Ce=he?n:_t,$e=he?ze:Me;if(x==="svg"||UT(_t)?x="svg":(x==="mathml"||qT(_t))&&(x="mathml"),re?(j(t.dynamicChildren,re,Ce,m,d,x,s),lS(t,e,!0)):T||z(t,e,Ce,$e,m,d,x,s,!1),me)he?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):db(e,n,ze,E,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Je=e.target=Uw(e.props,K);Je&&db(e,Je,null,E,0)}else he&&db(e,_t,Me,E,1);Eb(e,me)}},remove(t,e,n,{um:l,o:{remove:m}},d){const{shapeFlag:x,children:s,anchor:T,targetStart:E,targetAnchor:A,target:z,props:j}=t;if(z&&(m(E),m(A)),d&&m(T),x&16){const U=d||!Ug(j);for(let K=0;K<s.length;K++){const oe=s[K];l(oe,e,n,U,!!oe.dynamicChildren)}}},move:db,hydrate:rL};function db(t,e,n,{o:{insert:l},m},d=2){d===0&&l(t.targetAnchor,e,n);const{el:x,anchor:s,shapeFlag:T,children:E,props:A}=t,z=d===2;if(z&&l(x,e,n),(!z||Ug(A))&&T&16)for(let j=0;j<E.length;j++)m(E[j],e,n,2);z&&l(s,e,n)}function rL(t,e,n,l,m,d,{o:{nextSibling:x,parentNode:s,querySelector:T,insert:E,createText:A}},z){const j=e.target=Uw(e.props,T);if(j){const U=Ug(e.props),K=j._lpa||j.firstChild;if(e.shapeFlag&16)if(U)e.anchor=z(x(t),e,s(t),n,l,m,d),e.targetStart=K,e.targetAnchor=K&&x(K);else{e.anchor=x(t);let oe=K;for(;oe;){if(oe&&oe.nodeType===8){if(oe.data==="teleport start anchor")e.targetStart=oe;else if(oe.data==="teleport anchor"){e.targetAnchor=oe,j._lpa=e.targetAnchor&&x(e.targetAnchor);break}}oe=x(oe)}e.targetAnchor||yI(j,e,A,E),z(K&&x(K),e,j,n,l,m,d)}Eb(e,U)}return e.anchor&&x(e.anchor)}const iL=gI;function Eb(t,e){const n=t.ctx;if(n&&n.ut){let l,m;for(e?(l=t.el,m=t.anchor):(l=t.targetStart,m=t.targetAnchor);l&&l!==m;)l.nodeType===1&&l.setAttribute("data-v-owner",n.uid),l=l.nextSibling;n.ut()}}function yI(t,e,n,l){const m=e.targetStart=n(""),d=e.targetAnchor=n("");return m[fI]=d,t&&(l(m,t),l(d,t)),d}const Bu=Symbol("_leaveCb"),hb=Symbol("_enterCb");function vI(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Co(()=>{t.isMounted=!0}),n0(()=>{t.isUnmounting=!0}),t}const xa=[Function,Array],bI={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:xa,onEnter:xa,onAfterEnter:xa,onEnterCancelled:xa,onBeforeLeave:xa,onLeave:xa,onAfterLeave:xa,onLeaveCancelled:xa,onBeforeAppear:xa,onAppear:xa,onAfterAppear:xa,onAppearCancelled:xa},_I=t=>{const e=t.subTree;return e.component?_I(e.component):e},oL={name:"BaseTransition",props:bI,setup(t,{slots:e}){const n=uS(),l=vI();return()=>{const m=e.default&&iS(e.default(),!0);if(!m||!m.length)return;const d=xI(m),x=Li(t),{mode:s}=x;if(l.isLeaving)return iw(d);const T=HT(d);if(!T)return iw(d);let E=oy(T,x,l,n,z=>E=z);T.type!==Ls&&wh(T,E);let A=n.subTree&&HT(n.subTree);if(A&&A.type!==Ls&&!fh(T,A)&&_I(n).type!==Ls){let z=oy(A,x,l,n);if(wh(A,z),s==="out-in"&&T.type!==Ls)return l.isLeaving=!0,z.afterLeave=()=>{l.isLeaving=!1,n.job.flags&8||n.update(),delete z.afterLeave,A=void 0},iw(d);s==="in-out"&&T.type!==Ls?z.delayLeave=(j,U,K)=>{const oe=wI(l,A);oe[String(A.key)]=A,j[Bu]=()=>{U(),j[Bu]=void 0,delete E.delayedLeave,A=void 0},E.delayedLeave=()=>{K(),delete E.delayedLeave,A=void 0}}:A=void 0}else A&&(A=void 0);return d}}};function xI(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Ls){e=n;break}}return e}const sL=oL;function wI(t,e){const{leavingVNodes:n}=t;let l=n.get(e.type);return l||(l=Object.create(null),n.set(e.type,l)),l}function oy(t,e,n,l,m){const{appear:d,mode:x,persisted:s=!1,onBeforeEnter:T,onEnter:E,onAfterEnter:A,onEnterCancelled:z,onBeforeLeave:j,onLeave:U,onAfterLeave:K,onLeaveCancelled:oe,onBeforeAppear:fe,onAppear:me,onAfterAppear:ne,onAppearCancelled:te}=e,re=String(t.key),ze=wI(n,t),_t=(Ce,$e)=>{Ce&&sl(Ce,l,9,$e)},Me=(Ce,$e)=>{const Je=$e[1];_t(Ce,$e),xr(Ce)?Ce.every(ft=>ft.length<=1)&&Je():Ce.length<=1&&Je()},he={mode:x,persisted:s,beforeEnter(Ce){let $e=T;if(!n.isMounted)if(d)$e=fe||T;else return;Ce[Bu]&&Ce[Bu](!0);const Je=ze[re];Je&&fh(t,Je)&&Je.el[Bu]&&Je.el[Bu](),_t($e,[Ce])},enter(Ce){let $e=E,Je=A,ft=z;if(!n.isMounted)if(d)$e=me||E,Je=ne||A,ft=te||z;else return;let ut=!1;const Qe=Ce[hb]=Qt=>{ut||(ut=!0,Qt?_t(ft,[Ce]):_t(Je,[Ce]),he.delayedLeave&&he.delayedLeave(),Ce[hb]=void 0)};$e?Me($e,[Ce,Qe]):Qe()},leave(Ce,$e){const Je=String(t.key);if(Ce[hb]&&Ce[hb](!0),n.isUnmounting)return $e();_t(j,[Ce]);let ft=!1;const ut=Ce[Bu]=Qe=>{ft||(ft=!0,$e(),Qe?_t(oe,[Ce]):_t(K,[Ce]),Ce[Bu]=void 0,ze[Je]===t&&delete ze[Je])};ze[Je]=t,U?Me(U,[Ce,ut]):ut()},clone(Ce){const $e=oy(Ce,e,n,l,m);return m&&m($e),$e}};return he}function iw(t){if(C_(t))return t=Zu(t),t.children=null,t}function HT(t){if(!C_(t))return mI(t.type)&&t.children?xI(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Hr(n.default))return n.default()}}function wh(t,e){t.shapeFlag&6&&t.component?(t.transition=e,wh(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function iS(t,e=!1,n){let l=[],m=0;for(let d=0;d<t.length;d++){let x=t[d];const s=n==null?x.key:String(n)+String(x.key!=null?x.key:d);x.type===an?(x.patchFlag&128&&m++,l=l.concat(iS(x.children,e,s))):(e||x.type!==Ls)&&l.push(s!=null?Zu(x,{key:s}):x)}if(m>1)for(let d=0;d<l.length;d++)l[d].patchFlag=-2;return l}/*! #__NO_SIDE_EFFECTS__ */function Xr(t,e){return Hr(t)?Wo({name:t.name},e,{setup:t}):t}function SI(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Zb(t,e,n,l,m=!1){if(xr(t)){t.forEach((K,oe)=>Zb(K,e&&(xr(e)?e[oe]:e),n,l,m));return}if(hf(l)&&!m){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&Zb(t,e,n,l.component.subTree);return}const d=l.shapeFlag&4?P_(l.component):l.el,x=m?null:d,{i:s,r:T}=t,E=e&&e.r,A=s.refs===Qi?s.refs={}:s.refs,z=s.setupState,j=Li(z),U=z===Qi?()=>!1:K=>Gi(j,K);if(E!=null&&E!==T&&(po(E)?(A[E]=null,U(E)&&(z[E]=null)):Mo(E)&&(E.value=null)),Hr(T))t0(T,s,12,[x,A]);else{const K=po(T),oe=Mo(T);if(K||oe){const fe=()=>{if(t.f){const me=K?U(T)?z[T]:A[T]:T.value;m?xr(me)&&G2(me,d):xr(me)?me.includes(d)||me.push(d):K?(A[T]=[d],U(T)&&(z[T]=A[T])):(T.value=[d],t.k&&(A[t.k]=T.value))}else K?(A[T]=x,U(T)&&(z[T]=x)):oe&&(T.value=x,t.k&&(A[t.k]=x))};x?(fe.id=-1,As(fe,n)):fe()}}}__().requestIdleCallback;__().cancelIdleCallback;const hf=t=>!!t.type.__asyncLoader,C_=t=>t.type.__isKeepAlive;function aL(t,e){CI(t,"a",e)}function lL(t,e){CI(t,"da",e)}function CI(t,e,n=ns){const l=t.__wdc||(t.__wdc=()=>{let m=n;for(;m;){if(m.isDeactivated)return;m=m.parent}return t()});if(k_(e,l,n),n){let m=n.parent;for(;m&&m.parent;)C_(m.parent.vnode)&&cL(l,e,n,m),m=m.parent}}function cL(t,e,n,l){const m=k_(e,t,l,!0);Ef(()=>{G2(l[e],m)},n)}function k_(t,e,n=ns,l=!1){if(n){const m=n[t]||(n[t]=[]),d=e.__weh||(e.__weh=(...x)=>{Ju();const s=r0(n),T=sl(e,n,t,x);return s(),Qu(),T});return l?m.unshift(d):m.push(d),d}}const Bc=t=>(e,n=ns)=>{(!ly||t==="sp")&&k_(t,(...l)=>e(...l),n)},uL=Bc("bm"),Co=Bc("m"),kI=Bc("bu"),T_=Bc("u"),n0=Bc("bum"),Ef=Bc("um"),dL=Bc("sp"),hL=Bc("rtg"),pL=Bc("rtc");function fL(t,e=ns){k_("ec",t,e)}const oS="components",mL="directives";function wn(t,e){return sS(oS,t,!0,e)||t}const TI=Symbol.for("v-ndc");function Tn(t){return po(t)?sS(oS,t,!1)||t:t||TI}function No(t){return sS(mL,t)}function sS(t,e,n=!0,l=!1){const m=Go||ns;if(m){const d=m.type;if(t===oS){const s=eO(d,!1);if(s&&(s===e||s===Aa(e)||s===b_(Aa(e))))return d}const x=GT(m[t]||d[t],e)||GT(m.appContext[t],e);return!x&&l?d:x}}function GT(t,e){return t&&(t[e]||t[Aa(e)]||t[b_(Aa(e))])}function fr(t,e,n,l){let m;const d=n,x=xr(t);if(x||po(t)){const s=x&&Hu(t);let T=!1;s&&(T=!Pa(t),t=w_(t)),m=new Array(t.length);for(let E=0,A=t.length;E<A;E++)m[E]=e(T?vs(t[E]):t[E],E,void 0,d)}else if(typeof t=="number"){m=new Array(t);for(let s=0;s<t;s++)m[s]=e(s+1,s,void 0,d)}else if(eo(t))if(t[Symbol.iterator])m=Array.from(t,(s,T)=>e(s,T,void 0,d));else{const s=Object.keys(t);m=new Array(s.length);for(let T=0,E=s.length;T<E;T++){const A=s[T];m[T]=e(t[A],A,T,d)}}else m=[];return m}function Gu(t,e){for(let n=0;n<e.length;n++){const l=e[n];if(xr(l))for(let m=0;m<l.length;m++)t[l[m].name]=l[m].fn;else l&&(t[l.name]=l.key?(...m)=>{const d=l.fn(...m);return d&&(d.key=l.key),d}:l.fn)}return t}function jt(t,e,n={},l,m){if(Go.ce||Go.parent&&hf(Go.parent)&&Go.parent.ce)return e!=="default"&&(n.name=e),X(),bt(an,null,[ge("slot",n,l&&l())],64);let d=t[e];d&&d._c&&(d._d=!1),X();const x=d&&EI(d(n)),s=n.key||x&&x.key,T=bt(an,{key:(s&&!ol(s)?s:`_${e}`)+(!x&&l?"_fb":"")},x||(l?l():[]),x&&t._===1?64:-2);return!m&&T.scopeId&&(T.slotScopeIds=[T.scopeId+"-s"]),d&&d._c&&(d._d=!0),T}function EI(t){return t.some(e=>ay(e)?!(e.type===Ls||e.type===an&&!EI(e.children)):!0)?t:null}function pb(t,e){const n={};for(const l in t)n[/[A-Z]/.test(l)?`on:${l}`:kb(l)]=t[l];return n}const qw=t=>t?WI(t)?P_(t):qw(t.parent):null,qg=Wo(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>qw(t.parent),$root:t=>qw(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>PI(t),$forceUpdate:t=>t.f||(t.f=()=>{rS(t.update)}),$nextTick:t=>t.n||(t.n=Th.bind(t.proxy)),$watch:t=>BL.bind(t)}),ow=(t,e)=>t!==Qi&&!t.__isScriptSetup&&Gi(t,e),gL={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:l,data:m,props:d,accessCache:x,type:s,appContext:T}=t;let E;if(e[0]!=="$"){const U=x[e];if(U!==void 0)switch(U){case 1:return l[e];case 2:return m[e];case 4:return n[e];case 3:return d[e]}else{if(ow(l,e))return x[e]=1,l[e];if(m!==Qi&&Gi(m,e))return x[e]=2,m[e];if((E=t.propsOptions[0])&&Gi(E,e))return x[e]=3,d[e];if(n!==Qi&&Gi(n,e))return x[e]=4,n[e];Hw&&(x[e]=0)}}const A=qg[e];let z,j;if(A)return e==="$attrs"&&ys(t.attrs,"get",""),A(t);if((z=s.__cssModules)&&(z=z[e]))return z;if(n!==Qi&&Gi(n,e))return x[e]=4,n[e];if(j=T.config.globalProperties,Gi(j,e))return j[e]},set({_:t},e,n){const{data:l,setupState:m,ctx:d}=t;return ow(m,e)?(m[e]=n,!0):l!==Qi&&Gi(l,e)?(l[e]=n,!0):Gi(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(d[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:l,appContext:m,propsOptions:d}},x){let s;return!!n[x]||t!==Qi&&Gi(t,x)||ow(e,x)||(s=d[0])&&Gi(s,x)||Gi(l,x)||Gi(qg,x)||Gi(m.config.globalProperties,x)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Gi(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function WT(t){return xr(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Hw=!0;function yL(t){const e=PI(t),n=t.proxy,l=t.ctx;Hw=!1,e.beforeCreate&&KT(e.beforeCreate,t,"bc");const{data:m,computed:d,methods:x,watch:s,provide:T,inject:E,created:A,beforeMount:z,mounted:j,beforeUpdate:U,updated:K,activated:oe,deactivated:fe,beforeDestroy:me,beforeUnmount:ne,destroyed:te,unmounted:re,render:ze,renderTracked:_t,renderTriggered:Me,errorCaptured:he,serverPrefetch:Ce,expose:$e,inheritAttrs:Je,components:ft,directives:ut,filters:Qe}=e;if(E&&vL(E,l,null),x)for(const wt in x){const Et=x[wt];Hr(Et)&&(l[wt]=Et.bind(n))}if(m){const wt=m.call(n,n);eo(wt)&&(t.data=Tf(wt))}if(Hw=!0,d)for(const wt in d){const Et=d[wt],on=Hr(Et)?Et.bind(n,n):Hr(Et.get)?Et.get.bind(n,n):Hl,In=!Hr(Et)&&Hr(Et.set)?Et.set.bind(n):Hl,ir=ki({get:on,set:In});Object.defineProperty(l,wt,{enumerable:!0,configurable:!0,get:()=>ir.value,set:Or=>ir.value=Or})}if(s)for(const wt in s)II(s[wt],l,n,wt);if(T){const wt=Hr(T)?T.call(n):T;Reflect.ownKeys(wt).forEach(Et=>{Wu(Et,wt[Et])})}A&&KT(A,t,"c");function kt(wt,Et){xr(Et)?Et.forEach(on=>wt(on.bind(n))):Et&&wt(Et.bind(n))}if(kt(uL,z),kt(Co,j),kt(kI,U),kt(T_,K),kt(aL,oe),kt(lL,fe),kt(fL,he),kt(pL,_t),kt(hL,Me),kt(n0,ne),kt(Ef,re),kt(dL,Ce),xr($e))if($e.length){const wt=t.exposed||(t.exposed={});$e.forEach(Et=>{Object.defineProperty(wt,Et,{get:()=>n[Et],set:on=>n[Et]=on})})}else t.exposed||(t.exposed={});ze&&t.render===Hl&&(t.render=ze),Je!=null&&(t.inheritAttrs=Je),ft&&(t.components=ft),ut&&(t.directives=ut),Ce&&SI(t)}function vL(t,e,n=Hl){xr(t)&&(t=Gw(t));for(const l in t){const m=t[l];let d;eo(m)?"default"in m?d=Gs(m.from||l,m.default,!0):d=Gs(m.from||l):d=Gs(m),Mo(d)?Object.defineProperty(e,l,{enumerable:!0,configurable:!0,get:()=>d.value,set:x=>d.value=x}):e[l]=d}}function KT(t,e,n){sl(xr(t)?t.map(l=>l.bind(e.proxy)):t.bind(e.proxy),e,n)}function II(t,e,n,l){let m=l.includes(".")?jI(n,l):()=>n[l];if(po(t)){const d=e[t];Hr(d)&&ho(m,d)}else if(Hr(t))ho(m,t.bind(n));else if(eo(t))if(xr(t))t.forEach(d=>II(d,e,n,l));else{const d=Hr(t.handler)?t.handler.bind(n):e[t.handler];Hr(d)&&ho(m,d,t)}}function PI(t){const e=t.type,{mixins:n,extends:l}=e,{mixins:m,optionsCache:d,config:{optionMergeStrategies:x}}=t.appContext,s=d.get(e);let T;return s?T=s:!m.length&&!n&&!l?T=e:(T={},m.length&&m.forEach(E=>Xb(T,E,x,!0)),Xb(T,e,x)),eo(e)&&d.set(e,T),T}function Xb(t,e,n,l=!1){const{mixins:m,extends:d}=e;d&&Xb(t,d,n,!0),m&&m.forEach(x=>Xb(t,x,n,!0));for(const x in e)if(!(l&&x==="expose")){const s=bL[x]||n&&n[x];t[x]=s?s(t[x],e[x]):e[x]}return t}const bL={data:ZT,props:XT,emits:XT,methods:Bg,computed:Bg,beforeCreate:Ps,created:Ps,beforeMount:Ps,mounted:Ps,beforeUpdate:Ps,updated:Ps,beforeDestroy:Ps,beforeUnmount:Ps,destroyed:Ps,unmounted:Ps,activated:Ps,deactivated:Ps,errorCaptured:Ps,serverPrefetch:Ps,components:Bg,directives:Bg,watch:xL,provide:ZT,inject:_L};function ZT(t,e){return e?t?function(){return Wo(Hr(t)?t.call(this,this):t,Hr(e)?e.call(this,this):e)}:e:t}function _L(t,e){return Bg(Gw(t),Gw(e))}function Gw(t){if(xr(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ps(t,e){return t?[...new Set([].concat(t,e))]:e}function Bg(t,e){return t?Wo(Object.create(null),t,e):e}function XT(t,e){return t?xr(t)&&xr(e)?[...new Set([...t,...e])]:Wo(Object.create(null),WT(t),WT(e??{})):e}function xL(t,e){if(!t)return e;if(!e)return t;const n=Wo(Object.create(null),t);for(const l in e)n[l]=Ps(t[l],e[l]);return n}function AI(){return{app:null,config:{isNativeTag:uD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wL=0;function SL(t,e){return function(l,m=null){Hr(l)||(l=Wo({},l)),m!=null&&!eo(m)&&(m=null);const d=AI(),x=new WeakSet,s=[];let T=!1;const E=d.app={_uid:wL++,_component:l,_props:m,_container:null,_context:d,_instance:null,version:nO,get config(){return d.config},set config(A){},use(A,...z){return x.has(A)||(A&&Hr(A.install)?(x.add(A),A.install(E,...z)):Hr(A)&&(x.add(A),A(E,...z))),E},mixin(A){return d.mixins.includes(A)||d.mixins.push(A),E},component(A,z){return z?(d.components[A]=z,E):d.components[A]},directive(A,z){return z?(d.directives[A]=z,E):d.directives[A]},mount(A,z,j){if(!T){const U=E._ceVNode||ge(l,m);return U.appContext=d,j===!0?j="svg":j===!1&&(j=void 0),t(U,A,j),T=!0,E._container=A,A.__vue_app__=E,P_(U.component)}},onUnmount(A){s.push(A)},unmount(){T&&(sl(s,E._instance,16),t(null,E._container),delete E._container.__vue_app__)},provide(A,z){return d.provides[A]=z,E},runWithContext(A){const z=bh;bh=E;try{return A()}finally{bh=z}}};return E}}let bh=null;function Wu(t,e){if(ns){let n=ns.provides;const l=ns.parent&&ns.parent.provides;l===n&&(n=ns.provides=Object.create(l)),n[t]=e}}function Gs(t,e,n=!1){const l=ns||Go;if(l||bh){const m=bh?bh._context.provides:l?l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(m&&t in m)return m[t];if(arguments.length>1)return n&&Hr(e)?e.call(l&&l.proxy):e}}function CL(){return!!(ns||Go||bh)}const RI={},MI=()=>Object.create(RI),DI=t=>Object.getPrototypeOf(t)===RI;function kL(t,e,n,l=!1){const m={},d=MI();t.propsDefaults=Object.create(null),LI(t,e,m,d);for(const x in t.propsOptions[0])x in m||(m[x]=void 0);n?t.props=l?m:sI(m):t.type.props?t.props=m:t.props=d,t.attrs=d}function TL(t,e,n,l){const{props:m,attrs:d,vnode:{patchFlag:x}}=t,s=Li(m),[T]=t.propsOptions;let E=!1;if((l||x>0)&&!(x&16)){if(x&8){const A=t.vnode.dynamicProps;for(let z=0;z<A.length;z++){let j=A[z];if(E_(t.emitsOptions,j))continue;const U=e[j];if(T)if(Gi(d,j))U!==d[j]&&(d[j]=U,E=!0);else{const K=Aa(j);m[K]=Ww(T,s,K,U,t,!1)}else U!==d[j]&&(d[j]=U,E=!0)}}}else{LI(t,e,m,d)&&(E=!0);let A;for(const z in s)(!e||!Gi(e,z)&&((A=Yu(z))===z||!Gi(e,A)))&&(T?n&&(n[z]!==void 0||n[A]!==void 0)&&(m[z]=Ww(T,s,z,void 0,t,!0)):delete m[z]);if(d!==s)for(const z in d)(!e||!Gi(e,z))&&(delete d[z],E=!0)}E&&Pc(t.attrs,"set","")}function LI(t,e,n,l){const[m,d]=t.propsOptions;let x=!1,s;if(e)for(let T in e){if(Ng(T))continue;const E=e[T];let A;m&&Gi(m,A=Aa(T))?!d||!d.includes(A)?n[A]=E:(s||(s={}))[A]=E:E_(t.emitsOptions,T)||(!(T in l)||E!==l[T])&&(l[T]=E,x=!0)}if(d){const T=Li(n),E=s||Qi;for(let A=0;A<d.length;A++){const z=d[A];n[z]=Ww(m,T,z,E[z],t,!Gi(E,z))}}return x}function Ww(t,e,n,l,m,d){const x=t[n];if(x!=null){const s=Gi(x,"default");if(s&&l===void 0){const T=x.default;if(x.type!==Function&&!x.skipFactory&&Hr(T)){const{propsDefaults:E}=m;if(n in E)l=E[n];else{const A=r0(m);l=E[n]=T.call(null,e),A()}}else l=T;m.ce&&m.ce._setProp(n,l)}x[0]&&(d&&!s?l=!1:x[1]&&(l===""||l===Yu(n))&&(l=!0))}return l}const EL=new WeakMap;function OI(t,e,n=!1){const l=n?EL:e.propsCache,m=l.get(t);if(m)return m;const d=t.props,x={},s=[];let T=!1;if(!Hr(t)){const A=z=>{T=!0;const[j,U]=OI(z,e,!0);Wo(x,j),U&&s.push(...U)};!n&&e.mixins.length&&e.mixins.forEach(A),t.extends&&A(t.extends),t.mixins&&t.mixins.forEach(A)}if(!d&&!T)return eo(t)&&l.set(t,cf),cf;if(xr(d))for(let A=0;A<d.length;A++){const z=Aa(d[A]);YT(z)&&(x[z]=Qi)}else if(d)for(const A in d){const z=Aa(A);if(YT(z)){const j=d[A],U=x[z]=xr(j)||Hr(j)?{type:j}:Wo({},j),K=U.type;let oe=!1,fe=!0;if(xr(K))for(let me=0;me<K.length;++me){const ne=K[me],te=Hr(ne)&&ne.name;if(te==="Boolean"){oe=!0;break}else te==="String"&&(fe=!1)}else oe=Hr(K)&&K.name==="Boolean";U[0]=oe,U[1]=fe,(oe||Gi(U,"default"))&&s.push(z)}}const E=[x,s];return eo(t)&&l.set(t,E),E}function YT(t){return t[0]!=="$"&&!Ng(t)}const zI=t=>t[0]==="_"||t==="$stable",aS=t=>xr(t)?t.map(Nl):[Nl(t)],IL=(t,e,n)=>{if(e._n)return e;const l=Xe((...m)=>aS(e(...m)),n);return l._c=!1,l},BI=(t,e,n)=>{const l=t._ctx;for(const m in t){if(zI(m))continue;const d=t[m];if(Hr(d))e[m]=IL(m,d,l);else if(d!=null){const x=aS(d);e[m]=()=>x}}},FI=(t,e)=>{const n=aS(e);t.slots.default=()=>n},$I=(t,e,n)=>{for(const l in e)(n||l!=="_")&&(t[l]=e[l])},PL=(t,e,n)=>{const l=t.slots=MI();if(t.vnode.shapeFlag&32){const m=e._;m?($I(l,e,n),n&&$E(l,"_",m,!0)):BI(e,l)}else e&&FI(t,e)},AL=(t,e,n)=>{const{vnode:l,slots:m}=t;let d=!0,x=Qi;if(l.shapeFlag&32){const s=e._;s?n&&s===1?d=!1:$I(m,e,n):(d=!e.$stable,BI(e,m)),x=e}else e&&(FI(t,e),x={default:1});if(d)for(const s in m)!zI(s)&&x[s]==null&&delete m[s]},As=qL;function RL(t){return ML(t)}function ML(t,e){const n=__();n.__VUE__=!0;const{insert:l,remove:m,patchProp:d,createElement:x,createText:s,createComment:T,setText:E,setElementText:A,parentNode:z,nextSibling:j,setScopeId:U=Hl,insertStaticContent:K}=t,oe=(He,qe,xt,Xt=null,Kt=null,Jt=null,On=void 0,_n=null,xn=!!qe.dynamicChildren)=>{if(He===qe)return;He&&!fh(He,qe)&&(Xt=$t(He),Or(He,Kt,Jt,!0),He=null),qe.patchFlag===-2&&(xn=!1,qe.dynamicChildren=null);const{type:gn,ref:cr,shapeFlag:zn}=qe;switch(gn){case I_:fe(He,qe,xt,Xt);break;case Ls:me(He,qe,xt,Xt);break;case Ib:He==null&&ne(qe,xt,Xt,On);break;case an:ft(He,qe,xt,Xt,Kt,Jt,On,_n,xn);break;default:zn&1?ze(He,qe,xt,Xt,Kt,Jt,On,_n,xn):zn&6?ut(He,qe,xt,Xt,Kt,Jt,On,_n,xn):(zn&64||zn&128)&&gn.process(He,qe,xt,Xt,Kt,Jt,On,_n,xn,Yn)}cr!=null&&Kt&&Zb(cr,He&&He.ref,Jt,qe||He,!qe)},fe=(He,qe,xt,Xt)=>{if(He==null)l(qe.el=s(qe.children),xt,Xt);else{const Kt=qe.el=He.el;qe.children!==He.children&&E(Kt,qe.children)}},me=(He,qe,xt,Xt)=>{He==null?l(qe.el=T(qe.children||""),xt,Xt):qe.el=He.el},ne=(He,qe,xt,Xt)=>{[He.el,He.anchor]=K(He.children,qe,xt,Xt,He.el,He.anchor)},te=({el:He,anchor:qe},xt,Xt)=>{let Kt;for(;He&&He!==qe;)Kt=j(He),l(He,xt,Xt),He=Kt;l(qe,xt,Xt)},re=({el:He,anchor:qe})=>{let xt;for(;He&&He!==qe;)xt=j(He),m(He),He=xt;m(qe)},ze=(He,qe,xt,Xt,Kt,Jt,On,_n,xn)=>{qe.type==="svg"?On="svg":qe.type==="math"&&(On="mathml"),He==null?_t(qe,xt,Xt,Kt,Jt,On,_n,xn):Ce(He,qe,Kt,Jt,On,_n,xn)},_t=(He,qe,xt,Xt,Kt,Jt,On,_n)=>{let xn,gn;const{props:cr,shapeFlag:zn,transition:Hn,dirs:yr}=He;if(xn=He.el=x(He.type,Jt,cr&&cr.is,cr),zn&8?A(xn,He.children):zn&16&&he(He.children,xn,null,Xt,Kt,sw(He,Jt),On,_n),yr&&lh(He,null,Xt,"created"),Me(xn,He,He.scopeId,On,Xt),cr){for(const Wr in cr)Wr!=="value"&&!Ng(Wr)&&d(xn,Wr,null,cr[Wr],Jt,Xt);"value"in cr&&d(xn,"value",null,cr.value,Jt),(gn=cr.onVnodeBeforeMount)&&Ll(gn,Xt,He)}yr&&lh(He,null,Xt,"beforeMount");const Gr=DL(Kt,Hn);Gr&&Hn.beforeEnter(xn),l(xn,qe,xt),((gn=cr&&cr.onVnodeMounted)||Gr||yr)&&As(()=>{gn&&Ll(gn,Xt,He),Gr&&Hn.enter(xn),yr&&lh(He,null,Xt,"mounted")},Kt)},Me=(He,qe,xt,Xt,Kt)=>{if(xt&&U(He,xt),Xt)for(let Jt=0;Jt<Xt.length;Jt++)U(He,Xt[Jt]);if(Kt){let Jt=Kt.subTree;if(qe===Jt||qI(Jt.type)&&(Jt.ssContent===qe||Jt.ssFallback===qe)){const On=Kt.vnode;Me(He,On,On.scopeId,On.slotScopeIds,Kt.parent)}}},he=(He,qe,xt,Xt,Kt,Jt,On,_n,xn=0)=>{for(let gn=xn;gn<He.length;gn++){const cr=He[gn]=_n?Fu(He[gn]):Nl(He[gn]);oe(null,cr,qe,xt,Xt,Kt,Jt,On,_n)}},Ce=(He,qe,xt,Xt,Kt,Jt,On)=>{const _n=qe.el=He.el;let{patchFlag:xn,dynamicChildren:gn,dirs:cr}=qe;xn|=He.patchFlag&16;const zn=He.props||Qi,Hn=qe.props||Qi;let yr;if(xt&&ch(xt,!1),(yr=Hn.onVnodeBeforeUpdate)&&Ll(yr,xt,qe,He),cr&&lh(qe,He,xt,"beforeUpdate"),xt&&ch(xt,!0),(zn.innerHTML&&Hn.innerHTML==null||zn.textContent&&Hn.textContent==null)&&A(_n,""),gn?$e(He.dynamicChildren,gn,_n,xt,Xt,sw(qe,Kt),Jt):On||Et(He,qe,_n,null,xt,Xt,sw(qe,Kt),Jt,!1),xn>0){if(xn&16)Je(_n,zn,Hn,xt,Kt);else if(xn&2&&zn.class!==Hn.class&&d(_n,"class",null,Hn.class,Kt),xn&4&&d(_n,"style",zn.style,Hn.style,Kt),xn&8){const Gr=qe.dynamicProps;for(let Wr=0;Wr<Gr.length;Wr++){const _i=Gr[Wr],so=zn[_i],fo=Hn[_i];(fo!==so||_i==="value")&&d(_n,_i,so,fo,Kt,xt)}}xn&1&&He.children!==qe.children&&A(_n,qe.children)}else!On&&gn==null&&Je(_n,zn,Hn,xt,Kt);((yr=Hn.onVnodeUpdated)||cr)&&As(()=>{yr&&Ll(yr,xt,qe,He),cr&&lh(qe,He,xt,"updated")},Xt)},$e=(He,qe,xt,Xt,Kt,Jt,On)=>{for(let _n=0;_n<qe.length;_n++){const xn=He[_n],gn=qe[_n],cr=xn.el&&(xn.type===an||!fh(xn,gn)||xn.shapeFlag&70)?z(xn.el):xt;oe(xn,gn,cr,null,Xt,Kt,Jt,On,!0)}},Je=(He,qe,xt,Xt,Kt)=>{if(qe!==xt){if(qe!==Qi)for(const Jt in qe)!Ng(Jt)&&!(Jt in xt)&&d(He,Jt,qe[Jt],null,Kt,Xt);for(const Jt in xt){if(Ng(Jt))continue;const On=xt[Jt],_n=qe[Jt];On!==_n&&Jt!=="value"&&d(He,Jt,_n,On,Kt,Xt)}"value"in xt&&d(He,"value",qe.value,xt.value,Kt)}},ft=(He,qe,xt,Xt,Kt,Jt,On,_n,xn)=>{const gn=qe.el=He?He.el:s(""),cr=qe.anchor=He?He.anchor:s("");let{patchFlag:zn,dynamicChildren:Hn,slotScopeIds:yr}=qe;yr&&(_n=_n?_n.concat(yr):yr),He==null?(l(gn,xt,Xt),l(cr,xt,Xt),he(qe.children||[],xt,cr,Kt,Jt,On,_n,xn)):zn>0&&zn&64&&Hn&&He.dynamicChildren?($e(He.dynamicChildren,Hn,xt,Kt,Jt,On,_n),(qe.key!=null||Kt&&qe===Kt.subTree)&&lS(He,qe,!0)):Et(He,qe,xt,cr,Kt,Jt,On,_n,xn)},ut=(He,qe,xt,Xt,Kt,Jt,On,_n,xn)=>{qe.slotScopeIds=_n,He==null?qe.shapeFlag&512?Kt.ctx.activate(qe,xt,Xt,On,xn):Qe(qe,xt,Xt,Kt,Jt,On,xn):Qt(He,qe,xn)},Qe=(He,qe,xt,Xt,Kt,Jt,On)=>{const _n=He.component=ZL(He,Xt,Kt);if(C_(He)&&(_n.ctx.renderer=Yn),XL(_n,!1,On),_n.asyncDep){if(Kt&&Kt.registerDep(_n,kt,On),!He.el){const xn=_n.subTree=ge(Ls);me(null,xn,qe,xt)}}else kt(_n,He,qe,xt,Kt,Jt,On)},Qt=(He,qe,xt)=>{const Xt=qe.component=He.component;if(jL(He,qe,xt))if(Xt.asyncDep&&!Xt.asyncResolved){wt(Xt,qe,xt);return}else Xt.next=qe,Xt.update();else qe.el=He.el,Xt.vnode=qe},kt=(He,qe,xt,Xt,Kt,Jt,On)=>{const _n=()=>{if(He.isMounted){let{next:zn,bu:Hn,u:yr,parent:Gr,vnode:Wr}=He;{const ao=NI(He);if(ao){zn&&(zn.el=Wr.el,wt(He,zn,On)),ao.asyncDep.then(()=>{He.isUnmounted||_n()});return}}let _i=zn,so;ch(He,!1),zn?(zn.el=Wr.el,wt(He,zn,On)):zn=Wr,Hn&&Tb(Hn),(so=zn.props&&zn.props.onVnodeBeforeUpdate)&&Ll(so,Gr,zn,Wr),ch(He,!0);const fo=QT(He),Ui=He.subTree;He.subTree=fo,oe(Ui,fo,z(Ui.el),$t(Ui),He,Kt,Jt),zn.el=fo.el,_i===null&&UL(He,fo.el),yr&&As(yr,Kt),(so=zn.props&&zn.props.onVnodeUpdated)&&As(()=>Ll(so,Gr,zn,Wr),Kt)}else{let zn;const{el:Hn,props:yr}=qe,{bm:Gr,m:Wr,parent:_i,root:so,type:fo}=He,Ui=hf(qe);ch(He,!1),Gr&&Tb(Gr),!Ui&&(zn=yr&&yr.onVnodeBeforeMount)&&Ll(zn,_i,qe),ch(He,!0);{so.ce&&so.ce._injectChildStyle(fo);const ao=He.subTree=QT(He);oe(null,ao,xt,Xt,He,Kt,Jt),qe.el=ao.el}if(Wr&&As(Wr,Kt),!Ui&&(zn=yr&&yr.onVnodeMounted)){const ao=qe;As(()=>Ll(zn,_i,ao),Kt)}(qe.shapeFlag&256||_i&&hf(_i.vnode)&&_i.vnode.shapeFlag&256)&&He.a&&As(He.a,Kt),He.isMounted=!0,qe=xt=Xt=null}};He.scope.on();const xn=He.effect=new GE(_n);He.scope.off();const gn=He.update=xn.run.bind(xn),cr=He.job=xn.runIfDirty.bind(xn);cr.i=He,cr.id=He.uid,xn.scheduler=()=>rS(cr),ch(He,!0),gn()},wt=(He,qe,xt)=>{qe.component=He;const Xt=He.vnode.props;He.vnode=qe,He.next=null,TL(He,qe.props,Xt,xt),AL(He,qe.children,xt),Ju(),VT(He),Qu()},Et=(He,qe,xt,Xt,Kt,Jt,On,_n,xn=!1)=>{const gn=He&&He.children,cr=He?He.shapeFlag:0,zn=qe.children,{patchFlag:Hn,shapeFlag:yr}=qe;if(Hn>0){if(Hn&128){In(gn,zn,xt,Xt,Kt,Jt,On,_n,xn);return}else if(Hn&256){on(gn,zn,xt,Xt,Kt,Jt,On,_n,xn);return}}yr&8?(cr&16&&kn(gn,Kt,Jt),zn!==gn&&A(xt,zn)):cr&16?yr&16?In(gn,zn,xt,Xt,Kt,Jt,On,_n,xn):kn(gn,Kt,Jt,!0):(cr&8&&A(xt,""),yr&16&&he(zn,xt,Xt,Kt,Jt,On,_n,xn))},on=(He,qe,xt,Xt,Kt,Jt,On,_n,xn)=>{He=He||cf,qe=qe||cf;const gn=He.length,cr=qe.length,zn=Math.min(gn,cr);let Hn;for(Hn=0;Hn<zn;Hn++){const yr=qe[Hn]=xn?Fu(qe[Hn]):Nl(qe[Hn]);oe(He[Hn],yr,xt,null,Kt,Jt,On,_n,xn)}gn>cr?kn(He,Kt,Jt,!0,!1,zn):he(qe,xt,Xt,Kt,Jt,On,_n,xn,zn)},In=(He,qe,xt,Xt,Kt,Jt,On,_n,xn)=>{let gn=0;const cr=qe.length;let zn=He.length-1,Hn=cr-1;for(;gn<=zn&&gn<=Hn;){const yr=He[gn],Gr=qe[gn]=xn?Fu(qe[gn]):Nl(qe[gn]);if(fh(yr,Gr))oe(yr,Gr,xt,null,Kt,Jt,On,_n,xn);else break;gn++}for(;gn<=zn&&gn<=Hn;){const yr=He[zn],Gr=qe[Hn]=xn?Fu(qe[Hn]):Nl(qe[Hn]);if(fh(yr,Gr))oe(yr,Gr,xt,null,Kt,Jt,On,_n,xn);else break;zn--,Hn--}if(gn>zn){if(gn<=Hn){const yr=Hn+1,Gr=yr<cr?qe[yr].el:Xt;for(;gn<=Hn;)oe(null,qe[gn]=xn?Fu(qe[gn]):Nl(qe[gn]),xt,Gr,Kt,Jt,On,_n,xn),gn++}}else if(gn>Hn)for(;gn<=zn;)Or(He[gn],Kt,Jt,!0),gn++;else{const yr=gn,Gr=gn,Wr=new Map;for(gn=Gr;gn<=Hn;gn++){const mo=qe[gn]=xn?Fu(qe[gn]):Nl(qe[gn]);mo.key!=null&&Wr.set(mo.key,gn)}let _i,so=0;const fo=Hn-Gr+1;let Ui=!1,ao=0;const ws=new Array(fo);for(gn=0;gn<fo;gn++)ws[gn]=0;for(gn=yr;gn<=zn;gn++){const mo=He[gn];if(so>=fo){Or(mo,Kt,Jt,!0);continue}let ko;if(mo.key!=null)ko=Wr.get(mo.key);else for(_i=Gr;_i<=Hn;_i++)if(ws[_i-Gr]===0&&fh(mo,qe[_i])){ko=_i;break}ko===void 0?Or(mo,Kt,Jt,!0):(ws[ko-Gr]=gn+1,ko>=ao?ao=ko:Ui=!0,oe(mo,qe[ko],xt,null,Kt,Jt,On,_n,xn),so++)}const Ys=Ui?LL(ws):cf;for(_i=Ys.length-1,gn=fo-1;gn>=0;gn--){const mo=Gr+gn,ko=qe[mo],Ma=mo+1<cr?qe[mo+1].el:Xt;ws[gn]===0?oe(null,ko,xt,Ma,Kt,Jt,On,_n,xn):Ui&&(_i<0||gn!==Ys[_i]?ir(ko,xt,Ma,2):_i--)}}},ir=(He,qe,xt,Xt,Kt=null)=>{const{el:Jt,type:On,transition:_n,children:xn,shapeFlag:gn}=He;if(gn&6){ir(He.component.subTree,qe,xt,Xt);return}if(gn&128){He.suspense.move(qe,xt,Xt);return}if(gn&64){On.move(He,qe,xt,Yn);return}if(On===an){l(Jt,qe,xt);for(let zn=0;zn<xn.length;zn++)ir(xn[zn],qe,xt,Xt);l(He.anchor,qe,xt);return}if(On===Ib){te(He,qe,xt);return}if(Xt!==2&&gn&1&&_n)if(Xt===0)_n.beforeEnter(Jt),l(Jt,qe,xt),As(()=>_n.enter(Jt),Kt);else{const{leave:zn,delayLeave:Hn,afterLeave:yr}=_n,Gr=()=>l(Jt,qe,xt),Wr=()=>{zn(Jt,()=>{Gr(),yr&&yr()})};Hn?Hn(Jt,Gr,Wr):Wr()}else l(Jt,qe,xt)},Or=(He,qe,xt,Xt=!1,Kt=!1)=>{const{type:Jt,props:On,ref:_n,children:xn,dynamicChildren:gn,shapeFlag:cr,patchFlag:zn,dirs:Hn,cacheIndex:yr}=He;if(zn===-2&&(Kt=!1),_n!=null&&Zb(_n,null,xt,He,!0),yr!=null&&(qe.renderCache[yr]=void 0),cr&256){qe.ctx.deactivate(He);return}const Gr=cr&1&&Hn,Wr=!hf(He);let _i;if(Wr&&(_i=On&&On.onVnodeBeforeUnmount)&&Ll(_i,qe,He),cr&6)pn(He.component,xt,Xt);else{if(cr&128){He.suspense.unmount(xt,Xt);return}Gr&&lh(He,null,qe,"beforeUnmount"),cr&64?He.type.remove(He,qe,xt,Yn,Xt):gn&&!gn.hasOnce&&(Jt!==an||zn>0&&zn&64)?kn(gn,qe,xt,!1,!0):(Jt===an&&zn&384||!Kt&&cr&16)&&kn(xn,qe,xt),Xt&&oo(He)}(Wr&&(_i=On&&On.onVnodeUnmounted)||Gr)&&As(()=>{_i&&Ll(_i,qe,He),Gr&&lh(He,null,qe,"unmounted")},xt)},oo=He=>{const{type:qe,el:xt,anchor:Xt,transition:Kt}=He;if(qe===an){Un(xt,Xt);return}if(qe===Ib){re(He);return}const Jt=()=>{m(xt),Kt&&!Kt.persisted&&Kt.afterLeave&&Kt.afterLeave()};if(He.shapeFlag&1&&Kt&&!Kt.persisted){const{leave:On,delayLeave:_n}=Kt,xn=()=>On(xt,Jt);_n?_n(He.el,Jt,xn):xn()}else Jt()},Un=(He,qe)=>{let xt;for(;He!==qe;)xt=j(He),m(He),He=xt;m(qe)},pn=(He,qe,xt)=>{const{bum:Xt,scope:Kt,job:Jt,subTree:On,um:_n,m:xn,a:gn}=He;JT(xn),JT(gn),Xt&&Tb(Xt),Kt.stop(),Jt&&(Jt.flags|=8,Or(On,He,qe,xt)),_n&&As(_n,qe),As(()=>{He.isUnmounted=!0},qe),qe&&qe.pendingBranch&&!qe.isUnmounted&&He.asyncDep&&!He.asyncResolved&&He.suspenseId===qe.pendingId&&(qe.deps--,qe.deps===0&&qe.resolve())},kn=(He,qe,xt,Xt=!1,Kt=!1,Jt=0)=>{for(let On=Jt;On<He.length;On++)Or(He[On],qe,xt,Xt,Kt)},$t=He=>{if(He.shapeFlag&6)return $t(He.component.subTree);if(He.shapeFlag&128)return He.suspense.next();const qe=j(He.anchor||He.el),xt=qe&&qe[fI];return xt?j(xt):qe};let Ln=!1;const cn=(He,qe,xt)=>{He==null?qe._vnode&&Or(qe._vnode,null,null,!0):oe(qe._vnode||null,He,qe,null,null,null,xt),qe._vnode=He,Ln||(Ln=!0,VT(),dI(),Ln=!1)},Yn={p:oe,um:Or,m:ir,r:oo,mt:Qe,mc:he,pc:Et,pbc:$e,n:$t,o:t};return{render:cn,hydrate:void 0,createApp:SL(cn)}}function sw({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ch({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function DL(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function lS(t,e,n=!1){const l=t.children,m=e.children;if(xr(l)&&xr(m))for(let d=0;d<l.length;d++){const x=l[d];let s=m[d];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=m[d]=Fu(m[d]),s.el=x.el),!n&&s.patchFlag!==-2&&lS(x,s)),s.type===I_&&(s.el=x.el)}}function LL(t){const e=t.slice(),n=[0];let l,m,d,x,s;const T=t.length;for(l=0;l<T;l++){const E=t[l];if(E!==0){if(m=n[n.length-1],t[m]<E){e[l]=m,n.push(l);continue}for(d=0,x=n.length-1;d<x;)s=d+x>>1,t[n[s]]<E?d=s+1:x=s;E<t[n[d]]&&(d>0&&(e[l]=n[d-1]),n[d]=l)}}for(d=n.length,x=n[d-1];d-- >0;)n[d]=x,x=e[x];return n}function NI(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:NI(e)}function JT(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const OL=Symbol.for("v-scx"),zL=()=>Gs(OL);function ho(t,e,n){return VI(t,e,n)}function VI(t,e,n=Qi){const{immediate:l,deep:m,flush:d,once:x}=n,s=Wo({},n),T=e&&l||!e&&d!=="post";let E;if(ly){if(d==="sync"){const U=zL();E=U.__watcherHandles||(U.__watcherHandles=[])}else if(!T){const U=()=>{};return U.stop=Hl,U.resume=Hl,U.pause=Hl,U}}const A=ns;s.call=(U,K,oe)=>sl(U,A,K,oe);let z=!1;d==="post"?s.scheduler=U=>{As(U,A&&A.suspense)}:d!=="sync"&&(z=!0,s.scheduler=(U,K)=>{K?U():rS(U)}),s.augmentJob=U=>{e&&(U.flags|=4),z&&(U.flags|=2,A&&(U.id=A.uid,U.i=A))};const j=QD(t,e,s);return ly&&(E?E.push(j):T&&j()),j}function BL(t,e,n){const l=this.proxy,m=po(t)?t.includes(".")?jI(l,t):()=>l[t]:t.bind(l,l);let d;Hr(e)?d=e:(d=e.handler,n=e);const x=r0(this),s=VI(m,d.bind(l),n);return x(),s}function jI(t,e){const n=e.split(".");return()=>{let l=t;for(let m=0;m<n.length&&l;m++)l=l[n[m]];return l}}const FL=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Aa(e)}Modifiers`]||t[`${Yu(e)}Modifiers`];function $L(t,e,...n){if(t.isUnmounted)return;const l=t.vnode.props||Qi;let m=n;const d=e.startsWith("update:"),x=d&&FL(l,e.slice(7));x&&(x.trim&&(m=n.map(A=>po(A)?A.trim():A)),x.number&&(m=n.map(qb)));let s,T=l[s=kb(e)]||l[s=kb(Aa(e))];!T&&d&&(T=l[s=kb(Yu(e))]),T&&sl(T,t,6,m);const E=l[s+"Once"];if(E){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,sl(E,t,6,m)}}function UI(t,e,n=!1){const l=e.emitsCache,m=l.get(t);if(m!==void 0)return m;const d=t.emits;let x={},s=!1;if(!Hr(t)){const T=E=>{const A=UI(E,e,!0);A&&(s=!0,Wo(x,A))};!n&&e.mixins.length&&e.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}return!d&&!s?(eo(t)&&l.set(t,null),null):(xr(d)?d.forEach(T=>x[T]=null):Wo(x,d),eo(t)&&l.set(t,x),x)}function E_(t,e){return!t||!g_(e)?!1:(e=e.slice(2).replace(/Once$/,""),Gi(t,e[0].toLowerCase()+e.slice(1))||Gi(t,Yu(e))||Gi(t,e))}function QT(t){const{type:e,vnode:n,proxy:l,withProxy:m,propsOptions:[d],slots:x,attrs:s,emit:T,render:E,renderCache:A,props:z,data:j,setupState:U,ctx:K,inheritAttrs:oe}=t,fe=Kb(t);let me,ne;try{if(n.shapeFlag&4){const re=m||l,ze=re;me=Nl(E.call(ze,re,A,z,U,j,K)),ne=s}else{const re=e;me=Nl(re.length>1?re(z,{attrs:s,slots:x,emit:T}):re(z,null)),ne=e.props?s:NL(s)}}catch(re){Hg.length=0,S_(re,t,1),me=ge(Ls)}let te=me;if(ne&&oe!==!1){const re=Object.keys(ne),{shapeFlag:ze}=te;re.length&&ze&7&&(d&&re.some(H2)&&(ne=VL(ne,d)),te=Zu(te,ne,!1,!0))}return n.dirs&&(te=Zu(te,null,!1,!0),te.dirs=te.dirs?te.dirs.concat(n.dirs):n.dirs),n.transition&&wh(te,n.transition),me=te,Kb(fe),me}const NL=t=>{let e;for(const n in t)(n==="class"||n==="style"||g_(n))&&((e||(e={}))[n]=t[n]);return e},VL=(t,e)=>{const n={};for(const l in t)(!H2(l)||!(l.slice(9)in e))&&(n[l]=t[l]);return n};function jL(t,e,n){const{props:l,children:m,component:d}=t,{props:x,children:s,patchFlag:T}=e,E=d.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&T>=0){if(T&1024)return!0;if(T&16)return l?e5(l,x,E):!!x;if(T&8){const A=e.dynamicProps;for(let z=0;z<A.length;z++){const j=A[z];if(x[j]!==l[j]&&!E_(E,j))return!0}}}else return(m||s)&&(!s||!s.$stable)?!0:l===x?!1:l?x?e5(l,x,E):!0:!!x;return!1}function e5(t,e,n){const l=Object.keys(e);if(l.length!==Object.keys(t).length)return!0;for(let m=0;m<l.length;m++){const d=l[m];if(e[d]!==t[d]&&!E_(n,d))return!0}return!1}function UL({vnode:t,parent:e},n){for(;e;){const l=e.subTree;if(l.suspense&&l.suspense.activeBranch===t&&(l.el=t.el),l===t)(t=e.vnode).el=n,e=e.parent;else break}}const qI=t=>t.__isSuspense;function qL(t,e){e&&e.pendingBranch?xr(t)?e.effects.push(...t):e.effects.push(t):nL(t)}const an=Symbol.for("v-fgt"),I_=Symbol.for("v-txt"),Ls=Symbol.for("v-cmt"),Ib=Symbol.for("v-stc"),Hg=[];let ua=null;function X(t=!1){Hg.push(ua=t?null:[])}function HL(){Hg.pop(),ua=Hg[Hg.length-1]||null}let sy=1;function t5(t,e=!1){sy+=t,t<0&&ua&&e&&(ua.hasOnce=!0)}function HI(t){return t.dynamicChildren=sy>0?ua||cf:null,HL(),sy>0&&ua&&ua.push(t),t}function pe(t,e,n,l,m,d){return HI(M(t,e,n,l,m,d,!0))}function bt(t,e,n,l,m){return HI(ge(t,e,n,l,m,!0))}function ay(t){return t?t.__v_isVNode===!0:!1}function fh(t,e){return t.type===e.type&&t.key===e.key}const GI=({key:t})=>t??null,Pb=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?po(t)||Mo(t)||Hr(t)?{i:Go,r:t,k:e,f:!!n}:t:null);function M(t,e=null,n=null,l=0,m=null,d=t===an?0:1,x=!1,s=!1){const T={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&GI(e),ref:e&&Pb(e),scopeId:pI,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:l,dynamicProps:m,dynamicChildren:null,appContext:null,ctx:Go};return s?(cS(T,n),d&128&&t.normalize(T)):n&&(T.shapeFlag|=po(n)?8:16),sy>0&&!x&&ua&&(T.patchFlag>0||d&6)&&T.patchFlag!==32&&ua.push(T),T}const ge=GL;function GL(t,e=null,n=null,l=0,m=null,d=!1){if((!t||t===TI)&&(t=Ls),ay(t)){const s=Zu(t,e,!0);return n&&cS(s,n),sy>0&&!d&&ua&&(s.shapeFlag&6?ua[ua.indexOf(t)]=s:ua.push(s)),s.patchFlag=-2,s}if(tO(t)&&(t=t.__vccOpts),e){e=mh(e);let{class:s,style:T}=e;s&&!po(s)&&(e.class=vn(s)),eo(T)&&(tS(T)&&!xr(T)&&(T=Wo({},T)),e.style=Wl(T))}const x=po(t)?1:qI(t)?128:mI(t)?64:eo(t)?4:Hr(t)?2:0;return M(t,e,n,l,m,x,d,!0)}function mh(t){return t?tS(t)||DI(t)?Wo({},t):t:null}function Zu(t,e,n=!1,l=!1){const{props:m,ref:d,patchFlag:x,children:s,transition:T}=t,E=e?ie(m||{},e):m,A={__v_isVNode:!0,__v_skip:!0,type:t.type,props:E,key:E&&GI(E),ref:e&&e.ref?n&&d?xr(d)?d.concat(Pb(e)):[d,Pb(e)]:Pb(e):d,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==an?x===-1?16:x|16:x,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:T,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Zu(t.ssContent),ssFallback:t.ssFallback&&Zu(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return T&&l&&wh(A,T.clone(A)),A}function tr(t=" ",e=0){return ge(I_,null,t,e)}function da(t,e){const n=ge(Ib,null,t);return n.staticCount=e,n}function Ct(t="",e=!1){return e?(X(),bt(Ls,null,t)):ge(Ls,null,t)}function Nl(t){return t==null||typeof t=="boolean"?ge(Ls):xr(t)?ge(an,null,t.slice()):ay(t)?Fu(t):ge(I_,null,String(t))}function Fu(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Zu(t)}function cS(t,e){let n=0;const{shapeFlag:l}=t;if(e==null)e=null;else if(xr(e))n=16;else if(typeof e=="object")if(l&65){const m=e.default;m&&(m._c&&(m._d=!1),cS(t,m()),m._c&&(m._d=!0));return}else{n=32;const m=e._;!m&&!DI(e)?e._ctx=Go:m===3&&Go&&(Go.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Hr(e)?(e={default:e,_ctx:Go},n=32):(e=String(e),l&64?(n=16,e=[tr(e)]):n=8);t.children=e,t.shapeFlag|=n}function ie(...t){const e={};for(let n=0;n<t.length;n++){const l=t[n];for(const m in l)if(m==="class")e.class!==l.class&&(e.class=vn([e.class,l.class]));else if(m==="style")e.style=Wl([e.style,l.style]);else if(g_(m)){const d=e[m],x=l[m];x&&d!==x&&!(xr(d)&&d.includes(x))&&(e[m]=d?[].concat(d,x):x)}else m!==""&&(e[m]=l[m])}return e}function Ll(t,e,n,l=null){sl(t,e,7,[n,l])}const WL=AI();let KL=0;function ZL(t,e,n){const l=t.type,m=(e?e.appContext:t.appContext)||WL,d={uid:KL++,vnode:t,type:l,parent:e,appContext:m,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new UE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(m.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:OI(l,m),emitsOptions:UI(l,m),emit:null,emitted:null,propsDefaults:Qi,inheritAttrs:l.inheritAttrs,ctx:Qi,data:Qi,props:Qi,attrs:Qi,slots:Qi,refs:Qi,setupState:Qi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=e?e.root:d,d.emit=$L.bind(null,d),t.ce&&t.ce(d),d}let ns=null;const uS=()=>ns||Go;let Yb,Kw;{const t=__(),e=(n,l)=>{let m;return(m=t[n])||(m=t[n]=[]),m.push(l),d=>{m.length>1?m.forEach(x=>x(d)):m[0](d)}};Yb=e("__VUE_INSTANCE_SETTERS__",n=>ns=n),Kw=e("__VUE_SSR_SETTERS__",n=>ly=n)}const r0=t=>{const e=ns;return Yb(t),t.scope.on(),()=>{t.scope.off(),Yb(e)}},n5=()=>{ns&&ns.scope.off(),Yb(null)};function WI(t){return t.vnode.shapeFlag&4}let ly=!1;function XL(t,e=!1,n=!1){e&&Kw(e);const{props:l,children:m}=t.vnode,d=WI(t);kL(t,l,d,e),PL(t,m,n);const x=d?YL(t,e):void 0;return e&&Kw(!1),x}function YL(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,gL);const{setup:l}=n;if(l){Ju();const m=t.setupContext=l.length>1?QL(t):null,d=r0(t),x=t0(l,t,0,[t.props,m]),s=zE(x);if(Qu(),d(),(s||t.sp)&&!hf(t)&&SI(t),s){if(x.then(n5,n5),e)return x.then(T=>{r5(t,T)}).catch(T=>{S_(T,t,0)});t.asyncDep=x}else r5(t,x)}else KI(t)}function r5(t,e,n){Hr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:eo(e)&&(t.setupState=lI(e)),KI(t)}function KI(t,e,n){const l=t.type;t.render||(t.render=l.render||Hl);{const m=r0(t);Ju();try{yL(t)}finally{Qu(),m()}}}const JL={get(t,e){return ys(t,"get",""),t[e]}};function QL(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,JL),slots:t.slots,emit:t.emit,expose:e}}function P_(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(lI(nS(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in qg)return qg[n](t)},has(e,n){return n in e||n in qg}})):t.proxy}function eO(t,e=!0){return Hr(t)?t.displayName||t.name:t.name||e&&t.__name}function tO(t){return Hr(t)&&"__vccOpts"in t}const ki=(t,e)=>YD(t,e,ly);function Ds(t,e,n){const l=arguments.length;return l===2?eo(e)&&!xr(e)?ay(e)?ge(t,null,[e]):ge(t,e):ge(t,null,e):(l>3?n=Array.prototype.slice.call(arguments,2):l===3&&ay(n)&&(n=[n]),ge(t,e,n))}const nO="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zw;const i5=typeof window<"u"&&window.trustedTypes;if(i5)try{Zw=i5.createPolicy("vue",{createHTML:t=>t})}catch{}const ZI=Zw?t=>Zw.createHTML(t):t=>t,rO="http://www.w3.org/2000/svg",iO="http://www.w3.org/1998/Math/MathML",Ic=typeof document<"u"?document:null,o5=Ic&&Ic.createElement("template"),oO={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,l)=>{const m=e==="svg"?Ic.createElementNS(rO,t):e==="mathml"?Ic.createElementNS(iO,t):n?Ic.createElement(t,{is:n}):Ic.createElement(t);return t==="select"&&l&&l.multiple!=null&&m.setAttribute("multiple",l.multiple),m},createText:t=>Ic.createTextNode(t),createComment:t=>Ic.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ic.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,l,m,d){const x=n?n.previousSibling:e.lastChild;if(m&&(m===d||m.nextSibling))for(;e.insertBefore(m.cloneNode(!0),n),!(m===d||!(m=m.nextSibling)););else{o5.innerHTML=ZI(l==="svg"?`<svg>${t}</svg>`:l==="mathml"?`<math>${t}</math>`:t);const s=o5.content;if(l==="svg"||l==="mathml"){const T=s.firstChild;for(;T.firstChild;)s.appendChild(T.firstChild);s.removeChild(T)}e.insertBefore(s,n)}return[x?x.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Ru="transition",kg="animation",bf=Symbol("_vtc"),XI={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},YI=Wo({},bI,XI),sO=t=>(t.displayName="Transition",t.props=YI,t),Eh=sO((t,{slots:e})=>Ds(sL,JI(t),e)),uh=(t,e=[])=>{xr(t)?t.forEach(n=>n(...e)):t&&t(...e)},s5=t=>t?xr(t)?t.some(e=>e.length>1):t.length>1:!1;function JI(t){const e={};for(const ft in t)ft in XI||(e[ft]=t[ft]);if(t.css===!1)return e;const{name:n="v",type:l,duration:m,enterFromClass:d=`${n}-enter-from`,enterActiveClass:x=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:T=d,appearActiveClass:E=x,appearToClass:A=s,leaveFromClass:z=`${n}-leave-from`,leaveActiveClass:j=`${n}-leave-active`,leaveToClass:U=`${n}-leave-to`}=t,K=aO(m),oe=K&&K[0],fe=K&&K[1],{onBeforeEnter:me,onEnter:ne,onEnterCancelled:te,onLeave:re,onLeaveCancelled:ze,onBeforeAppear:_t=me,onAppear:Me=ne,onAppearCancelled:he=te}=e,Ce=(ft,ut,Qe,Qt)=>{ft._enterCancelled=Qt,Lu(ft,ut?A:s),Lu(ft,ut?E:x),Qe&&Qe()},$e=(ft,ut)=>{ft._isLeaving=!1,Lu(ft,z),Lu(ft,U),Lu(ft,j),ut&&ut()},Je=ft=>(ut,Qe)=>{const Qt=ft?Me:ne,kt=()=>Ce(ut,ft,Qe);uh(Qt,[ut,kt]),a5(()=>{Lu(ut,ft?T:d),Bl(ut,ft?A:s),s5(Qt)||l5(ut,l,oe,kt)})};return Wo(e,{onBeforeEnter(ft){uh(me,[ft]),Bl(ft,d),Bl(ft,x)},onBeforeAppear(ft){uh(_t,[ft]),Bl(ft,T),Bl(ft,E)},onEnter:Je(!1),onAppear:Je(!0),onLeave(ft,ut){ft._isLeaving=!0;const Qe=()=>$e(ft,ut);Bl(ft,z),ft._enterCancelled?(Bl(ft,j),Xw()):(Xw(),Bl(ft,j)),a5(()=>{ft._isLeaving&&(Lu(ft,z),Bl(ft,U),s5(re)||l5(ft,l,fe,Qe))}),uh(re,[ft,Qe])},onEnterCancelled(ft){Ce(ft,!1,void 0,!0),uh(te,[ft])},onAppearCancelled(ft){Ce(ft,!0,void 0,!0),uh(he,[ft])},onLeaveCancelled(ft){$e(ft),uh(ze,[ft])}})}function aO(t){if(t==null)return null;if(eo(t))return[aw(t.enter),aw(t.leave)];{const e=aw(t);return[e,e]}}function aw(t){return mD(t)}function Bl(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[bf]||(t[bf]=new Set)).add(e)}function Lu(t,e){e.split(/\s+/).forEach(l=>l&&t.classList.remove(l));const n=t[bf];n&&(n.delete(e),n.size||(t[bf]=void 0))}function a5(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let lO=0;function l5(t,e,n,l){const m=t._endId=++lO,d=()=>{m===t._endId&&l()};if(n!=null)return setTimeout(d,n);const{type:x,timeout:s,propCount:T}=QI(t,e);if(!x)return l();const E=x+"end";let A=0;const z=()=>{t.removeEventListener(E,j),d()},j=U=>{U.target===t&&++A>=T&&z()};setTimeout(()=>{A<T&&z()},s+1),t.addEventListener(E,j)}function QI(t,e){const n=window.getComputedStyle(t),l=K=>(n[K]||"").split(", "),m=l(`${Ru}Delay`),d=l(`${Ru}Duration`),x=c5(m,d),s=l(`${kg}Delay`),T=l(`${kg}Duration`),E=c5(s,T);let A=null,z=0,j=0;e===Ru?x>0&&(A=Ru,z=x,j=d.length):e===kg?E>0&&(A=kg,z=E,j=T.length):(z=Math.max(x,E),A=z>0?x>E?Ru:kg:null,j=A?A===Ru?d.length:T.length:0);const U=A===Ru&&/\b(transform|all)(,|$)/.test(l(`${Ru}Property`).toString());return{type:A,timeout:z,propCount:j,hasTransform:U}}function c5(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,l)=>u5(n)+u5(t[l])))}function u5(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Xw(){return document.body.offsetHeight}function cO(t,e,n){const l=t[bf];l&&(e=(e?[e,...l]:[...l]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Jb=Symbol("_vod"),eP=Symbol("_vsh"),cy={beforeMount(t,{value:e},{transition:n}){t[Jb]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Tg(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:l}){!e!=!n&&(l?e?(l.beforeEnter(t),Tg(t,!0),l.enter(t)):l.leave(t,()=>{Tg(t,!1)}):Tg(t,e))},beforeUnmount(t,{value:e}){Tg(t,e)}};function Tg(t,e){t.style.display=e?t[Jb]:"none",t[eP]=!e}const uO=Symbol(""),dO=/(^|;)\s*display\s*:/;function hO(t,e,n){const l=t.style,m=po(n);let d=!1;if(n&&!m){if(e)if(po(e))for(const x of e.split(";")){const s=x.slice(0,x.indexOf(":")).trim();n[s]==null&&Ab(l,s,"")}else for(const x in e)n[x]==null&&Ab(l,x,"");for(const x in n)x==="display"&&(d=!0),Ab(l,x,n[x])}else if(m){if(e!==n){const x=l[uO];x&&(n+=";"+x),l.cssText=n,d=dO.test(n)}}else e&&t.removeAttribute("style");Jb in t&&(t[Jb]=d?l.display:"",t[eP]&&(l.display="none"))}const d5=/\s*!important$/;function Ab(t,e,n){if(xr(n))n.forEach(l=>Ab(t,e,l));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const l=pO(t,e);d5.test(n)?t.setProperty(Yu(l),n.replace(d5,""),"important"):t[l]=n}}const h5=["Webkit","Moz","ms"],lw={};function pO(t,e){const n=lw[e];if(n)return n;let l=Aa(e);if(l!=="filter"&&l in t)return lw[e]=l;l=b_(l);for(let m=0;m<h5.length;m++){const d=h5[m]+l;if(d in t)return lw[e]=d}return e}const p5="http://www.w3.org/1999/xlink";function f5(t,e,n,l,m,d=xD(e)){l&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(p5,e.slice(6,e.length)):t.setAttributeNS(p5,e,n):n==null||d&&!NE(n)?t.removeAttribute(e):t.setAttribute(e,d?"":ol(n)?String(n):n)}function m5(t,e,n,l,m){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?ZI(n):n);return}const d=t.tagName;if(e==="value"&&d!=="PROGRESS"&&!d.includes("-")){const s=d==="OPTION"?t.getAttribute("value")||"":t.value,T=n==null?t.type==="checkbox"?"on":"":String(n);(s!==T||!("_value"in t))&&(t.value=T),n==null&&t.removeAttribute(e),t._value=n;return}let x=!1;if(n===""||n==null){const s=typeof t[e];s==="boolean"?n=NE(n):n==null&&s==="string"?(n="",x=!0):s==="number"&&(n=0,x=!0)}try{t[e]=n}catch{}x&&t.removeAttribute(m||e)}function gh(t,e,n,l){t.addEventListener(e,n,l)}function fO(t,e,n,l){t.removeEventListener(e,n,l)}const g5=Symbol("_vei");function mO(t,e,n,l,m=null){const d=t[g5]||(t[g5]={}),x=d[e];if(l&&x)x.value=l;else{const[s,T]=gO(e);if(l){const E=d[e]=bO(l,m);gh(t,s,E,T)}else x&&(fO(t,s,x,T),d[e]=void 0)}}const y5=/(?:Once|Passive|Capture)$/;function gO(t){let e;if(y5.test(t)){e={};let l;for(;l=t.match(y5);)t=t.slice(0,t.length-l[0].length),e[l[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Yu(t.slice(2)),e]}let cw=0;const yO=Promise.resolve(),vO=()=>cw||(yO.then(()=>cw=0),cw=Date.now());function bO(t,e){const n=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=n.attached)return;sl(_O(l,n.value),e,5,[l])};return n.value=t,n.attached=vO(),n}function _O(t,e){if(xr(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(l=>m=>!m._stopped&&l&&l(m))}else return e}const v5=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,xO=(t,e,n,l,m,d)=>{const x=m==="svg";e==="class"?cO(t,l,x):e==="style"?hO(t,n,l):g_(e)?H2(e)||mO(t,e,n,l,d):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):wO(t,e,l,x))?(m5(t,e,l),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&f5(t,e,l,x,d,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!po(l))?m5(t,Aa(e),l,d,e):(e==="true-value"?t._trueValue=l:e==="false-value"&&(t._falseValue=l),f5(t,e,l,x))};function wO(t,e,n,l){if(l)return!!(e==="innerHTML"||e==="textContent"||e in t&&v5(e)&&Hr(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const m=t.tagName;if(m==="IMG"||m==="VIDEO"||m==="CANVAS"||m==="SOURCE")return!1}return v5(e)&&po(n)?!1:e in t}const tP=new WeakMap,nP=new WeakMap,Qb=Symbol("_moveCb"),b5=Symbol("_enterCb"),SO=t=>(delete t.props.mode,t),CO=SO({name:"TransitionGroup",props:Wo({},YI,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=uS(),l=vI();let m,d;return T_(()=>{if(!m.length)return;const x=t.moveClass||`${t.name||"v"}-move`;if(!PO(m[0].el,n.vnode.el,x))return;m.forEach(TO),m.forEach(EO);const s=m.filter(IO);Xw(),s.forEach(T=>{const E=T.el,A=E.style;Bl(E,x),A.transform=A.webkitTransform=A.transitionDuration="";const z=E[Qb]=j=>{j&&j.target!==E||(!j||/transform$/.test(j.propertyName))&&(E.removeEventListener("transitionend",z),E[Qb]=null,Lu(E,x))};E.addEventListener("transitionend",z)})}),()=>{const x=Li(t),s=JI(x);let T=x.tag||an;if(m=[],d)for(let E=0;E<d.length;E++){const A=d[E];A.el&&A.el instanceof Element&&(m.push(A),wh(A,oy(A,s,l,n)),tP.set(A,A.el.getBoundingClientRect()))}d=e.default?iS(e.default()):[];for(let E=0;E<d.length;E++){const A=d[E];A.key!=null&&wh(A,oy(A,s,l,n))}return ge(T,null,d)}}}),kO=CO;function TO(t){const e=t.el;e[Qb]&&e[Qb](),e[b5]&&e[b5]()}function EO(t){nP.set(t,t.el.getBoundingClientRect())}function IO(t){const e=tP.get(t),n=nP.get(t),l=e.left-n.left,m=e.top-n.top;if(l||m){const d=t.el.style;return d.transform=d.webkitTransform=`translate(${l}px,${m}px)`,d.transitionDuration="0s",t}}function PO(t,e,n){const l=t.cloneNode(),m=t[bf];m&&m.forEach(s=>{s.split(/\s+/).forEach(T=>T&&l.classList.remove(T))}),n.split(/\s+/).forEach(s=>s&&l.classList.add(s)),l.style.display="none";const d=e.nodeType===1?e:e.parentNode;d.appendChild(l);const{hasTransform:x}=QI(l);return d.removeChild(l),x}const e_=t=>{const e=t.props["onUpdate:modelValue"]||!1;return xr(e)?n=>Tb(e,n):e};function AO(t){t.target.composing=!0}function _5(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const pf=Symbol("_assign"),ms={created(t,{modifiers:{lazy:e,trim:n,number:l}},m){t[pf]=e_(m);const d=l||m.props&&m.props.type==="number";gh(t,e?"change":"input",x=>{if(x.target.composing)return;let s=t.value;n&&(s=s.trim()),d&&(s=qb(s)),t[pf](s)}),n&&gh(t,"change",()=>{t.value=t.value.trim()}),e||(gh(t,"compositionstart",AO),gh(t,"compositionend",_5),gh(t,"change",_5))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:l,trim:m,number:d}},x){if(t[pf]=e_(x),t.composing)return;const s=(d||t.type==="number")&&!/^0\d/.test(t.value)?qb(t.value):t.value,T=e??"";s!==T&&(document.activeElement===t&&t.type!=="range"&&(l&&e===n||m&&t.value.trim()===T)||(t.value=T))}},ff={deep:!0,created(t,{value:e,modifiers:{number:n}},l){const m=y_(e);gh(t,"change",()=>{const d=Array.prototype.filter.call(t.options,x=>x.selected).map(x=>n?qb(t_(x)):t_(x));t[pf](t.multiple?m?new Set(d):d:d[0]),t._assigning=!0,Th(()=>{t._assigning=!1})}),t[pf]=e_(l)},mounted(t,{value:e}){x5(t,e)},beforeUpdate(t,e,n){t[pf]=e_(n)},updated(t,{value:e}){t._assigning||x5(t,e)}};function x5(t,e){const n=t.multiple,l=xr(e);if(!(n&&!l&&!y_(e))){for(let m=0,d=t.options.length;m<d;m++){const x=t.options[m],s=t_(x);if(n)if(l){const T=typeof s;T==="string"||T==="number"?x.selected=e.some(E=>String(E)===String(s)):x.selected=SD(e,s)>-1}else x.selected=e.has(s);else if(x_(t_(x),e)){t.selectedIndex!==m&&(t.selectedIndex=m);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function t_(t){return"_value"in t?t._value:t.value}const RO=["ctrl","shift","alt","meta"],MO={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>RO.some(n=>t[`${n}Key`]&&!e.includes(n))},Ih=(t,e)=>{const n=t._withMods||(t._withMods={}),l=e.join(".");return n[l]||(n[l]=(m,...d)=>{for(let x=0;x<e.length;x++){const s=MO[e[x]];if(s&&s(m,e))return}return t(m,...d)})},DO={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qi=(t,e)=>{const n=t._withKeys||(t._withKeys={}),l=e.join(".");return n[l]||(n[l]=m=>{if(!("key"in m))return;const d=Yu(m.key);if(e.some(x=>x===d||DO[x]===d))return t(m)})},LO=Wo({patchProp:xO},oO);let w5;function OO(){return w5||(w5=RL(LO))}const zO=(...t)=>{const e=OO().createApp(...t),{mount:n}=e;return e.mount=l=>{const m=FO(l);if(!m)return;const d=e._component;!Hr(d)&&!d.render&&!d.template&&(d.template=m.innerHTML),m.nodeType===1&&(m.textContent="");const x=n(m,!1,BO(m));return m instanceof Element&&(m.removeAttribute("v-cloak"),m.setAttribute("data-v-app","")),x},e};function BO(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function FO(t){return po(t)?document.querySelector(t):t}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const rf=typeof document<"u";function rP(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function $O(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&rP(t.default)}const Hi=Object.assign;function uw(t,e){const n={};for(const l in e){const m=e[l];n[l]=al(m)?m.map(t):t(m)}return n}const Gg=()=>{},al=Array.isArray,iP=/#/g,NO=/&/g,VO=/\//g,jO=/=/g,UO=/\?/g,oP=/\+/g,qO=/%5B/g,HO=/%5D/g,sP=/%5E/g,GO=/%60/g,aP=/%7B/g,WO=/%7C/g,lP=/%7D/g,KO=/%20/g;function dS(t){return encodeURI(""+t).replace(WO,"|").replace(qO,"[").replace(HO,"]")}function ZO(t){return dS(t).replace(aP,"{").replace(lP,"}").replace(sP,"^")}function Yw(t){return dS(t).replace(oP,"%2B").replace(KO,"+").replace(iP,"%23").replace(NO,"%26").replace(GO,"`").replace(aP,"{").replace(lP,"}").replace(sP,"^")}function XO(t){return Yw(t).replace(jO,"%3D")}function YO(t){return dS(t).replace(iP,"%23").replace(UO,"%3F")}function JO(t){return t==null?"":YO(t).replace(VO,"%2F")}function uy(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const QO=/\/$/,ez=t=>t.replace(QO,"");function dw(t,e,n="/"){let l,m={},d="",x="";const s=e.indexOf("#");let T=e.indexOf("?");return s<T&&s>=0&&(T=-1),T>-1&&(l=e.slice(0,T),d=e.slice(T+1,s>-1?s:e.length),m=t(d)),s>-1&&(l=l||e.slice(0,s),x=e.slice(s,e.length)),l=iz(l??e,n),{fullPath:l+(d&&"?")+d+x,path:l,query:m,hash:uy(x)}}function tz(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function S5(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function nz(t,e,n){const l=e.matched.length-1,m=n.matched.length-1;return l>-1&&l===m&&_f(e.matched[l],n.matched[m])&&cP(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function _f(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function cP(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!rz(t[n],e[n]))return!1;return!0}function rz(t,e){return al(t)?C5(t,e):al(e)?C5(e,t):t===e}function C5(t,e){return al(e)?t.length===e.length&&t.every((n,l)=>n===e[l]):t.length===1&&t[0]===e}function iz(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),l=t.split("/"),m=l[l.length-1];(m===".."||m===".")&&l.push("");let d=n.length-1,x,s;for(x=0;x<l.length;x++)if(s=l[x],s!==".")if(s==="..")d>1&&d--;else break;return n.slice(0,d).join("/")+"/"+l.slice(x).join("/")}const Mu={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var dy;(function(t){t.pop="pop",t.push="push"})(dy||(dy={}));var Wg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Wg||(Wg={}));function oz(t){if(!t)if(rf){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),ez(t)}const sz=/^[^#]+#/;function az(t,e){return t.replace(sz,"#")+e}function lz(t,e){const n=document.documentElement.getBoundingClientRect(),l=t.getBoundingClientRect();return{behavior:e.behavior,left:l.left-n.left-(e.left||0),top:l.top-n.top-(e.top||0)}}const A_=()=>({left:window.scrollX,top:window.scrollY});function cz(t){let e;if("el"in t){const n=t.el,l=typeof n=="string"&&n.startsWith("#"),m=typeof n=="string"?l?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!m)return;e=lz(m,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function k5(t,e){return(history.state?history.state.position-e:-1)+t}const Jw=new Map;function uz(t,e){Jw.set(t,e)}function dz(t){const e=Jw.get(t);return Jw.delete(t),e}let hz=()=>location.protocol+"//"+location.host;function uP(t,e){const{pathname:n,search:l,hash:m}=e,d=t.indexOf("#");if(d>-1){let s=m.includes(t.slice(d))?t.slice(d).length:1,T=m.slice(s);return T[0]!=="/"&&(T="/"+T),S5(T,"")}return S5(n,t)+l+m}function pz(t,e,n,l){let m=[],d=[],x=null;const s=({state:j})=>{const U=uP(t,location),K=n.value,oe=e.value;let fe=0;if(j){if(n.value=U,e.value=j,x&&x===K){x=null;return}fe=oe?j.position-oe.position:0}else l(U);m.forEach(me=>{me(n.value,K,{delta:fe,type:dy.pop,direction:fe?fe>0?Wg.forward:Wg.back:Wg.unknown})})};function T(){x=n.value}function E(j){m.push(j);const U=()=>{const K=m.indexOf(j);K>-1&&m.splice(K,1)};return d.push(U),U}function A(){const{history:j}=window;j.state&&j.replaceState(Hi({},j.state,{scroll:A_()}),"")}function z(){for(const j of d)j();d=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",A)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",A,{passive:!0}),{pauseListeners:T,listen:E,destroy:z}}function T5(t,e,n,l=!1,m=!1){return{back:t,current:e,forward:n,replaced:l,position:window.history.length,scroll:m?A_():null}}function fz(t){const{history:e,location:n}=window,l={value:uP(t,n)},m={value:e.state};m.value||d(l.value,{back:null,current:l.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function d(T,E,A){const z=t.indexOf("#"),j=z>-1?(n.host&&document.querySelector("base")?t:t.slice(z))+T:hz()+t+T;try{e[A?"replaceState":"pushState"](E,"",j),m.value=E}catch(U){console.error(U),n[A?"replace":"assign"](j)}}function x(T,E){const A=Hi({},e.state,T5(m.value.back,T,m.value.forward,!0),E,{position:m.value.position});d(T,A,!0),l.value=T}function s(T,E){const A=Hi({},m.value,e.state,{forward:T,scroll:A_()});d(A.current,A,!0);const z=Hi({},T5(l.value,T,null),{position:A.position+1},E);d(T,z,!1),l.value=T}return{location:l,state:m,push:s,replace:x}}function mz(t){t=oz(t);const e=fz(t),n=pz(t,e.state,e.location,e.replace);function l(d,x=!0){x||n.pauseListeners(),history.go(d)}const m=Hi({location:"",base:t,go:l,createHref:az.bind(null,t)},e,n);return Object.defineProperty(m,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(m,"state",{enumerable:!0,get:()=>e.state.value}),m}function gz(t){return typeof t=="string"||t&&typeof t=="object"}function dP(t){return typeof t=="string"||typeof t=="symbol"}const hP=Symbol("");var E5;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(E5||(E5={}));function xf(t,e){return Hi(new Error,{type:t,[hP]:!0},e)}function kc(t,e){return t instanceof Error&&hP in t&&(e==null||!!(t.type&e))}const I5="[^/]+?",yz={sensitive:!1,strict:!1,start:!0,end:!0},vz=/[.+*?^${}()[\]/\\]/g;function bz(t,e){const n=Hi({},yz,e),l=[];let m=n.start?"^":"";const d=[];for(const E of t){const A=E.length?[]:[90];n.strict&&!E.length&&(m+="/");for(let z=0;z<E.length;z++){const j=E[z];let U=40+(n.sensitive?.25:0);if(j.type===0)z||(m+="/"),m+=j.value.replace(vz,"\\$&"),U+=40;else if(j.type===1){const{value:K,repeatable:oe,optional:fe,regexp:me}=j;d.push({name:K,repeatable:oe,optional:fe});const ne=me||I5;if(ne!==I5){U+=10;try{new RegExp(`(${ne})`)}catch(re){throw new Error(`Invalid custom RegExp for param "${K}" (${ne}): `+re.message)}}let te=oe?`((?:${ne})(?:/(?:${ne}))*)`:`(${ne})`;z||(te=fe&&E.length<2?`(?:/${te})`:"/"+te),fe&&(te+="?"),m+=te,U+=20,fe&&(U+=-8),oe&&(U+=-20),ne===".*"&&(U+=-50)}A.push(U)}l.push(A)}if(n.strict&&n.end){const E=l.length-1;l[E][l[E].length-1]+=.7000000000000001}n.strict||(m+="/?"),n.end?m+="$":n.strict&&!m.endsWith("/")&&(m+="(?:/|$)");const x=new RegExp(m,n.sensitive?"":"i");function s(E){const A=E.match(x),z={};if(!A)return null;for(let j=1;j<A.length;j++){const U=A[j]||"",K=d[j-1];z[K.name]=U&&K.repeatable?U.split("/"):U}return z}function T(E){let A="",z=!1;for(const j of t){(!z||!A.endsWith("/"))&&(A+="/"),z=!1;for(const U of j)if(U.type===0)A+=U.value;else if(U.type===1){const{value:K,repeatable:oe,optional:fe}=U,me=K in E?E[K]:"";if(al(me)&&!oe)throw new Error(`Provided param "${K}" is an array but it is not repeatable (* or + modifiers)`);const ne=al(me)?me.join("/"):me;if(!ne)if(fe)j.length<2&&(A.endsWith("/")?A=A.slice(0,-1):z=!0);else throw new Error(`Missing required param "${K}"`);A+=ne}}return A||"/"}return{re:x,score:l,keys:d,parse:s,stringify:T}}function _z(t,e){let n=0;for(;n<t.length&&n<e.length;){const l=e[n]-t[n];if(l)return l;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function pP(t,e){let n=0;const l=t.score,m=e.score;for(;n<l.length&&n<m.length;){const d=_z(l[n],m[n]);if(d)return d;n++}if(Math.abs(m.length-l.length)===1){if(P5(l))return 1;if(P5(m))return-1}return m.length-l.length}function P5(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const xz={type:0,value:""},wz=/[a-zA-Z0-9_]/;function Sz(t){if(!t)return[[]];if(t==="/")return[[xz]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(U){throw new Error(`ERR (${n})/"${E}": ${U}`)}let n=0,l=n;const m=[];let d;function x(){d&&m.push(d),d=[]}let s=0,T,E="",A="";function z(){E&&(n===0?d.push({type:0,value:E}):n===1||n===2||n===3?(d.length>1&&(T==="*"||T==="+")&&e(`A repeatable param (${E}) must be alone in its segment. eg: '/:ids+.`),d.push({type:1,value:E,regexp:A,repeatable:T==="*"||T==="+",optional:T==="*"||T==="?"})):e("Invalid state to consume buffer"),E="")}function j(){E+=T}for(;s<t.length;){if(T=t[s++],T==="\\"&&n!==2){l=n,n=4;continue}switch(n){case 0:T==="/"?(E&&z(),x()):T===":"?(z(),n=1):j();break;case 4:j(),n=l;break;case 1:T==="("?n=2:wz.test(T)?j():(z(),n=0,T!=="*"&&T!=="?"&&T!=="+"&&s--);break;case 2:T===")"?A[A.length-1]=="\\"?A=A.slice(0,-1)+T:n=3:A+=T;break;case 3:z(),n=0,T!=="*"&&T!=="?"&&T!=="+"&&s--,A="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${E}"`),z(),x(),m}function Cz(t,e,n){const l=bz(Sz(t.path),n),m=Hi(l,{record:t,parent:e,children:[],alias:[]});return e&&!m.record.aliasOf==!e.record.aliasOf&&e.children.push(m),m}function kz(t,e){const n=[],l=new Map;e=D5({strict:!1,end:!0,sensitive:!1},e);function m(z){return l.get(z)}function d(z,j,U){const K=!U,oe=R5(z);oe.aliasOf=U&&U.record;const fe=D5(e,z),me=[oe];if("alias"in z){const re=typeof z.alias=="string"?[z.alias]:z.alias;for(const ze of re)me.push(R5(Hi({},oe,{components:U?U.record.components:oe.components,path:ze,aliasOf:U?U.record:oe})))}let ne,te;for(const re of me){const{path:ze}=re;if(j&&ze[0]!=="/"){const _t=j.record.path,Me=_t[_t.length-1]==="/"?"":"/";re.path=j.record.path+(ze&&Me+ze)}if(ne=Cz(re,j,fe),U?U.alias.push(ne):(te=te||ne,te!==ne&&te.alias.push(ne),K&&z.name&&!M5(ne)&&x(z.name)),fP(ne)&&T(ne),oe.children){const _t=oe.children;for(let Me=0;Me<_t.length;Me++)d(_t[Me],ne,U&&U.children[Me])}U=U||ne}return te?()=>{x(te)}:Gg}function x(z){if(dP(z)){const j=l.get(z);j&&(l.delete(z),n.splice(n.indexOf(j),1),j.children.forEach(x),j.alias.forEach(x))}else{const j=n.indexOf(z);j>-1&&(n.splice(j,1),z.record.name&&l.delete(z.record.name),z.children.forEach(x),z.alias.forEach(x))}}function s(){return n}function T(z){const j=Iz(z,n);n.splice(j,0,z),z.record.name&&!M5(z)&&l.set(z.record.name,z)}function E(z,j){let U,K={},oe,fe;if("name"in z&&z.name){if(U=l.get(z.name),!U)throw xf(1,{location:z});fe=U.record.name,K=Hi(A5(j.params,U.keys.filter(te=>!te.optional).concat(U.parent?U.parent.keys.filter(te=>te.optional):[]).map(te=>te.name)),z.params&&A5(z.params,U.keys.map(te=>te.name))),oe=U.stringify(K)}else if(z.path!=null)oe=z.path,U=n.find(te=>te.re.test(oe)),U&&(K=U.parse(oe),fe=U.record.name);else{if(U=j.name?l.get(j.name):n.find(te=>te.re.test(j.path)),!U)throw xf(1,{location:z,currentLocation:j});fe=U.record.name,K=Hi({},j.params,z.params),oe=U.stringify(K)}const me=[];let ne=U;for(;ne;)me.unshift(ne.record),ne=ne.parent;return{name:fe,path:oe,params:K,matched:me,meta:Ez(me)}}t.forEach(z=>d(z));function A(){n.length=0,l.clear()}return{addRoute:d,resolve:E,removeRoute:x,clearRoutes:A,getRoutes:s,getRecordMatcher:m}}function A5(t,e){const n={};for(const l of e)l in t&&(n[l]=t[l]);return n}function R5(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Tz(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Tz(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const l in t.components)e[l]=typeof n=="object"?n[l]:n;return e}function M5(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Ez(t){return t.reduce((e,n)=>Hi(e,n.meta),{})}function D5(t,e){const n={};for(const l in t)n[l]=l in e?e[l]:t[l];return n}function Iz(t,e){let n=0,l=e.length;for(;n!==l;){const d=n+l>>1;pP(t,e[d])<0?l=d:n=d+1}const m=Pz(t);return m&&(l=e.lastIndexOf(m,l-1)),l}function Pz(t){let e=t;for(;e=e.parent;)if(fP(e)&&pP(t,e)===0)return e}function fP({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Az(t){const e={};if(t===""||t==="?")return e;const l=(t[0]==="?"?t.slice(1):t).split("&");for(let m=0;m<l.length;++m){const d=l[m].replace(oP," "),x=d.indexOf("="),s=uy(x<0?d:d.slice(0,x)),T=x<0?null:uy(d.slice(x+1));if(s in e){let E=e[s];al(E)||(E=e[s]=[E]),E.push(T)}else e[s]=T}return e}function L5(t){let e="";for(let n in t){const l=t[n];if(n=XO(n),l==null){l!==void 0&&(e+=(e.length?"&":"")+n);continue}(al(l)?l.map(d=>d&&Yw(d)):[l&&Yw(l)]).forEach(d=>{d!==void 0&&(e+=(e.length?"&":"")+n,d!=null&&(e+="="+d))})}return e}function Rz(t){const e={};for(const n in t){const l=t[n];l!==void 0&&(e[n]=al(l)?l.map(m=>m==null?null:""+m):l==null?l:""+l)}return e}const Mz=Symbol(""),O5=Symbol(""),R_=Symbol(""),hS=Symbol(""),Qw=Symbol("");function Eg(){let t=[];function e(l){return t.push(l),()=>{const m=t.indexOf(l);m>-1&&t.splice(m,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function $u(t,e,n,l,m,d=x=>x()){const x=l&&(l.enterCallbacks[m]=l.enterCallbacks[m]||[]);return()=>new Promise((s,T)=>{const E=j=>{j===!1?T(xf(4,{from:n,to:e})):j instanceof Error?T(j):gz(j)?T(xf(2,{from:e,to:j})):(x&&l.enterCallbacks[m]===x&&typeof j=="function"&&x.push(j),s())},A=d(()=>t.call(l&&l.instances[m],e,n,E));let z=Promise.resolve(A);t.length<3&&(z=z.then(E)),z.catch(j=>T(j))})}function hw(t,e,n,l,m=d=>d()){const d=[];for(const x of t)for(const s in x.components){let T=x.components[s];if(!(e!=="beforeRouteEnter"&&!x.instances[s]))if(rP(T)){const A=(T.__vccOpts||T)[e];A&&d.push($u(A,n,l,x,s,m))}else{let E=T();d.push(()=>E.then(A=>{if(!A)throw new Error(`Couldn't resolve component "${s}" at "${x.path}"`);const z=$O(A)?A.default:A;x.mods[s]=A,x.components[s]=z;const U=(z.__vccOpts||z)[e];return U&&$u(U,n,l,x,s,m)()}))}}return d}function z5(t){const e=Gs(R_),n=Gs(hS),l=ki(()=>{const T=Ie(t.to);return e.resolve(T)}),m=ki(()=>{const{matched:T}=l.value,{length:E}=T,A=T[E-1],z=n.matched;if(!A||!z.length)return-1;const j=z.findIndex(_f.bind(null,A));if(j>-1)return j;const U=B5(T[E-2]);return E>1&&B5(A)===U&&z[z.length-1].path!==U?z.findIndex(_f.bind(null,T[E-2])):j}),d=ki(()=>m.value>-1&&Bz(n.params,l.value.params)),x=ki(()=>m.value>-1&&m.value===n.matched.length-1&&cP(n.params,l.value.params));function s(T={}){if(zz(T)){const E=e[Ie(t.replace)?"replace":"push"](Ie(t.to)).catch(Gg);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>E),E}return Promise.resolve()}return{route:l,href:ki(()=>l.value.href),isActive:d,isExactActive:x,navigate:s}}function Dz(t){return t.length===1?t[0]:t}const Lz=Xr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:z5,setup(t,{slots:e}){const n=Tf(z5(t)),{options:l}=Gs(R_),m=ki(()=>({[F5(t.activeClass,l.linkActiveClass,"router-link-active")]:n.isActive,[F5(t.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const d=e.default&&Dz(e.default(n));return t.custom?d:Ds("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:m.value},d)}}}),Oz=Lz;function zz(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Bz(t,e){for(const n in e){const l=e[n],m=t[n];if(typeof l=="string"){if(l!==m)return!1}else if(!al(m)||m.length!==l.length||l.some((d,x)=>d!==m[x]))return!1}return!0}function B5(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const F5=(t,e,n)=>t??e??n,Fz=Xr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const l=Gs(Qw),m=ki(()=>t.route||l.value),d=Gs(O5,0),x=ki(()=>{let E=Ie(d);const{matched:A}=m.value;let z;for(;(z=A[E])&&!z.components;)E++;return E}),s=ki(()=>m.value.matched[x.value]);Wu(O5,ki(()=>x.value+1)),Wu(Mz,s),Wu(Qw,m);const T=Ke();return ho(()=>[T.value,s.value,t.name],([E,A,z],[j,U,K])=>{A&&(A.instances[z]=E,U&&U!==A&&E&&E===j&&(A.leaveGuards.size||(A.leaveGuards=U.leaveGuards),A.updateGuards.size||(A.updateGuards=U.updateGuards))),E&&A&&(!U||!_f(A,U)||!j)&&(A.enterCallbacks[z]||[]).forEach(oe=>oe(E))},{flush:"post"}),()=>{const E=m.value,A=t.name,z=s.value,j=z&&z.components[A];if(!j)return $5(n.default,{Component:j,route:E});const U=z.props[A],K=U?U===!0?E.params:typeof U=="function"?U(E):U:null,fe=Ds(j,Hi({},K,e,{onVnodeUnmounted:me=>{me.component.isUnmounted&&(z.instances[A]=null)},ref:T}));return $5(n.default,{Component:fe,route:E})||fe}}});function $5(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const mP=Fz;function $z(t){const e=kz(t.routes,t),n=t.parseQuery||Az,l=t.stringifyQuery||L5,m=t.history,d=Eg(),x=Eg(),s=Eg(),T=qD(Mu);let E=Mu;rf&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const A=uw.bind(null,$t=>""+$t),z=uw.bind(null,JO),j=uw.bind(null,uy);function U($t,Ln){let cn,Yn;return dP($t)?(cn=e.getRecordMatcher($t),Yn=Ln):Yn=$t,e.addRoute(Yn,cn)}function K($t){const Ln=e.getRecordMatcher($t);Ln&&e.removeRoute(Ln)}function oe(){return e.getRoutes().map($t=>$t.record)}function fe($t){return!!e.getRecordMatcher($t)}function me($t,Ln){if(Ln=Hi({},Ln||T.value),typeof $t=="string"){const xt=dw(n,$t,Ln.path),Xt=e.resolve({path:xt.path},Ln),Kt=m.createHref(xt.fullPath);return Hi(xt,Xt,{params:j(Xt.params),hash:uy(xt.hash),redirectedFrom:void 0,href:Kt})}let cn;if($t.path!=null)cn=Hi({},$t,{path:dw(n,$t.path,Ln.path).path});else{const xt=Hi({},$t.params);for(const Xt in xt)xt[Xt]==null&&delete xt[Xt];cn=Hi({},$t,{params:z(xt)}),Ln.params=z(Ln.params)}const Yn=e.resolve(cn,Ln),ei=$t.hash||"";Yn.params=A(j(Yn.params));const He=tz(l,Hi({},$t,{hash:ZO(ei),path:Yn.path})),qe=m.createHref(He);return Hi({fullPath:He,hash:ei,query:l===L5?Rz($t.query):$t.query||{}},Yn,{redirectedFrom:void 0,href:qe})}function ne($t){return typeof $t=="string"?dw(n,$t,T.value.path):Hi({},$t)}function te($t,Ln){if(E!==$t)return xf(8,{from:Ln,to:$t})}function re($t){return Me($t)}function ze($t){return re(Hi(ne($t),{replace:!0}))}function _t($t){const Ln=$t.matched[$t.matched.length-1];if(Ln&&Ln.redirect){const{redirect:cn}=Ln;let Yn=typeof cn=="function"?cn($t):cn;return typeof Yn=="string"&&(Yn=Yn.includes("?")||Yn.includes("#")?Yn=ne(Yn):{path:Yn},Yn.params={}),Hi({query:$t.query,hash:$t.hash,params:Yn.path!=null?{}:$t.params},Yn)}}function Me($t,Ln){const cn=E=me($t),Yn=T.value,ei=$t.state,He=$t.force,qe=$t.replace===!0,xt=_t(cn);if(xt)return Me(Hi(ne(xt),{state:typeof xt=="object"?Hi({},ei,xt.state):ei,force:He,replace:qe}),Ln||cn);const Xt=cn;Xt.redirectedFrom=Ln;let Kt;return!He&&nz(l,Yn,cn)&&(Kt=xf(16,{to:Xt,from:Yn}),ir(Yn,Yn,!0,!1)),(Kt?Promise.resolve(Kt):$e(Xt,Yn)).catch(Jt=>kc(Jt)?kc(Jt,2)?Jt:In(Jt):Et(Jt,Xt,Yn)).then(Jt=>{if(Jt){if(kc(Jt,2))return Me(Hi({replace:qe},ne(Jt.to),{state:typeof Jt.to=="object"?Hi({},ei,Jt.to.state):ei,force:He}),Ln||Xt)}else Jt=ft(Xt,Yn,!0,qe,ei);return Je(Xt,Yn,Jt),Jt})}function he($t,Ln){const cn=te($t,Ln);return cn?Promise.reject(cn):Promise.resolve()}function Ce($t){const Ln=Un.values().next().value;return Ln&&typeof Ln.runWithContext=="function"?Ln.runWithContext($t):$t()}function $e($t,Ln){let cn;const[Yn,ei,He]=Nz($t,Ln);cn=hw(Yn.reverse(),"beforeRouteLeave",$t,Ln);for(const xt of Yn)xt.leaveGuards.forEach(Xt=>{cn.push($u(Xt,$t,Ln))});const qe=he.bind(null,$t,Ln);return cn.push(qe),kn(cn).then(()=>{cn=[];for(const xt of d.list())cn.push($u(xt,$t,Ln));return cn.push(qe),kn(cn)}).then(()=>{cn=hw(ei,"beforeRouteUpdate",$t,Ln);for(const xt of ei)xt.updateGuards.forEach(Xt=>{cn.push($u(Xt,$t,Ln))});return cn.push(qe),kn(cn)}).then(()=>{cn=[];for(const xt of He)if(xt.beforeEnter)if(al(xt.beforeEnter))for(const Xt of xt.beforeEnter)cn.push($u(Xt,$t,Ln));else cn.push($u(xt.beforeEnter,$t,Ln));return cn.push(qe),kn(cn)}).then(()=>($t.matched.forEach(xt=>xt.enterCallbacks={}),cn=hw(He,"beforeRouteEnter",$t,Ln,Ce),cn.push(qe),kn(cn))).then(()=>{cn=[];for(const xt of x.list())cn.push($u(xt,$t,Ln));return cn.push(qe),kn(cn)}).catch(xt=>kc(xt,8)?xt:Promise.reject(xt))}function Je($t,Ln,cn){s.list().forEach(Yn=>Ce(()=>Yn($t,Ln,cn)))}function ft($t,Ln,cn,Yn,ei){const He=te($t,Ln);if(He)return He;const qe=Ln===Mu,xt=rf?history.state:{};cn&&(Yn||qe?m.replace($t.fullPath,Hi({scroll:qe&&xt&&xt.scroll},ei)):m.push($t.fullPath,ei)),T.value=$t,ir($t,Ln,cn,qe),In()}let ut;function Qe(){ut||(ut=m.listen(($t,Ln,cn)=>{if(!pn.listening)return;const Yn=me($t),ei=_t(Yn);if(ei){Me(Hi(ei,{replace:!0,force:!0}),Yn).catch(Gg);return}E=Yn;const He=T.value;rf&&uz(k5(He.fullPath,cn.delta),A_()),$e(Yn,He).catch(qe=>kc(qe,12)?qe:kc(qe,2)?(Me(Hi(ne(qe.to),{force:!0}),Yn).then(xt=>{kc(xt,20)&&!cn.delta&&cn.type===dy.pop&&m.go(-1,!1)}).catch(Gg),Promise.reject()):(cn.delta&&m.go(-cn.delta,!1),Et(qe,Yn,He))).then(qe=>{qe=qe||ft(Yn,He,!1),qe&&(cn.delta&&!kc(qe,8)?m.go(-cn.delta,!1):cn.type===dy.pop&&kc(qe,20)&&m.go(-1,!1)),Je(Yn,He,qe)}).catch(Gg)}))}let Qt=Eg(),kt=Eg(),wt;function Et($t,Ln,cn){In($t);const Yn=kt.list();return Yn.length?Yn.forEach(ei=>ei($t,Ln,cn)):console.error($t),Promise.reject($t)}function on(){return wt&&T.value!==Mu?Promise.resolve():new Promise(($t,Ln)=>{Qt.add([$t,Ln])})}function In($t){return wt||(wt=!$t,Qe(),Qt.list().forEach(([Ln,cn])=>$t?cn($t):Ln()),Qt.reset()),$t}function ir($t,Ln,cn,Yn){const{scrollBehavior:ei}=t;if(!rf||!ei)return Promise.resolve();const He=!cn&&dz(k5($t.fullPath,0))||(Yn||!cn)&&history.state&&history.state.scroll||null;return Th().then(()=>ei($t,Ln,He)).then(qe=>qe&&cz(qe)).catch(qe=>Et(qe,$t,Ln))}const Or=$t=>m.go($t);let oo;const Un=new Set,pn={currentRoute:T,listening:!0,addRoute:U,removeRoute:K,clearRoutes:e.clearRoutes,hasRoute:fe,getRoutes:oe,resolve:me,options:t,push:re,replace:ze,go:Or,back:()=>Or(-1),forward:()=>Or(1),beforeEach:d.add,beforeResolve:x.add,afterEach:s.add,onError:kt.add,isReady:on,install($t){const Ln=this;$t.component("RouterLink",Oz),$t.component("RouterView",mP),$t.config.globalProperties.$router=Ln,Object.defineProperty($t.config.globalProperties,"$route",{enumerable:!0,get:()=>Ie(T)}),rf&&!oo&&T.value===Mu&&(oo=!0,re(m.location).catch(ei=>{}));const cn={};for(const ei in Mu)Object.defineProperty(cn,ei,{get:()=>T.value[ei],enumerable:!0});$t.provide(R_,Ln),$t.provide(hS,sI(cn)),$t.provide(Qw,T);const Yn=$t.unmount;Un.add($t),$t.unmount=function(){Un.delete($t),Un.size<1&&(E=Mu,ut&&ut(),ut=null,T.value=Mu,oo=!1,wt=!1),Yn()}}};function kn($t){return $t.reduce((Ln,cn)=>Ln.then(()=>Ce(cn)),Promise.resolve())}return pn}function Nz(t,e){const n=[],l=[],m=[],d=Math.max(e.matched.length,t.matched.length);for(let x=0;x<d;x++){const s=e.matched[x];s&&(t.matched.find(E=>_f(E,s))?l.push(s):n.push(s));const T=t.matched[x];T&&(e.matched.find(E=>_f(E,T))||m.push(T))}return[n,l,m]}function Fc(){return Gs(R_)}function M_(t){return Gs(hS)}const Lo=(t,e)=>{const n=t.__vccOpts||t;for(const[l,m]of e)n[l]=m;return n};function Vz(t,e){return t?t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className):!1}function Lc(t,e){if(t&&e){const n=l=>{Vz(t,l)||(t.classList?t.classList.add(l):t.className+=" "+l)};[e].flat().filter(Boolean).forEach(l=>l.split(" ").forEach(n))}}function jz(){return window.innerWidth-document.documentElement.offsetWidth}function wf(t){for(const e of document==null?void 0:document.styleSheets)try{for(const n of e==null?void 0:e.cssRules)for(const l of n==null?void 0:n.style)if(t.test(l))return{name:l,value:n.style.getPropertyValue(l).trim()}}catch{}return null}function n_(t="p-overflow-hidden"){const e=wf(/-scrollbar-width$/);e!=null&&e.name&&document.body.style.setProperty(e.name,jz()+"px"),Lc(document.body,t)}function Uz(t){if(t){let e=document.createElement("a");if(e.download!==void 0){const{name:n,src:l}=t;return e.setAttribute("href",l),e.setAttribute("download",n),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),!0}}return!1}function qz(t,e){let n=new Blob([t],{type:"application/csv;charset=utf-8;"});window.navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(n,e+".csv"):Uz({name:e+".csv",src:URL.createObjectURL(n)})||(t="data:text/csv;charset=utf-8,"+t,window.open(encodeURI(t)))}function Rc(t,e){if(t&&e){const n=l=>{t.classList?t.classList.remove(l):t.className=t.className.replace(new RegExp("(^|\\b)"+l.split(" ").join("|")+"(\\b|$)","gi")," ")};[e].flat().filter(Boolean).forEach(l=>l.split(" ").forEach(n))}}function hy(t="p-overflow-hidden"){const e=wf(/-scrollbar-width$/);e!=null&&e.name&&document.body.style.removeProperty(e.name),Rc(document.body,t)}function gP(t){let e={width:0,height:0};return t&&(t.style.visibility="hidden",t.style.display="block",e.width=t.offsetWidth,e.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible"),e}function pS(){let t=window,e=document,n=e.documentElement,l=e.getElementsByTagName("body")[0],m=t.innerWidth||n.clientWidth||l.clientWidth,d=t.innerHeight||n.clientHeight||l.clientHeight;return{width:m,height:d}}function yP(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}function vP(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}function D_(t,e,n=!0){var l,m,d,x;if(t){const s=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:gP(t),T=s.height,E=s.width,A=e.offsetHeight,z=e.offsetWidth,j=e.getBoundingClientRect(),U=vP(),K=yP(),oe=pS();let fe,me,ne="top";j.top+A+T>oe.height?(fe=j.top+U-T,ne="bottom",fe<0&&(fe=U)):fe=A+j.top+U,j.left+E>oe.width?me=Math.max(0,j.left+K+z-E):me=j.left+K,t.style.top=fe+"px",t.style.left=me+"px",t.style.transformOrigin=ne,n&&(t.style.marginTop=ne==="bottom"?`calc(${(m=(l=wf(/-anchor-gutter$/))==null?void 0:l.value)!=null?m:"2px"} * -1)`:(x=(d=wf(/-anchor-gutter$/))==null?void 0:d.value)!=null?x:"")}}function Sh(t,e){t&&(typeof e=="string"?t.style.cssText=e:Object.entries(e||{}).forEach(([n,l])=>t.style[n]=l))}function So(t,e){if(t instanceof HTMLElement){let n=t.offsetWidth;if(e){let l=getComputedStyle(t);n+=parseFloat(l.marginLeft)+parseFloat(l.marginRight)}return n}return 0}function fS(t,e,n=!0){var l,m,d,x;if(t){const s=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:gP(t),T=e.offsetHeight,E=e.getBoundingClientRect(),A=pS();let z,j,U="top";E.top+T+s.height>A.height?(z=-1*s.height,U="bottom",E.top+z<0&&(z=-1*E.top)):z=T,s.width>A.width?j=E.left*-1:E.left+s.width>A.width?j=(E.left+s.width-A.width)*-1:j=0,t.style.top=z+"px",t.style.left=j+"px",t.style.transformOrigin=U,n&&(t.style.marginTop=U==="bottom"?`calc(${(m=(l=wf(/-anchor-gutter$/))==null?void 0:l.value)!=null?m:"2px"} * -1)`:(x=(d=wf(/-anchor-gutter$/))==null?void 0:d.value)!=null?x:"")}}function Ph(t){return typeof HTMLElement=="object"?t instanceof HTMLElement:t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"}function Rb(){if(window.getSelection){const t=window.getSelection()||{};t.empty?t.empty():t.removeAllRanges&&t.rangeCount>0&&t.getRangeAt(0).getClientRects().length>0&&t.removeAllRanges()}}function r_(t,e={}){if(Ph(t)){const n=(l,m)=>{var d,x;const s=(d=t==null?void 0:t.$attrs)!=null&&d[l]?[(x=t==null?void 0:t.$attrs)==null?void 0:x[l]]:[];return[m].flat().reduce((T,E)=>{if(E!=null){const A=typeof E;if(A==="string"||A==="number")T.push(E);else if(A==="object"){const z=Array.isArray(E)?n(l,E):Object.entries(E).map(([j,U])=>l==="style"&&(U||U===0)?`${j.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${U}`:U?j:void 0);T=z.length?T.concat(z.filter(j=>!!j)):T}}return T},s)};Object.entries(e).forEach(([l,m])=>{if(m!=null){const d=l.match(/^on(.+)/);d?t.addEventListener(d[1].toLowerCase(),m):l==="p-bind"||l==="pBind"?r_(t,m):(m=l==="class"?[...new Set(n("class",m))].join(" ").trim():l==="style"?n("style",m).join(";").trim():m,(t.$attrs=t.$attrs||{})&&(t.$attrs[l]=m),t.setAttribute(l,m))}})}}function i_(t,e={},...n){if(t){const l=document.createElement(t);return r_(l,e),l.append(...n),l}}function la(t,e){return Ph(t)?Array.from(t.querySelectorAll(e)):[]}function yo(t,e){return Ph(t)?t.matches(e)?t:t.querySelector(e):null}function Ro(t,e){t&&document.activeElement!==t&&t.focus(e)}function Ci(t,e){if(Ph(t)){const n=t.getAttribute(e);return isNaN(n)?n==="true"||n==="false"?n==="true":n:+n}}function py(t,e=""){let n=la(t,`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e}`),l=[];for(let m of n)getComputedStyle(m).display!="none"&&getComputedStyle(m).visibility!="hidden"&&l.push(m);return l}function Nu(t,e){const n=py(t,e);return n.length>0?n[0]:null}function Mc(t){if(t){let e=t.offsetHeight,n=getComputedStyle(t);return e-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),e}return 0}function Hz(t){if(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",e}return 0}function Gz(t){if(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",e}return 0}function mS(t){if(t){let e=t.parentNode;return e&&e instanceof ShadowRoot&&e.host&&(e=e.host),e}return null}function Dc(t){var e;if(t){let n=(e=mS(t))==null?void 0:e.childNodes,l=0;if(n)for(let m=0;m<n.length;m++){if(n[m]===t)return l;n[m].nodeType===1&&l++}}return-1}function bP(t,e){const n=py(t,e);return n.length>0?n[n.length-1]:null}function gS(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}return null}function Ea(t){if(t){let e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}return{top:"auto",left:"auto"}}function jl(t,e){if(t){let n=t.offsetHeight;if(e){let l=getComputedStyle(t);n+=parseFloat(l.marginTop)+parseFloat(l.marginBottom)}return n}return 0}function _P(t,e=[]){const n=mS(t);return n===null?e:_P(n,e.concat([n]))}function yS(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}return null}function Wz(t){let e=[];if(t){let n=_P(t);const l=/(auto|scroll)/,m=d=>{try{let x=window.getComputedStyle(d,null);return l.test(x.getPropertyValue("overflow"))||l.test(x.getPropertyValue("overflowX"))||l.test(x.getPropertyValue("overflowY"))}catch{return!1}};for(let d of n){let x=d.nodeType===1&&d.dataset.scrollselectors;if(x){let s=x.split(",");for(let T of s){let E=yo(d,T);E&&m(E)&&e.push(E)}}d.nodeType!==9&&m(d)&&e.push(d)}}return e}function N5(){if(window.getSelection)return window.getSelection().toString();if(document.getSelection)return document.getSelection().toString()}function xP(t){return!!(t!==null&&typeof t<"u"&&t.nodeName&&mS(t))}function bs(t){if(t){let e=t.offsetWidth,n=getComputedStyle(t);return e-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)+parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth),e}return 0}function Kz(t){if(t){const e=getComputedStyle(t);return parseFloat(e.getPropertyValue("animation-duration")||"0")>0}return!1}function V5(t,e,n){t[e].apply(t,n)}function Zz(){return/(android)/i.test(navigator.userAgent)}function Xz(t,e,n){return Ph(t)?Ci(t,e)===n:!1}function pw(t){if(t){const e=t.nodeName,n=t.parentElement&&t.parentElement.nodeName;return e==="INPUT"||e==="TEXTAREA"||e==="BUTTON"||e==="A"||n==="INPUT"||n==="TEXTAREA"||n==="BUTTON"||n==="A"||!!t.closest(".p-button, .p-checkbox, .p-radiobutton")}return!1}function vS(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function j5(t,e=""){return Ph(t)?t.matches(`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e}`):!1}function o_(t){return!!(t&&t.offsetParent!=null)}function fy(t){return t?getComputedStyle(t).direction==="rtl":!1}function L_(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function If(t,e="",n){Ph(t)&&n!==null&&n!==void 0&&t.setAttribute(e,n)}function Yz(){let t=[];const e=(x,s,T=999)=>{const E=m(x,s,T),A=E.value+(E.key===x?0:T)+1;return t.push({key:x,value:A}),A},n=x=>{t=t.filter(s=>s.value!==x)},l=(x,s)=>m(x).value,m=(x,s,T=0)=>[...t].reverse().find(E=>!0)||{key:x,value:T},d=x=>x&&parseInt(x.style.zIndex,10)||0;return{get:d,set:(x,s,T)=>{s&&(s.style.zIndex=String(e(x,!0,T)))},clear:x=>{x&&(n(d(x)),x.style.zIndex="")},getCurrent:x=>l(x)}}var bo=Yz(),Jz=Object.defineProperty,U5=Object.getOwnPropertySymbols,Qz=Object.prototype.hasOwnProperty,e7=Object.prototype.propertyIsEnumerable,q5=(t,e,n)=>e in t?Jz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,t7=(t,e)=>{for(var n in e||(e={}))Qz.call(e,n)&&q5(t,n,e[n]);if(U5)for(var n of U5(e))e7.call(e,n)&&q5(t,n,e[n]);return t};function ha(t){return t==null||t===""||Array.isArray(t)&&t.length===0||!(t instanceof Date)&&typeof t=="object"&&Object.keys(t).length===0}function n7(t,e,n,l=1){let m=-1;const d=ha(t),x=ha(e);return d&&x?m=0:d?m=l:x?m=-l:typeof t=="string"&&typeof e=="string"?m=n(t,e):m=t<e?-1:t>e?1:0,m}function e2(t,e,n=new WeakSet){if(t===e)return!0;if(!t||!e||typeof t!="object"||typeof e!="object"||n.has(t)||n.has(e))return!1;n.add(t).add(e);let l=Array.isArray(t),m=Array.isArray(e),d,x,s;if(l&&m){if(x=t.length,x!=e.length)return!1;for(d=x;d--!==0;)if(!e2(t[d],e[d],n))return!1;return!0}if(l!=m)return!1;let T=t instanceof Date,E=e instanceof Date;if(T!=E)return!1;if(T&&E)return t.getTime()==e.getTime();let A=t instanceof RegExp,z=e instanceof RegExp;if(A!=z)return!1;if(A&&z)return t.toString()==e.toString();let j=Object.keys(t);if(x=j.length,x!==Object.keys(e).length)return!1;for(d=x;d--!==0;)if(!Object.prototype.hasOwnProperty.call(e,j[d]))return!1;for(d=x;d--!==0;)if(s=j[d],!e2(t[s],e[s],n))return!1;return!0}function r7(t,e){return e2(t,e)}function O_(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Zr(t){return!ha(t)}function wi(t,e){if(!t||!e)return null;try{const n=t[e];if(Zr(n))return n}catch{}if(Object.keys(t).length){if(O_(e))return e(t);if(e.indexOf(".")===-1)return t[e];{let n=e.split("."),l=t;for(let m=0,d=n.length;m<d;++m){if(l==null)return null;l=l[n[m]]}return l}}return null}function $c(t,e,n){return n?wi(t,n)===wi(e,n):r7(t,e)}function i7(t,e){if(t!=null&&e&&e.length){for(let n of e)if($c(t,n))return!0}return!1}function fw(t,e){let n=-1;if(e){for(let l=0;l<e.length;l++)if(e[l]===t){n=l;break}}return n}function H5(t,e){let n=-1;if(Zr(t))try{n=t.findLastIndex(e)}catch{n=t.lastIndexOf([...t].reverse().find(e))}return n}function Kl(t,e=!0){return t instanceof Object&&t.constructor===Object&&(e||Object.keys(t).length!==0)}function Ia(t,...e){return O_(t)?t(...e):t}function Ws(t,e=!0){return typeof t=="string"&&(e||t!=="")}function nl(t){return Ws(t)?t.replace(/(-|_)/g,"").toLowerCase():t}function bS(t,e="",n={}){const l=nl(e).split("."),m=l.shift();return m?Kl(t)?bS(Ia(t[Object.keys(t).find(d=>nl(d)===m)||""],n),l.join("."),n):void 0:Ia(t,n)}function i0(t,e=!0){return Array.isArray(t)&&(e||t.length!==0)}function o7(t){return Zr(t)&&!isNaN(t)}function s7(t=""){return Zr(t)&&t.length===1&&!!t.match(/\S| /)}function t2(){return new Intl.Collator(void 0,{numeric:!0}).compare}function Oc(t,e){if(e){const n=e.test(t);return e.lastIndex=0,n}return!1}function a7(...t){const e=(n={},l={})=>{const m=t7({},n);return Object.keys(l).forEach(d=>{Kl(l[d])&&d in n&&Kl(n[d])?m[d]=e(n[d],l[d]):m[d]=l[d]}),m};return t.reduce((n,l,m)=>m===0?l:e(n,l),{})}function Kg(t){return t&&t.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!").replace(/: /g,":")}function wa(t){if(t&&/[\xC0-\xFF\u0100-\u017E]/.test(t)){const n={A:/[\xC0-\xC5\u0100\u0102\u0104]/g,AE:/[\xC6]/g,C:/[\xC7\u0106\u0108\u010A\u010C]/g,D:/[\xD0\u010E\u0110]/g,E:/[\xC8-\xCB\u0112\u0114\u0116\u0118\u011A]/g,G:/[\u011C\u011E\u0120\u0122]/g,H:/[\u0124\u0126]/g,I:/[\xCC-\xCF\u0128\u012A\u012C\u012E\u0130]/g,IJ:/[\u0132]/g,J:/[\u0134]/g,K:/[\u0136]/g,L:/[\u0139\u013B\u013D\u013F\u0141]/g,N:/[\xD1\u0143\u0145\u0147\u014A]/g,O:/[\xD2-\xD6\xD8\u014C\u014E\u0150]/g,OE:/[\u0152]/g,R:/[\u0154\u0156\u0158]/g,S:/[\u015A\u015C\u015E\u0160]/g,T:/[\u0162\u0164\u0166]/g,U:/[\xD9-\xDC\u0168\u016A\u016C\u016E\u0170\u0172]/g,W:/[\u0174]/g,Y:/[\xDD\u0176\u0178]/g,Z:/[\u0179\u017B\u017D]/g,a:/[\xE0-\xE5\u0101\u0103\u0105]/g,ae:/[\xE6]/g,c:/[\xE7\u0107\u0109\u010B\u010D]/g,d:/[\u010F\u0111]/g,e:/[\xE8-\xEB\u0113\u0115\u0117\u0119\u011B]/g,g:/[\u011D\u011F\u0121\u0123]/g,i:/[\xEC-\xEF\u0129\u012B\u012D\u012F\u0131]/g,ij:/[\u0133]/g,j:/[\u0135]/g,k:/[\u0137,\u0138]/g,l:/[\u013A\u013C\u013E\u0140\u0142]/g,n:/[\xF1\u0144\u0146\u0148\u014B]/g,p:/[\xFE]/g,o:/[\xF2-\xF6\xF8\u014D\u014F\u0151]/g,oe:/[\u0153]/g,r:/[\u0155\u0157\u0159]/g,s:/[\u015B\u015D\u015F\u0161]/g,t:/[\u0163\u0165\u0167]/g,u:/[\xF9-\xFC\u0169\u016B\u016D\u016F\u0171\u0173]/g,w:/[\u0175]/g,y:/[\xFD\xFF\u0177]/g,z:/[\u017A\u017C\u017E]/g};for(let l in n)t=t.replace(n[l],l)}return t}function G5(t,e,n){t&&e!==n&&(n>=t.length&&(n%=t.length,e%=t.length),t.splice(n,0,t.splice(e,1)[0]))}function W5(t,e,n=1,l,m=1){const d=n7(t,e,l,n);let x=n;return(ha(t)||ha(e))&&(x=m===1?n:m),x*d}function l7(t){return Ws(t,!1)?t[0].toUpperCase()+t.slice(1):t}function wP(t){return Ws(t)?t.replace(/(_)/g,"-").replace(/[A-Z]/g,(e,n)=>n===0?e:"-"+e.toLowerCase()).toLowerCase():t}function K5(t){return Ws(t)?t.replace(/[A-Z]/g,(e,n)=>n===0?e:"."+e.toLowerCase()).toLowerCase():t}function o0(){const t=new Map;return{on(e,n){let l=t.get(e);return l?l.push(n):l=[n],t.set(e,l),this},off(e,n){let l=t.get(e);return l&&l.splice(l.indexOf(n)>>>0,1),this},emit(e,n){let l=t.get(e);l&&l.slice().map(m=>{m(n)})},clear(){t.clear()}}}var c7=Object.defineProperty,u7=Object.defineProperties,d7=Object.getOwnPropertyDescriptors,s_=Object.getOwnPropertySymbols,SP=Object.prototype.hasOwnProperty,CP=Object.prototype.propertyIsEnumerable,Z5=(t,e,n)=>e in t?c7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rl=(t,e)=>{for(var n in e||(e={}))SP.call(e,n)&&Z5(t,n,e[n]);if(s_)for(var n of s_(e))CP.call(e,n)&&Z5(t,n,e[n]);return t},mw=(t,e)=>u7(t,d7(e)),Tc=(t,e)=>{var n={};for(var l in t)SP.call(t,l)&&e.indexOf(l)<0&&(n[l]=t[l]);if(t!=null&&s_)for(var l of s_(t))e.indexOf(l)<0&&CP.call(t,l)&&(n[l]=t[l]);return n},h7=o0(),el=h7;function X5(t,e){i0(t)?t.push(...e||[]):Kl(t)&&Object.assign(t,e)}function p7(t){return Kl(t)&&t.hasOwnProperty("value")&&t.hasOwnProperty("type")?t.value:t}function f7(t){return t.replaceAll(/ /g,"").replace(/[^\w]/g,"-")}function n2(t="",e=""){return f7(`${Ws(t,!1)&&Ws(e,!1)?`${t}-`:t}${e}`)}function kP(t="",e=""){return`--${n2(t,e)}`}function m7(t=""){const e=(t.match(/{/g)||[]).length,n=(t.match(/}/g)||[]).length;return(e+n)%2!==0}function TP(t,e="",n="",l=[],m){if(Ws(t)){const d=/{([^}]*)}/g,x=t.trim();if(m7(x))return;if(Oc(x,d)){const s=x.replaceAll(d,A=>{const j=A.replace(/{|}/g,"").split(".").filter(U=>!l.some(K=>Oc(U,K)));return`var(${kP(n,wP(j.join("-")))}${Zr(m)?`, ${m}`:""})`}),T=/(\d+\s+[\+\-\*\/]\s+\d+)/g,E=/var\([^)]+\)/g;return Oc(s.replace(E,"0"),T)?`calc(${s})`:s}return x}else if(o7(t))return t}function g7(t,e,n){Ws(e,!1)&&t.push(`${e}:${n};`)}function of(t,e){return t?`${t}{${e}}`:""}var Zg=(...t)=>y7(Zi.getTheme(),...t),y7=(t={},e,n,l)=>{if(e){const{variable:m,options:d}=Zi.defaults||{},{prefix:x,transform:s}=(t==null?void 0:t.options)||d||{},E=Oc(e,/{([^}]*)}/g)?e:`{${e}}`;return l==="value"||ha(l)&&s==="strict"?Zi.getTokenValue(e):TP(E,void 0,x,[m.excludedKeyRegex],n)}return""};function v7(t,e={}){const n=Zi.defaults.variable,{prefix:l=n.prefix,selector:m=n.selector,excludedKeyRegex:d=n.excludedKeyRegex}=e,x=(E,A="")=>Object.entries(E).reduce((z,[j,U])=>{const K=Oc(j,d)?n2(A):n2(A,wP(j)),oe=p7(U);if(Kl(oe)){const{variables:fe,tokens:me}=x(oe,K);X5(z.tokens,me),X5(z.variables,fe)}else z.tokens.push((l?K.replace(`${l}-`,""):K).replaceAll("-",".")),g7(z.variables,kP(K),TP(oe,K,l,[d]));return z},{variables:[],tokens:[]}),{variables:s,tokens:T}=x(t,l);return{value:s,tokens:T,declarations:s.join(""),css:of(m,s.join(""))}}var Ja={regex:{rules:{class:{pattern:/^\.([a-zA-Z][\w-]*)$/,resolve(t){return{type:"class",selector:t,matched:this.pattern.test(t.trim())}}},attr:{pattern:/^\[(.*)\]$/,resolve(t){return{type:"attr",selector:`:root${t}`,matched:this.pattern.test(t.trim())}}},media:{pattern:/^@media (.*)$/,resolve(t){return{type:"media",selector:`${t}{:root{[CSS]}}`,matched:this.pattern.test(t.trim())}}},system:{pattern:/^system$/,resolve(t){return{type:"system",selector:"@media (prefers-color-scheme: dark){:root{[CSS]}}",matched:this.pattern.test(t.trim())}}},custom:{resolve(t){return{type:"custom",selector:t,matched:!0}}}},resolve(t){const e=Object.keys(this.rules).filter(n=>n!=="custom").map(n=>this.rules[n]);return[t].flat().map(n=>{var l;return(l=e.map(m=>m.resolve(n)).find(m=>m.matched))!=null?l:this.rules.custom.resolve(n)})}},_toVariables(t,e){return v7(t,{prefix:e==null?void 0:e.prefix})},getCommon({name:t="",theme:e={},params:n,set:l,defaults:m}){var d,x,s,T,E,A,z;const{preset:j,options:U}=e;let K,oe,fe,me,ne,te,re;if(Zr(j)&&U.transform!=="strict"){const{primitive:ze,semantic:_t,extend:Me}=j,he=_t||{},{colorScheme:Ce}=he,$e=Tc(he,["colorScheme"]),Je=Me||{},{colorScheme:ft}=Je,ut=Tc(Je,["colorScheme"]),Qe=Ce||{},{dark:Qt}=Qe,kt=Tc(Qe,["dark"]),wt=ft||{},{dark:Et}=wt,on=Tc(wt,["dark"]),In=Zr(ze)?this._toVariables({primitive:ze},U):{},ir=Zr($e)?this._toVariables({semantic:$e},U):{},Or=Zr(kt)?this._toVariables({light:kt},U):{},oo=Zr(Qt)?this._toVariables({dark:Qt},U):{},Un=Zr(ut)?this._toVariables({semantic:ut},U):{},pn=Zr(on)?this._toVariables({light:on},U):{},kn=Zr(Et)?this._toVariables({dark:Et},U):{},[$t,Ln]=[(d=In.declarations)!=null?d:"",In.tokens],[cn,Yn]=[(x=ir.declarations)!=null?x:"",ir.tokens||[]],[ei,He]=[(s=Or.declarations)!=null?s:"",Or.tokens||[]],[qe,xt]=[(T=oo.declarations)!=null?T:"",oo.tokens||[]],[Xt,Kt]=[(E=Un.declarations)!=null?E:"",Un.tokens||[]],[Jt,On]=[(A=pn.declarations)!=null?A:"",pn.tokens||[]],[_n,xn]=[(z=kn.declarations)!=null?z:"",kn.tokens||[]];K=this.transformCSS(t,$t,"light","variable",U,l,m),oe=Ln;const gn=this.transformCSS(t,`${cn}${ei}`,"light","variable",U,l,m),cr=this.transformCSS(t,`${qe}`,"dark","variable",U,l,m);fe=`${gn}${cr}`,me=[...new Set([...Yn,...He,...xt])];const zn=this.transformCSS(t,`${Xt}${Jt}color-scheme:light`,"light","variable",U,l,m),Hn=this.transformCSS(t,`${_n}color-scheme:dark`,"dark","variable",U,l,m);ne=`${zn}${Hn}`,te=[...new Set([...Kt,...On,...xn])],re=Ia(j.css,{dt:Zg})}return{primitive:{css:K,tokens:oe},semantic:{css:fe,tokens:me},global:{css:ne,tokens:te},style:re}},getPreset({name:t="",preset:e={},options:n,params:l,set:m,defaults:d,selector:x}){var s,T,E;let A,z,j;if(Zr(e)&&n.transform!=="strict"){const U=t.replace("-directive",""),K=e,{colorScheme:oe,extend:fe,css:me}=K,ne=Tc(K,["colorScheme","extend","css"]),te=fe||{},{colorScheme:re}=te,ze=Tc(te,["colorScheme"]),_t=oe||{},{dark:Me}=_t,he=Tc(_t,["dark"]),Ce=re||{},{dark:$e}=Ce,Je=Tc(Ce,["dark"]),ft=Zr(ne)?this._toVariables({[U]:rl(rl({},ne),ze)},n):{},ut=Zr(he)?this._toVariables({[U]:rl(rl({},he),Je)},n):{},Qe=Zr(Me)?this._toVariables({[U]:rl(rl({},Me),$e)},n):{},[Qt,kt]=[(s=ft.declarations)!=null?s:"",ft.tokens||[]],[wt,Et]=[(T=ut.declarations)!=null?T:"",ut.tokens||[]],[on,In]=[(E=Qe.declarations)!=null?E:"",Qe.tokens||[]],ir=this.transformCSS(U,`${Qt}${wt}`,"light","variable",n,m,d,x),Or=this.transformCSS(U,on,"dark","variable",n,m,d,x);A=`${ir}${Or}`,z=[...new Set([...kt,...Et,...In])],j=Ia(me,{dt:Zg})}return{css:A,tokens:z,style:j}},getPresetC({name:t="",theme:e={},params:n,set:l,defaults:m}){var d;const{preset:x,options:s}=e,T=(d=x==null?void 0:x.components)==null?void 0:d[t];return this.getPreset({name:t,preset:T,options:s,params:n,set:l,defaults:m})},getPresetD({name:t="",theme:e={},params:n,set:l,defaults:m}){var d;const x=t.replace("-directive",""),{preset:s,options:T}=e,E=(d=s==null?void 0:s.directives)==null?void 0:d[x];return this.getPreset({name:x,preset:E,options:T,params:n,set:l,defaults:m})},applyDarkColorScheme(t){return!(t.darkModeSelector==="none"||t.darkModeSelector===!1)},getColorSchemeOption(t,e){var n;return this.applyDarkColorScheme(t)?this.regex.resolve(t.darkModeSelector===!0?e.options.darkModeSelector:(n=t.darkModeSelector)!=null?n:e.options.darkModeSelector):[]},getLayerOrder(t,e={},n,l){const{cssLayer:m}=e;return m?`@layer ${Ia(m.order||"primeui",n)}`:""},getCommonStyleSheet({name:t="",theme:e={},params:n,props:l={},set:m,defaults:d}){const x=this.getCommon({name:t,theme:e,params:n,set:m,defaults:d}),s=Object.entries(l).reduce((T,[E,A])=>T.push(`${E}="${A}"`)&&T,[]).join(" ");return Object.entries(x||{}).reduce((T,[E,A])=>{if(A!=null&&A.css){const z=Kg(A==null?void 0:A.css),j=`${E}-variables`;T.push(`<style type="text/css" data-primevue-style-id="${j}" ${s}>${z}</style>`)}return T},[]).join("")},getStyleSheet({name:t="",theme:e={},params:n,props:l={},set:m,defaults:d}){var x;const s={name:t,theme:e,params:n,set:m,defaults:d},T=(x=t.includes("-directive")?this.getPresetD(s):this.getPresetC(s))==null?void 0:x.css,E=Object.entries(l).reduce((A,[z,j])=>A.push(`${z}="${j}"`)&&A,[]).join(" ");return T?`<style type="text/css" data-primevue-style-id="${t}-variables" ${E}>${Kg(T)}</style>`:""},createTokens(t={},e,n="",l="",m={}){return Object.entries(t).forEach(([d,x])=>{const s=Oc(d,e.variable.excludedKeyRegex)?n:n?`${n}.${K5(d)}`:K5(d),T=l?`${l}.${d}`:d;Kl(x)?this.createTokens(x,e,s,T,m):(m[s]||(m[s]={paths:[],computed(E,A={}){var z,j;return this.paths.length===1?(z=this.paths[0])==null?void 0:z.computed(this.paths[0].scheme,A.binding):E&&E!=="none"?(j=this.paths.find(U=>U.scheme===E))==null?void 0:j.computed(E,A.binding):this.paths.map(U=>U.computed(U.scheme,A[U.scheme]))}}),m[s].paths.push({path:T,value:x,scheme:T.includes("colorScheme.light")?"light":T.includes("colorScheme.dark")?"dark":"none",computed(E,A={}){const z=/{([^}]*)}/g;let j=x;if(A.name=this.path,A.binding||(A.binding={}),Oc(x,z)){const K=x.trim().replaceAll(z,me=>{var ne;const te=me.replace(/{|}/g,""),re=(ne=m[te])==null?void 0:ne.computed(E,A);return i0(re)&&re.length===2?`light-dark(${re[0].value},${re[1].value})`:re==null?void 0:re.value}),oe=/(\d+\w*\s+[\+\-\*\/]\s+\d+\w*)/g,fe=/var\([^)]+\)/g;j=Oc(K.replace(fe,"0"),oe)?`calc(${K})`:K}return ha(A.binding)&&delete A.binding,{colorScheme:E,path:this.path,paths:A,value:j.includes("undefined")?void 0:j}}}))}),m},getTokenValue(t,e,n){var l;const d=(T=>T.split(".").filter(A=>!Oc(A.toLowerCase(),n.variable.excludedKeyRegex)).join("."))(e),x=e.includes("colorScheme.light")?"light":e.includes("colorScheme.dark")?"dark":void 0,s=[(l=t[d])==null?void 0:l.computed(x)].flat().filter(T=>T);return s.length===1?s[0].value:s.reduce((T={},E)=>{const A=E,{colorScheme:z}=A,j=Tc(A,["colorScheme"]);return T[z]=j,T},void 0)},getSelectorRule(t,e,n,l){return n==="class"||n==="attr"?of(Zr(e)?`${t}${e},${t} ${e}`:t,l):of(t,Zr(e)?of(e,l):l)},transformCSS(t,e,n,l,m={},d,x,s){if(Zr(e)){const{cssLayer:T}=m;if(l!=="style"){const E=this.getColorSchemeOption(m,x);e=n==="dark"?E.reduce((A,{type:z,selector:j})=>(Zr(j)&&(A+=j.includes("[CSS]")?j.replace("[CSS]",e):this.getSelectorRule(j,s,z,e)),A),""):of(s??":root",e)}if(T){const E={name:"primeui"};Kl(T)&&(E.name=Ia(T.name,{name:t,type:l})),Zr(E.name)&&(e=of(`@layer ${E.name}`,e),d==null||d.layerNames(E.name))}return e}return""}},Zi={defaults:{variable:{prefix:"p",selector:":root",excludedKeyRegex:/^(primitive|semantic|components|directives|variables|colorscheme|light|dark|common|root|states|extend|css)$/gi},options:{prefix:"p",darkModeSelector:"system",cssLayer:!1}},_theme:void 0,_layerNames:new Set,_loadedStyleNames:new Set,_loadingStyles:new Set,_tokens:{},update(t={}){const{theme:e}=t;e&&(this._theme=mw(rl({},e),{options:rl(rl({},this.defaults.options),e.options)}),this._tokens=Ja.createTokens(this.preset,this.defaults),this.clearLoadedStyleNames())},get theme(){return this._theme},get preset(){var t;return((t=this.theme)==null?void 0:t.preset)||{}},get options(){var t;return((t=this.theme)==null?void 0:t.options)||{}},get tokens(){return this._tokens},getTheme(){return this.theme},setTheme(t){this.update({theme:t}),el.emit("theme:change",t)},getPreset(){return this.preset},setPreset(t){this._theme=mw(rl({},this.theme),{preset:t}),this._tokens=Ja.createTokens(t,this.defaults),this.clearLoadedStyleNames(),el.emit("preset:change",t),el.emit("theme:change",this.theme)},getOptions(){return this.options},setOptions(t){this._theme=mw(rl({},this.theme),{options:t}),this.clearLoadedStyleNames(),el.emit("options:change",t),el.emit("theme:change",this.theme)},getLayerNames(){return[...this._layerNames]},setLayerNames(t){this._layerNames.add(t)},getLoadedStyleNames(){return this._loadedStyleNames},isStyleNameLoaded(t){return this._loadedStyleNames.has(t)},setLoadedStyleName(t){this._loadedStyleNames.add(t)},deleteLoadedStyleName(t){this._loadedStyleNames.delete(t)},clearLoadedStyleNames(){this._loadedStyleNames.clear()},getTokenValue(t){return Ja.getTokenValue(this.tokens,t,this.defaults)},getCommon(t="",e){return Ja.getCommon({name:t,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getComponent(t="",e){const n={name:t,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Ja.getPresetC(n)},getDirective(t="",e){const n={name:t,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Ja.getPresetD(n)},getCustomPreset(t="",e,n,l){const m={name:t,preset:e,options:this.options,selector:n,params:l,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Ja.getPreset(m)},getLayerOrderCSS(t=""){return Ja.getLayerOrder(t,this.options,{names:this.getLayerNames()},this.defaults)},transformCSS(t="",e,n="style",l){return Ja.transformCSS(t,e,l,n,this.options,{layerNames:this.setLayerNames.bind(this)},this.defaults)},getCommonStyleSheet(t="",e,n={}){return Ja.getCommonStyleSheet({name:t,theme:this.theme,params:e,props:n,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getStyleSheet(t,e,n={}){return Ja.getStyleSheet({name:t,theme:this.theme,params:e,props:n,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},onStyleMounted(t){this._loadingStyles.add(t)},onStyleUpdated(t){this._loadingStyles.add(t)},onStyleLoaded(t,{name:e}){this._loadingStyles.size&&(this._loadingStyles.delete(e),el.emit(`theme:${e}:load`,t),!this._loadingStyles.size&&el.emit("theme:load"))}},fb={};function _S(t="pui_id_"){return fb.hasOwnProperty(t)||(fb[t]=0),fb[t]++,`${t}${fb[t]}`}var Vu={_loadedStyleNames:new Set,getLoadedStyleNames:function(){return this._loadedStyleNames},isStyleNameLoaded:function(e){return this._loadedStyleNames.has(e)},setLoadedStyleName:function(e){this._loadedStyleNames.add(e)},deleteLoadedStyleName:function(e){this._loadedStyleNames.delete(e)},clearLoadedStyleNames:function(){this._loadedStyleNames.clear()}};function my(t){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},my(t)}function Y5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function J5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y5(Object(n),!0).forEach(function(l){b7(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y5(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function b7(t,e,n){return(e=_7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _7(t){var e=x7(t,"string");return my(e)=="symbol"?e:e+""}function x7(t,e){if(my(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(my(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;uS()?Co(t):e?t():Th(t)}var S7=0;function C7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Ke(!1),l=Ke(t),m=Ke(null),d=vS()?window.document:void 0,x=e.document,s=x===void 0?d:x,T=e.immediate,E=T===void 0?!0:T,A=e.manual,z=A===void 0?!1:A,j=e.name,U=j===void 0?"style_".concat(++S7):j,K=e.id,oe=K===void 0?void 0:K,fe=e.media,me=fe===void 0?void 0:fe,ne=e.nonce,te=ne===void 0?void 0:ne,re=e.first,ze=re===void 0?!1:re,_t=e.onMounted,Me=_t===void 0?void 0:_t,he=e.onUpdated,Ce=he===void 0?void 0:he,$e=e.onLoad,Je=$e===void 0?void 0:$e,ft=e.props,ut=ft===void 0?{}:ft,Qe=function(){},Qt=function(Et){var on=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s){var In=J5(J5({},ut),on),ir=In.name||U,Or=In.id||oe,oo=In.nonce||te;m.value=s.querySelector('style[data-primevue-style-id="'.concat(ir,'"]'))||s.getElementById(Or)||s.createElement("style"),m.value.isConnected||(l.value=Et||t,r_(m.value,{type:"text/css",id:Or,media:me,nonce:oo}),ze?s.head.prepend(m.value):s.head.appendChild(m.value),If(m.value,"data-primevue-style-id",ir),r_(m.value,In),m.value.onload=function(Un){return Je==null?void 0:Je(Un,{name:ir})},Me==null||Me(ir)),!n.value&&(Qe=ho(l,function(Un){m.value.textContent=Un,Ce==null||Ce(ir)},{immediate:!0}),n.value=!0)}},kt=function(){!s||!n.value||(Qe(),xP(m.value)&&s.head.removeChild(m.value),n.value=!1)};return E&&!z&&w7(Qt),{id:oe,name:U,el:m,css:l,unload:kt,load:Qt,isLoaded:Q2(n)}}function gy(t){"@babel/helpers - typeof";return gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gy(t)}function Q5(t,e){return I7(t)||E7(t,e)||T7(t,e)||k7()}function k7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T7(t,e){if(t){if(typeof t=="string")return e4(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e4(t,e):void 0}}function e4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}function E7(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var l,m,d,x,s=[],T=!0,E=!1;try{if(d=(n=n.call(t)).next,e!==0)for(;!(T=(l=d.call(n)).done)&&(s.push(l.value),s.length!==e);T=!0);}catch(A){E=!0,m=A}finally{try{if(!T&&n.return!=null&&(x=n.return(),Object(x)!==x))return}finally{if(E)throw m}}return s}}function I7(t){if(Array.isArray(t))return t}function t4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function gw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t4(Object(n),!0).forEach(function(l){P7(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function P7(t,e,n){return(e=A7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A7(t){var e=R7(t,"string");return gy(e)=="symbol"?e:e+""}function R7(t,e){if(gy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(gy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M7=function(e){var n=e.dt;return`
*,
::before,
::after {
    box-sizing: border-box;
}

/* Non vue overlay animations */
.p-connected-overlay {
    opacity: 0;
    transform: scaleY(0.8);
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-visible {
    opacity: 1;
    transform: scaleY(1);
}

.p-connected-overlay-hidden {
    opacity: 0;
    transform: scaleY(1);
    transition: opacity 0.1s linear;
}

/* Vue based overlay animations */
.p-connected-overlay-enter-from {
    opacity: 0;
    transform: scaleY(0.8);
}

.p-connected-overlay-leave-to {
    opacity: 0;
}

.p-connected-overlay-enter-active {
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-leave-active {
    transition: opacity 0.1s linear;
}

/* Toggleable Content */
.p-toggleable-content-enter-from,
.p-toggleable-content-leave-to {
    max-height: 0;
}

.p-toggleable-content-enter-to,
.p-toggleable-content-leave-from {
    max-height: 1000px;
}

.p-toggleable-content-leave-active {
    overflow: hidden;
    transition: max-height 0.45s cubic-bezier(0, 1, 0, 1);
}

.p-toggleable-content-enter-active {
    overflow: hidden;
    transition: max-height 1s ease-in-out;
}

.p-disabled,
.p-disabled * {
    cursor: default;
    pointer-events: none;
    user-select: none;
}

.p-disabled,
.p-component:disabled {
    opacity: `.concat(n("disabled.opacity"),`;
}

.pi {
    font-size: `).concat(n("icon.size"),`;
}

.p-icon {
    width: `).concat(n("icon.size"),`;
    height: `).concat(n("icon.size"),`;
}

.p-overlay-mask {
    background: `).concat(n("mask.background"),`;
    color: `).concat(n("mask.color"),`;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-overlay-mask-enter {
    animation: p-overlay-mask-enter-animation `).concat(n("mask.transition.duration"),` forwards;
}

.p-overlay-mask-leave {
    animation: p-overlay-mask-leave-animation `).concat(n("mask.transition.duration"),` forwards;
}

@keyframes p-overlay-mask-enter-animation {
    from {
        background: transparent;
    }
    to {
        background: `).concat(n("mask.background"),`;
    }
}
@keyframes p-overlay-mask-leave-animation {
    from {
        background: `).concat(n("mask.background"),`;
    }
    to {
        background: transparent;
    }
}
`)},D7=function(e){var n=e.dt;return`
.p-hidden-accessible {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
}

.p-hidden-accessible input,
.p-hidden-accessible select {
    transform: scale(0);
}

.p-overflow-hidden {
    overflow: hidden;
    padding-right: `.concat(n("scrollbar.width"),`;
}
`)},L7={},O7={},Xn={name:"base",css:D7,theme:M7,classes:L7,inlineStyles:O7,load:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(d){return d},m=l(Ia(e,{dt:Zg}));return Zr(m)?C7(Kg(m),gw({name:this.name},n)):{}},loadCSS:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.load(this.css,e)},loadTheme:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return this.load(this.theme,n,function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Zi.transformCSS(n.name||e.name,"".concat(m).concat(l))})},getCommonTheme:function(e){return Zi.getCommon(this.name,e)},getComponentTheme:function(e){return Zi.getComponent(this.name,e)},getDirectiveTheme:function(e){return Zi.getDirective(this.name,e)},getPresetTheme:function(e,n,l){return Zi.getCustomPreset(this.name,e,n,l)},getLayerOrderThemeCSS:function(){return Zi.getLayerOrderCSS(this.name)},getStyleSheet:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.css){var l=Ia(this.css,{dt:Zg})||"",m=Kg("".concat(l).concat(e)),d=Object.entries(n).reduce(function(x,s){var T=Q5(s,2),E=T[0],A=T[1];return x.push("".concat(E,'="').concat(A,'"'))&&x},[]).join(" ");return Zr(m)?'<style type="text/css" data-primevue-style-id="'.concat(this.name,'" ').concat(d,">").concat(m,"</style>"):""}return""},getCommonThemeStyleSheet:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Zi.getCommonStyleSheet(this.name,e,n)},getThemeStyleSheet:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=[Zi.getStyleSheet(this.name,e,n)];if(this.theme){var m=this.name==="base"?"global-style":"".concat(this.name,"-style"),d=Ia(this.theme,{dt:Zg}),x=Kg(Zi.transformCSS(m,d)),s=Object.entries(n).reduce(function(T,E){var A=Q5(E,2),z=A[0],j=A[1];return T.push("".concat(z,'="').concat(j,'"'))&&T},[]).join(" ");Zr(x)&&l.push('<style type="text/css" data-primevue-style-id="'.concat(m,'" ').concat(s,">").concat(x,"</style>"))}return l.join("")},extend:function(e){return gw(gw({},this),{},{css:void 0,theme:void 0},e)}},n4=Xn.extend({name:"common"});function yy(t){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(t)}function z7(t){return PP(t)||B7(t)||IP(t)||EP()}function B7(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ig(t,e){return PP(t)||F7(t,e)||IP(t,e)||EP()}function EP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IP(t,e){if(t){if(typeof t=="string")return r4(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r4(t,e):void 0}}function r4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}function F7(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var l,m,d,x,s=[],T=!0,E=!1;try{if(d=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;T=!1}else for(;!(T=(l=d.call(n)).done)&&(s.push(l.value),s.length!==e);T=!0);}catch(A){E=!0,m=A}finally{try{if(!T&&n.return!=null&&(x=n.return(),Object(x)!==x))return}finally{if(E)throw m}}return s}}function PP(t){if(Array.isArray(t))return t}function i4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function Si(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i4(Object(n),!0).forEach(function(l){Fg(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function Fg(t,e,n){return(e=$7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $7(t){var e=N7(t,"string");return yy(e)=="symbol"?e:e+""}function N7(t,e){if(yy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(yy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mr={name:"BaseComponent",props:{pt:{type:Object,default:void 0},ptOptions:{type:Object,default:void 0},unstyled:{type:Boolean,default:void 0},dt:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0}},watch:{isUnstyled:{immediate:!0,handler:function(e){e||(this._loadCoreStyles(),this._themeChangeListener(this._loadCoreStyles))}},dt:{immediate:!0,handler:function(e){var n=this;e?(this._loadScopedThemeStyles(e),this._themeChangeListener(function(){return n._loadScopedThemeStyles(e)})):this._unloadScopedThemeStyles()}}},scopedStyleEl:void 0,rootEl:void 0,$attrSelector:void 0,beforeCreate:function(){var e,n,l,m,d,x,s,T,E,A,z,j=(e=this.pt)===null||e===void 0?void 0:e._usept,U=j?(n=this.pt)===null||n===void 0||(n=n.originalValue)===null||n===void 0?void 0:n[this.$.type.name]:void 0,K=j?(l=this.pt)===null||l===void 0||(l=l.value)===null||l===void 0?void 0:l[this.$.type.name]:this.pt;(m=K||U)===null||m===void 0||(m=m.hooks)===null||m===void 0||(d=m.onBeforeCreate)===null||d===void 0||d.call(m);var oe=(x=this.$primevueConfig)===null||x===void 0||(x=x.pt)===null||x===void 0?void 0:x._usept,fe=oe?(s=this.$primevue)===null||s===void 0||(s=s.config)===null||s===void 0||(s=s.pt)===null||s===void 0?void 0:s.originalValue:void 0,me=oe?(T=this.$primevue)===null||T===void 0||(T=T.config)===null||T===void 0||(T=T.pt)===null||T===void 0?void 0:T.value:(E=this.$primevue)===null||E===void 0||(E=E.config)===null||E===void 0?void 0:E.pt;(A=me||fe)===null||A===void 0||(A=A[this.$.type.name])===null||A===void 0||(A=A.hooks)===null||A===void 0||(z=A.onBeforeCreate)===null||z===void 0||z.call(A),this.$attrSelector=_S("pc")},created:function(){this._hook("onCreated")},beforeMount:function(){this.rootEl=yo(this.$el,'[data-pc-name="'.concat(nl(this.$.type.name),'"]')),this.rootEl&&(this.$attrSelector&&!this.rootEl.hasAttribute(this.$attrSelector)&&this.rootEl.setAttribute(this.$attrSelector,""),this.rootEl.$pc=Si({name:this.$.type.name,attrSelector:this.$attrSelector},this.$params)),this._loadStyles(),this._hook("onBeforeMount")},mounted:function(){this._hook("onMounted")},beforeUpdate:function(){this._hook("onBeforeUpdate")},updated:function(){this._hook("onUpdated")},beforeUnmount:function(){this._hook("onBeforeUnmount")},unmounted:function(){this._unloadScopedThemeStyles(),this._hook("onUnmounted")},methods:{_hook:function(e){if(!this.$options.hostName){var n=this._usePT(this._getPT(this.pt,this.$.type.name),this._getOptionValue,"hooks.".concat(e)),l=this._useDefaultPT(this._getOptionValue,"hooks.".concat(e));n==null||n(),l==null||l()}},_mergeProps:function(e){for(var n=arguments.length,l=new Array(n>1?n-1:0),m=1;m<n;m++)l[m-1]=arguments[m];return O_(e)?e.apply(void 0,l):ie.apply(void 0,l)},_loadStyles:function(){var e=this,n=function(){Vu.isStyleNameLoaded("base")||(Xn.loadCSS(e.$styleOptions),e._loadGlobalStyles(),Vu.setLoadedStyleName("base")),e._loadThemeStyles()};n(),this._themeChangeListener(n)},_loadCoreStyles:function(){var e,n;!Vu.isStyleNameLoaded((e=this.$style)===null||e===void 0?void 0:e.name)&&(n=this.$style)!==null&&n!==void 0&&n.name&&(n4.loadCSS(this.$styleOptions),this.$options.style&&this.$style.loadCSS(this.$styleOptions),Vu.setLoadedStyleName(this.$style.name))},_loadGlobalStyles:function(){var e=this._useGlobalPT(this._getOptionValue,"global.css",this.$params);Zr(e)&&Xn.load(e,Si({name:"global"},this.$styleOptions))},_loadThemeStyles:function(){var e,n;if(!(this.isUnstyled||this.$theme==="none")){if(!Zi.isStyleNameLoaded("common")){var l,m,d=((l=this.$style)===null||l===void 0||(m=l.getCommonTheme)===null||m===void 0?void 0:m.call(l))||{},x=d.primitive,s=d.semantic,T=d.global,E=d.style;Xn.load(x==null?void 0:x.css,Si({name:"primitive-variables"},this.$styleOptions)),Xn.load(s==null?void 0:s.css,Si({name:"semantic-variables"},this.$styleOptions)),Xn.load(T==null?void 0:T.css,Si({name:"global-variables"},this.$styleOptions)),Xn.loadTheme(Si({name:"global-style"},this.$styleOptions),E),Zi.setLoadedStyleName("common")}if(!Zi.isStyleNameLoaded((e=this.$style)===null||e===void 0?void 0:e.name)&&(n=this.$style)!==null&&n!==void 0&&n.name){var A,z,j,U,K=((A=this.$style)===null||A===void 0||(z=A.getComponentTheme)===null||z===void 0?void 0:z.call(A))||{},oe=K.css,fe=K.style;(j=this.$style)===null||j===void 0||j.load(oe,Si({name:"".concat(this.$style.name,"-variables")},this.$styleOptions)),(U=this.$style)===null||U===void 0||U.loadTheme(Si({name:"".concat(this.$style.name,"-style")},this.$styleOptions),fe),Zi.setLoadedStyleName(this.$style.name)}if(!Zi.isStyleNameLoaded("layer-order")){var me,ne,te=(me=this.$style)===null||me===void 0||(ne=me.getLayerOrderThemeCSS)===null||ne===void 0?void 0:ne.call(me);Xn.load(te,Si({name:"layer-order",first:!0},this.$styleOptions)),Zi.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(e){var n,l,m,d=((n=this.$style)===null||n===void 0||(l=n.getPresetTheme)===null||l===void 0?void 0:l.call(n,e,"[".concat(this.$attrSelector,"]")))||{},x=d.css,s=(m=this.$style)===null||m===void 0?void 0:m.load(x,Si({name:"".concat(this.$attrSelector,"-").concat(this.$style.name)},this.$styleOptions));this.scopedStyleEl=s.el},_unloadScopedThemeStyles:function(){var e;(e=this.scopedStyleEl)===null||e===void 0||(e=e.value)===null||e===void 0||e.remove()},_themeChangeListener:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};Vu.clearLoadedStyleNames(),el.on("theme:change",e)},_getHostInstance:function(e){return e?this.$options.hostName?e.$.type.name===this.$options.hostName?e:this._getHostInstance(e.$parentInstance):e.$parentInstance:void 0},_getPropValue:function(e){var n;return this[e]||((n=this._getHostInstance(this))===null||n===void 0?void 0:n[e])},_getOptionValue:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return bS(e,n,l)},_getPTValue:function(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,x=/./g.test(l)&&!!m[l.split(".")[0]],s=this._getPropValue("ptOptions")||((e=this.$primevueConfig)===null||e===void 0?void 0:e.ptOptions)||{},T=s.mergeSections,E=T===void 0?!0:T,A=s.mergeProps,z=A===void 0?!1:A,j=d?x?this._useGlobalPT(this._getPTClassValue,l,m):this._useDefaultPT(this._getPTClassValue,l,m):void 0,U=x?void 0:this._getPTSelf(n,this._getPTClassValue,l,Si(Si({},m),{},{global:j||{}})),K=this._getPTDatasets(l);return E||!E&&U?z?this._mergeProps(z,j,U,K):Si(Si(Si({},j),U),K):Si(Si({},U),K)},_getPTSelf:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length,l=new Array(n>1?n-1:0),m=1;m<n;m++)l[m-1]=arguments[m];return ie(this._usePT.apply(this,[this._getPT(e,this.$name)].concat(l)),this._usePT.apply(this,[this.$_attrsPT].concat(l)))},_getPTDatasets:function(){var e,n,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",m="data-pc-",d=l==="root"&&Zr((e=this.pt)===null||e===void 0?void 0:e["data-pc-section"]);return l!=="transition"&&Si(Si({},l==="root"&&Si(Si(Fg({},"".concat(m,"name"),nl(d?(n=this.pt)===null||n===void 0?void 0:n["data-pc-section"]:this.$.type.name)),d&&Fg({},"".concat(m,"extend"),nl(this.$.type.name))),vS()&&Fg({},"".concat(this.$attrSelector),""))),{},Fg({},"".concat(m,"section"),nl(l)))},_getPTClassValue:function(){var e=this._getOptionValue.apply(this,arguments);return Ws(e)||i0(e)?{class:e}:e},_getPT:function(e){var n=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",m=arguments.length>2?arguments[2]:void 0,d=function(s){var T,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=m?m(s):s,z=nl(l),j=nl(n.$name);return(T=E?z!==j?A==null?void 0:A[z]:void 0:A==null?void 0:A[z])!==null&&T!==void 0?T:A};return e!=null&&e.hasOwnProperty("_usept")?{_usept:e._usept,originalValue:d(e.originalValue),value:d(e.value)}:d(e,!0)},_usePT:function(e,n,l,m){var d=function(oe){return n(oe,l,m)};if(e!=null&&e.hasOwnProperty("_usept")){var x,s=e._usept||((x=this.$primevueConfig)===null||x===void 0?void 0:x.ptOptions)||{},T=s.mergeSections,E=T===void 0?!0:T,A=s.mergeProps,z=A===void 0?!1:A,j=d(e.originalValue),U=d(e.value);return j===void 0&&U===void 0?void 0:Ws(U)?U:Ws(j)?j:E||!E&&U?z?this._mergeProps(z,j,U):Si(Si({},j),U):U}return d(e)},_useGlobalPT:function(e,n,l){return this._usePT(this.globalPT,e,n,l)},_useDefaultPT:function(e,n,l){return this._usePT(this.defaultPT,e,n,l)},ptm:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._getPTValue(this.pt,e,Si(Si({},this.$params),n))},ptmi:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ie(this.$_attrsWithoutPT,this.ptm(e,n))},ptmo:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._getPTValue(e,n,Si({instance:this},l),!1)},cx:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isUnstyled?void 0:this._getOptionValue(this.$style.classes,e,Si(Si({},this.$params),n))},sx:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n){var m=this._getOptionValue(this.$style.inlineStyles,e,Si(Si({},this.$params),l)),d=this._getOptionValue(n4.inlineStyles,e,Si(Si({},this.$params),l));return[d,m]}}},computed:{globalPT:function(){var e,n=this;return this._getPT((e=this.$primevueConfig)===null||e===void 0?void 0:e.pt,void 0,function(l){return Ia(l,{instance:n})})},defaultPT:function(){var e,n=this;return this._getPT((e=this.$primevueConfig)===null||e===void 0?void 0:e.pt,void 0,function(l){return n._getOptionValue(l,n.$name,Si({},n.$params))||Ia(l,Si({},n.$params))})},isUnstyled:function(){var e;return this.unstyled!==void 0?this.unstyled:(e=this.$primevueConfig)===null||e===void 0?void 0:e.unstyled},$inProps:function(){var e,n=Object.keys(((e=this.$.vnode)===null||e===void 0?void 0:e.props)||{});return Object.fromEntries(Object.entries(this.$props).filter(function(l){var m=Ig(l,1),d=m[0];return n==null?void 0:n.includes(d)}))},$theme:function(){var e;return(e=this.$primevueConfig)===null||e===void 0?void 0:e.theme},$style:function(){return Si(Si({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadTheme:function(){}},(this._getHostInstance(this)||{}).$style),this.$options.style)},$styleOptions:function(){var e;return{nonce:(e=this.$primevueConfig)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce}},$primevueConfig:function(){var e;return(e=this.$primevue)===null||e===void 0?void 0:e.config},$name:function(){return this.$options.hostName||this.$.type.name},$params:function(){var e=this._getHostInstance(this)||this.$parent;return{instance:this,props:this.$props,state:this.$data,attrs:this.$attrs,parent:{instance:e,props:e==null?void 0:e.$props,state:e==null?void 0:e.$data,attrs:e==null?void 0:e.$attrs}}},$_attrsPT:function(){return Object.entries(this.$attrs||{}).filter(function(e){var n=Ig(e,1),l=n[0];return l==null?void 0:l.startsWith("pt:")}).reduce(function(e,n){var l=Ig(n,2),m=l[0],d=l[1],x=m.split(":"),s=z7(x),T=s.slice(1);return T==null||T.reduce(function(E,A,z,j){return!E[A]&&(E[A]=z===j.length-1?d:{}),E[A]},e),e},{})},$_attrsWithoutPT:function(){return Object.entries(this.$attrs||{}).filter(function(e){var n=Ig(e,1),l=n[0];return!(l!=null&&l.startsWith("pt:"))}).reduce(function(e,n){var l=Ig(n,2),m=l[0],d=l[1];return e[m]=d,e},{})}}},V7=function(e){var n=e.dt;return`
.p-blockui {
    position: relative;
}

.p-blockui-mask {
    border-radius: `.concat(n("blockui.border.radius"),`;
}

.p-blockui-mask.p-overlay-mask {
    position: absolute;
}

.p-blockui-mask-document.p-overlay-mask {
    position: fixed;
}
`)},j7={root:"p-blockui"},U7=Xn.extend({name:"blockui",theme:V7,classes:j7}),q7={name:"BaseBlockUI",extends:mr,props:{blocked:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0}},style:U7,provide:function(){return{$pcBlockUI:this,$parentInstance:this}}},AP={name:"BlockUI",extends:q7,inheritAttrs:!1,emits:["block","unblock"],mask:null,data:function(){return{isBlocked:!1}},watch:{blocked:function(e){e===!0?this.block():this.unblock()}},mounted:function(){this.blocked&&this.block()},methods:{block:function(){var e="p-blockui-mask p-overlay-mask p-overlay-mask-enter";this.fullScreen?(e+=" p-blockui-mask-document",this.mask=i_("div",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%"},class:!this.isUnstyled&&e,"p-bind":this.ptm("mask")}),document.body.appendChild(this.mask),n_(),document.activeElement.blur()):(this.mask=i_("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},class:!this.isUnstyled&&e,"p-bind":this.ptm("mask")}),this.$refs.container.appendChild(this.mask)),this.autoZIndex&&bo.set("modal",this.mask,this.baseZIndex+this.$primevue.config.zIndex.modal),this.isBlocked=!0,this.$emit("block")},unblock:function(){var e=this;!this.isUnstyled&&Lc(this.mask,"p-overlay-mask-leave"),Kz(this.mask)>0?this.mask.addEventListener("animationend",function(){e.removeMask()}):this.removeMask()},removeMask:function(){if(bo.clear(this.mask),this.fullScreen)document.body.removeChild(this.mask),hy();else{var e;(e=this.$refs.container)===null||e===void 0||e.removeChild(this.mask)}this.isBlocked=!1,this.$emit("unblock")}}},H7=["aria-busy"];function G7(t,e,n,l,m,d){return X(),pe("div",ie({ref:"container",class:t.cx("root"),"aria-busy":m.isBlocked},t.ptmi("root")),[jt(t.$slots,"default")],16,H7)}AP.render=G7;const W7={key:0,class:"absolute inset-0 flex flex-col items-center justify-center"},K7=Xr({__name:"LoadingGlobal",props:{isLoading:{type:Boolean}},setup(t){return(e,n)=>(X(),bt(Ie(AP),{blocked:e.isLoading},{default:Xe(()=>[e.isLoading?(X(),pe("div",W7,n[0]||(n[0]=[M("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},null,-1)]))):Ct("",!0),jt(e.$slots,"default",{},void 0,!0)]),_:3},8,["blocked"]))}}),RP=Lo(K7,[["__scopeId","data-v-3402ff2f"]]),yw=Ke(!1),o4=Ke("ang ti...");function Z7(){return{isLoading:yw,message:o4,show:(n="ang ti...")=>{o4.value=n,yw.value=!0},hide:()=>{yw.value=!1}}}const X7={class:"min-h-screen admin-bg"},Y7=Xr({__name:"App",setup(t){Ke(null);const{show:e,hide:n}=Z7();return Wu("showLoading",e),Wu("hideLoading",n),(l,m)=>(X(),pe("div",X7,[ge(Ie(mP))]))}}),J7="modulepreload",Q7=function(t){return"/"+t},s4={},xS=function(e,n,l){let m=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),s=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));m=Promise.allSettled(n.map(T=>{if(T=Q7(T),T in s4)return;s4[T]=!0;const E=T.endsWith(".css"),A=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${T}"]${A}`))return;const z=document.createElement("link");if(z.rel=E?"stylesheet":J7,E||(z.as="script"),z.crossOrigin="",z.href=T,s&&z.setAttribute("nonce",s),document.head.appendChild(z),E)return new Promise((j,U)=>{z.addEventListener("load",j),z.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${T}`)))})}))}function d(x){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=x,window.dispatchEvent(s),!s.defaultPrevented)throw x}return m.then(x=>{for(const s of x||[])s.status==="rejected"&&d(s.reason);return e().catch(d)})},eB={name:"NotFoundPage"},tB={class:"not-found"};function nB(t,e,n,l,m,d){const x=wn("router-link");return X(),pe("div",tB,[e[1]||(e[1]=M("h1",null,"404",-1)),e[2]||(e[2]=M("p",null,"Oops! The page you are looking for does not exist.",-1)),ge(x,{to:"/"},{default:Xe(()=>e[0]||(e[0]=[tr("Go back to Home")])),_:1})])}const rB=Lo(eB,[["render",nB],["__scopeId","data-v-0b256888"]]);function a4(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function wS(t,e){t===void 0&&(t={}),e===void 0&&(e={});const n=["__proto__","constructor","prototype"];Object.keys(e).filter(l=>n.indexOf(l)<0).forEach(l=>{typeof t[l]>"u"?t[l]=e[l]:a4(e[l])&&a4(t[l])&&Object.keys(e[l]).length>0&&wS(t[l],e[l])})}const MP={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Gl(){const t=typeof document<"u"?document:{};return wS(t,MP),t}const iB={document:MP,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function Os(){const t=typeof window<"u"?window:{};return wS(t,iB),t}function oB(t){return t===void 0&&(t=""),t.trim().split(" ").filter(e=>!!e.trim())}function sB(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function r2(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function a_(){return Date.now()}function aB(t){const e=Os();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function lB(t,e){e===void 0&&(e="x");const n=Os();let l,m,d;const x=aB(t);return n.WebKitCSSMatrix?(m=x.transform||x.webkitTransform,m.split(",").length>6&&(m=m.split(", ").map(s=>s.replace(",",".")).join(", ")),d=new n.WebKitCSSMatrix(m==="none"?"":m)):(d=x.MozTransform||x.OTransform||x.MsTransform||x.msTransform||x.transform||x.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),l=d.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?m=d.m41:l.length===16?m=parseFloat(l[12]):m=parseFloat(l[4])),e==="y"&&(n.WebKitCSSMatrix?m=d.m42:l.length===16?m=parseFloat(l[13]):m=parseFloat(l[5])),m||0}function mb(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function cB(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function ca(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const l=n<0||arguments.length<=n?void 0:arguments[n];if(l!=null&&!cB(l)){const m=Object.keys(Object(l)).filter(d=>e.indexOf(d)<0);for(let d=0,x=m.length;d<x;d+=1){const s=m[d],T=Object.getOwnPropertyDescriptor(l,s);T!==void 0&&T.enumerable&&(mb(t[s])&&mb(l[s])?l[s].__swiper__?t[s]=l[s]:ca(t[s],l[s]):!mb(t[s])&&mb(l[s])?(t[s]={},l[s].__swiper__?t[s]=l[s]:ca(t[s],l[s])):t[s]=l[s])}}}return t}function gb(t,e,n){t.style.setProperty(e,n)}function DP(t){let{swiper:e,targetPosition:n,side:l}=t;const m=Os(),d=-e.translate;let x=null,s;const T=e.params.speed;e.wrapperEl.style.scrollSnapType="none",m.cancelAnimationFrame(e.cssModeFrameID);const E=n>d?"next":"prev",A=(j,U)=>E==="next"&&j>=U||E==="prev"&&j<=U,z=()=>{s=new Date().getTime(),x===null&&(x=s);const j=Math.max(Math.min((s-x)/T,1),0),U=.5-Math.cos(j*Math.PI)/2;let K=d+U*(n-d);if(A(K,n)&&(K=n),e.wrapperEl.scrollTo({[l]:K}),A(K,n)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[l]:K})}),m.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=m.requestAnimationFrame(z)};z()}function Ul(t,e){e===void 0&&(e="");const n=Os(),l=[...t.children];return n.HTMLSlotElement&&t instanceof HTMLSlotElement&&l.push(...t.assignedElements()),e?l.filter(m=>m.matches(e)):l}function uB(t,e){const n=[e];for(;n.length>0;){const l=n.shift();if(t===l)return!0;n.push(...l.children,...l.shadowRoot?l.shadowRoot.children:[],...l.assignedElements?l.assignedElements():[])}}function dB(t,e){const n=Os();let l=e.contains(t);return!l&&n.HTMLSlotElement&&e instanceof HTMLSlotElement&&(l=[...e.assignedElements()].includes(t),l||(l=uB(t,e))),l}function l_(t){try{console.warn(t);return}catch{}}function c_(t,e){e===void 0&&(e=[]);const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:oB(e)),n}function hB(t,e){const n=[];for(;t.previousElementSibling;){const l=t.previousElementSibling;e?l.matches(e)&&n.push(l):n.push(l),t=l}return n}function pB(t,e){const n=[];for(;t.nextElementSibling;){const l=t.nextElementSibling;e?l.matches(e)&&n.push(l):n.push(l),t=l}return n}function ju(t,e){return Os().getComputedStyle(t,null).getPropertyValue(e)}function u_(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function LP(t,e){const n=[];let l=t.parentElement;for(;l;)e?l.matches(e)&&n.push(l):n.push(l),l=l.parentElement;return n}function i2(t,e,n){const l=Os();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(l.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(l.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function ts(t){return(Array.isArray(t)?t:[t]).filter(e=>!!e)}function d_(t,e){e===void 0&&(e=""),typeof trustedTypes<"u"?t.innerHTML=trustedTypes.createPolicy("html",{createHTML:n=>n}).createHTML(e):t.innerHTML=e}let vw;function fB(){const t=Os(),e=Gl();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function OP(){return vw||(vw=fB()),vw}let bw;function mB(t){let{userAgent:e}=t===void 0?{}:t;const n=OP(),l=Os(),m=l.navigator.platform,d=e||l.navigator.userAgent,x={ios:!1,android:!1},s=l.screen.width,T=l.screen.height,E=d.match(/(Android);?[\s\/]+([\d.]+)?/);let A=d.match(/(iPad).*OS\s([\d_]+)/);const z=d.match(/(iPod)(.*OS\s([\d_]+))?/),j=!A&&d.match(/(iPhone\sOS|iOS)\s([\d_]+)/),U=m==="Win32";let K=m==="MacIntel";const oe=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!A&&K&&n.touch&&oe.indexOf(`${s}x${T}`)>=0&&(A=d.match(/(Version)\/([\d.]+)/),A||(A=[0,1,"13_0_0"]),K=!1),E&&!U&&(x.os="android",x.android=!0),(A||j||z)&&(x.os="ios",x.ios=!0),x}function zP(t){return t===void 0&&(t={}),bw||(bw=mB(t)),bw}let _w;function gB(){const t=Os(),e=zP();let n=!1;function l(){const s=t.navigator.userAgent.toLowerCase();return s.indexOf("safari")>=0&&s.indexOf("chrome")<0&&s.indexOf("android")<0}if(l()){const s=String(t.navigator.userAgent);if(s.includes("Version/")){const[T,E]=s.split("Version/")[1].split(" ")[0].split(".").map(A=>Number(A));n=T<16||T===16&&E<2}}const m=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),d=l(),x=d||m&&e.ios;return{isSafari:n||d,needPerspectiveFix:n,need3dFix:x,isWebView:m}}function BP(){return _w||(_w=gB()),_w}function yB(t){let{swiper:e,on:n,emit:l}=t;const m=Os();let d=null,x=null;const s=()=>{!e||e.destroyed||!e.initialized||(l("beforeResize"),l("resize"))},T=()=>{!e||e.destroyed||!e.initialized||(d=new ResizeObserver(z=>{x=m.requestAnimationFrame(()=>{const{width:j,height:U}=e;let K=j,oe=U;z.forEach(fe=>{let{contentBoxSize:me,contentRect:ne,target:te}=fe;te&&te!==e.el||(K=ne?ne.width:(me[0]||me).inlineSize,oe=ne?ne.height:(me[0]||me).blockSize)}),(K!==j||oe!==U)&&s()})}),d.observe(e.el))},E=()=>{x&&m.cancelAnimationFrame(x),d&&d.unobserve&&e.el&&(d.unobserve(e.el),d=null)},A=()=>{!e||e.destroyed||!e.initialized||l("orientationchange")};n("init",()=>{if(e.params.resizeObserver&&typeof m.ResizeObserver<"u"){T();return}m.addEventListener("resize",s),m.addEventListener("orientationchange",A)}),n("destroy",()=>{E(),m.removeEventListener("resize",s),m.removeEventListener("orientationchange",A)})}function vB(t){let{swiper:e,extendParams:n,on:l,emit:m}=t;const d=[],x=Os(),s=function(A,z){z===void 0&&(z={});const j=x.MutationObserver||x.WebkitMutationObserver,U=new j(K=>{if(e.__preventObserver__)return;if(K.length===1){m("observerUpdate",K[0]);return}const oe=function(){m("observerUpdate",K[0])};x.requestAnimationFrame?x.requestAnimationFrame(oe):x.setTimeout(oe,0)});U.observe(A,{attributes:typeof z.attributes>"u"?!0:z.attributes,childList:e.isElement||(typeof z.childList>"u"?!0:z).childList,characterData:typeof z.characterData>"u"?!0:z.characterData}),d.push(U)},T=()=>{if(e.params.observer){if(e.params.observeParents){const A=LP(e.hostEl);for(let z=0;z<A.length;z+=1)s(A[z])}s(e.hostEl,{childList:e.params.observeSlideChildren}),s(e.wrapperEl,{attributes:!1})}},E=()=>{d.forEach(A=>{A.disconnect()}),d.splice(0,d.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),l("init",T),l("destroy",E)}var bB={on(t,e,n){const l=this;if(!l.eventsListeners||l.destroyed||typeof e!="function")return l;const m=n?"unshift":"push";return t.split(" ").forEach(d=>{l.eventsListeners[d]||(l.eventsListeners[d]=[]),l.eventsListeners[d][m](e)}),l},once(t,e,n){const l=this;if(!l.eventsListeners||l.destroyed||typeof e!="function")return l;function m(){l.off(t,m),m.__emitterProxy&&delete m.__emitterProxy;for(var d=arguments.length,x=new Array(d),s=0;s<d;s++)x[s]=arguments[s];e.apply(l,x)}return m.__emitterProxy=e,l.on(t,m,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const l=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[l](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(l=>{typeof e>"u"?n.eventsListeners[l]=[]:n.eventsListeners[l]&&n.eventsListeners[l].forEach((m,d)=>{(m===e||m.__emitterProxy&&m.__emitterProxy===e)&&n.eventsListeners[l].splice(d,1)})}),n},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let e,n,l;for(var m=arguments.length,d=new Array(m),x=0;x<m;x++)d[x]=arguments[x];return typeof d[0]=="string"||Array.isArray(d[0])?(e=d[0],n=d.slice(1,d.length),l=t):(e=d[0].events,n=d[0].data,l=d[0].context||t),n.unshift(l),(Array.isArray(e)?e:e.split(" ")).forEach(T=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(E=>{E.apply(l,[T,...n])}),t.eventsListeners&&t.eventsListeners[T]&&t.eventsListeners[T].forEach(E=>{E.apply(l,n)})}),t}};function _B(){const t=this;let e,n;const l=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=l.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=l.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(ju(l,"padding-left")||0,10)-parseInt(ju(l,"padding-right")||0,10),n=n-parseInt(ju(l,"padding-top")||0,10)-parseInt(ju(l,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function xB(){const t=this;function e($e,Je){return parseFloat($e.getPropertyValue(t.getDirectionLabel(Je))||0)}const n=t.params,{wrapperEl:l,slidesEl:m,size:d,rtlTranslate:x,wrongRTL:s}=t,T=t.virtual&&n.virtual.enabled,E=T?t.virtual.slides.length:t.slides.length,A=Ul(m,`.${t.params.slideClass}, swiper-slide`),z=T?t.virtual.slides.length:A.length;let j=[];const U=[],K=[];let oe=n.slidesOffsetBefore;typeof oe=="function"&&(oe=n.slidesOffsetBefore.call(t));let fe=n.slidesOffsetAfter;typeof fe=="function"&&(fe=n.slidesOffsetAfter.call(t));const me=t.snapGrid.length,ne=t.slidesGrid.length;let te=n.spaceBetween,re=-oe,ze=0,_t=0;if(typeof d>"u")return;typeof te=="string"&&te.indexOf("%")>=0?te=parseFloat(te.replace("%",""))/100*d:typeof te=="string"&&(te=parseFloat(te)),t.virtualSize=-te,A.forEach($e=>{x?$e.style.marginLeft="":$e.style.marginRight="",$e.style.marginBottom="",$e.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(gb(l,"--swiper-centered-offset-before",""),gb(l,"--swiper-centered-offset-after",""));const Me=n.grid&&n.grid.rows>1&&t.grid;Me?t.grid.initSlides(A):t.grid&&t.grid.unsetSlides();let he;const Ce=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter($e=>typeof n.breakpoints[$e].slidesPerView<"u").length>0;for(let $e=0;$e<z;$e+=1){he=0;let Je;if(A[$e]&&(Je=A[$e]),Me&&t.grid.updateSlide($e,Je,A),!(A[$e]&&ju(Je,"display")==="none")){if(n.slidesPerView==="auto"){Ce&&(A[$e].style[t.getDirectionLabel("width")]="");const ft=getComputedStyle(Je),ut=Je.style.transform,Qe=Je.style.webkitTransform;if(ut&&(Je.style.transform="none"),Qe&&(Je.style.webkitTransform="none"),n.roundLengths)he=t.isHorizontal()?i2(Je,"width"):i2(Je,"height");else{const Qt=e(ft,"width"),kt=e(ft,"padding-left"),wt=e(ft,"padding-right"),Et=e(ft,"margin-left"),on=e(ft,"margin-right"),In=ft.getPropertyValue("box-sizing");if(In&&In==="border-box")he=Qt+Et+on;else{const{clientWidth:ir,offsetWidth:Or}=Je;he=Qt+kt+wt+Et+on+(Or-ir)}}ut&&(Je.style.transform=ut),Qe&&(Je.style.webkitTransform=Qe),n.roundLengths&&(he=Math.floor(he))}else he=(d-(n.slidesPerView-1)*te)/n.slidesPerView,n.roundLengths&&(he=Math.floor(he)),A[$e]&&(A[$e].style[t.getDirectionLabel("width")]=`${he}px`);A[$e]&&(A[$e].swiperSlideSize=he),K.push(he),n.centeredSlides?(re=re+he/2+ze/2+te,ze===0&&$e!==0&&(re=re-d/2-te),$e===0&&(re=re-d/2-te),Math.abs(re)<1/1e3&&(re=0),n.roundLengths&&(re=Math.floor(re)),_t%n.slidesPerGroup===0&&j.push(re),U.push(re)):(n.roundLengths&&(re=Math.floor(re)),(_t-Math.min(t.params.slidesPerGroupSkip,_t))%t.params.slidesPerGroup===0&&j.push(re),U.push(re),re=re+he+te),t.virtualSize+=he+te,ze=he,_t+=1}}if(t.virtualSize=Math.max(t.virtualSize,d)+fe,x&&s&&(n.effect==="slide"||n.effect==="coverflow")&&(l.style.width=`${t.virtualSize+te}px`),n.setWrapperSize&&(l.style[t.getDirectionLabel("width")]=`${t.virtualSize+te}px`),Me&&t.grid.updateWrapperSize(he,j),!n.centeredSlides){const $e=[];for(let Je=0;Je<j.length;Je+=1){let ft=j[Je];n.roundLengths&&(ft=Math.floor(ft)),j[Je]<=t.virtualSize-d&&$e.push(ft)}j=$e,Math.floor(t.virtualSize-d)-Math.floor(j[j.length-1])>1&&j.push(t.virtualSize-d)}if(T&&n.loop){const $e=K[0]+te;if(n.slidesPerGroup>1){const Je=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/n.slidesPerGroup),ft=$e*n.slidesPerGroup;for(let ut=0;ut<Je;ut+=1)j.push(j[j.length-1]+ft)}for(let Je=0;Je<t.virtual.slidesBefore+t.virtual.slidesAfter;Je+=1)n.slidesPerGroup===1&&j.push(j[j.length-1]+$e),U.push(U[U.length-1]+$e),t.virtualSize+=$e}if(j.length===0&&(j=[0]),te!==0){const $e=t.isHorizontal()&&x?"marginLeft":t.getDirectionLabel("marginRight");A.filter((Je,ft)=>!n.cssMode||n.loop?!0:ft!==A.length-1).forEach(Je=>{Je.style[$e]=`${te}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let $e=0;K.forEach(ft=>{$e+=ft+(te||0)}),$e-=te;const Je=$e>d?$e-d:0;j=j.map(ft=>ft<=0?-oe:ft>Je?Je+fe:ft)}if(n.centerInsufficientSlides){let $e=0;K.forEach(ft=>{$e+=ft+(te||0)}),$e-=te;const Je=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if($e+Je<d){const ft=(d-$e-Je)/2;j.forEach((ut,Qe)=>{j[Qe]=ut-ft}),U.forEach((ut,Qe)=>{U[Qe]=ut+ft})}}if(Object.assign(t,{slides:A,snapGrid:j,slidesGrid:U,slidesSizesGrid:K}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){gb(l,"--swiper-centered-offset-before",`${-j[0]}px`),gb(l,"--swiper-centered-offset-after",`${t.size/2-K[K.length-1]/2}px`);const $e=-t.snapGrid[0],Je=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(ft=>ft+$e),t.slidesGrid=t.slidesGrid.map(ft=>ft+Je)}if(z!==E&&t.emit("slidesLengthChange"),j.length!==me&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),U.length!==ne&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!T&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const $e=`${n.containerModifierClass}backface-hidden`,Je=t.el.classList.contains($e);z<=n.maxBackfaceHiddenSlides?Je||t.el.classList.add($e):Je&&t.el.classList.remove($e)}}function wB(t){const e=this,n=[],l=e.virtual&&e.params.virtual.enabled;let m=0,d;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const x=s=>l?e.slides[e.getSlideIndexByData(s)]:e.slides[s];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(s=>{n.push(s)});else for(d=0;d<Math.ceil(e.params.slidesPerView);d+=1){const s=e.activeIndex+d;if(s>e.slides.length&&!l)break;n.push(x(s))}else n.push(x(e.activeIndex));for(d=0;d<n.length;d+=1)if(typeof n[d]<"u"){const s=n[d].offsetHeight;m=s>m?s:m}(m||m===0)&&(e.wrapperEl.style.height=`${m}px`)}function SB(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let l=0;l<e.length;l+=1)e[l].swiperSlideOffset=(t.isHorizontal()?e[l].offsetLeft:e[l].offsetTop)-n-t.cssOverflowAdjustment()}const l4=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function CB(t){t===void 0&&(t=this&&this.translate||0);const e=this,n=e.params,{slides:l,rtlTranslate:m,snapGrid:d}=e;if(l.length===0)return;typeof l[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let x=-t;m&&(x=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let s=n.spaceBetween;typeof s=="string"&&s.indexOf("%")>=0?s=parseFloat(s.replace("%",""))/100*e.size:typeof s=="string"&&(s=parseFloat(s));for(let T=0;T<l.length;T+=1){const E=l[T];let A=E.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(A-=l[0].swiperSlideOffset);const z=(x+(n.centeredSlides?e.minTranslate():0)-A)/(E.swiperSlideSize+s),j=(x-d[0]+(n.centeredSlides?e.minTranslate():0)-A)/(E.swiperSlideSize+s),U=-(x-A),K=U+e.slidesSizesGrid[T],oe=U>=0&&U<=e.size-e.slidesSizesGrid[T],fe=U>=0&&U<e.size-1||K>1&&K<=e.size||U<=0&&K>=e.size;fe&&(e.visibleSlides.push(E),e.visibleSlidesIndexes.push(T)),l4(E,fe,n.slideVisibleClass),l4(E,oe,n.slideFullyVisibleClass),E.progress=m?-z:z,E.originalProgress=m?-j:j}}function kB(t){const e=this;if(typeof t>"u"){const A=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*A||0}const n=e.params,l=e.maxTranslate()-e.minTranslate();let{progress:m,isBeginning:d,isEnd:x,progressLoop:s}=e;const T=d,E=x;if(l===0)m=0,d=!0,x=!0;else{m=(t-e.minTranslate())/l;const A=Math.abs(t-e.minTranslate())<1,z=Math.abs(t-e.maxTranslate())<1;d=A||m<=0,x=z||m>=1,A&&(m=0),z&&(m=1)}if(n.loop){const A=e.getSlideIndexByData(0),z=e.getSlideIndexByData(e.slides.length-1),j=e.slidesGrid[A],U=e.slidesGrid[z],K=e.slidesGrid[e.slidesGrid.length-1],oe=Math.abs(t);oe>=j?s=(oe-j)/K:s=(oe+K-U)/K,s>1&&(s-=1)}Object.assign(e,{progress:m,progressLoop:s,isBeginning:d,isEnd:x}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),d&&!T&&e.emit("reachBeginning toEdge"),x&&!E&&e.emit("reachEnd toEdge"),(T&&!d||E&&!x)&&e.emit("fromEdge"),e.emit("progress",m)}const xw=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function TB(){const t=this,{slides:e,params:n,slidesEl:l,activeIndex:m}=t,d=t.virtual&&n.virtual.enabled,x=t.grid&&n.grid&&n.grid.rows>1,s=z=>Ul(l,`.${n.slideClass}${z}, swiper-slide${z}`)[0];let T,E,A;if(d)if(n.loop){let z=m-t.virtual.slidesBefore;z<0&&(z=t.virtual.slides.length+z),z>=t.virtual.slides.length&&(z-=t.virtual.slides.length),T=s(`[data-swiper-slide-index="${z}"]`)}else T=s(`[data-swiper-slide-index="${m}"]`);else x?(T=e.find(z=>z.column===m),A=e.find(z=>z.column===m+1),E=e.find(z=>z.column===m-1)):T=e[m];T&&(x||(A=pB(T,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!A&&(A=e[0]),E=hB(T,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!E===0&&(E=e[e.length-1]))),e.forEach(z=>{xw(z,z===T,n.slideActiveClass),xw(z,z===A,n.slideNextClass),xw(z,z===E,n.slidePrevClass)}),t.emitSlidesClasses()}const Mb=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,l=e.closest(n());if(l){let m=l.querySelector(`.${t.params.lazyPreloaderClass}`);!m&&t.isElement&&(l.shadowRoot?m=l.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{l.shadowRoot&&(m=l.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),m&&m.remove())})),m&&m.remove()}},ww=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},o2=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const l=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),m=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const x=m,s=[x-e];s.push(...Array.from({length:e}).map((T,E)=>x+l+E)),t.slides.forEach((T,E)=>{s.includes(T.column)&&ww(t,E)});return}const d=m+l-1;if(t.params.rewind||t.params.loop)for(let x=m-e;x<=d+e;x+=1){const s=(x%n+n)%n;(s<m||s>d)&&ww(t,s)}else for(let x=Math.max(m-e,0);x<=Math.min(d+e,n-1);x+=1)x!==m&&(x>d||x<m)&&ww(t,x)};function EB(t){const{slidesGrid:e,params:n}=t,l=t.rtlTranslate?t.translate:-t.translate;let m;for(let d=0;d<e.length;d+=1)typeof e[d+1]<"u"?l>=e[d]&&l<e[d+1]-(e[d+1]-e[d])/2?m=d:l>=e[d]&&l<e[d+1]&&(m=d+1):l>=e[d]&&(m=d);return n.normalizeSlideIndex&&(m<0||typeof m>"u")&&(m=0),m}function IB(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:l,params:m,activeIndex:d,realIndex:x,snapIndex:s}=e;let T=t,E;const A=U=>{let K=U-e.virtual.slidesBefore;return K<0&&(K=e.virtual.slides.length+K),K>=e.virtual.slides.length&&(K-=e.virtual.slides.length),K};if(typeof T>"u"&&(T=EB(e)),l.indexOf(n)>=0)E=l.indexOf(n);else{const U=Math.min(m.slidesPerGroupSkip,T);E=U+Math.floor((T-U)/m.slidesPerGroup)}if(E>=l.length&&(E=l.length-1),T===d&&!e.params.loop){E!==s&&(e.snapIndex=E,e.emit("snapIndexChange"));return}if(T===d&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=A(T);return}const z=e.grid&&m.grid&&m.grid.rows>1;let j;if(e.virtual&&m.virtual.enabled&&m.loop)j=A(T);else if(z){const U=e.slides.find(oe=>oe.column===T);let K=parseInt(U.getAttribute("data-swiper-slide-index"),10);Number.isNaN(K)&&(K=Math.max(e.slides.indexOf(U),0)),j=Math.floor(K/m.grid.rows)}else if(e.slides[T]){const U=e.slides[T].getAttribute("data-swiper-slide-index");U?j=parseInt(U,10):j=T}else j=T;Object.assign(e,{previousSnapIndex:s,snapIndex:E,previousRealIndex:x,realIndex:j,previousIndex:d,activeIndex:T}),e.initialized&&o2(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(x!==j&&e.emit("realIndexChange"),e.emit("slideChange"))}function PB(t,e){const n=this,l=n.params;let m=t.closest(`.${l.slideClass}, swiper-slide`);!m&&n.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(s=>{!m&&s.matches&&s.matches(`.${l.slideClass}, swiper-slide`)&&(m=s)});let d=!1,x;if(m){for(let s=0;s<n.slides.length;s+=1)if(n.slides[s]===m){d=!0,x=s;break}}if(m&&d)n.clickedSlide=m,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(m.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=x;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}l.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var AB={updateSize:_B,updateSlides:xB,updateAutoHeight:wB,updateSlidesOffset:SB,updateSlidesProgress:CB,updateProgress:kB,updateSlidesClasses:TB,updateActiveIndex:IB,updateClickedSlide:PB};function RB(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:n,rtlTranslate:l,translate:m,wrapperEl:d}=e;if(n.virtualTranslate)return l?-m:m;if(n.cssMode)return m;let x=lB(d,t);return x+=e.cssOverflowAdjustment(),l&&(x=-x),x||0}function MB(t,e){const n=this,{rtlTranslate:l,params:m,wrapperEl:d,progress:x}=n;let s=0,T=0;const E=0;n.isHorizontal()?s=l?-t:t:T=t,m.roundLengths&&(s=Math.floor(s),T=Math.floor(T)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?s:T,m.cssMode?d[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-s:-T:m.virtualTranslate||(n.isHorizontal()?s-=n.cssOverflowAdjustment():T-=n.cssOverflowAdjustment(),d.style.transform=`translate3d(${s}px, ${T}px, ${E}px)`);let A;const z=n.maxTranslate()-n.minTranslate();z===0?A=0:A=(t-n.minTranslate())/z,A!==x&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function DB(){return-this.snapGrid[0]}function LB(){return-this.snapGrid[this.snapGrid.length-1]}function OB(t,e,n,l,m){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),n===void 0&&(n=!0),l===void 0&&(l=!0);const d=this,{params:x,wrapperEl:s}=d;if(d.animating&&x.preventInteractionOnTransition)return!1;const T=d.minTranslate(),E=d.maxTranslate();let A;if(l&&t>T?A=T:l&&t<E?A=E:A=t,d.updateProgress(A),x.cssMode){const z=d.isHorizontal();if(e===0)s[z?"scrollLeft":"scrollTop"]=-A;else{if(!d.support.smoothScroll)return DP({swiper:d,targetPosition:-A,side:z?"left":"top"}),!0;s.scrollTo({[z?"left":"top"]:-A,behavior:"smooth"})}return!0}return e===0?(d.setTransition(0),d.setTranslate(A),n&&(d.emit("beforeTransitionStart",e,m),d.emit("transitionEnd"))):(d.setTransition(e),d.setTranslate(A),n&&(d.emit("beforeTransitionStart",e,m),d.emit("transitionStart")),d.animating||(d.animating=!0,d.onTranslateToWrapperTransitionEnd||(d.onTranslateToWrapperTransitionEnd=function(j){!d||d.destroyed||j.target===this&&(d.wrapperEl.removeEventListener("transitionend",d.onTranslateToWrapperTransitionEnd),d.onTranslateToWrapperTransitionEnd=null,delete d.onTranslateToWrapperTransitionEnd,d.animating=!1,n&&d.emit("transitionEnd"))}),d.wrapperEl.addEventListener("transitionend",d.onTranslateToWrapperTransitionEnd))),!0}var zB={getTranslate:RB,setTranslate:MB,minTranslate:DB,maxTranslate:LB,translateTo:OB};function BB(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`,n.wrapperEl.style.transitionDelay=t===0?"0ms":""),n.emit("setTransition",t,e)}function FP(t){let{swiper:e,runCallbacks:n,direction:l,step:m}=t;const{activeIndex:d,previousIndex:x}=e;let s=l;s||(d>x?s="next":d<x?s="prev":s="reset"),e.emit(`transition${m}`),n&&s==="reset"?e.emit(`slideResetTransition${m}`):n&&d!==x&&(e.emit(`slideChangeTransition${m}`),s==="next"?e.emit(`slideNextTransition${m}`):e.emit(`slidePrevTransition${m}`))}function FB(t,e){t===void 0&&(t=!0);const n=this,{params:l}=n;l.cssMode||(l.autoHeight&&n.updateAutoHeight(),FP({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function $B(t,e){t===void 0&&(t=!0);const n=this,{params:l}=n;n.animating=!1,!l.cssMode&&(n.setTransition(0),FP({swiper:n,runCallbacks:t,direction:e,step:"End"}))}var NB={setTransition:BB,transitionStart:FB,transitionEnd:$B};function VB(t,e,n,l,m){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const d=this;let x=t;x<0&&(x=0);const{params:s,snapGrid:T,slidesGrid:E,previousIndex:A,activeIndex:z,rtlTranslate:j,wrapperEl:U,enabled:K}=d;if(!K&&!l&&!m||d.destroyed||d.animating&&s.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=d.params.speed);const oe=Math.min(d.params.slidesPerGroupSkip,x);let fe=oe+Math.floor((x-oe)/d.params.slidesPerGroup);fe>=T.length&&(fe=T.length-1);const me=-T[fe];if(s.normalizeSlideIndex)for(let Me=0;Me<E.length;Me+=1){const he=-Math.floor(me*100),Ce=Math.floor(E[Me]*100),$e=Math.floor(E[Me+1]*100);typeof E[Me+1]<"u"?he>=Ce&&he<$e-($e-Ce)/2?x=Me:he>=Ce&&he<$e&&(x=Me+1):he>=Ce&&(x=Me)}if(d.initialized&&x!==z&&(!d.allowSlideNext&&(j?me>d.translate&&me>d.minTranslate():me<d.translate&&me<d.minTranslate())||!d.allowSlidePrev&&me>d.translate&&me>d.maxTranslate()&&(z||0)!==x))return!1;x!==(A||0)&&n&&d.emit("beforeSlideChangeStart"),d.updateProgress(me);let ne;x>z?ne="next":x<z?ne="prev":ne="reset";const te=d.virtual&&d.params.virtual.enabled;if(!(te&&m)&&(j&&-me===d.translate||!j&&me===d.translate))return d.updateActiveIndex(x),s.autoHeight&&d.updateAutoHeight(),d.updateSlidesClasses(),s.effect!=="slide"&&d.setTranslate(me),ne!=="reset"&&(d.transitionStart(n,ne),d.transitionEnd(n,ne)),!1;if(s.cssMode){const Me=d.isHorizontal(),he=j?me:-me;if(e===0)te&&(d.wrapperEl.style.scrollSnapType="none",d._immediateVirtual=!0),te&&!d._cssModeVirtualInitialSet&&d.params.initialSlide>0?(d._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{U[Me?"scrollLeft":"scrollTop"]=he})):U[Me?"scrollLeft":"scrollTop"]=he,te&&requestAnimationFrame(()=>{d.wrapperEl.style.scrollSnapType="",d._immediateVirtual=!1});else{if(!d.support.smoothScroll)return DP({swiper:d,targetPosition:he,side:Me?"left":"top"}),!0;U.scrollTo({[Me?"left":"top"]:he,behavior:"smooth"})}return!0}const _t=BP().isSafari;return te&&!m&&_t&&d.isElement&&d.virtual.update(!1,!1,x),d.setTransition(e),d.setTranslate(me),d.updateActiveIndex(x),d.updateSlidesClasses(),d.emit("beforeTransitionStart",e,l),d.transitionStart(n,ne),e===0?d.transitionEnd(n,ne):d.animating||(d.animating=!0,d.onSlideToWrapperTransitionEnd||(d.onSlideToWrapperTransitionEnd=function(he){!d||d.destroyed||he.target===this&&(d.wrapperEl.removeEventListener("transitionend",d.onSlideToWrapperTransitionEnd),d.onSlideToWrapperTransitionEnd=null,delete d.onSlideToWrapperTransitionEnd,d.transitionEnd(n,ne))}),d.wrapperEl.addEventListener("transitionend",d.onSlideToWrapperTransitionEnd)),!0}function jB(t,e,n,l){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const m=this;if(m.destroyed)return;typeof e>"u"&&(e=m.params.speed);const d=m.grid&&m.params.grid&&m.params.grid.rows>1;let x=t;if(m.params.loop)if(m.virtual&&m.params.virtual.enabled)x=x+m.virtual.slidesBefore;else{let s;if(d){const j=x*m.params.grid.rows;s=m.slides.find(U=>U.getAttribute("data-swiper-slide-index")*1===j).column}else s=m.getSlideIndexByData(x);const T=d?Math.ceil(m.slides.length/m.params.grid.rows):m.slides.length,{centeredSlides:E}=m.params;let A=m.params.slidesPerView;A==="auto"?A=m.slidesPerViewDynamic():(A=Math.ceil(parseFloat(m.params.slidesPerView,10)),E&&A%2===0&&(A=A+1));let z=T-s<A;if(E&&(z=z||s<Math.ceil(A/2)),l&&E&&m.params.slidesPerView!=="auto"&&!d&&(z=!1),z){const j=E?s<m.activeIndex?"prev":"next":s-m.activeIndex-1<m.params.slidesPerView?"next":"prev";m.loopFix({direction:j,slideTo:!0,activeSlideIndex:j==="next"?s+1:s-T+1,slideRealIndex:j==="next"?m.realIndex:void 0})}if(d){const j=x*m.params.grid.rows;x=m.slides.find(U=>U.getAttribute("data-swiper-slide-index")*1===j).column}else x=m.getSlideIndexByData(x)}return requestAnimationFrame(()=>{m.slideTo(x,e,n,l)}),m}function UB(t,e,n){e===void 0&&(e=!0);const l=this,{enabled:m,params:d,animating:x}=l;if(!m||l.destroyed)return l;typeof t>"u"&&(t=l.params.speed);let s=d.slidesPerGroup;d.slidesPerView==="auto"&&d.slidesPerGroup===1&&d.slidesPerGroupAuto&&(s=Math.max(l.slidesPerViewDynamic("current",!0),1));const T=l.activeIndex<d.slidesPerGroupSkip?1:s,E=l.virtual&&d.virtual.enabled;if(d.loop){if(x&&!E&&d.loopPreventsSliding)return!1;if(l.loopFix({direction:"next"}),l._clientLeft=l.wrapperEl.clientLeft,l.activeIndex===l.slides.length-1&&d.cssMode)return requestAnimationFrame(()=>{l.slideTo(l.activeIndex+T,t,e,n)}),!0}return d.rewind&&l.isEnd?l.slideTo(0,t,e,n):l.slideTo(l.activeIndex+T,t,e,n)}function qB(t,e,n){e===void 0&&(e=!0);const l=this,{params:m,snapGrid:d,slidesGrid:x,rtlTranslate:s,enabled:T,animating:E}=l;if(!T||l.destroyed)return l;typeof t>"u"&&(t=l.params.speed);const A=l.virtual&&m.virtual.enabled;if(m.loop){if(E&&!A&&m.loopPreventsSliding)return!1;l.loopFix({direction:"prev"}),l._clientLeft=l.wrapperEl.clientLeft}const z=s?l.translate:-l.translate;function j(ne){return ne<0?-Math.floor(Math.abs(ne)):Math.floor(ne)}const U=j(z),K=d.map(ne=>j(ne)),oe=m.freeMode&&m.freeMode.enabled;let fe=d[K.indexOf(U)-1];if(typeof fe>"u"&&(m.cssMode||oe)){let ne;d.forEach((te,re)=>{U>=te&&(ne=re)}),typeof ne<"u"&&(fe=oe?d[ne]:d[ne>0?ne-1:ne])}let me=0;if(typeof fe<"u"&&(me=x.indexOf(fe),me<0&&(me=l.activeIndex-1),m.slidesPerView==="auto"&&m.slidesPerGroup===1&&m.slidesPerGroupAuto&&(me=me-l.slidesPerViewDynamic("previous",!0)+1,me=Math.max(me,0))),m.rewind&&l.isBeginning){const ne=l.params.virtual&&l.params.virtual.enabled&&l.virtual?l.virtual.slides.length-1:l.slides.length-1;return l.slideTo(ne,t,e,n)}else if(m.loop&&l.activeIndex===0&&m.cssMode)return requestAnimationFrame(()=>{l.slideTo(me,t,e,n)}),!0;return l.slideTo(me,t,e,n)}function HB(t,e,n){e===void 0&&(e=!0);const l=this;if(!l.destroyed)return typeof t>"u"&&(t=l.params.speed),l.slideTo(l.activeIndex,t,e,n)}function GB(t,e,n,l){e===void 0&&(e=!0),l===void 0&&(l=.5);const m=this;if(m.destroyed)return;typeof t>"u"&&(t=m.params.speed);let d=m.activeIndex;const x=Math.min(m.params.slidesPerGroupSkip,d),s=x+Math.floor((d-x)/m.params.slidesPerGroup),T=m.rtlTranslate?m.translate:-m.translate;if(T>=m.snapGrid[s]){const E=m.snapGrid[s],A=m.snapGrid[s+1];T-E>(A-E)*l&&(d+=m.params.slidesPerGroup)}else{const E=m.snapGrid[s-1],A=m.snapGrid[s];T-E<=(A-E)*l&&(d-=m.params.slidesPerGroup)}return d=Math.max(d,0),d=Math.min(d,m.slidesGrid.length-1),m.slideTo(d,t,e,n)}function WB(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:n}=t,l=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let m=t.clickedIndex,d;const x=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;d=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?m<t.loopedSlides-l/2||m>t.slides.length-t.loopedSlides+l/2?(t.loopFix(),m=t.getSlideIndex(Ul(n,`${x}[data-swiper-slide-index="${d}"]`)[0]),r2(()=>{t.slideTo(m)})):t.slideTo(m):m>t.slides.length-l?(t.loopFix(),m=t.getSlideIndex(Ul(n,`${x}[data-swiper-slide-index="${d}"]`)[0]),r2(()=>{t.slideTo(m)})):t.slideTo(m)}else t.slideTo(m)}var KB={slideTo:VB,slideToLoop:jB,slideNext:UB,slidePrev:qB,slideReset:HB,slideToClosest:GB,slideToClickedSlide:WB};function ZB(t,e){const n=this,{params:l,slidesEl:m}=n;if(!l.loop||n.virtual&&n.params.virtual.enabled)return;const d=()=>{Ul(m,`.${l.slideClass}, swiper-slide`).forEach((j,U)=>{j.setAttribute("data-swiper-slide-index",U)})},x=n.grid&&l.grid&&l.grid.rows>1,s=l.slidesPerGroup*(x?l.grid.rows:1),T=n.slides.length%s!==0,E=x&&n.slides.length%l.grid.rows!==0,A=z=>{for(let j=0;j<z;j+=1){const U=n.isElement?c_("swiper-slide",[l.slideBlankClass]):c_("div",[l.slideClass,l.slideBlankClass]);n.slidesEl.append(U)}};if(T){if(l.loopAddBlankSlides){const z=s-n.slides.length%s;A(z),n.recalcSlides(),n.updateSlides()}else l_("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");d()}else if(E){if(l.loopAddBlankSlides){const z=l.grid.rows-n.slides.length%l.grid.rows;A(z),n.recalcSlides(),n.updateSlides()}else l_("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");d()}else d();n.loopFix({slideRealIndex:t,direction:l.centeredSlides?void 0:"next",initial:e})}function XB(t){let{slideRealIndex:e,slideTo:n=!0,direction:l,setTranslate:m,activeSlideIndex:d,initial:x,byController:s,byMousewheel:T}=t===void 0?{}:t;const E=this;if(!E.params.loop)return;E.emit("beforeLoopFix");const{slides:A,allowSlidePrev:z,allowSlideNext:j,slidesEl:U,params:K}=E,{centeredSlides:oe,initialSlide:fe}=K;if(E.allowSlidePrev=!0,E.allowSlideNext=!0,E.virtual&&K.virtual.enabled){n&&(!K.centeredSlides&&E.snapIndex===0?E.slideTo(E.virtual.slides.length,0,!1,!0):K.centeredSlides&&E.snapIndex<K.slidesPerView?E.slideTo(E.virtual.slides.length+E.snapIndex,0,!1,!0):E.snapIndex===E.snapGrid.length-1&&E.slideTo(E.virtual.slidesBefore,0,!1,!0)),E.allowSlidePrev=z,E.allowSlideNext=j,E.emit("loopFix");return}let me=K.slidesPerView;me==="auto"?me=E.slidesPerViewDynamic():(me=Math.ceil(parseFloat(K.slidesPerView,10)),oe&&me%2===0&&(me=me+1));const ne=K.slidesPerGroupAuto?me:K.slidesPerGroup;let te=ne;te%ne!==0&&(te+=ne-te%ne),te+=K.loopAdditionalSlides,E.loopedSlides=te;const re=E.grid&&K.grid&&K.grid.rows>1;A.length<me+te||E.params.effect==="cards"&&A.length<me+te*2?l_("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):re&&K.grid.fill==="row"&&l_("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const ze=[],_t=[],Me=re?Math.ceil(A.length/K.grid.rows):A.length,he=x&&Me-fe<me&&!oe;let Ce=he?fe:E.activeIndex;typeof d>"u"?d=E.getSlideIndex(A.find(kt=>kt.classList.contains(K.slideActiveClass))):Ce=d;const $e=l==="next"||!l,Je=l==="prev"||!l;let ft=0,ut=0;const Qt=(re?A[d].column:d)+(oe&&typeof m>"u"?-me/2+.5:0);if(Qt<te){ft=Math.max(te-Qt,ne);for(let kt=0;kt<te-Qt;kt+=1){const wt=kt-Math.floor(kt/Me)*Me;if(re){const Et=Me-wt-1;for(let on=A.length-1;on>=0;on-=1)A[on].column===Et&&ze.push(on)}else ze.push(Me-wt-1)}}else if(Qt+me>Me-te){ut=Math.max(Qt-(Me-te*2),ne),he&&(ut=Math.max(ut,me-Me+fe+1));for(let kt=0;kt<ut;kt+=1){const wt=kt-Math.floor(kt/Me)*Me;re?A.forEach((Et,on)=>{Et.column===wt&&_t.push(on)}):_t.push(wt)}}if(E.__preventObserver__=!0,requestAnimationFrame(()=>{E.__preventObserver__=!1}),E.params.effect==="cards"&&A.length<me+te*2&&(_t.includes(d)&&_t.splice(_t.indexOf(d),1),ze.includes(d)&&ze.splice(ze.indexOf(d),1)),Je&&ze.forEach(kt=>{A[kt].swiperLoopMoveDOM=!0,U.prepend(A[kt]),A[kt].swiperLoopMoveDOM=!1}),$e&&_t.forEach(kt=>{A[kt].swiperLoopMoveDOM=!0,U.append(A[kt]),A[kt].swiperLoopMoveDOM=!1}),E.recalcSlides(),K.slidesPerView==="auto"?E.updateSlides():re&&(ze.length>0&&Je||_t.length>0&&$e)&&E.slides.forEach((kt,wt)=>{E.grid.updateSlide(wt,kt,E.slides)}),K.watchSlidesProgress&&E.updateSlidesOffset(),n){if(ze.length>0&&Je){if(typeof e>"u"){const kt=E.slidesGrid[Ce],Et=E.slidesGrid[Ce+ft]-kt;T?E.setTranslate(E.translate-Et):(E.slideTo(Ce+Math.ceil(ft),0,!1,!0),m&&(E.touchEventsData.startTranslate=E.touchEventsData.startTranslate-Et,E.touchEventsData.currentTranslate=E.touchEventsData.currentTranslate-Et))}else if(m){const kt=re?ze.length/K.grid.rows:ze.length;E.slideTo(E.activeIndex+kt,0,!1,!0),E.touchEventsData.currentTranslate=E.translate}}else if(_t.length>0&&$e)if(typeof e>"u"){const kt=E.slidesGrid[Ce],Et=E.slidesGrid[Ce-ut]-kt;T?E.setTranslate(E.translate-Et):(E.slideTo(Ce-ut,0,!1,!0),m&&(E.touchEventsData.startTranslate=E.touchEventsData.startTranslate-Et,E.touchEventsData.currentTranslate=E.touchEventsData.currentTranslate-Et))}else{const kt=re?_t.length/K.grid.rows:_t.length;E.slideTo(E.activeIndex-kt,0,!1,!0)}}if(E.allowSlidePrev=z,E.allowSlideNext=j,E.controller&&E.controller.control&&!s){const kt={slideRealIndex:e,direction:l,setTranslate:m,activeSlideIndex:d,byController:!0};Array.isArray(E.controller.control)?E.controller.control.forEach(wt=>{!wt.destroyed&&wt.params.loop&&wt.loopFix({...kt,slideTo:wt.params.slidesPerView===K.slidesPerView?n:!1})}):E.controller.control instanceof E.constructor&&E.controller.control.params.loop&&E.controller.control.loopFix({...kt,slideTo:E.controller.control.params.slidesPerView===K.slidesPerView?n:!1})}E.emit("loopFix")}function YB(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||!n||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const l=[];t.slides.forEach(m=>{const d=typeof m.swiperSlideIndex>"u"?m.getAttribute("data-swiper-slide-index")*1:m.swiperSlideIndex;l[d]=m}),t.slides.forEach(m=>{m.removeAttribute("data-swiper-slide-index")}),l.forEach(m=>{n.append(m)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var JB={loopCreate:ZB,loopFix:XB,loopDestroy:YB};function QB(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function e9(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var t9={setGrabCursor:QB,unsetGrabCursor:e9};function n9(t,e){e===void 0&&(e=this);function n(l){if(!l||l===Gl()||l===Os())return null;l.assignedSlot&&(l=l.assignedSlot);const m=l.closest(t);return!m&&!l.getRootNode?null:m||n(l.getRootNode().host)}return n(e)}function c4(t,e,n){const l=Os(),{params:m}=t,d=m.edgeSwipeDetection,x=m.edgeSwipeThreshold;return d&&(n<=x||n>=l.innerWidth-x)?d==="prevent"?(e.preventDefault(),!0):!1:!0}function r9(t){const e=this,n=Gl();let l=t;l.originalEvent&&(l=l.originalEvent);const m=e.touchEventsData;if(l.type==="pointerdown"){if(m.pointerId!==null&&m.pointerId!==l.pointerId)return;m.pointerId=l.pointerId}else l.type==="touchstart"&&l.targetTouches.length===1&&(m.touchId=l.targetTouches[0].identifier);if(l.type==="touchstart"){c4(e,l,l.targetTouches[0].pageX);return}const{params:d,touches:x,enabled:s}=e;if(!s||!d.simulateTouch&&l.pointerType==="mouse"||e.animating&&d.preventInteractionOnTransition)return;!e.animating&&d.cssMode&&d.loop&&e.loopFix();let T=l.target;if(d.touchEventsTarget==="wrapper"&&!dB(T,e.wrapperEl)||"which"in l&&l.which===3||"button"in l&&l.button>0||m.isTouched&&m.isMoved)return;const E=!!d.noSwipingClass&&d.noSwipingClass!=="",A=l.composedPath?l.composedPath():l.path;E&&l.target&&l.target.shadowRoot&&A&&(T=A[0]);const z=d.noSwipingSelector?d.noSwipingSelector:`.${d.noSwipingClass}`,j=!!(l.target&&l.target.shadowRoot);if(d.noSwiping&&(j?n9(z,T):T.closest(z))){e.allowClick=!0;return}if(d.swipeHandler&&!T.closest(d.swipeHandler))return;x.currentX=l.pageX,x.currentY=l.pageY;const U=x.currentX,K=x.currentY;if(!c4(e,l,U))return;Object.assign(m,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),x.startX=U,x.startY=K,m.touchStartTime=a_(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,d.threshold>0&&(m.allowThresholdMove=!1);let oe=!0;T.matches(m.focusableElements)&&(oe=!1,T.nodeName==="SELECT"&&(m.isTouched=!1)),n.activeElement&&n.activeElement.matches(m.focusableElements)&&n.activeElement!==T&&(l.pointerType==="mouse"||l.pointerType!=="mouse"&&!T.matches(m.focusableElements))&&n.activeElement.blur();const fe=oe&&e.allowTouchMove&&d.touchStartPreventDefault;(d.touchStartForcePreventDefault||fe)&&!T.isContentEditable&&l.preventDefault(),d.freeMode&&d.freeMode.enabled&&e.freeMode&&e.animating&&!d.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function i9(t){const e=Gl(),n=this,l=n.touchEventsData,{params:m,touches:d,rtlTranslate:x,enabled:s}=n;if(!s||!m.simulateTouch&&t.pointerType==="mouse")return;let T=t;if(T.originalEvent&&(T=T.originalEvent),T.type==="pointermove"&&(l.touchId!==null||T.pointerId!==l.pointerId))return;let E;if(T.type==="touchmove"){if(E=[...T.changedTouches].find(ze=>ze.identifier===l.touchId),!E||E.identifier!==l.touchId)return}else E=T;if(!l.isTouched){l.startMoving&&l.isScrolling&&n.emit("touchMoveOpposite",T);return}const A=E.pageX,z=E.pageY;if(T.preventedByNestedSwiper){d.startX=A,d.startY=z;return}if(!n.allowTouchMove){T.target.matches(l.focusableElements)||(n.allowClick=!1),l.isTouched&&(Object.assign(d,{startX:A,startY:z,currentX:A,currentY:z}),l.touchStartTime=a_());return}if(m.touchReleaseOnEdges&&!m.loop)if(n.isVertical()){if(z<d.startY&&n.translate<=n.maxTranslate()||z>d.startY&&n.translate>=n.minTranslate()){l.isTouched=!1,l.isMoved=!1;return}}else{if(x&&(A>d.startX&&-n.translate<=n.maxTranslate()||A<d.startX&&-n.translate>=n.minTranslate()))return;if(!x&&(A<d.startX&&n.translate<=n.maxTranslate()||A>d.startX&&n.translate>=n.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(l.focusableElements)&&e.activeElement!==T.target&&T.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&T.target===e.activeElement&&T.target.matches(l.focusableElements)){l.isMoved=!0,n.allowClick=!1;return}l.allowTouchCallbacks&&n.emit("touchMove",T),d.previousX=d.currentX,d.previousY=d.currentY,d.currentX=A,d.currentY=z;const j=d.currentX-d.startX,U=d.currentY-d.startY;if(n.params.threshold&&Math.sqrt(j**2+U**2)<n.params.threshold)return;if(typeof l.isScrolling>"u"){let ze;n.isHorizontal()&&d.currentY===d.startY||n.isVertical()&&d.currentX===d.startX?l.isScrolling=!1:j*j+U*U>=25&&(ze=Math.atan2(Math.abs(U),Math.abs(j))*180/Math.PI,l.isScrolling=n.isHorizontal()?ze>m.touchAngle:90-ze>m.touchAngle)}if(l.isScrolling&&n.emit("touchMoveOpposite",T),typeof l.startMoving>"u"&&(d.currentX!==d.startX||d.currentY!==d.startY)&&(l.startMoving=!0),l.isScrolling||T.type==="touchmove"&&l.preventTouchMoveFromPointerMove){l.isTouched=!1;return}if(!l.startMoving)return;n.allowClick=!1,!m.cssMode&&T.cancelable&&T.preventDefault(),m.touchMoveStopPropagation&&!m.nested&&T.stopPropagation();let K=n.isHorizontal()?j:U,oe=n.isHorizontal()?d.currentX-d.previousX:d.currentY-d.previousY;m.oneWayMovement&&(K=Math.abs(K)*(x?1:-1),oe=Math.abs(oe)*(x?1:-1)),d.diff=K,K*=m.touchRatio,x&&(K=-K,oe=-oe);const fe=n.touchesDirection;n.swipeDirection=K>0?"prev":"next",n.touchesDirection=oe>0?"prev":"next";const me=n.params.loop&&!m.cssMode,ne=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!l.isMoved){if(me&&ne&&n.loopFix({direction:n.swipeDirection}),l.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const ze=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(ze)}l.allowMomentumBounce=!1,m.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",T)}if(new Date().getTime(),m._loopSwapReset!==!1&&l.isMoved&&l.allowThresholdMove&&fe!==n.touchesDirection&&me&&ne&&Math.abs(K)>=1){Object.assign(d,{startX:A,startY:z,currentX:A,currentY:z,startTranslate:l.currentTranslate}),l.loopSwapReset=!0,l.startTranslate=l.currentTranslate;return}n.emit("sliderMove",T),l.isMoved=!0,l.currentTranslate=K+l.startTranslate;let te=!0,re=m.resistanceRatio;if(m.touchReleaseOnEdges&&(re=0),K>0?(me&&ne&&l.allowThresholdMove&&l.currentTranslate>(m.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(m.slidesPerView!=="auto"&&n.slides.length-m.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),l.currentTranslate>n.minTranslate()&&(te=!1,m.resistance&&(l.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+l.startTranslate+K)**re))):K<0&&(me&&ne&&l.allowThresholdMove&&l.currentTranslate<(m.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(m.slidesPerView!=="auto"&&n.slides.length-m.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(m.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(m.slidesPerView,10)))}),l.currentTranslate<n.maxTranslate()&&(te=!1,m.resistance&&(l.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-l.startTranslate-K)**re))),te&&(T.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&l.currentTranslate<l.startTranslate&&(l.currentTranslate=l.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&l.currentTranslate>l.startTranslate&&(l.currentTranslate=l.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(l.currentTranslate=l.startTranslate),m.threshold>0)if(Math.abs(K)>m.threshold||l.allowThresholdMove){if(!l.allowThresholdMove){l.allowThresholdMove=!0,d.startX=d.currentX,d.startY=d.currentY,l.currentTranslate=l.startTranslate,d.diff=n.isHorizontal()?d.currentX-d.startX:d.currentY-d.startY;return}}else{l.currentTranslate=l.startTranslate;return}!m.followFinger||m.cssMode||((m.freeMode&&m.freeMode.enabled&&n.freeMode||m.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),m.freeMode&&m.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(l.currentTranslate),n.setTranslate(l.currentTranslate))}function o9(t){const e=this,n=e.touchEventsData;let l=t;l.originalEvent&&(l=l.originalEvent);let m;if(l.type==="touchend"||l.type==="touchcancel"){if(m=[...l.changedTouches].find(ze=>ze.identifier===n.touchId),!m||m.identifier!==n.touchId)return}else{if(n.touchId!==null||l.pointerId!==n.pointerId)return;m=l}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(l.type)&&!(["pointercancel","contextmenu"].includes(l.type)&&(e.browser.isSafari||e.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:x,touches:s,rtlTranslate:T,slidesGrid:E,enabled:A}=e;if(!A||!x.simulateTouch&&l.pointerType==="mouse")return;if(n.allowTouchCallbacks&&e.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&x.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}x.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const z=a_(),j=z-n.touchStartTime;if(e.allowClick){const ze=l.path||l.composedPath&&l.composedPath();e.updateClickedSlide(ze&&ze[0]||l.target,ze),e.emit("tap click",l),j<300&&z-n.lastClickTime<300&&e.emit("doubleTap doubleClick",l)}if(n.lastClickTime=a_(),r2(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||s.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let U;if(x.followFinger?U=T?e.translate:-e.translate:U=-n.currentTranslate,x.cssMode)return;if(x.freeMode&&x.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:U});return}const K=U>=-e.maxTranslate()&&!e.params.loop;let oe=0,fe=e.slidesSizesGrid[0];for(let ze=0;ze<E.length;ze+=ze<x.slidesPerGroupSkip?1:x.slidesPerGroup){const _t=ze<x.slidesPerGroupSkip-1?1:x.slidesPerGroup;typeof E[ze+_t]<"u"?(K||U>=E[ze]&&U<E[ze+_t])&&(oe=ze,fe=E[ze+_t]-E[ze]):(K||U>=E[ze])&&(oe=ze,fe=E[E.length-1]-E[E.length-2])}let me=null,ne=null;x.rewind&&(e.isBeginning?ne=x.virtual&&x.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(me=0));const te=(U-E[oe])/fe,re=oe<x.slidesPerGroupSkip-1?1:x.slidesPerGroup;if(j>x.longSwipesMs){if(!x.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(te>=x.longSwipesRatio?e.slideTo(x.rewind&&e.isEnd?me:oe+re):e.slideTo(oe)),e.swipeDirection==="prev"&&(te>1-x.longSwipesRatio?e.slideTo(oe+re):ne!==null&&te<0&&Math.abs(te)>x.longSwipesRatio?e.slideTo(ne):e.slideTo(oe))}else{if(!x.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(l.target===e.navigation.nextEl||l.target===e.navigation.prevEl)?l.target===e.navigation.nextEl?e.slideTo(oe+re):e.slideTo(oe):(e.swipeDirection==="next"&&e.slideTo(me!==null?me:oe+re),e.swipeDirection==="prev"&&e.slideTo(ne!==null?ne:oe))}}function u4(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:l,allowSlidePrev:m,snapGrid:d}=t,x=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const s=x&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!s?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!x?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=m,t.allowSlideNext=l,t.params.watchOverflow&&d!==t.snapGrid&&t.checkOverflow()}function s9(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function a9(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:l}=t;if(!l)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let m;const d=t.maxTranslate()-t.minTranslate();d===0?m=0:m=(t.translate-t.minTranslate())/d,m!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function l9(t){const e=this;Mb(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function c9(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const $P=(t,e)=>{const n=Gl(),{params:l,el:m,wrapperEl:d,device:x}=t,s=!!l.nested,T=e==="on"?"addEventListener":"removeEventListener",E=e;!m||typeof m=="string"||(n[T]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:s}),m[T]("touchstart",t.onTouchStart,{passive:!1}),m[T]("pointerdown",t.onTouchStart,{passive:!1}),n[T]("touchmove",t.onTouchMove,{passive:!1,capture:s}),n[T]("pointermove",t.onTouchMove,{passive:!1,capture:s}),n[T]("touchend",t.onTouchEnd,{passive:!0}),n[T]("pointerup",t.onTouchEnd,{passive:!0}),n[T]("pointercancel",t.onTouchEnd,{passive:!0}),n[T]("touchcancel",t.onTouchEnd,{passive:!0}),n[T]("pointerout",t.onTouchEnd,{passive:!0}),n[T]("pointerleave",t.onTouchEnd,{passive:!0}),n[T]("contextmenu",t.onTouchEnd,{passive:!0}),(l.preventClicks||l.preventClicksPropagation)&&m[T]("click",t.onClick,!0),l.cssMode&&d[T]("scroll",t.onScroll),l.updateOnWindowResize?t[E](x.ios||x.android?"resize orientationchange observerUpdate":"resize observerUpdate",u4,!0):t[E]("observerUpdate",u4,!0),m[T]("load",t.onLoad,{capture:!0}))};function u9(){const t=this,{params:e}=t;t.onTouchStart=r9.bind(t),t.onTouchMove=i9.bind(t),t.onTouchEnd=o9.bind(t),t.onDocumentTouchStart=c9.bind(t),e.cssMode&&(t.onScroll=a9.bind(t)),t.onClick=s9.bind(t),t.onLoad=l9.bind(t),$P(t,"on")}function d9(){$P(this,"off")}var h9={attachEvents:u9,detachEvents:d9};const d4=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function p9(){const t=this,{realIndex:e,initialized:n,params:l,el:m}=t,d=l.breakpoints;if(!d||d&&Object.keys(d).length===0)return;const x=Gl(),s=l.breakpointsBase==="window"||!l.breakpointsBase?l.breakpointsBase:"container",T=["window","container"].includes(l.breakpointsBase)||!l.breakpointsBase?t.el:x.querySelector(l.breakpointsBase),E=t.getBreakpoint(d,s,T);if(!E||t.currentBreakpoint===E)return;const z=(E in d?d[E]:void 0)||t.originalParams,j=d4(t,l),U=d4(t,z),K=t.params.grabCursor,oe=z.grabCursor,fe=l.enabled;j&&!U?(m.classList.remove(`${l.containerModifierClass}grid`,`${l.containerModifierClass}grid-column`),t.emitContainerClasses()):!j&&U&&(m.classList.add(`${l.containerModifierClass}grid`),(z.grid.fill&&z.grid.fill==="column"||!z.grid.fill&&l.grid.fill==="column")&&m.classList.add(`${l.containerModifierClass}grid-column`),t.emitContainerClasses()),K&&!oe?t.unsetGrabCursor():!K&&oe&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(_t=>{if(typeof z[_t]>"u")return;const Me=l[_t]&&l[_t].enabled,he=z[_t]&&z[_t].enabled;Me&&!he&&t[_t].disable(),!Me&&he&&t[_t].enable()});const me=z.direction&&z.direction!==l.direction,ne=l.loop&&(z.slidesPerView!==l.slidesPerView||me),te=l.loop;me&&n&&t.changeDirection(),ca(t.params,z);const re=t.params.enabled,ze=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),fe&&!re?t.disable():!fe&&re&&t.enable(),t.currentBreakpoint=E,t.emit("_beforeBreakpoint",z),n&&(ne?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!te&&ze?(t.loopCreate(e),t.updateSlides()):te&&!ze&&t.loopDestroy()),t.emit("breakpoint",z)}function f9(t,e,n){if(e===void 0&&(e="window"),!t||e==="container"&&!n)return;let l=!1;const m=Os(),d=e==="window"?m.innerHeight:n.clientHeight,x=Object.keys(t).map(s=>{if(typeof s=="string"&&s.indexOf("@")===0){const T=parseFloat(s.substr(1));return{value:d*T,point:s}}return{value:s,point:s}});x.sort((s,T)=>parseInt(s.value,10)-parseInt(T.value,10));for(let s=0;s<x.length;s+=1){const{point:T,value:E}=x[s];e==="window"?m.matchMedia(`(min-width: ${E}px)`).matches&&(l=T):E<=n.clientWidth&&(l=T)}return l||"max"}var m9={setBreakpoint:p9,getBreakpoint:f9};function g9(t,e){const n=[];return t.forEach(l=>{typeof l=="object"?Object.keys(l).forEach(m=>{l[m]&&n.push(e+m)}):typeof l=="string"&&n.push(e+l)}),n}function y9(){const t=this,{classNames:e,params:n,rtl:l,el:m,device:d}=t,x=g9(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:l},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:d.android},{ios:d.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...x),m.classList.add(...e),t.emitContainerClasses()}function v9(){const t=this,{el:e,classNames:n}=t;!e||typeof e=="string"||(e.classList.remove(...n),t.emitContainerClasses())}var b9={addClasses:y9,removeClasses:v9};function _9(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:l}=n;if(l){const m=t.slides.length-1,d=t.slidesGrid[m]+t.slidesSizesGrid[m]+l*2;t.isLocked=t.size>d}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var x9={checkOverflow:_9},s2={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function w9(t,e){return function(l){l===void 0&&(l={});const m=Object.keys(l)[0],d=l[m];if(typeof d!="object"||d===null){ca(e,l);return}if(t[m]===!0&&(t[m]={enabled:!0}),m==="navigation"&&t[m]&&t[m].enabled&&!t[m].prevEl&&!t[m].nextEl&&(t[m].auto=!0),["pagination","scrollbar"].indexOf(m)>=0&&t[m]&&t[m].enabled&&!t[m].el&&(t[m].auto=!0),!(m in t&&"enabled"in d)){ca(e,l);return}typeof t[m]=="object"&&!("enabled"in t[m])&&(t[m].enabled=!0),t[m]||(t[m]={enabled:!1}),ca(e,l)}}const Sw={eventsEmitter:bB,update:AB,translate:zB,transition:NB,slide:KB,loop:JB,grabCursor:t9,events:h9,breakpoints:m9,checkOverflow:x9,classes:b9},Cw={};let SS=class Ec{constructor(){let e,n;for(var l=arguments.length,m=new Array(l),d=0;d<l;d++)m[d]=arguments[d];m.length===1&&m[0].constructor&&Object.prototype.toString.call(m[0]).slice(8,-1)==="Object"?n=m[0]:[e,n]=m,n||(n={}),n=ca({},n),e&&!n.el&&(n.el=e);const x=Gl();if(n.el&&typeof n.el=="string"&&x.querySelectorAll(n.el).length>1){const A=[];return x.querySelectorAll(n.el).forEach(z=>{const j=ca({},n,{el:z});A.push(new Ec(j))}),A}const s=this;s.__swiper__=!0,s.support=OP(),s.device=zP({userAgent:n.userAgent}),s.browser=BP(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],n.modules&&Array.isArray(n.modules)&&s.modules.push(...n.modules);const T={};s.modules.forEach(A=>{A({params:n,swiper:s,extendParams:w9(n,T),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});const E=ca({},s2,T);return s.params=ca({},E,Cw,n),s.originalParams=ca({},s.params),s.passedParams=ca({},n),s.params&&s.params.on&&Object.keys(s.params.on).forEach(A=>{s.on(A,s.params.on[A])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return s.params.direction==="horizontal"},isVertical(){return s.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:n,params:l}=this,m=Ul(n,`.${l.slideClass}, swiper-slide`),d=u_(m[0]);return u_(e)-d}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(n=>n.getAttribute("data-swiper-slide-index")*1===e))}recalcSlides(){const e=this,{slidesEl:n,params:l}=e;e.slides=Ul(n,`.${l.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const l=this;e=Math.min(Math.max(e,0),1);const m=l.minTranslate(),x=(l.maxTranslate()-m)*e+m;l.translateTo(x,typeof n>"u"?0:n),l.updateActiveIndex(),l.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(l=>l.indexOf("swiper")===0||l.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(l=>l.indexOf("swiper-slide")===0||l.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(l=>{const m=e.getSlideClasses(l);n.push({slideEl:l,classNames:m}),e.emit("_slideClass",l,m)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e,n){e===void 0&&(e="current"),n===void 0&&(n=!1);const l=this,{params:m,slides:d,slidesGrid:x,slidesSizesGrid:s,size:T,activeIndex:E}=l;let A=1;if(typeof m.slidesPerView=="number")return m.slidesPerView;if(m.centeredSlides){let z=d[E]?Math.ceil(d[E].swiperSlideSize):0,j;for(let U=E+1;U<d.length;U+=1)d[U]&&!j&&(z+=Math.ceil(d[U].swiperSlideSize),A+=1,z>T&&(j=!0));for(let U=E-1;U>=0;U-=1)d[U]&&!j&&(z+=d[U].swiperSlideSize,A+=1,z>T&&(j=!0))}else if(e==="current")for(let z=E+1;z<d.length;z+=1)(n?x[z]+s[z]-x[E]<T:x[z]-x[E]<T)&&(A+=1);else for(let z=E-1;z>=0;z-=1)x[E]-x[z]<T&&(A+=1);return A}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:l}=e;l.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(x=>{x.complete&&Mb(e,x)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function m(){const x=e.rtlTranslate?e.translate*-1:e.translate,s=Math.min(Math.max(x,e.maxTranslate()),e.minTranslate());e.setTranslate(s),e.updateActiveIndex(),e.updateSlidesClasses()}let d;if(l.freeMode&&l.freeMode.enabled&&!l.cssMode)m(),l.autoHeight&&e.updateAutoHeight();else{if((l.slidesPerView==="auto"||l.slidesPerView>1)&&e.isEnd&&!l.centeredSlides){const x=e.virtual&&l.virtual.enabled?e.virtual.slides:e.slides;d=e.slideTo(x.length-1,0,!1,!0)}else d=e.slideTo(e.activeIndex,0,!1,!0);d||m()}l.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n){n===void 0&&(n=!0);const l=this,m=l.params.direction;return e||(e=m==="horizontal"?"vertical":"horizontal"),e===m||e!=="horizontal"&&e!=="vertical"||(l.el.classList.remove(`${l.params.containerModifierClass}${m}`),l.el.classList.add(`${l.params.containerModifierClass}${e}`),l.emitContainerClasses(),l.params.direction=e,l.slides.forEach(d=>{e==="vertical"?d.style.width="":d.style.height=""}),l.emit("changeDirection"),n&&l.update()),l}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let l=e||n.params.el;if(typeof l=="string"&&(l=document.querySelector(l)),!l)return!1;l.swiper=n,l.parentNode&&l.parentNode.host&&l.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const m=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let x=l&&l.shadowRoot&&l.shadowRoot.querySelector?l.shadowRoot.querySelector(m()):Ul(l,m())[0];return!x&&n.params.createElements&&(x=c_("div",n.params.wrapperClass),l.append(x),Ul(l,`.${n.params.slideClass}`).forEach(s=>{x.append(s)})),Object.assign(n,{el:l,wrapperEl:x,slidesEl:n.isElement&&!l.parentNode.host.slideSlots?l.parentNode.host:x,hostEl:n.isElement?l.parentNode.host:l,mounted:!0,rtl:l.dir.toLowerCase()==="rtl"||ju(l,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(l.dir.toLowerCase()==="rtl"||ju(l,"direction")==="rtl"),wrongRTL:ju(x,"display")==="-webkit-box"}),!0}init(e){const n=this;if(n.initialized||n.mount(e)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(void 0,!0),n.attachEvents();const m=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&m.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),m.forEach(d=>{d.complete?Mb(n,d):d.addEventListener("load",x=>{Mb(n,x.target)})}),o2(n),n.initialized=!0,o2(n),n.emit("init"),n.emit("afterInit"),n}destroy(e,n){e===void 0&&(e=!0),n===void 0&&(n=!0);const l=this,{params:m,el:d,wrapperEl:x,slides:s}=l;return typeof l.params>"u"||l.destroyed||(l.emit("beforeDestroy"),l.initialized=!1,l.detachEvents(),m.loop&&l.loopDestroy(),n&&(l.removeClasses(),d&&typeof d!="string"&&d.removeAttribute("style"),x&&x.removeAttribute("style"),s&&s.length&&s.forEach(T=>{T.classList.remove(m.slideVisibleClass,m.slideFullyVisibleClass,m.slideActiveClass,m.slideNextClass,m.slidePrevClass),T.removeAttribute("style"),T.removeAttribute("data-swiper-slide-index")})),l.emit("destroy"),Object.keys(l.eventsListeners).forEach(T=>{l.off(T)}),e!==!1&&(l.el&&typeof l.el!="string"&&(l.el.swiper=null),sB(l)),l.destroyed=!0),null}static extendDefaults(e){ca(Cw,e)}static get extendedDefaults(){return Cw}static get defaults(){return s2}static installModule(e){Ec.prototype.__modules__||(Ec.prototype.__modules__=[]);const n=Ec.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>Ec.installModule(n)),Ec):(Ec.installModule(e),Ec)}};Object.keys(Sw).forEach(t=>{Object.keys(Sw[t]).forEach(e=>{SS.prototype[e]=Sw[t][e]})});SS.use([yB,vB]);const NP=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Ch(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function mf(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(l=>n.indexOf(l)<0).forEach(l=>{typeof t[l]>"u"?t[l]=e[l]:Ch(e[l])&&Ch(t[l])&&Object.keys(e[l]).length>0?e[l].__swiper__?t[l]=e[l]:mf(t[l],e[l]):t[l]=e[l]})}function VP(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function jP(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function UP(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function qP(t){t===void 0&&(t="");const e=t.split(" ").map(l=>l.trim()).filter(l=>!!l),n=[];return e.forEach(l=>{n.indexOf(l)<0&&n.push(l)}),n.join(" ")}function S9(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function C9(t){let{swiper:e,slides:n,passedParams:l,changedParams:m,nextEl:d,prevEl:x,scrollbarEl:s,paginationEl:T}=t;const E=m.filter(Ce=>Ce!=="children"&&Ce!=="direction"&&Ce!=="wrapperClass"),{params:A,pagination:z,navigation:j,scrollbar:U,virtual:K,thumbs:oe}=e;let fe,me,ne,te,re,ze,_t,Me;m.includes("thumbs")&&l.thumbs&&l.thumbs.swiper&&!l.thumbs.swiper.destroyed&&A.thumbs&&(!A.thumbs.swiper||A.thumbs.swiper.destroyed)&&(fe=!0),m.includes("controller")&&l.controller&&l.controller.control&&A.controller&&!A.controller.control&&(me=!0),m.includes("pagination")&&l.pagination&&(l.pagination.el||T)&&(A.pagination||A.pagination===!1)&&z&&!z.el&&(ne=!0),m.includes("scrollbar")&&l.scrollbar&&(l.scrollbar.el||s)&&(A.scrollbar||A.scrollbar===!1)&&U&&!U.el&&(te=!0),m.includes("navigation")&&l.navigation&&(l.navigation.prevEl||x)&&(l.navigation.nextEl||d)&&(A.navigation||A.navigation===!1)&&j&&!j.prevEl&&!j.nextEl&&(re=!0);const he=Ce=>{e[Ce]&&(e[Ce].destroy(),Ce==="navigation"?(e.isElement&&(e[Ce].prevEl.remove(),e[Ce].nextEl.remove()),A[Ce].prevEl=void 0,A[Ce].nextEl=void 0,e[Ce].prevEl=void 0,e[Ce].nextEl=void 0):(e.isElement&&e[Ce].el.remove(),A[Ce].el=void 0,e[Ce].el=void 0))};m.includes("loop")&&e.isElement&&(A.loop&&!l.loop?ze=!0:!A.loop&&l.loop?_t=!0:Me=!0),E.forEach(Ce=>{if(Ch(A[Ce])&&Ch(l[Ce]))Object.assign(A[Ce],l[Ce]),(Ce==="navigation"||Ce==="pagination"||Ce==="scrollbar")&&"enabled"in l[Ce]&&!l[Ce].enabled&&he(Ce);else{const $e=l[Ce];($e===!0||$e===!1)&&(Ce==="navigation"||Ce==="pagination"||Ce==="scrollbar")?$e===!1&&he(Ce):A[Ce]=l[Ce]}}),E.includes("controller")&&!me&&e.controller&&e.controller.control&&A.controller&&A.controller.control&&(e.controller.control=A.controller.control),m.includes("children")&&n&&K&&A.virtual.enabled?(K.slides=n,K.update(!0)):m.includes("virtual")&&K&&A.virtual.enabled&&(n&&(K.slides=n),K.update(!0)),m.includes("children")&&n&&A.loop&&(Me=!0),fe&&oe.init()&&oe.update(!0),me&&(e.controller.control=A.controller.control),ne&&(e.isElement&&(!T||typeof T=="string")&&(T=document.createElement("div"),T.classList.add("swiper-pagination"),T.part.add("pagination"),e.el.appendChild(T)),T&&(A.pagination.el=T),z.init(),z.render(),z.update()),te&&(e.isElement&&(!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-scrollbar"),s.part.add("scrollbar"),e.el.appendChild(s)),s&&(A.scrollbar.el=s),U.init(),U.updateSize(),U.setTranslate()),re&&(e.isElement&&((!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-button-next"),d_(d,e.hostEl.constructor.nextButtonSvg),d.part.add("button-next"),e.el.appendChild(d)),(!x||typeof x=="string")&&(x=document.createElement("div"),x.classList.add("swiper-button-prev"),d_(x,e.hostEl.constructor.prevButtonSvg),x.part.add("button-prev"),e.el.appendChild(x))),d&&(A.navigation.nextEl=d),x&&(A.navigation.prevEl=x),j.init(),j.update()),m.includes("allowSlideNext")&&(e.allowSlideNext=l.allowSlideNext),m.includes("allowSlidePrev")&&(e.allowSlidePrev=l.allowSlidePrev),m.includes("direction")&&e.changeDirection(l.direction,!1),(ze||Me)&&e.loopDestroy(),(_t||Me)&&e.loopCreate(),e.update()}function h4(t,e){t===void 0&&(t={});const n={on:{}},l={},m={};mf(n,s2),n._emitClasses=!0,n.init=!1;const d={},x=NP.map(T=>T.replace(/_/,"")),s=Object.assign({},t);return Object.keys(s).forEach(T=>{typeof t[T]>"u"||(x.indexOf(T)>=0?Ch(t[T])?(n[T]={},m[T]={},mf(n[T],t[T]),mf(m[T],t[T])):(n[T]=t[T],m[T]=t[T]):T.search(/on[A-Z]/)===0&&typeof t[T]=="function"?n.on[`${T[2].toLowerCase()}${T.substr(3)}`]=t[T]:d[T]=t[T])}),["navigation","pagination","scrollbar"].forEach(T=>{n[T]===!0&&(n[T]={}),n[T]===!1&&delete n[T]}),{params:n,passedParams:m,rest:d,events:l}}function k9(t,e){let{el:n,nextEl:l,prevEl:m,paginationEl:d,scrollbarEl:x,swiper:s}=t;VP(e)&&l&&m&&(s.params.navigation.nextEl=l,s.originalParams.navigation.nextEl=l,s.params.navigation.prevEl=m,s.originalParams.navigation.prevEl=m),jP(e)&&d&&(s.params.pagination.el=d,s.originalParams.pagination.el=d),UP(e)&&x&&(s.params.scrollbar.el=x,s.originalParams.scrollbar.el=x),s.init(n)}function T9(t,e,n,l,m){const d=[];if(!e)return d;const x=T=>{d.indexOf(T)<0&&d.push(T)};if(n&&l){const T=l.map(m),E=n.map(m);T.join("")!==E.join("")&&x("children"),l.length!==n.length&&x("children")}return NP.filter(T=>T[0]==="_").map(T=>T.replace(/_/,"")).forEach(T=>{if(T in t&&T in e)if(Ch(t[T])&&Ch(e[T])){const E=Object.keys(t[T]),A=Object.keys(e[T]);E.length!==A.length?x(T):(E.forEach(z=>{t[T][z]!==e[T][z]&&x(T)}),A.forEach(z=>{t[T][z]!==e[T][z]&&x(T)}))}else t[T]!==e[T]&&x(T)}),d}const E9=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.emit("_virtualUpdated"),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function kw(t,e,n){t===void 0&&(t={});const l=[],m={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},d=(x,s)=>{Array.isArray(x)&&x.forEach(T=>{const E=typeof T.type=="symbol";s==="default"&&(s="container-end"),E&&T.children?d(T.children,s):T.type&&(T.type.name==="SwiperSlide"||T.type.name==="AsyncComponentWrapper")||T.componentOptions&&T.componentOptions.tag==="SwiperSlide"?l.push(T):m[s]&&m[s].push(T)})};return Object.keys(t).forEach(x=>{if(typeof t[x]!="function")return;const s=t[x]();d(s,x)}),n.value=e.value,e.value=l,{slides:l,slots:m}}function I9(t,e,n){if(!n)return null;const l=A=>{let z=A;return A<0?z=e.length+A:z>=e.length&&(z=z-e.length),z},m=t.value.isHorizontal()?{[t.value.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:d,to:x}=n,s=t.value.params.loop?-e.length:0,T=t.value.params.loop?e.length*2:e.length,E=[];for(let A=s;A<T;A+=1)A>=d&&A<=x&&E.length<e.length&&E.push(e[l(A)]);return E.map(A=>{if(A.props||(A.props={}),A.props.style||(A.props.style={}),A.props.swiperRef=t,A.props.style=m,A.type)return Ds(A.type,{...A.props},A.children);if(A.componentOptions)return Ds(A.componentOptions.Ctor,{...A.props},A.componentOptions.children)})}const P9={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},swiperElementNodeName:{type:String,default:"SWIPER-CONTAINER"},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},breakpointsBase:{type:String,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},loopAdditionalSlides:{type:Number,default:void 0},loopAddBlankSlides:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideFullyVisibleClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slidesUpdated","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(t,e){let{slots:n,emit:l}=e;const{tag:m,wrapperTag:d}=t,x=Ke("swiper"),s=Ke(null),T=Ke(!1),E=Ke(!1),A=Ke(null),z=Ke(null),j=Ke(null),U={value:[]},K={value:[]},oe=Ke(null),fe=Ke(null),me=Ke(null),ne=Ke(null),{params:te,passedParams:re}=h4(t);kw(n,U,K),j.value=re,K.value=U.value;const ze=()=>{kw(n,U,K),T.value=!0};te.onAny=function(he){for(var Ce=arguments.length,$e=new Array(Ce>1?Ce-1:0),Je=1;Je<Ce;Je++)$e[Je-1]=arguments[Je];l(he,...$e)},Object.assign(te.on,{_beforeBreakpoint:ze,_containerClasses(he,Ce){x.value=Ce}});const _t={...te};if(delete _t.wrapperClass,z.value=new SS(_t),z.value.virtual&&z.value.params.virtual.enabled){z.value.virtual.slides=U.value;const he={cache:!1,slides:U.value,renderExternal:Ce=>{s.value=Ce},renderExternalUpdate:!1};mf(z.value.params.virtual,he),mf(z.value.originalParams.virtual,he)}T_(()=>{!E.value&&z.value&&(z.value.emitSlidesClasses(),E.value=!0);const{passedParams:he}=h4(t),Ce=T9(he,j.value,U.value,K.value,$e=>$e.props&&$e.props.key);j.value=he,(Ce.length||T.value)&&z.value&&!z.value.destroyed&&C9({swiper:z.value,slides:U.value,passedParams:he,changedParams:Ce,nextEl:oe.value,prevEl:fe.value,scrollbarEl:ne.value,paginationEl:me.value}),T.value=!1}),Wu("swiper",z),ho(s,()=>{Th(()=>{E9(z.value)})}),Co(()=>{A.value&&(k9({el:A.value,nextEl:oe.value,prevEl:fe.value,paginationEl:me.value,scrollbarEl:ne.value,swiper:z.value},te),l("swiper",z.value))}),n0(()=>{z.value&&!z.value.destroyed&&z.value.destroy(!0,!1)});function Me(he){return te.virtual?I9(z,he,s.value):(he.forEach((Ce,$e)=>{Ce.props||(Ce.props={}),Ce.props.swiperRef=z,Ce.props.swiperSlideIndex=$e}),he)}return()=>{const{slides:he,slots:Ce}=kw(n,U,K);return Ds(m,{ref:A,class:qP(x.value)},[Ce["container-start"],Ds(d,{class:S9(te.wrapperClass)},[Ce["wrapper-start"],Me(he),Ce["wrapper-end"]]),VP(t)&&[Ds("div",{ref:fe,class:"swiper-button-prev"}),Ds("div",{ref:oe,class:"swiper-button-next"})],UP(t)&&Ds("div",{ref:ne,class:"swiper-scrollbar"}),jP(t)&&Ds("div",{ref:me,class:"swiper-pagination"}),Ce["container-end"]])}}},Tw={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(t,e){let{slots:n}=e,l=!1;const{swiperRef:m}=t,d=Ke(null),x=Ke("swiper-slide"),s=Ke(!1);function T(z,j,U){j===d.value&&(x.value=U)}Co(()=>{!m||!m.value||(m.value.on("_slideClass",T),l=!0)}),kI(()=>{l||!m||!m.value||(m.value.on("_slideClass",T),l=!0)}),T_(()=>{!d.value||!m||!m.value||(typeof t.swiperSlideIndex<"u"&&(d.value.swiperSlideIndex=t.swiperSlideIndex),m.value.destroyed&&x.value!=="swiper-slide"&&(x.value="swiper-slide"))}),n0(()=>{!m||!m.value||m.value.off("_slideClass",T)});const E=ki(()=>({isActive:x.value.indexOf("swiper-slide-active")>=0,isVisible:x.value.indexOf("swiper-slide-visible")>=0,isPrev:x.value.indexOf("swiper-slide-prev")>=0,isNext:x.value.indexOf("swiper-slide-next")>=0}));Wu("swiperSlide",E);const A=()=>{s.value=!0};return()=>Ds(t.tag,{class:qP(`${x.value}`),ref:d,"data-swiper-slide-index":typeof t.virtualIndex>"u"&&m&&m.value&&m.value.params.loop?t.swiperSlideIndex:t.virtualIndex,onLoadCapture:A},t.zoom?Ds("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof t.zoom=="number"?t.zoom:void 0},[n.default&&n.default(E.value),t.lazy&&!s.value&&Ds("div",{class:"swiper-lazy-preloader"})]):[n.default&&n.default(E.value),t.lazy&&!s.value&&Ds("div",{class:"swiper-lazy-preloader"})])}};function HP(t,e,n,l){return t.params.createElements&&Object.keys(l).forEach(m=>{if(!n[m]&&n.auto===!0){let d=Ul(t.el,`.${l[m]}`)[0];d||(d=c_("div",l[m]),d.className=l[m],t.el.append(d)),n[m]=d,e[m]=d}}),n}function A9(t){let{swiper:e,extendParams:n,on:l,emit:m}=t;n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function d(K){let oe;return K&&typeof K=="string"&&e.isElement&&(oe=e.el.querySelector(K)||e.hostEl.querySelector(K),oe)?oe:(K&&(typeof K=="string"&&(oe=[...document.querySelectorAll(K)]),e.params.uniqueNavElements&&typeof K=="string"&&oe&&oe.length>1&&e.el.querySelectorAll(K).length===1?oe=e.el.querySelector(K):oe&&oe.length===1&&(oe=oe[0])),K&&!oe?K:oe)}function x(K,oe){const fe=e.params.navigation;K=ts(K),K.forEach(me=>{me&&(me.classList[oe?"add":"remove"](...fe.disabledClass.split(" ")),me.tagName==="BUTTON"&&(me.disabled=oe),e.params.watchOverflow&&e.enabled&&me.classList[e.isLocked?"add":"remove"](fe.lockClass))})}function s(){const{nextEl:K,prevEl:oe}=e.navigation;if(e.params.loop){x(oe,!1),x(K,!1);return}x(oe,e.isBeginning&&!e.params.rewind),x(K,e.isEnd&&!e.params.rewind)}function T(K){K.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),m("navigationPrev"))}function E(K){K.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),m("navigationNext"))}function A(){const K=e.params.navigation;if(e.params.navigation=HP(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(K.nextEl||K.prevEl))return;let oe=d(K.nextEl),fe=d(K.prevEl);Object.assign(e.navigation,{nextEl:oe,prevEl:fe}),oe=ts(oe),fe=ts(fe);const me=(ne,te)=>{ne&&ne.addEventListener("click",te==="next"?E:T),!e.enabled&&ne&&ne.classList.add(...K.lockClass.split(" "))};oe.forEach(ne=>me(ne,"next")),fe.forEach(ne=>me(ne,"prev"))}function z(){let{nextEl:K,prevEl:oe}=e.navigation;K=ts(K),oe=ts(oe);const fe=(me,ne)=>{me.removeEventListener("click",ne==="next"?E:T),me.classList.remove(...e.params.navigation.disabledClass.split(" "))};K.forEach(me=>fe(me,"next")),oe.forEach(me=>fe(me,"prev"))}l("init",()=>{e.params.navigation.enabled===!1?U():(A(),s())}),l("toEdge fromEdge lock unlock",()=>{s()}),l("destroy",()=>{z()}),l("enable disable",()=>{let{nextEl:K,prevEl:oe}=e.navigation;if(K=ts(K),oe=ts(oe),e.enabled){s();return}[...K,...oe].filter(fe=>!!fe).forEach(fe=>fe.classList.add(e.params.navigation.lockClass))}),l("click",(K,oe)=>{let{nextEl:fe,prevEl:me}=e.navigation;fe=ts(fe),me=ts(me);const ne=oe.target;let te=me.includes(ne)||fe.includes(ne);if(e.isElement&&!te){const re=oe.path||oe.composedPath&&oe.composedPath();re&&(te=re.find(ze=>fe.includes(ze)||me.includes(ze)))}if(e.params.navigation.hideOnClick&&!te){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===ne||e.pagination.el.contains(ne)))return;let re;fe.length?re=fe[0].classList.contains(e.params.navigation.hiddenClass):me.length&&(re=me[0].classList.contains(e.params.navigation.hiddenClass)),m(re===!0?"navigationShow":"navigationHide"),[...fe,...me].filter(ze=>!!ze).forEach(ze=>ze.classList.toggle(e.params.navigation.hiddenClass))}});const j=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),A(),s()},U=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),z()};Object.assign(e.navigation,{enable:j,disable:U,update:s,init:A,destroy:z})}function Pg(t){return t===void 0&&(t=""),`.${t.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function R9(t){let{swiper:e,extendParams:n,on:l,emit:m}=t;const d="swiper-pagination";n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:ne=>ne,formatFractionTotal:ne=>ne,bulletClass:`${d}-bullet`,bulletActiveClass:`${d}-bullet-active`,modifierClass:`${d}-`,currentClass:`${d}-current`,totalClass:`${d}-total`,hiddenClass:`${d}-hidden`,progressbarFillClass:`${d}-progressbar-fill`,progressbarOppositeClass:`${d}-progressbar-opposite`,clickableClass:`${d}-clickable`,lockClass:`${d}-lock`,horizontalClass:`${d}-horizontal`,verticalClass:`${d}-vertical`,paginationDisabledClass:`${d}-disabled`}}),e.pagination={el:null,bullets:[]};let x,s=0;function T(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function E(ne,te){const{bulletActiveClass:re}=e.params.pagination;ne&&(ne=ne[`${te==="prev"?"previous":"next"}ElementSibling`],ne&&(ne.classList.add(`${re}-${te}`),ne=ne[`${te==="prev"?"previous":"next"}ElementSibling`],ne&&ne.classList.add(`${re}-${te}-${te}`)))}function A(ne,te,re){if(ne=ne%re,te=te%re,te===ne+1)return"next";if(te===ne-1)return"previous"}function z(ne){const te=ne.target.closest(Pg(e.params.pagination.bulletClass));if(!te)return;ne.preventDefault();const re=u_(te)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===re)return;const ze=A(e.realIndex,re,e.slides.length);ze==="next"?e.slideNext():ze==="previous"?e.slidePrev():e.slideToLoop(re)}else e.slideTo(re)}function j(){const ne=e.rtl,te=e.params.pagination;if(T())return;let re=e.pagination.el;re=ts(re);let ze,_t;const Me=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,he=e.params.loop?Math.ceil(Me/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(_t=e.previousRealIndex||0,ze=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(ze=e.snapIndex,_t=e.previousSnapIndex):(_t=e.previousIndex||0,ze=e.activeIndex||0),te.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const Ce=e.pagination.bullets;let $e,Je,ft;if(te.dynamicBullets&&(x=i2(Ce[0],e.isHorizontal()?"width":"height"),re.forEach(ut=>{ut.style[e.isHorizontal()?"width":"height"]=`${x*(te.dynamicMainBullets+4)}px`}),te.dynamicMainBullets>1&&_t!==void 0&&(s+=ze-(_t||0),s>te.dynamicMainBullets-1?s=te.dynamicMainBullets-1:s<0&&(s=0)),$e=Math.max(ze-s,0),Je=$e+(Math.min(Ce.length,te.dynamicMainBullets)-1),ft=(Je+$e)/2),Ce.forEach(ut=>{const Qe=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(Qt=>`${te.bulletActiveClass}${Qt}`)].map(Qt=>typeof Qt=="string"&&Qt.includes(" ")?Qt.split(" "):Qt).flat();ut.classList.remove(...Qe)}),re.length>1)Ce.forEach(ut=>{const Qe=u_(ut);Qe===ze?ut.classList.add(...te.bulletActiveClass.split(" ")):e.isElement&&ut.setAttribute("part","bullet"),te.dynamicBullets&&(Qe>=$e&&Qe<=Je&&ut.classList.add(...`${te.bulletActiveClass}-main`.split(" ")),Qe===$e&&E(ut,"prev"),Qe===Je&&E(ut,"next"))});else{const ut=Ce[ze];if(ut&&ut.classList.add(...te.bulletActiveClass.split(" ")),e.isElement&&Ce.forEach((Qe,Qt)=>{Qe.setAttribute("part",Qt===ze?"bullet-active":"bullet")}),te.dynamicBullets){const Qe=Ce[$e],Qt=Ce[Je];for(let kt=$e;kt<=Je;kt+=1)Ce[kt]&&Ce[kt].classList.add(...`${te.bulletActiveClass}-main`.split(" "));E(Qe,"prev"),E(Qt,"next")}}if(te.dynamicBullets){const ut=Math.min(Ce.length,te.dynamicMainBullets+4),Qe=(x*ut-x)/2-ft*x,Qt=ne?"right":"left";Ce.forEach(kt=>{kt.style[e.isHorizontal()?Qt:"top"]=`${Qe}px`})}}re.forEach((Ce,$e)=>{if(te.type==="fraction"&&(Ce.querySelectorAll(Pg(te.currentClass)).forEach(Je=>{Je.textContent=te.formatFractionCurrent(ze+1)}),Ce.querySelectorAll(Pg(te.totalClass)).forEach(Je=>{Je.textContent=te.formatFractionTotal(he)})),te.type==="progressbar"){let Je;te.progressbarOpposite?Je=e.isHorizontal()?"vertical":"horizontal":Je=e.isHorizontal()?"horizontal":"vertical";const ft=(ze+1)/he;let ut=1,Qe=1;Je==="horizontal"?ut=ft:Qe=ft,Ce.querySelectorAll(Pg(te.progressbarFillClass)).forEach(Qt=>{Qt.style.transform=`translate3d(0,0,0) scaleX(${ut}) scaleY(${Qe})`,Qt.style.transitionDuration=`${e.params.speed}ms`})}te.type==="custom"&&te.renderCustom?(d_(Ce,te.renderCustom(e,ze+1,he)),$e===0&&m("paginationRender",Ce)):($e===0&&m("paginationRender",Ce),m("paginationUpdate",Ce)),e.params.watchOverflow&&e.enabled&&Ce.classList[e.isLocked?"add":"remove"](te.lockClass)})}function U(){const ne=e.params.pagination;if(T())return;const te=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let re=e.pagination.el;re=ts(re);let ze="";if(ne.type==="bullets"){let _t=e.params.loop?Math.ceil(te/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&_t>te&&(_t=te);for(let Me=0;Me<_t;Me+=1)ne.renderBullet?ze+=ne.renderBullet.call(e,Me,ne.bulletClass):ze+=`<${ne.bulletElement} ${e.isElement?'part="bullet"':""} class="${ne.bulletClass}"></${ne.bulletElement}>`}ne.type==="fraction"&&(ne.renderFraction?ze=ne.renderFraction.call(e,ne.currentClass,ne.totalClass):ze=`<span class="${ne.currentClass}"></span> / <span class="${ne.totalClass}"></span>`),ne.type==="progressbar"&&(ne.renderProgressbar?ze=ne.renderProgressbar.call(e,ne.progressbarFillClass):ze=`<span class="${ne.progressbarFillClass}"></span>`),e.pagination.bullets=[],re.forEach(_t=>{ne.type!=="custom"&&d_(_t,ze||""),ne.type==="bullets"&&e.pagination.bullets.push(..._t.querySelectorAll(Pg(ne.bulletClass)))}),ne.type!=="custom"&&m("paginationRender",re[0])}function K(){e.params.pagination=HP(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const ne=e.params.pagination;if(!ne.el)return;let te;typeof ne.el=="string"&&e.isElement&&(te=e.el.querySelector(ne.el)),!te&&typeof ne.el=="string"&&(te=[...document.querySelectorAll(ne.el)]),te||(te=ne.el),!(!te||te.length===0)&&(e.params.uniqueNavElements&&typeof ne.el=="string"&&Array.isArray(te)&&te.length>1&&(te=[...e.el.querySelectorAll(ne.el)],te.length>1&&(te=te.find(re=>LP(re,".swiper")[0]===e.el))),Array.isArray(te)&&te.length===1&&(te=te[0]),Object.assign(e.pagination,{el:te}),te=ts(te),te.forEach(re=>{ne.type==="bullets"&&ne.clickable&&re.classList.add(...(ne.clickableClass||"").split(" ")),re.classList.add(ne.modifierClass+ne.type),re.classList.add(e.isHorizontal()?ne.horizontalClass:ne.verticalClass),ne.type==="bullets"&&ne.dynamicBullets&&(re.classList.add(`${ne.modifierClass}${ne.type}-dynamic`),s=0,ne.dynamicMainBullets<1&&(ne.dynamicMainBullets=1)),ne.type==="progressbar"&&ne.progressbarOpposite&&re.classList.add(ne.progressbarOppositeClass),ne.clickable&&re.addEventListener("click",z),e.enabled||re.classList.add(ne.lockClass)}))}function oe(){const ne=e.params.pagination;if(T())return;let te=e.pagination.el;te&&(te=ts(te),te.forEach(re=>{re.classList.remove(ne.hiddenClass),re.classList.remove(ne.modifierClass+ne.type),re.classList.remove(e.isHorizontal()?ne.horizontalClass:ne.verticalClass),ne.clickable&&(re.classList.remove(...(ne.clickableClass||"").split(" ")),re.removeEventListener("click",z))})),e.pagination.bullets&&e.pagination.bullets.forEach(re=>re.classList.remove(...ne.bulletActiveClass.split(" ")))}l("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const ne=e.params.pagination;let{el:te}=e.pagination;te=ts(te),te.forEach(re=>{re.classList.remove(ne.horizontalClass,ne.verticalClass),re.classList.add(e.isHorizontal()?ne.horizontalClass:ne.verticalClass)})}),l("init",()=>{e.params.pagination.enabled===!1?me():(K(),U(),j())}),l("activeIndexChange",()=>{typeof e.snapIndex>"u"&&j()}),l("snapIndexChange",()=>{j()}),l("snapGridLengthChange",()=>{U(),j()}),l("destroy",()=>{oe()}),l("enable disable",()=>{let{el:ne}=e.pagination;ne&&(ne=ts(ne),ne.forEach(te=>te.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),l("lock unlock",()=>{j()}),l("click",(ne,te)=>{const re=te.target,ze=ts(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&ze&&ze.length>0&&!re.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&re===e.navigation.nextEl||e.navigation.prevEl&&re===e.navigation.prevEl))return;const _t=ze[0].classList.contains(e.params.pagination.hiddenClass);m(_t===!0?"paginationShow":"paginationHide"),ze.forEach(Me=>Me.classList.toggle(e.params.pagination.hiddenClass))}});const fe=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:ne}=e.pagination;ne&&(ne=ts(ne),ne.forEach(te=>te.classList.remove(e.params.pagination.paginationDisabledClass))),K(),U(),j()},me=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:ne}=e.pagination;ne&&(ne=ts(ne),ne.forEach(te=>te.classList.add(e.params.pagination.paginationDisabledClass))),oe()};Object.assign(e.pagination,{enable:fe,disable:me,render:U,update:j,init:K,destroy:oe})}function M9(t){let{swiper:e,extendParams:n,on:l,emit:m,params:d}=t;e.autoplay={running:!1,paused:!1,timeLeft:0},n({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let x,s,T=d&&d.autoplay?d.autoplay.delay:3e3,E=d&&d.autoplay?d.autoplay.delay:3e3,A,z=new Date().getTime(),j,U,K,oe,fe,me,ne;function te(Et){!e||e.destroyed||!e.wrapperEl||Et.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",te),!(ne||Et.detail&&Et.detail.bySwiperTouchMove)&&$e())}const re=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?j=!0:j&&(E=A,j=!1);const Et=e.autoplay.paused?A:z+E-new Date().getTime();e.autoplay.timeLeft=Et,m("autoplayTimeLeft",Et,Et/T),s=requestAnimationFrame(()=>{re()})},ze=()=>{let Et;return e.virtual&&e.params.virtual.enabled?Et=e.slides.find(In=>In.classList.contains("swiper-slide-active")):Et=e.slides[e.activeIndex],Et?parseInt(Et.getAttribute("data-swiper-autoplay"),10):void 0},_t=Et=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(s),re();let on=typeof Et>"u"?e.params.autoplay.delay:Et;T=e.params.autoplay.delay,E=e.params.autoplay.delay;const In=ze();!Number.isNaN(In)&&In>0&&typeof Et>"u"&&(on=In,T=In,E=In),A=on;const ir=e.params.speed,Or=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(ir,!0,!0),m("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,ir,!0,!0),m("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(ir,!0,!0),m("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,ir,!0,!0),m("autoplay")),e.params.cssMode&&(z=new Date().getTime(),requestAnimationFrame(()=>{_t()})))};return on>0?(clearTimeout(x),x=setTimeout(()=>{Or()},on)):requestAnimationFrame(()=>{Or()}),on},Me=()=>{z=new Date().getTime(),e.autoplay.running=!0,_t(),m("autoplayStart")},he=()=>{e.autoplay.running=!1,clearTimeout(x),cancelAnimationFrame(s),m("autoplayStop")},Ce=(Et,on)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(x),Et||(me=!0);const In=()=>{m("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",te):$e()};if(e.autoplay.paused=!0,on){fe&&(A=e.params.autoplay.delay),fe=!1,In();return}A=(A||e.params.autoplay.delay)-(new Date().getTime()-z),!(e.isEnd&&A<0&&!e.params.loop)&&(A<0&&(A=0),In())},$e=()=>{e.isEnd&&A<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(z=new Date().getTime(),me?(me=!1,_t(A)):_t(),e.autoplay.paused=!1,m("autoplayResume"))},Je=()=>{if(e.destroyed||!e.autoplay.running)return;const Et=Gl();Et.visibilityState==="hidden"&&(me=!0,Ce(!0)),Et.visibilityState==="visible"&&$e()},ft=Et=>{Et.pointerType==="mouse"&&(me=!0,ne=!0,!(e.animating||e.autoplay.paused)&&Ce(!0))},ut=Et=>{Et.pointerType==="mouse"&&(ne=!1,e.autoplay.paused&&$e())},Qe=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",ft),e.el.addEventListener("pointerleave",ut))},Qt=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",ft),e.el.removeEventListener("pointerleave",ut))},kt=()=>{Gl().addEventListener("visibilitychange",Je)},wt=()=>{Gl().removeEventListener("visibilitychange",Je)};l("init",()=>{e.params.autoplay.enabled&&(Qe(),kt(),Me())}),l("destroy",()=>{Qt(),wt(),e.autoplay.running&&he()}),l("_freeModeStaticRelease",()=>{(K||me)&&$e()}),l("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?he():Ce(!0,!0)}),l("beforeTransitionStart",(Et,on,In)=>{e.destroyed||!e.autoplay.running||(In||!e.params.autoplay.disableOnInteraction?Ce(!0,!0):he())}),l("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){he();return}U=!0,K=!1,me=!1,oe=setTimeout(()=>{me=!0,K=!0,Ce(!0)},200)}}),l("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!U)){if(clearTimeout(oe),clearTimeout(x),e.params.autoplay.disableOnInteraction){K=!1,U=!1;return}K&&e.params.cssMode&&$e(),K=!1,U=!1}}),l("slideChange",()=>{e.destroyed||!e.autoplay.running||(fe=!0)}),Object.assign(e.autoplay,{start:Me,stop:he,pause:Ce,resume:$e})}var z_={name:"BaseEditableHolder",extends:mr,emits:["update:modelValue","value-change"],props:{modelValue:{type:null,default:void 0},defaultValue:{type:null,default:void 0},name:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},formControl:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0},$pcForm:{default:void 0},$pcFormField:{default:void 0}},data:function(){return{d_value:this.defaultValue||this.modelValue}},watch:{modelValue:function(e){this.d_value=e},defaultValue:function(e){this.d_value=e},$formName:{immediate:!0,handler:function(e){var n,l;this.formField=((n=this.$pcForm)===null||n===void 0||(l=n.register)===null||l===void 0?void 0:l.call(n,e,this.$formControl))||{}}},$formControl:{immediate:!0,handler:function(e){var n,l;this.formField=((n=this.$pcForm)===null||n===void 0||(l=n.register)===null||l===void 0?void 0:l.call(n,this.$formName,e))||{}}},$formDefaultValue:{immediate:!0,handler:function(e){this.d_value!==e&&(this.d_value=e)}}},formField:{},methods:{writeValue:function(e,n){var l,m;this.controlled&&(this.d_value=e,this.$emit("update:modelValue",e)),this.$emit("value-change",e),(l=(m=this.formField).onChange)===null||l===void 0||l.call(m,{originalEvent:n,value:e})}},computed:{$filled:function(){return Zr(this.d_value)},$invalid:function(){var e,n,l,m;return(e=(n=this.invalid)!==null&&n!==void 0?n:(l=this.$pcFormField)===null||l===void 0||(l=l.$field)===null||l===void 0?void 0:l.invalid)!==null&&e!==void 0?e:(m=this.$pcForm)===null||m===void 0||(m=m.states)===null||m===void 0||(m=m[this.$formName])===null||m===void 0?void 0:m.invalid},$formName:function(){var e;return this.name||((e=this.$formControl)===null||e===void 0?void 0:e.name)},$formControl:function(){var e;return this.formControl||((e=this.$pcFormField)===null||e===void 0?void 0:e.formControl)},$formDefaultValue:function(){var e,n,l,m;return(e=(n=this.d_value)!==null&&n!==void 0?n:(l=this.$pcFormField)===null||l===void 0?void 0:l.initialValue)!==null&&e!==void 0?e:(m=this.$pcForm)===null||m===void 0||(m=m.initialValues)===null||m===void 0?void 0:m[this.$formName]},controlled:function(){return this.$inProps.hasOwnProperty("modelValue")||!this.$inProps.hasOwnProperty("modelValue")&&!this.$inProps.hasOwnProperty("defaultValue")},filled:function(){return this.$filled}}},Ah={name:"BaseInput",extends:z_,props:{size:{type:String,default:null},fluid:{type:Boolean,default:null},variant:{type:String,default:null}},inject:{$parentInstance:{default:void 0},$pcFluid:{default:void 0}},computed:{$variant:function(){var e;return(e=this.variant)!==null&&e!==void 0?e:this.$primevue.config.inputStyle||this.$primevue.config.inputVariant},$fluid:function(){var e;return(e=this.fluid)!==null&&e!==void 0?e:!!this.$pcFluid},hasFluid:function(){return this.$fluid}}},D9=function(e){var n=e.dt;return`
.p-radiobutton {
    position: relative;
    display: inline-flex;
    user-select: none;
    vertical-align: bottom;
    width: `.concat(n("radiobutton.width"),`;
    height: `).concat(n("radiobutton.height"),`;
}

.p-radiobutton-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border: 1px solid transparent;
    border-radius: 50%;
}

.p-radiobutton-box {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    border: 1px solid `).concat(n("radiobutton.border.color"),`;
    background: `).concat(n("radiobutton.background"),`;
    width: `).concat(n("radiobutton.width"),`;
    height: `).concat(n("radiobutton.height"),`;
    transition: background `).concat(n("radiobutton.transition.duration"),", color ").concat(n("radiobutton.transition.duration"),", border-color ").concat(n("radiobutton.transition.duration"),", box-shadow ").concat(n("radiobutton.transition.duration"),", outline-color ").concat(n("radiobutton.transition.duration"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("radiobutton.shadow"),`;
}

.p-radiobutton-icon {
    transition-duration: `).concat(n("radiobutton.transition.duration"),`;
    background: transparent;
    font-size: `).concat(n("radiobutton.icon.size"),`;
    width: `).concat(n("radiobutton.icon.size"),`;
    height: `).concat(n("radiobutton.icon.size"),`;
    border-radius: 50%;
    backface-visibility: hidden;
    transform: translateZ(0) scale(0.1);
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:hover) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.hover.border.color"),`;
}

.p-radiobutton-checked .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.checked.border.color"),`;
    background: `).concat(n("radiobutton.checked.background"),`;
}

.p-radiobutton-checked .p-radiobutton-box .p-radiobutton-icon {
    background: `).concat(n("radiobutton.icon.checked.color"),`;
    transform: translateZ(0) scale(1, 1);
    visibility: visible;
}

.p-radiobutton-checked:not(.p-disabled):has(.p-radiobutton-input:hover) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.checked.hover.border.color"),`;
    background: `).concat(n("radiobutton.checked.hover.background"),`;
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:hover).p-radiobutton-checked .p-radiobutton-box .p-radiobutton-icon {
    background: `).concat(n("radiobutton.icon.checked.hover.color"),`;
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:focus-visible) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.focus.border.color"),`;
    box-shadow: `).concat(n("radiobutton.focus.ring.shadow"),`;
    outline: `).concat(n("radiobutton.focus.ring.width")," ").concat(n("radiobutton.focus.ring.style")," ").concat(n("radiobutton.focus.ring.color"),`;
    outline-offset: `).concat(n("radiobutton.focus.ring.offset"),`;
}

.p-radiobutton-checked:not(.p-disabled):has(.p-radiobutton-input:focus-visible) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.checked.focus.border.color"),`;
}

.p-radiobutton.p-invalid > .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.invalid.border.color"),`;
}

.p-radiobutton.p-variant-filled .p-radiobutton-box {
    background: `).concat(n("radiobutton.filled.background"),`;
}

.p-radiobutton.p-variant-filled.p-radiobutton-checked .p-radiobutton-box {
    background: `).concat(n("radiobutton.checked.background"),`;
}

.p-radiobutton.p-variant-filled:not(.p-disabled):has(.p-radiobutton-input:hover).p-radiobutton-checked .p-radiobutton-box {
    background: `).concat(n("radiobutton.checked.hover.background"),`;
}

.p-radiobutton.p-disabled {
    opacity: 1;
}

.p-radiobutton.p-disabled .p-radiobutton-box {
    background: `).concat(n("radiobutton.disabled.background"),`;
    border-color: `).concat(n("radiobutton.checked.disabled.border.color"),`;
}

.p-radiobutton-checked.p-disabled .p-radiobutton-box .p-radiobutton-icon {
    background: `).concat(n("radiobutton.icon.disabled.color"),`;
}

.p-radiobutton-sm,
.p-radiobutton-sm .p-radiobutton-box {
    width: `).concat(n("radiobutton.sm.width"),`;
    height: `).concat(n("radiobutton.sm.height"),`;
}

.p-radiobutton-sm .p-radiobutton-icon {
    font-size: `).concat(n("radiobutton.icon.sm.size"),`;
    width: `).concat(n("radiobutton.icon.sm.size"),`;
    height: `).concat(n("radiobutton.icon.sm.size"),`;
}

.p-radiobutton-lg,
.p-radiobutton-lg .p-radiobutton-box {
    width: `).concat(n("radiobutton.lg.width"),`;
    height: `).concat(n("radiobutton.lg.height"),`;
}

.p-radiobutton-lg .p-radiobutton-icon {
    font-size: `).concat(n("radiobutton.icon.lg.size"),`;
    width: `).concat(n("radiobutton.icon.lg.size"),`;
    height: `).concat(n("radiobutton.icon.lg.size"),`;
}
`)},L9={root:function(e){var n=e.instance,l=e.props;return["p-radiobutton p-component",{"p-radiobutton-checked":n.checked,"p-disabled":l.disabled,"p-invalid":n.$pcRadioButtonGroup?n.$pcRadioButtonGroup.$invalid:n.$invalid,"p-variant-filled":n.$variant==="filled","p-radiobutton-sm p-inputfield-sm":l.size==="small","p-radiobutton-lg p-inputfield-lg":l.size==="large"}]},box:"p-radiobutton-box",input:"p-radiobutton-input",icon:"p-radiobutton-icon"},O9=Xn.extend({name:"radiobutton",theme:D9,classes:L9}),z9={name:"BaseRadioButton",extends:Ah,props:{value:null,binary:Boolean,readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:O9,provide:function(){return{$pcRadioButton:this,$parentInstance:this}}},gs={name:"RadioButton",extends:z9,inheritAttrs:!1,emits:["change","focus","blur"],inject:{$pcRadioButtonGroup:{default:void 0}},methods:{getPTOptions:function(e){var n=e==="root"?this.ptmi:this.ptm;return n(e,{context:{checked:this.checked,disabled:this.disabled}})},onChange:function(e){if(!this.disabled&&!this.readonly){var n=this.binary?!this.checked:this.value;this.$pcRadioButtonGroup?this.$pcRadioButtonGroup.writeValue(n,e):this.writeValue(n,e),this.$emit("change",e)}},onFocus:function(e){this.$emit("focus",e)},onBlur:function(e){var n,l;this.$emit("blur",e),(n=(l=this.formField).onBlur)===null||n===void 0||n.call(l,e)}},computed:{groupName:function(){return this.$pcRadioButtonGroup?this.$pcRadioButtonGroup.groupName:this.$formName},checked:function(){var e=this.$pcRadioButtonGroup?this.$pcRadioButtonGroup.d_value:this.d_value;return e!=null&&(this.binary?!!e:$c(e,this.value))}}},B9=["data-p-checked","data-p-disabled"],F9=["id","value","name","checked","tabindex","disabled","readonly","aria-labelledby","aria-label","aria-invalid"];function $9(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root")},d.getPTOptions("root"),{"data-p-checked":d.checked,"data-p-disabled":t.disabled}),[M("input",ie({id:t.inputId,type:"radio",class:[t.cx("input"),t.inputClass],style:t.inputStyle,value:t.value,name:d.groupName,checked:d.checked,tabindex:t.tabindex,disabled:t.disabled,readonly:t.readonly,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-invalid":t.invalid||void 0,onFocus:e[0]||(e[0]=function(){return d.onFocus&&d.onFocus.apply(d,arguments)}),onBlur:e[1]||(e[1]=function(){return d.onBlur&&d.onBlur.apply(d,arguments)}),onChange:e[2]||(e[2]=function(){return d.onChange&&d.onChange.apply(d,arguments)})},d.getPTOptions("input")),null,16,F9),M("div",ie({class:t.cx("box")},d.getPTOptions("box")),[M("div",ie({class:t.cx("icon")},d.getPTOptions("icon")),null,16)],16)],16,B9)}gs.render=$9;const N9={class:"flex gap-2"},V9=["for"],j9=["src","alt"],GP=Xr({__name:"ColorPicker",props:{modelValue:{},colorOptions:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,l=e,m=Ke(n.modelValue);ho(()=>n.modelValue,x=>{m.value=x});const d=()=>{l("update:modelValue",m.value)};return(x,s)=>(X(),pe("div",N9,[(X(!0),pe(an,null,fr(x.colorOptions,T=>(X(),pe("label",{key:T.id,for:"color_"+T.id,class:"cursor-pointer"},[ge(Ie(gs),{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=E=>m.value=E),name:"color",value:T.id,class:"hidden",inputId:"color_"+T.id,onChange:d},null,8,["modelValue","value","inputId"]),M("div",{class:"rounded-full w-[50px] h-[25px] overflow-hidden",style:Wl(m.value===T.id?"border: 2px solid #2f5acf; padding: 2px; background: white;":"")},[T.type==="image"?(X(),pe("img",{key:0,src:T.src,alt:T.alt,class:"rounded-full w-full h-full cursor-pointer"},null,8,j9)):(X(),pe("span",{key:1,class:"rounded-full w-full h-full block",style:Wl({backgroundColor:T.color})},null,4))],4)],8,V9))),128))]))}});var WP=Symbol();function U9(){var t=Gs(WP);if(!t)throw new Error("No PrimeVue Confirmation provided!");return t}var KP=Symbol();function Xl(){var t=Gs(KP);if(!t)throw new Error("No PrimeVue Toast provided!");return t}function vy(t){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(t)}function q9(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H9(t,e){for(var n=0;n<e.length;n++){var l=e[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,W9(l.key),l)}}function G9(t,e,n){return e&&H9(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function W9(t){var e=K9(t,"string");return vy(e)=="symbol"?e:e+""}function K9(t,e){if(vy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(vy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var B_=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};q9(this,t),this.element=e,this.listener=n}return G9(t,[{key:"bindScrollListener",value:function(){this.scrollableParents=Wz(this.element);for(var n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].addEventListener("scroll",this.listener)}},{key:"unbindScrollListener",value:function(){if(this.scrollableParents)for(var n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].removeEventListener("scroll",this.listener)}},{key:"destroy",value:function(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}])}();function by(t){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(t)}function Z9(t){return Q9(t)||J9(t)||Y9(t)||X9()}function X9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y9(t,e){if(t){if(typeof t=="string")return a2(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a2(t,e):void 0}}function J9(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Q9(t){if(Array.isArray(t))return a2(t)}function a2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}function eF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tF(t,e){for(var n=0;n<e.length;n++){var l=e[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,ZP(l.key),l)}}function nF(t,e,n){return e&&tF(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function p4(t,e,n){return(e=ZP(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZP(t){var e=rF(t,"string");return by(e)=="symbol"?e:e+""}function rF(t,e){if(by(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(by(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Sf=function(){function t(e){var n=e.init,l=e.type;eF(this,t),p4(this,"helpers",void 0),p4(this,"type",void 0),this.helpers=new Set(n),this.type=l}return nF(t,[{key:"add",value:function(n){this.helpers.add(n)}},{key:"update",value:function(){}},{key:"delete",value:function(n){this.helpers.delete(n)}},{key:"clear",value:function(){this.helpers.clear()}},{key:"get",value:function(n,l){var m=this._get(n,l),d=m?this._recursive(Z9(this.helpers),m):null;return Zr(d)?d:null}},{key:"_isMatched",value:function(n,l){var m,d=n==null?void 0:n.parent;return(d==null||(m=d.vnode)===null||m===void 0?void 0:m.key)===l||d&&this._isMatched(d,l)||!1}},{key:"_get",value:function(n,l){var m,d;return((m=l||(n==null?void 0:n.$slots))===null||m===void 0||(d=m.default)===null||d===void 0?void 0:d.call(m))||null}},{key:"_recursive",value:function(){var n=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],d=[];return m.forEach(function(x){x.children instanceof Array?d=d.concat(n._recursive(d,x.children)):x.type.name===n.type?d.push(x):Zr(x.key)&&(d=d.concat(l.filter(function(s){return n._isMatched(s,x.key)}).map(function(s){return s.vnode})))}),d}}])}();function $o(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"pv_id_";return _S(t)}function zc(t,e){if(t){var n=t.props;if(n){var l=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),m=Object.prototype.hasOwnProperty.call(n,l)?l:e;return t.type.extends.props[e].type===Boolean&&n[m]===""?!0:n[m]}}return null}var iF=`
.p-icon {
    display: inline-block;
    vertical-align: baseline;
}

.p-icon-spin {
    -webkit-animation: p-icon-spin 2s infinite linear;
    animation: p-icon-spin 2s infinite linear;
}

@-webkit-keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}

@keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}
`,oF=Xn.extend({name:"baseicon",css:iF});function _y(t){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(t)}function f4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function m4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f4(Object(n),!0).forEach(function(l){sF(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function sF(t,e,n){return(e=aF(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aF(t){var e=lF(t,"string");return _y(e)=="symbol"?e:e+""}function lF(t,e){if(_y(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(_y(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qr={name:"BaseIcon",extends:mr,props:{label:{type:String,default:void 0},spin:{type:Boolean,default:!1}},style:oF,provide:function(){return{$pcIcon:this,$parentInstance:this}},methods:{pti:function(){var e=ha(this.label);return m4(m4({},!this.isUnstyled&&{class:["p-icon",{"p-icon-spin":this.spin}]}),{},{role:e?void 0:"img","aria-label":e?void 0:this.label,"aria-hidden":e})}}},ed={name:"ChevronRightIcon",extends:Qr};function cF(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"},null,-1)]),16)}ed.render=cF;var F_={name:"ChevronUpIcon",extends:Qr};function uF(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M12.2097 10.4113C12.1057 10.4118 12.0027 10.3915 11.9067 10.3516C11.8107 10.3118 11.7237 10.2532 11.6506 10.1792L6.93602 5.46461L2.22139 10.1476C2.07272 10.244 1.89599 10.2877 1.71953 10.2717C1.54307 10.2556 1.3771 10.1808 1.24822 10.0593C1.11933 9.93766 1.035 9.77633 1.00874 9.6011C0.982477 9.42587 1.0158 9.2469 1.10338 9.09287L6.37701 3.81923C6.52533 3.6711 6.72639 3.58789 6.93602 3.58789C7.14565 3.58789 7.3467 3.6711 7.49502 3.81923L12.7687 9.09287C12.9168 9.24119 13 9.44225 13 9.65187C13 9.8615 12.9168 10.0626 12.7687 10.2109C12.616 10.3487 12.4151 10.4207 12.2097 10.4113Z",fill:"currentColor"},null,-1)]),16)}F_.render=uF;var dF={root:"p-accordioncontent",content:"p-accordioncontent-content"},hF=Xn.extend({name:"accordioncontent",classes:dF}),pF={name:"BaseAccordionContent",extends:mr,props:{as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:hF,provide:function(){return{$pcAccordionContent:this,$parentInstance:this}}},Xg={name:"AccordionContent",extends:pF,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],computed:{id:function(){return"".concat(this.$pcAccordion.id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},ariaLabelledby:function(){return"".concat(this.$pcAccordion.id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},attrs:function(){return ie(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{id:this.id,role:"region","aria-labelledby":this.ariaLabelledby,"data-pc-name":"accordioncontent","data-p-active":this.$pcAccordionPanel.active}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}}};function fF(t,e,n,l,m,d){return t.asChild?jt(t.$slots,"default",{key:1,class:vn(t.cx("root")),active:d.$pcAccordionPanel.active,a11yAttrs:d.a11yAttrs}):(X(),bt(Eh,ie({key:0,name:"p-toggleable-content"},t.ptm("transition",d.ptParams)),{default:Xe(function(){return[!d.$pcAccordion.lazy||d.$pcAccordionPanel.active?_r((X(),bt(Tn(t.as),ie({key:0,class:t.cx("root")},d.attrs),{default:Xe(function(){return[M("div",ie({class:t.cx("content")},t.ptm("content",d.ptParams)),[jt(t.$slots,"default")],16)]}),_:3},16,["class"])),[[cy,d.$pcAccordion.lazy?!0:d.$pcAccordionPanel.active]]):Ct("",!0)]}),_:3},16))}Xg.render=fF;var Pf={name:"ChevronDownIcon",extends:Qr};function mF(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z",fill:"currentColor"},null,-1)]),16)}Pf.render=mF;var sf=o0();function xy(t){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(t)}function g4(t,e){return bF(t)||vF(t,e)||yF(t,e)||gF()}function gF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yF(t,e){if(t){if(typeof t=="string")return y4(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y4(t,e):void 0}}function y4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}function vF(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var l,m,d,x,s=[],T=!0,E=!1;try{if(d=(n=n.call(t)).next,e!==0)for(;!(T=(l=d.call(n)).done)&&(s.push(l.value),s.length!==e);T=!0);}catch(A){E=!0,m=A}finally{try{if(!T&&n.return!=null&&(x=n.return(),Object(x)!==x))return}finally{if(E)throw m}}return s}}function bF(t){if(Array.isArray(t))return t}function v4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function $i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v4(Object(n),!0).forEach(function(l){l2(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function l2(t,e,n){return(e=_F(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _F(t){var e=xF(t,"string");return xy(e)=="symbol"?e:e+""}function xF(t,e){if(xy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(xy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fi={_getMeta:function(){return[Kl(arguments.length<=0?void 0:arguments[0])||arguments.length<=0?void 0:arguments[0],Ia(Kl(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:arguments.length<=1?void 0:arguments[1])]},_getConfig:function(e,n){var l,m,d;return(l=(e==null||(m=e.instance)===null||m===void 0?void 0:m.$primevue)||(n==null||(d=n.ctx)===null||d===void 0||(d=d.appContext)===null||d===void 0||(d=d.config)===null||d===void 0||(d=d.globalProperties)===null||d===void 0?void 0:d.$primevue))===null||l===void 0?void 0:l.config},_getOptionValue:bS,_getPTValue:function(){var e,n,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,T=function(){var ne=fi._getOptionValue.apply(fi,arguments);return Ws(ne)||i0(ne)?{class:ne}:ne},E=((e=l.binding)===null||e===void 0||(e=e.value)===null||e===void 0?void 0:e.ptOptions)||((n=l.$primevueConfig)===null||n===void 0?void 0:n.ptOptions)||{},A=E.mergeSections,z=A===void 0?!0:A,j=E.mergeProps,U=j===void 0?!1:j,K=s?fi._useDefaultPT(l,l.defaultPT(),T,d,x):void 0,oe=fi._usePT(l,fi._getPT(m,l.$name),T,d,$i($i({},x),{},{global:K||{}})),fe=fi._getPTDatasets(l,d);return z||!z&&oe?U?fi._mergeProps(l,U,K,oe,fe):$i($i($i({},K),oe),fe):$i($i({},oe),fe)},_getPTDatasets:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l="data-pc-";return $i($i({},n==="root"&&l2({},"".concat(l,"name"),nl(e.$name))),{},l2({},"".concat(l,"section"),nl(n)))},_getPT:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=arguments.length>2?arguments[2]:void 0,m=function(x){var s,T=l?l(x):x,E=nl(n);return(s=T==null?void 0:T[E])!==null&&s!==void 0?s:T};return e!=null&&e.hasOwnProperty("_usept")?{_usept:e._usept,originalValue:m(e.originalValue),value:m(e.value)}:m(e)},_usePT:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,m=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0,x=function(fe){return l(fe,m,d)};if(n!=null&&n.hasOwnProperty("_usept")){var s,T=n._usept||((s=e.$primevueConfig)===null||s===void 0?void 0:s.ptOptions)||{},E=T.mergeSections,A=E===void 0?!0:E,z=T.mergeProps,j=z===void 0?!1:z,U=x(n.originalValue),K=x(n.value);return U===void 0&&K===void 0?void 0:Ws(K)?K:Ws(U)?U:A||!A&&K?j?fi._mergeProps(e,j,U,K):$i($i({},U),K):K}return x(n)},_useDefaultPT:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0,m=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0;return fi._usePT(e,n,l,m,d)},_loadStyles:function(e,n,l){var m,d=fi._getConfig(n,l),x={nonce:d==null||(m=d.csp)===null||m===void 0?void 0:m.nonce};fi._loadCoreStyles(e.$instance,x),fi._loadThemeStyles(e.$instance,x),fi._loadScopedThemeStyles(e.$instance,x),fi._themeChangeListener(function(){return fi._loadThemeStyles(e.$instance,x)})},_loadCoreStyles:function(){var e,n,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=arguments.length>1?arguments[1]:void 0;if(!Vu.isStyleNameLoaded((e=l.$style)===null||e===void 0?void 0:e.name)&&(n=l.$style)!==null&&n!==void 0&&n.name){var d;Xn.loadCSS(m),(d=l.$style)===null||d===void 0||d.loadCSS(m),Vu.setLoadedStyleName(l.$style.name)}},_loadThemeStyles:function(){var e,n,l,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;if(!(m!=null&&m.isUnstyled()||(m==null||(e=m.theme)===null||e===void 0?void 0:e.call(m))==="none")){if(!Zi.isStyleNameLoaded("common")){var x,s,T=((x=m.$style)===null||x===void 0||(s=x.getCommonTheme)===null||s===void 0?void 0:s.call(x))||{},E=T.primitive,A=T.semantic,z=T.global,j=T.style;Xn.load(E==null?void 0:E.css,$i({name:"primitive-variables"},d)),Xn.load(A==null?void 0:A.css,$i({name:"semantic-variables"},d)),Xn.load(z==null?void 0:z.css,$i({name:"global-variables"},d)),Xn.loadTheme($i({name:"global-style"},d),j),Zi.setLoadedStyleName("common")}if(!Zi.isStyleNameLoaded((n=m.$style)===null||n===void 0?void 0:n.name)&&(l=m.$style)!==null&&l!==void 0&&l.name){var U,K,oe,fe,me=((U=m.$style)===null||U===void 0||(K=U.getDirectiveTheme)===null||K===void 0?void 0:K.call(U))||{},ne=me.css,te=me.style;(oe=m.$style)===null||oe===void 0||oe.load(ne,$i({name:"".concat(m.$style.name,"-variables")},d)),(fe=m.$style)===null||fe===void 0||fe.loadTheme($i({name:"".concat(m.$style.name,"-style")},d),te),Zi.setLoadedStyleName(m.$style.name)}if(!Zi.isStyleNameLoaded("layer-order")){var re,ze,_t=(re=m.$style)===null||re===void 0||(ze=re.getLayerOrderThemeCSS)===null||ze===void 0?void 0:ze.call(re);Xn.load(_t,$i({name:"layer-order",first:!0},d)),Zi.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,l=e.preset();if(l&&e.$attrSelector){var m,d,x,s=((m=e.$style)===null||m===void 0||(d=m.getPresetTheme)===null||d===void 0?void 0:d.call(m,l,"[".concat(e.$attrSelector,"]")))||{},T=s.css,E=(x=e.$style)===null||x===void 0?void 0:x.load(T,$i({name:"".concat(e.$attrSelector,"-").concat(e.$style.name)},n));e.scopedStyleEl=E.el}},_themeChangeListener:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};Vu.clearLoadedStyleNames(),el.on("theme:change",e)},_hook:function(e,n,l,m,d,x){var s,T,E="on".concat(l7(n)),A=fi._getConfig(m,d),z=l==null?void 0:l.$instance,j=fi._usePT(z,fi._getPT(m==null||(s=m.value)===null||s===void 0?void 0:s.pt,e),fi._getOptionValue,"hooks.".concat(E)),U=fi._useDefaultPT(z,A==null||(T=A.pt)===null||T===void 0||(T=T.directives)===null||T===void 0?void 0:T[e],fi._getOptionValue,"hooks.".concat(E)),K={el:l,binding:m,vnode:d,prevVnode:x};j==null||j(z,K),U==null||U(z,K)},_mergeProps:function(){for(var e=arguments.length>1?arguments[1]:void 0,n=arguments.length,l=new Array(n>2?n-2:0),m=2;m<n;m++)l[m-2]=arguments[m];return O_(e)?e.apply(void 0,l):ie.apply(void 0,l)},_extend:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=function(x,s,T,E,A){var z,j,U,K;s._$instances=s._$instances||{};var oe=fi._getConfig(T,E),fe=s._$instances[e]||{},me=ha(fe)?$i($i({},n),n==null?void 0:n.methods):{};s._$instances[e]=$i($i({},fe),{},{$name:e,$host:s,$binding:T,$modifiers:T==null?void 0:T.modifiers,$value:T==null?void 0:T.value,$el:fe.$el||s||void 0,$style:$i({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadTheme:function(){}},n==null?void 0:n.style),$primevueConfig:oe,$attrSelector:(z=s.$pd)===null||z===void 0||(z=z[e])===null||z===void 0?void 0:z.attrSelector,defaultPT:function(){return fi._getPT(oe==null?void 0:oe.pt,void 0,function(te){var re;return te==null||(re=te.directives)===null||re===void 0?void 0:re[e]})},isUnstyled:function(){var te,re;return((te=s.$instance)===null||te===void 0||(te=te.$binding)===null||te===void 0||(te=te.value)===null||te===void 0?void 0:te.unstyled)!==void 0?(re=s.$instance)===null||re===void 0||(re=re.$binding)===null||re===void 0||(re=re.value)===null||re===void 0?void 0:re.unstyled:oe==null?void 0:oe.unstyled},theme:function(){var te;return(te=s.$instance)===null||te===void 0||(te=te.$primevueConfig)===null||te===void 0?void 0:te.theme},preset:function(){var te;return(te=s.$instance)===null||te===void 0||(te=te.$binding)===null||te===void 0||(te=te.value)===null||te===void 0?void 0:te.dt},ptm:function(){var te,re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return fi._getPTValue(s.$instance,(te=s.$instance)===null||te===void 0||(te=te.$binding)===null||te===void 0||(te=te.value)===null||te===void 0?void 0:te.pt,re,$i({},ze))},ptmo:function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return fi._getPTValue(s.$instance,te,re,ze,!1)},cx:function(){var te,re,ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",_t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(te=s.$instance)!==null&&te!==void 0&&te.isUnstyled()?void 0:fi._getOptionValue((re=s.$instance)===null||re===void 0||(re=re.$style)===null||re===void 0?void 0:re.classes,ze,$i({},_t))},sx:function(){var te,re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,_t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ze?fi._getOptionValue((te=s.$instance)===null||te===void 0||(te=te.$style)===null||te===void 0?void 0:te.inlineStyles,re,$i({},_t)):void 0}},me),s.$instance=s._$instances[e],(j=(U=s.$instance)[x])===null||j===void 0||j.call(U,s,T,E,A),s["$".concat(e)]=s.$instance,fi._hook(e,x,s,T,E,A),s.$pd||(s.$pd={}),s.$pd[e]=$i($i({},(K=s.$pd)===null||K===void 0?void 0:K[e]),{},{name:e,instance:s.$instance})},m=function(x){var s,T,E,A,z,j=(s=x.$instance)===null||s===void 0?void 0:s.watch;j==null||(T=j.config)===null||T===void 0||T.call(x.$instance,(E=x.$instance)===null||E===void 0?void 0:E.$primevueConfig),sf.on("config:change",function(U){var K,oe=U.newValue,fe=U.oldValue;return j==null||(K=j.config)===null||K===void 0?void 0:K.call(x.$instance,oe,fe)}),j==null||(A=j["config.ripple"])===null||A===void 0||A.call(x.$instance,(z=x.$instance)===null||z===void 0||(z=z.$primevueConfig)===null||z===void 0?void 0:z.ripple),sf.on("config:ripple:change",function(U){var K,oe=U.newValue,fe=U.oldValue;return j==null||(K=j["config.ripple"])===null||K===void 0?void 0:K.call(x.$instance,oe,fe)})};return{created:function(x,s,T,E){x.$pd||(x.$pd={}),x.$pd[e]={name:e,attrSelector:_S("pd")},l("created",x,s,T,E)},beforeMount:function(x,s,T,E){fi._loadStyles(x,s,T),l("beforeMount",x,s,T,E),m(x)},mounted:function(x,s,T,E){fi._loadStyles(x,s,T),l("mounted",x,s,T,E)},beforeUpdate:function(x,s,T,E){l("beforeUpdate",x,s,T,E)},updated:function(x,s,T,E){fi._loadStyles(x,s,T),l("updated",x,s,T,E)},beforeUnmount:function(x,s,T,E){l("beforeUnmount",x,s,T,E)},unmounted:function(x,s,T,E){var A;(A=x.$instance)===null||A===void 0||(A=A.scopedStyleEl)===null||A===void 0||(A=A.value)===null||A===void 0||A.remove(),l("unmounted",x,s,T,E)}}},extend:function(){var e=fi._getMeta.apply(fi,arguments),n=g4(e,2),l=n[0],m=n[1];return $i({extend:function(){var x=fi._getMeta.apply(fi,arguments),s=g4(x,2),T=s[0],E=s[1];return fi.extend(T,$i($i($i({},m),m==null?void 0:m.methods),E))}},fi._extend(l,m))}},wF=function(e){var n=e.dt;return`
.p-ink {
    display: block;
    position: absolute;
    background: `.concat(n("ripple.background"),`;
    border-radius: 100%;
    transform: scale(0);
    pointer-events: none;
}

.p-ink-active {
    animation: ripple 0.4s linear;
}

@keyframes ripple {
    100% {
        opacity: 0;
        transform: scale(2.5);
    }
}
`)},SF={root:"p-ink"},CF=Xn.extend({name:"ripple-directive",theme:wF,classes:SF}),kF=fi.extend({style:CF});function wy(t){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(t)}function TF(t){return AF(t)||PF(t)||IF(t)||EF()}function EF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IF(t,e){if(t){if(typeof t=="string")return c2(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c2(t,e):void 0}}function PF(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function AF(t){if(Array.isArray(t))return c2(t)}function c2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}function b4(t,e,n){return(e=RF(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RF(t){var e=MF(t,"string");return wy(e)=="symbol"?e:e+""}function MF(t,e){if(wy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(wy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zs=kF.extend("ripple",{watch:{"config.ripple":function(e){e?(this.createRipple(this.$host),this.bindEvents(this.$host),this.$host.setAttribute("data-pd-ripple",!0),this.$host.style.overflow="hidden",this.$host.style.position="relative"):(this.remove(this.$host),this.$host.removeAttribute("data-pd-ripple"))}},unmounted:function(e){this.remove(e)},timeout:void 0,methods:{bindEvents:function(e){e.addEventListener("mousedown",this.onMouseDown.bind(this))},unbindEvents:function(e){e.removeEventListener("mousedown",this.onMouseDown.bind(this))},createRipple:function(e){var n=i_("span",b4(b4({role:"presentation","aria-hidden":!0,"data-p-ink":!0,"data-p-ink-active":!1,class:!this.isUnstyled()&&this.cx("root"),onAnimationEnd:this.onAnimationEnd.bind(this)},this.$attrSelector,""),"p-bind",this.ptm("root")));e.appendChild(n),this.$el=n},remove:function(e){var n=this.getInk(e);n&&(this.$host.style.overflow="",this.$host.style.position="",this.unbindEvents(e),n.removeEventListener("animationend",this.onAnimationEnd),n.remove())},onMouseDown:function(e){var n=this,l=e.currentTarget,m=this.getInk(l);if(!(!m||getComputedStyle(m,null).display==="none")){if(!this.isUnstyled()&&Rc(m,"p-ink-active"),m.setAttribute("data-p-ink-active","false"),!Mc(m)&&!bs(m)){var d=Math.max(So(l),jl(l));m.style.height=d+"px",m.style.width=d+"px"}var x=Ea(l),s=e.pageX-x.left+document.body.scrollTop-bs(m)/2,T=e.pageY-x.top+document.body.scrollLeft-Mc(m)/2;m.style.top=T+"px",m.style.left=s+"px",!this.isUnstyled()&&Lc(m,"p-ink-active"),m.setAttribute("data-p-ink-active","true"),this.timeout=setTimeout(function(){m&&(!n.isUnstyled()&&Rc(m,"p-ink-active"),m.setAttribute("data-p-ink-active","false"))},401)}},onAnimationEnd:function(e){this.timeout&&clearTimeout(this.timeout),!this.isUnstyled()&&Rc(e.currentTarget,"p-ink-active"),e.currentTarget.setAttribute("data-p-ink-active","false")},getInk:function(e){return e&&e.children?TF(e.children).find(function(n){return Ci(n,"data-pc-name")==="ripple"}):void 0}}}),DF={root:"p-accordionheader",toggleicon:"p-accordionheader-toggle-icon"},LF=Xn.extend({name:"accordionheader",classes:DF}),OF={name:"BaseAccordionHeader",extends:mr,props:{as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:LF,provide:function(){return{$pcAccordionHeader:this,$parentInstance:this}}},Yg={name:"AccordionHeader",extends:OF,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],methods:{onFocus:function(){this.$pcAccordion.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(e);break}},onArrowDownKey:function(e){var n=this.findNextPanel(this.findPanel(e.currentTarget));n?this.changeFocusedPanel(e,n):this.onHomeKey(e),e.preventDefault()},onArrowUpKey:function(e){var n=this.findPrevPanel(this.findPanel(e.currentTarget));n?this.changeFocusedPanel(e,n):this.onEndKey(e),e.preventDefault()},onHomeKey:function(e){var n=this.findFirstPanel();this.changeFocusedPanel(e,n),e.preventDefault()},onEndKey:function(e){var n=this.findLastPanel();this.changeFocusedPanel(e,n),e.preventDefault()},onEnterKey:function(e){this.changeActiveValue(),e.preventDefault()},findPanel:function(e){return e==null?void 0:e.closest('[data-pc-name="accordionpanel"]')},findHeader:function(e){return yo(e,'[data-pc-name="accordionheader"]')},findNextPanel:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=n?e:e.nextElementSibling;return l?Ci(l,"data-p-disabled")?this.findNextPanel(l):this.findHeader(l):null},findPrevPanel:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=n?e:e.previousElementSibling;return l?Ci(l,"data-p-disabled")?this.findPrevPanel(l):this.findHeader(l):null},findFirstPanel:function(){return this.findNextPanel(this.$pcAccordion.$el.firstElementChild,!0)},findLastPanel:function(){return this.findPrevPanel(this.$pcAccordion.$el.lastElementChild,!0)},changeActiveValue:function(){this.$pcAccordion.updateValue(this.$pcAccordionPanel.value)},changeFocusedPanel:function(e,n){Ro(this.findHeader(n))}},computed:{id:function(){return"".concat(this.$pcAccordion.id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},ariaControls:function(){return"".concat(this.$pcAccordion.id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},attrs:function(){return ie(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.$pcAccordionPanel.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.$pcAccordion.tabindex,"aria-expanded":this.$pcAccordionPanel.active,"aria-controls":this.ariaControls,"data-pc-name":"accordionheader","data-p-disabled":this.$pcAccordionPanel.disabled,"data-p-active":this.$pcAccordionPanel.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}},components:{ChevronUpIcon:F_,ChevronDownIcon:Pf},directives:{ripple:zs}};function zF(t,e,n,l,m,d){var x=No("ripple");return t.asChild?jt(t.$slots,"default",{key:1,class:vn(t.cx("root")),active:d.$pcAccordionPanel.active,a11yAttrs:d.a11yAttrs,onClick:d.onClick}):_r((X(),bt(Tn(t.as),ie({key:0,class:t.cx("root"),onClick:d.onClick},d.attrs),{default:Xe(function(){return[jt(t.$slots,"default",{active:d.$pcAccordionPanel.active}),jt(t.$slots,"toggleicon",{active:d.$pcAccordionPanel.active,class:vn(t.cx("toggleicon"))},function(){return[d.$pcAccordionPanel.active?(X(),bt(Tn(d.$pcAccordion.$slots.collapseicon?d.$pcAccordion.$slots.collapseicon:d.$pcAccordion.collapseIcon?"span":"ChevronDownIcon"),ie({key:0,class:[d.$pcAccordion.collapseIcon,t.cx("toggleicon")],"aria-hidden":"true"},t.ptm("toggleicon",d.ptParams)),null,16,["class"])):(X(),bt(Tn(d.$pcAccordion.$slots.expandicon?d.$pcAccordion.$slots.expandicon:d.$pcAccordion.expandIcon?"span":"ChevronUpIcon"),ie({key:1,class:[d.$pcAccordion.expandIcon,t.cx("toggleicon")],"aria-hidden":"true"},t.ptm("toggleicon",d.ptParams)),null,16,["class"]))]})]}),_:3},16,["class","onClick"])),[[x]])}Yg.render=zF;var BF={root:function(e){var n=e.instance,l=e.props;return["p-accordionpanel",{"p-accordionpanel-active":n.active,"p-disabled":l.disabled}]}},FF=Xn.extend({name:"accordionpanel",classes:BF}),$F={name:"BaseAccordionPanel",extends:mr,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:FF,provide:function(){return{$pcAccordionPanel:this,$parentInstance:this}}},Jg={name:"AccordionPanel",extends:$F,inheritAttrs:!1,inject:["$pcAccordion"],computed:{active:function(){return this.$pcAccordion.isItemActive(this.value)},attrs:function(){return ie(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{"data-pc-name":"accordionpanel","data-p-disabled":this.disabled,"data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function NF(t,e,n,l,m,d){return t.asChild?jt(t.$slots,"default",{key:1,class:vn(t.cx("root")),active:d.active,a11yAttrs:d.a11yAttrs}):(X(),bt(Tn(t.as),ie({key:0,class:t.cx("root")},d.attrs),{default:Xe(function(){return[jt(t.$slots,"default")]}),_:3},16,["class"]))}Jg.render=NF;var VF=function(e){var n=e.dt;return`
.p-accordionpanel {
    display: flex;
    flex-direction: column;
    border-style: solid;
    border-width: `.concat(n("accordion.panel.border.width"),`;
    border-color: `).concat(n("accordion.panel.border.color"),`;
}

.p-accordionheader {
    all: unset;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: `).concat(n("accordion.header.padding"),`;
    color: `).concat(n("accordion.header.color"),`;
    background: `).concat(n("accordion.header.background"),`;
    border-style: solid;
    border-width: `).concat(n("accordion.header.border.width"),`;
    border-color: `).concat(n("accordion.header.border.color"),`;
    font-weight: `).concat(n("accordion.header.font.weight"),`;
    border-radius: `).concat(n("accordion.header.border.radius"),`;
    transition: background `).concat(n("accordion.transition.duration"),"; color ").concat(n("accordion.transition.duration"),"color ").concat(n("accordion.transition.duration"),", outline-color ").concat(n("accordion.transition.duration"),", box-shadow ").concat(n("accordion.transition.duration"),`;
    outline-color: transparent;
}

.p-accordionpanel:first-child > .p-accordionheader {
    border-width: `).concat(n("accordion.header.first.border.width"),`;
    border-start-start-radius: `).concat(n("accordion.header.first.top.border.radius"),`;
    border-start-end-radius: `).concat(n("accordion.header.first.top.border.radius"),`;
}

.p-accordionpanel:last-child > .p-accordionheader {
    border-end-start-radius: `).concat(n("accordion.header.last.bottom.border.radius"),`;
    border-end-end-radius: `).concat(n("accordion.header.last.bottom.border.radius"),`;
}

.p-accordionpanel:last-child.p-accordionpanel-active > .p-accordionheader {
    border-end-start-radius: `).concat(n("accordion.header.last.active.bottom.border.radius"),`;
    border-end-end-radius: `).concat(n("accordion.header.last.active.bottom.border.radius"),`;
}

.p-accordionheader-toggle-icon {
    color: `).concat(n("accordion.header.toggle.icon.color"),`;
}

.p-accordionpanel:not(.p-disabled) .p-accordionheader:focus-visible {
    box-shadow: `).concat(n("accordion.header.focus.ring.shadow"),`;
    outline: `).concat(n("accordion.header.focus.ring.width")," ").concat(n("accordion.header.focus.ring.style")," ").concat(n("accordion.header.focus.ring.color"),`;
    outline-offset: `).concat(n("accordion.header.focus.ring.offset"),`;
}

.p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) > .p-accordionheader:hover {
    background: `).concat(n("accordion.header.hover.background"),`;
    color: `).concat(n("accordion.header.hover.color"),`;
}

.p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) .p-accordionheader:hover .p-accordionheader-toggle-icon {
    color: `).concat(n("accordion.header.toggle.icon.hover.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader {
    background: `).concat(n("accordion.header.active.background"),`;
    color: `).concat(n("accordion.header.active.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader .p-accordionheader-toggle-icon {
    color: `).concat(n("accordion.header.toggle.icon.active.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover {
    background: `).concat(n("accordion.header.active.hover.background"),`;
    color: `).concat(n("accordion.header.active.hover.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover .p-accordionheader-toggle-icon {
    color: `).concat(n("accordion.header.toggle.icon.active.hover.color"),`;
}

.p-accordioncontent-content {
    border-style: solid;
    border-width: `).concat(n("accordion.content.border.width"),`;
    border-color: `).concat(n("accordion.content.border.color"),`;
    background-color: `).concat(n("accordion.content.background"),`;
    color: `).concat(n("accordion.content.color"),`;
    padding: `).concat(n("accordion.content.padding"),`;
}
`)},jF={root:"p-accordion p-component"},UF=Xn.extend({name:"accordion",theme:VF,classes:jF}),qF={name:"BaseAccordion",extends:mr,props:{value:{type:[String,Number,Array],default:void 0},multiple:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},expandIcon:{type:String,default:void 0},collapseIcon:{type:String,default:void 0},activeIndex:{type:[Number,Array],default:null}},style:UF,provide:function(){return{$pcAccordion:this,$parentInstance:this}}},XP={name:"Accordion",extends:qF,inheritAttrs:!1,emits:["update:value","update:activeIndex","tab-open","tab-close","tab-click"],data:function(){return{id:this.$attrs.id,d_value:this.value}},watch:{"$attrs.id":function(e){this.id=e||$o()},value:function(e){this.d_value=e},activeIndex:{immediate:!0,handler:function(e){this.hasAccordionTab&&(this.d_value=this.multiple?e==null?void 0:e.map(String):e==null?void 0:e.toString())}}},mounted:function(){this.id=this.id||$o()},methods:{isItemActive:function(e){var n;return this.multiple?(n=this.d_value)===null||n===void 0?void 0:n.includes(e):this.d_value===e},updateValue:function(e){var n,l=this.isItemActive(e);this.multiple?l?this.d_value=this.d_value.filter(function(m){return m!==e}):this.d_value?this.d_value.push(e):this.d_value=[e]:this.d_value=l?null:e,this.$emit("update:value",this.d_value),this.$emit("update:activeIndex",this.multiple?(n=this.d_value)===null||n===void 0?void 0:n.map(Number):Number(this.d_value)),this.$emit(l?"tab-close":"tab-open",{originalEvent:void 0,index:Number(e)})},isAccordionTab:function(e){return e.type.name==="AccordionTab"},getTabProp:function(e,n){return e.props?e.props[n]:void 0},getKey:function(e,n){return this.getTabProp(e,"header")||n},getHeaderPT:function(e,n){var l=this;return{root:ie({onClick:function(d){return l.onTabClick(d,n)}},this.getTabProp(e,"headerProps"),this.getTabPT(e,"header",n)),toggleicon:ie(this.getTabProp(e,"headeractionprops"),this.getTabPT(e,"headeraction",n))}},getContentPT:function(e,n){return{root:ie(this.getTabProp(e,"contentProps"),this.getTabPT(e,"toggleablecontent",n)),transition:this.getTabPT(e,"transition",n),content:this.getTabPT(e,"content",n)}},getTabPT:function(e,n,l){var m=this.tabs.length,d={props:e.props||{},parent:{instance:this,props:this.$props,state:this.$data},context:{index:l,count:m,first:l===0,last:l===m-1,active:this.isItemActive("".concat(l))}};return ie(this.ptm("accordiontab.".concat(n),d),this.ptmo(this.getTabProp(e,"pt"),n,d))},onTabClick:function(e,n){this.$emit("tab-click",{originalEvent:e,index:n})}},computed:{tabs:function(){var e=this;return this.$slots.default().reduce(function(n,l){return e.isAccordionTab(l)?n.push(l):l.children&&l.children instanceof Array&&l.children.forEach(function(m){e.isAccordionTab(m)&&n.push(m)}),n},[])},hasAccordionTab:function(){return this.tabs.length}},components:{AccordionPanel:Jg,AccordionHeader:Yg,AccordionContent:Xg,ChevronUpIcon:F_,ChevronRightIcon:ed}};function HF(t,e,n,l,m,d){var x=wn("AccordionHeader"),s=wn("AccordionContent"),T=wn("AccordionPanel");return X(),pe("div",ie({class:t.cx("root")},t.ptmi("root")),[d.hasAccordionTab?(X(!0),pe(an,{key:0},fr(d.tabs,function(E,A){return X(),bt(T,{key:d.getKey(E,A),value:"".concat(A),pt:{root:d.getTabPT(E,"root",A)},disabled:d.getTabProp(E,"disabled")},{default:Xe(function(){return[ge(x,{class:vn(d.getTabProp(E,"headerClass")),pt:d.getHeaderPT(E,A)},{toggleicon:Xe(function(z){return[z.active?(X(),bt(Tn(t.$slots.collapseicon?t.$slots.collapseicon:t.collapseIcon?"span":"ChevronDownIcon"),ie({key:0,class:[t.collapseIcon,z.class],"aria-hidden":"true",ref_for:!0},d.getTabPT(E,"headericon",A)),null,16,["class"])):(X(),bt(Tn(t.$slots.expandicon?t.$slots.expandicon:t.expandIcon?"span":"ChevronUpIcon"),ie({key:1,class:[t.expandIcon,z.class],"aria-hidden":"true",ref_for:!0},d.getTabPT(E,"headericon",A)),null,16,["class"]))]}),default:Xe(function(){return[E.children&&E.children.headericon?(X(),bt(Tn(E.children.headericon),{key:0,isTabActive:d.isItemActive("".concat(A)),active:d.isItemActive("".concat(A)),index:A},null,8,["isTabActive","active","index"])):Ct("",!0),E.props&&E.props.header?(X(),pe("span",ie({key:1,ref_for:!0},d.getTabPT(E,"headertitle",A)),Ue(E.props.header),17)):Ct("",!0),E.children&&E.children.header?(X(),bt(Tn(E.children.header),{key:2})):Ct("",!0)]}),_:2},1032,["class","pt"]),ge(s,{pt:d.getContentPT(E,A)},{default:Xe(function(){return[(X(),bt(Tn(E)))]}),_:2},1032,["pt"])]}),_:2},1032,["value","pt","disabled"])}),128)):jt(t.$slots,"default",{key:1})],16)}XP.render=HF;var s0={name:"SpinnerIcon",extends:Qr};function GF(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z",fill:"currentColor"},null,-1)]),16)}s0.render=GF;var u2={name:"TimesCircleIcon",extends:Qr};function WF(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z",fill:"currentColor"},null,-1)]),16)}u2.render=WF;var KF=function(e){var n=e.dt;return`
.p-inputtext {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: `.concat(n("inputtext.color"),`;
    background: `).concat(n("inputtext.background"),`;
    padding-block: `).concat(n("inputtext.padding.y"),`;
    padding-inline: `).concat(n("inputtext.padding.x"),`;
    border: 1px solid `).concat(n("inputtext.border.color"),`;
    transition: background `).concat(n("inputtext.transition.duration"),", color ").concat(n("inputtext.transition.duration"),", border-color ").concat(n("inputtext.transition.duration"),", outline-color ").concat(n("inputtext.transition.duration"),", box-shadow ").concat(n("inputtext.transition.duration"),`;
    appearance: none;
    border-radius: `).concat(n("inputtext.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("inputtext.shadow"),`;
}

.p-inputtext:enabled:hover {
    border-color: `).concat(n("inputtext.hover.border.color"),`;
}

.p-inputtext:enabled:focus {
    border-color: `).concat(n("inputtext.focus.border.color"),`;
    box-shadow: `).concat(n("inputtext.focus.ring.shadow"),`;
    outline: `).concat(n("inputtext.focus.ring.width")," ").concat(n("inputtext.focus.ring.style")," ").concat(n("inputtext.focus.ring.color"),`;
    outline-offset: `).concat(n("inputtext.focus.ring.offset"),`;
}

.p-inputtext.p-invalid {
    border-color: `).concat(n("inputtext.invalid.border.color"),`;
}

.p-inputtext.p-variant-filled {
    background: `).concat(n("inputtext.filled.background"),`;
}

.p-inputtext.p-variant-filled:enabled:hover {
    background: `).concat(n("inputtext.filled.hover.background"),`;
}

.p-inputtext.p-variant-filled:enabled:focus {
    background: `).concat(n("inputtext.filled.focus.background"),`;
}

.p-inputtext:disabled {
    opacity: 1;
    background: `).concat(n("inputtext.disabled.background"),`;
    color: `).concat(n("inputtext.disabled.color"),`;
}

.p-inputtext::placeholder {
    color: `).concat(n("inputtext.placeholder.color"),`;
}

.p-inputtext.p-invalid::placeholder {
    color: `).concat(n("inputtext.invalid.placeholder.color"),`;
}

.p-inputtext-sm {
    font-size: `).concat(n("inputtext.sm.font.size"),`;
    padding-block: `).concat(n("inputtext.sm.padding.y"),`;
    padding-inline: `).concat(n("inputtext.sm.padding.x"),`;
}

.p-inputtext-lg {
    font-size: `).concat(n("inputtext.lg.font.size"),`;
    padding-block: `).concat(n("inputtext.lg.padding.y"),`;
    padding-inline: `).concat(n("inputtext.lg.padding.x"),`;
}

.p-inputtext-fluid {
    width: 100%;
}
`)},ZF={root:function(e){var n=e.instance,l=e.props;return["p-inputtext p-component",{"p-filled":n.$filled,"p-inputtext-sm p-inputfield-sm":l.size==="small","p-inputtext-lg p-inputfield-lg":l.size==="large","p-invalid":n.$invalid,"p-variant-filled":n.$variant==="filled","p-inputtext-fluid":n.$fluid}]}},XF=Xn.extend({name:"inputtext",theme:KF,classes:ZF}),YF={name:"BaseInputText",extends:Ah,style:XF,provide:function(){return{$pcInputText:this,$parentInstance:this}}},vo={name:"InputText",extends:YF,inheritAttrs:!1,methods:{onInput:function(e){this.writeValue(e.target.value,e)}},computed:{attrs:function(){return ie(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)}}},JF=["value","disabled","aria-invalid"];function QF(t,e,n,l,m,d){return X(),pe("input",ie({type:"text",class:t.cx("root"),value:t.d_value,disabled:t.disabled,"aria-invalid":t.$invalid||void 0,onInput:e[0]||(e[0]=function(){return d.onInput&&d.onInput.apply(d,arguments)})},d.attrs),null,16,JF)}vo.render=QF;var ql=o0(),td={name:"Portal",props:{appendTo:{type:[String,Object],default:"body"},disabled:{type:Boolean,default:!1}},data:function(){return{mounted:!1}},mounted:function(){this.mounted=vS()},computed:{inline:function(){return this.disabled||this.appendTo==="self"}}};function e$(t,e,n,l,m,d){return d.inline?jt(t.$slots,"default",{key:0}):m.mounted?(X(),bt(iL,{key:1,to:n.appendTo},[jt(t.$slots,"default")],8,["to"])):Ct("",!0)}td.render=e$;var t$=function(e){var n=e.dt;return`
.p-virtualscroller-loader {
    background: `.concat(n("virtualscroller.loader.mask.background"),`;
    color: `).concat(n("virtualscroller.loader.mask.color"),`;
}

.p-virtualscroller-loading-icon {
    font-size: `).concat(n("virtualscroller.loader.icon.size"),`;
    width: `).concat(n("virtualscroller.loader.icon.size"),`;
    height: `).concat(n("virtualscroller.loader.icon.size"),`;
}
`)},n$=`
.p-virtualscroller {
    position: relative;
    overflow: auto;
    contain: strict;
    transform: translateZ(0);
    will-change: scroll-position;
    outline: 0 none;
}

.p-virtualscroller-content {
    position: absolute;
    top: 0;
    left: 0;
    min-height: 100%;
    min-width: 100%;
    will-change: transform;
}

.p-virtualscroller-spacer {
    position: absolute;
    top: 0;
    left: 0;
    height: 1px;
    width: 1px;
    transform-origin: 0 0;
    pointer-events: none;
}

.p-virtualscroller-loader {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-virtualscroller-loader-mask {
    display: flex;
    align-items: center;
    justify-content: center;
}

.p-virtualscroller-horizontal > .p-virtualscroller-content {
    display: flex;
}

.p-virtualscroller-inline .p-virtualscroller-content {
    position: static;
}
`,_4=Xn.extend({name:"virtualscroller",css:n$,theme:t$}),r$={name:"BaseVirtualScroller",extends:mr,props:{id:{type:String,default:null},style:null,class:null,items:{type:Array,default:null},itemSize:{type:[Number,Array],default:0},scrollHeight:null,scrollWidth:null,orientation:{type:String,default:"vertical"},numToleratedItems:{type:Number,default:null},delay:{type:Number,default:0},resizeDelay:{type:Number,default:10},lazy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loaderDisabled:{type:Boolean,default:!1},columns:{type:Array,default:null},loading:{type:Boolean,default:!1},showSpacer:{type:Boolean,default:!0},showLoader:{type:Boolean,default:!1},tabindex:{type:Number,default:0},inline:{type:Boolean,default:!1},step:{type:Number,default:0},appendOnly:{type:Boolean,default:!1},autoSize:{type:Boolean,default:!1}},style:_4,provide:function(){return{$pcVirtualScroller:this,$parentInstance:this}},beforeMount:function(){var e;_4.loadCSS({nonce:(e=this.$primevueConfig)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce})}};function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}function x4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function Ag(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x4(Object(n),!0).forEach(function(l){YP(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function YP(t,e,n){return(e=i$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i$(t){var e=o$(t,"string");return Sy(e)=="symbol"?e:e+""}function o$(t,e){if(Sy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Sy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CS={name:"VirtualScroller",extends:r$,inheritAttrs:!1,emits:["update:numToleratedItems","scroll","scroll-index-change","lazy-load"],data:function(){var e=this.isBoth();return{first:e?{rows:0,cols:0}:0,last:e?{rows:0,cols:0}:0,page:e?{rows:0,cols:0}:0,numItemsInViewport:e?{rows:0,cols:0}:0,lastScrollPos:e?{top:0,left:0}:0,d_numToleratedItems:this.numToleratedItems,d_loading:this.loading,loaderArr:[],spacerStyle:{},contentStyle:{}}},element:null,content:null,lastScrollPos:null,scrollTimeout:null,resizeTimeout:null,defaultWidth:0,defaultHeight:0,defaultContentWidth:0,defaultContentHeight:0,isRangeChanged:!1,lazyLoadState:{},resizeListener:null,initialized:!1,watch:{numToleratedItems:function(e){this.d_numToleratedItems=e},loading:function(e,n){this.lazy&&e!==n&&e!==this.d_loading&&(this.d_loading=e)},items:function(e,n){(!n||n.length!==(e||[]).length)&&(this.init(),this.calculateAutoSize())},itemSize:function(){this.init(),this.calculateAutoSize()},orientation:function(){this.lastScrollPos=this.isBoth()?{top:0,left:0}:0},scrollHeight:function(){this.init(),this.calculateAutoSize()},scrollWidth:function(){this.init(),this.calculateAutoSize()}},mounted:function(){this.viewInit(),this.lastScrollPos=this.isBoth()?{top:0,left:0}:0,this.lazyLoadState=this.lazyLoadState||{}},updated:function(){!this.initialized&&this.viewInit()},unmounted:function(){this.unbindResizeListener(),this.initialized=!1},methods:{viewInit:function(){o_(this.element)&&(this.setContentEl(this.content),this.init(),this.calculateAutoSize(),this.bindResizeListener(),this.defaultWidth=bs(this.element),this.defaultHeight=Mc(this.element),this.defaultContentWidth=bs(this.content),this.defaultContentHeight=Mc(this.content),this.initialized=!0)},init:function(){this.disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize())},isVertical:function(){return this.orientation==="vertical"},isHorizontal:function(){return this.orientation==="horizontal"},isBoth:function(){return this.orientation==="both"},scrollTo:function(e){this.element&&this.element.scrollTo(e)},scrollToIndex:function(e){var n=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"auto",m=this.isBoth(),d=this.isHorizontal(),x=m?e.every(function(Me){return Me>-1}):e>-1;if(x){var s=this.first,T=this.element,E=T.scrollTop,A=E===void 0?0:E,z=T.scrollLeft,j=z===void 0?0:z,U=this.calculateNumItems(),K=U.numToleratedItems,oe=this.getContentPosition(),fe=this.itemSize,me=function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Ce=arguments.length>1?arguments[1]:void 0;return he<=Ce?0:he},ne=function(he,Ce,$e){return he*Ce+$e},te=function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.scrollTo({left:he,top:Ce,behavior:l})},re=m?{rows:0,cols:0}:0,ze=!1,_t=!1;m?(re={rows:me(e[0],K[0]),cols:me(e[1],K[1])},te(ne(re.cols,fe[1],oe.left),ne(re.rows,fe[0],oe.top)),_t=this.lastScrollPos.top!==A||this.lastScrollPos.left!==j,ze=re.rows!==s.rows||re.cols!==s.cols):(re=me(e,K),d?te(ne(re,fe,oe.left),A):te(j,ne(re,fe,oe.top)),_t=this.lastScrollPos!==(d?j:A),ze=re!==s),this.isRangeChanged=ze,_t&&(this.first=re)}},scrollInView:function(e,n){var l=this,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"auto";if(n){var d=this.isBoth(),x=this.isHorizontal(),s=d?e.every(function(fe){return fe>-1}):e>-1;if(s){var T=this.getRenderedRange(),E=T.first,A=T.viewport,z=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return l.scrollTo({left:me,top:ne,behavior:m})},j=n==="to-start",U=n==="to-end";if(j){if(d)A.first.rows-E.rows>e[0]?z(A.first.cols*this.itemSize[1],(A.first.rows-1)*this.itemSize[0]):A.first.cols-E.cols>e[1]&&z((A.first.cols-1)*this.itemSize[1],A.first.rows*this.itemSize[0]);else if(A.first-E>e){var K=(A.first-1)*this.itemSize;x?z(K,0):z(0,K)}}else if(U){if(d)A.last.rows-E.rows<=e[0]+1?z(A.first.cols*this.itemSize[1],(A.first.rows+1)*this.itemSize[0]):A.last.cols-E.cols<=e[1]+1&&z((A.first.cols+1)*this.itemSize[1],A.first.rows*this.itemSize[0]);else if(A.last-E<=e+1){var oe=(A.first+1)*this.itemSize;x?z(oe,0):z(0,oe)}}}}else this.scrollToIndex(e,m)},getRenderedRange:function(){var e=function(z,j){return Math.floor(z/(j||z))},n=this.first,l=0;if(this.element){var m=this.isBoth(),d=this.isHorizontal(),x=this.element,s=x.scrollTop,T=x.scrollLeft;if(m)n={rows:e(s,this.itemSize[0]),cols:e(T,this.itemSize[1])},l={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols};else{var E=d?T:s;n=e(E,this.itemSize),l=n+this.numItemsInViewport}}return{first:this.first,last:this.last,viewport:{first:n,last:l}}},calculateNumItems:function(){var e=this.isBoth(),n=this.isHorizontal(),l=this.itemSize,m=this.getContentPosition(),d=this.element?this.element.offsetWidth-m.left:0,x=this.element?this.element.offsetHeight-m.top:0,s=function(j,U){return Math.ceil(j/(U||j))},T=function(j){return Math.ceil(j/2)},E=e?{rows:s(x,l[0]),cols:s(d,l[1])}:s(n?d:x,l),A=this.d_numToleratedItems||(e?[T(E.rows),T(E.cols)]:T(E));return{numItemsInViewport:E,numToleratedItems:A}},calculateOptions:function(){var e=this,n=this.isBoth(),l=this.first,m=this.calculateNumItems(),d=m.numItemsInViewport,x=m.numToleratedItems,s=function(A,z,j){var U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.getLast(A+z+(A<j?2:3)*j,U)},T=n?{rows:s(l.rows,d.rows,x[0]),cols:s(l.cols,d.cols,x[1],!0)}:s(l,d,x);this.last=T,this.numItemsInViewport=d,this.d_numToleratedItems=x,this.$emit("update:numToleratedItems",this.d_numToleratedItems),this.showLoader&&(this.loaderArr=n?Array.from({length:d.rows}).map(function(){return Array.from({length:d.cols})}):Array.from({length:d})),this.lazy&&Promise.resolve().then(function(){var E;e.lazyLoadState={first:e.step?n?{rows:0,cols:l.cols}:0:l,last:Math.min(e.step?e.step:T,((E=e.items)===null||E===void 0?void 0:E.length)||0)},e.$emit("lazy-load",e.lazyLoadState)})},calculateAutoSize:function(){var e=this;this.autoSize&&!this.d_loading&&Promise.resolve().then(function(){if(e.content){var n=e.isBoth(),l=e.isHorizontal(),m=e.isVertical();e.content.style.minHeight=e.content.style.minWidth="auto",e.content.style.position="relative",e.element.style.contain="none";var d=[bs(e.element),Mc(e.element)],x=d[0],s=d[1];(n||l)&&(e.element.style.width=x<e.defaultWidth?x+"px":e.scrollWidth||e.defaultWidth+"px"),(n||m)&&(e.element.style.height=s<e.defaultHeight?s+"px":e.scrollHeight||e.defaultHeight+"px"),e.content.style.minHeight=e.content.style.minWidth="",e.content.style.position="",e.element.style.contain=""}})},getLast:function(){var e,n,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,m=arguments.length>1?arguments[1]:void 0;return this.items?Math.min(m?((e=this.columns||this.items[0])===null||e===void 0?void 0:e.length)||0:((n=this.items)===null||n===void 0?void 0:n.length)||0,l):0},getContentPosition:function(){if(this.content){var e=getComputedStyle(this.content),n=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),l=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),m=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),d=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:n,right:l,top:m,bottom:d,x:n+l,y:m+d}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}},setSize:function(){var e=this;if(this.element){var n=this.isBoth(),l=this.isHorizontal(),m=this.element.parentElement,d=this.scrollWidth||"".concat(this.element.offsetWidth||m.offsetWidth,"px"),x=this.scrollHeight||"".concat(this.element.offsetHeight||m.offsetHeight,"px"),s=function(E,A){return e.element.style[E]=A};n||l?(s("height",x),s("width",d)):s("height",x)}},setSpacerSize:function(){var e=this,n=this.items;if(n){var l=this.isBoth(),m=this.isHorizontal(),d=this.getContentPosition(),x=function(T,E,A){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return e.spacerStyle=Ag(Ag({},e.spacerStyle),YP({},"".concat(T),(E||[]).length*A+z+"px"))};l?(x("height",n,this.itemSize[0],d.y),x("width",this.columns||n[1],this.itemSize[1],d.x)):m?x("width",this.columns||n,this.itemSize,d.x):x("height",n,this.itemSize,d.y)}},setContentPosition:function(e){var n=this;if(this.content&&!this.appendOnly){var l=this.isBoth(),m=this.isHorizontal(),d=e?e.first:this.first,x=function(A,z){return A*z},s=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.contentStyle=Ag(Ag({},n.contentStyle),{transform:"translate3d(".concat(A,"px, ").concat(z,"px, 0)")})};if(l)s(x(d.cols,this.itemSize[1]),x(d.rows,this.itemSize[0]));else{var T=x(d,this.itemSize);m?s(T,0):s(0,T)}}},onScrollPositionChange:function(e){var n=this,l=e.target,m=this.isBoth(),d=this.isHorizontal(),x=this.getContentPosition(),s=function(Je,ft){return Je?Je>ft?Je-ft:Je:0},T=function(Je,ft){return Math.floor(Je/(ft||Je))},E=function(Je,ft,ut,Qe,Qt,kt){return Je<=Qt?Qt:kt?ut-Qe-Qt:ft+Qt-1},A=function(Je,ft,ut,Qe,Qt,kt,wt){return Je<=kt?0:Math.max(0,wt?Je<ft?ut:Je-kt:Je>ft?ut:Je-2*kt)},z=function(Je,ft,ut,Qe,Qt,kt){var wt=ft+Qe+2*Qt;return Je>=Qt&&(wt+=Qt+1),n.getLast(wt,kt)},j=s(l.scrollTop,x.top),U=s(l.scrollLeft,x.left),K=m?{rows:0,cols:0}:0,oe=this.last,fe=!1,me=this.lastScrollPos;if(m){var ne=this.lastScrollPos.top<=j,te=this.lastScrollPos.left<=U;if(!this.appendOnly||this.appendOnly&&(ne||te)){var re={rows:T(j,this.itemSize[0]),cols:T(U,this.itemSize[1])},ze={rows:E(re.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],ne),cols:E(re.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],te)};K={rows:A(re.rows,ze.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],ne),cols:A(re.cols,ze.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],te)},oe={rows:z(re.rows,K.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:z(re.cols,K.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},fe=K.rows!==this.first.rows||oe.rows!==this.last.rows||K.cols!==this.first.cols||oe.cols!==this.last.cols||this.isRangeChanged,me={top:j,left:U}}}else{var _t=d?U:j,Me=this.lastScrollPos<=_t;if(!this.appendOnly||this.appendOnly&&Me){var he=T(_t,this.itemSize),Ce=E(he,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,Me);K=A(he,Ce,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,Me),oe=z(he,K,this.last,this.numItemsInViewport,this.d_numToleratedItems),fe=K!==this.first||oe!==this.last||this.isRangeChanged,me=_t}}return{first:K,last:oe,isRangeChanged:fe,scrollPos:me}},onScrollChange:function(e){var n=this.onScrollPositionChange(e),l=n.first,m=n.last,d=n.isRangeChanged,x=n.scrollPos;if(d){var s={first:l,last:m};if(this.setContentPosition(s),this.first=l,this.last=m,this.lastScrollPos=x,this.$emit("scroll-index-change",s),this.lazy&&this.isPageChanged(l)){var T,E,A={first:this.step?Math.min(this.getPageByFirst(l)*this.step,(((T=this.items)===null||T===void 0?void 0:T.length)||0)-this.step):l,last:Math.min(this.step?(this.getPageByFirst(l)+1)*this.step:m,((E=this.items)===null||E===void 0?void 0:E.length)||0)},z=this.lazyLoadState.first!==A.first||this.lazyLoadState.last!==A.last;z&&this.$emit("lazy-load",A),this.lazyLoadState=A}}},onScroll:function(e){var n=this;if(this.$emit("scroll",e),this.delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.isPageChanged()){if(!this.d_loading&&this.showLoader){var l=this.onScrollPositionChange(e),m=l.isRangeChanged,d=m||(this.step?this.isPageChanged():!1);d&&(this.d_loading=!0)}this.scrollTimeout=setTimeout(function(){n.onScrollChange(e),n.d_loading&&n.showLoader&&(!n.lazy||n.loading===void 0)&&(n.d_loading=!1,n.page=n.getPageByFirst())},this.delay)}}else this.onScrollChange(e)},onResize:function(){var e=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){if(o_(e.element)){var n=e.isBoth(),l=e.isVertical(),m=e.isHorizontal(),d=[bs(e.element),Mc(e.element)],x=d[0],s=d[1],T=x!==e.defaultWidth,E=s!==e.defaultHeight,A=n?T||E:m?T:l?E:!1;A&&(e.d_numToleratedItems=e.numToleratedItems,e.defaultWidth=x,e.defaultHeight=s,e.defaultContentWidth=bs(e.content),e.defaultContentHeight=Mc(e.content),e.init())}},this.resizeDelay)},bindResizeListener:function(){this.resizeListener||(this.resizeListener=this.onResize.bind(this),window.addEventListener("resize",this.resizeListener),window.addEventListener("orientationchange",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),window.removeEventListener("orientationchange",this.resizeListener),this.resizeListener=null)},getOptions:function(e){var n=(this.items||[]).length,l=this.isBoth()?this.first.rows+e:this.first+e;return{index:l,count:n,first:l===0,last:l===n-1,even:l%2===0,odd:l%2!==0}},getLoaderOptions:function(e,n){var l=this.loaderArr.length;return Ag({index:e,count:l,first:e===0,last:e===l-1,even:e%2===0,odd:e%2!==0},n)},getPageByFirst:function(e){return Math.floor(((e??this.first)+this.d_numToleratedItems*4)/(this.step||1))},isPageChanged:function(e){return this.step&&!this.lazy?this.page!==this.getPageByFirst(e??this.first):!0},setContentEl:function(e){this.content=e||this.content||yo(this.element,'[data-pc-section="content"]')},elementRef:function(e){this.element=e},contentRef:function(e){this.content=e}},computed:{containerClass:function(){return["p-virtualscroller",this.class,{"p-virtualscroller-inline":this.inline,"p-virtualscroller-both p-both-scroll":this.isBoth(),"p-virtualscroller-horizontal p-horizontal-scroll":this.isHorizontal()}]},contentClass:function(){return["p-virtualscroller-content",{"p-virtualscroller-loading":this.d_loading}]},loaderClass:function(){return["p-virtualscroller-loader",{"p-virtualscroller-loader-mask":!this.$slots.loader}]},loadedItems:function(){var e=this;return this.items&&!this.d_loading?this.isBoth()?this.items.slice(this.appendOnly?0:this.first.rows,this.last.rows).map(function(n){return e.columns?n:n.slice(e.appendOnly?0:e.first.cols,e.last.cols)}):this.isHorizontal()&&this.columns?this.items:this.items.slice(this.appendOnly?0:this.first,this.last):[]},loadedRows:function(){return this.d_loading?this.loaderDisabled?this.loaderArr:[]:this.loadedItems},loadedColumns:function(){if(this.columns){var e=this.isBoth(),n=this.isHorizontal();if(e||n)return this.d_loading&&this.loaderDisabled?e?this.loaderArr[0]:this.loaderArr:this.columns.slice(e?this.first.cols:this.first,e?this.last.cols:this.last)}return this.columns}},components:{SpinnerIcon:s0}},s$=["tabindex"];function a$(t,e,n,l,m,d){var x=wn("SpinnerIcon");return t.disabled?(X(),pe(an,{key:1},[jt(t.$slots,"default"),jt(t.$slots,"content",{items:t.items,rows:t.items,columns:d.loadedColumns})],64)):(X(),pe("div",ie({key:0,ref:d.elementRef,class:d.containerClass,tabindex:t.tabindex,style:t.style,onScroll:e[0]||(e[0]=function(){return d.onScroll&&d.onScroll.apply(d,arguments)})},t.ptmi("root")),[jt(t.$slots,"content",{styleClass:d.contentClass,items:d.loadedItems,getItemOptions:d.getOptions,loading:m.d_loading,getLoaderOptions:d.getLoaderOptions,itemSize:t.itemSize,rows:d.loadedRows,columns:d.loadedColumns,contentRef:d.contentRef,spacerStyle:m.spacerStyle,contentStyle:m.contentStyle,vertical:d.isVertical(),horizontal:d.isHorizontal(),both:d.isBoth()},function(){return[M("div",ie({ref:d.contentRef,class:d.contentClass,style:m.contentStyle},t.ptm("content")),[(X(!0),pe(an,null,fr(d.loadedItems,function(s,T){return jt(t.$slots,"item",{key:T,item:s,options:d.getOptions(T)})}),128))],16)]}),t.showSpacer?(X(),pe("div",ie({key:0,class:"p-virtualscroller-spacer",style:m.spacerStyle},t.ptm("spacer")),null,16)):Ct("",!0),!t.loaderDisabled&&t.showLoader&&m.d_loading?(X(),pe("div",ie({key:1,class:d.loaderClass},t.ptm("loader")),[t.$slots&&t.$slots.loader?(X(!0),pe(an,{key:0},fr(m.loaderArr,function(s,T){return jt(t.$slots,"loader",{key:T,options:d.getLoaderOptions(T,d.isBoth()&&{numCols:t.d_numItemsInViewport.cols})})}),128)):Ct("",!0),jt(t.$slots,"loadingicon",{},function(){return[ge(x,ie({spin:"",class:"p-virtualscroller-loading-icon"},t.ptm("loadingIcon")),null,16)]})],16)):Ct("",!0)],16,s$))}CS.render=a$;var l$=function(e){var n=e.dt;return`
.p-badge {
    display: inline-flex;
    border-radius: `.concat(n("badge.border.radius"),`;
    align-items: center;
    justify-content: center;
    padding: `).concat(n("badge.padding"),`;
    background: `).concat(n("badge.primary.background"),`;
    color: `).concat(n("badge.primary.color"),`;
    font-size: `).concat(n("badge.font.size"),`;
    font-weight: `).concat(n("badge.font.weight"),`;
    min-width: `).concat(n("badge.min.width"),`;
    height: `).concat(n("badge.height"),`;
}

.p-badge-dot {
    width: `).concat(n("badge.dot.size"),`;
    min-width: `).concat(n("badge.dot.size"),`;
    height: `).concat(n("badge.dot.size"),`;
    border-radius: 50%;
    padding: 0;
}

.p-badge-circle {
    padding: 0;
    border-radius: 50%;
}

.p-badge-secondary {
    background: `).concat(n("badge.secondary.background"),`;
    color: `).concat(n("badge.secondary.color"),`;
}

.p-badge-success {
    background: `).concat(n("badge.success.background"),`;
    color: `).concat(n("badge.success.color"),`;
}

.p-badge-info {
    background: `).concat(n("badge.info.background"),`;
    color: `).concat(n("badge.info.color"),`;
}

.p-badge-warn {
    background: `).concat(n("badge.warn.background"),`;
    color: `).concat(n("badge.warn.color"),`;
}

.p-badge-danger {
    background: `).concat(n("badge.danger.background"),`;
    color: `).concat(n("badge.danger.color"),`;
}

.p-badge-contrast {
    background: `).concat(n("badge.contrast.background"),`;
    color: `).concat(n("badge.contrast.color"),`;
}

.p-badge-sm {
    font-size: `).concat(n("badge.sm.font.size"),`;
    min-width: `).concat(n("badge.sm.min.width"),`;
    height: `).concat(n("badge.sm.height"),`;
}

.p-badge-lg {
    font-size: `).concat(n("badge.lg.font.size"),`;
    min-width: `).concat(n("badge.lg.min.width"),`;
    height: `).concat(n("badge.lg.height"),`;
}

.p-badge-xl {
    font-size: `).concat(n("badge.xl.font.size"),`;
    min-width: `).concat(n("badge.xl.min.width"),`;
    height: `).concat(n("badge.xl.height"),`;
}
`)},c$={root:function(e){var n=e.props,l=e.instance;return["p-badge p-component",{"p-badge-circle":Zr(n.value)&&String(n.value).length===1,"p-badge-dot":ha(n.value)&&!l.$slots.default,"p-badge-sm":n.size==="small","p-badge-lg":n.size==="large","p-badge-xl":n.size==="xlarge","p-badge-info":n.severity==="info","p-badge-success":n.severity==="success","p-badge-warn":n.severity==="warn","p-badge-danger":n.severity==="danger","p-badge-secondary":n.severity==="secondary","p-badge-contrast":n.severity==="contrast"}]}},u$=Xn.extend({name:"badge",theme:l$,classes:c$}),d$={name:"BaseBadge",extends:mr,props:{value:{type:[String,Number],default:null},severity:{type:String,default:null},size:{type:String,default:null}},style:u$,provide:function(){return{$pcBadge:this,$parentInstance:this}}},Af={name:"Badge",extends:d$,inheritAttrs:!1};function h$(t,e,n,l,m,d){return X(),pe("span",ie({class:t.cx("root")},t.ptmi("root")),[jt(t.$slots,"default",{},function(){return[tr(Ue(t.value),1)]})],16)}Af.render=h$;var p$=function(e){var n=e.dt;return`
.p-breadcrumb {
    background: `.concat(n("breadcrumb.background"),`;
    padding: `).concat(n("breadcrumb.padding"),`;
    overflow-x: auto;
}

.p-breadcrumb-list {
    margin: 0;
    padding: 0;
    list-style-type: none;
    display: flex;
    align-items: center;
    flex-wrap: nowrap;
    gap: `).concat(n("breadcrumb.gap"),`;
}

.p-breadcrumb-separator {
    display: flex;
    align-items: center;
    color: `).concat(n("breadcrumb.separator.color"),`;
}

.p-breadcrumb-separator-icon:dir(rtl) {
    transform: rotate(180deg);
}

.p-breadcrumb::-webkit-scrollbar {
    display: none;
}

.p-breadcrumb-item-link {
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: `).concat(n("breadcrumb.item.gap"),`;
    transition: background `).concat(n("breadcrumb.transition.duration"),", color ").concat(n("breadcrumb.transition.duration"),", outline-color ").concat(n("breadcrumb.transition.duration"),", box-shadow ").concat(n("breadcrumb.transition.duration"),`;
    border-radius: `).concat(n("breadcrumb.item.border.radius"),`;
    outline-color: transparent;
    color: `).concat(n("breadcrumb.item.color"),`;
}

.p-breadcrumb-item-link:focus-visible {
    box-shadow: `).concat(n("breadcrumb.item.focus.ring.shadow"),`;
    outline: `).concat(n("breadcrumb.item.focus.ring.width")," ").concat(n("breadcrumb.item.focus.ring.style")," ").concat(n("breadcrumb.item.focus.ring.color"),`;
    outline-offset: `).concat(n("breadcrumb.item.focus.ring.offset"),`;
}

.p-breadcrumb-item-link:hover .p-breadcrumb-item-label {
    color: `).concat(n("breadcrumb.item.hover.color"),`;
}

.p-breadcrumb-item-label {
    transition: inherit;
}

.p-breadcrumb-item-icon {
    color: `).concat(n("breadcrumb.item.icon.color"),`;
    transition: inherit;
}

.p-breadcrumb-item-link:hover .p-breadcrumb-item-icon {
    color: `).concat(n("breadcrumb.item.icon.hover.color"),`;
}
`)},f$={root:"p-breadcrumb p-component",list:"p-breadcrumb-list",homeItem:"p-breadcrumb-home-item",separator:"p-breadcrumb-separator",separatorIcon:"p-breadcrumb-separator-icon",item:function(e){var n=e.instance;return["p-breadcrumb-item",{"p-disabled":n.disabled()}]},itemLink:"p-breadcrumb-item-link",itemIcon:"p-breadcrumb-item-icon",itemLabel:"p-breadcrumb-item-label"},m$=Xn.extend({name:"breadcrumb",theme:p$,classes:f$}),g$={name:"BaseBreadcrumb",extends:mr,props:{model:{type:Array,default:null},home:{type:null,default:null}},style:m$,provide:function(){return{$pcBreadcrumb:this,$parentInstance:this}}},JP={name:"BreadcrumbItem",hostName:"Breadcrumb",extends:mr,props:{item:null,templates:null,index:null},methods:{onClick:function(e){this.item.command&&this.item.command({originalEvent:e,item:this.item})},visible:function(){return typeof this.item.visible=="function"?this.item.visible():this.item.visible!==!1},disabled:function(){return typeof this.item.disabled=="function"?this.item.disabled():this.item.disabled},label:function(){return typeof this.item.label=="function"?this.item.label():this.item.label},isCurrentUrl:function(){var e=this.item,n=e.to,l=e.url,m=typeof window<"u"?window.location.pathname:"";return n===m||l===m?"page":void 0}},computed:{ptmOptions:function(){return{context:{item:this.item,index:this.index}}},getMenuItemProps:function(){var e=this;return{action:ie({class:this.cx("itemLink"),"aria-current":this.isCurrentUrl(),onClick:function(l){return e.onClick(l)}},this.ptm("itemLink",this.ptmOptions)),icon:ie({class:[this.cx("icon"),this.item.icon]},this.ptm("icon",this.ptmOptions)),label:ie({class:this.cx("label")},this.ptm("label",this.ptmOptions))}}}},y$=["href","target","aria-current"];function v$(t,e,n,l,m,d){return d.visible()?(X(),pe("li",ie({key:0,class:[t.cx("item"),n.item.class]},t.ptm("item",d.ptmOptions)),[n.templates.item?(X(),bt(Tn(n.templates.item),{key:1,item:n.item,label:d.label(),props:d.getMenuItemProps},null,8,["item","label","props"])):(X(),pe("a",ie({key:0,href:n.item.url||"#",class:t.cx("itemLink"),target:n.item.target,"aria-current":d.isCurrentUrl(),onClick:e[0]||(e[0]=function(){return d.onClick&&d.onClick.apply(d,arguments)})},t.ptm("itemLink",d.ptmOptions)),[n.templates&&n.templates.itemicon?(X(),bt(Tn(n.templates.itemicon),{key:0,item:n.item,class:vn(t.cx("itemIcon",d.ptmOptions))},null,8,["item","class"])):n.item.icon?(X(),pe("span",ie({key:1,class:[t.cx("itemIcon"),n.item.icon]},t.ptm("itemIcon",d.ptmOptions)),null,16)):Ct("",!0),n.item.label?(X(),pe("span",ie({key:2,class:t.cx("itemLabel")},t.ptm("itemLabel",d.ptmOptions)),Ue(d.label()),17)):Ct("",!0)],16,y$))],16)):Ct("",!0)}JP.render=v$;var kS={name:"Breadcrumb",extends:g$,inheritAttrs:!1,components:{BreadcrumbItem:JP,ChevronRightIcon:ed}};function b$(t,e,n,l,m,d){var x=wn("BreadcrumbItem"),s=wn("ChevronRightIcon");return X(),pe("nav",ie({class:t.cx("root")},t.ptmi("root")),[M("ol",ie({class:t.cx("list")},t.ptm("list")),[t.home?(X(),bt(x,ie({key:0,item:t.home,class:t.cx("homeItem"),templates:t.$slots,pt:t.pt,unstyled:t.unstyled},t.ptm("homeItem")),null,16,["item","class","templates","pt","unstyled"])):Ct("",!0),(X(!0),pe(an,null,fr(t.model,function(T,E){return X(),pe(an,{key:T.label+"_"+E},[t.home||E!==0?(X(),pe("li",ie({key:0,class:t.cx("separator"),ref_for:!0},t.ptm("separator")),[jt(t.$slots,"separator",{},function(){return[ge(s,ie({"aria-hidden":"true",class:t.cx("separatorIcon"),ref_for:!0},t.ptm("separatorIcon")),null,16,["class"])]})],16)):Ct("",!0),ge(x,{item:T,index:E,templates:t.$slots,pt:t.pt,unstyled:t.unstyled},null,8,["item","index","templates","pt","unstyled"])],64)}),128))],16)],16)}kS.render=b$;function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}function Ol(t,e,n){return(e=_$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _$(t){var e=x$(t,"string");return Cy(e)=="symbol"?e:e+""}function x$(t,e){if(Cy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Cy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var w$=function(e){var n=e.dt;return`
.p-button {
    display: inline-flex;
    cursor: pointer;
    user-select: none;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    color: `.concat(n("button.primary.color"),`;
    background: `).concat(n("button.primary.background"),`;
    border: 1px solid `).concat(n("button.primary.border.color"),`;
    padding: `).concat(n("button.padding.y")," ").concat(n("button.padding.x"),`;
    font-size: 1rem;
    font-family: inherit;
    font-feature-settings: inherit;
    transition: background `).concat(n("button.transition.duration"),", color ").concat(n("button.transition.duration"),", border-color ").concat(n("button.transition.duration"),`,
            outline-color `).concat(n("button.transition.duration"),", box-shadow ").concat(n("button.transition.duration"),`;
    border-radius: `).concat(n("button.border.radius"),`;
    outline-color: transparent;
    gap: `).concat(n("button.gap"),`;
}

.p-button:disabled {
    cursor: default;
}

.p-button-icon-right {
    order: 1;
}

.p-button-icon-right:dir(rtl) {
    order: -1;
}

.p-button:not(.p-button-vertical) .p-button-icon:not(.p-button-icon-right):dir(rtl) {
    order: 1;
}

.p-button-icon-bottom {
    order: 2;
}

.p-button-icon-only {
    width: `).concat(n("button.icon.only.width"),`;
    padding-inline-start: 0;
    padding-inline-end: 0;
    gap: 0;
}

.p-button-icon-only.p-button-rounded {
    border-radius: 50%;
    height: `).concat(n("button.icon.only.width"),`;
}

.p-button-icon-only .p-button-label {
    visibility: hidden;
    width: 0;
}

.p-button-sm {
    font-size: `).concat(n("button.sm.font.size"),`;
    padding: `).concat(n("button.sm.padding.y")," ").concat(n("button.sm.padding.x"),`;
}

.p-button-sm .p-button-icon {
    font-size: `).concat(n("button.sm.font.size"),`;
}

.p-button-lg {
    font-size: `).concat(n("button.lg.font.size"),`;
    padding: `).concat(n("button.lg.padding.y")," ").concat(n("button.lg.padding.x"),`;
}

.p-button-lg .p-button-icon {
    font-size: `).concat(n("button.lg.font.size"),`;
}

.p-button-vertical {
    flex-direction: column;
}

.p-button-label {
    font-weight: `).concat(n("button.label.font.weight"),`;
}

.p-button-fluid {
    width: 100%;
}

.p-button-fluid.p-button-icon-only {
    width: `).concat(n("button.icon.only.width"),`;
}

.p-button:not(:disabled):hover {
    background: `).concat(n("button.primary.hover.background"),`;
    border: 1px solid `).concat(n("button.primary.hover.border.color"),`;
    color: `).concat(n("button.primary.hover.color"),`;
}

.p-button:not(:disabled):active {
    background: `).concat(n("button.primary.active.background"),`;
    border: 1px solid `).concat(n("button.primary.active.border.color"),`;
    color: `).concat(n("button.primary.active.color"),`;
}

.p-button:focus-visible {
    box-shadow: `).concat(n("button.primary.focus.ring.shadow"),`;
    outline: `).concat(n("button.focus.ring.width")," ").concat(n("button.focus.ring.style")," ").concat(n("button.primary.focus.ring.color"),`;
    outline-offset: `).concat(n("button.focus.ring.offset"),`;
}

.p-button .p-badge {
    min-width: `).concat(n("button.badge.size"),`;
    height: `).concat(n("button.badge.size"),`;
    line-height: `).concat(n("button.badge.size"),`;
}

.p-button-raised {
    box-shadow: `).concat(n("button.raised.shadow"),`;
}

.p-button-rounded {
    border-radius: `).concat(n("button.rounded.border.radius"),`;
}

.p-button-secondary {
    background: `).concat(n("button.secondary.background"),`;
    border: 1px solid `).concat(n("button.secondary.border.color"),`;
    color: `).concat(n("button.secondary.color"),`;
}

.p-button-secondary:not(:disabled):hover {
    background: `).concat(n("button.secondary.hover.background"),`;
    border: 1px solid `).concat(n("button.secondary.hover.border.color"),`;
    color: `).concat(n("button.secondary.hover.color"),`;
}

.p-button-secondary:not(:disabled):active {
    background: `).concat(n("button.secondary.active.background"),`;
    border: 1px solid `).concat(n("button.secondary.active.border.color"),`;
    color: `).concat(n("button.secondary.active.color"),`;
}

.p-button-secondary:focus-visible {
    outline-color: `).concat(n("button.secondary.focus.ring.color"),`;
    box-shadow: `).concat(n("button.secondary.focus.ring.shadow"),`;
}

.p-button-success {
    background: `).concat(n("button.success.background"),`;
    border: 1px solid `).concat(n("button.success.border.color"),`;
    color: `).concat(n("button.success.color"),`;
}

.p-button-success:not(:disabled):hover {
    background: `).concat(n("button.success.hover.background"),`;
    border: 1px solid `).concat(n("button.success.hover.border.color"),`;
    color: `).concat(n("button.success.hover.color"),`;
}

.p-button-success:not(:disabled):active {
    background: `).concat(n("button.success.active.background"),`;
    border: 1px solid `).concat(n("button.success.active.border.color"),`;
    color: `).concat(n("button.success.active.color"),`;
}

.p-button-success:focus-visible {
    outline-color: `).concat(n("button.success.focus.ring.color"),`;
    box-shadow: `).concat(n("button.success.focus.ring.shadow"),`;
}

.p-button-info {
    background: `).concat(n("button.info.background"),`;
    border: 1px solid `).concat(n("button.info.border.color"),`;
    color: `).concat(n("button.info.color"),`;
}

.p-button-info:not(:disabled):hover {
    background: `).concat(n("button.info.hover.background"),`;
    border: 1px solid `).concat(n("button.info.hover.border.color"),`;
    color: `).concat(n("button.info.hover.color"),`;
}

.p-button-info:not(:disabled):active {
    background: `).concat(n("button.info.active.background"),`;
    border: 1px solid `).concat(n("button.info.active.border.color"),`;
    color: `).concat(n("button.info.active.color"),`;
}

.p-button-info:focus-visible {
    outline-color: `).concat(n("button.info.focus.ring.color"),`;
    box-shadow: `).concat(n("button.info.focus.ring.shadow"),`;
}

.p-button-warn {
    background: `).concat(n("button.warn.background"),`;
    border: 1px solid `).concat(n("button.warn.border.color"),`;
    color: `).concat(n("button.warn.color"),`;
}

.p-button-warn:not(:disabled):hover {
    background: `).concat(n("button.warn.hover.background"),`;
    border: 1px solid `).concat(n("button.warn.hover.border.color"),`;
    color: `).concat(n("button.warn.hover.color"),`;
}

.p-button-warn:not(:disabled):active {
    background: `).concat(n("button.warn.active.background"),`;
    border: 1px solid `).concat(n("button.warn.active.border.color"),`;
    color: `).concat(n("button.warn.active.color"),`;
}

.p-button-warn:focus-visible {
    outline-color: `).concat(n("button.warn.focus.ring.color"),`;
    box-shadow: `).concat(n("button.warn.focus.ring.shadow"),`;
}

.p-button-help {
    background: `).concat(n("button.help.background"),`;
    border: 1px solid `).concat(n("button.help.border.color"),`;
    color: `).concat(n("button.help.color"),`;
}

.p-button-help:not(:disabled):hover {
    background: `).concat(n("button.help.hover.background"),`;
    border: 1px solid `).concat(n("button.help.hover.border.color"),`;
    color: `).concat(n("button.help.hover.color"),`;
}

.p-button-help:not(:disabled):active {
    background: `).concat(n("button.help.active.background"),`;
    border: 1px solid `).concat(n("button.help.active.border.color"),`;
    color: `).concat(n("button.help.active.color"),`;
}

.p-button-help:focus-visible {
    outline-color: `).concat(n("button.help.focus.ring.color"),`;
    box-shadow: `).concat(n("button.help.focus.ring.shadow"),`;
}

.p-button-danger {
    background: `).concat(n("button.danger.background"),`;
    border: 1px solid `).concat(n("button.danger.border.color"),`;
    color: `).concat(n("button.danger.color"),`;
}

.p-button-danger:not(:disabled):hover {
    background: `).concat(n("button.danger.hover.background"),`;
    border: 1px solid `).concat(n("button.danger.hover.border.color"),`;
    color: `).concat(n("button.danger.hover.color"),`;
}

.p-button-danger:not(:disabled):active {
    background: `).concat(n("button.danger.active.background"),`;
    border: 1px solid `).concat(n("button.danger.active.border.color"),`;
    color: `).concat(n("button.danger.active.color"),`;
}

.p-button-danger:focus-visible {
    outline-color: `).concat(n("button.danger.focus.ring.color"),`;
    box-shadow: `).concat(n("button.danger.focus.ring.shadow"),`;
}

.p-button-contrast {
    background: `).concat(n("button.contrast.background"),`;
    border: 1px solid `).concat(n("button.contrast.border.color"),`;
    color: `).concat(n("button.contrast.color"),`;
}

.p-button-contrast:not(:disabled):hover {
    background: `).concat(n("button.contrast.hover.background"),`;
    border: 1px solid `).concat(n("button.contrast.hover.border.color"),`;
    color: `).concat(n("button.contrast.hover.color"),`;
}

.p-button-contrast:not(:disabled):active {
    background: `).concat(n("button.contrast.active.background"),`;
    border: 1px solid `).concat(n("button.contrast.active.border.color"),`;
    color: `).concat(n("button.contrast.active.color"),`;
}

.p-button-contrast:focus-visible {
    outline-color: `).concat(n("button.contrast.focus.ring.color"),`;
    box-shadow: `).concat(n("button.contrast.focus.ring.shadow"),`;
}

.p-button-outlined {
    background: transparent;
    border-color: `).concat(n("button.outlined.primary.border.color"),`;
    color: `).concat(n("button.outlined.primary.color"),`;
}

.p-button-outlined:not(:disabled):hover {
    background: `).concat(n("button.outlined.primary.hover.background"),`;
    border-color: `).concat(n("button.outlined.primary.border.color"),`;
    color: `).concat(n("button.outlined.primary.color"),`;
}

.p-button-outlined:not(:disabled):active {
    background: `).concat(n("button.outlined.primary.active.background"),`;
    border-color: `).concat(n("button.outlined.primary.border.color"),`;
    color: `).concat(n("button.outlined.primary.color"),`;
}

.p-button-outlined.p-button-secondary {
    border-color: `).concat(n("button.outlined.secondary.border.color"),`;
    color: `).concat(n("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-secondary:not(:disabled):hover {
    background: `).concat(n("button.outlined.secondary.hover.background"),`;
    border-color: `).concat(n("button.outlined.secondary.border.color"),`;
    color: `).concat(n("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-secondary:not(:disabled):active {
    background: `).concat(n("button.outlined.secondary.active.background"),`;
    border-color: `).concat(n("button.outlined.secondary.border.color"),`;
    color: `).concat(n("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-success {
    border-color: `).concat(n("button.outlined.success.border.color"),`;
    color: `).concat(n("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-success:not(:disabled):hover {
    background: `).concat(n("button.outlined.success.hover.background"),`;
    border-color: `).concat(n("button.outlined.success.border.color"),`;
    color: `).concat(n("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-success:not(:disabled):active {
    background: `).concat(n("button.outlined.success.active.background"),`;
    border-color: `).concat(n("button.outlined.success.border.color"),`;
    color: `).concat(n("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-info {
    border-color: `).concat(n("button.outlined.info.border.color"),`;
    color: `).concat(n("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-info:not(:disabled):hover {
    background: `).concat(n("button.outlined.info.hover.background"),`;
    border-color: `).concat(n("button.outlined.info.border.color"),`;
    color: `).concat(n("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-info:not(:disabled):active {
    background: `).concat(n("button.outlined.info.active.background"),`;
    border-color: `).concat(n("button.outlined.info.border.color"),`;
    color: `).concat(n("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-warn {
    border-color: `).concat(n("button.outlined.warn.border.color"),`;
    color: `).concat(n("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-warn:not(:disabled):hover {
    background: `).concat(n("button.outlined.warn.hover.background"),`;
    border-color: `).concat(n("button.outlined.warn.border.color"),`;
    color: `).concat(n("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-warn:not(:disabled):active {
    background: `).concat(n("button.outlined.warn.active.background"),`;
    border-color: `).concat(n("button.outlined.warn.border.color"),`;
    color: `).concat(n("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-help {
    border-color: `).concat(n("button.outlined.help.border.color"),`;
    color: `).concat(n("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-help:not(:disabled):hover {
    background: `).concat(n("button.outlined.help.hover.background"),`;
    border-color: `).concat(n("button.outlined.help.border.color"),`;
    color: `).concat(n("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-help:not(:disabled):active {
    background: `).concat(n("button.outlined.help.active.background"),`;
    border-color: `).concat(n("button.outlined.help.border.color"),`;
    color: `).concat(n("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-danger {
    border-color: `).concat(n("button.outlined.danger.border.color"),`;
    color: `).concat(n("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-danger:not(:disabled):hover {
    background: `).concat(n("button.outlined.danger.hover.background"),`;
    border-color: `).concat(n("button.outlined.danger.border.color"),`;
    color: `).concat(n("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-danger:not(:disabled):active {
    background: `).concat(n("button.outlined.danger.active.background"),`;
    border-color: `).concat(n("button.outlined.danger.border.color"),`;
    color: `).concat(n("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-contrast {
    border-color: `).concat(n("button.outlined.contrast.border.color"),`;
    color: `).concat(n("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-contrast:not(:disabled):hover {
    background: `).concat(n("button.outlined.contrast.hover.background"),`;
    border-color: `).concat(n("button.outlined.contrast.border.color"),`;
    color: `).concat(n("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-contrast:not(:disabled):active {
    background: `).concat(n("button.outlined.contrast.active.background"),`;
    border-color: `).concat(n("button.outlined.contrast.border.color"),`;
    color: `).concat(n("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-plain {
    border-color: `).concat(n("button.outlined.plain.border.color"),`;
    color: `).concat(n("button.outlined.plain.color"),`;
}

.p-button-outlined.p-button-plain:not(:disabled):hover {
    background: `).concat(n("button.outlined.plain.hover.background"),`;
    border-color: `).concat(n("button.outlined.plain.border.color"),`;
    color: `).concat(n("button.outlined.plain.color"),`;
}

.p-button-outlined.p-button-plain:not(:disabled):active {
    background: `).concat(n("button.outlined.plain.active.background"),`;
    border-color: `).concat(n("button.outlined.plain.border.color"),`;
    color: `).concat(n("button.outlined.plain.color"),`;
}

.p-button-text {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.primary.color"),`;
}

.p-button-text:not(:disabled):hover {
    background: `).concat(n("button.text.primary.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.primary.color"),`;
}

.p-button-text:not(:disabled):active {
    background: `).concat(n("button.text.primary.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.primary.color"),`;
}

.p-button-text.p-button-secondary {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.secondary.color"),`;
}

.p-button-text.p-button-secondary:not(:disabled):hover {
    background: `).concat(n("button.text.secondary.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.secondary.color"),`;
}

.p-button-text.p-button-secondary:not(:disabled):active {
    background: `).concat(n("button.text.secondary.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.secondary.color"),`;
}

.p-button-text.p-button-success {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.success.color"),`;
}

.p-button-text.p-button-success:not(:disabled):hover {
    background: `).concat(n("button.text.success.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.success.color"),`;
}

.p-button-text.p-button-success:not(:disabled):active {
    background: `).concat(n("button.text.success.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.success.color"),`;
}

.p-button-text.p-button-info {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.info.color"),`;
}

.p-button-text.p-button-info:not(:disabled):hover {
    background: `).concat(n("button.text.info.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.info.color"),`;
}

.p-button-text.p-button-info:not(:disabled):active {
    background: `).concat(n("button.text.info.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.info.color"),`;
}

.p-button-text.p-button-warn {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.warn.color"),`;
}

.p-button-text.p-button-warn:not(:disabled):hover {
    background: `).concat(n("button.text.warn.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.warn.color"),`;
}

.p-button-text.p-button-warn:not(:disabled):active {
    background: `).concat(n("button.text.warn.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.warn.color"),`;
}

.p-button-text.p-button-help {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.help.color"),`;
}

.p-button-text.p-button-help:not(:disabled):hover {
    background: `).concat(n("button.text.help.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.help.color"),`;
}

.p-button-text.p-button-help:not(:disabled):active {
    background: `).concat(n("button.text.help.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.help.color"),`;
}

.p-button-text.p-button-danger {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.danger.color"),`;
}

.p-button-text.p-button-danger:not(:disabled):hover {
    background: `).concat(n("button.text.danger.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.danger.color"),`;
}

.p-button-text.p-button-danger:not(:disabled):active {
    background: `).concat(n("button.text.danger.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.danger.color"),`;
}

.p-button-text.p-button-contrast {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.contrast.color"),`;
}

.p-button-text.p-button-contrast:not(:disabled):hover {
    background: `).concat(n("button.text.contrast.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.contrast.color"),`;
}

.p-button-text.p-button-contrast:not(:disabled):active {
    background: `).concat(n("button.text.contrast.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.contrast.color"),`;
}

.p-button-text.p-button-plain {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.plain.color"),`;
}

.p-button-text.p-button-plain:not(:disabled):hover {
    background: `).concat(n("button.text.plain.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.plain.color"),`;
}

.p-button-text.p-button-plain:not(:disabled):active {
    background: `).concat(n("button.text.plain.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.plain.color"),`;
}

.p-button-link {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.link.color"),`;
}

.p-button-link:not(:disabled):hover {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.link.hover.color"),`;
}

.p-button-link:not(:disabled):hover .p-button-label {
    text-decoration: underline;
}

.p-button-link:not(:disabled):active {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.link.active.color"),`;
}
`)},S$={root:function(e){var n=e.instance,l=e.props;return["p-button p-component",Ol(Ol(Ol(Ol(Ol(Ol(Ol(Ol(Ol({"p-button-icon-only":n.hasIcon&&!l.label&&!l.badge,"p-button-vertical":(l.iconPos==="top"||l.iconPos==="bottom")&&l.label,"p-button-loading":l.loading,"p-button-link":l.link||l.variant==="link"},"p-button-".concat(l.severity),l.severity),"p-button-raised",l.raised),"p-button-rounded",l.rounded),"p-button-text",l.text||l.variant==="text"),"p-button-outlined",l.outlined||l.variant==="outlined"),"p-button-sm",l.size==="small"),"p-button-lg",l.size==="large"),"p-button-plain",l.plain),"p-button-fluid",n.hasFluid)]},loadingIcon:"p-button-loading-icon",icon:function(e){var n=e.props;return["p-button-icon",Ol({},"p-button-icon-".concat(n.iconPos),n.label)]},label:"p-button-label"},C$=Xn.extend({name:"button",theme:w$,classes:S$}),k$={name:"BaseButton",extends:mr,props:{label:{type:String,default:null},icon:{type:String,default:null},iconPos:{type:String,default:"left"},iconClass:{type:[String,Object],default:null},badge:{type:String,default:null},badgeClass:{type:[String,Object],default:null},badgeSeverity:{type:String,default:"secondary"},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:void 0},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1},link:{type:Boolean,default:!1},severity:{type:String,default:null},raised:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},text:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},size:{type:String,default:null},variant:{type:String,default:null},plain:{type:Boolean,default:!1},fluid:{type:Boolean,default:null}},style:C$,provide:function(){return{$pcButton:this,$parentInstance:this}}},jr={name:"Button",extends:k$,inheritAttrs:!1,inject:{$pcFluid:{default:null}},methods:{getPTOptions:function(e){var n=e==="root"?this.ptmi:this.ptm;return n(e,{context:{disabled:this.disabled}})}},computed:{disabled:function(){return this.$attrs.disabled||this.$attrs.disabled===""||this.loading},defaultAriaLabel:function(){return this.label?this.label+(this.badge?" "+this.badge:""):this.$attrs.ariaLabel},hasIcon:function(){return this.icon||this.$slots.icon},attrs:function(){return ie(this.asAttrs,this.a11yAttrs,this.getPTOptions("root"))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{"aria-label":this.defaultAriaLabel,"data-pc-name":"button","data-p-disabled":this.disabled,"data-p-severity":this.severity}},hasFluid:function(){return ha(this.fluid)?!!this.$pcFluid:this.fluid}},components:{SpinnerIcon:s0,Badge:Af},directives:{ripple:zs}};function T$(t,e,n,l,m,d){var x=wn("SpinnerIcon"),s=wn("Badge"),T=No("ripple");return t.asChild?jt(t.$slots,"default",{key:1,class:vn(t.cx("root")),a11yAttrs:d.a11yAttrs}):_r((X(),bt(Tn(t.as),ie({key:0,class:t.cx("root")},d.attrs),{default:Xe(function(){return[jt(t.$slots,"default",{},function(){return[t.loading?jt(t.$slots,"loadingicon",ie({key:0,class:[t.cx("loadingIcon"),t.cx("icon")]},t.ptm("loadingIcon")),function(){return[t.loadingIcon?(X(),pe("span",ie({key:0,class:[t.cx("loadingIcon"),t.cx("icon"),t.loadingIcon]},t.ptm("loadingIcon")),null,16)):(X(),bt(x,ie({key:1,class:[t.cx("loadingIcon"),t.cx("icon")],spin:""},t.ptm("loadingIcon")),null,16,["class"]))]}):jt(t.$slots,"icon",ie({key:1,class:[t.cx("icon")]},t.ptm("icon")),function(){return[t.icon?(X(),pe("span",ie({key:0,class:[t.cx("icon"),t.icon,t.iconClass]},t.ptm("icon")),null,16)):Ct("",!0)]}),M("span",ie({class:t.cx("label")},t.ptm("label")),Ue(t.label||""),17),t.badge?(X(),bt(s,{key:2,value:t.badge,class:vn(t.badgeClass),severity:t.badgeSeverity,unstyled:t.unstyled,pt:t.ptm("pcBadge")},null,8,["value","class","severity","unstyled","pt"])):Ct("",!0)]})]}),_:3},16,["class"])),[[T]])}jr.render=T$;var QP={name:"CalendarIcon",extends:Qr};function E$(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M10.7838 1.51351H9.83783V0.567568C9.83783 0.417039 9.77804 0.272676 9.6716 0.166237C9.56516 0.0597971 9.42079 0 9.27027 0C9.11974 0 8.97538 0.0597971 8.86894 0.166237C8.7625 0.272676 8.7027 0.417039 8.7027 0.567568V1.51351H5.29729V0.567568C5.29729 0.417039 5.2375 0.272676 5.13106 0.166237C5.02462 0.0597971 4.88025 0 4.72973 0C4.5792 0 4.43484 0.0597971 4.3284 0.166237C4.22196 0.272676 4.16216 0.417039 4.16216 0.567568V1.51351H3.21621C2.66428 1.51351 2.13494 1.73277 1.74467 2.12305C1.35439 2.51333 1.13513 3.04266 1.13513 3.59459V11.9189C1.13513 12.4709 1.35439 13.0002 1.74467 13.3905C2.13494 13.7807 2.66428 14 3.21621 14H10.7838C11.3357 14 11.865 13.7807 12.2553 13.3905C12.6456 13.0002 12.8649 12.4709 12.8649 11.9189V3.59459C12.8649 3.04266 12.6456 2.51333 12.2553 2.12305C11.865 1.73277 11.3357 1.51351 10.7838 1.51351ZM3.21621 2.64865H4.16216V3.59459C4.16216 3.74512 4.22196 3.88949 4.3284 3.99593C4.43484 4.10237 4.5792 4.16216 4.72973 4.16216C4.88025 4.16216 5.02462 4.10237 5.13106 3.99593C5.2375 3.88949 5.29729 3.74512 5.29729 3.59459V2.64865H8.7027V3.59459C8.7027 3.74512 8.7625 3.88949 8.86894 3.99593C8.97538 4.10237 9.11974 4.16216 9.27027 4.16216C9.42079 4.16216 9.56516 4.10237 9.6716 3.99593C9.77804 3.88949 9.83783 3.74512 9.83783 3.59459V2.64865H10.7838C11.0347 2.64865 11.2753 2.74831 11.4527 2.92571C11.6301 3.10311 11.7297 3.34371 11.7297 3.59459V5.67568H2.27027V3.59459C2.27027 3.34371 2.36993 3.10311 2.54733 2.92571C2.72473 2.74831 2.96533 2.64865 3.21621 2.64865ZM10.7838 12.8649H3.21621C2.96533 12.8649 2.72473 12.7652 2.54733 12.5878C2.36993 12.4104 2.27027 12.1698 2.27027 11.9189V6.81081H11.7297V11.9189C11.7297 12.1698 11.6301 12.4104 11.4527 12.5878C11.2753 12.7652 11.0347 12.8649 10.7838 12.8649Z",fill:"currentColor"},null,-1)]),16)}QP.render=E$;var $_={name:"ChevronLeftIcon",extends:Qr};function I$(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z",fill:"currentColor"},null,-1)]),16)}$_.render=I$;var P$=function(e){var n=e.dt;return`
.p-datepicker {
    display: inline-flex;
    max-width: 100%;
}

.p-datepicker-input {
    flex: 1 1 auto;
    width: 1%;
}

.p-datepicker:has(.p-datepicker-dropdown) .p-datepicker-input {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
}

.p-datepicker-dropdown {
    cursor: pointer;
    display: inline-flex;
    user-select: none;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    width: `.concat(n("datepicker.dropdown.width"),`;
    border-start-end-radius: `).concat(n("datepicker.dropdown.border.radius"),`;
    border-end-end-radius: `).concat(n("datepicker.dropdown.border.radius"),`;
    background: `).concat(n("datepicker.dropdown.background"),`;
    border: 1px solid `).concat(n("datepicker.dropdown.border.color"),`;
    border-inline-start: 0 none;
    color: `).concat(n("datepicker.dropdown.color"),`;
    transition: background `).concat(n("datepicker.transition.duration"),", color ").concat(n("datepicker.transition.duration"),", border-color ").concat(n("datepicker.transition.duration"),", outline-color ").concat(n("datepicker.transition.duration"),`;
    outline-color: transparent;
}

.p-datepicker-dropdown:not(:disabled):hover {
    background: `).concat(n("datepicker.dropdown.hover.background"),`;
    border-color: `).concat(n("datepicker.dropdown.hover.border.color"),`;
    color: `).concat(n("datepicker.dropdown.hover.color"),`;
}

.p-datepicker-dropdown:not(:disabled):active {
    background: `).concat(n("datepicker.dropdown.active.background"),`;
    border-color: `).concat(n("datepicker.dropdown.active.border.color"),`;
    color: `).concat(n("datepicker.dropdown.active.color"),`;
}

.p-datepicker-dropdown:focus-visible {
    box-shadow: `).concat(n("datepicker.dropdown.focus.ring.shadow"),`;
    outline: `).concat(n("datepicker.dropdown.focus.ring.width")," ").concat(n("datepicker.dropdown.focus.ring.style")," ").concat(n("datepicker.dropdown.focus.ring.color"),`;
    outline-offset: `).concat(n("datepicker.dropdown.focus.ring.offset"),`;
}

.p-datepicker:has(.p-datepicker-input-icon-container) {
    position: relative;
}

.p-datepicker:has(.p-datepicker-input-icon-container) .p-datepicker-input {
    padding-inline-end: calc((`).concat(n("form.field.padding.x")," * 2) + ").concat(n("icon.size"),`);
}

.p-datepicker-input-icon-container {
    cursor: pointer;
    position: absolute;
    top: 50%;
    inset-inline-end: `).concat(n("form.field.padding.x"),`;
    margin-block-start: calc(-1 * (`).concat(n("icon.size"),` / 2));
    color: `).concat(n("datepicker.input.icon.color"),`;
    line-height: 1;
}

.p-datepicker-fluid {
    display: flex;
}

.p-datepicker-fluid .p-datepicker-input {
    width: 1%;
}

.p-datepicker .p-datepicker-panel {
    min-width: 100%;
}

.p-datepicker-panel {
    width: auto;
    padding: `).concat(n("datepicker.panel.padding"),`;
    background: `).concat(n("datepicker.panel.background"),`;
    color: `).concat(n("datepicker.panel.color"),`;
    border: 1px solid `).concat(n("datepicker.panel.border.color"),`;
    border-radius: `).concat(n("datepicker.panel.border.radius"),`;
    box-shadow: `).concat(n("datepicker.panel.shadow"),`;
}

.p-datepicker-panel-inline {
    display: inline-block;
    overflow-x: auto;
    box-shadow: none;
}

.p-datepicker-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: `).concat(n("datepicker.header.padding"),`;
    background: `).concat(n("datepicker.header.background"),`;
    color: `).concat(n("datepicker.header.color"),`;
    border-block-end: 1px solid `).concat(n("datepicker.header.border.color"),`;
}

.p-datepicker-next-button:dir(rtl) {
    order: -1;
}

.p-datepicker-prev-button:dir(rtl) {
    order: 1;
}

.p-datepicker-title {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: `).concat(n("datepicker.title.gap"),`;
    font-weight: `).concat(n("datepicker.title.font.weight"),`;
}

.p-datepicker-select-year,
.p-datepicker-select-month {
    border: none;
    background: transparent;
    margin: 0;
    cursor: pointer;
    font-weight: inherit;
    transition: background `).concat(n("datepicker.transition.duration"),", color ").concat(n("datepicker.transition.duration"),", border-color ").concat(n("datepicker.transition.duration"),", outline-color ").concat(n("datepicker.transition.duration"),", box-shadow ").concat(n("datepicker.transition.duration"),`;
}

.p-datepicker-select-month {
    padding: `).concat(n("datepicker.select.month.padding"),`;
    color: `).concat(n("datepicker.select.month.color"),`;
    border-radius: `).concat(n("datepicker.select.month.border.radius"),`;
}

.p-datepicker-select-year {
    padding: `).concat(n("datepicker.select.year.padding"),`;
    color: `).concat(n("datepicker.select.year.color"),`;
    border-radius: `).concat(n("datepicker.select.year.border.radius"),`;
}

.p-datepicker-select-month:enabled:hover {
    background: `).concat(n("datepicker.select.month.hover.background"),`;
    color: `).concat(n("datepicker.select.month.hover.color"),`;
}

.p-datepicker-select-year:enabled:hover {
    background: `).concat(n("datepicker.select.year.hover.background"),`;
    color: `).concat(n("datepicker.select.year.hover.color"),`;
}

.p-datepicker-select-month:focus-visible,
.p-datepicker-select-year:focus-visible {
    box-shadow: `).concat(n("datepicker.date.focus.ring.shadow"),`;
    outline: `).concat(n("datepicker.date.focus.ring.width")," ").concat(n("datepicker.date.focus.ring.style")," ").concat(n("datepicker.date.focus.ring.color"),`;
    outline-offset: `).concat(n("datepicker.date.focus.ring.offset"),`;
}

.p-datepicker-calendar-container {
    display: flex;
}

.p-datepicker-calendar-container .p-datepicker-calendar {
    flex: 1 1 auto;
    border-inline-start: 1px solid `).concat(n("datepicker.group.border.color"),`;
    padding-inline-end: `).concat(n("datepicker.group.gap"),`;
    padding-inline-start: `).concat(n("datepicker.group.gap"),`;
}

.p-datepicker-calendar-container .p-datepicker-calendar:first-child {
    padding-inline-start: 0;
    border-inline-start: 0 none;
}

.p-datepicker-calendar-container .p-datepicker-calendar:last-child {
    padding-inline-end: 0;
}

.p-datepicker-day-view {
    width: 100%;
    border-collapse: collapse;
    font-size: 1rem;
    margin: `).concat(n("datepicker.day.view.margin"),`;
}

.p-datepicker-weekday-cell {
    padding: `).concat(n("datepicker.week.day.padding"),`;
}

.p-datepicker-weekday {
    font-weight: `).concat(n("datepicker.week.day.font.weight"),`;
    color: `).concat(n("datepicker.week.day.color"),`;
}

.p-datepicker-day-cell {
    padding: `).concat(n("datepicker.date.padding"),`;
}

.p-datepicker-day {
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    margin: 0 auto;
    overflow: hidden;
    position: relative;
    width: `).concat(n("datepicker.date.width"),`;
    height: `).concat(n("datepicker.date.height"),`;
    border-radius: `).concat(n("datepicker.date.border.radius"),`;
    transition: background `).concat(n("datepicker.transition.duration"),", color ").concat(n("datepicker.transition.duration"),", border-color ").concat(n("datepicker.transition.duration"),", box-shadow ").concat(n("datepicker.transition.duration"),", outline-color ").concat(n("datepicker.transition.duration"),`;
    border: 1px solid transparent;
    outline-color: transparent;
    color: `).concat(n("datepicker.date.color"),`;
}

.p-datepicker-day:not(.p-datepicker-day-selected):not(.p-disabled):hover {
    background: `).concat(n("datepicker.date.hover.background"),`;
    color: `).concat(n("datepicker.date.hover.color"),`;
}

.p-datepicker-day:focus-visible {
    box-shadow: `).concat(n("datepicker.date.focus.ring.shadow"),`;
    outline: `).concat(n("datepicker.date.focus.ring.width")," ").concat(n("datepicker.date.focus.ring.style")," ").concat(n("datepicker.date.focus.ring.color"),`;
    outline-offset: `).concat(n("datepicker.date.focus.ring.offset"),`;
}

.p-datepicker-day-selected {
    background: `).concat(n("datepicker.date.selected.background"),`;
    color: `).concat(n("datepicker.date.selected.color"),`;
}

.p-datepicker-day-selected-range {
    background: `).concat(n("datepicker.date.range.selected.background"),`;
    color: `).concat(n("datepicker.date.range.selected.color"),`;
}

.p-datepicker-today > .p-datepicker-day {
    background: `).concat(n("datepicker.today.background"),`;
    color: `).concat(n("datepicker.today.color"),`;
}

.p-datepicker-today > .p-datepicker-day-selected {
    background: `).concat(n("datepicker.date.selected.background"),`;
    color: `).concat(n("datepicker.date.selected.color"),`;
}

.p-datepicker-today > .p-datepicker-day-selected-range {
    background: `).concat(n("datepicker.date.range.selected.background"),`;
    color: `).concat(n("datepicker.date.range.selected.color"),`;
}

.p-datepicker-weeknumber {
    text-align: center;
}

.p-datepicker-month-view {
    margin: `).concat(n("datepicker.month.view.margin"),`;
}

.p-datepicker-month {
    width: 33.3%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    overflow: hidden;
    position: relative;
    padding: `).concat(n("datepicker.month.padding"),`;
    transition: background `).concat(n("datepicker.transition.duration"),", color ").concat(n("datepicker.transition.duration"),", border-color ").concat(n("datepicker.transition.duration"),", box-shadow ").concat(n("datepicker.transition.duration"),", outline-color ").concat(n("datepicker.transition.duration"),`;
    border-radius: `).concat(n("datepicker.month.border.radius"),`;
    outline-color: transparent;
    color: `).concat(n("datepicker.date.color"),`;
}

.p-datepicker-month:not(.p-disabled):not(.p-datepicker-month-selected):hover {
    color: `).concat(n("datepicker.date.hover.color"),`;
    background: `).concat(n("datepicker.date.hover.background"),`;
}

.p-datepicker-month-selected {
    color: `).concat(n("datepicker.date.selected.color"),`;
    background: `).concat(n("datepicker.date.selected.background"),`;
}

.p-datepicker-month:not(.p-disabled):focus-visible {
    box-shadow: `).concat(n("datepicker.date.focus.ring.shadow"),`;
    outline: `).concat(n("datepicker.date.focus.ring.width")," ").concat(n("datepicker.date.focus.ring.style")," ").concat(n("datepicker.date.focus.ring.color"),`;
    outline-offset: `).concat(n("datepicker.date.focus.ring.offset"),`;
}

.p-datepicker-year-view {
    margin: `).concat(n("datepicker.year.view.margin"),`;
}

.p-datepicker-year {
    width: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    overflow: hidden;
    position: relative;
    padding: `).concat(n("datepicker.year.padding"),`;
    transition: background `).concat(n("datepicker.transition.duration"),", color ").concat(n("datepicker.transition.duration"),", border-color ").concat(n("datepicker.transition.duration"),", box-shadow ").concat(n("datepicker.transition.duration"),", outline-color ").concat(n("datepicker.transition.duration"),`;
    border-radius: `).concat(n("datepicker.year.border.radius"),`;
    outline-color: transparent;
    color: `).concat(n("datepicker.date.color"),`;
}

.p-datepicker-year:not(.p-disabled):not(.p-datepicker-year-selected):hover {
    color: `).concat(n("datepicker.date.hover.color"),`;
    background: `).concat(n("datepicker.date.hover.background"),`;
}

.p-datepicker-year-selected {
    color: `).concat(n("datepicker.date.selected.color"),`;
    background: `).concat(n("datepicker.date.selected.background"),`;
}

.p-datepicker-year:not(.p-disabled):focus-visible {
    box-shadow: `).concat(n("datepicker.date.focus.ring.shadow"),`;
    outline: `).concat(n("datepicker.date.focus.ring.width")," ").concat(n("datepicker.date.focus.ring.style")," ").concat(n("datepicker.date.focus.ring.color"),`;
    outline-offset: `).concat(n("datepicker.date.focus.ring.offset"),`;
}

.p-datepicker-buttonbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: `).concat(n("datepicker.buttonbar.padding"),`;
    border-block-start: 1px solid `).concat(n("datepicker.buttonbar.border.color"),`;
}

.p-datepicker-buttonbar .p-button {
    width: auto;
}

.p-datepicker-time-picker {
    display: flex;
    justify-content: center;
    align-items: center;
    border-block-start: 1px solid `).concat(n("datepicker.time.picker.border.color"),`;
    padding: 0;
    gap: `).concat(n("datepicker.time.picker.gap"),`;
}

.p-datepicker-calendar-container + .p-datepicker-time-picker {
    padding: `).concat(n("datepicker.time.picker.padding"),`;
}

.p-datepicker-time-picker > div {
    display: flex;
    align-items: center;
    flex-direction: column;
    gap: `).concat(n("datepicker.time.picker.button.gap"),`;
}

.p-datepicker-time-picker span {
    font-size: 1rem;
}

.p-datepicker-timeonly .p-datepicker-time-picker {
    border-block-start: 0 none;
}

.p-datepicker:has(.p-inputtext-sm) .p-datepicker-dropdown {
    width: `).concat(n("datepicker.dropdown.sm.width"),`;
}

.p-datepicker:has(.p-inputtext-sm) .p-datepicker-dropdown .p-icon,
.p-datepicker:has(.p-inputtext-sm) .p-datepicker-input-icon {
    font-size: `).concat(n("form.field.sm.font.size"),`;
    width: `).concat(n("form.field.sm.font.size"),`;
    height: `).concat(n("form.field.sm.font.size"),`;
}

.p-datepicker:has(.p-inputtext-lg) .p-datepicker-dropdown {
    width: `).concat(n("datepicker.dropdown.lg.width"),`;
}

.p-datepicker:has(.p-inputtext-lg) .p-datepicker-dropdown .p-icon,
.p-datepicker:has(.p-inputtext-lg) .p-datepicker-input-icon {
    font-size: `).concat(n("form.field.lg.font.size"),`;
    width: `).concat(n("form.field.lg.font.size"),`;
    height: `).concat(n("form.field.lg.font.size"),`;
}
`)},A$={root:function(e){var n=e.props;return{position:n.appendTo==="self"?"relative":void 0}}},R$={root:function(e){var n=e.instance,l=e.state;return["p-datepicker p-component p-inputwrapper",{"p-invalid":n.$invalid,"p-inputwrapper-filled":n.$filled,"p-inputwrapper-focus":l.focused||l.overlayVisible,"p-focus":l.focused||l.overlayVisible,"p-datepicker-fluid":n.$fluid}]},pcInputText:"p-datepicker-input",dropdown:"p-datepicker-dropdown",inputIconContainer:"p-datepicker-input-icon-container",inputIcon:"p-datepicker-input-icon",panel:function(e){var n=e.props;return["p-datepicker-panel p-component",{"p-datepicker-panel-inline":n.inline,"p-disabled":n.disabled,"p-datepicker-timeonly":n.timeOnly}]},calendarContainer:"p-datepicker-calendar-container",calendar:"p-datepicker-calendar",header:"p-datepicker-header",pcPrevButton:"p-datepicker-prev-button",title:"p-datepicker-title",selectMonth:"p-datepicker-select-month",selectYear:"p-datepicker-select-year",decade:"p-datepicker-decade",pcNextButton:"p-datepicker-next-button",dayView:"p-datepicker-day-view",weekHeader:"p-datepicker-weekheader p-disabled",weekNumber:"p-datepicker-weeknumber",weekLabelContainer:"p-datepicker-weeklabel-container p-disabled",weekDayCell:"p-datepicker-weekday-cell",weekDay:"p-datepicker-weekday",dayCell:function(e){var n=e.date;return["p-datepicker-day-cell",{"p-datepicker-other-month":n.otherMonth,"p-datepicker-today":n.today}]},day:function(e){var n=e.instance,l=e.props,m=e.date,d="";return n.isRangeSelection()&&n.isSelected(m)&&m.selectable&&(d=n.isDateEquals(l.modelValue[0],m)||n.isDateEquals(l.modelValue[1],m)?"p-datepicker-day-selected":"p-datepicker-day-selected-range"),["p-datepicker-day",{"p-datepicker-day-selected":!n.isRangeSelection()&&n.isSelected(m)&&m.selectable,"p-disabled":l.disabled||!m.selectable},d]},monthView:"p-datepicker-month-view",month:function(e){var n=e.instance,l=e.props,m=e.month,d=e.index;return["p-datepicker-month",{"p-datepicker-month-selected":n.isMonthSelected(d),"p-disabled":l.disabled||!m.selectable}]},yearView:"p-datepicker-year-view",year:function(e){var n=e.instance,l=e.props,m=e.year;return["p-datepicker-year",{"p-datepicker-year-selected":n.isYearSelected(m.value),"p-disabled":l.disabled||!m.selectable}]},timePicker:"p-datepicker-time-picker",hourPicker:"p-datepicker-hour-picker",pcIncrementButton:"p-datepicker-increment-button",pcDecrementButton:"p-datepicker-decrement-button",separator:"p-datepicker-separator",minutePicker:"p-datepicker-minute-picker",secondPicker:"p-datepicker-second-picker",ampmPicker:"p-datepicker-ampm-picker",buttonbar:"p-datepicker-buttonbar",pcTodayButton:"p-datepicker-today-button",pcClearButton:"p-datepicker-clear-button"},M$=Xn.extend({name:"datepicker",theme:P$,classes:R$,inlineStyles:A$}),D$={name:"BaseDatePicker",extends:Ah,props:{selectionMode:{type:String,default:"single"},dateFormat:{type:String,default:null},inline:{type:Boolean,default:!1},showOtherMonths:{type:Boolean,default:!0},selectOtherMonths:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},iconDisplay:{type:String,default:"button"},icon:{type:String,default:void 0},prevIcon:{type:String,default:void 0},nextIcon:{type:String,default:void 0},incrementIcon:{type:String,default:void 0},decrementIcon:{type:String,default:void 0},numberOfMonths:{type:Number,default:1},responsiveOptions:Array,breakpoint:{type:String,default:"769px"},view:{type:String,default:"date"},minDate:{type:Date,value:null},maxDate:{type:Date,value:null},disabledDates:{type:Array,value:null},disabledDays:{type:Array,value:null},maxDateCount:{type:Number,value:null},showOnFocus:{type:Boolean,default:!0},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},showButtonBar:{type:Boolean,default:!1},shortYearCutoff:{type:String,default:"+10"},showTime:{type:Boolean,default:!1},timeOnly:{type:Boolean,default:!1},hourFormat:{type:String,default:"24"},stepHour:{type:Number,default:1},stepMinute:{type:Number,default:1},stepSecond:{type:Number,default:1},showSeconds:{type:Boolean,default:!1},hideOnDateTimeSelect:{type:Boolean,default:!1},hideOnRangeSelection:{type:Boolean,default:!1},timeSeparator:{type:String,default:":"},showWeek:{type:Boolean,default:!1},manualInput:{type:Boolean,default:!0},appendTo:{type:[String,Object],default:"body"},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:null},id:{type:String,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},panelClass:{type:[String,Object],default:null},panelStyle:{type:Object,default:null},todayButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,size:"small"}}},clearButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,size:"small"}}},navigatorButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}},timepickerButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:M$,provide:function(){return{$pcDatePicker:this,$parentInstance:this}}};function d2(t){"@babel/helpers - typeof";return d2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d2(t)}function Ew(t){return z$(t)||O$(t)||e6(t)||L$()}function L$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O$(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function z$(t){if(Array.isArray(t))return h2(t)}function Iw(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=e6(t))||e){n&&(t=n);var l=0,m=function(){};return{s:m,n:function(){return l>=t.length?{done:!0}:{done:!1,value:t[l++]}},e:function(E){throw E},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,x=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var E=n.next();return x=E.done,E},e:function(E){s=!0,d=E},f:function(){try{x||n.return==null||n.return()}finally{if(s)throw d}}}}function e6(t,e){if(t){if(typeof t=="string")return h2(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h2(t,e):void 0}}function h2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}var t6={name:"DatePicker",extends:D$,inheritAttrs:!1,emits:["show","hide","input","month-change","year-change","date-select","today-click","clear-click","focus","blur","keydown"],inject:{$pcFluid:{default:null}},navigationState:null,timePickerChange:!1,scrollHandler:null,outsideClickListener:null,resizeListener:null,matchMediaListener:null,overlay:null,input:null,previousButton:null,nextButton:null,timePickerTimer:null,preventFocus:!1,typeUpdate:!1,data:function(){return{d_id:this.id,currentMonth:null,currentYear:null,currentHour:null,currentMinute:null,currentSecond:null,pm:null,focused:!1,overlayVisible:!1,currentView:this.view,query:null,queryMatches:!1}},watch:{id:function(e){this.d_id=e||$o()},modelValue:function(e){this.updateCurrentMetaData(),!this.typeUpdate&&!this.inline&&this.input&&(this.input.value=this.inputFieldValue),this.typeUpdate=!1},showTime:function(){this.updateCurrentMetaData()},minDate:function(){this.updateCurrentMetaData()},maxDate:function(){this.updateCurrentMetaData()},months:function(){this.overlay&&(this.focused||(this.inline&&(this.preventFocus=!0),setTimeout(this.updateFocus,0)))},numberOfMonths:function(){this.destroyResponsiveStyleElement(),this.createResponsiveStyle()},responsiveOptions:function(){this.destroyResponsiveStyleElement(),this.createResponsiveStyle()},currentView:function(){var e=this;Promise.resolve(null).then(function(){return e.alignOverlay()})},view:function(e){this.currentView=e}},created:function(){this.updateCurrentMetaData()},mounted:function(){this.d_id=this.d_id||$o(),this.createResponsiveStyle(),this.bindMatchMediaListener(),this.inline?this.disabled||(this.preventFocus=!0,this.initFocusableCell()):this.input.value=this.inputFieldValue},updated:function(){this.overlay&&(this.preventFocus=!0,setTimeout(this.updateFocus,0)),this.input&&this.selectionStart!=null&&this.selectionEnd!=null&&(this.input.selectionStart=this.selectionStart,this.input.selectionEnd=this.selectionEnd,this.selectionStart=null,this.selectionEnd=null)},beforeUnmount:function(){this.timePickerTimer&&clearTimeout(this.timePickerTimer),this.destroyResponsiveStyleElement(),this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindMatchMediaListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&this.autoZIndex&&bo.clear(this.overlay),this.overlay=null},methods:{isComparable:function(){return this.d_value!=null&&typeof this.d_value!="string"},isSelected:function(e){if(!this.isComparable())return!1;if(this.d_value){if(this.isSingleSelection())return this.isDateEquals(this.d_value,e);if(this.isMultipleSelection()){var n=!1,l=Iw(this.d_value),m;try{for(l.s();!(m=l.n()).done;){var d=m.value;if(n=this.isDateEquals(d,e),n)break}}catch(x){l.e(x)}finally{l.f()}return n}else if(this.isRangeSelection())return this.d_value[1]?this.isDateEquals(this.d_value[0],e)||this.isDateEquals(this.d_value[1],e)||this.isDateBetween(this.d_value[0],this.d_value[1],e):this.isDateEquals(this.d_value[0],e)}return!1},isMonthSelected:function(e){var n=this;if(!this.isComparable())return!1;if(this.isMultipleSelection())return this.d_value.some(function(T){return T.getMonth()===e&&T.getFullYear()===n.currentYear});if(this.isRangeSelection())if(this.d_value[1]){var d=new Date(this.currentYear,e,1),x=new Date(this.d_value[0].getFullYear(),this.d_value[0].getMonth(),1),s=new Date(this.d_value[1].getFullYear(),this.d_value[1].getMonth(),1);return d>=x&&d<=s}else{var l,m;return((l=this.d_value[0])===null||l===void 0?void 0:l.getFullYear())===this.currentYear&&((m=this.d_value[0])===null||m===void 0?void 0:m.getMonth())===e}else return this.d_value.getMonth()===e&&this.d_value.getFullYear()===this.currentYear},isYearSelected:function(e){if(!this.isComparable())return!1;if(this.isMultipleSelection())return this.d_value.some(function(m){return m.getFullYear()===e});if(this.isRangeSelection()){var n=this.d_value[0]?this.d_value[0].getFullYear():null,l=this.d_value[1]?this.d_value[1].getFullYear():null;return n===e||l===e||n<e&&l>e}else return this.d_value.getFullYear()===e},isDateEquals:function(e,n){return e?e.getDate()===n.day&&e.getMonth()===n.month&&e.getFullYear()===n.year:!1},isDateBetween:function(e,n,l){var m=!1;if(e&&n){var d=new Date(l.year,l.month,l.day);return e.getTime()<=d.getTime()&&n.getTime()>=d.getTime()}return m},getFirstDayOfMonthIndex:function(e,n){var l=new Date;l.setDate(1),l.setMonth(e),l.setFullYear(n);var m=l.getDay()+this.sundayIndex;return m>=7?m-7:m},getDaysCountInMonth:function(e,n){return 32-this.daylightSavingAdjust(new Date(n,e,32)).getDate()},getDaysCountInPrevMonth:function(e,n){var l=this.getPreviousMonthAndYear(e,n);return this.getDaysCountInMonth(l.month,l.year)},getPreviousMonthAndYear:function(e,n){var l,m;return e===0?(l=11,m=n-1):(l=e-1,m=n),{month:l,year:m}},getNextMonthAndYear:function(e,n){var l,m;return e===11?(l=0,m=n+1):(l=e+1,m=n),{month:l,year:m}},daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},isToday:function(e,n,l,m){return e.getDate()===n&&e.getMonth()===l&&e.getFullYear()===m},isSelectable:function(e,n,l,m){var d=!0,x=!0,s=!0,T=!0;return m&&!this.selectOtherMonths?!1:(this.minDate&&(this.minDate.getFullYear()>l||this.minDate.getFullYear()===l&&(this.minDate.getMonth()>n||this.minDate.getMonth()===n&&this.minDate.getDate()>e))&&(d=!1),this.maxDate&&(this.maxDate.getFullYear()<l||this.maxDate.getFullYear()===l&&(this.maxDate.getMonth()<n||this.maxDate.getMonth()===n&&this.maxDate.getDate()<e))&&(x=!1),this.disabledDates&&(s=!this.isDateDisabled(e,n,l)),this.disabledDays&&(T=!this.isDayDisabled(e,n,l)),d&&x&&s&&T)},onOverlayEnter:function(e){var n=this.inline?void 0:{position:"absolute",top:"0",left:"0"};Sh(e,n),this.autoZIndex&&bo.set("overlay",e,this.baseZIndex||this.$primevue.config.zIndex.overlay),this.alignOverlay(),this.$emit("show")},onOverlayEnterComplete:function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener()},onOverlayAfterLeave:function(e){this.autoZIndex&&bo.clear(e)},onOverlayLeave:function(){this.currentView=this.view,this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.overlay=null},onPrevButtonClick:function(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)},onNextButtonClick:function(e){this.navigationState={backward:!1,button:!0},this.navForward(e)},navBackward:function(e){e.preventDefault(),this.isEnabled()&&(this.currentView==="month"?(this.decrementYear(),this.$emit("year-change",{month:this.currentMonth,year:this.currentYear})):this.currentView==="year"?this.decrementDecade():e.shiftKey?this.decrementYear():(this.currentMonth===0?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})))},navForward:function(e){e.preventDefault(),this.isEnabled()&&(this.currentView==="month"?(this.incrementYear(),this.$emit("year-change",{month:this.currentMonth,year:this.currentYear})):this.currentView==="year"?this.incrementDecade():e.shiftKey?this.incrementYear():(this.currentMonth===11?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})))},decrementYear:function(){this.currentYear--},decrementDecade:function(){this.currentYear=this.currentYear-10},incrementYear:function(){this.currentYear++},incrementDecade:function(){this.currentYear=this.currentYear+10},switchToMonthView:function(e){this.currentView="month",setTimeout(this.updateFocus,0),e.preventDefault()},switchToYearView:function(e){this.currentView="year",setTimeout(this.updateFocus,0),e.preventDefault()},isEnabled:function(){return!this.disabled&&!this.readonly},updateCurrentTimeMeta:function(e){var n=e.getHours();this.hourFormat==="12"&&(this.pm=n>11,n>=12&&(n=n==12?12:n-12)),this.currentHour=Math.floor(n/this.stepHour)*this.stepHour,this.currentMinute=Math.floor(e.getMinutes()/this.stepMinute)*this.stepMinute,this.currentSecond=Math.floor(e.getSeconds()/this.stepSecond)*this.stepSecond},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&e.isOutsideClicked(n)&&(e.overlayVisible=!1)},document.addEventListener("mousedown",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("mousedown",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new B_(this.$refs.container,function(){e.overlayVisible&&(e.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!L_()&&(e.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindMatchMediaListener:function(){var e=this;if(!this.matchMediaListener){var n=matchMedia("(max-width: ".concat(this.breakpoint,")"));this.query=n,this.queryMatches=n.matches,this.matchMediaListener=function(){e.queryMatches=n.matches,e.mobileActive=!1},this.query.addEventListener("change",this.matchMediaListener)}},unbindMatchMediaListener:function(){this.matchMediaListener&&(this.query.removeEventListener("change",this.matchMediaListener),this.matchMediaListener=null)},isOutsideClicked:function(e){return!(this.$el.isSameNode(e.target)||this.isNavIconClicked(e)||this.$el.contains(e.target)||this.overlay&&this.overlay.contains(e.target))},isNavIconClicked:function(e){return this.previousButton&&(this.previousButton.isSameNode(e.target)||this.previousButton.contains(e.target))||this.nextButton&&(this.nextButton.isSameNode(e.target)||this.nextButton.contains(e.target))},alignOverlay:function(){this.overlay&&(this.appendTo==="self"||this.inline?fS(this.overlay,this.$el):(this.view==="date"?(this.overlay.style.width=So(this.overlay)+"px",this.overlay.style.minWidth=So(this.$el)+"px"):this.overlay.style.width=So(this.$el)+"px",D_(this.overlay,this.$el)))},onButtonClick:function(){this.isEnabled()&&(this.overlayVisible?this.overlayVisible=!1:(this.input.focus(),this.overlayVisible=!0))},isDateDisabled:function(e,n,l){if(this.disabledDates){var m=Iw(this.disabledDates),d;try{for(m.s();!(d=m.n()).done;){var x=d.value;if(x.getFullYear()===l&&x.getMonth()===n&&x.getDate()===e)return!0}}catch(s){m.e(s)}finally{m.f()}}return!1},isDayDisabled:function(e,n,l){if(this.disabledDays){var m=new Date(l,n,e),d=m.getDay();return this.disabledDays.indexOf(d)!==-1}return!1},onMonthDropdownChange:function(e){this.currentMonth=parseInt(e),this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})},onYearDropdownChange:function(e){this.currentYear=parseInt(e),this.$emit("year-change",{month:this.currentMonth+1,year:this.currentYear})},onDateSelect:function(e,n){var l=this;if(!(this.disabled||!n.selectable)){if(la(this.overlay,'table td span:not([data-p-disabled="true"])').forEach(function(d){return d.tabIndex=-1}),e&&e.currentTarget.focus(),this.isMultipleSelection()&&this.isSelected(n)){var m=this.d_value.filter(function(d){return!l.isDateEquals(d,n)});this.updateModel(m)}else this.shouldSelectDate(n)&&(n.otherMonth?(this.currentMonth=n.month,this.currentYear=n.year,this.selectDate(n)):this.selectDate(n));this.isSingleSelection()&&(!this.showTime||this.hideOnDateTimeSelect)&&(this.input&&this.input.focus(),setTimeout(function(){l.overlayVisible=!1},150))}},selectDate:function(e){var n=this,l=new Date(e.year,e.month,e.day);this.showTime&&(this.hourFormat==="12"&&this.currentHour!==12&&this.pm?l.setHours(this.currentHour+12):l.setHours(this.currentHour),l.setMinutes(this.currentMinute),l.setSeconds(this.currentSecond)),this.minDate&&this.minDate>l&&(l=this.minDate,this.currentHour=l.getHours(),this.currentMinute=l.getMinutes(),this.currentSecond=l.getSeconds()),this.maxDate&&this.maxDate<l&&(l=this.maxDate,this.currentHour=l.getHours(),this.currentMinute=l.getMinutes(),this.currentSecond=l.getSeconds());var m=null;if(this.isSingleSelection())m=l;else if(this.isMultipleSelection())m=this.d_value?[].concat(Ew(this.d_value),[l]):[l];else if(this.isRangeSelection())if(this.d_value&&this.d_value.length){var d=this.d_value[0],x=this.d_value[1];!x&&l.getTime()>=d.getTime()?x=l:(d=l,x=null),m=[d,x]}else m=[l,null];m!==null&&this.updateModel(m),this.isRangeSelection()&&this.hideOnRangeSelection&&m[1]!==null&&setTimeout(function(){n.overlayVisible=!1},150),this.$emit("date-select",l)},updateModel:function(e){this.writeValue(e)},shouldSelectDate:function(){return this.isMultipleSelection()&&this.maxDateCount!=null?this.maxDateCount>(this.d_value?this.d_value.length:0):!0},isSingleSelection:function(){return this.selectionMode==="single"},isRangeSelection:function(){return this.selectionMode==="range"},isMultipleSelection:function(){return this.selectionMode==="multiple"},formatValue:function(e){if(typeof e=="string")return this.dateFormat?this.formatDate(new Date(e),this.dateFormat):e;var n="";if(e)try{if(this.isSingleSelection())n=this.formatDateTime(e);else if(this.isMultipleSelection())for(var l=0;l<e.length;l++){var m=this.formatDateTime(e[l]);n+=m,l!==e.length-1&&(n+=", ")}else if(this.isRangeSelection()&&e&&e.length){var d=e[0],x=e[1];n=this.formatDateTime(d),x&&(n+=" - "+this.formatDateTime(x))}}catch{n=e}return n},formatDateTime:function(e){var n=null;return e&&(this.timeOnly?n=this.formatTime(e):(n=this.formatDate(e,this.datePattern),this.showTime&&(n+=" "+this.formatTime(e)))),n},formatDate:function(e,n){if(!e)return"";var l,m=function(A){var z=l+1<n.length&&n.charAt(l+1)===A;return z&&l++,z},d=function(A,z,j){var U=""+z;if(m(A))for(;U.length<j;)U="0"+U;return U},x=function(A,z,j,U){return m(A)?U[z]:j[z]},s="",T=!1;if(e)for(l=0;l<n.length;l++)if(T)n.charAt(l)==="'"&&!m("'")?T=!1:s+=n.charAt(l);else switch(n.charAt(l)){case"d":s+=d("d",e.getDate(),2);break;case"D":s+=x("D",e.getDay(),this.$primevue.config.locale.dayNamesShort,this.$primevue.config.locale.dayNames);break;case"o":s+=d("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":s+=d("m",e.getMonth()+1,2);break;case"M":s+=x("M",e.getMonth(),this.$primevue.config.locale.monthNamesShort,this.$primevue.config.locale.monthNames);break;case"y":s+=m("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":s+=e.getTime();break;case"!":s+=e.getTime()*1e4+this.ticksTo1970;break;case"'":m("'")?s+="'":T=!0;break;default:s+=n.charAt(l)}return s},formatTime:function(e){if(!e)return"";var n="",l=e.getHours(),m=e.getMinutes(),d=e.getSeconds();return this.hourFormat==="12"&&l>11&&l!==12&&(l-=12),this.hourFormat==="12"?n+=l===0?12:l<10?"0"+l:l:n+=l<10?"0"+l:l,n+=":",n+=m<10?"0"+m:m,this.showSeconds&&(n+=":",n+=d<10?"0"+d:d),this.hourFormat==="12"&&(n+=e.getHours()>11?" ".concat(this.$primevue.config.locale.pm):" ".concat(this.$primevue.config.locale.am)),n},onTodayButtonClick:function(e){var n=new Date,l={day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),otherMonth:n.getMonth()!==this.currentMonth||n.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(null,l),this.$emit("today-click",n),e.preventDefault()},onClearButtonClick:function(e){this.updateModel(null),this.overlayVisible=!1,this.$emit("clear-click",e),e.preventDefault()},onTimePickerElementMouseDown:function(e,n,l){this.isEnabled()&&(this.repeat(e,null,n,l),e.preventDefault())},onTimePickerElementMouseUp:function(e){this.isEnabled()&&(this.clearTimePickerTimer(),this.updateModelTime(),e.preventDefault())},onTimePickerElementMouseLeave:function(){this.clearTimePickerTimer()},repeat:function(e,n,l,m){var d=this,x=n||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(function(){d.repeat(e,100,l,m)},x),l){case 0:m===1?this.incrementHour(e):this.decrementHour(e);break;case 1:m===1?this.incrementMinute(e):this.decrementMinute(e);break;case 2:m===1?this.incrementSecond(e):this.decrementSecond(e);break}},convertTo24Hour:function(e,n){return this.hourFormat=="12"?e===12?n?12:0:n?e+12:e:e},validateTime:function(e,n,l,m){var d=this.isComparable()?this.d_value:this.viewDate,x=this.convertTo24Hour(e,m);this.isRangeSelection()&&(d=this.d_value[1]||this.d_value[0]),this.isMultipleSelection()&&(d=this.d_value[this.d_value.length-1]);var s=d?d.toDateString():null;return!(this.minDate&&s&&this.minDate.toDateString()===s&&(this.minDate.getHours()>x||this.minDate.getHours()===x&&(this.minDate.getMinutes()>n||this.minDate.getMinutes()===n&&this.minDate.getSeconds()>l))||this.maxDate&&s&&this.maxDate.toDateString()===s&&(this.maxDate.getHours()<x||this.maxDate.getHours()===x&&(this.maxDate.getMinutes()<n||this.maxDate.getMinutes()===n&&this.maxDate.getSeconds()<l)))},incrementHour:function(e){var n=this.currentHour,l=this.currentHour+Number(this.stepHour),m=this.pm;this.hourFormat=="24"?l=l>=24?l-24:l:this.hourFormat=="12"&&(n<12&&l>11&&(m=!this.pm),l=l>=13?l-12:l),this.validateTime(l,this.currentMinute,this.currentSecond,m)&&(this.currentHour=l,this.pm=m),e.preventDefault()},decrementHour:function(e){var n=this.currentHour-this.stepHour,l=this.pm;this.hourFormat=="24"?n=n<0?24+n:n:this.hourFormat=="12"&&(this.currentHour===12&&(l=!this.pm),n=n<=0?12+n:n),this.validateTime(n,this.currentMinute,this.currentSecond,l)&&(this.currentHour=n,this.pm=l),e.preventDefault()},incrementMinute:function(e){var n=this.currentMinute+Number(this.stepMinute);this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n>59?n-60:n),e.preventDefault()},decrementMinute:function(e){var n=this.currentMinute-this.stepMinute;n=n<0?60+n:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()},incrementSecond:function(e){var n=this.currentSecond+Number(this.stepSecond);this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n>59?n-60:n),e.preventDefault()},decrementSecond:function(e){var n=this.currentSecond-this.stepSecond;n=n<0?60+n:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()},updateModelTime:function(){var e=this;this.timePickerChange=!0;var n=this.isComparable()?this.d_value:this.viewDate;this.isRangeSelection()&&(n=this.d_value[1]||this.d_value[0]),this.isMultipleSelection()&&(n=this.d_value[this.d_value.length-1]),n=n?new Date(n.getTime()):new Date,this.hourFormat=="12"?this.currentHour===12?n.setHours(this.pm?12:0):n.setHours(this.pm?this.currentHour+12:this.currentHour):n.setHours(this.currentHour),n.setMinutes(this.currentMinute),n.setSeconds(this.currentSecond),this.isRangeSelection()&&(this.d_value[1]?n=[this.d_value[0],n]:n=[n,null]),this.isMultipleSelection()&&(n=[].concat(Ew(this.d_value.slice(0,-1)),[n])),this.updateModel(n),this.$emit("date-select",n),setTimeout(function(){return e.timePickerChange=!1},0)},toggleAMPM:function(e){var n=this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,!this.pm);!n&&(this.maxDate||this.minDate)||(this.pm=!this.pm,this.updateModelTime(),e.preventDefault())},clearTimePickerTimer:function(){this.timePickerTimer&&clearInterval(this.timePickerTimer)},onMonthSelect:function(e,n){n.month;var l=n.index;this.view==="month"?this.onDateSelect(e,{year:this.currentYear,month:l,day:1,selectable:!0}):(this.currentMonth=l,this.currentView="date",this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})),setTimeout(this.updateFocus,0)},onYearSelect:function(e,n){this.view==="year"?this.onDateSelect(e,{year:n.value,month:0,day:1,selectable:!0}):(this.currentYear=n.value,this.currentView="month",this.$emit("year-change",{month:this.currentMonth+1,year:this.currentYear})),setTimeout(this.updateFocus,0)},updateCurrentMetaData:function(){var e=this.viewDate;this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),(this.showTime||this.timeOnly)&&this.updateCurrentTimeMeta(e)},isValidSelection:function(e){var n=this;if(e==null)return!0;var l=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(l=!1):e.every(function(m){return n.isSelectable(m.getDate(),m.getMonth(),m.getFullYear(),!1)})&&this.isRangeSelection()&&(l=e.length>1&&e[1]>=e[0]),l},parseValue:function(e){if(!e||e.trim().length===0)return null;var n;if(this.isSingleSelection())n=this.parseDateTime(e);else if(this.isMultipleSelection()){var l=e.split(",");n=[];var m=Iw(l),d;try{for(m.s();!(d=m.n()).done;){var x=d.value;n.push(this.parseDateTime(x.trim()))}}catch(E){m.e(E)}finally{m.f()}}else if(this.isRangeSelection()){var s=e.split(" - ");n=[];for(var T=0;T<s.length;T++)n[T]=this.parseDateTime(s[T].trim())}return n},parseDateTime:function(e){var n,l=e.split(" ");if(this.timeOnly)n=new Date,this.populateTime(n,l[0],l[1]);else{var m=this.datePattern;this.showTime?(n=this.parseDate(l[0],m),this.populateTime(n,l[1],l[2])):n=this.parseDate(e,m)}return n},populateTime:function(e,n,l){if(this.hourFormat=="12"&&!l)throw"Invalid Time";this.pm=l===this.$primevue.config.locale.pm||l===this.$primevue.config.locale.pm.toLowerCase();var m=this.parseTime(n);e.setHours(m.hour),e.setMinutes(m.minute),e.setSeconds(m.second)},parseTime:function(e){var n=e.split(":"),l=this.showSeconds?3:2,m=/^[0-9][0-9]$/;if(n.length!==l||!n[0].match(m)||!n[1].match(m)||this.showSeconds&&!n[2].match(m))throw"Invalid time";var d=parseInt(n[0]),x=parseInt(n[1]),s=this.showSeconds?parseInt(n[2]):null;if(isNaN(d)||isNaN(x)||d>23||x>59||this.hourFormat=="12"&&d>12||this.showSeconds&&(isNaN(s)||s>59))throw"Invalid time";return this.hourFormat=="12"&&d!==12&&this.pm?d+=12:this.hourFormat=="12"&&d==12&&!this.pm&&(d=0),{hour:d,minute:x,second:s}},parseDate:function(e,n){if(n==null||e==null)throw"Invalid arguments";if(e=d2(e)==="object"?e.toString():e+"",e==="")return null;var l,m,d,x=0,s=typeof this.shortYearCutoff!="string"?this.shortYearCutoff:new Date().getFullYear()%100+parseInt(this.shortYearCutoff,10),T=-1,E=-1,A=-1,z=-1,j=!1,U,K=function(te){var re=l+1<n.length&&n.charAt(l+1)===te;return re&&l++,re},oe=function(te){var re=K(te),ze=te==="@"?14:te==="!"?20:te==="y"&&re?4:te==="o"?3:2,_t=te==="y"?ze:1,Me=new RegExp("^\\d{"+_t+","+ze+"}"),he=e.substring(x).match(Me);if(!he)throw"Missing number at position "+x;return x+=he[0].length,parseInt(he[0],10)},fe=function(te,re,ze){for(var _t=-1,Me=K(te)?ze:re,he=[],Ce=0;Ce<Me.length;Ce++)he.push([Ce,Me[Ce]]);he.sort(function(ft,ut){return-(ft[1].length-ut[1].length)});for(var $e=0;$e<he.length;$e++){var Je=he[$e][1];if(e.substr(x,Je.length).toLowerCase()===Je.toLowerCase()){_t=he[$e][0],x+=Je.length;break}}if(_t!==-1)return _t+1;throw"Unknown name at position "+x},me=function(){if(e.charAt(x)!==n.charAt(l))throw"Unexpected literal at position "+x;x++};for(this.currentView==="month"&&(A=1),this.currentView==="year"&&(A=1,E=1),l=0;l<n.length;l++)if(j)n.charAt(l)==="'"&&!K("'")?j=!1:me();else switch(n.charAt(l)){case"d":A=oe("d");break;case"D":fe("D",this.$primevue.config.locale.dayNamesShort,this.$primevue.config.locale.dayNames);break;case"o":z=oe("o");break;case"m":E=oe("m");break;case"M":E=fe("M",this.$primevue.config.locale.monthNamesShort,this.$primevue.config.locale.monthNames);break;case"y":T=oe("y");break;case"@":U=new Date(oe("@")),T=U.getFullYear(),E=U.getMonth()+1,A=U.getDate();break;case"!":U=new Date((oe("!")-this.ticksTo1970)/1e4),T=U.getFullYear(),E=U.getMonth()+1,A=U.getDate();break;case"'":K("'")?me():j=!0;break;default:me()}if(x<e.length&&(d=e.substr(x),!/^\s+/.test(d)))throw"Extra/unparsed characters found in date: "+d;if(T===-1?T=new Date().getFullYear():T<100&&(T+=new Date().getFullYear()-new Date().getFullYear()%100+(T<=s?0:-100)),z>-1){E=1,A=z;do{if(m=this.getDaysCountInMonth(T,E-1),A<=m)break;E++,A-=m}while(!0)}if(U=this.daylightSavingAdjust(new Date(T,E-1,A)),U.getFullYear()!==T||U.getMonth()+1!==E||U.getDate()!==A)throw"Invalid date";return U},getWeekNumber:function(e){var n=new Date(e.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));var l=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((l-n.getTime())/864e5)/7)+1},onDateCellKeydown:function(e,n,l){var m=e.currentTarget,d=m.parentElement,x=Dc(d);switch(e.code){case"ArrowDown":{m.tabIndex="-1";var s=d.parentElement.nextElementSibling;if(s){var T=Dc(d.parentElement),E=Array.from(d.parentElement.parentElement.children),A=E.slice(T+1),z=A.find(function(wt){var Et=wt.children[x].children[0];return!Ci(Et,"data-p-disabled")});if(z){var j=z.children[x].children[0];j.tabIndex="0",j.focus()}else this.navigationState={backward:!1},this.navForward(e)}else this.navigationState={backward:!1},this.navForward(e);e.preventDefault();break}case"ArrowUp":{if(m.tabIndex="-1",e.altKey)this.overlayVisible=!1,this.focused=!0;else{var U=d.parentElement.previousElementSibling;if(U){var K=Dc(d.parentElement),oe=Array.from(d.parentElement.parentElement.children),fe=oe.slice(0,K).reverse(),me=fe.find(function(wt){var Et=wt.children[x].children[0];return!Ci(Et,"data-p-disabled")});if(me){var ne=me.children[x].children[0];ne.tabIndex="0",ne.focus()}else this.navigationState={backward:!0},this.navBackward(e)}else this.navigationState={backward:!0},this.navBackward(e)}e.preventDefault();break}case"ArrowLeft":{m.tabIndex="-1";var te=d.previousElementSibling;if(te){var re=Array.from(d.parentElement.children),ze=re.slice(0,x).reverse(),_t=ze.find(function(wt){var Et=wt.children[0];return!Ci(Et,"data-p-disabled")});if(_t){var Me=_t.children[0];Me.tabIndex="0",Me.focus()}else this.navigateToMonth(e,!0,l)}else this.navigateToMonth(e,!0,l);e.preventDefault();break}case"ArrowRight":{m.tabIndex="-1";var he=d.nextElementSibling;if(he){var Ce=Array.from(d.parentElement.children),$e=Ce.slice(x+1),Je=$e.find(function(wt){var Et=wt.children[0];return!Ci(Et,"data-p-disabled")});if(Je){var ft=Je.children[0];ft.tabIndex="0",ft.focus()}else this.navigateToMonth(e,!1,l)}else this.navigateToMonth(e,!1,l);e.preventDefault();break}case"Enter":case"NumpadEnter":case"Space":{this.onDateSelect(e,n),e.preventDefault();break}case"Escape":{this.overlayVisible=!1,e.preventDefault();break}case"Tab":{this.inline||this.trapFocus(e);break}case"Home":{m.tabIndex="-1";var ut=d.parentElement,Qe=ut.children[0].children[0];Ci(Qe,"data-p-disabled")?this.navigateToMonth(e,!0,l):(Qe.tabIndex="0",Qe.focus()),e.preventDefault();break}case"End":{m.tabIndex="-1";var Qt=d.parentElement,kt=Qt.children[Qt.children.length-1].children[0];Ci(kt,"data-p-disabled")?this.navigateToMonth(e,!1,l):(kt.tabIndex="0",kt.focus()),e.preventDefault();break}case"PageUp":{m.tabIndex="-1",e.shiftKey?(this.navigationState={backward:!0},this.navBackward(e)):this.navigateToMonth(e,!0,l),e.preventDefault();break}case"PageDown":{m.tabIndex="-1",e.shiftKey?(this.navigationState={backward:!1},this.navForward(e)):this.navigateToMonth(e,!1,l),e.preventDefault();break}}},navigateToMonth:function(e,n,l){if(n)if(this.numberOfMonths===1||l===0)this.navigationState={backward:!0},this.navBackward(e);else{var m=this.overlay.children[l-1],d=la(m,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])'),x=d[d.length-1];x.tabIndex="0",x.focus()}else if(this.numberOfMonths===1||l===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(e);else{var s=this.overlay.children[l+1],T=yo(s,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])');T.tabIndex="0",T.focus()}},onMonthCellKeydown:function(e,n){var l=e.currentTarget;switch(e.code){case"ArrowUp":case"ArrowDown":{l.tabIndex="-1";var m=l.parentElement.children,d=Dc(l),x=m[e.code==="ArrowDown"?d+3:d-3];x&&(x.tabIndex="0",x.focus()),e.preventDefault();break}case"ArrowLeft":{l.tabIndex="-1";var s=l.previousElementSibling;s?(s.tabIndex="0",s.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case"ArrowRight":{l.tabIndex="-1";var T=l.nextElementSibling;T?(T.tabIndex="0",T.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case"PageUp":{if(e.shiftKey)return;this.navigationState={backward:!0},this.navBackward(e);break}case"PageDown":{if(e.shiftKey)return;this.navigationState={backward:!1},this.navForward(e);break}case"Enter":case"NumpadEnter":case"Space":{this.onMonthSelect(e,n),e.preventDefault();break}case"Escape":{this.overlayVisible=!1,e.preventDefault();break}case"Tab":{this.trapFocus(e);break}}},onYearCellKeydown:function(e,n){var l=e.currentTarget;switch(e.code){case"ArrowUp":case"ArrowDown":{l.tabIndex="-1";var m=l.parentElement.children,d=Dc(l),x=m[e.code==="ArrowDown"?d+2:d-2];x&&(x.tabIndex="0",x.focus()),e.preventDefault();break}case"ArrowLeft":{l.tabIndex="-1";var s=l.previousElementSibling;s?(s.tabIndex="0",s.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case"ArrowRight":{l.tabIndex="-1";var T=l.nextElementSibling;T?(T.tabIndex="0",T.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case"PageUp":{if(e.shiftKey)return;this.navigationState={backward:!0},this.navBackward(e);break}case"PageDown":{if(e.shiftKey)return;this.navigationState={backward:!1},this.navForward(e);break}case"Enter":case"NumpadEnter":case"Space":{this.onYearSelect(e,n),e.preventDefault();break}case"Escape":{this.overlayVisible=!1,e.preventDefault();break}case"Tab":{this.trapFocus(e);break}}},updateFocus:function(){var e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?this.previousButton.focus():this.nextButton.focus();else{if(this.navigationState.backward){var n;this.currentView==="month"?n=la(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"]:not([data-p-disabled="true"])'):this.currentView==="year"?n=la(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"]:not([data-p-disabled="true"])'):n=la(this.overlay,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])'),n&&n.length>0&&(e=n[n.length-1])}else this.currentView==="month"?e=yo(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"]:not([data-p-disabled="true"])'):this.currentView==="year"?e=yo(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"]:not([data-p-disabled="true"])'):e=yo(this.overlay,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])');e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()},initFocusableCell:function(){var e;if(this.currentView==="month"){var n=la(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"]'),l=yo(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"][data-p-selected="true"]');n.forEach(function(s){return s.tabIndex=-1}),e=l||n[0]}else if(this.currentView==="year"){var m=la(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"]'),d=yo(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"][data-p-selected="true"]');m.forEach(function(s){return s.tabIndex=-1}),e=d||m[0]}else if(e=yo(this.overlay,'span[data-p-selected="true"]'),!e){var x=yo(this.overlay,'td[data-p-today="true"] span:not([data-p-disabled="true"]):not([data-p-ink="true"])');x?e=x:e=yo(this.overlay,'.p-datepicker-calendar td span:not([data-p-disabled="true"]):not([data-p-ink="true"])')}e&&(e.tabIndex="0",this.preventFocus=!1)},trapFocus:function(e){e.preventDefault();var n=py(this.overlay);if(n&&n.length>0)if(!document.activeElement)n[0].focus();else{var l=n.indexOf(document.activeElement);if(e.shiftKey)l===-1||l===0?n[n.length-1].focus():n[l-1].focus();else if(l===-1)if(this.timeOnly)n[0].focus();else{for(var m=null,d=0;d<n.length;d++)if(n[d].tagName==="SPAN"){m=d;break}n[m].focus()}else l===n.length-1?n[0].focus():n[l+1].focus()}},onContainerButtonKeydown:function(e){switch(e.code){case"Tab":this.trapFocus(e);break;case"Escape":this.overlayVisible=!1,e.preventDefault();break}this.$emit("keydown",e)},onInput:function(e){try{this.selectionStart=this.input.selectionStart,this.selectionEnd=this.input.selectionEnd;var n=this.parseValue(e.target.value);this.isValidSelection(n)&&(this.typeUpdate=!0,this.updateModel(n),this.updateCurrentMetaData())}catch{}this.$emit("input",e)},onInputClick:function(){this.showOnFocus&&this.isEnabled()&&!this.overlayVisible&&(this.overlayVisible=!0)},onFocus:function(e){this.showOnFocus&&this.isEnabled()&&(this.overlayVisible=!0),this.focused=!0,this.$emit("focus",e)},onBlur:function(e){var n,l;this.$emit("blur",{originalEvent:e,value:e.target.value}),(n=(l=this.formField).onBlur)===null||n===void 0||n.call(l),this.focused=!1,e.target.value=this.formatValue(this.d_value)},onKeyDown:function(e){if(e.code==="ArrowDown"&&this.overlay)this.trapFocus(e);else if(e.code==="ArrowDown"&&!this.overlay)this.overlayVisible=!0;else if(e.code==="Escape")this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault());else if(e.code==="Tab")this.overlay&&py(this.overlay).forEach(function(m){return m.tabIndex="-1"}),this.overlayVisible&&(this.overlayVisible=!1);else if(e.code==="Enter"){var n;if(this.manualInput&&e.target.value!==null&&((n=e.target.value)===null||n===void 0?void 0:n.trim())!=="")try{var l=this.parseValue(e.target.value);this.isValidSelection(l)&&(this.overlayVisible=!1)}catch{}this.$emit("keydown",e)}},overlayRef:function(e){this.overlay=e},inputRef:function(e){this.input=e?e.$el:void 0},previousButtonRef:function(e){this.previousButton=e?e.$el:void 0},nextButtonRef:function(e){this.nextButton=e?e.$el:void 0},getMonthName:function(e){return this.$primevue.config.locale.monthNames[e]},getYear:function(e){return this.currentView==="month"?this.currentYear:e.year},onOverlayClick:function(e){e.stopPropagation(),this.inline||ql.emit("overlay-click",{originalEvent:e,target:this.$el})},onOverlayKeyDown:function(e){switch(e.code){case"Escape":this.inline||(this.input.focus(),this.overlayVisible=!1);break}},onOverlayMouseUp:function(e){this.onOverlayClick(e)},createResponsiveStyle:function(){if(this.numberOfMonths>1&&this.responsiveOptions&&!this.isUnstyled){if(!this.responsiveStyleElement){var e;this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",If(this.responsiveStyleElement,"nonce",(e=this.$primevue)===null||e===void 0||(e=e.config)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce),document.body.appendChild(this.responsiveStyleElement)}var n="";if(this.responsiveOptions)for(var l=t2(),m=Ew(this.responsiveOptions).filter(function(z){return!!(z.breakpoint&&z.numMonths)}).sort(function(z,j){return-1*l(z.breakpoint,j.breakpoint)}),d=0;d<m.length;d++){for(var x=m[d],s=x.breakpoint,T=x.numMonths,E=`
                            .p-datepicker-panel[`.concat(this.$attrSelector,"] .p-datepicker-calendar:nth-child(").concat(T,`) .p-datepicker-next-button {
                                display: inline-flex;
                            }
                        `),A=T;A<this.numberOfMonths;A++)E+=`
                                .p-datepicker-panel[`.concat(this.$attrSelector,"] .p-datepicker-calendar:nth-child(").concat(A+1,`) {
                                    display: none;
                                }
                            `);n+=`
                            @media screen and (max-width: `.concat(s,`) {
                                `).concat(E,`
                            }
                        `)}this.responsiveStyleElement.innerHTML=n}},destroyResponsiveStyleElement:function(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}},computed:{viewDate:function(){var e=this.d_value;if(e&&Array.isArray(e)&&(this.isRangeSelection()?e=this.inline?e[0]:e[1]||e[0]:this.isMultipleSelection()&&(e=e[e.length-1])),e&&typeof e!="string")return e;var n=new Date;return this.maxDate&&this.maxDate<n?this.maxDate:this.minDate&&this.minDate>n?this.minDate:n},inputFieldValue:function(){return this.formatValue(this.d_value)},months:function(){for(var e=[],n=0;n<this.numberOfMonths;n++){var l=this.currentMonth+n,m=this.currentYear;l>11&&(l=l%11-1,m=m+1);for(var d=[],x=this.getFirstDayOfMonthIndex(l,m),s=this.getDaysCountInMonth(l,m),T=this.getDaysCountInPrevMonth(l,m),E=1,A=new Date,z=[],j=Math.ceil((s+x)/7),U=0;U<j;U++){var K=[];if(U==0){for(var oe=T-x+1;oe<=T;oe++){var fe=this.getPreviousMonthAndYear(l,m);K.push({day:oe,month:fe.month,year:fe.year,otherMonth:!0,today:this.isToday(A,oe,fe.month,fe.year),selectable:this.isSelectable(oe,fe.month,fe.year,!0)})}for(var me=7-K.length,ne=0;ne<me;ne++)K.push({day:E,month:l,year:m,today:this.isToday(A,E,l,m),selectable:this.isSelectable(E,l,m,!1)}),E++}else for(var te=0;te<7;te++){if(E>s){var re=this.getNextMonthAndYear(l,m);K.push({day:E-s,month:re.month,year:re.year,otherMonth:!0,today:this.isToday(A,E-s,re.month,re.year),selectable:this.isSelectable(E-s,re.month,re.year,!0)})}else K.push({day:E,month:l,year:m,today:this.isToday(A,E,l,m),selectable:this.isSelectable(E,l,m,!1)});E++}this.showWeek&&z.push(this.getWeekNumber(new Date(K[0].year,K[0].month,K[0].day))),d.push(K)}e.push({month:l,year:m,dates:d,weekNumbers:z})}return e},weekDays:function(){for(var e=[],n=this.$primevue.config.locale.firstDayOfWeek,l=0;l<7;l++)e.push(this.$primevue.config.locale.dayNamesMin[n]),n=n==6?0:++n;return e},ticksTo1970:function(){return(1969*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7},sundayIndex:function(){return this.$primevue.config.locale.firstDayOfWeek>0?7-this.$primevue.config.locale.firstDayOfWeek:0},datePattern:function(){return this.dateFormat||this.$primevue.config.locale.dateFormat},monthPickerValues:function(){for(var e=this,n=[],l=function(x){if(e.minDate){var s=e.minDate.getMonth(),T=e.minDate.getFullYear();if(e.currentYear<T||e.currentYear===T&&x<s)return!1}if(e.maxDate){var E=e.maxDate.getMonth(),A=e.maxDate.getFullYear();if(e.currentYear>A||e.currentYear===A&&x>E)return!1}return!0},m=0;m<=11;m++)n.push({value:this.$primevue.config.locale.monthNamesShort[m],selectable:l(m)});return n},yearPickerValues:function(){for(var e=this,n=[],l=this.currentYear-this.currentYear%10,m=function(s){return!(e.minDate&&e.minDate.getFullYear()>s||e.maxDate&&e.maxDate.getFullYear()<s)},d=0;d<10;d++)n.push({value:l+d,selectable:m(l+d)});return n},formattedCurrentHour:function(){return this.currentHour==0&&this.hourFormat=="12"?this.currentHour+12:this.currentHour<10?"0"+this.currentHour:this.currentHour},formattedCurrentMinute:function(){return this.currentMinute<10?"0"+this.currentMinute:this.currentMinute},formattedCurrentSecond:function(){return this.currentSecond<10?"0"+this.currentSecond:this.currentSecond},todayLabel:function(){return this.$primevue.config.locale.today},clearLabel:function(){return this.$primevue.config.locale.clear},weekHeaderLabel:function(){return this.$primevue.config.locale.weekHeader},monthNames:function(){return this.$primevue.config.locale.monthNames},switchViewButtonDisabled:function(){return this.numberOfMonths>1||this.disabled},panelId:function(){return this.d_id+"_panel"}},components:{InputText:vo,Button:jr,Portal:td,CalendarIcon:QP,ChevronLeftIcon:$_,ChevronRightIcon:ed,ChevronUpIcon:F_,ChevronDownIcon:Pf},directives:{ripple:zs}},B$=["id"],F$=["disabled","aria-label","aria-expanded","aria-controls"],$$=["id","role","aria-modal","aria-label"],N$=["disabled","aria-label"],V$=["disabled","aria-label"],j$=["disabled","aria-label"],U$=["disabled","aria-label"],q$=["data-p-disabled"],H$=["abbr"],G$=["data-p-disabled"],W$=["aria-label","data-p-today","data-p-other-month"],K$=["onClick","onKeydown","aria-selected","aria-disabled","data-p-disabled","data-p-selected"],Z$=["onClick","onKeydown","data-p-disabled","data-p-selected"],X$=["onClick","onKeydown","data-p-disabled","data-p-selected"];function Y$(t,e,n,l,m,d){var x=wn("InputText"),s=wn("Button"),T=wn("Portal"),E=No("ripple");return X(),pe("span",ie({ref:"container",id:m.d_id,class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[t.inline?Ct("",!0):(X(),bt(x,{key:0,ref:d.inputRef,id:t.inputId,role:"combobox",class:vn([t.inputClass,t.cx("pcInputText")]),style:Wl(t.inputStyle),defaultValue:d.inputFieldValue,placeholder:t.placeholder,name:t.name,size:t.size,invalid:t.invalid,variant:t.variant,fluid:t.fluid,unstyled:t.unstyled,autocomplete:"off","aria-autocomplete":"none","aria-haspopup":"dialog","aria-expanded":m.overlayVisible,"aria-controls":d.panelId,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,inputmode:"none",disabled:t.disabled,readonly:!t.manualInput||t.readonly,tabindex:0,onInput:d.onInput,onClick:d.onInputClick,onFocus:d.onFocus,onBlur:d.onBlur,onKeydown:d.onKeyDown,pt:t.ptm("pcInputText")},null,8,["id","class","style","defaultValue","placeholder","name","size","invalid","variant","fluid","unstyled","aria-expanded","aria-controls","aria-labelledby","aria-label","disabled","readonly","onInput","onClick","onFocus","onBlur","onKeydown","pt"])),t.showIcon&&t.iconDisplay==="button"&&!t.inline?jt(t.$slots,"dropdownbutton",{key:1,toggleCallback:d.onButtonClick},function(){return[M("button",ie({class:t.cx("dropdown"),disabled:t.disabled,onClick:e[0]||(e[0]=function(){return d.onButtonClick&&d.onButtonClick.apply(d,arguments)}),type:"button","aria-label":t.$primevue.config.locale.chooseDate,"aria-haspopup":"dialog","aria-expanded":m.overlayVisible,"aria-controls":d.panelId},t.ptm("dropdown")),[jt(t.$slots,"dropdownicon",{class:vn(t.icon)},function(){return[(X(),bt(Tn(t.icon?"span":"CalendarIcon"),ie({class:t.icon},t.ptm("dropdownIcon")),null,16,["class"]))]})],16,F$)]}):t.showIcon&&t.iconDisplay==="input"&&!t.inline?(X(),pe(an,{key:2},[t.$slots.inputicon||t.showIcon?(X(),pe("span",ie({key:0,class:t.cx("inputIconContainer")},t.ptm("inputIconContainer")),[jt(t.$slots,"inputicon",{class:vn(t.cx("inputIcon")),clickCallback:d.onButtonClick},function(){return[(X(),bt(Tn(t.icon?"i":"CalendarIcon"),ie({class:[t.icon,t.cx("inputIcon")],onClick:d.onButtonClick},t.ptm("inputicon")),null,16,["class","onClick"]))]})],16)):Ct("",!0)],64)):Ct("",!0),ge(T,{appendTo:t.appendTo,disabled:t.inline},{default:Xe(function(){return[ge(Eh,ie({name:"p-connected-overlay",onEnter:e[58]||(e[58]=function(A){return d.onOverlayEnter(A)}),onAfterEnter:d.onOverlayEnterComplete,onAfterLeave:d.onOverlayAfterLeave,onLeave:d.onOverlayLeave},t.ptm("transition")),{default:Xe(function(){return[t.inline||m.overlayVisible?(X(),pe("div",ie({key:0,ref:d.overlayRef,id:d.panelId,class:[t.cx("panel"),t.panelClass],style:t.panelStyle,role:t.inline?null:"dialog","aria-modal":t.inline?null:"true","aria-label":t.$primevue.config.locale.chooseDate,onClick:e[55]||(e[55]=function(){return d.onOverlayClick&&d.onOverlayClick.apply(d,arguments)}),onKeydown:e[56]||(e[56]=function(){return d.onOverlayKeyDown&&d.onOverlayKeyDown.apply(d,arguments)}),onMouseup:e[57]||(e[57]=function(){return d.onOverlayMouseUp&&d.onOverlayMouseUp.apply(d,arguments)})},t.ptm("panel")),[t.timeOnly?Ct("",!0):(X(),pe(an,{key:0},[M("div",ie({class:t.cx("calendarContainer")},t.ptm("calendarContainer")),[(X(!0),pe(an,null,fr(d.months,function(A,z){return X(),pe("div",ie({key:A.month+A.year,class:t.cx("calendar"),ref_for:!0},t.ptm("calendar")),[M("div",ie({class:t.cx("header"),ref_for:!0},t.ptm("header")),[jt(t.$slots,"header"),_r(ge(s,ie({ref_for:!0,ref:d.previousButtonRef,class:t.cx("pcPrevButton"),disabled:t.disabled,"aria-label":m.currentView==="year"?t.$primevue.config.locale.prevDecade:m.currentView==="month"?t.$primevue.config.locale.prevYear:t.$primevue.config.locale.prevMonth,unstyled:t.unstyled,onClick:d.onPrevButtonClick,onKeydown:d.onContainerButtonKeydown},t.navigatorButtonProps,{pt:t.ptm("pcPrevButton"),"data-pc-group-section":"navigator"}),{icon:Xe(function(j){return[jt(t.$slots,"previcon",{},function(){return[(X(),bt(Tn(t.prevIcon?"span":"ChevronLeftIcon"),ie({class:[t.prevIcon,j.class],ref_for:!0},t.ptm("pcPrevButton").icon),null,16,["class"]))]})]}),_:2},1040,["class","disabled","aria-label","unstyled","onClick","onKeydown","pt"]),[[cy,z===0]]),M("div",ie({class:t.cx("title"),ref_for:!0},t.ptm("title")),[t.$primevue.config.locale.showMonthAfterYear?(X(),pe(an,{key:0},[m.currentView!=="year"?(X(),pe("button",ie({key:0,type:"button",onClick:e[1]||(e[1]=function(){return d.switchToYearView&&d.switchToYearView.apply(d,arguments)}),onKeydown:e[2]||(e[2]=function(){return d.onContainerButtonKeydown&&d.onContainerButtonKeydown.apply(d,arguments)}),class:t.cx("selectYear"),disabled:d.switchViewButtonDisabled,"aria-label":t.$primevue.config.locale.chooseYear,ref_for:!0},t.ptm("selectYear"),{"data-pc-group-section":"view"}),Ue(d.getYear(A)),17,N$)):Ct("",!0),m.currentView==="date"?(X(),pe("button",ie({key:1,type:"button",onClick:e[3]||(e[3]=function(){return d.switchToMonthView&&d.switchToMonthView.apply(d,arguments)}),onKeydown:e[4]||(e[4]=function(){return d.onContainerButtonKeydown&&d.onContainerButtonKeydown.apply(d,arguments)}),class:t.cx("selectMonth"),disabled:d.switchViewButtonDisabled,"aria-label":t.$primevue.config.locale.chooseMonth,ref_for:!0},t.ptm("selectMonth"),{"data-pc-group-section":"view"}),Ue(d.getMonthName(A.month)),17,V$)):Ct("",!0)],64)):(X(),pe(an,{key:1},[m.currentView==="date"?(X(),pe("button",ie({key:0,type:"button",onClick:e[5]||(e[5]=function(){return d.switchToMonthView&&d.switchToMonthView.apply(d,arguments)}),onKeydown:e[6]||(e[6]=function(){return d.onContainerButtonKeydown&&d.onContainerButtonKeydown.apply(d,arguments)}),class:t.cx("selectMonth"),disabled:d.switchViewButtonDisabled,"aria-label":t.$primevue.config.locale.chooseMonth,ref_for:!0},t.ptm("selectMonth"),{"data-pc-group-section":"view"}),Ue(d.getMonthName(A.month)),17,j$)):Ct("",!0),m.currentView!=="year"?(X(),pe("button",ie({key:1,type:"button",onClick:e[7]||(e[7]=function(){return d.switchToYearView&&d.switchToYearView.apply(d,arguments)}),onKeydown:e[8]||(e[8]=function(){return d.onContainerButtonKeydown&&d.onContainerButtonKeydown.apply(d,arguments)}),class:t.cx("selectYear"),disabled:d.switchViewButtonDisabled,"aria-label":t.$primevue.config.locale.chooseYear,ref_for:!0},t.ptm("selectYear"),{"data-pc-group-section":"view"}),Ue(d.getYear(A)),17,U$)):Ct("",!0)],64)),m.currentView==="year"?(X(),pe("span",ie({key:2,class:t.cx("decade"),ref_for:!0},t.ptm("decade")),[jt(t.$slots,"decade",{years:d.yearPickerValues},function(){return[tr(Ue(d.yearPickerValues[0].value)+" - "+Ue(d.yearPickerValues[d.yearPickerValues.length-1].value),1)]})],16)):Ct("",!0)],16),_r(ge(s,ie({ref_for:!0,ref:d.nextButtonRef,class:t.cx("pcNextButton"),disabled:t.disabled,"aria-label":m.currentView==="year"?t.$primevue.config.locale.nextDecade:m.currentView==="month"?t.$primevue.config.locale.nextYear:t.$primevue.config.locale.nextMonth,unstyled:t.unstyled,onClick:d.onNextButtonClick,onKeydown:d.onContainerButtonKeydown},t.navigatorButtonProps,{pt:t.ptm("pcNextButton"),"data-pc-group-section":"navigator"}),{icon:Xe(function(j){return[jt(t.$slots,"nexticon",{},function(){return[(X(),bt(Tn(t.nextIcon?"span":"ChevronRightIcon"),ie({class:[t.nextIcon,j.class],ref_for:!0},t.ptm("pcNextButton").icon),null,16,["class"]))]})]}),_:2},1040,["class","disabled","aria-label","unstyled","onClick","onKeydown","pt"]),[[cy,t.numberOfMonths===1?!0:z===t.numberOfMonths-1]])],16),m.currentView==="date"?(X(),pe("table",ie({key:0,class:t.cx("dayView"),role:"grid",ref_for:!0},t.ptm("dayView")),[M("thead",ie({ref_for:!0},t.ptm("tableHeader")),[M("tr",ie({ref_for:!0},t.ptm("tableHeaderRow")),[t.showWeek?(X(),pe("th",ie({key:0,scope:"col",class:t.cx("weekHeader"),ref_for:!0},t.ptm("weekHeader",{context:{disabled:t.showWeek}}),{"data-p-disabled":t.showWeek,"data-pc-group-section":"tableheadercell"}),[jt(t.$slots,"weekheaderlabel",{},function(){return[M("span",ie({ref_for:!0},t.ptm("weekHeaderLabel",{context:{disabled:t.showWeek}}),{"data-pc-group-section":"tableheadercelllabel"}),Ue(d.weekHeaderLabel),17)]})],16,q$)):Ct("",!0),(X(!0),pe(an,null,fr(d.weekDays,function(j){return X(),pe("th",ie({key:j,scope:"col",abbr:j,ref_for:!0},t.ptm("tableHeaderCell"),{"data-pc-group-section":"tableheadercell",class:t.cx("weekDayCell")}),[M("span",ie({class:t.cx("weekDay"),ref_for:!0},t.ptm("weekDay"),{"data-pc-group-section":"tableheadercelllabel"}),Ue(j),17)],16,H$)}),128))],16)],16),M("tbody",ie({ref_for:!0},t.ptm("tableBody")),[(X(!0),pe(an,null,fr(A.dates,function(j,U){return X(),pe("tr",ie({key:j[0].day+""+j[0].month,ref_for:!0},t.ptm("tableBodyRow")),[t.showWeek?(X(),pe("td",ie({key:0,class:t.cx("weekNumber"),ref_for:!0},t.ptm("weekNumber"),{"data-pc-group-section":"tablebodycell"}),[M("span",ie({class:t.cx("weekLabelContainer"),ref_for:!0},t.ptm("weekLabelContainer",{context:{disabled:t.showWeek}}),{"data-p-disabled":t.showWeek,"data-pc-group-section":"tablebodycelllabel"}),[jt(t.$slots,"weeklabel",{weekNumber:A.weekNumbers[U]},function(){return[A.weekNumbers[U]<10?(X(),pe("span",ie({key:0,style:{visibility:"hidden"},ref_for:!0},t.ptm("weekLabel")),"0",16)):Ct("",!0),tr(" "+Ue(A.weekNumbers[U]),1)]})],16,G$)],16)):Ct("",!0),(X(!0),pe(an,null,fr(j,function(K){return X(),pe("td",ie({key:K.day+""+K.month,"aria-label":K.day,class:t.cx("dayCell",{date:K}),ref_for:!0},t.ptm("dayCell",{context:{date:K,today:K.today,otherMonth:K.otherMonth,selected:d.isSelected(K),disabled:!K.selectable}}),{"data-p-today":K.today,"data-p-other-month":K.otherMonth,"data-pc-group-section":"tablebodycell"}),[t.showOtherMonths||!K.otherMonth?_r((X(),pe("span",ie({key:0,class:t.cx("day",{date:K}),onClick:function(fe){return d.onDateSelect(fe,K)},draggable:"false",onKeydown:function(fe){return d.onDateCellKeydown(fe,K,z)},"aria-selected":d.isSelected(K),"aria-disabled":!K.selectable,ref_for:!0},t.ptm("day",{context:{date:K,today:K.today,otherMonth:K.otherMonth,selected:d.isSelected(K),disabled:!K.selectable}}),{"data-p-disabled":!K.selectable,"data-p-selected":d.isSelected(K),"data-pc-group-section":"tablebodycelllabel"}),[jt(t.$slots,"date",{date:K},function(){return[tr(Ue(K.day),1)]})],16,K$)),[[E]]):Ct("",!0),d.isSelected(K)?(X(),pe("div",ie({key:1,class:"p-hidden-accessible","aria-live":"polite",ref_for:!0},t.ptm("hiddenSelectedDay"),{"data-p-hidden-accessible":!0}),Ue(K.day),17)):Ct("",!0)],16,W$)}),128))],16)}),128))],16)],16)):Ct("",!0)],16)}),128))],16),m.currentView==="month"?(X(),pe("div",ie({key:0,class:t.cx("monthView")},t.ptm("monthView")),[(X(!0),pe(an,null,fr(d.monthPickerValues,function(A,z){return _r((X(),pe("span",ie({key:A,onClick:function(U){return d.onMonthSelect(U,{month:A,index:z})},onKeydown:function(U){return d.onMonthCellKeydown(U,{month:A,index:z})},class:t.cx("month",{month:A,index:z}),ref_for:!0},t.ptm("month",{context:{month:A,monthIndex:z,selected:d.isMonthSelected(z),disabled:!A.selectable}}),{"data-p-disabled":!A.selectable,"data-p-selected":d.isMonthSelected(z)}),[tr(Ue(A.value)+" ",1),d.isMonthSelected(z)?(X(),pe("div",ie({key:0,class:"p-hidden-accessible","aria-live":"polite",ref_for:!0},t.ptm("hiddenMonth"),{"data-p-hidden-accessible":!0}),Ue(A.value),17)):Ct("",!0)],16,Z$)),[[E]])}),128))],16)):Ct("",!0),m.currentView==="year"?(X(),pe("div",ie({key:1,class:t.cx("yearView")},t.ptm("yearView")),[(X(!0),pe(an,null,fr(d.yearPickerValues,function(A){return _r((X(),pe("span",ie({key:A.value,onClick:function(j){return d.onYearSelect(j,A)},onKeydown:function(j){return d.onYearCellKeydown(j,A)},class:t.cx("year",{year:A}),ref_for:!0},t.ptm("year",{context:{year:A,selected:d.isYearSelected(A.value),disabled:!A.selectable}}),{"data-p-disabled":!A.selectable,"data-p-selected":d.isYearSelected(A.value)}),[tr(Ue(A.value)+" ",1),d.isYearSelected(A.value)?(X(),pe("div",ie({key:0,class:"p-hidden-accessible","aria-live":"polite",ref_for:!0},t.ptm("hiddenYear"),{"data-p-hidden-accessible":!0}),Ue(A.value),17)):Ct("",!0)],16,X$)),[[E]])}),128))],16)):Ct("",!0)],64)),(t.showTime||t.timeOnly)&&m.currentView==="date"?(X(),pe("div",ie({key:1,class:t.cx("timePicker")},t.ptm("timePicker")),[M("div",ie({class:t.cx("hourPicker")},t.ptm("hourPicker"),{"data-pc-group-section":"timepickerContainer"}),[ge(s,ie({class:t.cx("pcIncrementButton"),"aria-label":t.$primevue.config.locale.nextHour,unstyled:t.unstyled,onMousedown:e[9]||(e[9]=function(A){return d.onTimePickerElementMouseDown(A,0,1)}),onMouseup:e[10]||(e[10]=function(A){return d.onTimePickerElementMouseUp(A)}),onKeydown:[d.onContainerButtonKeydown,e[12]||(e[12]=qi(function(A){return d.onTimePickerElementMouseDown(A,0,1)},["enter"])),e[13]||(e[13]=qi(function(A){return d.onTimePickerElementMouseDown(A,0,1)},["space"]))],onMouseleave:e[11]||(e[11]=function(A){return d.onTimePickerElementMouseLeave()}),onKeyup:[e[14]||(e[14]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["enter"])),e[15]||(e[15]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:Xe(function(A){return[jt(t.$slots,"incrementicon",{},function(){return[(X(),bt(Tn(t.incrementIcon?"span":"ChevronUpIcon"),ie({class:[t.incrementIcon,A.class]},t.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","unstyled","onKeydown","pt"]),M("span",ie(t.ptm("hour"),{"data-pc-group-section":"timepickerlabel"}),Ue(d.formattedCurrentHour),17),ge(s,ie({class:t.cx("pcDecrementButton"),"aria-label":t.$primevue.config.locale.prevHour,unstyled:t.unstyled,onMousedown:e[16]||(e[16]=function(A){return d.onTimePickerElementMouseDown(A,0,-1)}),onMouseup:e[17]||(e[17]=function(A){return d.onTimePickerElementMouseUp(A)}),onKeydown:[d.onContainerButtonKeydown,e[19]||(e[19]=qi(function(A){return d.onTimePickerElementMouseDown(A,0,-1)},["enter"])),e[20]||(e[20]=qi(function(A){return d.onTimePickerElementMouseDown(A,0,-1)},["space"]))],onMouseleave:e[18]||(e[18]=function(A){return d.onTimePickerElementMouseLeave()}),onKeyup:[e[21]||(e[21]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["enter"])),e[22]||(e[22]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:Xe(function(A){return[jt(t.$slots,"decrementicon",{},function(){return[(X(),bt(Tn(t.decrementIcon?"span":"ChevronDownIcon"),ie({class:[t.decrementIcon,A.class]},t.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","unstyled","onKeydown","pt"])],16),M("div",ie(t.ptm("separatorContainer"),{"data-pc-group-section":"timepickerContainer"}),[M("span",ie(t.ptm("separator"),{"data-pc-group-section":"timepickerlabel"}),Ue(t.timeSeparator),17)],16),M("div",ie({class:t.cx("minutePicker")},t.ptm("minutePicker"),{"data-pc-group-section":"timepickerContainer"}),[ge(s,ie({class:t.cx("pcIncrementButton"),"aria-label":t.$primevue.config.locale.nextMinute,disabled:t.disabled,unstyled:t.unstyled,onMousedown:e[23]||(e[23]=function(A){return d.onTimePickerElementMouseDown(A,1,1)}),onMouseup:e[24]||(e[24]=function(A){return d.onTimePickerElementMouseUp(A)}),onKeydown:[d.onContainerButtonKeydown,e[26]||(e[26]=qi(function(A){return d.onTimePickerElementMouseDown(A,1,1)},["enter"])),e[27]||(e[27]=qi(function(A){return d.onTimePickerElementMouseDown(A,1,1)},["space"]))],onMouseleave:e[25]||(e[25]=function(A){return d.onTimePickerElementMouseLeave()}),onKeyup:[e[28]||(e[28]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["enter"])),e[29]||(e[29]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:Xe(function(A){return[jt(t.$slots,"incrementicon",{},function(){return[(X(),bt(Tn(t.incrementIcon?"span":"ChevronUpIcon"),ie({class:[t.incrementIcon,A.class]},t.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"]),M("span",ie(t.ptm("minute"),{"data-pc-group-section":"timepickerlabel"}),Ue(d.formattedCurrentMinute),17),ge(s,ie({class:t.cx("pcDecrementButton"),"aria-label":t.$primevue.config.locale.prevMinute,disabled:t.disabled,onMousedown:e[30]||(e[30]=function(A){return d.onTimePickerElementMouseDown(A,1,-1)}),onMouseup:e[31]||(e[31]=function(A){return d.onTimePickerElementMouseUp(A)}),onKeydown:[d.onContainerButtonKeydown,e[33]||(e[33]=qi(function(A){return d.onTimePickerElementMouseDown(A,1,-1)},["enter"])),e[34]||(e[34]=qi(function(A){return d.onTimePickerElementMouseDown(A,1,-1)},["space"]))],onMouseleave:e[32]||(e[32]=function(A){return d.onTimePickerElementMouseLeave()}),onKeyup:[e[35]||(e[35]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["enter"])),e[36]||(e[36]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:Xe(function(A){return[jt(t.$slots,"decrementicon",{},function(){return[(X(),bt(Tn(t.decrementIcon?"span":"ChevronDownIcon"),ie({class:[t.decrementIcon,A.class]},t.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","onKeydown","pt"])],16),t.showSeconds?(X(),pe("div",ie({key:0,class:t.cx("separatorContainer")},t.ptm("separatorContainer"),{"data-pc-group-section":"timepickerContainer"}),[M("span",ie(t.ptm("separator"),{"data-pc-group-section":"timepickerlabel"}),Ue(t.timeSeparator),17)],16)):Ct("",!0),t.showSeconds?(X(),pe("div",ie({key:1,class:t.cx("secondPicker")},t.ptm("secondPicker"),{"data-pc-group-section":"timepickerContainer"}),[ge(s,ie({class:t.cx("pcIncrementButton"),"aria-label":t.$primevue.config.locale.nextSecond,disabled:t.disabled,unstyled:t.unstyled,onMousedown:e[37]||(e[37]=function(A){return d.onTimePickerElementMouseDown(A,2,1)}),onMouseup:e[38]||(e[38]=function(A){return d.onTimePickerElementMouseUp(A)}),onKeydown:[d.onContainerButtonKeydown,e[40]||(e[40]=qi(function(A){return d.onTimePickerElementMouseDown(A,2,1)},["enter"])),e[41]||(e[41]=qi(function(A){return d.onTimePickerElementMouseDown(A,2,1)},["space"]))],onMouseleave:e[39]||(e[39]=function(A){return d.onTimePickerElementMouseLeave()}),onKeyup:[e[42]||(e[42]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["enter"])),e[43]||(e[43]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:Xe(function(A){return[jt(t.$slots,"incrementicon",{},function(){return[(X(),bt(Tn(t.incrementIcon?"span":"ChevronUpIcon"),ie({class:[t.incrementIcon,A.class]},t.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"]),M("span",ie(t.ptm("second"),{"data-pc-group-section":"timepickerlabel"}),Ue(d.formattedCurrentSecond),17),ge(s,ie({class:t.cx("pcDecrementButton"),"aria-label":t.$primevue.config.locale.prevSecond,disabled:t.disabled,unstyled:t.unstyled,onMousedown:e[44]||(e[44]=function(A){return d.onTimePickerElementMouseDown(A,2,-1)}),onMouseup:e[45]||(e[45]=function(A){return d.onTimePickerElementMouseUp(A)}),onKeydown:[d.onContainerButtonKeydown,e[47]||(e[47]=qi(function(A){return d.onTimePickerElementMouseDown(A,2,-1)},["enter"])),e[48]||(e[48]=qi(function(A){return d.onTimePickerElementMouseDown(A,2,-1)},["space"]))],onMouseleave:e[46]||(e[46]=function(A){return d.onTimePickerElementMouseLeave()}),onKeyup:[e[49]||(e[49]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["enter"])),e[50]||(e[50]=qi(function(A){return d.onTimePickerElementMouseUp(A)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:Xe(function(A){return[jt(t.$slots,"decrementicon",{},function(){return[(X(),bt(Tn(t.decrementIcon?"span":"ChevronDownIcon"),ie({class:[t.decrementIcon,A.class]},t.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"])],16)):Ct("",!0),t.hourFormat=="12"?(X(),pe("div",ie({key:2,class:t.cx("separatorContainer")},t.ptm("separatorContainer"),{"data-pc-group-section":"timepickerContainer"}),[M("span",ie(t.ptm("separator"),{"data-pc-group-section":"timepickerlabel"}),Ue(t.timeSeparator),17)],16)):Ct("",!0),t.hourFormat=="12"?(X(),pe("div",ie({key:3,class:t.cx("ampmPicker")},t.ptm("ampmPicker")),[ge(s,ie({class:t.cx("pcIncrementButton"),"aria-label":t.$primevue.config.locale.am,disabled:t.disabled,unstyled:t.unstyled,onClick:e[51]||(e[51]=function(A){return d.toggleAMPM(A)}),onKeydown:d.onContainerButtonKeydown},t.timepickerButtonProps,{pt:t.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:Xe(function(A){return[jt(t.$slots,"incrementicon",{class:vn(t.cx("incrementIcon"))},function(){return[(X(),bt(Tn(t.incrementIcon?"span":"ChevronUpIcon"),ie({class:[t.cx("incrementIcon"),A.class]},t.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"]),M("span",ie(t.ptm("ampm"),{"data-pc-group-section":"timepickerlabel"}),Ue(m.pm?t.$primevue.config.locale.pm:t.$primevue.config.locale.am),17),ge(s,ie({class:t.cx("pcDecrementButton"),"aria-label":t.$primevue.config.locale.pm,disabled:t.disabled,onClick:e[52]||(e[52]=function(A){return d.toggleAMPM(A)}),onKeydown:d.onContainerButtonKeydown},t.timepickerButtonProps,{pt:t.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:Xe(function(A){return[jt(t.$slots,"decrementicon",{class:vn(t.cx("decrementIcon"))},function(){return[(X(),bt(Tn(t.decrementIcon?"span":"ChevronDownIcon"),ie({class:[t.cx("decrementIcon"),A.class]},t.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","onKeydown","pt"])],16)):Ct("",!0)],16)):Ct("",!0),t.showButtonBar?(X(),pe("div",ie({key:2,class:t.cx("buttonbar")},t.ptm("buttonbar")),[ge(s,ie({label:d.todayLabel,onClick:e[53]||(e[53]=function(A){return d.onTodayButtonClick(A)}),class:t.cx("pcTodayButton"),unstyled:t.unstyled,onKeydown:d.onContainerButtonKeydown},t.todayButtonProps,{pt:t.ptm("pcTodayButton"),"data-pc-group-section":"button"}),null,16,["label","class","unstyled","onKeydown","pt"]),ge(s,ie({label:d.clearLabel,onClick:e[54]||(e[54]=function(A){return d.onClearButtonClick(A)}),class:t.cx("pcClearButton"),unstyled:t.unstyled,onKeydown:d.onContainerButtonKeydown},t.clearButtonProps,{pt:t.ptm("pcClearButton"),"data-pc-group-section":"button"}),null,16,["label","class","unstyled","onKeydown","pt"])],16)):Ct("",!0),jt(t.$slots,"footer")],16,$$)):Ct("",!0)]}),_:3},16,["onAfterEnter","onAfterLeave","onLeave"])]}),_:3},8,["appendTo","disabled"])],16,B$)}t6.render=Y$;var TS={name:"Calendar",extends:t6,mounted:function(){console.warn("Deprecated since v4. Use DatePicker component instead.")}},n6={name:"AngleRightIcon",extends:Qr};function J$(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z",fill:"currentColor"},null,-1)]),16)}n6.render=J$;var Rf={name:"TimesIcon",extends:Qr};function Q$(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z",fill:"currentColor"},null,-1)]),16)}Rf.render=Q$;var Xu={name:"CheckIcon",extends:Qr};function eN(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z",fill:"currentColor"},null,-1)]),16)}Xu.render=eN;var r6={name:"MinusIcon",extends:Qr};function tN(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z",fill:"currentColor"},null,-1)]),16)}r6.render=tN;var nN=function(e){var n=e.dt;return`
.p-checkbox {
    position: relative;
    display: inline-flex;
    user-select: none;
    vertical-align: bottom;
    width: `.concat(n("checkbox.width"),`;
    height: `).concat(n("checkbox.height"),`;
}

.p-checkbox-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    inset-block-start: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border: 1px solid transparent;
    border-radius: `).concat(n("checkbox.border.radius"),`;
}

.p-checkbox-box {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: `).concat(n("checkbox.border.radius"),`;
    border: 1px solid `).concat(n("checkbox.border.color"),`;
    background: `).concat(n("checkbox.background"),`;
    width: `).concat(n("checkbox.width"),`;
    height: `).concat(n("checkbox.height"),`;
    transition: background `).concat(n("checkbox.transition.duration"),", color ").concat(n("checkbox.transition.duration"),", border-color ").concat(n("checkbox.transition.duration"),", box-shadow ").concat(n("checkbox.transition.duration"),", outline-color ").concat(n("checkbox.transition.duration"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("checkbox.shadow"),`;
}

.p-checkbox-icon {
    transition-duration: `).concat(n("checkbox.transition.duration"),`;
    color: `).concat(n("checkbox.icon.color"),`;
    font-size: `).concat(n("checkbox.icon.size"),`;
    width: `).concat(n("checkbox.icon.size"),`;
    height: `).concat(n("checkbox.icon.size"),`;
}

.p-checkbox:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    border-color: `).concat(n("checkbox.hover.border.color"),`;
}

.p-checkbox-checked .p-checkbox-box {
    border-color: `).concat(n("checkbox.checked.border.color"),`;
    background: `).concat(n("checkbox.checked.background"),`;
}

.p-checkbox-checked .p-checkbox-icon {
    color: `).concat(n("checkbox.icon.checked.color"),`;
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    background: `).concat(n("checkbox.checked.hover.background"),`;
    border-color: `).concat(n("checkbox.checked.hover.border.color"),`;
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-icon {
    color: `).concat(n("checkbox.icon.checked.hover.color"),`;
}

.p-checkbox:not(.p-disabled):has(.p-checkbox-input:focus-visible) .p-checkbox-box {
    border-color: `).concat(n("checkbox.focus.border.color"),`;
    box-shadow: `).concat(n("checkbox.focus.ring.shadow"),`;
    outline: `).concat(n("checkbox.focus.ring.width")," ").concat(n("checkbox.focus.ring.style")," ").concat(n("checkbox.focus.ring.color"),`;
    outline-offset: `).concat(n("checkbox.focus.ring.offset"),`;
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:focus-visible) .p-checkbox-box {
    border-color: `).concat(n("checkbox.checked.focus.border.color"),`;
}

.p-checkbox.p-invalid > .p-checkbox-box {
    border-color: `).concat(n("checkbox.invalid.border.color"),`;
}

.p-checkbox.p-variant-filled .p-checkbox-box {
    background: `).concat(n("checkbox.filled.background"),`;
}

.p-checkbox-checked.p-variant-filled .p-checkbox-box {
    background: `).concat(n("checkbox.checked.background"),`;
}

.p-checkbox-checked.p-variant-filled:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    background: `).concat(n("checkbox.checked.hover.background"),`;
}

.p-checkbox.p-disabled {
    opacity: 1;
}

.p-checkbox.p-disabled .p-checkbox-box {
    background: `).concat(n("checkbox.disabled.background"),`;
    border-color: `).concat(n("checkbox.checked.disabled.border.color"),`;
}

.p-checkbox.p-disabled .p-checkbox-box .p-checkbox-icon {
    color: `).concat(n("checkbox.icon.disabled.color"),`;
}

.p-checkbox-sm,
.p-checkbox-sm .p-checkbox-box {
    width: `).concat(n("checkbox.sm.width"),`;
    height: `).concat(n("checkbox.sm.height"),`;
}

.p-checkbox-sm .p-checkbox-icon {
    font-size: `).concat(n("checkbox.icon.sm.size"),`;
    width: `).concat(n("checkbox.icon.sm.size"),`;
    height: `).concat(n("checkbox.icon.sm.size"),`;
}

.p-checkbox-lg,
.p-checkbox-lg .p-checkbox-box {
    width: `).concat(n("checkbox.lg.width"),`;
    height: `).concat(n("checkbox.lg.height"),`;
}

.p-checkbox-lg .p-checkbox-icon {
    font-size: `).concat(n("checkbox.icon.lg.size"),`;
    width: `).concat(n("checkbox.icon.lg.size"),`;
    height: `).concat(n("checkbox.icon.lg.size"),`;
}
`)},rN={root:function(e){var n=e.instance,l=e.props;return["p-checkbox p-component",{"p-checkbox-checked":n.checked,"p-disabled":l.disabled,"p-invalid":n.$pcCheckboxGroup?n.$pcCheckboxGroup.$invalid:n.$invalid,"p-variant-filled":n.$variant==="filled","p-checkbox-sm p-inputfield-sm":l.size==="small","p-checkbox-lg p-inputfield-lg":l.size==="large"}]},box:"p-checkbox-box",input:"p-checkbox-input",icon:"p-checkbox-icon"},iN=Xn.extend({name:"checkbox",theme:nN,classes:rN}),oN={name:"BaseCheckbox",extends:Ah,props:{value:null,binary:Boolean,indeterminate:{type:Boolean,default:!1},trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:iN,provide:function(){return{$pcCheckbox:this,$parentInstance:this}}};function sN(t){return uN(t)||cN(t)||lN(t)||aN()}function aN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lN(t,e){if(t){if(typeof t=="string")return p2(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p2(t,e):void 0}}function cN(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uN(t){if(Array.isArray(t))return p2(t)}function p2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}var a0={name:"Checkbox",extends:oN,inheritAttrs:!1,emits:["change","focus","blur","update:indeterminate"],inject:{$pcCheckboxGroup:{default:void 0}},data:function(){return{d_indeterminate:this.indeterminate}},watch:{indeterminate:function(e){this.d_indeterminate=e}},methods:{getPTOptions:function(e){var n=e==="root"?this.ptmi:this.ptm;return n(e,{context:{checked:this.checked,indeterminate:this.d_indeterminate,disabled:this.disabled}})},onChange:function(e){var n=this;if(!this.disabled&&!this.readonly){var l=this.$pcCheckboxGroup?this.$pcCheckboxGroup.d_value:this.d_value,m;this.binary?m=this.d_indeterminate?this.trueValue:this.checked?this.falseValue:this.trueValue:this.checked||this.d_indeterminate?m=l.filter(function(d){return!$c(d,n.value)}):m=l?[].concat(sN(l),[this.value]):[this.value],this.d_indeterminate&&(this.d_indeterminate=!1,this.$emit("update:indeterminate",this.d_indeterminate)),this.$pcCheckboxGroup?this.$pcCheckboxGroup.writeValue(m,e):this.writeValue(m,e),this.$emit("change",e)}},onFocus:function(e){this.$emit("focus",e)},onBlur:function(e){var n,l;this.$emit("blur",e),(n=(l=this.formField).onBlur)===null||n===void 0||n.call(l,e)}},computed:{groupName:function(){return this.$pcCheckboxGroup?this.$pcCheckboxGroup.groupName:this.$formName},checked:function(){var e=this.$pcCheckboxGroup?this.$pcCheckboxGroup.d_value:this.d_value;return this.d_indeterminate?!1:this.binary?e===this.trueValue:i7(this.value,e)}},components:{CheckIcon:Xu,MinusIcon:r6}},dN=["data-p-checked","data-p-indeterminate","data-p-disabled"],hN=["id","value","name","checked","tabindex","disabled","readonly","required","aria-labelledby","aria-label","aria-invalid","aria-checked"];function pN(t,e,n,l,m,d){var x=wn("CheckIcon"),s=wn("MinusIcon");return X(),pe("div",ie({class:t.cx("root")},d.getPTOptions("root"),{"data-p-checked":d.checked,"data-p-indeterminate":m.d_indeterminate||void 0,"data-p-disabled":t.disabled}),[M("input",ie({id:t.inputId,type:"checkbox",class:[t.cx("input"),t.inputClass],style:t.inputStyle,value:t.value,name:d.groupName,checked:d.checked,tabindex:t.tabindex,disabled:t.disabled,readonly:t.readonly,required:t.required,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-invalid":t.invalid||void 0,"aria-checked":m.d_indeterminate?"mixed":void 0,onFocus:e[0]||(e[0]=function(){return d.onFocus&&d.onFocus.apply(d,arguments)}),onBlur:e[1]||(e[1]=function(){return d.onBlur&&d.onBlur.apply(d,arguments)}),onChange:e[2]||(e[2]=function(){return d.onChange&&d.onChange.apply(d,arguments)})},d.getPTOptions("input")),null,16,hN),M("div",ie({class:t.cx("box")},d.getPTOptions("box")),[jt(t.$slots,"icon",{checked:d.checked,indeterminate:m.d_indeterminate,class:vn(t.cx("icon"))},function(){return[d.checked?(X(),bt(x,ie({key:0,class:t.cx("icon")},d.getPTOptions("icon")),null,16,["class"])):m.d_indeterminate?(X(),bt(s,ie({key:1,class:t.cx("icon")},d.getPTOptions("icon")),null,16,["class"])):Ct("",!0)]})],16)],16,dN)}a0.render=pN;var fN=Xn.extend({name:"column"}),mN={name:"BaseColumn",extends:mr,props:{columnKey:{type:null,default:null},field:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},filterField:{type:[String,Function],default:null},dataType:{type:String,default:"text"},sortable:{type:Boolean,default:!1},header:{type:null,default:null},footer:{type:null,default:null},style:{type:null,default:null},class:{type:String,default:null},headerStyle:{type:null,default:null},headerClass:{type:String,default:null},bodyStyle:{type:null,default:null},bodyClass:{type:String,default:null},footerStyle:{type:null,default:null},footerClass:{type:String,default:null},showFilterMenu:{type:Boolean,default:!0},showFilterOperator:{type:Boolean,default:!0},showClearButton:{type:Boolean,default:!0},showApplyButton:{type:Boolean,default:!0},showFilterMatchModes:{type:Boolean,default:!0},showAddButton:{type:Boolean,default:!0},filterMatchModeOptions:{type:Array,default:null},maxConstraints:{type:Number,default:2},excludeGlobalFilter:{type:Boolean,default:!1},filterHeaderClass:{type:String,default:null},filterHeaderStyle:{type:null,default:null},filterMenuClass:{type:String,default:null},filterMenuStyle:{type:null,default:null},selectionMode:{type:String,default:null},expander:{type:Boolean,default:!1},colspan:{type:Number,default:null},rowspan:{type:Number,default:null},rowReorder:{type:Boolean,default:!1},rowReorderIcon:{type:String,default:void 0},reorderableColumn:{type:Boolean,default:!0},rowEditor:{type:Boolean,default:!1},frozen:{type:Boolean,default:!1},alignFrozen:{type:String,default:"left"},exportable:{type:Boolean,default:!0},exportHeader:{type:String,default:null},exportFooter:{type:String,default:null},filterMatchMode:{type:String,default:null},hidden:{type:Boolean,default:!1}},style:fN,provide:function(){return{$pcColumn:this,$parentInstance:this}}},jn={name:"Column",extends:mN,inheritAttrs:!1,inject:["$columns"],mounted:function(){var e;(e=this.$columns)===null||e===void 0||e.add(this.$)},unmounted:function(){var e;(e=this.$columns)===null||e===void 0||e.delete(this.$)},render:function(){return null}},es={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"},h_={AND:"and",OR:"or"};function w4(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=gN(t))||e){n&&(t=n);var l=0,m=function(){};return{s:m,n:function(){return l>=t.length?{done:!0}:{done:!1,value:t[l++]}},e:function(E){throw E},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,x=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var E=n.next();return x=E.done,E},e:function(E){s=!0,d=E},f:function(){try{x||n.return==null||n.return()}finally{if(s)throw d}}}}function gN(t,e){if(t){if(typeof t=="string")return S4(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S4(t,e):void 0}}function S4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}var f2={filter:function(e,n,l,m,d){var x=[];if(!e)return x;var s=w4(e),T;try{for(s.s();!(T=s.n()).done;){var E=T.value;if(typeof E=="string"){if(this.filters[m](E,l,d)){x.push(E);continue}}else{var A=w4(n),z;try{for(A.s();!(z=A.n()).done;){var j=z.value,U=wi(E,j);if(this.filters[m](U,l,d)){x.push(E);break}}}catch(K){A.e(K)}finally{A.f()}}}}catch(K){s.e(K)}finally{s.f()}return x},filters:{startsWith:function(e,n,l){if(n==null||n==="")return!0;if(e==null)return!1;var m=wa(n.toString()).toLocaleLowerCase(l),d=wa(e.toString()).toLocaleLowerCase(l);return d.slice(0,m.length)===m},contains:function(e,n,l){if(n==null||n==="")return!0;if(e==null)return!1;var m=wa(n.toString()).toLocaleLowerCase(l),d=wa(e.toString()).toLocaleLowerCase(l);return d.indexOf(m)!==-1},notContains:function(e,n,l){if(n==null||n==="")return!0;if(e==null)return!1;var m=wa(n.toString()).toLocaleLowerCase(l),d=wa(e.toString()).toLocaleLowerCase(l);return d.indexOf(m)===-1},endsWith:function(e,n,l){if(n==null||n==="")return!0;if(e==null)return!1;var m=wa(n.toString()).toLocaleLowerCase(l),d=wa(e.toString()).toLocaleLowerCase(l);return d.indexOf(m,d.length-m.length)!==-1},equals:function(e,n,l){return n==null||n===""?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()===n.getTime():wa(e.toString()).toLocaleLowerCase(l)==wa(n.toString()).toLocaleLowerCase(l)},notEquals:function(e,n,l){return n==null||n===""?!1:e==null?!0:e.getTime&&n.getTime?e.getTime()!==n.getTime():wa(e.toString()).toLocaleLowerCase(l)!=wa(n.toString()).toLocaleLowerCase(l)},in:function(e,n){if(n==null||n.length===0)return!0;for(var l=0;l<n.length;l++)if($c(e,n[l]))return!0;return!1},between:function(e,n){return n==null||n[0]==null||n[1]==null?!0:e==null?!1:e.getTime?n[0].getTime()<=e.getTime()&&e.getTime()<=n[1].getTime():n[0]<=e&&e<=n[1]},lt:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()<n.getTime():e<n},lte:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()<=n.getTime():e<=n},gt:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()>n.getTime():e>n},gte:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()>=n.getTime():e>=n},dateIs:function(e,n){return n==null?!0:e==null?!1:e.toDateString()===n.toDateString()},dateIsNot:function(e,n){return n==null?!0:e==null?!1:e.toDateString()!==n.toDateString()},dateBefore:function(e,n){return n==null?!0:e==null?!1:e.getTime()<n.getTime()},dateAfter:function(e,n){return n==null?!0:e==null?!1:e.getTime()>n.getTime()}},register:function(e,n){this.filters[e]=n}};function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function C4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function yb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C4(Object(n),!0).forEach(function(l){yN(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function yN(t,e,n){return(e=vN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vN(t){var e=bN(t,"string");return ky(e)=="symbol"?e:e+""}function bN(t,e){if(ky(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(ky(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _N={ripple:!1,inputStyle:null,inputVariant:null,locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",completed:"Completed",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",today:"Today",weekHeader:"Wk",firstDayOfWeek:0,showMonthAfterYear:!1,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",fileChosenMessage:"{0} files",noFileChosenMessage:"No file chosen",emptyMessage:"No available options",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"Page {page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List"}},filterMatchModeOptions:{text:[es.STARTS_WITH,es.CONTAINS,es.NOT_CONTAINS,es.ENDS_WITH,es.EQUALS,es.NOT_EQUALS],numeric:[es.EQUALS,es.NOT_EQUALS,es.LESS_THAN,es.LESS_THAN_OR_EQUAL_TO,es.GREATER_THAN,es.GREATER_THAN_OR_EQUAL_TO],date:[es.DATE_IS,es.DATE_IS_NOT,es.DATE_BEFORE,es.DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100},theme:void 0,unstyled:!1,pt:void 0,ptOptions:{mergeSections:!0,mergeProps:!1},csp:{nonce:void 0}},xN=Symbol();function wN(t,e){var n={config:Tf(e)};return t.config.globalProperties.$primevue=n,t.provide(xN,n),SN(),CN(t,n),n}var af=[];function SN(){el.clear(),af.forEach(function(t){return t==null?void 0:t()}),af=[]}function CN(t,e){var n=Ke(!1),l=function(){var E;if(((E=e.config)===null||E===void 0?void 0:E.theme)!=="none"&&!Zi.isStyleNameLoaded("common")){var A,z,j=((A=Xn.getCommonTheme)===null||A===void 0?void 0:A.call(Xn))||{},U=j.primitive,K=j.semantic,oe=j.global,fe=j.style,me={nonce:(z=e.config)===null||z===void 0||(z=z.csp)===null||z===void 0?void 0:z.nonce};Xn.load(U==null?void 0:U.css,yb({name:"primitive-variables"},me)),Xn.load(K==null?void 0:K.css,yb({name:"semantic-variables"},me)),Xn.load(oe==null?void 0:oe.css,yb({name:"global-variables"},me)),Xn.loadTheme(yb({name:"global-style"},me),fe),Zi.setLoadedStyleName("common")}};el.on("theme:change",function(T){n.value||(t.config.globalProperties.$primevue.config.theme=T,n.value=!0)});var m=ho(e.config,function(T,E){sf.emit("config:change",{newValue:T,oldValue:E})},{immediate:!0,deep:!0}),d=ho(function(){return e.config.ripple},function(T,E){sf.emit("config:ripple:change",{newValue:T,oldValue:E})},{immediate:!0,deep:!0}),x=ho(function(){return e.config.theme},function(T,E){n.value||Zi.setTheme(T),e.config.unstyled||l(),n.value=!1,sf.emit("config:theme:change",{newValue:T,oldValue:E})},{immediate:!0,deep:!1}),s=ho(function(){return e.config.unstyled},function(T,E){!T&&e.config.theme&&l(),sf.emit("config:unstyled:change",{newValue:T,oldValue:E})},{immediate:!0,deep:!0});af.push(m),af.push(d),af.push(x),af.push(s)}var kN={install:function(e,n){var l=a7(_N,n);wN(e,l)}},lf=o0(),TN={install:function(e){var n={require:function(m){lf.emit("confirm",m)},close:function(){lf.emit("close")}};e.config.globalProperties.$confirm=n,e.provide(WP,n)}},i6={name:"WindowMaximizeIcon",extends:Qr};function EN(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14ZM9.77805 7.42192C9.89013 7.534 10.0415 7.59788 10.2 7.59995C10.3585 7.59788 10.5099 7.534 10.622 7.42192C10.7341 7.30985 10.798 7.15844 10.8 6.99995V3.94242C10.8066 3.90505 10.8096 3.86689 10.8089 3.82843C10.8079 3.77159 10.7988 3.7157 10.7824 3.6623C10.756 3.55552 10.701 3.45698 10.622 3.37798C10.5099 3.2659 10.3585 3.20202 10.2 3.19995H7.00002C6.84089 3.19995 6.68828 3.26317 6.57576 3.37569C6.46324 3.48821 6.40002 3.64082 6.40002 3.79995C6.40002 3.95908 6.46324 4.11169 6.57576 4.22422C6.68828 4.33674 6.84089 4.39995 7.00002 4.39995H8.80006L6.19997 7.00005C6.10158 7.11005 6.04718 7.25246 6.04718 7.40005C6.04718 7.54763 6.10158 7.69004 6.19997 7.80005C6.30202 7.91645 6.44561 7.98824 6.59997 8.00005C6.75432 7.98824 6.89791 7.91645 6.99997 7.80005L9.60002 5.26841V6.99995C9.6021 7.15844 9.66598 7.30985 9.77805 7.42192ZM1.4 14H3.8C4.17066 13.9979 4.52553 13.8498 4.78763 13.5877C5.04973 13.3256 5.1979 12.9707 5.2 12.6V10.2C5.1979 9.82939 5.04973 9.47452 4.78763 9.21242C4.52553 8.95032 4.17066 8.80215 3.8 8.80005H1.4C1.02934 8.80215 0.674468 8.95032 0.412371 9.21242C0.150274 9.47452 0.00210008 9.82939 0 10.2V12.6C0.00210008 12.9707 0.150274 13.3256 0.412371 13.5877C0.674468 13.8498 1.02934 13.9979 1.4 14ZM1.25858 10.0586C1.29609 10.0211 1.34696 10 1.4 10H3.8C3.85304 10 3.90391 10.0211 3.94142 10.0586C3.97893 10.0961 4 10.147 4 10.2V12.6C4 12.6531 3.97893 12.704 3.94142 12.7415C3.90391 12.779 3.85304 12.8 3.8 12.8H1.4C1.34696 12.8 1.29609 12.779 1.25858 12.7415C1.22107 12.704 1.2 12.6531 1.2 12.6V10.2C1.2 10.147 1.22107 10.0961 1.25858 10.0586Z",fill:"currentColor"},null,-1)]),16)}i6.render=EN;var o6={name:"WindowMinimizeIcon",extends:Qr};function IN(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0ZM6.368 7.952C6.44137 7.98326 6.52025 7.99958 6.6 8H9.8C9.95913 8 10.1117 7.93678 10.2243 7.82426C10.3368 7.71174 10.4 7.55913 10.4 7.4C10.4 7.24087 10.3368 7.08826 10.2243 6.97574C10.1117 6.86321 9.95913 6.8 9.8 6.8H8.048L10.624 4.224C10.73 4.11026 10.7877 3.95982 10.7849 3.80438C10.7822 3.64894 10.7192 3.50063 10.6093 3.3907C10.4994 3.28077 10.3511 3.2178 10.1956 3.21506C10.0402 3.21232 9.88974 3.27002 9.776 3.376L7.2 5.952V4.2C7.2 4.04087 7.13679 3.88826 7.02426 3.77574C6.91174 3.66321 6.75913 3.6 6.6 3.6C6.44087 3.6 6.28826 3.66321 6.17574 3.77574C6.06321 3.88826 6 4.04087 6 4.2V7.4C6.00042 7.47975 6.01674 7.55862 6.048 7.632C6.07656 7.70442 6.11971 7.7702 6.17475 7.82524C6.2298 7.88029 6.29558 7.92344 6.368 7.952ZM1.4 8.80005H3.8C4.17066 8.80215 4.52553 8.95032 4.78763 9.21242C5.04973 9.47452 5.1979 9.82939 5.2 10.2V12.6C5.1979 12.9707 5.04973 13.3256 4.78763 13.5877C4.52553 13.8498 4.17066 13.9979 3.8 14H1.4C1.02934 13.9979 0.674468 13.8498 0.412371 13.5877C0.150274 13.3256 0.00210008 12.9707 0 12.6V10.2C0.00210008 9.82939 0.150274 9.47452 0.412371 9.21242C0.674468 8.95032 1.02934 8.80215 1.4 8.80005ZM3.94142 12.7415C3.97893 12.704 4 12.6531 4 12.6V10.2C4 10.147 3.97893 10.0961 3.94142 10.0586C3.90391 10.0211 3.85304 10 3.8 10H1.4C1.34696 10 1.29609 10.0211 1.25858 10.0586C1.22107 10.0961 1.2 10.147 1.2 10.2V12.6C1.2 12.6531 1.22107 12.704 1.25858 12.7415C1.29609 12.779 1.34696 12.8 1.4 12.8H3.8C3.85304 12.8 3.90391 12.779 3.94142 12.7415Z",fill:"currentColor"},null,-1)]),16)}o6.render=IN;var PN=Xn.extend({name:"focustrap-directive"}),AN=fi.extend({style:PN});function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}function k4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function T4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k4(Object(n),!0).forEach(function(l){RN(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function RN(t,e,n){return(e=MN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MN(t){var e=DN(t,"string");return Ty(e)=="symbol"?e:e+""}function DN(t,e){if(Ty(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Ty(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ES=AN.extend("focustrap",{mounted:function(e,n){var l=n.value||{},m=l.disabled;m||(this.createHiddenFocusableElements(e,n),this.bind(e,n),this.autoElementFocus(e,n)),e.setAttribute("data-pd-focustrap",!0),this.$el=e},updated:function(e,n){var l=n.value||{},m=l.disabled;m&&this.unbind(e)},unmounted:function(e){this.unbind(e)},methods:{getComputedSelector:function(e){return':not(.p-hidden-focusable):not([data-p-hidden-focusable="true"])'.concat(e??"")},bind:function(e,n){var l=this,m=n.value||{},d=m.onFocusIn,x=m.onFocusOut;e.$_pfocustrap_mutationobserver=new MutationObserver(function(s){s.forEach(function(T){if(T.type==="childList"&&!e.contains(document.activeElement)){var E=function(z){var j=j5(z)?j5(z,l.getComputedSelector(e.$_pfocustrap_focusableselector))?z:Nu(e,l.getComputedSelector(e.$_pfocustrap_focusableselector)):Nu(z);return Zr(j)?j:z.nextSibling&&E(z.nextSibling)};Ro(E(T.nextSibling))}})}),e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_mutationobserver.observe(e,{childList:!0}),e.$_pfocustrap_focusinlistener=function(s){return d&&d(s)},e.$_pfocustrap_focusoutlistener=function(s){return x&&x(s)},e.addEventListener("focusin",e.$_pfocustrap_focusinlistener),e.addEventListener("focusout",e.$_pfocustrap_focusoutlistener)},unbind:function(e){e.$_pfocustrap_mutationobserver&&e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_focusinlistener&&e.removeEventListener("focusin",e.$_pfocustrap_focusinlistener)&&(e.$_pfocustrap_focusinlistener=null),e.$_pfocustrap_focusoutlistener&&e.removeEventListener("focusout",e.$_pfocustrap_focusoutlistener)&&(e.$_pfocustrap_focusoutlistener=null)},autoFocus:function(e){this.autoElementFocus(this.$el,{value:T4(T4({},e),{},{autoFocus:!0})})},autoElementFocus:function(e,n){var l=n.value||{},m=l.autoFocusSelector,d=m===void 0?"":m,x=l.firstFocusableSelector,s=x===void 0?"":x,T=l.autoFocus,E=T===void 0?!1:T,A=Nu(e,"[autofocus]".concat(this.getComputedSelector(d)));E&&!A&&(A=Nu(e,this.getComputedSelector(s))),Ro(A)},onFirstHiddenElementFocus:function(e){var n,l=e.currentTarget,m=e.relatedTarget,d=m===l.$_pfocustrap_lasthiddenfocusableelement||!((n=this.$el)!==null&&n!==void 0&&n.contains(m))?Nu(l.parentElement,this.getComputedSelector(l.$_pfocustrap_focusableselector)):l.$_pfocustrap_lasthiddenfocusableelement;Ro(d)},onLastHiddenElementFocus:function(e){var n,l=e.currentTarget,m=e.relatedTarget,d=m===l.$_pfocustrap_firsthiddenfocusableelement||!((n=this.$el)!==null&&n!==void 0&&n.contains(m))?bP(l.parentElement,this.getComputedSelector(l.$_pfocustrap_focusableselector)):l.$_pfocustrap_firsthiddenfocusableelement;Ro(d)},createHiddenFocusableElements:function(e,n){var l=this,m=n.value||{},d=m.tabIndex,x=d===void 0?0:d,s=m.firstFocusableSelector,T=s===void 0?"":s,E=m.lastFocusableSelector,A=E===void 0?"":E,z=function(oe){return i_("span",{class:"p-hidden-accessible p-hidden-focusable",tabIndex:x,role:"presentation","aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0,onFocus:oe==null?void 0:oe.bind(l)})},j=z(this.onFirstHiddenElementFocus),U=z(this.onLastHiddenElementFocus);j.$_pfocustrap_lasthiddenfocusableelement=U,j.$_pfocustrap_focusableselector=T,j.setAttribute("data-pc-section","firstfocusableelement"),U.$_pfocustrap_firsthiddenfocusableelement=j,U.$_pfocustrap_focusableselector=A,U.setAttribute("data-pc-section","lastfocusableelement"),e.prepend(j),e.append(U)}}}),LN=function(e){var n=e.dt;return`
.p-dialog {
    max-height: 90%;
    transform: scale(1);
    border-radius: `.concat(n("dialog.border.radius"),`;
    box-shadow: `).concat(n("dialog.shadow"),`;
    background: `).concat(n("dialog.background"),`;
    border: 1px solid `).concat(n("dialog.border.color"),`;
    color: `).concat(n("dialog.color"),`;
}

.p-dialog-content {
    overflow-y: auto;
    padding: `).concat(n("dialog.content.padding"),`;
}

.p-dialog-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
    padding: `).concat(n("dialog.header.padding"),`;
}

.p-dialog-title {
    font-weight: `).concat(n("dialog.title.font.weight"),`;
    font-size: `).concat(n("dialog.title.font.size"),`;
}

.p-dialog-footer {
    flex-shrink: 0;
    padding: `).concat(n("dialog.footer.padding"),`;
    display: flex;
    justify-content: flex-end;
    gap: `).concat(n("dialog.footer.gap"),`;
}

.p-dialog-header-actions {
    display: flex;
    align-items: center;
    gap: `).concat(n("dialog.header.gap"),`;
}

.p-dialog-enter-active {
    transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
}

.p-dialog-leave-active {
    transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.p-dialog-enter-from,
.p-dialog-leave-to {
    opacity: 0;
    transform: scale(0.7);
}

.p-dialog-top .p-dialog,
.p-dialog-bottom .p-dialog,
.p-dialog-left .p-dialog,
.p-dialog-right .p-dialog,
.p-dialog-topleft .p-dialog,
.p-dialog-topright .p-dialog,
.p-dialog-bottomleft .p-dialog,
.p-dialog-bottomright .p-dialog {
    margin: 0.75rem;
    transform: translate3d(0px, 0px, 0px);
}

.p-dialog-top .p-dialog-enter-active,
.p-dialog-top .p-dialog-leave-active,
.p-dialog-bottom .p-dialog-enter-active,
.p-dialog-bottom .p-dialog-leave-active,
.p-dialog-left .p-dialog-enter-active,
.p-dialog-left .p-dialog-leave-active,
.p-dialog-right .p-dialog-enter-active,
.p-dialog-right .p-dialog-leave-active,
.p-dialog-topleft .p-dialog-enter-active,
.p-dialog-topleft .p-dialog-leave-active,
.p-dialog-topright .p-dialog-enter-active,
.p-dialog-topright .p-dialog-leave-active,
.p-dialog-bottomleft .p-dialog-enter-active,
.p-dialog-bottomleft .p-dialog-leave-active,
.p-dialog-bottomright .p-dialog-enter-active,
.p-dialog-bottomright .p-dialog-leave-active {
    transition: all 0.3s ease-out;
}

.p-dialog-top .p-dialog-enter-from,
.p-dialog-top .p-dialog-leave-to {
    transform: translate3d(0px, -100%, 0px);
}

.p-dialog-bottom .p-dialog-enter-from,
.p-dialog-bottom .p-dialog-leave-to {
    transform: translate3d(0px, 100%, 0px);
}

.p-dialog-left .p-dialog-enter-from,
.p-dialog-left .p-dialog-leave-to,
.p-dialog-topleft .p-dialog-enter-from,
.p-dialog-topleft .p-dialog-leave-to,
.p-dialog-bottomleft .p-dialog-enter-from,
.p-dialog-bottomleft .p-dialog-leave-to {
    transform: translate3d(-100%, 0px, 0px);
}

.p-dialog-right .p-dialog-enter-from,
.p-dialog-right .p-dialog-leave-to,
.p-dialog-topright .p-dialog-enter-from,
.p-dialog-topright .p-dialog-leave-to,
.p-dialog-bottomright .p-dialog-enter-from,
.p-dialog-bottomright .p-dialog-leave-to {
    transform: translate3d(100%, 0px, 0px);
}

.p-dialog-left:dir(rtl) .p-dialog-enter-from,
.p-dialog-left:dir(rtl) .p-dialog-leave-to,
.p-dialog-topleft:dir(rtl) .p-dialog-enter-from,
.p-dialog-topleft:dir(rtl) .p-dialog-leave-to,
.p-dialog-bottomleft:dir(rtl) .p-dialog-enter-from,
.p-dialog-bottomleft:dir(rtl) .p-dialog-leave-to {
    transform: translate3d(100%, 0px, 0px);
}

.p-dialog-right:dir(rtl) .p-dialog-enter-from,
.p-dialog-right:dir(rtl) .p-dialog-leave-to,
.p-dialog-topright:dir(rtl) .p-dialog-enter-from,
.p-dialog-topright:dir(rtl) .p-dialog-leave-to,
.p-dialog-bottomright:dir(rtl) .p-dialog-enter-from,
.p-dialog-bottomright:dir(rtl) .p-dialog-leave-to {
    transform: translate3d(-100%, 0px, 0px);
}

.p-dialog-maximized {
    width: 100vw !important;
    height: 100vh !important;
    top: 0px !important;
    left: 0px !important;
    max-height: 100%;
    height: 100%;
    border-radius: 0;
}

.p-dialog-maximized .p-dialog-content {
    flex-grow: 1;
}
`)},ON={mask:function(e){var n=e.position,l=e.modal;return{position:"fixed",height:"100%",width:"100%",left:0,top:0,display:"flex",justifyContent:n==="left"||n==="topleft"||n==="bottomleft"?"flex-start":n==="right"||n==="topright"||n==="bottomright"?"flex-end":"center",alignItems:n==="top"||n==="topleft"||n==="topright"?"flex-start":n==="bottom"||n==="bottomleft"||n==="bottomright"?"flex-end":"center",pointerEvents:l?"auto":"none"}},root:{display:"flex",flexDirection:"column",pointerEvents:"auto"}},zN={mask:function(e){var n=e.props,l=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"],m=l.find(function(d){return d===n.position});return["p-dialog-mask",{"p-overlay-mask p-overlay-mask-enter":n.modal},m?"p-dialog-".concat(m):""]},root:function(e){var n=e.props,l=e.instance;return["p-dialog p-component",{"p-dialog-maximized":n.maximizable&&l.maximized}]},header:"p-dialog-header",title:"p-dialog-title",headerActions:"p-dialog-header-actions",pcMaximizeButton:"p-dialog-maximize-button",pcCloseButton:"p-dialog-close-button",content:"p-dialog-content",footer:"p-dialog-footer"},BN=Xn.extend({name:"dialog",theme:LN,classes:zN,inlineStyles:ON}),FN={name:"BaseDialog",extends:mr,props:{header:{type:null,default:null},footer:{type:null,default:null},visible:{type:Boolean,default:!1},modal:{type:Boolean,default:null},contentStyle:{type:null,default:null},contentClass:{type:String,default:null},contentProps:{type:null,default:null},maximizable:{type:Boolean,default:!1},dismissableMask:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!1},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},position:{type:String,default:"center"},breakpoints:{type:Object,default:null},draggable:{type:Boolean,default:!0},keepInViewport:{type:Boolean,default:!0},minX:{type:Number,default:0},minY:{type:Number,default:0},appendTo:{type:[String,Object],default:"body"},closeIcon:{type:String,default:void 0},maximizeIcon:{type:String,default:void 0},minimizeIcon:{type:String,default:void 0},closeButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}},maximizeButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}},_instance:null},style:BN,provide:function(){return{$pcDialog:this,$parentInstance:this}}},Ra={name:"Dialog",extends:FN,inheritAttrs:!1,emits:["update:visible","show","hide","after-hide","maximize","unmaximize","dragstart","dragend"],provide:function(){var e=this;return{dialogRef:ki(function(){return e._instance})}},data:function(){return{id:this.$attrs.id,containerVisible:this.visible,maximized:!1,focusableMax:null,focusableClose:null,target:null}},watch:{"$attrs.id":function(e){this.id=e||$o()}},documentKeydownListener:null,container:null,mask:null,content:null,headerContainer:null,footerContainer:null,maximizableButton:null,closeButton:null,styleElement:null,dragging:null,documentDragListener:null,documentDragEndListener:null,lastPageX:null,lastPageY:null,maskMouseDownTarget:null,updated:function(){this.visible&&(this.containerVisible=this.visible)},beforeUnmount:function(){this.unbindDocumentState(),this.unbindGlobalListeners(),this.destroyStyle(),this.mask&&this.autoZIndex&&bo.clear(this.mask),this.container=null,this.mask=null},mounted:function(){this.id=this.id||$o(),this.breakpoints&&this.createStyle()},methods:{close:function(){this.$emit("update:visible",!1)},onEnter:function(){this.$emit("show"),this.target=document.activeElement,this.enableDocumentSettings(),this.bindGlobalListeners(),this.autoZIndex&&bo.set("modal",this.mask,this.baseZIndex+this.$primevue.config.zIndex.modal)},onAfterEnter:function(){this.focus()},onBeforeLeave:function(){this.modal&&!this.isUnstyled&&Lc(this.mask,"p-overlay-mask-leave"),this.dragging&&this.documentDragEndListener&&this.documentDragEndListener()},onLeave:function(){this.$emit("hide"),Ro(this.target),this.target=null,this.focusableClose=null,this.focusableMax=null},onAfterLeave:function(){this.autoZIndex&&bo.clear(this.mask),this.containerVisible=!1,this.unbindDocumentState(),this.unbindGlobalListeners(),this.$emit("after-hide")},onMaskMouseDown:function(e){this.maskMouseDownTarget=e.target},onMaskMouseUp:function(){this.dismissableMask&&this.modal&&this.mask===this.maskMouseDownTarget&&this.close()},focus:function(){var e=function(m){return m&&m.querySelector("[autofocus]")},n=this.$slots.footer&&e(this.footerContainer);n||(n=this.$slots.header&&e(this.headerContainer),n||(n=this.$slots.default&&e(this.content),n||(this.maximizable?(this.focusableMax=!0,n=this.maximizableButton):(this.focusableClose=!0,n=this.closeButton)))),n&&Ro(n,{focusVisible:!0})},maximize:function(e){this.maximized?(this.maximized=!1,this.$emit("unmaximize",e)):(this.maximized=!0,this.$emit("maximize",e)),this.modal||(this.maximized?n_():hy())},enableDocumentSettings:function(){(this.modal||!this.modal&&this.blockScroll||this.maximizable&&this.maximized)&&n_()},unbindDocumentState:function(){(this.modal||!this.modal&&this.blockScroll||this.maximizable&&this.maximized)&&hy()},onKeyDown:function(e){e.code==="Escape"&&this.closeOnEscape&&this.close()},bindDocumentKeyDownListener:function(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeyDownListener:function(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},containerRef:function(e){this.container=e},maskRef:function(e){this.mask=e},contentRef:function(e){this.content=e},headerContainerRef:function(e){this.headerContainer=e},footerContainerRef:function(e){this.footerContainer=e},maximizableRef:function(e){this.maximizableButton=e?e.$el:void 0},closeButtonRef:function(e){this.closeButton=e?e.$el:void 0},createStyle:function(){if(!this.styleElement&&!this.isUnstyled){var e;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",If(this.styleElement,"nonce",(e=this.$primevue)===null||e===void 0||(e=e.config)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce),document.head.appendChild(this.styleElement);var n="";for(var l in this.breakpoints)n+=`
                        @media screen and (max-width: `.concat(l,`) {
                            .p-dialog[`).concat(this.$attrSelector,`] {
                                width: `).concat(this.breakpoints[l],` !important;
                            }
                        }
                    `);this.styleElement.innerHTML=n}},destroyStyle:function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},initDrag:function(e){e.target.closest("div").getAttribute("data-pc-section")!=="headeractions"&&this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",document.body.setAttribute("data-p-unselectable-text","true"),!this.isUnstyled&&Sh(document.body,{"user-select":"none"}),this.$emit("dragstart",e))},bindGlobalListeners:function(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.closeOnEscape&&this.closable&&this.bindDocumentKeyDownListener()},unbindGlobalListeners:function(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentKeyDownListener()},bindDocumentDragListener:function(){var e=this;this.documentDragListener=function(n){if(e.dragging){var l=So(e.container),m=jl(e.container),d=n.pageX-e.lastPageX,x=n.pageY-e.lastPageY,s=e.container.getBoundingClientRect(),T=s.left+d,E=s.top+x,A=pS(),z=getComputedStyle(e.container),j=parseFloat(z.marginLeft),U=parseFloat(z.marginTop);e.container.style.position="fixed",e.keepInViewport?(T>=e.minX&&T+l<A.width&&(e.lastPageX=n.pageX,e.container.style.left=T-j+"px"),E>=e.minY&&E+m<A.height&&(e.lastPageY=n.pageY,e.container.style.top=E-U+"px")):(e.lastPageX=n.pageX,e.container.style.left=T-j+"px",e.lastPageY=n.pageY,e.container.style.top=E-U+"px")}},window.document.addEventListener("mousemove",this.documentDragListener)},unbindDocumentDragListener:function(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)},bindDocumentDragEndListener:function(){var e=this;this.documentDragEndListener=function(n){e.dragging&&(e.dragging=!1,document.body.removeAttribute("data-p-unselectable-text"),!e.isUnstyled&&(document.body.style["user-select"]=""),e.$emit("dragend",n))},window.document.addEventListener("mouseup",this.documentDragEndListener)},unbindDocumentDragEndListener:function(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}},computed:{maximizeIconComponent:function(){return this.maximized?this.minimizeIcon?"span":"WindowMinimizeIcon":this.maximizeIcon?"span":"WindowMaximizeIcon"},ariaLabelledById:function(){return this.header!=null||this.$attrs["aria-labelledby"]!==null?this.id+"_header":null},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0}},directives:{ripple:zs,focustrap:ES},components:{Button:jr,Portal:td,WindowMinimizeIcon:o6,WindowMaximizeIcon:i6,TimesIcon:Rf}};function Ey(t){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}function E4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function I4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E4(Object(n),!0).forEach(function(l){$N(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function $N(t,e,n){return(e=NN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NN(t){var e=VN(t,"string");return Ey(e)=="symbol"?e:e+""}function VN(t,e){if(Ey(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Ey(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jN=["aria-labelledby","aria-modal"],UN=["id"];function qN(t,e,n,l,m,d){var x=wn("Button"),s=wn("Portal"),T=No("focustrap");return X(),bt(s,{appendTo:t.appendTo},{default:Xe(function(){return[m.containerVisible?(X(),pe("div",ie({key:0,ref:d.maskRef,class:t.cx("mask"),style:t.sx("mask",!0,{position:t.position,modal:t.modal}),onMousedown:e[1]||(e[1]=function(){return d.onMaskMouseDown&&d.onMaskMouseDown.apply(d,arguments)}),onMouseup:e[2]||(e[2]=function(){return d.onMaskMouseUp&&d.onMaskMouseUp.apply(d,arguments)})},t.ptm("mask")),[ge(Eh,ie({name:"p-dialog",onEnter:d.onEnter,onAfterEnter:d.onAfterEnter,onBeforeLeave:d.onBeforeLeave,onLeave:d.onLeave,onAfterLeave:d.onAfterLeave,appear:""},t.ptm("transition")),{default:Xe(function(){return[t.visible?_r((X(),pe("div",ie({key:0,ref:d.containerRef,class:t.cx("root"),style:t.sx("root"),role:"dialog","aria-labelledby":d.ariaLabelledById,"aria-modal":t.modal},t.ptmi("root")),[t.$slots.container?jt(t.$slots,"container",{key:0,closeCallback:d.close,maximizeCallback:function(A){return d.maximize(A)}}):(X(),pe(an,{key:1},[t.showHeader?(X(),pe("div",ie({key:0,ref:d.headerContainerRef,class:t.cx("header"),onMousedown:e[0]||(e[0]=function(){return d.initDrag&&d.initDrag.apply(d,arguments)})},t.ptm("header")),[jt(t.$slots,"header",{class:vn(t.cx("title"))},function(){return[t.header?(X(),pe("span",ie({key:0,id:d.ariaLabelledById,class:t.cx("title")},t.ptm("title")),Ue(t.header),17,UN)):Ct("",!0)]}),M("div",ie({class:t.cx("headerActions")},t.ptm("headerActions")),[t.maximizable?(X(),bt(x,ie({key:0,ref:d.maximizableRef,autofocus:m.focusableMax,class:t.cx("pcMaximizeButton"),onClick:d.maximize,tabindex:t.maximizable?"0":"-1",unstyled:t.unstyled},t.maximizeButtonProps,{pt:t.ptm("pcMaximizeButton"),"data-pc-group-section":"headericon"}),{icon:Xe(function(E){return[jt(t.$slots,"maximizeicon",{maximized:m.maximized},function(){return[(X(),bt(Tn(d.maximizeIconComponent),ie({class:[E.class,m.maximized?t.minimizeIcon:t.maximizeIcon]},t.ptm("pcMaximizeButton").icon),null,16,["class"]))]})]}),_:3},16,["autofocus","class","onClick","tabindex","unstyled","pt"])):Ct("",!0),t.closable?(X(),bt(x,ie({key:1,ref:d.closeButtonRef,autofocus:m.focusableClose,class:t.cx("pcCloseButton"),onClick:d.close,"aria-label":d.closeAriaLabel,unstyled:t.unstyled},t.closeButtonProps,{pt:t.ptm("pcCloseButton"),"data-pc-group-section":"headericon"}),{icon:Xe(function(E){return[jt(t.$slots,"closeicon",{},function(){return[(X(),bt(Tn(t.closeIcon?"span":"TimesIcon"),ie({class:[t.closeIcon,E.class]},t.ptm("pcCloseButton").icon),null,16,["class"]))]})]}),_:3},16,["autofocus","class","onClick","aria-label","unstyled","pt"])):Ct("",!0)],16)],16)):Ct("",!0),M("div",ie({ref:d.contentRef,class:[t.cx("content"),t.contentClass],style:t.contentStyle},I4(I4({},t.contentProps),t.ptm("content"))),[jt(t.$slots,"default")],16),t.footer||t.$slots.footer?(X(),pe("div",ie({key:1,ref:d.footerContainerRef,class:t.cx("footer")},t.ptm("footer")),[jt(t.$slots,"footer",{},function(){return[tr(Ue(t.footer),1)]})],16)):Ct("",!0)],64))],16,jN)),[[T,{disabled:!t.modal}]]):Ct("",!0)]}),_:3},16,["onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave"])],16)):Ct("",!0)]}),_:3},8,["appendTo"])}Ra.render=qN;var HN=function(e){var n=e.dt;return`
.p-confirmdialog .p-dialog-content {
    display: flex;
    align-items: center;
    gap:  `.concat(n("confirmdialog.content.gap"),`;
}

.p-confirmdialog-icon {
    color: `).concat(n("confirmdialog.icon.color"),`;
    font-size: `).concat(n("confirmdialog.icon.size"),`;
    width: `).concat(n("confirmdialog.icon.size"),`;
    height: `).concat(n("confirmdialog.icon.size"),`;
}
`)},GN={root:"p-confirmdialog",icon:"p-confirmdialog-icon",message:"p-confirmdialog-message",pcRejectButton:"p-confirmdialog-reject-button",pcAcceptButton:"p-confirmdialog-accept-button"},WN=Xn.extend({name:"confirmdialog",theme:HN,classes:GN}),KN={name:"BaseConfirmDialog",extends:mr,props:{group:String,breakpoints:{type:Object,default:null},draggable:{type:Boolean,default:!0}},style:WN,provide:function(){return{$pcConfirmDialog:this,$parentInstance:this}}},s6={name:"ConfirmDialog",extends:KN,confirmListener:null,closeListener:null,data:function(){return{visible:!1,confirmation:null}},mounted:function(){var e=this;this.confirmListener=function(n){n&&n.group===e.group&&(e.confirmation=n,e.confirmation.onShow&&e.confirmation.onShow(),e.visible=!0)},this.closeListener=function(){e.visible=!1,e.confirmation=null},lf.on("confirm",this.confirmListener),lf.on("close",this.closeListener)},beforeUnmount:function(){lf.off("confirm",this.confirmListener),lf.off("close",this.closeListener)},methods:{accept:function(){this.confirmation.accept&&this.confirmation.accept(),this.visible=!1},reject:function(){this.confirmation.reject&&this.confirmation.reject(),this.visible=!1},onHide:function(){this.confirmation.onHide&&this.confirmation.onHide(),this.visible=!1}},computed:{appendTo:function(){return this.confirmation?this.confirmation.appendTo:"body"},target:function(){return this.confirmation?this.confirmation.target:null},modal:function(){return this.confirmation?this.confirmation.modal==null?!0:this.confirmation.modal:!0},header:function(){return this.confirmation?this.confirmation.header:null},message:function(){return this.confirmation?this.confirmation.message:null},blockScroll:function(){return this.confirmation?this.confirmation.blockScroll:!0},position:function(){return this.confirmation?this.confirmation.position:null},acceptLabel:function(){if(this.confirmation){var e,n=this.confirmation;return n.acceptLabel||((e=n.acceptProps)===null||e===void 0?void 0:e.label)||this.$primevue.config.locale.accept}return this.$primevue.config.locale.accept},rejectLabel:function(){if(this.confirmation){var e,n=this.confirmation;return n.rejectLabel||((e=n.rejectProps)===null||e===void 0?void 0:e.label)||this.$primevue.config.locale.reject}return this.$primevue.config.locale.reject},acceptIcon:function(){var e;return this.confirmation?this.confirmation.acceptIcon:(e=this.confirmation)!==null&&e!==void 0&&e.acceptProps?this.confirmation.acceptProps.icon:null},rejectIcon:function(){var e;return this.confirmation?this.confirmation.rejectIcon:(e=this.confirmation)!==null&&e!==void 0&&e.rejectProps?this.confirmation.rejectProps.icon:null},autoFocusAccept:function(){return this.confirmation.defaultFocus===void 0||this.confirmation.defaultFocus==="accept"},autoFocusReject:function(){return this.confirmation.defaultFocus==="reject"},closeOnEscape:function(){return this.confirmation?this.confirmation.closeOnEscape:!0}},components:{Dialog:Ra,Button:jr}};function ZN(t,e,n,l,m,d){var x=wn("Button"),s=wn("Dialog");return X(),bt(s,{visible:m.visible,"onUpdate:visible":[e[2]||(e[2]=function(T){return m.visible=T}),d.onHide],role:"alertdialog",class:vn(t.cx("root")),modal:d.modal,header:d.header,blockScroll:d.blockScroll,appendTo:d.appendTo,position:d.position,breakpoints:t.breakpoints,closeOnEscape:d.closeOnEscape,draggable:t.draggable,pt:t.pt,unstyled:t.unstyled},Gu({default:Xe(function(){return[t.$slots.container?Ct("",!0):(X(),pe(an,{key:0},[t.$slots.message?(X(),bt(Tn(t.$slots.message),{key:1,message:m.confirmation},null,8,["message"])):(X(),pe(an,{key:0},[jt(t.$slots,"icon",{},function(){return[t.$slots.icon?(X(),bt(Tn(t.$slots.icon),{key:0,class:vn(t.cx("icon"))},null,8,["class"])):m.confirmation.icon?(X(),pe("span",ie({key:1,class:[m.confirmation.icon,t.cx("icon")]},t.ptm("icon")),null,16)):Ct("",!0)]}),M("span",ie({class:t.cx("message")},t.ptm("message")),Ue(d.message),17)],64))],64))]}),_:2},[t.$slots.container?{name:"container",fn:Xe(function(T){return[jt(t.$slots,"container",{message:m.confirmation,closeCallback:T.onclose,acceptCallback:d.accept,rejectCallback:d.reject})]}),key:"0"}:void 0,t.$slots.container?void 0:{name:"footer",fn:Xe(function(){var T;return[ge(x,ie({class:[t.cx("pcRejectButton"),m.confirmation.rejectClass],autofocus:d.autoFocusReject,unstyled:t.unstyled,text:((T=m.confirmation.rejectProps)===null||T===void 0?void 0:T.text)||!1,onClick:e[0]||(e[0]=function(E){return d.reject()})},m.confirmation.rejectProps,{label:d.rejectLabel,pt:t.ptm("pcRejectButton")}),Gu({_:2},[d.rejectIcon||t.$slots.rejecticon?{name:"icon",fn:Xe(function(E){return[jt(t.$slots,"rejecticon",{},function(){return[M("span",ie({class:[d.rejectIcon,E.class]},t.ptm("pcRejectButton").icon,{"data-pc-section":"rejectbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1040,["class","autofocus","unstyled","text","label","pt"]),ge(x,ie({label:d.acceptLabel,class:[t.cx("pcAcceptButton"),m.confirmation.acceptClass],autofocus:d.autoFocusAccept,unstyled:t.unstyled,onClick:e[1]||(e[1]=function(E){return d.accept()})},m.confirmation.acceptProps,{pt:t.ptm("pcAcceptButton")}),Gu({_:2},[d.acceptIcon||t.$slots.accepticon?{name:"icon",fn:Xe(function(E){return[jt(t.$slots,"accepticon",{},function(){return[M("span",ie({class:[d.acceptIcon,E.class]},t.ptm("pcAcceptButton").icon,{"data-pc-section":"acceptbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1040,["label","class","autofocus","unstyled","pt"])]}),key:"1"}]),1032,["visible","class","modal","header","blockScroll","appendTo","position","breakpoints","closeOnEscape","draggable","onUpdate:visible","pt","unstyled"])}s6.render=ZN;var a6={name:"ArrowDownIcon",extends:Qr};function XN(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.99994 14C6.91097 14.0004 6.82281 13.983 6.74064 13.9489C6.65843 13.9148 6.58387 13.8646 6.52133 13.8013L1.10198 8.38193C0.982318 8.25351 0.917175 8.08367 0.920272 7.90817C0.923368 7.73267 0.994462 7.56523 1.11858 7.44111C1.24269 7.317 1.41014 7.2459 1.58563 7.2428C1.76113 7.23971 1.93098 7.30485 2.0594 7.42451L6.32263 11.6877V0.677419C6.32263 0.497756 6.394 0.325452 6.52104 0.198411C6.64808 0.0713706 6.82039 0 7.00005 0C7.17971 0 7.35202 0.0713706 7.47906 0.198411C7.6061 0.325452 7.67747 0.497756 7.67747 0.677419V11.6877L11.9407 7.42451C12.0691 7.30485 12.2389 7.23971 12.4144 7.2428C12.5899 7.2459 12.7574 7.317 12.8815 7.44111C13.0056 7.56523 13.0767 7.73267 13.0798 7.90817C13.0829 8.08367 13.0178 8.25351 12.8981 8.38193L7.47875 13.8013C7.41621 13.8646 7.34164 13.9148 7.25944 13.9489C7.17727 13.983 7.08912 14.0004 7.00015 14C7.00012 14 7.00009 14 7.00005 14C7.00001 14 6.99998 14 6.99994 14Z",fill:"currentColor"},null,-1)]),16)}a6.render=XN;var l6={name:"ArrowUpIcon",extends:Qr};function YN(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.51551 13.799C6.64205 13.9255 6.813 13.9977 6.99193 14C7.17087 13.9977 7.34182 13.9255 7.46835 13.799C7.59489 13.6725 7.66701 13.5015 7.66935 13.3226V2.31233L11.9326 6.57554C11.9951 6.63887 12.0697 6.68907 12.1519 6.72319C12.2341 6.75731 12.3223 6.77467 12.4113 6.77425C12.5003 6.77467 12.5885 6.75731 12.6707 6.72319C12.7529 6.68907 12.8274 6.63887 12.89 6.57554C13.0168 6.44853 13.0881 6.27635 13.0881 6.09683C13.0881 5.91732 13.0168 5.74514 12.89 5.61812L7.48846 0.216594C7.48274 0.210436 7.4769 0.204374 7.47094 0.198411C7.3439 0.0713707 7.1716 0 6.99193 0C6.81227 0 6.63997 0.0713707 6.51293 0.198411C6.50704 0.204296 6.50128 0.210278 6.49563 0.216354L1.09386 5.61812C0.974201 5.74654 0.909057 5.91639 0.912154 6.09189C0.91525 6.26738 0.986345 6.43483 1.11046 6.55894C1.23457 6.68306 1.40202 6.75415 1.57752 6.75725C1.75302 6.76035 1.92286 6.6952 2.05128 6.57554L6.31451 2.31231V13.3226C6.31685 13.5015 6.38898 13.6725 6.51551 13.799Z",fill:"currentColor"},null,-1)]),16)}l6.render=YN;function Iy(t){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(t)}function JN(t,e,n){return(e=QN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QN(t){var e=eV(t,"string");return Iy(e)=="symbol"?e:e+""}function eV(t,e){if(Iy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Iy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tV=function(e){var n=e.dt;return`
.p-paginator {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    background: `.concat(n("paginator.background"),`;
    color: `).concat(n("paginator.color"),`;
    padding: `).concat(n("paginator.padding"),`;
    border-radius: `).concat(n("paginator.border.radius"),`;
    gap: `).concat(n("paginator.gap"),`;
}

.p-paginator-content {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    gap: `).concat(n("paginator.gap"),`;
}

.p-paginator-content-start {
    margin-inline-end: auto;
}

.p-paginator-content-end {
    margin-inline-start: auto;
}

.p-paginator-page,
.p-paginator-next,
.p-paginator-last,
.p-paginator-first,
.p-paginator-prev {
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    user-select: none;
    overflow: hidden;
    position: relative;
    background: `).concat(n("paginator.nav.button.background"),`;
    border: 0 none;
    color: `).concat(n("paginator.nav.button.color"),`;
    min-width: `).concat(n("paginator.nav.button.width"),`;
    height: `).concat(n("paginator.nav.button.height"),`;
    transition: background `).concat(n("paginator.transition.duration"),", color ").concat(n("paginator.transition.duration"),", outline-color ").concat(n("paginator.transition.duration"),", box-shadow ").concat(n("paginator.transition.duration"),`;
    border-radius: `).concat(n("paginator.nav.button.border.radius"),`;
    padding: 0;
    margin: 0;
}

.p-paginator-page:focus-visible,
.p-paginator-next:focus-visible,
.p-paginator-last:focus-visible,
.p-paginator-first:focus-visible,
.p-paginator-prev:focus-visible {
    box-shadow: `).concat(n("paginator.nav.button.focus.ring.shadow"),`;
    outline: `).concat(n("paginator.nav.button.focus.ring.width")," ").concat(n("paginator.nav.button.focus.ring.style")," ").concat(n("paginator.nav.button.focus.ring.color"),`;
    outline-offset: `).concat(n("paginator.nav.button.focus.ring.offset"),`;
}

.p-paginator-page:not(.p-disabled):not(.p-paginator-page-selected):hover,
.p-paginator-first:not(.p-disabled):hover,
.p-paginator-prev:not(.p-disabled):hover,
.p-paginator-next:not(.p-disabled):hover,
.p-paginator-last:not(.p-disabled):hover {
    background: `).concat(n("paginator.nav.button.hover.background"),`;
    color: `).concat(n("paginator.nav.button.hover.color"),`;
}

.p-paginator-page.p-paginator-page-selected {
    background: `).concat(n("paginator.nav.button.selected.background"),`;
    color: `).concat(n("paginator.nav.button.selected.color"),`;
}

.p-paginator-current {
    color: `).concat(n("paginator.current.page.report.color"),`;
}

.p-paginator-pages {
    display: flex;
    align-items: center;
    gap: `).concat(n("paginator.gap"),`;
}

.p-paginator-jtp-input .p-inputtext {
    max-width: `).concat(n("paginator.jump.to.page.input.max.width"),`;
}

.p-paginator-first:dir(rtl),
.p-paginator-prev:dir(rtl),
.p-paginator-next:dir(rtl),
.p-paginator-last:dir(rtl) {
    transform: rotate(180deg);
}
`)},nV={paginator:function(e){var n=e.instance,l=e.key;return["p-paginator p-component",JN({"p-paginator-default":!n.hasBreakpoints()},"p-paginator-".concat(l),n.hasBreakpoints())]},content:"p-paginator-content",contentStart:"p-paginator-content-start",contentEnd:"p-paginator-content-end",first:function(e){var n=e.instance;return["p-paginator-first",{"p-disabled":n.$attrs.disabled}]},firstIcon:"p-paginator-first-icon",prev:function(e){var n=e.instance;return["p-paginator-prev",{"p-disabled":n.$attrs.disabled}]},prevIcon:"p-paginator-prev-icon",next:function(e){var n=e.instance;return["p-paginator-next",{"p-disabled":n.$attrs.disabled}]},nextIcon:"p-paginator-next-icon",last:function(e){var n=e.instance;return["p-paginator-last",{"p-disabled":n.$attrs.disabled}]},lastIcon:"p-paginator-last-icon",pages:"p-paginator-pages",page:function(e){var n=e.props,l=e.pageLink;return["p-paginator-page",{"p-paginator-page-selected":l-1===n.page}]},current:"p-paginator-current",pcRowPerPageDropdown:"p-paginator-rpp-dropdown",pcJumpToPageDropdown:"p-paginator-jtp-dropdown",pcJumpToPageInputText:"p-paginator-jtp-input"},rV=Xn.extend({name:"paginator",theme:tV,classes:nV}),c6={name:"AngleDoubleLeftIcon",extends:Qr};function iV(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.71602 11.164C5.80782 11.2021 5.9063 11.2215 6.00569 11.221C6.20216 11.2301 6.39427 11.1612 6.54025 11.0294C6.68191 10.8875 6.76148 10.6953 6.76148 10.4948C6.76148 10.2943 6.68191 10.1021 6.54025 9.96024L3.51441 6.9344L6.54025 3.90855C6.624 3.76126 6.65587 3.59011 6.63076 3.42254C6.60564 3.25498 6.525 3.10069 6.40175 2.98442C6.2785 2.86815 6.11978 2.79662 5.95104 2.7813C5.78229 2.76598 5.61329 2.80776 5.47112 2.89994L1.97123 6.39983C1.82957 6.54167 1.75 6.73393 1.75 6.9344C1.75 7.13486 1.82957 7.32712 1.97123 7.46896L5.47112 10.9991C5.54096 11.0698 5.62422 11.1259 5.71602 11.164ZM11.0488 10.9689C11.1775 11.1156 11.3585 11.2061 11.5531 11.221C11.7477 11.2061 11.9288 11.1156 12.0574 10.9689C12.1815 10.8302 12.25 10.6506 12.25 10.4645C12.25 10.2785 12.1815 10.0989 12.0574 9.96024L9.03158 6.93439L12.0574 3.90855C12.1248 3.76739 12.1468 3.60881 12.1204 3.45463C12.0939 3.30045 12.0203 3.15826 11.9097 3.04765C11.7991 2.93703 11.6569 2.86343 11.5027 2.83698C11.3486 2.81053 11.19 2.83252 11.0488 2.89994L7.51865 6.36957C7.37699 6.51141 7.29742 6.70367 7.29742 6.90414C7.29742 7.1046 7.37699 7.29686 7.51865 7.4387L11.0488 10.9689Z",fill:"currentColor"},null,-1)]),16)}c6.render=iV;var u6={name:"BlankIcon",extends:Qr};function oV(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("rect",{width:"1",height:"1",fill:"currentColor","fill-opacity":"0"},null,-1)]),16)}u6.render=oV;var d6={name:"SearchIcon",extends:Qr};function sV(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.67602 11.0265C3.6661 11.688 4.83011 12.0411 6.02086 12.0411C6.81149 12.0411 7.59438 11.8854 8.32483 11.5828C8.87005 11.357 9.37808 11.0526 9.83317 10.6803L12.9769 13.8241C13.0323 13.8801 13.0983 13.9245 13.171 13.9548C13.2438 13.985 13.3219 14.0003 13.4007 14C13.4795 14.0003 13.5575 13.985 13.6303 13.9548C13.7031 13.9245 13.7691 13.8801 13.8244 13.8241C13.9367 13.7116 13.9998 13.5592 13.9998 13.4003C13.9998 13.2414 13.9367 13.089 13.8244 12.9765L10.6807 9.8328C11.053 9.37773 11.3573 8.86972 11.5831 8.32452C11.8857 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0268 2.67572C10.3652 1.68564 9.42494 0.913972 8.32483 0.45829C7.22472 0.00260857 6.01418 -0.116618 4.84631 0.115686C3.67844 0.34799 2.60568 0.921393 1.76369 1.76338C0.921698 2.60537 0.348296 3.67813 0.115991 4.84601C-0.116313 6.01388 0.00291375 7.22441 0.458595 8.32452C0.914277 9.42464 1.68595 10.3649 2.67602 11.0265ZM3.35565 2.0158C4.14456 1.48867 5.07206 1.20731 6.02086 1.20731C7.29317 1.20731 8.51338 1.71274 9.41304 2.6124C10.3127 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5368 7.88088 10.0096 8.66978C9.48251 9.45868 8.73328 10.0736 7.85669 10.4367C6.98011 10.7997 6.01554 10.8947 5.08496 10.7096C4.15439 10.5245 3.2996 10.0676 2.62869 9.39674C1.95778 8.72583 1.50089 7.87104 1.31579 6.94046C1.13068 6.00989 1.22568 5.04532 1.58878 4.16874C1.95187 3.29215 2.56675 2.54292 3.35565 2.0158Z",fill:"currentColor"},null,-1)]),16)}d6.render=sV;var aV=function(e){var n=e.dt;return`
.p-iconfield {
    position: relative;
}

.p-inputicon {
    position: absolute;
    top: 50%;
    margin-top: calc(-1 * (`.concat(n("icon.size"),` / 2));
    color: `).concat(n("iconfield.icon.color"),`;
    line-height: 1;
}

.p-iconfield .p-inputicon:first-child {
    inset-inline-start: `).concat(n("form.field.padding.x"),`;
}

.p-iconfield .p-inputicon:last-child {
    inset-inline-end: `).concat(n("form.field.padding.x"),`;
}

.p-iconfield .p-inputtext:not(:first-child) {
    padding-inline-start: calc((`).concat(n("form.field.padding.x")," * 2) + ").concat(n("icon.size"),`);
}

.p-iconfield .p-inputtext:not(:last-child) {
    padding-inline-end: calc((`).concat(n("form.field.padding.x")," * 2) + ").concat(n("icon.size"),`);
}

.p-iconfield:has(.p-inputfield-sm) .p-inputicon {
    font-size: `).concat(n("form.field.sm.font.size"),`;
    width: `).concat(n("form.field.sm.font.size"),`;
    height: `).concat(n("form.field.sm.font.size"),`;
    margin-top: calc(-1 * (`).concat(n("form.field.sm.font.size"),` / 2));
}

.p-iconfield:has(.p-inputfield-lg) .p-inputicon {
    font-size: `).concat(n("form.field.lg.font.size"),`;
    width: `).concat(n("form.field.lg.font.size"),`;
    height: `).concat(n("form.field.lg.font.size"),`;
    margin-top: calc(-1 * (`).concat(n("form.field.lg.font.size"),` / 2));
}
`)},lV={root:"p-iconfield"},cV=Xn.extend({name:"iconfield",theme:aV,classes:lV}),uV={name:"BaseIconField",extends:mr,style:cV,provide:function(){return{$pcIconField:this,$parentInstance:this}}},N_={name:"IconField",extends:uV,inheritAttrs:!1};function dV(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root")},t.ptmi("root")),[jt(t.$slots,"default")],16)}N_.render=dV;var hV={root:"p-inputicon"},pV=Xn.extend({name:"inputicon",classes:hV}),fV={name:"BaseInputIcon",extends:mr,style:pV,props:{class:null},provide:function(){return{$pcInputIcon:this,$parentInstance:this}}},V_={name:"InputIcon",extends:fV,inheritAttrs:!1,computed:{containerClass:function(){return[this.cx("root"),this.class]}}};function mV(t,e,n,l,m,d){return X(),pe("span",ie({class:d.containerClass},t.ptmi("root")),[jt(t.$slots,"default")],16)}V_.render=mV;var gV=function(e){var n=e.dt;return`
.p-select {
    display: inline-flex;
    cursor: pointer;
    position: relative;
    user-select: none;
    background: `.concat(n("select.background"),`;
    border: 1px solid `).concat(n("select.border.color"),`;
    transition: background `).concat(n("select.transition.duration"),", color ").concat(n("select.transition.duration"),", border-color ").concat(n("select.transition.duration"),`,
        outline-color `).concat(n("select.transition.duration"),", box-shadow ").concat(n("select.transition.duration"),`;
    border-radius: `).concat(n("select.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("select.shadow"),`;
}

.p-select:not(.p-disabled):hover {
    border-color: `).concat(n("select.hover.border.color"),`;
}

.p-select:not(.p-disabled).p-focus {
    border-color: `).concat(n("select.focus.border.color"),`;
    box-shadow: `).concat(n("select.focus.ring.shadow"),`;
    outline: `).concat(n("select.focus.ring.width")," ").concat(n("select.focus.ring.style")," ").concat(n("select.focus.ring.color"),`;
    outline-offset: `).concat(n("select.focus.ring.offset"),`;
}

.p-select.p-variant-filled {
    background: `).concat(n("select.filled.background"),`;
}

.p-select.p-variant-filled:not(.p-disabled):hover {
    background: `).concat(n("select.filled.hover.background"),`;
}

.p-select.p-variant-filled:not(.p-disabled).p-focus {
    background: `).concat(n("select.filled.focus.background"),`;
}

.p-select.p-invalid {
    border-color: `).concat(n("select.invalid.border.color"),`;
}

.p-select.p-disabled {
    opacity: 1;
    background: `).concat(n("select.disabled.background"),`;
}

.p-select-clear-icon {
    position: absolute;
    top: 50%;
    margin-top: -0.5rem;
    color: `).concat(n("select.clear.icon.color"),`;
    inset-inline-end: `).concat(n("select.dropdown.width"),`;
}

.p-select-dropdown {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    background: transparent;
    color: `).concat(n("select.dropdown.color"),`;
    width: `).concat(n("select.dropdown.width"),`;
    border-start-end-radius: `).concat(n("select.border.radius"),`;
    border-end-end-radius: `).concat(n("select.border.radius"),`;
}

.p-select-label {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    flex: 1 1 auto;
    width: 1%;
    padding: `).concat(n("select.padding.y")," ").concat(n("select.padding.x"),`;
    text-overflow: ellipsis;
    cursor: pointer;
    color: `).concat(n("select.color"),`;
    background: transparent;
    border: 0 none;
    outline: 0 none;
}

.p-select-label.p-placeholder {
    color: `).concat(n("select.placeholder.color"),`;
}

.p-select.p-invalid .p-select-label.p-placeholder {
    color: `).concat(n("select.invalid.placeholder.color"),`;
}

.p-select:has(.p-select-clear-icon) .p-select-label {
    padding-inline-end: calc(1rem + `).concat(n("select.padding.x"),`);
}

.p-select.p-disabled .p-select-label {
    color: `).concat(n("select.disabled.color"),`;
}

.p-select-label-empty {
    overflow: hidden;
    opacity: 0;
}

input.p-select-label {
    cursor: default;
}

.p-select .p-select-overlay {
    min-width: 100%;
}

.p-select-overlay {
    position: absolute;
    top: 0;
    left: 0;
    background: `).concat(n("select.overlay.background"),`;
    color: `).concat(n("select.overlay.color"),`;
    border: 1px solid `).concat(n("select.overlay.border.color"),`;
    border-radius: `).concat(n("select.overlay.border.radius"),`;
    box-shadow: `).concat(n("select.overlay.shadow"),`;
}

.p-select-header {
    padding: `).concat(n("select.list.header.padding"),`;
}

.p-select-filter {
    width: 100%;
}

.p-select-list-container {
    overflow: auto;
}

.p-select-option-group {
    cursor: auto;
    margin: 0;
    padding: `).concat(n("select.option.group.padding"),`;
    background: `).concat(n("select.option.group.background"),`;
    color: `).concat(n("select.option.group.color"),`;
    font-weight: `).concat(n("select.option.group.font.weight"),`;
}

.p-select-list {
    margin: 0;
    padding: 0;
    list-style-type: none;
    padding: `).concat(n("select.list.padding"),`;
    gap: `).concat(n("select.list.gap"),`;
    display: flex;
    flex-direction: column;
}

.p-select-option {
    cursor: pointer;
    font-weight: normal;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    padding: `).concat(n("select.option.padding"),`;
    border: 0 none;
    color: `).concat(n("select.option.color"),`;
    background: transparent;
    transition: background `).concat(n("select.transition.duration"),", color ").concat(n("select.transition.duration"),", border-color ").concat(n("select.transition.duration"),`,
            box-shadow `).concat(n("select.transition.duration"),", outline-color ").concat(n("select.transition.duration"),`;
    border-radius: `).concat(n("select.option.border.radius"),`;
}

.p-select-option:not(.p-select-option-selected):not(.p-disabled).p-focus {
    background: `).concat(n("select.option.focus.background"),`;
    color: `).concat(n("select.option.focus.color"),`;
}

.p-select-option.p-select-option-selected {
    background: `).concat(n("select.option.selected.background"),`;
    color: `).concat(n("select.option.selected.color"),`;
}

.p-select-option.p-select-option-selected.p-focus {
    background: `).concat(n("select.option.selected.focus.background"),`;
    color: `).concat(n("select.option.selected.focus.color"),`;
}

.p-select-option-check-icon {
    position: relative;
    margin-inline-start: `).concat(n("select.checkmark.gutter.start"),`;
    margin-inline-end: `).concat(n("select.checkmark.gutter.end"),`;
    color: `).concat(n("select.checkmark.color"),`;
}

.p-select-empty-message {
    padding: `).concat(n("select.empty.message.padding"),`;
}

.p-select-fluid {
    display: flex;
    width: 100%;
}

.p-select-sm .p-select-label {
    font-size: `).concat(n("select.sm.font.size"),`;
    padding-block: `).concat(n("select.sm.padding.y"),`;
    padding-inline: `).concat(n("select.sm.padding.x"),`;
}

.p-select-sm .p-select-dropdown .p-icon {
    font-size: `).concat(n("select.sm.font.size"),`;
    width: `).concat(n("select.sm.font.size"),`;
    height: `).concat(n("select.sm.font.size"),`;
}

.p-select-lg .p-select-label {
    font-size: `).concat(n("select.lg.font.size"),`;
    padding-block: `).concat(n("select.lg.padding.y"),`;
    padding-inline: `).concat(n("select.lg.padding.x"),`;
}

.p-select-lg .p-select-dropdown .p-icon {
    font-size: `).concat(n("select.lg.font.size"),`;
    width: `).concat(n("select.lg.font.size"),`;
    height: `).concat(n("select.lg.font.size"),`;
}
`)},yV={root:function(e){var n=e.instance,l=e.props,m=e.state;return["p-select p-component p-inputwrapper",{"p-disabled":l.disabled,"p-invalid":n.$invalid,"p-variant-filled":n.$variant==="filled","p-focus":m.focused,"p-inputwrapper-filled":n.$filled,"p-inputwrapper-focus":m.focused||m.overlayVisible,"p-select-open":m.overlayVisible,"p-select-fluid":n.$fluid,"p-select-sm p-inputfield-sm":l.size==="small","p-select-lg p-inputfield-lg":l.size==="large"}]},label:function(e){var n=e.instance,l=e.props;return["p-select-label",{"p-placeholder":!l.editable&&n.label===l.placeholder,"p-select-label-empty":!l.editable&&!n.$slots.value&&(n.label==="p-emptylabel"||n.label.length===0)}]},clearIcon:"p-select-clear-icon",dropdown:"p-select-dropdown",loadingicon:"p-select-loading-icon",dropdownIcon:"p-select-dropdown-icon",overlay:"p-select-overlay p-component",header:"p-select-header",pcFilter:"p-select-filter",listContainer:"p-select-list-container",list:"p-select-list",optionGroup:"p-select-option-group",optionGroupLabel:"p-select-option-group-label",option:function(e){var n=e.instance,l=e.props,m=e.state,d=e.option,x=e.focusedOption;return["p-select-option",{"p-select-option-selected":n.isSelected(d)&&l.highlightOnSelect,"p-focus":m.focusedOptionIndex===x,"p-disabled":n.isOptionDisabled(d)}]},optionLabel:"p-select-option-label",optionCheckIcon:"p-select-option-check-icon",optionBlankIcon:"p-select-option-blank-icon",emptyMessage:"p-select-empty-message"},vV=Xn.extend({name:"select",theme:gV,classes:yV}),bV={name:"BaseSelect",extends:Ah,props:{options:Array,optionLabel:[String,Function],optionValue:[String,Function],optionDisabled:[String,Function],optionGroupLabel:[String,Function],optionGroupChildren:[String,Function],scrollHeight:{type:String,default:"14rem"},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},editable:Boolean,placeholder:{type:String,default:null},dataKey:null,showClear:{type:Boolean,default:!1},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},labelId:{type:String,default:null},labelClass:{type:[String,Object],default:null},labelStyle:{type:Object,default:null},panelClass:{type:[String,Object],default:null},overlayStyle:{type:Object,default:null},overlayClass:{type:[String,Object],default:null},panelStyle:{type:Object,default:null},appendTo:{type:[String,Object],default:"body"},loading:{type:Boolean,default:!1},clearIcon:{type:String,default:void 0},dropdownIcon:{type:String,default:void 0},filterIcon:{type:String,default:void 0},loadingIcon:{type:String,default:void 0},resetFilterOnHide:{type:Boolean,default:!1},resetFilterOnClear:{type:Boolean,default:!1},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!1},autoFilterFocus:{type:Boolean,default:!1},selectOnFocus:{type:Boolean,default:!1},focusOnHover:{type:Boolean,default:!0},highlightOnSelect:{type:Boolean,default:!0},checkmark:{type:Boolean,default:!1},filterMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},tabindex:{type:Number,default:0},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:vV,provide:function(){return{$pcSelect:this,$parentInstance:this}}};function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}function _V(t){return CV(t)||SV(t)||wV(t)||xV()}function xV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wV(t,e){if(t){if(typeof t=="string")return m2(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m2(t,e):void 0}}function SV(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CV(t){if(Array.isArray(t))return m2(t)}function m2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}function P4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function A4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P4(Object(n),!0).forEach(function(l){h6(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function h6(t,e,n){return(e=kV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kV(t){var e=TV(t,"string");return Py(e)=="symbol"?e:e+""}function TV(t,e){if(Py(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Py(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xs={name:"Select",extends:bV,inheritAttrs:!1,emits:["change","focus","blur","before-show","before-hide","show","hide","filter"],outsideClickListener:null,scrollHandler:null,resizeListener:null,labelClickListener:null,overlay:null,list:null,virtualScroller:null,searchTimeout:null,searchValue:null,isModelValueChanged:!1,data:function(){return{id:this.$attrs.id,clicked:!1,focused:!1,focusedOptionIndex:-1,filterValue:null,overlayVisible:!1}},watch:{"$attrs.id":function(e){this.id=e||$o()},modelValue:function(){this.isModelValueChanged=!0},options:function(){this.autoUpdateModel()}},mounted:function(){this.id=this.id||$o(),this.autoUpdateModel(),this.bindLabelClickListener()},updated:function(){this.overlayVisible&&this.isModelValueChanged&&this.scrollInView(this.findSelectedOptionIndex()),this.isModelValueChanged=!1},beforeUnmount:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindLabelClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(bo.clear(this.overlay),this.overlay=null)},methods:{getOptionIndex:function(e,n){return this.virtualScrollerDisabled?e:n&&n(e).index},getOptionLabel:function(e){return this.optionLabel?wi(e,this.optionLabel):e},getOptionValue:function(e){return this.optionValue?wi(e,this.optionValue):e},getOptionRenderKey:function(e,n){return(this.dataKey?wi(e,this.dataKey):this.getOptionLabel(e))+"_"+n},getPTItemOptions:function(e,n,l,m){return this.ptm(m,{context:{option:e,index:l,selected:this.isSelected(e),focused:this.focusedOptionIndex===this.getOptionIndex(l,n),disabled:this.isOptionDisabled(e)}})},isOptionDisabled:function(e){return this.optionDisabled?wi(e,this.optionDisabled):!1},isOptionGroup:function(e){return this.optionGroupLabel&&e.optionGroup&&e.group},getOptionGroupLabel:function(e){return wi(e,this.optionGroupLabel)},getOptionGroupChildren:function(e){return wi(e,this.optionGroupChildren)},getAriaPosInset:function(e){var n=this;return(this.optionGroupLabel?e-this.visibleOptions.slice(0,e).filter(function(l){return n.isOptionGroup(l)}).length:e)+1},show:function(e){this.$emit("before-show"),this.overlayVisible=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex(),e&&Ro(this.$refs.focusInput)},hide:function(e){var n=this,l=function(){n.$emit("before-hide"),n.overlayVisible=!1,n.clicked=!1,n.focusedOptionIndex=-1,n.searchValue="",n.resetFilterOnHide&&(n.filterValue=null),e&&Ro(n.$refs.focusInput)};setTimeout(function(){l()},0)},onFocus:function(e){this.disabled||(this.focused=!0,this.overlayVisible&&(this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex(),this.scrollInView(this.focusedOptionIndex)),this.$emit("focus",e))},onBlur:function(e){var n,l;this.focused=!1,this.focusedOptionIndex=-1,this.searchValue="",this.$emit("blur",e),(n=(l=this.formField).onBlur)===null||n===void 0||n.call(l,e)},onKeyDown:function(e){if(this.disabled||Zz()){e.preventDefault();return}var n=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,this.editable);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,this.editable);break;case"Home":this.onHomeKey(e,this.editable);break;case"End":this.onEndKey(e,this.editable);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Space":this.onSpaceKey(e,this.editable);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e,this.editable);break;case"ShiftLeft":case"ShiftRight":break;default:!n&&s7(e.key)&&(!this.overlayVisible&&this.show(),!this.editable&&this.searchOptions(e,e.key));break}this.clicked=!1},onEditableInput:function(e){var n=e.target.value;this.searchValue="";var l=this.searchOptions(e,n);!l&&(this.focusedOptionIndex=-1),this.updateModel(e,n),!this.overlayVisible&&Zr(n)&&this.show()},onContainerClick:function(e){this.disabled||this.loading||e.target.tagName==="INPUT"||e.target.getAttribute("data-pc-section")==="clearicon"||e.target.closest('[data-pc-section="clearicon"]')||((!this.overlay||!this.overlay.contains(e.target))&&(this.overlayVisible?this.hide(!0):this.show(!0)),this.clicked=!0)},onClearClick:function(e){this.updateModel(e,null),this.resetFilterOnClear&&(this.filterValue=null)},onFirstHiddenFocus:function(e){var n=e.relatedTarget===this.$refs.focusInput?Nu(this.overlay,':not([data-p-hidden-focusable="true"])'):this.$refs.focusInput;Ro(n)},onLastHiddenFocus:function(e){var n=e.relatedTarget===this.$refs.focusInput?bP(this.overlay,':not([data-p-hidden-focusable="true"])'):this.$refs.focusInput;Ro(n)},onOptionSelect:function(e,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=this.getOptionValue(n);this.updateModel(e,m),l&&this.hide(!0)},onOptionMouseMove:function(e,n){this.focusOnHover&&this.changeFocusedOptionIndex(e,n)},onFilterChange:function(e){var n=e.target.value;this.filterValue=n,this.focusedOptionIndex=-1,this.$emit("filter",{originalEvent:e,value:n}),!this.virtualScrollerDisabled&&this.virtualScroller.scrollToIndex(0)},onFilterKeyDown:function(e){if(!e.isComposing)switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0);break}},onFilterBlur:function(){this.focusedOptionIndex=-1},onFilterUpdated:function(){this.overlayVisible&&this.alignOverlay()},onOverlayClick:function(e){ql.emit("overlay-click",{originalEvent:e,target:this.$el})},onOverlayKeyDown:function(e){switch(e.code){case"Escape":this.onEscapeKey(e);break}},onArrowDownKey:function(e){if(!this.overlayVisible)this.show(),this.editable&&this.changeFocusedOptionIndex(e,this.findSelectedOptionIndex());else{var n=this.focusedOptionIndex!==-1?this.findNextOptionIndex(this.focusedOptionIndex):this.clicked?this.findFirstOptionIndex():this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,n)}e.preventDefault()},onArrowUpKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.altKey&&!n)this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(),e.preventDefault();else{var l=this.focusedOptionIndex!==-1?this.findPrevOptionIndex(this.focusedOptionIndex):this.clicked?this.findLastOptionIndex():this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,l),!this.overlayVisible&&this.show(),e.preventDefault()}},onArrowLeftKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&(this.focusedOptionIndex=-1)},onHomeKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var l=e.currentTarget;e.shiftKey?l.setSelectionRange(0,e.target.selectionStart):(l.setSelectionRange(0,0),this.focusedOptionIndex=-1)}else this.changeFocusedOptionIndex(e,this.findFirstOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()},onEndKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var l=e.currentTarget;if(e.shiftKey)l.setSelectionRange(e.target.selectionStart,l.value.length);else{var m=l.value.length;l.setSelectionRange(m,m),this.focusedOptionIndex=-1}}else this.changeFocusedOptionIndex(e,this.findLastOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()},onPageUpKey:function(e){this.scrollInView(0),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.visibleOptions.length-1),e.preventDefault()},onEnterKey:function(e){this.overlayVisible?(this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.hide()):(this.focusedOptionIndex=-1,this.onArrowDownKey(e)),e.preventDefault()},onSpaceKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;!n&&this.onEnterKey(e)},onEscapeKey:function(e){this.overlayVisible&&this.hide(!0),e.preventDefault(),e.stopPropagation()},onTabKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n||(this.overlayVisible&&this.hasFocusableElements()?(Ro(this.$refs.firstHiddenFocusableElementOnOverlay),e.preventDefault()):(this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(this.filter)))},onBackspaceKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&!this.overlayVisible&&this.show()},onOverlayEnter:function(e){var n=this;bo.set("overlay",e,this.$primevue.config.zIndex.overlay),Sh(e,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),this.scrollInView(),setTimeout(function(){n.autoFilterFocus&&n.filter&&Ro(n.$refs.filterInput.$el)},1)},onOverlayAfterEnter:function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onOverlayLeave:function(){var e=this;this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.autoFilterFocus&&this.filter&&!this.editable&&this.$nextTick(function(){Ro(e.$refs.filterInput.$el)}),this.$emit("hide"),this.overlay=null},onOverlayAfterLeave:function(e){bo.clear(e)},alignOverlay:function(){this.appendTo==="self"?fS(this.overlay,this.$el):(this.overlay.style.minWidth=So(this.$el)+"px",D_(this.overlay,this.$el))},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&e.overlay&&!e.$el.contains(n.target)&&!e.overlay.contains(n.target)&&e.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new B_(this.$refs.container,function(){e.overlayVisible&&e.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!L_()&&e.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindLabelClickListener:function(){var e=this;if(!this.editable&&!this.labelClickListener){var n=document.querySelector('label[for="'.concat(this.labelId,'"]'));n&&o_(n)&&(this.labelClickListener=function(){Ro(e.$refs.focusInput)},n.addEventListener("click",this.labelClickListener))}},unbindLabelClickListener:function(){if(this.labelClickListener){var e=document.querySelector('label[for="'.concat(this.labelId,'"]'));e&&o_(e)&&e.removeEventListener("click",this.labelClickListener)}},hasFocusableElements:function(){return py(this.overlay,':not([data-p-hidden-focusable="true"])').length>0},isOptionMatched:function(e){var n;return this.isValidOption(e)&&typeof this.getOptionLabel(e)=="string"&&((n=this.getOptionLabel(e))===null||n===void 0?void 0:n.toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale)))},isValidOption:function(e){return Zr(e)&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))},isValidSelectedOption:function(e){return this.isValidOption(e)&&this.isSelected(e)},isSelected:function(e){return $c(this.d_value,this.getOptionValue(e),this.equalityKey)},findFirstOptionIndex:function(){var e=this;return this.visibleOptions.findIndex(function(n){return e.isValidOption(n)})},findLastOptionIndex:function(){var e=this;return H5(this.visibleOptions,function(n){return e.isValidOption(n)})},findNextOptionIndex:function(e){var n=this,l=e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(m){return n.isValidOption(m)}):-1;return l>-1?l+e+1:e},findPrevOptionIndex:function(e){var n=this,l=e>0?H5(this.visibleOptions.slice(0,e),function(m){return n.isValidOption(m)}):-1;return l>-1?l:e},findSelectedOptionIndex:function(){var e=this;return this.$filled?this.visibleOptions.findIndex(function(n){return e.isValidSelectedOption(n)}):-1},findFirstFocusedOptionIndex:function(){var e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e},findLastFocusedOptionIndex:function(){var e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e},searchOptions:function(e,n){var l=this;this.searchValue=(this.searchValue||"")+n;var m=-1,d=!1;return Zr(this.searchValue)&&(this.focusedOptionIndex!==-1?(m=this.visibleOptions.slice(this.focusedOptionIndex).findIndex(function(x){return l.isOptionMatched(x)}),m=m===-1?this.visibleOptions.slice(0,this.focusedOptionIndex).findIndex(function(x){return l.isOptionMatched(x)}):m+this.focusedOptionIndex):m=this.visibleOptions.findIndex(function(x){return l.isOptionMatched(x)}),m!==-1&&(d=!0),m===-1&&this.focusedOptionIndex===-1&&(m=this.findFirstFocusedOptionIndex()),m!==-1&&this.changeFocusedOptionIndex(e,m)),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){l.searchValue="",l.searchTimeout=null},500),d},changeFocusedOptionIndex:function(e,n){this.focusedOptionIndex!==n&&(this.focusedOptionIndex=n,this.scrollInView(),this.selectOnFocus&&this.onOptionSelect(e,this.visibleOptions[n],!1))},scrollInView:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;this.$nextTick(function(){var l=n!==-1?"".concat(e.id,"_").concat(n):e.focusedOptionId,m=yo(e.list,'li[id="'.concat(l,'"]'));m?m.scrollIntoView&&m.scrollIntoView({block:"nearest",inline:"start"}):e.virtualScrollerDisabled||e.virtualScroller&&e.virtualScroller.scrollToIndex(n!==-1?n:e.focusedOptionIndex)})},autoUpdateModel:function(){this.selectOnFocus&&this.autoOptionFocus&&!this.$filled&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex(),this.onOptionSelect(null,this.visibleOptions[this.focusedOptionIndex],!1))},updateModel:function(e,n){this.writeValue(n,e),this.$emit("change",{originalEvent:e,value:n})},flatOptions:function(e){var n=this;return(e||[]).reduce(function(l,m,d){l.push({optionGroup:m,group:!0,index:d});var x=n.getOptionGroupChildren(m);return x&&x.forEach(function(s){return l.push(s)}),l},[])},overlayRef:function(e){this.overlay=e},listRef:function(e,n){this.list=e,n&&n(e)},virtualScrollerRef:function(e){this.virtualScroller=e}},computed:{visibleOptions:function(){var e=this,n=this.optionGroupLabel?this.flatOptions(this.options):this.options||[];if(this.filterValue){var l=f2.filter(n,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);if(this.optionGroupLabel){var m=this.options||[],d=[];return m.forEach(function(x){var s=e.getOptionGroupChildren(x),T=s.filter(function(E){return l.includes(E)});T.length>0&&d.push(A4(A4({},x),{},h6({},typeof e.optionGroupChildren=="string"?e.optionGroupChildren:"items",_V(T))))}),this.flatOptions(d)}return l}return n},hasSelectedOption:function(){return this.$filled},label:function(){var e=this.findSelectedOptionIndex();return e!==-1?this.getOptionLabel(this.visibleOptions[e]):this.placeholder||"p-emptylabel"},editableInputValue:function(){var e=this.findSelectedOptionIndex();return e!==-1?this.getOptionLabel(this.visibleOptions[e]):this.d_value||""},equalityKey:function(){return this.optionValue?null:this.dataKey},searchFields:function(){return this.filterFields||[this.optionLabel]},filterResultMessageText:function(){return Zr(this.visibleOptions)?this.filterMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptyFilterMessageText},filterMessageText:function(){return this.filterMessage||this.$primevue.config.locale.searchMessage||""},emptyFilterMessageText:function(){return this.emptyFilterMessage||this.$primevue.config.locale.emptySearchMessage||this.$primevue.config.locale.emptyFilterMessage||""},emptyMessageText:function(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage||""},selectionMessageText:function(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},emptySelectionMessageText:function(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},selectedMessageText:function(){return this.$filled?this.selectionMessageText.replaceAll("{0}","1"):this.emptySelectionMessageText},focusedOptionId:function(){return this.focusedOptionIndex!==-1?"".concat(this.id,"_").concat(this.focusedOptionIndex):null},ariaSetSize:function(){var e=this;return this.visibleOptions.filter(function(n){return!e.isOptionGroup(n)}).length},isClearIconVisible:function(){return this.showClear&&this.d_value!=null&&Zr(this.options)},virtualScrollerDisabled:function(){return!this.virtualScrollerOptions}},directives:{ripple:zs},components:{InputText:vo,VirtualScroller:CS,Portal:td,InputIcon:V_,IconField:N_,TimesIcon:Rf,ChevronDownIcon:Pf,SpinnerIcon:s0,SearchIcon:d6,CheckIcon:Xu,BlankIcon:u6}},EV=["id"],IV=["id","value","placeholder","tabindex","disabled","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","aria-invalid"],PV=["id","tabindex","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","aria-disabled"],AV=["id"],RV=["id"],MV=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousemove","data-p-selected","data-p-focused","data-p-disabled"];function DV(t,e,n,l,m,d){var x=wn("SpinnerIcon"),s=wn("InputText"),T=wn("SearchIcon"),E=wn("InputIcon"),A=wn("IconField"),z=wn("CheckIcon"),j=wn("BlankIcon"),U=wn("VirtualScroller"),K=wn("Portal"),oe=No("ripple");return X(),pe("div",ie({ref:"container",id:m.id,class:t.cx("root"),onClick:e[11]||(e[11]=function(){return d.onContainerClick&&d.onContainerClick.apply(d,arguments)})},t.ptmi("root")),[t.editable?(X(),pe("input",ie({key:0,ref:"focusInput",id:t.labelId||t.inputId,type:"text",class:[t.cx("label"),t.inputClass,t.labelClass],style:[t.inputStyle,t.labelStyle],value:d.editableInputValue,placeholder:t.placeholder,tabindex:t.disabled?-1:t.tabindex,disabled:t.disabled,autocomplete:"off",role:"combobox","aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,"aria-haspopup":"listbox","aria-expanded":m.overlayVisible,"aria-controls":m.id+"_list","aria-activedescendant":m.focused?d.focusedOptionId:void 0,"aria-invalid":t.invalid||void 0,onFocus:e[0]||(e[0]=function(){return d.onFocus&&d.onFocus.apply(d,arguments)}),onBlur:e[1]||(e[1]=function(){return d.onBlur&&d.onBlur.apply(d,arguments)}),onKeydown:e[2]||(e[2]=function(){return d.onKeyDown&&d.onKeyDown.apply(d,arguments)}),onInput:e[3]||(e[3]=function(){return d.onEditableInput&&d.onEditableInput.apply(d,arguments)})},t.ptm("label")),null,16,IV)):(X(),pe("span",ie({key:1,ref:"focusInput",id:t.labelId||t.inputId,class:[t.cx("label"),t.inputClass,t.labelClass],style:[t.inputStyle,t.labelStyle],tabindex:t.disabled?-1:t.tabindex,role:"combobox","aria-label":t.ariaLabel||(d.label==="p-emptylabel"?void 0:d.label),"aria-labelledby":t.ariaLabelledby,"aria-haspopup":"listbox","aria-expanded":m.overlayVisible,"aria-controls":m.id+"_list","aria-activedescendant":m.focused?d.focusedOptionId:void 0,"aria-disabled":t.disabled,onFocus:e[4]||(e[4]=function(){return d.onFocus&&d.onFocus.apply(d,arguments)}),onBlur:e[5]||(e[5]=function(){return d.onBlur&&d.onBlur.apply(d,arguments)}),onKeydown:e[6]||(e[6]=function(){return d.onKeyDown&&d.onKeyDown.apply(d,arguments)})},t.ptm("label")),[jt(t.$slots,"value",{value:t.d_value,placeholder:t.placeholder},function(){var fe;return[tr(Ue(d.label==="p-emptylabel"?"":(fe=d.label)!==null&&fe!==void 0?fe:"empty"),1)]})],16,PV)),d.isClearIconVisible?jt(t.$slots,"clearicon",{key:2,class:vn(t.cx("clearIcon")),clearCallback:d.onClearClick},function(){return[(X(),bt(Tn(t.clearIcon?"i":"TimesIcon"),ie({ref:"clearIcon",class:[t.cx("clearIcon"),t.clearIcon],onClick:d.onClearClick},t.ptm("clearIcon"),{"data-pc-section":"clearicon"}),null,16,["class","onClick"]))]}):Ct("",!0),M("div",ie({class:t.cx("dropdown")},t.ptm("dropdown")),[t.loading?jt(t.$slots,"loadingicon",{key:0,class:vn(t.cx("loadingIcon"))},function(){return[t.loadingIcon?(X(),pe("span",ie({key:0,class:[t.cx("loadingIcon"),"pi-spin",t.loadingIcon],"aria-hidden":"true"},t.ptm("loadingIcon")),null,16)):(X(),bt(x,ie({key:1,class:t.cx("loadingIcon"),spin:"","aria-hidden":"true"},t.ptm("loadingIcon")),null,16,["class"]))]}):jt(t.$slots,"dropdownicon",{key:1,class:vn(t.cx("dropdownIcon"))},function(){return[(X(),bt(Tn(t.dropdownIcon?"span":"ChevronDownIcon"),ie({class:[t.cx("dropdownIcon"),t.dropdownIcon],"aria-hidden":"true"},t.ptm("dropdownIcon")),null,16,["class"]))]})],16),ge(K,{appendTo:t.appendTo},{default:Xe(function(){return[ge(Eh,ie({name:"p-connected-overlay",onEnter:d.onOverlayEnter,onAfterEnter:d.onOverlayAfterEnter,onLeave:d.onOverlayLeave,onAfterLeave:d.onOverlayAfterLeave},t.ptm("transition")),{default:Xe(function(){return[m.overlayVisible?(X(),pe("div",ie({key:0,ref:d.overlayRef,class:[t.cx("overlay"),t.panelClass,t.overlayClass],style:[t.panelStyle,t.overlayStyle],onClick:e[9]||(e[9]=function(){return d.onOverlayClick&&d.onOverlayClick.apply(d,arguments)}),onKeydown:e[10]||(e[10]=function(){return d.onOverlayKeyDown&&d.onOverlayKeyDown.apply(d,arguments)})},t.ptm("overlay")),[M("span",ie({ref:"firstHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:e[7]||(e[7]=function(){return d.onFirstHiddenFocus&&d.onFirstHiddenFocus.apply(d,arguments)})},t.ptm("hiddenFirstFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16),jt(t.$slots,"header",{value:t.d_value,options:d.visibleOptions}),t.filter?(X(),pe("div",ie({key:0,class:t.cx("header")},t.ptm("header")),[ge(A,{unstyled:t.unstyled,pt:t.ptm("pcFilterContainer")},{default:Xe(function(){return[ge(s,{ref:"filterInput",type:"text",value:m.filterValue,onVnodeMounted:d.onFilterUpdated,onVnodeUpdated:d.onFilterUpdated,class:vn(t.cx("pcFilter")),placeholder:t.filterPlaceholder,variant:t.variant,unstyled:t.unstyled,role:"searchbox",autocomplete:"off","aria-owns":m.id+"_list","aria-activedescendant":d.focusedOptionId,onKeydown:d.onFilterKeyDown,onBlur:d.onFilterBlur,onInput:d.onFilterChange,pt:t.ptm("pcFilter")},null,8,["value","onVnodeMounted","onVnodeUpdated","class","placeholder","variant","unstyled","aria-owns","aria-activedescendant","onKeydown","onBlur","onInput","pt"]),ge(E,{unstyled:t.unstyled,pt:t.ptm("pcFilterIconContainer")},{default:Xe(function(){return[jt(t.$slots,"filtericon",{},function(){return[t.filterIcon?(X(),pe("span",ie({key:0,class:t.filterIcon},t.ptm("filterIcon")),null,16)):(X(),bt(T,ka(ie({key:1},t.ptm("filterIcon"))),null,16))]})]}),_:3},8,["unstyled","pt"])]}),_:3},8,["unstyled","pt"]),M("span",ie({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenFilterResult"),{"data-p-hidden-accessible":!0}),Ue(d.filterResultMessageText),17)],16)):Ct("",!0),M("div",ie({class:t.cx("listContainer"),style:{"max-height":d.virtualScrollerDisabled?t.scrollHeight:""}},t.ptm("listContainer")),[ge(U,ie({ref:d.virtualScrollerRef},t.virtualScrollerOptions,{items:d.visibleOptions,style:{height:t.scrollHeight},tabindex:-1,disabled:d.virtualScrollerDisabled,pt:t.ptm("virtualScroller")}),Gu({content:Xe(function(fe){var me=fe.styleClass,ne=fe.contentRef,te=fe.items,re=fe.getItemOptions,ze=fe.contentStyle,_t=fe.itemSize;return[M("ul",ie({ref:function(he){return d.listRef(he,ne)},id:m.id+"_list",class:[t.cx("list"),me],style:ze,role:"listbox"},t.ptm("list")),[(X(!0),pe(an,null,fr(te,function(Me,he){return X(),pe(an,{key:d.getOptionRenderKey(Me,d.getOptionIndex(he,re))},[d.isOptionGroup(Me)?(X(),pe("li",ie({key:0,id:m.id+"_"+d.getOptionIndex(he,re),style:{height:_t?_t+"px":void 0},class:t.cx("optionGroup"),role:"option",ref_for:!0},t.ptm("optionGroup")),[jt(t.$slots,"optiongroup",{option:Me.optionGroup,index:d.getOptionIndex(he,re)},function(){return[M("span",ie({class:t.cx("optionGroupLabel"),ref_for:!0},t.ptm("optionGroupLabel")),Ue(d.getOptionGroupLabel(Me.optionGroup)),17)]})],16,RV)):_r((X(),pe("li",ie({key:1,id:m.id+"_"+d.getOptionIndex(he,re),class:t.cx("option",{option:Me,focusedOption:d.getOptionIndex(he,re)}),style:{height:_t?_t+"px":void 0},role:"option","aria-label":d.getOptionLabel(Me),"aria-selected":d.isSelected(Me),"aria-disabled":d.isOptionDisabled(Me),"aria-setsize":d.ariaSetSize,"aria-posinset":d.getAriaPosInset(d.getOptionIndex(he,re)),onClick:function($e){return d.onOptionSelect($e,Me)},onMousemove:function($e){return d.onOptionMouseMove($e,d.getOptionIndex(he,re))},"data-p-selected":d.isSelected(Me),"data-p-focused":m.focusedOptionIndex===d.getOptionIndex(he,re),"data-p-disabled":d.isOptionDisabled(Me),ref_for:!0},d.getPTItemOptions(Me,re,he,"option")),[t.checkmark?(X(),pe(an,{key:0},[d.isSelected(Me)?(X(),bt(z,ie({key:0,class:t.cx("optionCheckIcon"),ref_for:!0},t.ptm("optionCheckIcon")),null,16,["class"])):(X(),bt(j,ie({key:1,class:t.cx("optionBlankIcon"),ref_for:!0},t.ptm("optionBlankIcon")),null,16,["class"]))],64)):Ct("",!0),jt(t.$slots,"option",{option:Me,selected:d.isSelected(Me),index:d.getOptionIndex(he,re)},function(){return[M("span",ie({class:t.cx("optionLabel"),ref_for:!0},t.ptm("optionLabel")),Ue(d.getOptionLabel(Me)),17)]})],16,MV)),[[oe]])],64)}),128)),m.filterValue&&(!te||te&&te.length===0)?(X(),pe("li",ie({key:0,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage"),{"data-p-hidden-accessible":!0}),[jt(t.$slots,"emptyfilter",{},function(){return[tr(Ue(d.emptyFilterMessageText),1)]})],16)):!t.options||t.options&&t.options.length===0?(X(),pe("li",ie({key:1,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage"),{"data-p-hidden-accessible":!0}),[jt(t.$slots,"empty",{},function(){return[tr(Ue(d.emptyMessageText),1)]})],16)):Ct("",!0)],16,AV)]}),_:2},[t.$slots.loader?{name:"loader",fn:Xe(function(fe){var me=fe.options;return[jt(t.$slots,"loader",{options:me})]}),key:"0"}:void 0]),1040,["items","style","disabled","pt"])],16),jt(t.$slots,"footer",{value:t.d_value,options:d.visibleOptions}),!t.options||t.options&&t.options.length===0?(X(),pe("span",ie({key:1,role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenEmptyMessage"),{"data-p-hidden-accessible":!0}),Ue(d.emptyMessageText),17)):Ct("",!0),M("span",ie({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenSelectedMessage"),{"data-p-hidden-accessible":!0}),Ue(d.selectedMessageText),17),M("span",ie({ref:"lastHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:e[8]||(e[8]=function(){return d.onLastHiddenFocus&&d.onLastHiddenFocus.apply(d,arguments)})},t.ptm("hiddenLastFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16)],16)):Ct("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo"])],16,EV)}xs.render=DV;var p6={name:"AngleDownIcon",extends:Qr};function LV(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z",fill:"currentColor"},null,-1)]),16)}p6.render=LV;var f6={name:"AngleUpIcon",extends:Qr};function OV(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M10.4134 9.49931C10.3148 9.49977 10.2172 9.48055 10.1262 9.44278C10.0352 9.405 9.95263 9.34942 9.88338 9.27931L6.88338 6.27931L3.88338 9.27931C3.73811 9.34946 3.57409 9.3709 3.41567 9.34044C3.25724 9.30999 3.11286 9.22926 3.00395 9.11025C2.89504 8.99124 2.82741 8.84028 2.8111 8.67978C2.79478 8.51928 2.83065 8.35781 2.91338 8.21931L6.41338 4.71931C6.55401 4.57886 6.74463 4.49997 6.94338 4.49997C7.14213 4.49997 7.33276 4.57886 7.47338 4.71931L10.9734 8.21931C11.1138 8.35994 11.1927 8.55056 11.1927 8.74931C11.1927 8.94806 11.1138 9.13868 10.9734 9.27931C10.9007 9.35315 10.8132 9.41089 10.7168 9.44879C10.6203 9.48669 10.5169 9.5039 10.4134 9.49931Z",fill:"currentColor"},null,-1)]),16)}f6.render=OV;var zV=function(e){var n=e.dt;return`
.p-inputnumber {
    display: inline-flex;
    position: relative;
}

.p-inputnumber-button {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
    cursor: pointer;
    background: `.concat(n("inputnumber.button.background"),`;
    color: `).concat(n("inputnumber.button.color"),`;
    width: `).concat(n("inputnumber.button.width"),`;
    transition: background `).concat(n("inputnumber.transition.duration"),", color ").concat(n("inputnumber.transition.duration"),", border-color ").concat(n("inputnumber.transition.duration"),", outline-color ").concat(n("inputnumber.transition.duration"),`;
}

.p-inputnumber-button:hover {
    background: `).concat(n("inputnumber.button.hover.background"),`;
    color: `).concat(n("inputnumber.button.hover.color"),`;
}

.p-inputnumber-button:active {
    background: `).concat(n("inputnumber.button.active.background"),`;
    color: `).concat(n("inputnumber.button.active.color"),`;
}

.p-inputnumber-stacked .p-inputnumber-button {
    position: relative;
    border: 0 none;
}

.p-inputnumber-stacked .p-inputnumber-button-group {
    display: flex;
    flex-direction: column;
    position: absolute;
    inset-block-start: 1px;
    inset-inline-end: 1px;
    height: calc(100% - 2px);
    z-index: 1;
}

.p-inputnumber-stacked .p-inputnumber-increment-button {
    padding: 0;
    border-start-end-radius: calc(`).concat(n("inputnumber.button.border.radius"),` - 1px);
}

.p-inputnumber-stacked .p-inputnumber-decrement-button {
    padding: 0;
    border-end-end-radius: calc(`).concat(n("inputnumber.button.border.radius"),` - 1px);
}

.p-inputnumber-stacked .p-inputnumber-button {
    flex: 1 1 auto;
    border: 0 none;
}

.p-inputnumber-horizontal .p-inputnumber-button {
    border: 1px solid `).concat(n("inputnumber.button.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-button:hover {
    border-color: `).concat(n("inputnumber.button.hover.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-button:active {
    border-color: `).concat(n("inputnumber.button.active.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-increment-button {
    order: 3;
    border-start-end-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-end-end-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-inline-start: 0 none;
}

.p-inputnumber-horizontal .p-inputnumber-input {
    order: 2;
    border-radius: 0;
}

.p-inputnumber-horizontal .p-inputnumber-decrement-button {
    order: 1;
    border-start-start-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-end-start-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-inline-end: 0 none;
}

.p-floatlabel:has(.p-inputnumber-horizontal) label {
    margin-inline-start: `).concat(n("inputnumber.button.width"),`;
}

.p-inputnumber-vertical {
    flex-direction: column;
}

.p-inputnumber-vertical .p-inputnumber-button {
    border: 1px solid `).concat(n("inputnumber.button.border.color"),`;
    padding: `).concat(n("inputnumber.button.vertical.padding"),`;
}

.p-inputnumber-vertical .p-inputnumber-button:hover {
    border-color: `).concat(n("inputnumber.button.hover.border.color"),`;
}

.p-inputnumber-vertical .p-inputnumber-button:active {
    border-color: `).concat(n("inputnumber.button.active.border.color"),`;
}

.p-inputnumber-vertical .p-inputnumber-increment-button {
    order: 1;
    border-start-start-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-start-end-radius: `).concat(n("inputnumber.button.border.radius"),`;
    width: 100%;
    border-block-end: 0 none;
}

.p-inputnumber-vertical .p-inputnumber-input {
    order: 2;
    border-radius: 0;
    text-align: center;
}

.p-inputnumber-vertical .p-inputnumber-decrement-button {
    order: 3;
    border-end-start-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-end-end-radius: `).concat(n("inputnumber.button.border.radius"),`;
    width: 100%;
    border-block-start: 0 none;
}

.p-inputnumber-input {
    flex: 1 1 auto;
}

.p-inputnumber-fluid {
    width: 100%;
}

.p-inputnumber-fluid .p-inputnumber-input {
    width: 1%;
}

.p-inputnumber-fluid.p-inputnumber-vertical .p-inputnumber-input {
    width: 100%;
}

.p-inputnumber:has(.p-inputtext-sm) .p-inputnumber-button .p-icon {
    font-size: `).concat(n("form.field.sm.font.size"),`;
    width: `).concat(n("form.field.sm.font.size"),`;
    height: `).concat(n("form.field.sm.font.size"),`;
}

.p-inputnumber:has(.p-inputtext-lg) .p-inputnumber-button .p-icon {
    font-size: `).concat(n("form.field.lg.font.size"),`;
    width: `).concat(n("form.field.lg.font.size"),`;
    height: `).concat(n("form.field.lg.font.size"),`;
}
`)},BV={root:function(e){var n=e.instance,l=e.props;return["p-inputnumber p-component p-inputwrapper",{"p-inputwrapper-filled":n.$filled||l.allowEmpty===!1,"p-inputwrapper-focus":n.focused,"p-inputnumber-stacked":l.showButtons&&l.buttonLayout==="stacked","p-inputnumber-horizontal":l.showButtons&&l.buttonLayout==="horizontal","p-inputnumber-vertical":l.showButtons&&l.buttonLayout==="vertical","p-inputnumber-fluid":n.$fluid}]},pcInputText:"p-inputnumber-input",buttonGroup:"p-inputnumber-button-group",incrementButton:function(e){var n=e.instance,l=e.props;return["p-inputnumber-button p-inputnumber-increment-button",{"p-disabled":l.showButtons&&l.max!==null&&n.maxBoundry()}]},decrementButton:function(e){var n=e.instance,l=e.props;return["p-inputnumber-button p-inputnumber-decrement-button",{"p-disabled":l.showButtons&&l.min!==null&&n.minBoundry()}]}},FV=Xn.extend({name:"inputnumber",theme:zV,classes:BV}),$V={name:"BaseInputNumber",extends:Ah,props:{format:{type:Boolean,default:!0},showButtons:{type:Boolean,default:!1},buttonLayout:{type:String,default:"stacked"},incrementButtonClass:{type:String,default:null},decrementButtonClass:{type:String,default:null},incrementButtonIcon:{type:String,default:void 0},incrementIcon:{type:String,default:void 0},decrementButtonIcon:{type:String,default:void 0},decrementIcon:{type:String,default:void 0},locale:{type:String,default:void 0},localeMatcher:{type:String,default:void 0},mode:{type:String,default:"decimal"},prefix:{type:String,default:null},suffix:{type:String,default:null},currency:{type:String,default:void 0},currencyDisplay:{type:String,default:void 0},useGrouping:{type:Boolean,default:!0},minFractionDigits:{type:Number,default:void 0},maxFractionDigits:{type:Number,default:void 0},roundingMode:{type:String,default:"halfExpand",validator:function(e){return["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"].includes(e)}},min:{type:Number,default:null},max:{type:Number,default:null},step:{type:Number,default:1},allowEmpty:{type:Boolean,default:!0},highlightOnFocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:FV,provide:function(){return{$pcInputNumber:this,$parentInstance:this}}};function Ay(t){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(t)}function R4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function M4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R4(Object(n),!0).forEach(function(l){NV(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function NV(t,e,n){return(e=VV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VV(t){var e=jV(t,"string");return Ay(e)=="symbol"?e:e+""}function jV(t,e){if(Ay(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Ay(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UV(t){return WV(t)||GV(t)||HV(t)||qV()}function qV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HV(t,e){if(t){if(typeof t=="string")return g2(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g2(t,e):void 0}}function GV(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WV(t){if(Array.isArray(t))return g2(t)}function g2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}var j_={name:"InputNumber",extends:$V,inheritAttrs:!1,emits:["input","focus","blur"],inject:{$pcFluid:{default:null}},numberFormat:null,_numeral:null,_decimal:null,_group:null,_minusSign:null,_currency:null,_suffix:null,_prefix:null,_index:null,groupChar:"",isSpecialChar:null,prefixChar:null,suffixChar:null,timer:null,data:function(){return{d_modelValue:this.d_value,focused:!1}},watch:{d_value:function(e){this.d_modelValue=e},locale:function(e,n){this.updateConstructParser(e,n)},localeMatcher:function(e,n){this.updateConstructParser(e,n)},mode:function(e,n){this.updateConstructParser(e,n)},currency:function(e,n){this.updateConstructParser(e,n)},currencyDisplay:function(e,n){this.updateConstructParser(e,n)},useGrouping:function(e,n){this.updateConstructParser(e,n)},minFractionDigits:function(e,n){this.updateConstructParser(e,n)},maxFractionDigits:function(e,n){this.updateConstructParser(e,n)},suffix:function(e,n){this.updateConstructParser(e,n)},prefix:function(e,n){this.updateConstructParser(e,n)}},created:function(){this.constructParser()},methods:{getOptions:function(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits,roundingMode:this.roundingMode}},constructParser:function(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());var e=UV(new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)).reverse(),n=new Map(e.map(function(l,m){return[l,m]}));this._numeral=new RegExp("[".concat(e.join(""),"]"),"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=function(l){return n.get(l)}},updateConstructParser:function(e,n){e!==n&&this.constructParser()},escapeRegExp:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},getDecimalExpression:function(){var e=new Intl.NumberFormat(this.locale,M4(M4({},this.getOptions()),{},{useGrouping:!1}));return new RegExp("[".concat(e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,""),"]"),"g")},getGroupingExpression:function(){var e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp("[".concat(this.groupChar,"]"),"g")},getMinusSignExpression:function(){var e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp("[".concat(e.format(-1).trim().replace(this._numeral,""),"]"),"g")},getCurrencyExpression:function(){if(this.currency){var e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0,roundingMode:this.roundingMode});return new RegExp("[".concat(e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,""),"]"),"g")}return new RegExp("[]","g")},getPrefixExpression:function(){if(this.prefix)this.prefixChar=this.prefix;else{var e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp("".concat(this.escapeRegExp(this.prefixChar||"")),"g")},getSuffixExpression:function(){if(this.suffix)this.suffixChar=this.suffix;else{var e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0,roundingMode:this.roundingMode});this.suffixChar=e.format(1).split("1")[1]}return new RegExp("".concat(this.escapeRegExp(this.suffixChar||"")),"g")},formatValue:function(e){if(e!=null){if(e==="-")return e;if(this.format){var n=new Intl.NumberFormat(this.locale,this.getOptions()),l=n.format(e);return this.prefix&&(l=this.prefix+l),this.suffix&&(l=l+this.suffix),l}return e.toString()}return""},parseValue:function(e){var n=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if(n==="-")return n;var l=+n;return isNaN(l)?null:l}return null},repeat:function(e,n,l){var m=this;if(!this.readonly){var d=n||500;this.clearTimer(),this.timer=setTimeout(function(){m.repeat(e,40,l)},d),this.spin(e,l)}},spin:function(e,n){if(this.$refs.input){var l=this.step*n,m=this.parseValue(this.$refs.input.$el.value)||0,d=this.validateValue(m+l);this.updateInput(d,null,"spin"),this.updateModel(e,d),this.handleOnInput(e,m,d)}},onUpButtonMouseDown:function(e){this.disabled||(this.$refs.input.$el.focus(),this.repeat(e,null,1),e.preventDefault())},onUpButtonMouseUp:function(){this.disabled||this.clearTimer()},onUpButtonMouseLeave:function(){this.disabled||this.clearTimer()},onUpButtonKeyUp:function(){this.disabled||this.clearTimer()},onUpButtonKeyDown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&this.repeat(e,null,1)},onDownButtonMouseDown:function(e){this.disabled||(this.$refs.input.$el.focus(),this.repeat(e,null,-1),e.preventDefault())},onDownButtonMouseUp:function(){this.disabled||this.clearTimer()},onDownButtonMouseLeave:function(){this.disabled||this.clearTimer()},onDownButtonKeyUp:function(){this.disabled||this.clearTimer()},onDownButtonKeyDown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&this.repeat(e,null,-1)},onUserInput:function(){this.isSpecialChar&&(this.$refs.input.$el.value=this.lastValue),this.isSpecialChar=!1},onInputKeyDown:function(e){if(!this.readonly){if(e.altKey||e.ctrlKey||e.metaKey){this.isSpecialChar=!0,this.lastValue=this.$refs.input.$el.value;return}this.lastValue=e.target.value;var n=e.target.selectionStart,l=e.target.selectionEnd,m=l-n,d=e.target.value,x=null,s=e.code||e.key;switch(s){case"ArrowUp":this.spin(e,1),e.preventDefault();break;case"ArrowDown":this.spin(e,-1),e.preventDefault();break;case"ArrowLeft":if(m>1){var T=this.isNumeralChar(d.charAt(n))?n+1:n+2;this.$refs.input.$el.setSelectionRange(T,T)}else this.isNumeralChar(d.charAt(n-1))||e.preventDefault();break;case"ArrowRight":if(m>1){var E=l-1;this.$refs.input.$el.setSelectionRange(E,E)}else this.isNumeralChar(d.charAt(n))||e.preventDefault();break;case"Tab":case"Enter":case"NumpadEnter":x=this.validateValue(this.parseValue(d)),this.$refs.input.$el.value=this.formatValue(x),this.$refs.input.$el.setAttribute("aria-valuenow",x),this.updateModel(e,x);break;case"Backspace":{if(e.preventDefault(),n===l){var A=d.charAt(n-1),z=this.getDecimalCharIndexes(d),j=z.decimalCharIndex,U=z.decimalCharIndexWithoutPrefix;if(this.isNumeralChar(A)){var K=this.getDecimalLength(d);if(this._group.test(A))this._group.lastIndex=0,x=d.slice(0,n-2)+d.slice(n-1);else if(this._decimal.test(A))this._decimal.lastIndex=0,K?this.$refs.input.$el.setSelectionRange(n-1,n-1):x=d.slice(0,n-1)+d.slice(n);else if(j>0&&n>j){var oe=this.isDecimalMode()&&(this.minFractionDigits||0)<K?"":"0";x=d.slice(0,n-1)+oe+d.slice(n)}else U===1?(x=d.slice(0,n-1)+"0"+d.slice(n),x=this.parseValue(x)>0?x:""):x=d.slice(0,n-1)+d.slice(n)}this.updateValue(e,x,null,"delete-single")}else x=this.deleteRange(d,n,l),this.updateValue(e,x,null,"delete-range");break}case"Delete":if(e.preventDefault(),n===l){var fe=d.charAt(n),me=this.getDecimalCharIndexes(d),ne=me.decimalCharIndex,te=me.decimalCharIndexWithoutPrefix;if(this.isNumeralChar(fe)){var re=this.getDecimalLength(d);if(this._group.test(fe))this._group.lastIndex=0,x=d.slice(0,n)+d.slice(n+2);else if(this._decimal.test(fe))this._decimal.lastIndex=0,re?this.$refs.input.$el.setSelectionRange(n+1,n+1):x=d.slice(0,n)+d.slice(n+1);else if(ne>0&&n>ne){var ze=this.isDecimalMode()&&(this.minFractionDigits||0)<re?"":"0";x=d.slice(0,n)+ze+d.slice(n+1)}else te===1?(x=d.slice(0,n)+"0"+d.slice(n+1),x=this.parseValue(x)>0?x:""):x=d.slice(0,n)+d.slice(n+1)}this.updateValue(e,x,null,"delete-back-single")}else x=this.deleteRange(d,n,l),this.updateValue(e,x,null,"delete-range");break;case"Home":e.preventDefault(),Zr(this.min)&&this.updateModel(e,this.min);break;case"End":e.preventDefault(),Zr(this.max)&&this.updateModel(e,this.max);break}}},onInputKeyPress:function(e){if(!this.readonly){var n=e.key,l=this.isDecimalSign(n),m=this.isMinusSign(n);e.code!=="Enter"&&e.preventDefault(),(Number(n)>=0&&Number(n)<=9||m||l)&&this.insert(e,n,{isDecimalSign:l,isMinusSign:m})}},onPaste:function(e){e.preventDefault();var n=(e.clipboardData||window.clipboardData).getData("Text");if(n){var l=this.parseValue(n);l!=null&&this.insert(e,l.toString())}},allowMinusSign:function(){return this.min===null||this.min<0},isMinusSign:function(e){return this._minusSign.test(e)||e==="-"?(this._minusSign.lastIndex=0,!0):!1},isDecimalSign:function(e){return this._decimal.test(e)?(this._decimal.lastIndex=0,!0):!1},isDecimalMode:function(){return this.mode==="decimal"},getDecimalCharIndexes:function(e){var n=e.search(this._decimal);this._decimal.lastIndex=0;var l=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,""),m=l.search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:m}},getCharIndexes:function(e){var n=e.search(this._decimal);this._decimal.lastIndex=0;var l=e.search(this._minusSign);this._minusSign.lastIndex=0;var m=e.search(this._suffix);this._suffix.lastIndex=0;var d=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:l,suffixCharIndex:m,currencyCharIndex:d}},insert:function(e,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isDecimalSign:!1,isMinusSign:!1},m=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!(!this.allowMinusSign()&&m!==-1)){var d=this.$refs.input.$el.selectionStart,x=this.$refs.input.$el.selectionEnd,s=this.$refs.input.$el.value.trim(),T=this.getCharIndexes(s),E=T.decimalCharIndex,A=T.minusCharIndex,z=T.suffixCharIndex,j=T.currencyCharIndex,U;if(l.isMinusSign)d===0&&(U=s,(A===-1||x!==0)&&(U=this.insertText(s,n,0,x)),this.updateValue(e,U,n,"insert"));else if(l.isDecimalSign)E>0&&d===E?this.updateValue(e,s,n,"insert"):E>d&&E<x?(U=this.insertText(s,n,d,x),this.updateValue(e,U,n,"insert")):E===-1&&this.maxFractionDigits&&(U=this.insertText(s,n,d,x),this.updateValue(e,U,n,"insert"));else{var K=this.numberFormat.resolvedOptions().maximumFractionDigits,oe=d!==x?"range-insert":"insert";if(E>0&&d>E){if(d+n.length-(E+1)<=K){var fe=j>=d?j-1:z>=d?z:s.length;U=s.slice(0,d)+n+s.slice(d+n.length,fe)+s.slice(fe),this.updateValue(e,U,n,oe)}}else U=this.insertText(s,n,d,x),this.updateValue(e,U,n,oe)}}},insertText:function(e,n,l,m){var d=n==="."?n:n.split(".");if(d.length===2){var x=e.slice(l,m).search(this._decimal);return this._decimal.lastIndex=0,x>0?e.slice(0,l)+this.formatValue(n)+e.slice(m):this.formatValue(n)||e}else return m-l===e.length?this.formatValue(n):l===0?n+e.slice(m):m===e.length?e.slice(0,l)+n:e.slice(0,l)+n+e.slice(m)},deleteRange:function(e,n,l){var m;return l-n===e.length?m="":n===0?m=e.slice(l):l===e.length?m=e.slice(0,n):m=e.slice(0,n)+e.slice(l),m},initCursor:function(){var e=this.$refs.input.$el.selectionStart,n=this.$refs.input.$el.value,l=n.length,m=null,d=(this.prefixChar||"").length;n=n.replace(this._prefix,""),e=e-d;var x=n.charAt(e);if(this.isNumeralChar(x))return e+d;for(var s=e-1;s>=0;)if(x=n.charAt(s),this.isNumeralChar(x)){m=s+d;break}else s--;if(m!==null)this.$refs.input.$el.setSelectionRange(m+1,m+1);else{for(s=e;s<l;)if(x=n.charAt(s),this.isNumeralChar(x)){m=s+d;break}else s++;m!==null&&this.$refs.input.$el.setSelectionRange(m,m)}return m||0},onInputClick:function(){var e=this.$refs.input.$el.value;!this.readonly&&e!==N5()&&this.initCursor()},isNumeralChar:function(e){return e.length===1&&(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))?(this.resetRegex(),!0):!1},resetRegex:function(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0},updateValue:function(e,n,l,m){var d=this.$refs.input.$el.value,x=null;n!=null&&(x=this.parseValue(n),x=!x&&!this.allowEmpty?0:x,this.updateInput(x,l,m,n),this.handleOnInput(e,d,x))},handleOnInput:function(e,n,l){if(this.isValueChanged(n,l)){var m,d;this.$emit("input",{originalEvent:e,value:l,formattedValue:n}),(m=(d=this.formField).onInput)===null||m===void 0||m.call(d,{originalEvent:e,value:l})}},isValueChanged:function(e,n){if(n===null&&e!==null)return!0;if(n!=null){var l=typeof e=="string"?this.parseValue(e):e;return n!==l}return!1},validateValue:function(e){return e==="-"||e==null?null:this.min!=null&&e<this.min?this.min:this.max!=null&&e>this.max?this.max:e},updateInput:function(e,n,l,m){n=n||"";var d=this.$refs.input.$el.value,x=this.formatValue(e),s=d.length;if(x!==m&&(x=this.concatValues(x,m)),s===0){this.$refs.input.$el.value=x,this.$refs.input.$el.setSelectionRange(0,0);var T=this.initCursor(),E=T+n.length;this.$refs.input.$el.setSelectionRange(E,E)}else{var A=this.$refs.input.$el.selectionStart,z=this.$refs.input.$el.selectionEnd;this.$refs.input.$el.value=x;var j=x.length;if(l==="range-insert"){var U=this.parseValue((d||"").slice(0,A)),K=U!==null?U.toString():"",oe=K.split("").join("(".concat(this.groupChar,")?")),fe=new RegExp(oe,"g");fe.test(x);var me=n.split("").join("(".concat(this.groupChar,")?")),ne=new RegExp(me,"g");ne.test(x.slice(fe.lastIndex)),z=fe.lastIndex+ne.lastIndex,this.$refs.input.$el.setSelectionRange(z,z)}else if(j===s)l==="insert"||l==="delete-back-single"?this.$refs.input.$el.setSelectionRange(z+1,z+1):l==="delete-single"?this.$refs.input.$el.setSelectionRange(z-1,z-1):(l==="delete-range"||l==="spin")&&this.$refs.input.$el.setSelectionRange(z,z);else if(l==="delete-back-single"){var te=d.charAt(z-1),re=d.charAt(z),ze=s-j,_t=this._group.test(re);_t&&ze===1?z+=1:!_t&&this.isNumeralChar(te)&&(z+=-1*ze+1),this._group.lastIndex=0,this.$refs.input.$el.setSelectionRange(z,z)}else if(d==="-"&&l==="insert"){this.$refs.input.$el.setSelectionRange(0,0);var Me=this.initCursor(),he=Me+n.length+1;this.$refs.input.$el.setSelectionRange(he,he)}else z=z+(j-s),this.$refs.input.$el.setSelectionRange(z,z)}this.$refs.input.$el.setAttribute("aria-valuenow",e)},concatValues:function(e,n){if(e&&n){var l=n.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?l!==-1?e.replace(this.suffixChar,"").split(this._decimal)[0]+n.replace(this.suffixChar,"").slice(l)+this.suffixChar:e:l!==-1?e.split(this._decimal)[0]+n.slice(l):e}return e},getDecimalLength:function(e){if(e){var n=e.split(this._decimal);if(n.length===2)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0},updateModel:function(e,n){this.writeValue(n,e)},onInputFocus:function(e){this.focused=!0,!this.disabled&&!this.readonly&&this.$refs.input.$el.value!==N5()&&this.highlightOnFocus&&e.target.select(),this.$emit("focus",e)},onInputBlur:function(e){var n,l;this.focused=!1;var m=e.target,d=this.validateValue(this.parseValue(m.value));this.$emit("blur",{originalEvent:e,value:m.value}),(n=(l=this.formField).onBlur)===null||n===void 0||n.call(l,e),m.value=this.formatValue(d),m.setAttribute("aria-valuenow",d),this.updateModel(e,d),!this.disabled&&!this.readonly&&this.highlightOnFocus&&Rb()},clearTimer:function(){this.timer&&clearInterval(this.timer)},maxBoundry:function(){return this.d_value>=this.max},minBoundry:function(){return this.d_value<=this.min}},computed:{upButtonListeners:function(){var e=this;return{mousedown:function(l){return e.onUpButtonMouseDown(l)},mouseup:function(l){return e.onUpButtonMouseUp(l)},mouseleave:function(l){return e.onUpButtonMouseLeave(l)},keydown:function(l){return e.onUpButtonKeyDown(l)},keyup:function(l){return e.onUpButtonKeyUp(l)}}},downButtonListeners:function(){var e=this;return{mousedown:function(l){return e.onDownButtonMouseDown(l)},mouseup:function(l){return e.onDownButtonMouseUp(l)},mouseleave:function(l){return e.onDownButtonMouseLeave(l)},keydown:function(l){return e.onDownButtonKeyDown(l)},keyup:function(l){return e.onDownButtonKeyUp(l)}}},formattedValue:function(){var e=!this.d_value&&!this.allowEmpty?0:this.d_value;return this.formatValue(e)},getFormatter:function(){return this.numberFormat}},components:{InputText:vo,AngleUpIcon:f6,AngleDownIcon:p6}},KV=["disabled"],ZV=["disabled"],XV=["disabled"],YV=["disabled"];function JV(t,e,n,l,m,d){var x=wn("InputText");return X(),pe("span",ie({class:t.cx("root")},t.ptmi("root")),[ge(x,{ref:"input",id:t.inputId,role:"spinbutton",class:vn([t.cx("pcInputText"),t.inputClass]),style:Wl(t.inputStyle),value:d.formattedValue,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.d_value,inputmode:t.mode==="decimal"&&!t.minFractionDigits?"numeric":"decimal",disabled:t.disabled,readonly:t.readonly,placeholder:t.placeholder,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,size:t.size,invalid:t.invalid,variant:t.variant,onInput:d.onUserInput,onKeydown:d.onInputKeyDown,onKeypress:d.onInputKeyPress,onPaste:d.onPaste,onClick:d.onInputClick,onFocus:d.onInputFocus,onBlur:d.onInputBlur,pt:t.ptm("pcInputText"),unstyled:t.unstyled},null,8,["id","class","style","value","aria-valuemin","aria-valuemax","aria-valuenow","inputmode","disabled","readonly","placeholder","aria-labelledby","aria-label","size","invalid","variant","onInput","onKeydown","onKeypress","onPaste","onClick","onFocus","onBlur","pt","unstyled"]),t.showButtons&&t.buttonLayout==="stacked"?(X(),pe("span",ie({key:0,class:t.cx("buttonGroup")},t.ptm("buttonGroup")),[jt(t.$slots,"incrementbutton",{listeners:d.upButtonListeners},function(){return[M("button",ie({class:[t.cx("incrementButton"),t.incrementButtonClass]},pb(d.upButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("incrementButton")),[jt(t.$slots,t.$slots.incrementicon?"incrementicon":"incrementbuttonicon",{},function(){return[(X(),bt(Tn(t.incrementIcon||t.incrementButtonIcon?"span":"AngleUpIcon"),ie({class:[t.incrementIcon,t.incrementButtonIcon]},t.ptm("incrementIcon"),{"data-pc-section":"incrementicon"}),null,16,["class"]))]})],16,KV)]}),jt(t.$slots,"decrementbutton",{listeners:d.downButtonListeners},function(){return[M("button",ie({class:[t.cx("decrementButton"),t.decrementButtonClass]},pb(d.downButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("decrementButton")),[jt(t.$slots,t.$slots.decrementicon?"decrementicon":"decrementbuttonicon",{},function(){return[(X(),bt(Tn(t.decrementIcon||t.decrementButtonIcon?"span":"AngleDownIcon"),ie({class:[t.decrementIcon,t.decrementButtonIcon]},t.ptm("decrementIcon"),{"data-pc-section":"decrementicon"}),null,16,["class"]))]})],16,ZV)]})],16)):Ct("",!0),jt(t.$slots,"incrementbutton",{listeners:d.upButtonListeners},function(){return[t.showButtons&&t.buttonLayout!=="stacked"?(X(),pe("button",ie({key:0,class:[t.cx("incrementButton"),t.incrementButtonClass]},pb(d.upButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("incrementButton")),[jt(t.$slots,t.$slots.incrementicon?"incrementicon":"incrementbuttonicon",{},function(){return[(X(),bt(Tn(t.incrementIcon||t.incrementButtonIcon?"span":"AngleUpIcon"),ie({class:[t.incrementIcon,t.incrementButtonIcon]},t.ptm("incrementIcon"),{"data-pc-section":"incrementicon"}),null,16,["class"]))]})],16,XV)):Ct("",!0)]}),jt(t.$slots,"decrementbutton",{listeners:d.downButtonListeners},function(){return[t.showButtons&&t.buttonLayout!=="stacked"?(X(),pe("button",ie({key:0,class:[t.cx("decrementButton"),t.decrementButtonClass]},pb(d.downButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("decrementButton")),[jt(t.$slots,t.$slots.decrementicon?"decrementicon":"decrementbuttonicon",{},function(){return[(X(),bt(Tn(t.decrementIcon||t.decrementButtonIcon?"span":"AngleDownIcon"),ie({class:[t.decrementIcon,t.decrementButtonIcon]},t.ptm("decrementIcon"),{"data-pc-section":"decrementicon"}),null,16,["class"]))]})],16,YV)):Ct("",!0)]})],16)}j_.render=JV;var m6={name:"AngleDoubleRightIcon",extends:Qr};function QV(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.68757 11.1451C7.7791 11.1831 7.8773 11.2024 7.9764 11.2019C8.07769 11.1985 8.17721 11.1745 8.26886 11.1312C8.36052 11.088 8.44238 11.0265 8.50943 10.9505L12.0294 7.49085C12.1707 7.34942 12.25 7.15771 12.25 6.95782C12.25 6.75794 12.1707 6.56622 12.0294 6.42479L8.50943 2.90479C8.37014 2.82159 8.20774 2.78551 8.04633 2.80192C7.88491 2.81833 7.73309 2.88635 7.6134 2.99588C7.4937 3.10541 7.41252 3.25061 7.38189 3.40994C7.35126 3.56927 7.37282 3.73423 7.44337 3.88033L10.4605 6.89748L7.44337 9.91463C7.30212 10.0561 7.22278 10.2478 7.22278 10.4477C7.22278 10.6475 7.30212 10.8393 7.44337 10.9807C7.51301 11.0512 7.59603 11.1071 7.68757 11.1451ZM1.94207 10.9505C2.07037 11.0968 2.25089 11.1871 2.44493 11.2019C2.63898 11.1871 2.81949 11.0968 2.94779 10.9505L6.46779 7.49085C6.60905 7.34942 6.68839 7.15771 6.68839 6.95782C6.68839 6.75793 6.60905 6.56622 6.46779 6.42479L2.94779 2.90479C2.80704 2.83757 2.6489 2.81563 2.49517 2.84201C2.34143 2.86839 2.19965 2.94178 2.08936 3.05207C1.97906 3.16237 1.90567 3.30415 1.8793 3.45788C1.85292 3.61162 1.87485 3.76975 1.94207 3.9105L4.95922 6.92765L1.94207 9.9448C1.81838 10.0831 1.75 10.2621 1.75 10.4477C1.75 10.6332 1.81838 10.8122 1.94207 10.9505Z",fill:"currentColor"},null,-1)]),16)}m6.render=QV;var g6={name:"AngleLeftIcon",extends:Qr};function ej(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M8.75 11.185C8.65146 11.1854 8.55381 11.1662 8.4628 11.1284C8.37179 11.0906 8.28924 11.0351 8.22 10.965L4.72 7.46496C4.57955 7.32433 4.50066 7.13371 4.50066 6.93496C4.50066 6.73621 4.57955 6.54558 4.72 6.40496L8.22 2.93496C8.36095 2.84357 8.52851 2.80215 8.69582 2.81733C8.86312 2.83252 9.02048 2.90344 9.14268 3.01872C9.26487 3.134 9.34483 3.28696 9.36973 3.4531C9.39463 3.61924 9.36303 3.78892 9.28 3.93496L6.28 6.93496L9.28 9.93496C9.42045 10.0756 9.49934 10.2662 9.49934 10.465C9.49934 10.6637 9.42045 10.8543 9.28 10.995C9.13526 11.1257 8.9448 11.1939 8.75 11.185Z",fill:"currentColor"},null,-1)]),16)}g6.render=ej;var tj={name:"BasePaginator",extends:mr,props:{totalRecords:{type:Number,default:0},rows:{type:Number,default:0},first:{type:Number,default:0},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},template:{type:[Object,String],default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},currentPageReportTemplate:{type:null,default:"({currentPage} of {totalPages})"},alwaysShow:{type:Boolean,default:!0}},style:rV,provide:function(){return{$pcPaginator:this,$parentInstance:this}}},y6={name:"CurrentPageReport",hostName:"Paginator",extends:mr,props:{pageCount:{type:Number,default:0},currentPage:{type:Number,default:0},page:{type:Number,default:0},first:{type:Number,default:0},rows:{type:Number,default:0},totalRecords:{type:Number,default:0},template:{type:String,default:"({currentPage} of {totalPages})"}},computed:{text:function(){var e=this.template.replace("{currentPage}",this.currentPage).replace("{totalPages}",this.pageCount).replace("{first}",this.pageCount>0?this.first+1:0).replace("{last}",Math.min(this.first+this.rows,this.totalRecords)).replace("{rows}",this.rows).replace("{totalRecords}",this.totalRecords);return e}}};function nj(t,e,n,l,m,d){return X(),pe("span",ie({class:t.cx("current")},t.ptm("current")),Ue(d.text),17)}y6.render=nj;var v6={name:"FirstPageLink",hostName:"Paginator",extends:mr,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleDoubleLeftIcon:c6},directives:{ripple:zs}};function rj(t,e,n,l,m,d){var x=No("ripple");return _r((X(),pe("button",ie({class:t.cx("first"),type:"button"},d.getPTOptions("first"),{"data-pc-group-section":"pagebutton"}),[(X(),bt(Tn(n.template||"AngleDoubleLeftIcon"),ie({class:t.cx("firstIcon")},d.getPTOptions("firstIcon")),null,16,["class"]))],16)),[[x]])}v6.render=rj;var b6={name:"JumpToPageDropdown",hostName:"Paginator",extends:mr,emits:["page-change"],props:{page:Number,pageCount:Number,disabled:Boolean,templates:null},methods:{onChange:function(e){this.$emit("page-change",e)}},computed:{pageOptions:function(){for(var e=[],n=0;n<this.pageCount;n++)e.push({label:String(n+1),value:n});return e}},components:{JTPSelect:xs}};function ij(t,e,n,l,m,d){var x=wn("JTPSelect");return X(),bt(x,{modelValue:n.page,options:d.pageOptions,optionLabel:"label",optionValue:"value","onUpdate:modelValue":e[0]||(e[0]=function(s){return d.onChange(s)}),class:vn(t.cx("pcJumpToPageDropdown")),disabled:n.disabled,unstyled:t.unstyled,pt:t.ptm("pcJumpToPageDropdown"),"data-pc-group-section":"pagedropdown"},Gu({_:2},[n.templates.jumptopagedropdownicon?{name:"dropdownicon",fn:Xe(function(s){return[(X(),bt(Tn(n.templates.jumptopagedropdownicon),{class:vn(s.class)},null,8,["class"]))]}),key:"0"}:void 0]),1032,["modelValue","options","class","disabled","unstyled","pt"])}b6.render=ij;var _6={name:"JumpToPageInput",hostName:"Paginator",extends:mr,inheritAttrs:!1,emits:["page-change"],props:{page:Number,pageCount:Number,disabled:Boolean},data:function(){return{d_page:this.page}},watch:{page:function(e){this.d_page=e}},methods:{onChange:function(e){e!==this.page&&(this.d_page=e,this.$emit("page-change",e-1))}},computed:{inputArialabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.jumpToPageInputLabel:void 0}},components:{JTPInput:j_}};function oj(t,e,n,l,m,d){var x=wn("JTPInput");return X(),bt(x,{ref:"jtpInput",modelValue:m.d_page,class:vn(t.cx("pcJumpToPageInputText")),"aria-label":d.inputArialabel,disabled:n.disabled,"onUpdate:modelValue":d.onChange,unstyled:t.unstyled,pt:t.ptm("pcJumpToPageInputText")},null,8,["modelValue","class","aria-label","disabled","onUpdate:modelValue","unstyled","pt"])}_6.render=oj;var x6={name:"LastPageLink",hostName:"Paginator",extends:mr,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleDoubleRightIcon:m6},directives:{ripple:zs}};function sj(t,e,n,l,m,d){var x=No("ripple");return _r((X(),pe("button",ie({class:t.cx("last"),type:"button"},d.getPTOptions("last"),{"data-pc-group-section":"pagebutton"}),[(X(),bt(Tn(n.template||"AngleDoubleRightIcon"),ie({class:t.cx("lastIcon")},d.getPTOptions("lastIcon")),null,16,["class"]))],16)),[[x]])}x6.render=sj;var w6={name:"NextPageLink",hostName:"Paginator",extends:mr,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleRightIcon:n6},directives:{ripple:zs}};function aj(t,e,n,l,m,d){var x=No("ripple");return _r((X(),pe("button",ie({class:t.cx("next"),type:"button"},d.getPTOptions("next"),{"data-pc-group-section":"pagebutton"}),[(X(),bt(Tn(n.template||"AngleRightIcon"),ie({class:t.cx("nextIcon")},d.getPTOptions("nextIcon")),null,16,["class"]))],16)),[[x]])}w6.render=aj;var S6={name:"PageLinks",hostName:"Paginator",extends:mr,inheritAttrs:!1,emits:["click"],props:{value:Array,page:Number},methods:{getPTOptions:function(e,n){return this.ptm(n,{context:{active:e===this.page}})},onPageLinkClick:function(e,n){this.$emit("click",{originalEvent:e,value:n})},ariaPageLabel:function(e){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.pageLabel.replace(/{page}/g,e):void 0}},directives:{ripple:zs}},lj=["aria-label","aria-current","onClick","data-p-active"];function cj(t,e,n,l,m,d){var x=No("ripple");return X(),pe("span",ie({class:t.cx("pages")},t.ptm("pages")),[(X(!0),pe(an,null,fr(n.value,function(s){return _r((X(),pe("button",ie({key:s,class:t.cx("page",{pageLink:s}),type:"button","aria-label":d.ariaPageLabel(s),"aria-current":s-1===n.page?"page":void 0,onClick:function(E){return d.onPageLinkClick(E,s)},ref_for:!0},d.getPTOptions(s-1,"page"),{"data-p-active":s-1===n.page}),[tr(Ue(s),1)],16,lj)),[[x]])}),128))],16)}S6.render=cj;var C6={name:"PrevPageLink",hostName:"Paginator",extends:mr,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleLeftIcon:g6},directives:{ripple:zs}};function uj(t,e,n,l,m,d){var x=No("ripple");return _r((X(),pe("button",ie({class:t.cx("prev"),type:"button"},d.getPTOptions("prev"),{"data-pc-group-section":"pagebutton"}),[(X(),bt(Tn(n.template||"AngleLeftIcon"),ie({class:t.cx("prevIcon")},d.getPTOptions("prevIcon")),null,16,["class"]))],16)),[[x]])}C6.render=uj;var k6={name:"RowsPerPageDropdown",hostName:"Paginator",extends:mr,emits:["rows-change"],props:{options:Array,rows:Number,disabled:Boolean,templates:null},methods:{onChange:function(e){this.$emit("rows-change",e)}},computed:{rowsOptions:function(){var e=[];if(this.options)for(var n=0;n<this.options.length;n++)e.push({label:String(this.options[n]),value:this.options[n]});return e}},components:{RPPSelect:xs}};function dj(t,e,n,l,m,d){var x=wn("RPPSelect");return X(),bt(x,{modelValue:n.rows,options:d.rowsOptions,optionLabel:"label",optionValue:"value","onUpdate:modelValue":e[0]||(e[0]=function(s){return d.onChange(s)}),class:vn(t.cx("pcRowPerPageDropdown")),disabled:n.disabled,unstyled:t.unstyled,pt:t.ptm("pcRowPerPageDropdown"),"data-pc-group-section":"pagedropdown"},Gu({_:2},[n.templates.rowsperpagedropdownicon?{name:"dropdownicon",fn:Xe(function(s){return[(X(),bt(Tn(n.templates.rowsperpagedropdownicon),{class:vn(s.class)},null,8,["class"]))]}),key:"0"}:void 0]),1032,["modelValue","options","class","disabled","unstyled","pt"])}k6.render=dj;function y2(t){"@babel/helpers - typeof";return y2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y2(t)}function D4(t,e){return mj(t)||fj(t,e)||pj(t,e)||hj()}function hj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pj(t,e){if(t){if(typeof t=="string")return L4(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L4(t,e):void 0}}function L4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}function fj(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var l,m,d,x,s=[],T=!0,E=!1;try{if(d=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;T=!1}else for(;!(T=(l=d.call(n)).done)&&(s.push(l.value),s.length!==e);T=!0);}catch(A){E=!0,m=A}finally{try{if(!T&&n.return!=null&&(x=n.return(),Object(x)!==x))return}finally{if(E)throw m}}return s}}function mj(t){if(Array.isArray(t))return t}var U_={name:"Paginator",extends:tj,inheritAttrs:!1,emits:["update:first","update:rows","page"],data:function(){return{d_first:this.first,d_rows:this.rows}},watch:{first:function(e){this.d_first=e},rows:function(e){this.d_rows=e},totalRecords:function(e){this.page>0&&e&&this.d_first>=e&&this.changePage(this.pageCount-1)}},mounted:function(){this.createStyle()},methods:{changePage:function(e){var n=this.pageCount;if(e>=0&&e<n){this.d_first=this.d_rows*e;var l={page:e,first:this.d_first,rows:this.d_rows,pageCount:n};this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",l)}},changePageToFirst:function(e){this.isFirstPage||this.changePage(0),e.preventDefault()},changePageToPrev:function(e){this.changePage(this.page-1),e.preventDefault()},changePageLink:function(e){this.changePage(e.value-1),e.originalEvent.preventDefault()},changePageToNext:function(e){this.changePage(this.page+1),e.preventDefault()},changePageToLast:function(e){this.isLastPage||this.changePage(this.pageCount-1),e.preventDefault()},onRowChange:function(e){this.d_rows=e,this.changePage(this.page)},createStyle:function(){var e=this;if(this.hasBreakpoints()&&!this.isUnstyled){var n;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",If(this.styleElement,"nonce",(n=this.$primevue)===null||n===void 0||(n=n.config)===null||n===void 0||(n=n.csp)===null||n===void 0?void 0:n.nonce),document.body.appendChild(this.styleElement);var l="",m=Object.keys(this.template),d={};m.sort(function(K,oe){return parseInt(K)-parseInt(oe)}).forEach(function(K){d[K]=e.template[K]});for(var x=0,s=Object.entries(Object.entries(d));x<s.length;x++){var T=D4(s[x],2),E=T[0],A=D4(T[1],1),z=A[0],j=void 0,U=void 0;z!=="default"&&typeof Object.keys(d)[E-1]=="string"?U=Number(Object.keys(d)[E-1].slice(0,-2))+1+"px":U=Object.keys(d)[E-1],j=Object.entries(d)[E-1]?"and (min-width:".concat(U,")"):"",z==="default"?l+=`
                            @media screen `.concat(j,` {
                                .p-paginator[`).concat(this.$attrSelector,`],
                                    display: flex;
                                }
                            }
                        `):l+=`
.p-paginator-`.concat(z,` {
    display: none;
}
@media screen `).concat(j," and (max-width: ").concat(z,`) {
    .p-paginator-`).concat(z,` {
        display: flex;
    }

    .p-paginator-default{
        display: none;
    }
}
                    `)}this.styleElement.innerHTML=l}},hasBreakpoints:function(){return y2(this.template)==="object"},getAriaLabel:function(e){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria[e]:void 0}},computed:{templateItems:function(){var e={};if(this.hasBreakpoints()){e=this.template,e.default||(e.default="FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown");for(var n in e)e[n]=this.template[n].split(" ").map(function(l){return l.trim()});return e}return e.default=this.template.split(" ").map(function(l){return l.trim()}),e},page:function(){return Math.floor(this.d_first/this.d_rows)},pageCount:function(){return Math.ceil(this.totalRecords/this.d_rows)},isFirstPage:function(){return this.page===0},isLastPage:function(){return this.page===this.pageCount-1},calculatePageLinkBoundaries:function(){var e=this.pageCount,n=Math.min(this.pageLinkSize,e),l=Math.max(0,Math.ceil(this.page-n/2)),m=Math.min(e-1,l+n-1),d=this.pageLinkSize-(m-l+1);return l=Math.max(0,l-d),[l,m]},pageLinks:function(){for(var e=[],n=this.calculatePageLinkBoundaries,l=n[0],m=n[1],d=l;d<=m;d++)e.push(d+1);return e},currentState:function(){return{page:this.page,first:this.d_first,rows:this.d_rows}},empty:function(){return this.pageCount===0},currentPage:function(){return this.pageCount>0?this.page+1:0},last:function(){return Math.min(this.d_first+this.rows,this.totalRecords)}},components:{CurrentPageReport:y6,FirstPageLink:v6,LastPageLink:x6,NextPageLink:w6,PageLinks:S6,PrevPageLink:C6,RowsPerPageDropdown:k6,JumpToPageDropdown:b6,JumpToPageInput:_6}};function gj(t,e,n,l,m,d){var x=wn("FirstPageLink"),s=wn("PrevPageLink"),T=wn("NextPageLink"),E=wn("LastPageLink"),A=wn("PageLinks"),z=wn("CurrentPageReport"),j=wn("RowsPerPageDropdown"),U=wn("JumpToPageDropdown"),K=wn("JumpToPageInput");return t.alwaysShow||d.pageLinks&&d.pageLinks.length>1?(X(),pe("nav",ka(ie({key:0},t.ptmi("paginatorContainer"))),[(X(!0),pe(an,null,fr(d.templateItems,function(oe,fe){return X(),pe("div",ie({key:fe,ref_for:!0,ref:"paginator",class:t.cx("paginator",{key:fe})},t.ptm("root")),[t.$slots.container?jt(t.$slots,"container",{key:0,first:m.d_first+1,last:d.last,rows:m.d_rows,page:d.page,pageCount:d.pageCount,totalRecords:t.totalRecords,firstPageCallback:d.changePageToFirst,lastPageCallback:d.changePageToLast,prevPageCallback:d.changePageToPrev,nextPageCallback:d.changePageToNext,rowChangeCallback:d.onRowChange}):(X(),pe(an,{key:1},[t.$slots.start?(X(),pe("div",ie({key:0,class:t.cx("contentStart"),ref_for:!0},t.ptm("contentStart")),[jt(t.$slots,"start",{state:d.currentState})],16)):Ct("",!0),M("div",ie({class:t.cx("content"),ref_for:!0},t.ptm("content")),[(X(!0),pe(an,null,fr(oe,function(me){return X(),pe(an,{key:me},[me==="FirstPageLink"?(X(),bt(x,{key:0,"aria-label":d.getAriaLabel("firstPageLabel"),template:t.$slots.firsticon||t.$slots.firstpagelinkicon,onClick:e[0]||(e[0]=function(ne){return d.changePageToFirst(ne)}),disabled:d.isFirstPage||d.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):me==="PrevPageLink"?(X(),bt(s,{key:1,"aria-label":d.getAriaLabel("prevPageLabel"),template:t.$slots.previcon||t.$slots.prevpagelinkicon,onClick:e[1]||(e[1]=function(ne){return d.changePageToPrev(ne)}),disabled:d.isFirstPage||d.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):me==="NextPageLink"?(X(),bt(T,{key:2,"aria-label":d.getAriaLabel("nextPageLabel"),template:t.$slots.nexticon||t.$slots.nextpagelinkicon,onClick:e[2]||(e[2]=function(ne){return d.changePageToNext(ne)}),disabled:d.isLastPage||d.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):me==="LastPageLink"?(X(),bt(E,{key:3,"aria-label":d.getAriaLabel("lastPageLabel"),template:t.$slots.lasticon||t.$slots.lastpagelinkicon,onClick:e[3]||(e[3]=function(ne){return d.changePageToLast(ne)}),disabled:d.isLastPage||d.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):me==="PageLinks"?(X(),bt(A,{key:4,"aria-label":d.getAriaLabel("pageLabel"),value:d.pageLinks,page:d.page,onClick:e[4]||(e[4]=function(ne){return d.changePageLink(ne)}),unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","value","page","unstyled","pt"])):me==="CurrentPageReport"?(X(),bt(z,{key:5,"aria-live":"polite",template:t.currentPageReportTemplate,currentPage:d.currentPage,page:d.page,pageCount:d.pageCount,first:m.d_first,rows:m.d_rows,totalRecords:t.totalRecords,unstyled:t.unstyled,pt:t.pt},null,8,["template","currentPage","page","pageCount","first","rows","totalRecords","unstyled","pt"])):me==="RowsPerPageDropdown"&&t.rowsPerPageOptions?(X(),bt(j,{key:6,"aria-label":d.getAriaLabel("rowsPerPageLabel"),rows:m.d_rows,options:t.rowsPerPageOptions,onRowsChange:e[5]||(e[5]=function(ne){return d.onRowChange(ne)}),disabled:d.empty,templates:t.$slots,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","rows","options","disabled","templates","unstyled","pt"])):me==="JumpToPageDropdown"?(X(),bt(U,{key:7,"aria-label":d.getAriaLabel("jumpToPageDropdownLabel"),page:d.page,pageCount:d.pageCount,onPageChange:e[6]||(e[6]=function(ne){return d.changePage(ne)}),disabled:d.empty,templates:t.$slots,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","page","pageCount","disabled","templates","unstyled","pt"])):me==="JumpToPageInput"?(X(),bt(K,{key:8,page:d.currentPage,onPageChange:e[7]||(e[7]=function(ne){return d.changePage(ne)}),disabled:d.empty,unstyled:t.unstyled,pt:t.pt},null,8,["page","disabled","unstyled","pt"])):Ct("",!0)],64)}),128))],16),t.$slots.end?(X(),pe("div",ie({key:1,class:t.cx("contentEnd"),ref_for:!0},t.ptm("contentEnd")),[jt(t.$slots,"end",{state:d.currentState})],16)):Ct("",!0)],64))],16)}),128))],16)):Ct("",!0)}U_.render=gj;var yj=function(e){var n=e.dt;return`
.p-datatable {
    position: relative;
}

.p-datatable-table {
    border-spacing: 0;
    border-collapse: separate;
    width: 100%;
}

.p-datatable-scrollable > .p-datatable-table-container {
    position: relative;
}

.p-datatable-scrollable-table > .p-datatable-thead {
    inset-block-start: 0;
    z-index: 1;
}

.p-datatable-scrollable-table > .p-datatable-frozen-tbody {
    position: sticky;
    z-index: 1;
}

.p-datatable-scrollable-table > .p-datatable-tfoot {
    inset-block-end: 0;
    z-index: 1;
}

.p-datatable-scrollable .p-datatable-frozen-column {
    position: sticky;
    background: `.concat(n("datatable.header.cell.background"),`;
}

.p-datatable-scrollable th.p-datatable-frozen-column {
    z-index: 1;
}

.p-datatable-scrollable > .p-datatable-table-container > .p-datatable-table > .p-datatable-thead,
.p-datatable-scrollable > .p-datatable-table-container > .p-virtualscroller > .p-datatable-table > .p-datatable-thead {
    background: `).concat(n("datatable.header.cell.background"),`;
}

.p-datatable-scrollable > .p-datatable-table-container > .p-datatable-table > .p-datatable-tfoot,
.p-datatable-scrollable > .p-datatable-table-container > .p-virtualscroller > .p-datatable-table > .p-datatable-tfoot {
    background: `).concat(n("datatable.footer.cell.background"),`;
}

.p-datatable-flex-scrollable {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.p-datatable-flex-scrollable > .p-datatable-table-container {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100%;
}

.p-datatable-scrollable-table > .p-datatable-tbody > .p-datatable-row-group-header {
    position: sticky;
    z-index: 1;
}

.p-datatable-resizable-table > .p-datatable-thead > tr > th,
.p-datatable-resizable-table > .p-datatable-tfoot > tr > td,
.p-datatable-resizable-table > .p-datatable-tbody > tr > td {
    overflow: hidden;
    white-space: nowrap;
}

.p-datatable-resizable-table > .p-datatable-thead > tr > th.p-datatable-resizable-column:not(.p-datatable-frozen-column) {
    background-clip: padding-box;
    position: relative;
}

.p-datatable-resizable-table-fit > .p-datatable-thead > tr > th.p-datatable-resizable-column:last-child .p-datatable-column-resizer {
    display: none;
}

.p-datatable-column-resizer {
    display: block;
    position: absolute;
    inset-block-start: 0;
    inset-inline-end: 0;
    margin: 0;
    width: `).concat(n("datatable.column.resizer.width"),`;
    height: 100%;
    padding: 0;
    cursor: col-resize;
    border: 1px solid transparent;
}

.p-datatable-column-header-content {
    display: flex;
    align-items: center;
    gap: `).concat(n("datatable.header.cell.gap"),`;
}

.p-datatable-column-resize-indicator {
    width: `).concat(n("datatable.resize.indicator.width"),`;
    position: absolute;
    z-index: 10;
    display: none;
    background: `).concat(n("datatable.resize.indicator.color"),`;
}

.p-datatable-row-reorder-indicator-up,
.p-datatable-row-reorder-indicator-down {
    position: absolute;
    display: none;
}

.p-datatable-reorderable-column,
.p-datatable-reorderable-row-handle {
    cursor: move;
}

.p-datatable-mask {
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
}

.p-datatable-inline-filter {
    display: flex;
    align-items: center;
    width: 100%;
    gap: `).concat(n("datatable.filter.inline.gap"),`;
}

.p-datatable-inline-filter .p-datatable-filter-element-container {
    flex: 1 1 auto;
    width: 1%;
}

.p-datatable-filter-overlay {
    background: `).concat(n("datatable.filter.overlay.select.background"),`;
    color: `).concat(n("datatable.filter.overlay.select.color"),`;
    border: 1px solid `).concat(n("datatable.filter.overlay.select.border.color"),`;
    border-radius: `).concat(n("datatable.filter.overlay.select.border.radius"),`;
    box-shadow: `).concat(n("datatable.filter.overlay.select.shadow"),`;
    min-width: 12.5rem;
}

.p-datatable-filter-constraint-list {
    margin: 0;
    list-style: none;
    display: flex;
    flex-direction: column;
    padding: `).concat(n("datatable.filter.constraint.list.padding"),`;
    gap: `).concat(n("datatable.filter.constraint.list.gap"),`;
}

.p-datatable-filter-constraint {
    padding: `).concat(n("datatable.filter.constraint.padding"),`;
    color: `).concat(n("datatable.filter.constraint.color"),`;
    border-radius: `).concat(n("datatable.filter.constraint.border.radius"),`;
    cursor: pointer;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
        box-shadow `).concat(n("datatable.transition.duration"),`;
}

.p-datatable-filter-constraint-selected {
    background: `).concat(n("datatable.filter.constraint.selected.background"),`;
    color: `).concat(n("datatable.filter.constraint.selected.color"),`;
}

.p-datatable-filter-constraint:not(.p-datatable-filter-constraint-selected):not(.p-disabled):hover {
    background: `).concat(n("datatable.filter.constraint.focus.background"),`;
    color: `).concat(n("datatable.filter.constraint.focus.color"),`;
}

.p-datatable-filter-constraint:focus-visible {
    outline: 0 none;
    background: `).concat(n("datatable.filter.constraint.focus.background"),`;
    color: `).concat(n("datatable.filter.constraint.focus.color"),`;
}

.p-datatable-filter-constraint-selected:focus-visible {
    outline: 0 none;
    background: `).concat(n("datatable.filter.constraint.selected.focus.background"),`;
    color: `).concat(n("datatable.filter.constraint.selected.focus.color"),`;
}

.p-datatable-filter-constraint-separator {
    border-block-start: 1px solid `).concat(n("datatable.filter.constraint.separator.border.color"),`;
}

.p-datatable-popover-filter {
    display: inline-flex;
    margin-inline-start: auto;
}

.p-datatable-filter-overlay-popover {
    background: `).concat(n("datatable.filter.overlay.popover.background"),`;
    color: `).concat(n("datatable.filter.overlay.popover.color"),`;
    border: 1px solid `).concat(n("datatable.filter.overlay.popover.border.color"),`;
    border-radius: `).concat(n("datatable.filter.overlay.popover.border.radius"),`;
    box-shadow: `).concat(n("datatable.filter.overlay.popover.shadow"),`;
    min-width: 12.5rem;
    padding: `).concat(n("datatable.filter.overlay.popover.padding"),`;
    display: flex;
    flex-direction: column;
    gap: `).concat(n("datatable.filter.overlay.popover.gap"),`;
}

.p-datatable-filter-operator-dropdown {
    width: 100%;
}

.p-datatable-filter-rule-list,
.p-datatable-filter-rule {
    display: flex;
    flex-direction: column;
    gap: `).concat(n("datatable.filter.overlay.popover.gap"),`;
}

.p-datatable-filter-rule {
    border-block-end: 1px solid `).concat(n("datatable.filter.rule.border.color"),`;
    padding-bottom: `).concat(n("datatable.filter.overlay.popover.gap"),`;
}

.p-datatable-filter-rule:last-child {
    border-block-end: 0 none;
    padding-bottom: 0;
}

.p-datatable-filter-add-rule-button {
    width: 100%;
}

.p-datatable-filter-remove-rule-button {
    width: 100%;
}

.p-datatable-filter-buttonbar {
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.p-datatable-virtualscroller-spacer {
    display: flex;
}

.p-datatable .p-virtualscroller .p-virtualscroller-loading {
    transform: none !important;
    min-height: 0;
    position: sticky;
    inset-block-start: 0;
    inset-inline-start: 0;
}

.p-datatable-paginator-top {
    border-color: `).concat(n("datatable.paginator.top.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.paginator.top.border.width"),`;
}

.p-datatable-paginator-bottom {
    border-color: `).concat(n("datatable.paginator.bottom.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.paginator.bottom.border.width"),`;
}

.p-datatable-header {
    background: `).concat(n("datatable.header.background"),`;
    color: `).concat(n("datatable.header.color"),`;
    border-color: `).concat(n("datatable.header.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.header.border.width"),`;
    padding: `).concat(n("datatable.header.padding"),`;
}

.p-datatable-footer {
    background: `).concat(n("datatable.footer.background"),`;
    color: `).concat(n("datatable.footer.color"),`;
    border-color: `).concat(n("datatable.footer.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.footer.border.width"),`;
    padding: `).concat(n("datatable.footer.padding"),`;
}

.p-datatable-header-cell {
    padding: `).concat(n("datatable.header.cell.padding"),`;
    background: `).concat(n("datatable.header.cell.background"),`;
    border-color: `).concat(n("datatable.header.cell.border.color"),`;
    border-style: solid;
    border-width: 0 0 1px 0;
    color: `).concat(n("datatable.header.cell.color"),`;
    font-weight: normal;
    text-align: start;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
            outline-color `).concat(n("datatable.transition.duration"),", box-shadow ").concat(n("datatable.transition.duration"),`;
}

.p-datatable-column-title {
    font-weight: `).concat(n("datatable.column.title.font.weight"),`;
}

.p-datatable-tbody > tr {
    outline-color: transparent;
    background: `).concat(n("datatable.row.background"),`;
    color: `).concat(n("datatable.row.color"),`;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
            outline-color `).concat(n("datatable.transition.duration"),", box-shadow ").concat(n("datatable.transition.duration"),`;
}

.p-datatable-tbody > tr > td {
    text-align: start;
    border-color: `).concat(n("datatable.body.cell.border.color"),`;
    border-style: solid;
    border-width: 0 0 1px 0;
    padding: `).concat(n("datatable.body.cell.padding"),`;
}

.p-datatable-hoverable .p-datatable-tbody > tr:not(.p-datatable-row-selected):hover {
    background: `).concat(n("datatable.row.hover.background"),`;
    color: `).concat(n("datatable.row.hover.color"),`;
}

.p-datatable-tbody > tr.p-datatable-row-selected {
    background: `).concat(n("datatable.row.selected.background"),`;
    color: `).concat(n("datatable.row.selected.color"),`;
}

.p-datatable-tbody > tr:has(+ .p-datatable-row-selected) > td {
    border-block-end-color: `).concat(n("datatable.body.cell.selected.border.color"),`;
}

.p-datatable-tbody > tr.p-datatable-row-selected > td {
    border-block-end-color: `).concat(n("datatable.body.cell.selected.border.color"),`;
}

.p-datatable-tbody > tr:focus-visible,
.p-datatable-tbody > tr.p-datatable-contextmenu-row-selected {
    box-shadow: `).concat(n("datatable.row.focus.ring.shadow"),`;
    outline: `).concat(n("datatable.row.focus.ring.width")," ").concat(n("datatable.row.focus.ring.style")," ").concat(n("datatable.row.focus.ring.color"),`;
    outline-offset: `).concat(n("datatable.row.focus.ring.offset"),`;
}

.p-datatable-tfoot > tr > td {
    text-align: start;
    padding: `).concat(n("datatable.footer.cell.padding"),`;
    border-color: `).concat(n("datatable.footer.cell.border.color"),`;
    border-style: solid;
    border-width: 0 0 1px 0;
    color: `).concat(n("datatable.footer.cell.color"),`;
    background: `).concat(n("datatable.footer.cell.background"),`;
}

.p-datatable-column-footer {
    font-weight: `).concat(n("datatable.column.footer.font.weight"),`;
}

.p-datatable-sortable-column {
    cursor: pointer;
    user-select: none;
    outline-color: transparent;
}

.p-datatable-column-title,
.p-datatable-sort-icon,
.p-datatable-sort-badge {
    vertical-align: middle;
}

.p-datatable-sort-icon {
    color: `).concat(n("datatable.sort.icon.color"),`;
    font-size: `).concat(n("datatable.sort.icon.size"),`;
    width: `).concat(n("datatable.sort.icon.size"),`;
    height: `).concat(n("datatable.sort.icon.size"),`;
    transition: color `).concat(n("datatable.transition.duration"),`;
}

.p-datatable-sortable-column:not(.p-datatable-column-sorted):hover {
    background: `).concat(n("datatable.header.cell.hover.background"),`;
    color: `).concat(n("datatable.header.cell.hover.color"),`;
}

.p-datatable-sortable-column:not(.p-datatable-column-sorted):hover .p-datatable-sort-icon {
    color: `).concat(n("datatable.sort.icon.hover.color"),`;
}

.p-datatable-column-sorted {
    background: `).concat(n("datatable.header.cell.selected.background"),`;
    color: `).concat(n("datatable.header.cell.selected.color"),`;
}

.p-datatable-column-sorted .p-datatable-sort-icon {
    color: `).concat(n("datatable.header.cell.selected.color"),`;
}

.p-datatable-sortable-column:focus-visible {
    box-shadow: `).concat(n("datatable.header.cell.focus.ring.shadow"),`;
    outline: `).concat(n("datatable.header.cell.focus.ring.width")," ").concat(n("datatable.header.cell.focus.ring.style")," ").concat(n("datatable.header.cell.focus.ring.color"),`;
    outline-offset: `).concat(n("datatable.header.cell.focus.ring.offset"),`;
}

.p-datatable-hoverable .p-datatable-selectable-row {
    cursor: pointer;
}

.p-datatable-tbody > tr.p-datatable-dragpoint-top > td {
    box-shadow: inset 0 2px 0 0 `).concat(n("datatable.drop.point.color"),`;
}

.p-datatable-tbody > tr.p-datatable-dragpoint-bottom > td {
    box-shadow: inset 0 -2px 0 0 `).concat(n("datatable.drop.point.color"),`;
}

.p-datatable-loading-icon {
    font-size: `).concat(n("datatable.loading.icon.size"),`;
    width: `).concat(n("datatable.loading.icon.size"),`;
    height: `).concat(n("datatable.loading.icon.size"),`;
}

.p-datatable-gridlines .p-datatable-header {
    border-width: 1px 1px 0 1px;
}

.p-datatable-gridlines .p-datatable-footer {
    border-width: 0 1px 1px 1px;
}

.p-datatable-gridlines .p-datatable-paginator-top {
    border-width: 1px 1px 0 1px;
}

.p-datatable-gridlines .p-datatable-paginator-bottom {
    border-width: 0 1px 1px 1px;
}

.p-datatable-gridlines .p-datatable-thead > tr > th {
    border-width: 1px 0 1px 1px;
}

.p-datatable-gridlines .p-datatable-thead > tr > th:last-child {
    border-width: 1px;
}

.p-datatable-gridlines .p-datatable-tbody > tr > td {
    border-width: 1px 0 0 1px;
}

.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {
    border-width: 1px 1px 0 1px;
}

.p-datatable-gridlines .p-datatable-tbody > tr:last-child > td {
    border-width: 1px 0 1px 1px;
}

.p-datatable-gridlines .p-datatable-tbody > tr:last-child > td:last-child {
    border-width: 1px;
}

.p-datatable-gridlines .p-datatable-tfoot > tr > td {
    border-width: 1px 0 1px 1px;
}

.p-datatable-gridlines .p-datatable-tfoot > tr > td:last-child {
    border-width: 1px 1px 1px 1px;
}

.p-datatable.p-datatable-gridlines .p-datatable-thead + .p-datatable-tfoot > tr > td {
    border-width: 0 0 1px 1px;
}

.p-datatable.p-datatable-gridlines .p-datatable-thead + .p-datatable-tfoot > tr > td:last-child {
    border-width: 0 1px 1px 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-thead):has(.p-datatable-tbody) .p-datatable-tbody > tr > td {
    border-width: 0 0 1px 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-thead):has(.p-datatable-tbody) .p-datatable-tbody > tr > td:last-child {
    border-width: 0 1px 1px 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-tbody):has(.p-datatable-tfoot) .p-datatable-tbody > tr:last-child > td {
    border-width: 0 0 0 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-tbody):has(.p-datatable-tfoot) .p-datatable-tbody > tr:last-child > td:last-child {
    border-width: 0 1px 0 1px;
}

.p-datatable.p-datatable-striped .p-datatable-tbody > tr.p-row-odd {
    background: `).concat(n("datatable.row.striped.background"),`;
}

.p-datatable.p-datatable-striped .p-datatable-tbody > tr.p-row-odd.p-datatable-row-selected {
    background: `).concat(n("datatable.row.selected.background"),`;
    color: `).concat(n("datatable.row.selected.color"),`;
}

.p-datatable-striped.p-datatable-hoverable .p-datatable-tbody > tr:not(.p-datatable-row-selected):hover {
    background: `).concat(n("datatable.row.hover.background"),`;
    color: `).concat(n("datatable.row.hover.color"),`;
}

.p-datatable.p-datatable-sm .p-datatable-header {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-thead > tr > th {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-tbody > tr > td {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-tfoot > tr > td {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-footer {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-lg .p-datatable-header {
    padding: 1rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-thead > tr > th {
    padding: 1rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-tbody > tr > td {
    padding: 1rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-tfoot > tr > td {
    padding: 1rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-footer {
    padding: 1rem 1.25rem;
}

.p-datatable-row-toggle-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    width: `).concat(n("datatable.row.toggle.button.size"),`;
    height: `).concat(n("datatable.row.toggle.button.size"),`;
    color: `).concat(n("datatable.row.toggle.button.color"),`;
    border: 0 none;
    background: transparent;
    cursor: pointer;
    border-radius: `).concat(n("datatable.row.toggle.button.border.radius"),`;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
            outline-color `).concat(n("datatable.transition.duration"),", box-shadow ").concat(n("datatable.transition.duration"),`;
    outline-color: transparent;
    user-select: none;
}

.p-datatable-row-toggle-button:enabled:hover {
    color: `).concat(n("datatable.row.toggle.button.hover.color"),`;
    background: `).concat(n("datatable.row.toggle.button.hover.background"),`;
}

.p-datatable-tbody > tr.p-datatable-row-selected .p-datatable-row-toggle-button:hover {
    background: `).concat(n("datatable.row.toggle.button.selected.hover.background"),`;
    color: `).concat(n("datatable.row.toggle.button.selected.hover.color"),`;
}

.p-datatable-row-toggle-button:focus-visible {
    box-shadow: `).concat(n("datatable.row.toggle.button.focus.ring.shadow"),`;
    outline: `).concat(n("datatable.row.toggle.button.focus.ring.width")," ").concat(n("datatable.row.toggle.button.focus.ring.style")," ").concat(n("datatable.row.toggle.button.focus.ring.color"),`;
    outline-offset: `).concat(n("datatable.row.toggle.button.focus.ring.offset"),`;
}

.p-datatable-row-toggle-icon:dir(rtl) {
    transform: rotate(180deg);
}
`)},vj={root:function(e){var n=e.props;return["p-datatable p-component",{"p-datatable-hoverable":n.rowHover||n.selectionMode,"p-datatable-resizable":n.resizableColumns,"p-datatable-resizable-fit":n.resizableColumns&&n.columnResizeMode==="fit","p-datatable-scrollable":n.scrollable,"p-datatable-flex-scrollable":n.scrollable&&n.scrollHeight==="flex","p-datatable-striped":n.stripedRows,"p-datatable-gridlines":n.showGridlines,"p-datatable-sm":n.size==="small","p-datatable-lg":n.size==="large"}]},mask:"p-datatable-mask p-overlay-mask",loadingIcon:"p-datatable-loading-icon",header:"p-datatable-header",pcPaginator:function(e){var n=e.position;return"p-datatable-paginator-"+n},tableContainer:"p-datatable-table-container",table:function(e){var n=e.props;return["p-datatable-table",{"p-datatable-scrollable-table":n.scrollable,"p-datatable-resizable-table":n.resizableColumns,"p-datatable-resizable-table-fit":n.resizableColumns&&n.columnResizeMode==="fit"}]},thead:"p-datatable-thead",headerCell:function(e){var n=e.instance,l=e.props,m=e.column;return m&&!n.columnProp(m,"hidden")&&(l.rowGroupMode!=="subheader"||l.groupRowsBy!==n.columnProp(m,"field"))?["p-datatable-header-cell",{"p-datatable-frozen-column":n.columnProp(m,"frozen")}]:["p-datatable-header-cell",{"p-datatable-sortable-column":n.columnProp("sortable"),"p-datatable-resizable-column":n.resizableColumns,"p-datatable-column-sorted":n.isColumnSorted(),"p-datatable-frozen-column":n.columnProp("frozen"),"p-datatable-reorderable-column":l.reorderableColumns}]},columnResizer:"p-datatable-column-resizer",columnHeaderContent:"p-datatable-column-header-content",columnTitle:"p-datatable-column-title",columnFooter:"p-datatable-column-footer",sortIcon:"p-datatable-sort-icon",pcSortBadge:"p-datatable-sort-badge",filter:function(e){var n=e.props;return["p-datatable-filter",{"p-datatable-inline-filter":n.display==="row","p-datatable-popover-filter":n.display==="menu"}]},filterElementContainer:"p-datatable-filter-element-container",pcColumnFilterButton:"p-datatable-column-filter-button",pcColumnFilterClearButton:"p-datatable-column-filter-clear-button",filterOverlay:function(e){e.instance;var n=e.props;return["p-datatable-filter-overlay p-component",{"p-datatable-filter-overlay-popover":n.display==="menu"}]},filterConstraintList:"p-datatable-filter-constraint-list",filterConstraint:function(e){var n=e.instance,l=e.matchMode;return["p-datatable-filter-constraint",{"p-datatable-filter-constraint-selected":l&&n.isRowMatchModeSelected(l.value)}]},filterConstraintSeparator:"p-datatable-filter-constraint-separator",filterOperator:"p-datatable-filter-operator",pcFilterOperatorDropdown:"p-datatable-filter-operator-dropdown",filterRuleList:"p-datatable-filter-rule-list",filterRule:"p-datatable-filter-rule",pcFilterConstraintDropdown:"p-datatable-filter-constraint-dropdown",pcFilterRemoveRuleButton:"p-datatable-filter-remove-rule-button",pcFilterAddRuleButton:"p-datatable-filter-add-rule-button",filterButtonbar:"p-datatable-filter-buttonbar",pcFilterClearButton:"p-datatable-filter-clear-button",pcFilterApplyButton:"p-datatable-filter-apply-button",tbody:function(e){var n=e.props;return n.frozenRow?"p-datatable-tbody p-datatable-frozen-tbody":"p-datatable-tbody"},rowGroupHeader:"p-datatable-row-group-header",rowToggleButton:"p-datatable-row-toggle-button",rowToggleIcon:"p-datatable-row-toggle-icon",row:function(e){var n=e.instance,l=e.props,m=e.index,d=e.columnSelectionMode,x=[];return l.selectionMode&&x.push("p-datatable-selectable-row"),l.selection&&x.push({"p-datatable-row-selected":d?n.isSelected&&n.$parentInstance.$parentInstance.highlightOnSelect:n.isSelected}),l.contextMenuSelection&&x.push({"p-datatable-contextmenu-row-selected":n.isSelectedWithContextMenu}),x.push(m%2===0?"p-row-even":"p-row-odd"),x},rowExpansion:"p-datatable-row-expansion",rowGroupFooter:"p-datatable-row-group-footer",emptyMessage:"p-datatable-empty-message",bodyCell:function(e){var n=e.instance;return[{"p-datatable-frozen-column":n.columnProp("frozen")}]},reorderableRowHandle:"p-datatable-reorderable-row-handle",pcRowEditorInit:"p-datatable-row-editor-init",pcRowEditorSave:"p-datatable-row-editor-save",pcRowEditorCancel:"p-datatable-row-editor-cancel",tfoot:"p-datatable-tfoot",footerCell:function(e){var n=e.instance;return[{"p-datatable-frozen-column":n.columnProp("frozen")}]},virtualScrollerSpacer:"p-datatable-virtualscroller-spacer",footer:"p-datatable-footer",columnResizeIndicator:"p-datatable-column-resize-indicator",rowReorderIndicatorUp:"p-datatable-row-reorder-indicator-up",rowReorderIndicatorDown:"p-datatable-row-reorder-indicator-down"},bj={tableContainer:{overflow:"auto"},thead:{position:"sticky"},tfoot:{position:"sticky"}},_j=Xn.extend({name:"datatable",theme:yj,classes:vj,inlineStyles:bj}),T6={name:"BarsIcon",extends:Qr};function xj(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.3226 3.6129H0.677419C0.497757 3.6129 0.325452 3.54152 0.198411 3.41448C0.0713707 3.28744 0 3.11514 0 2.93548C0 2.75581 0.0713707 2.58351 0.198411 2.45647C0.325452 2.32943 0.497757 2.25806 0.677419 2.25806H13.3226C13.5022 2.25806 13.6745 2.32943 13.8016 2.45647C13.9286 2.58351 14 2.75581 14 2.93548C14 3.11514 13.9286 3.28744 13.8016 3.41448C13.6745 3.54152 13.5022 3.6129 13.3226 3.6129ZM13.3226 7.67741H0.677419C0.497757 7.67741 0.325452 7.60604 0.198411 7.479C0.0713707 7.35196 0 7.17965 0 6.99999C0 6.82033 0.0713707 6.64802 0.198411 6.52098C0.325452 6.39394 0.497757 6.32257 0.677419 6.32257H13.3226C13.5022 6.32257 13.6745 6.39394 13.8016 6.52098C13.9286 6.64802 14 6.82033 14 6.99999C14 7.17965 13.9286 7.35196 13.8016 7.479C13.6745 7.60604 13.5022 7.67741 13.3226 7.67741ZM0.677419 11.7419H13.3226C13.5022 11.7419 13.6745 11.6706 13.8016 11.5435C13.9286 11.4165 14 11.2442 14 11.0645C14 10.8848 13.9286 10.7125 13.8016 10.5855C13.6745 10.4585 13.5022 10.3871 13.3226 10.3871H0.677419C0.497757 10.3871 0.325452 10.4585 0.198411 10.5855C0.0713707 10.7125 0 10.8848 0 11.0645C0 11.2442 0.0713707 11.4165 0.198411 11.5435C0.325452 11.6706 0.497757 11.7419 0.677419 11.7419Z",fill:"currentColor"},null,-1)]),16)}T6.render=xj;var E6={name:"PencilIcon",extends:Qr};function wj(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M0.609628 13.959C0.530658 13.9599 0.452305 13.9451 0.379077 13.9156C0.305849 13.8861 0.239191 13.8424 0.18294 13.787C0.118447 13.7234 0.0688234 13.6464 0.0376166 13.5614C0.00640987 13.4765 -0.00560954 13.3857 0.00241768 13.2956L0.25679 10.1501C0.267698 10.0041 0.331934 9.86709 0.437312 9.76516L9.51265 0.705715C10.0183 0.233014 10.6911 -0.0203041 11.3835 0.00127367C12.0714 0.00660201 12.7315 0.27311 13.2298 0.746671C13.7076 1.23651 13.9824 1.88848 13.9992 2.57201C14.0159 3.25554 13.7733 3.92015 13.32 4.4327L4.23648 13.5331C4.13482 13.6342 4.0017 13.6978 3.85903 13.7133L0.667067 14L0.609628 13.959ZM1.43018 10.4696L1.25787 12.714L3.50619 12.5092L12.4502 3.56444C12.6246 3.35841 12.7361 3.10674 12.7714 2.83933C12.8067 2.57193 12.7644 2.30002 12.6495 2.05591C12.5346 1.8118 12.3519 1.60575 12.1231 1.46224C11.8943 1.31873 11.6291 1.2438 11.3589 1.24633C11.1813 1.23508 11.0033 1.25975 10.8355 1.31887C10.6677 1.37798 10.5136 1.47033 10.3824 1.59036L1.43018 10.4696Z",fill:"currentColor"},null,-1)]),16)}E6.render=wj;var I6={name:"FilterIcon",extends:Qr};function Sj(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M8.64708 14H5.35296C5.18981 13.9979 5.03395 13.9321 4.91858 13.8167C4.8032 13.7014 4.73745 13.5455 4.73531 13.3824V7L0.329431 0.98C0.259794 0.889466 0.217389 0.780968 0.20718 0.667208C0.19697 0.553448 0.219379 0.439133 0.271783 0.337647C0.324282 0.236453 0.403423 0.151519 0.500663 0.0920138C0.597903 0.0325088 0.709548 0.000692754 0.823548 0H13.1765C13.2905 0.000692754 13.4021 0.0325088 13.4994 0.0920138C13.5966 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7826 0.780968 13.7402 0.889466 13.6706 0.98L9.26472 7V13.3824C9.26259 13.5455 9.19683 13.7014 9.08146 13.8167C8.96609 13.9321 8.81022 13.9979 8.64708 14ZM5.97061 12.7647H8.02943V6.79412C8.02878 6.66289 8.07229 6.53527 8.15296 6.43177L11.9412 1.23529H2.05884L5.86355 6.43177C5.94422 6.53527 5.98773 6.66289 5.98708 6.79412L5.97061 12.7647Z",fill:"currentColor"},null,-1)]),16)}I6.render=Sj;var P6={name:"FilterSlashIcon",extends:Qr};function Cj(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.4994 0.0920138C13.5967 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7827 0.780968 13.7403 0.889466 13.6707 0.98L11.406 4.06823C11.3099 4.19928 11.1656 4.28679 11.005 4.3115C10.8444 4.33621 10.6805 4.2961 10.5495 4.2C10.4184 4.1039 10.3309 3.95967 10.3062 3.79905C10.2815 3.63843 10.3216 3.47458 10.4177 3.34353L11.9412 1.23529H7.41184C7.24803 1.23529 7.09093 1.17022 6.97509 1.05439C6.85926 0.938558 6.79419 0.781457 6.79419 0.617647C6.79419 0.453837 6.85926 0.296736 6.97509 0.180905C7.09093 0.0650733 7.24803 0 7.41184 0H13.1765C13.2905 0.000692754 13.4022 0.0325088 13.4994 0.0920138ZM4.20008 0.181168H4.24126L13.2013 9.03411C13.3169 9.14992 13.3819 9.3069 13.3819 9.47058C13.3819 9.63426 13.3169 9.79124 13.2013 9.90705C13.1445 9.96517 13.0766 10.0112 13.0016 10.0423C12.9266 10.0735 12.846 10.0891 12.7648 10.0882C12.6836 10.0886 12.6032 10.0728 12.5283 10.0417C12.4533 10.0106 12.3853 9.96479 12.3283 9.90705L9.3142 6.92587L9.26479 6.99999V13.3823C9.26265 13.5455 9.19689 13.7014 9.08152 13.8167C8.96615 13.9321 8.81029 13.9979 8.64714 14H5.35302C5.18987 13.9979 5.03401 13.9321 4.91864 13.8167C4.80327 13.7014 4.73751 13.5455 4.73537 13.3823V6.99999L0.329492 1.02117C0.259855 0.930634 0.21745 0.822137 0.207241 0.708376C0.197031 0.594616 0.21944 0.480301 0.271844 0.378815C0.324343 0.277621 0.403484 0.192687 0.500724 0.133182C0.597964 0.073677 0.709609 0.041861 0.823609 0.0411682H3.86243C3.92448 0.0461551 3.9855 0.060022 4.04361 0.0823446C4.10037 0.10735 4.15311 0.140655 4.20008 0.181168ZM8.02949 6.79411C8.02884 6.66289 8.07235 6.53526 8.15302 6.43176L8.42478 6.05293L3.55773 1.23529H2.0589L5.84714 6.43176C5.92781 6.53526 5.97132 6.66289 5.97067 6.79411V12.7647H8.02949V6.79411Z",fill:"currentColor"},null,-1)]),16)}P6.render=Cj;var A6={name:"PlusIcon",extends:Qr};function kj(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z",fill:"currentColor"},null,-1)]),16)}A6.render=kj;var R6={name:"TrashIcon",extends:Qr};function Tj(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.44802 13.9955H10.552C10.8056 14.0129 11.06 13.9797 11.3006 13.898C11.5412 13.8163 11.7632 13.6877 11.9537 13.5196C12.1442 13.3515 12.2995 13.1473 12.4104 12.9188C12.5213 12.6903 12.5858 12.442 12.6 12.1884V4.36041H13.4C13.5591 4.36041 13.7117 4.29722 13.8243 4.18476C13.9368 4.07229 14 3.91976 14 3.76071C14 3.60166 13.9368 3.44912 13.8243 3.33666C13.7117 3.22419 13.5591 3.16101 13.4 3.16101H12.0537C12.0203 3.1557 11.9863 3.15299 11.952 3.15299C11.9178 3.15299 11.8838 3.1557 11.8503 3.16101H11.2285C11.2421 3.10893 11.2487 3.05513 11.248 3.00106V1.80966C11.2171 1.30262 10.9871 0.828306 10.608 0.48989C10.229 0.151475 9.73159 -0.0236625 9.22402 0.00257442H4.77602C4.27251 -0.0171866 3.78126 0.160868 3.40746 0.498617C3.03365 0.836366 2.807 1.30697 2.77602 1.80966V3.00106C2.77602 3.0556 2.78346 3.10936 2.79776 3.16101H0.6C0.521207 3.16101 0.443185 3.17652 0.37039 3.20666C0.297595 3.2368 0.231451 3.28097 0.175736 3.33666C0.120021 3.39235 0.0758251 3.45846 0.0456722 3.53121C0.0155194 3.60397 0 3.68196 0 3.76071C0 3.83946 0.0155194 3.91744 0.0456722 3.9902C0.0758251 4.06296 0.120021 4.12907 0.175736 4.18476C0.231451 4.24045 0.297595 4.28462 0.37039 4.31476C0.443185 4.3449 0.521207 4.36041 0.6 4.36041H1.40002V12.1884C1.41426 12.442 1.47871 12.6903 1.58965 12.9188C1.7006 13.1473 1.85582 13.3515 2.04633 13.5196C2.23683 13.6877 2.45882 13.8163 2.69944 13.898C2.94005 13.9797 3.1945 14.0129 3.44802 13.9955ZM2.60002 4.36041H11.304V12.1884C11.304 12.5163 10.952 12.7961 10.504 12.7961H3.40002C2.97602 12.7961 2.60002 12.5163 2.60002 12.1884V4.36041ZM3.95429 3.16101C3.96859 3.10936 3.97602 3.0556 3.97602 3.00106V1.80966C3.97602 1.48183 4.33602 1.20197 4.77602 1.20197H9.24802C9.66403 1.20197 10.048 1.48183 10.048 1.80966V3.00106C10.0473 3.05515 10.054 3.10896 10.0678 3.16101H3.95429ZM5.57571 10.997C5.41731 10.995 5.26597 10.9311 5.15395 10.8191C5.04193 10.7071 4.97808 10.5558 4.97601 10.3973V6.77517C4.97601 6.61612 5.0392 6.46359 5.15166 6.35112C5.26413 6.23866 5.41666 6.17548 5.57571 6.17548C5.73476 6.17548 5.8873 6.23866 5.99976 6.35112C6.11223 6.46359 6.17541 6.61612 6.17541 6.77517V10.3894C6.17647 10.4688 6.16174 10.5476 6.13208 10.6213C6.10241 10.695 6.05841 10.762 6.00261 10.8186C5.94682 10.8751 5.88035 10.92 5.80707 10.9506C5.73378 10.9813 5.65514 10.9971 5.57571 10.997ZM7.99968 10.8214C8.11215 10.9339 8.26468 10.997 8.42373 10.997C8.58351 10.9949 8.73604 10.93 8.84828 10.8163C8.96052 10.7025 9.02345 10.5491 9.02343 10.3894V6.77517C9.02343 6.61612 8.96025 6.46359 8.84778 6.35112C8.73532 6.23866 8.58278 6.17548 8.42373 6.17548C8.26468 6.17548 8.11215 6.23866 7.99968 6.35112C7.88722 6.46359 7.82404 6.61612 7.82404 6.77517V10.3973C7.82404 10.5564 7.88722 10.7089 7.99968 10.8214Z",fill:"currentColor"},null,-1)]),16)}R6.render=Tj;var v2={name:"SortAltIcon",extends:Qr};function Ej(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M5.64515 3.61291C5.47353 3.61291 5.30192 3.54968 5.16644 3.4142L3.38708 1.63484L1.60773 3.4142C1.34579 3.67613 0.912244 3.67613 0.650309 3.4142C0.388374 3.15226 0.388374 2.71871 0.650309 2.45678L2.90837 0.198712C3.17031 -0.0632236 3.60386 -0.0632236 3.86579 0.198712L6.12386 2.45678C6.38579 2.71871 6.38579 3.15226 6.12386 3.4142C5.98837 3.54968 5.81676 3.61291 5.64515 3.61291Z",fill:"currentColor"},null,-1),M("path",{d:"M3.38714 14C3.01681 14 2.70972 13.6929 2.70972 13.3226V0.677419C2.70972 0.307097 3.01681 0 3.38714 0C3.75746 0 4.06456 0.307097 4.06456 0.677419V13.3226C4.06456 13.6929 3.75746 14 3.38714 14Z",fill:"currentColor"},null,-1),M("path",{d:"M10.6129 14C10.4413 14 10.2697 13.9368 10.1342 13.8013L7.87611 11.5432C7.61418 11.2813 7.61418 10.8477 7.87611 10.5858C8.13805 10.3239 8.5716 10.3239 8.83353 10.5858L10.6129 12.3652L12.3922 10.5858C12.6542 10.3239 13.0877 10.3239 13.3497 10.5858C13.6116 10.8477 13.6116 11.2813 13.3497 11.5432L11.0916 13.8013C10.9561 13.9368 10.7845 14 10.6129 14Z",fill:"currentColor"},null,-1),M("path",{d:"M10.6129 14C10.2426 14 9.93552 13.6929 9.93552 13.3226V0.677419C9.93552 0.307097 10.2426 0 10.6129 0C10.9833 0 11.2904 0.307097 11.2904 0.677419V13.3226C11.2904 13.6929 10.9832 14 10.6129 14Z",fill:"currentColor"},null,-1)]),16)}v2.render=Ej;var b2={name:"SortAmountDownIcon",extends:Qr};function Ij(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M4.93953 10.5858L3.83759 11.6877V0.677419C3.83759 0.307097 3.53049 0 3.16017 0C2.78985 0 2.48275 0.307097 2.48275 0.677419V11.6877L1.38082 10.5858C1.11888 10.3239 0.685331 10.3239 0.423396 10.5858C0.16146 10.8477 0.16146 11.2813 0.423396 11.5432L2.68146 13.8013C2.74469 13.8645 2.81694 13.9097 2.89823 13.9458C2.97952 13.9819 3.06985 14 3.16017 14C3.25049 14 3.33178 13.9819 3.42211 13.9458C3.5034 13.9097 3.57565 13.8645 3.63888 13.8013L5.89694 11.5432C6.15888 11.2813 6.15888 10.8477 5.89694 10.5858C5.63501 10.3239 5.20146 10.3239 4.93953 10.5858ZM13.0957 0H7.22468C6.85436 0 6.54726 0.307097 6.54726 0.677419C6.54726 1.04774 6.85436 1.35484 7.22468 1.35484H13.0957C13.466 1.35484 13.7731 1.04774 13.7731 0.677419C13.7731 0.307097 13.466 0 13.0957 0ZM7.22468 5.41935H9.48275C9.85307 5.41935 10.1602 5.72645 10.1602 6.09677C10.1602 6.4671 9.85307 6.77419 9.48275 6.77419H7.22468C6.85436 6.77419 6.54726 6.4671 6.54726 6.09677C6.54726 5.72645 6.85436 5.41935 7.22468 5.41935ZM7.6763 8.12903H7.22468C6.85436 8.12903 6.54726 8.43613 6.54726 8.80645C6.54726 9.17677 6.85436 9.48387 7.22468 9.48387H7.6763C8.04662 9.48387 8.35372 9.17677 8.35372 8.80645C8.35372 8.43613 8.04662 8.12903 7.6763 8.12903ZM7.22468 2.70968H11.2892C11.6595 2.70968 11.9666 3.01677 11.9666 3.3871C11.9666 3.75742 11.6595 4.06452 11.2892 4.06452H7.22468C6.85436 4.06452 6.54726 3.75742 6.54726 3.3871C6.54726 3.01677 6.85436 2.70968 7.22468 2.70968Z",fill:"currentColor"},null,-1)]),16)}b2.render=Ij;var _2={name:"SortAmountUpAltIcon",extends:Qr};function Pj(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M3.63435 0.19871C3.57113 0.135484 3.49887 0.0903226 3.41758 0.0541935C3.255 -0.0180645 3.06532 -0.0180645 2.90274 0.0541935C2.82145 0.0903226 2.74919 0.135484 2.68597 0.19871L0.427901 2.45677C0.165965 2.71871 0.165965 3.15226 0.427901 3.41419C0.689836 3.67613 1.12338 3.67613 1.38532 3.41419L2.48726 2.31226V13.3226C2.48726 13.6929 2.79435 14 3.16467 14C3.535 14 3.84209 13.6929 3.84209 13.3226V2.31226L4.94403 3.41419C5.07951 3.54968 5.25113 3.6129 5.42274 3.6129C5.59435 3.6129 5.76597 3.54968 5.90145 3.41419C6.16338 3.15226 6.16338 2.71871 5.90145 2.45677L3.64338 0.19871H3.63435ZM13.7685 13.3226C13.7685 12.9523 13.4615 12.6452 13.0911 12.6452H7.22016C6.84984 12.6452 6.54274 12.9523 6.54274 13.3226C6.54274 13.6929 6.84984 14 7.22016 14H13.0911C13.4615 14 13.7685 13.6929 13.7685 13.3226ZM7.22016 8.58064C6.84984 8.58064 6.54274 8.27355 6.54274 7.90323C6.54274 7.5329 6.84984 7.22581 7.22016 7.22581H9.47823C9.84855 7.22581 10.1556 7.5329 10.1556 7.90323C10.1556 8.27355 9.84855 8.58064 9.47823 8.58064H7.22016ZM7.22016 5.87097H7.67177C8.0421 5.87097 8.34919 5.56387 8.34919 5.19355C8.34919 4.82323 8.0421 4.51613 7.67177 4.51613H7.22016C6.84984 4.51613 6.54274 4.82323 6.54274 5.19355C6.54274 5.56387 6.84984 5.87097 7.22016 5.87097ZM11.2847 11.2903H7.22016C6.84984 11.2903 6.54274 10.9832 6.54274 10.6129C6.54274 10.2426 6.84984 9.93548 7.22016 9.93548H11.2847C11.655 9.93548 11.9621 10.2426 11.9621 10.6129C11.9621 10.9832 11.655 11.2903 11.2847 11.2903Z",fill:"currentColor"},null,-1)]),16)}_2.render=Pj;var Aj={name:"BaseDataTable",extends:mr,props:{value:{type:Array,default:null},dataKey:{type:[String,Function],default:null},rows:{type:Number,default:0},first:{type:Number,default:0},totalRecords:{type:Number,default:0},paginator:{type:Boolean,default:!1},paginatorPosition:{type:String,default:"bottom"},alwaysShowPaginator:{type:Boolean,default:!0},paginatorTemplate:{type:[Object,String],default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},currentPageReportTemplate:{type:String,default:"({currentPage} of {totalPages})"},lazy:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:void 0},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},defaultSortOrder:{type:Number,default:1},nullSortOrder:{type:Number,default:1},multiSortMeta:{type:Array,default:null},sortMode:{type:String,default:"single"},removableSort:{type:Boolean,default:!1},filters:{type:Object,default:null},filterDisplay:{type:String,default:null},globalFilterFields:{type:Array,default:null},filterLocale:{type:String,default:void 0},selection:{type:[Array,Object],default:null},selectionMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},metaKeySelection:{type:Boolean,default:!1},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},selectAll:{type:Boolean,default:null},rowHover:{type:Boolean,default:!1},csvSeparator:{type:String,default:","},exportFilename:{type:String,default:"download"},exportFunction:{type:Function,default:null},resizableColumns:{type:Boolean,default:!1},columnResizeMode:{type:String,default:"fit"},reorderableColumns:{type:Boolean,default:!1},expandedRows:{type:[Array,Object],default:null},expandedRowIcon:{type:String,default:void 0},collapsedRowIcon:{type:String,default:void 0},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},stateStorage:{type:String,default:"session"},stateKey:{type:String,default:null},editMode:{type:String,default:null},editingRows:{type:Array,default:null},rowClass:{type:Function,default:null},rowStyle:{type:Function,default:null},scrollable:{type:Boolean,default:!1},virtualScrollerOptions:{type:Object,default:null},scrollHeight:{type:String,default:null},frozenValue:{type:Array,default:null},breakpoint:{type:String,default:"960px"},showHeaders:{type:Boolean,default:!0},showGridlines:{type:Boolean,default:!1},stripedRows:{type:Boolean,default:!1},highlightOnSelect:{type:Boolean,default:!1},size:{type:String,default:null},tableStyle:{type:null,default:null},tableClass:{type:[String,Object],default:null},tableProps:{type:Object,default:null},filterInputProps:{type:null,default:null},filterButtonProps:{type:Object,default:function(){return{filter:{severity:"secondary",text:!0,rounded:!0},inline:{clear:{severity:"secondary",text:!0,rounded:!0}},popover:{addRule:{severity:"info",text:!0,size:"small"},removeRule:{severity:"danger",text:!0,size:"small"},apply:{size:"small"},clear:{outlined:!0,size:"small"}}}}},editButtonProps:{type:Object,default:function(){return{init:{severity:"secondary",text:!0,rounded:!0},save:{severity:"secondary",text:!0,rounded:!0},cancel:{severity:"secondary",text:!0,rounded:!0}}}}},style:_j,provide:function(){return{$pcDataTable:this,$parentInstance:this}}},M6={name:"RowCheckbox",hostName:"DataTable",extends:mr,emits:["change"],props:{value:null,checked:null,column:null,rowCheckboxIconTemplate:{type:Function,default:null},index:{type:Number,default:null}},methods:{getColumnPT:function(e){var n={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,checked:this.checked,disabled:this.$attrs.disabled}};return ie(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.getColumnProp(),e,n))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onChange:function(e){this.$attrs.disabled||this.$emit("change",{originalEvent:e,data:this.value})}},computed:{checkboxAriaLabel:function(){return this.$primevue.config.locale.aria?this.checked?this.$primevue.config.locale.aria.selectRow:this.$primevue.config.locale.aria.unselectRow:void 0}},components:{CheckIcon:Xu,Checkbox:a0}};function Rj(t,e,n,l,m,d){var x=wn("CheckIcon"),s=wn("Checkbox");return X(),bt(s,{modelValue:n.checked,binary:!0,disabled:t.$attrs.disabled,"aria-label":d.checkboxAriaLabel,onChange:d.onChange,unstyled:t.unstyled,pt:d.getColumnPT("pcRowCheckbox")},{icon:Xe(function(T){return[n.rowCheckboxIconTemplate?(X(),bt(Tn(n.rowCheckboxIconTemplate),{key:0,checked:T.checked,class:vn(T.class)},null,8,["checked","class"])):!n.rowCheckboxIconTemplate&&T.checked?(X(),bt(x,ie({key:1,class:T.class},d.getColumnPT("pcRowCheckbox").icon),null,16,["class"])):Ct("",!0)]}),_:1},8,["modelValue","disabled","aria-label","onChange","unstyled","pt"])}M6.render=Rj;var D6={name:"RowRadioButton",hostName:"DataTable",extends:mr,emits:["change"],props:{value:null,checked:null,name:null,column:null,index:{type:Number,default:null}},methods:{getColumnPT:function(e){var n={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,checked:this.checked,disabled:this.$attrs.disabled}};return ie(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.getColumnProp(),e,n))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onChange:function(e){this.$attrs.disabled||this.$emit("change",{originalEvent:e,data:this.value})}},components:{RadioButton:gs}};function Mj(t,e,n,l,m,d){var x=wn("RadioButton");return X(),bt(x,{modelValue:n.checked,binary:!0,disabled:t.$attrs.disabled,name:n.name,onChange:d.onChange,unstyled:t.unstyled,pt:d.getColumnPT("pcRowRadiobutton")},null,8,["modelValue","disabled","name","onChange","unstyled","pt"])}D6.render=Mj;var L6={name:"BodyCell",hostName:"DataTable",extends:mr,emits:["cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","row-toggle","radio-change","checkbox-change","editing-meta-change"],props:{rowData:{type:Object,default:null},column:{type:Object,default:null},frozenRow:{type:Boolean,default:!1},rowIndex:{type:Number,default:null},index:{type:Number,default:null},isRowExpanded:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},editing:{type:Boolean,default:!1},editingMeta:{type:Object,default:null},editMode:{type:String,default:null},virtualScrollerContentProps:{type:Object,default:null},ariaControls:{type:String,default:null},name:{type:String,default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},editButtonProps:{type:Object,default:null}},documentEditListener:null,selfClick:!1,overlayEventListener:null,data:function(){return{d_editing:this.editing,styleObject:{}}},watch:{editing:function(e){this.d_editing=e},"$data.d_editing":function(e){this.$emit("editing-meta-change",{data:this.rowData,field:this.field||"field_".concat(this.index),index:this.rowIndex,editing:e})}},mounted:function(){this.columnProp("frozen")&&this.updateStickyPosition()},updated:function(){var e=this;this.columnProp("frozen")&&this.updateStickyPosition(),this.d_editing&&(this.editMode==="cell"||this.editMode==="row"&&this.columnProp("rowEditor"))&&setTimeout(function(){var n=Nu(e.$el);n&&n.focus()},1)},beforeUnmount:function(){this.overlayEventListener&&(ql.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null)},methods:{columnProp:function(e){return zc(this.column,e)},getColumnPT:function(e){var n,l,m={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,size:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.size,showGridlines:(l=this.$parentInstance)===null||l===void 0||(l=l.$parentInstance)===null||l===void 0?void 0:l.showGridlines}};return ie(this.ptm("column.".concat(e),{column:m}),this.ptm("column.".concat(e),m),this.ptmo(this.getColumnProp(),e,m))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},resolveFieldData:function(){return wi(this.rowData,this.field)},toggleRow:function(e){this.$emit("row-toggle",{originalEvent:e,data:this.rowData})},toggleRowWithRadio:function(e,n){this.$emit("radio-change",{originalEvent:e.originalEvent,index:n,data:e.data})},toggleRowWithCheckbox:function(e,n){this.$emit("checkbox-change",{originalEvent:e.originalEvent,index:n,data:e.data})},isEditable:function(){return this.column.children&&this.column.children.editor!=null},bindDocumentEditListener:function(){var e=this;this.documentEditListener||(this.documentEditListener=function(n){e.selfClick||e.completeEdit(n,"outside"),e.selfClick=!1},document.addEventListener("click",this.documentEditListener))},unbindDocumentEditListener:function(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null,this.selfClick=!1)},switchCellToViewMode:function(){this.d_editing=!1,this.unbindDocumentEditListener(),ql.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null},onClick:function(e){var n=this;this.editMode==="cell"&&this.isEditable()&&(this.selfClick=!0,this.d_editing||(this.d_editing=!0,this.bindDocumentEditListener(),this.$emit("cell-edit-init",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex}),this.overlayEventListener=function(l){n.$el&&n.$el.contains(l.target)&&(n.selfClick=!0)},ql.on("overlay-click",this.overlayEventListener)))},completeEdit:function(e,n){var l={originalEvent:e,data:this.rowData,newData:this.editingRowData,value:this.rowData[this.field],newValue:this.editingRowData[this.field],field:this.field,index:this.rowIndex,type:n,defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0}};this.$emit("cell-edit-complete",l),l.defaultPrevented||this.switchCellToViewMode()},onKeyDown:function(e){if(this.editMode==="cell")switch(e.code){case"Enter":case"NumpadEnter":this.completeEdit(e,"enter");break;case"Escape":this.switchCellToViewMode(),this.$emit("cell-edit-cancel",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex});break;case"Tab":this.completeEdit(e,"tab"),e.shiftKey?this.moveToPreviousCell(e):this.moveToNextCell(e);break}},moveToPreviousCell:function(e){var n=this.findCell(e.target),l=this.findPreviousEditableColumn(n);l&&(V5(l,"click"),e.preventDefault())},moveToNextCell:function(e){var n=this.findCell(e.target),l=this.findNextEditableColumn(n);l&&(V5(l,"click"),e.preventDefault())},findCell:function(e){if(e){for(var n=e;n&&!Ci(n,"data-p-cell-editing");)n=n.parentElement;return n}else return null},findPreviousEditableColumn:function(e){var n=e.previousElementSibling;if(!n){var l=e.parentElement.previousElementSibling;l&&(n=l.lastElementChild)}return n?Ci(n,"data-p-editable-column")?n:this.findPreviousEditableColumn(n):null},findNextEditableColumn:function(e){var n=e.nextElementSibling;if(!n){var l=e.parentElement.nextElementSibling;l&&(n=l.firstElementChild)}return n?Ci(n,"data-p-editable-column")?n:this.findNextEditableColumn(n):null},onRowEditInit:function(e){this.$emit("row-edit-init",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},onRowEditSave:function(e){this.$emit("row-edit-save",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},onRowEditCancel:function(e){this.$emit("row-edit-cancel",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},editorInitCallback:function(e){this.$emit("row-edit-init",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},editorSaveCallback:function(e){this.editMode==="row"?this.$emit("row-edit-save",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex}):this.completeEdit(e,"enter")},editorCancelCallback:function(e){this.editMode==="row"?this.$emit("row-edit-cancel",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex}):(this.switchCellToViewMode(),this.$emit("cell-edit-cancel",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex}))},updateStickyPosition:function(){if(this.columnProp("frozen")){var e=this.columnProp("alignFrozen");if(e==="right"){var n=0,l=gS(this.$el,'[data-p-frozen-column="true"]');l&&(n=So(l)+parseFloat(l.style.right||0)),this.styleObject.insetInlineEnd=n+"px"}else{var m=0,d=yS(this.$el,'[data-p-frozen-column="true"]');d&&(m=So(d)+parseFloat(d.style.left||0)),this.styleObject.insetInlineStart=m+"px"}}},getVirtualScrollerProp:function(e){return this.virtualScrollerContentProps?this.virtualScrollerContentProps[e]:null}},computed:{editingRowData:function(){return this.editingMeta[this.rowIndex]?this.editingMeta[this.rowIndex].data:this.rowData},field:function(){return this.columnProp("field")},containerClass:function(){return[this.columnProp("bodyClass"),this.columnProp("class"),this.cx("bodyCell")]},containerStyle:function(){var e=this.columnProp("bodyStyle"),n=this.columnProp("style");return this.columnProp("frozen")?[n,e,this.styleObject]:[n,e]},loading:function(){return this.getVirtualScrollerProp("loading")},loadingOptions:function(){var e=this.getVirtualScrollerProp("getLoaderOptions");return e&&e(this.rowIndex,{cellIndex:this.index,cellFirst:this.index===0,cellLast:this.index===this.getVirtualScrollerProp("columns").length-1,cellEven:this.index%2===0,cellOdd:this.index%2!==0,column:this.column,field:this.field})},expandButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.isRowExpanded?this.$primevue.config.locale.aria.expandRow:this.$primevue.config.locale.aria.collapseRow:void 0},initButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.editRow:void 0},saveButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.saveEdit:void 0},cancelButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.cancelEdit:void 0}},components:{DTRadioButton:D6,DTCheckbox:M6,Button:jr,ChevronDownIcon:Pf,ChevronRightIcon:ed,BarsIcon:T6,PencilIcon:E6,CheckIcon:Xu,TimesIcon:Rf},directives:{ripple:zs}};function Ry(t){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(t)}function O4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function vb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O4(Object(n),!0).forEach(function(l){Dj(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function Dj(t,e,n){return(e=Lj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lj(t){var e=Oj(t,"string");return Ry(e)=="symbol"?e:e+""}function Oj(t,e){if(Ry(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Ry(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zj=["colspan","rowspan","data-p-selection-column","data-p-editable-column","data-p-cell-editing","data-p-frozen-column"],Bj=["aria-expanded","aria-controls","aria-label"];function Fj(t,e,n,l,m,d){var x=wn("DTRadioButton"),s=wn("DTCheckbox"),T=wn("BarsIcon"),E=wn("ChevronDownIcon"),A=wn("ChevronRightIcon"),z=wn("Button"),j=No("ripple");return d.loading?(X(),pe("td",ie({key:0,style:d.containerStyle,class:d.containerClass,role:"cell"},vb(vb({},d.getColumnPT("root")),d.getColumnPT("bodyCell"))),[(X(),bt(Tn(n.column.children.loading),{data:n.rowData,column:n.column,field:d.field,index:n.rowIndex,frozenRow:n.frozenRow,loadingOptions:d.loadingOptions},null,8,["data","column","field","index","frozenRow","loadingOptions"]))],16)):(X(),pe("td",ie({key:1,style:d.containerStyle,class:d.containerClass,colspan:d.columnProp("colspan"),rowspan:d.columnProp("rowspan"),onClick:e[3]||(e[3]=function(){return d.onClick&&d.onClick.apply(d,arguments)}),onKeydown:e[4]||(e[4]=function(){return d.onKeyDown&&d.onKeyDown.apply(d,arguments)}),role:"cell"},vb(vb({},d.getColumnPT("root")),d.getColumnPT("bodyCell")),{"data-p-selection-column":d.columnProp("selectionMode")!=null,"data-p-editable-column":d.isEditable(),"data-p-cell-editing":m.d_editing,"data-p-frozen-column":d.columnProp("frozen")}),[n.column.children&&n.column.children.body&&!m.d_editing?(X(),bt(Tn(n.column.children.body),{key:0,data:n.rowData,column:n.column,field:d.field,index:n.rowIndex,frozenRow:n.frozenRow,editorInitCallback:d.editorInitCallback,rowTogglerCallback:d.toggleRow},null,8,["data","column","field","index","frozenRow","editorInitCallback","rowTogglerCallback"])):n.column.children&&n.column.children.editor&&m.d_editing?(X(),bt(Tn(n.column.children.editor),{key:1,data:d.editingRowData,column:n.column,field:d.field,index:n.rowIndex,frozenRow:n.frozenRow,editorSaveCallback:d.editorSaveCallback,editorCancelCallback:d.editorCancelCallback},null,8,["data","column","field","index","frozenRow","editorSaveCallback","editorCancelCallback"])):n.column.children&&n.column.children.body&&!n.column.children.editor&&m.d_editing?(X(),bt(Tn(n.column.children.body),{key:2,data:d.editingRowData,column:n.column,field:d.field,index:n.rowIndex,frozenRow:n.frozenRow},null,8,["data","column","field","index","frozenRow"])):d.columnProp("selectionMode")?(X(),pe(an,{key:3},[d.columnProp("selectionMode")==="single"?(X(),bt(x,{key:0,value:n.rowData,name:n.name,checked:n.selected,onChange:e[0]||(e[0]=function(U){return d.toggleRowWithRadio(U,n.rowIndex)}),column:n.column,index:n.index,unstyled:t.unstyled,pt:t.pt},null,8,["value","name","checked","column","index","unstyled","pt"])):d.columnProp("selectionMode")==="multiple"?(X(),bt(s,{key:1,value:n.rowData,checked:n.selected,rowCheckboxIconTemplate:n.column.children&&n.column.children.rowcheckboxicon,"aria-selected":n.selected?!0:void 0,onChange:e[1]||(e[1]=function(U){return d.toggleRowWithCheckbox(U,n.rowIndex)}),column:n.column,index:n.index,unstyled:t.unstyled,pt:t.pt},null,8,["value","checked","rowCheckboxIconTemplate","aria-selected","column","index","unstyled","pt"])):Ct("",!0)],64)):d.columnProp("rowReorder")?(X(),pe(an,{key:4},[n.column.children&&n.column.children.rowreordericon?(X(),bt(Tn(n.column.children.rowreordericon),{key:0,class:vn(t.cx("reorderableRowHandle"))},null,8,["class"])):d.columnProp("rowReorderIcon")?(X(),pe("i",ie({key:1,class:[t.cx("reorderableRowHandle"),d.columnProp("rowReorderIcon")]},d.getColumnPT("reorderableRowHandle")),null,16)):(X(),bt(T,ie({key:2,class:t.cx("reorderableRowHandle")},d.getColumnPT("reorderableRowHandle")),null,16,["class"]))],64)):d.columnProp("expander")?_r((X(),pe("button",ie({key:5,class:t.cx("rowToggleButton"),type:"button","aria-expanded":n.isRowExpanded,"aria-controls":n.ariaControls,"aria-label":d.expandButtonAriaLabel,onClick:e[2]||(e[2]=function(){return d.toggleRow&&d.toggleRow.apply(d,arguments)})},d.getColumnPT("rowToggleButton"),{"data-pc-group-section":"rowactionbutton"}),[n.column.children&&n.column.children.rowtogglericon?(X(),bt(Tn(n.column.children.rowtogglericon),{key:0,class:vn(t.cx("rowToggleIcon")),rowExpanded:n.isRowExpanded},null,8,["class","rowExpanded"])):(X(),pe(an,{key:1},[n.isRowExpanded&&n.expandedRowIcon?(X(),pe("span",{key:0,class:vn([t.cx("rowToggleIcon"),n.expandedRowIcon])},null,2)):n.isRowExpanded&&!n.expandedRowIcon?(X(),bt(E,ie({key:1,class:t.cx("rowToggleIcon")},d.getColumnPT("rowToggleIcon")),null,16,["class"])):!n.isRowExpanded&&n.collapsedRowIcon?(X(),pe("span",{key:2,class:vn([t.cx("rowToggleIcon"),n.collapsedRowIcon])},null,2)):!n.isRowExpanded&&!n.collapsedRowIcon?(X(),bt(A,ie({key:3,class:t.cx("rowToggleIcon")},d.getColumnPT("rowToggleIcon")),null,16,["class"])):Ct("",!0)],64))],16,Bj)),[[j]]):n.editMode==="row"&&d.columnProp("rowEditor")?(X(),pe(an,{key:6},[m.d_editing?Ct("",!0):(X(),bt(z,ie({key:0,class:t.cx("pcRowEditorInit"),"aria-label":d.initButtonAriaLabel,unstyled:t.unstyled,onClick:d.onRowEditInit},n.editButtonProps.init,{pt:d.getColumnPT("pcRowEditorInit"),"data-pc-group-section":"rowactionbutton"}),{icon:Xe(function(U){return[(X(),bt(Tn(n.column.children&&n.column.children.roweditoriniticon||"PencilIcon"),ie({class:U.class},d.getColumnPT("pcRowEditorInit").icon),null,16,["class"]))]}),_:1},16,["class","aria-label","unstyled","onClick","pt"])),m.d_editing?(X(),bt(z,ie({key:1,class:t.cx("pcRowEditorSave"),"aria-label":d.saveButtonAriaLabel,unstyled:t.unstyled,onClick:d.onRowEditSave},n.editButtonProps.save,{pt:d.getColumnPT("pcRowEditorSave"),"data-pc-group-section":"rowactionbutton"}),{icon:Xe(function(U){return[(X(),bt(Tn(n.column.children&&n.column.children.roweditorsaveicon||"CheckIcon"),ie({class:U.class},d.getColumnPT("pcRowEditorSave").icon),null,16,["class"]))]}),_:1},16,["class","aria-label","unstyled","onClick","pt"])):Ct("",!0),m.d_editing?(X(),bt(z,ie({key:2,class:t.cx("pcRowEditorCancel"),"aria-label":d.cancelButtonAriaLabel,unstyled:t.unstyled,onClick:d.onRowEditCancel},n.editButtonProps.cancel,{pt:d.getColumnPT("pcRowEditorCancel"),"data-pc-group-section":"rowactionbutton"}),{icon:Xe(function(U){return[(X(),bt(Tn(n.column.children&&n.column.children.roweditorcancelicon||"TimesIcon"),ie({class:U.class},d.getColumnPT("pcRowEditorCancel").icon),null,16,["class"]))]}),_:1},16,["class","aria-label","unstyled","onClick","pt"])):Ct("",!0)],64)):(X(),pe(an,{key:7},[tr(Ue(d.resolveFieldData()),1)],64))],16,zj))}L6.render=Fj;function My(t){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(t)}function $j(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Nj(t))||e){n&&(t=n);var l=0,m=function(){};return{s:m,n:function(){return l>=t.length?{done:!0}:{done:!1,value:t[l++]}},e:function(E){throw E},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,x=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var E=n.next();return x=E.done,E},e:function(E){s=!0,d=E},f:function(){try{x||n.return==null||n.return()}finally{if(s)throw d}}}}function Nj(t,e){if(t){if(typeof t=="string")return z4(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z4(t,e):void 0}}function z4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}function B4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function F4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B4(Object(n),!0).forEach(function(l){Vj(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function Vj(t,e,n){return(e=jj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jj(t){var e=Uj(t,"string");return My(e)=="symbol"?e:e+""}function Uj(t,e){if(My(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(My(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O6={name:"BodyRow",hostName:"DataTable",extends:mr,emits:["rowgroup-toggle","row-click","row-dblclick","row-rightclick","row-touchend","row-keydown","row-mousedown","row-dragstart","row-dragover","row-dragleave","row-dragend","row-drop","row-toggle","radio-change","checkbox-change","cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","editing-meta-change"],props:{rowData:{type:Object,default:null},index:{type:Number,default:0},value:{type:Array,default:null},columns:{type:null,default:null},frozenRow:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},first:{type:Number,default:0},dataKey:{type:[String,Function],default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},expandedRows:{type:[Array,Object],default:null},selection:{type:[Array,Object],default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},rowClass:{type:null,default:null},rowStyle:{type:null,default:null},rowGroupHeaderStyle:{type:null,default:null},editMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},editingRows:{type:Array,default:null},editingRowKeys:{type:null,default:null},editingMeta:{type:Object,default:null},templates:{type:null,default:null},scrollable:{type:Boolean,default:!1},editButtonProps:{type:Object,default:null},virtualScrollerContentProps:{type:Object,default:null},isVirtualScrollerDisabled:{type:Boolean,default:!1},expandedRowId:{type:String,default:null},nameAttributeSelector:{type:String,default:null}},data:function(){return{d_rowExpanded:!1}},watch:{expandedRows:{deep:!0,immediate:!0,handler:function(e){var n=this;this.d_rowExpanded=this.dataKey?(e==null?void 0:e[wi(this.rowData,this.dataKey)])!==void 0:e==null?void 0:e.some(function(l){return n.equals(n.rowData,l)})}}},methods:{columnProp:function(e,n){return zc(e,n)},getColumnPT:function(e){var n={parent:{instance:this,props:this.$props,state:this.$data}};return ie(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.columnProp({},"pt"),e,n))},getBodyRowPTOptions:function(e){var n,l=(n=this.$parentInstance)===null||n===void 0?void 0:n.$parentInstance;return this.ptm(e,{context:{index:this.rowIndex,selectable:(l==null?void 0:l.rowHover)||(l==null?void 0:l.selectionMode),selected:this.isSelected,stripedRows:(l==null?void 0:l.stripedRows)||!1}})},shouldRenderBodyCell:function(e){var n=this.columnProp(e,"hidden");if(this.rowGroupMode&&!n){var l=this.columnProp(e,"field");if(this.rowGroupMode==="subheader")return this.groupRowsBy!==l;if(this.rowGroupMode==="rowspan")if(this.isGrouped(e)){var m=this.value[this.rowIndex-1];if(m){var d=wi(this.value[this.rowIndex],l),x=wi(m,l);return d!==x}else return!0}else return!0}else return!n},calculateRowGroupSize:function(e){if(this.isGrouped(e)){for(var n=this.rowIndex,l=this.columnProp(e,"field"),m=wi(this.value[n],l),d=m,x=0;m===d;){x++;var s=this.value[++n];if(s)d=wi(s,l);else break}return x===1?null:x}else return null},isGrouped:function(e){var n=this.columnProp(e,"field");return this.groupRowsBy&&n?Array.isArray(this.groupRowsBy)?this.groupRowsBy.indexOf(n)>-1:this.groupRowsBy===n:!1},findIndexInSelection:function(e){return this.findIndex(e,this.selection)},findIndex:function(e,n){var l=-1;if(n&&n.length){for(var m=0;m<n.length;m++)if(this.equals(e,n[m])){l=m;break}}return l},equals:function(e,n){return this.compareSelectionBy==="equals"?e===n:$c(e,n,this.dataKey)},onRowGroupToggle:function(e){this.$emit("rowgroup-toggle",{originalEvent:e,data:this.rowData})},onRowClick:function(e){this.$emit("row-click",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowDblClick:function(e){this.$emit("row-dblclick",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowRightClick:function(e){this.$emit("row-rightclick",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowTouchEnd:function(e){this.$emit("row-touchend",e)},onRowKeyDown:function(e){this.$emit("row-keydown",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowMouseDown:function(e){this.$emit("row-mousedown",e)},onRowDragStart:function(e){this.$emit("row-dragstart",{originalEvent:e,index:this.rowIndex})},onRowDragOver:function(e){this.$emit("row-dragover",{originalEvent:e,index:this.rowIndex})},onRowDragLeave:function(e){this.$emit("row-dragleave",e)},onRowDragEnd:function(e){this.$emit("row-dragend",e)},onRowDrop:function(e){this.$emit("row-drop",e)},onRowToggle:function(e){this.d_rowExpanded=!this.d_rowExpanded,this.$emit("row-toggle",F4(F4({},e),{},{expanded:this.d_rowExpanded}))},onRadioChange:function(e){this.$emit("radio-change",e)},onCheckboxChange:function(e){this.$emit("checkbox-change",e)},onCellEditInit:function(e){this.$emit("cell-edit-init",e)},onCellEditComplete:function(e){this.$emit("cell-edit-complete",e)},onCellEditCancel:function(e){this.$emit("cell-edit-cancel",e)},onRowEditInit:function(e){this.$emit("row-edit-init",e)},onRowEditSave:function(e){this.$emit("row-edit-save",e)},onRowEditCancel:function(e){this.$emit("row-edit-cancel",e)},onEditingMetaChange:function(e){this.$emit("editing-meta-change",e)},getVirtualScrollerProp:function(e,n){return n=n||this.virtualScrollerContentProps,n?n[e]:null}},computed:{rowIndex:function(){var e=this.getVirtualScrollerProp("getItemOptions");return e?e(this.index).index:this.index},rowStyles:function(){var e;return(e=this.rowStyle)===null||e===void 0?void 0:e.call(this,this.rowData)},rowClasses:function(){var e=[],n=null;if(this.rowClass){var l=this.rowClass(this.rowData);l&&e.push(l)}if(this.columns){var m=$j(this.columns),d;try{for(m.s();!(d=m.n()).done;){var x=d.value,s=this.columnProp(x,"selectionMode");if(Zr(s)){n=s;break}}}catch(T){m.e(T)}finally{m.f()}}return[this.cx("row",{rowData:this.rowData,index:this.rowIndex,columnSelectionMode:n}),e]},rowTabindex:function(){return this.selection===null&&(this.selectionMode==="single"||this.selectionMode==="multiple")&&this.rowIndex===0?0:-1},isRowEditing:function(){return this.rowData&&this.editingRows?this.dataKey?this.editingRowKeys?this.editingRowKeys[wi(this.rowData,this.dataKey)]!==void 0:!1:this.findIndex(this.rowData,this.editingRows)>-1:!1},isRowGroupExpanded:function(){if(this.expandableRowGroups&&this.expandedRowGroups){var e=wi(this.rowData,this.groupRowsBy);return this.expandedRowGroups.indexOf(e)>-1}return!1},isSelected:function(){return this.rowData&&this.selection?this.dataKey?this.selectionKeys?this.selectionKeys[wi(this.rowData,this.dataKey)]!==void 0:!1:this.selection instanceof Array?this.findIndexInSelection(this.rowData)>-1:this.equals(this.rowData,this.selection):!1},isSelectedWithContextMenu:function(){return this.rowData&&this.contextMenuSelection?this.equals(this.rowData,this.contextMenuSelection,this.dataKey):!1},shouldRenderRowGroupHeader:function(){var e=wi(this.rowData,this.groupRowsBy),n=this.value[this.rowIndex-1];if(n){var l=wi(n,this.groupRowsBy);return e!==l}else return!0},shouldRenderRowGroupFooter:function(){if(this.expandableRowGroups&&!this.isRowGroupExpanded)return!1;var e=wi(this.rowData,this.groupRowsBy),n=this.value[this.rowIndex+1];if(n){var l=wi(n,this.groupRowsBy);return e!==l}else return!0},columnsLength:function(){var e=this;if(this.columns){var n=0;return this.columns.forEach(function(l){e.columnProp(l,"selectionMode")==="single"&&n--,e.columnProp(l,"hidden")&&n++}),this.columns.length-n}return 0}},components:{DTBodyCell:L6,ChevronDownIcon:Pf,ChevronRightIcon:ed}};function Dy(t){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dy(t)}function $4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function Du(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$4(Object(n),!0).forEach(function(l){qj(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function qj(t,e,n){return(e=Hj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hj(t){var e=Gj(t,"string");return Dy(e)=="symbol"?e:e+""}function Gj(t,e){if(Dy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Dy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wj=["colspan"],Kj=["tabindex","aria-selected","data-p-index","data-p-selectable-row","data-p-selected","data-p-selected-contextmenu"],Zj=["id"],Xj=["colspan"],Yj=["colspan"],Jj=["colspan"];function Qj(t,e,n,l,m,d){var x=wn("ChevronDownIcon"),s=wn("ChevronRightIcon"),T=wn("DTBodyCell");return n.empty?(X(),pe("tr",ie({key:1,class:t.cx("emptyMessage"),role:"row"},t.ptm("emptyMessage")),[M("td",ie({colspan:d.columnsLength},Du(Du({},d.getColumnPT("bodycell")),t.ptm("emptyMessageCell"))),[n.templates.empty?(X(),bt(Tn(n.templates.empty),{key:0})):Ct("",!0)],16,Jj)],16)):(X(),pe(an,{key:0},[n.templates.groupheader&&n.rowGroupMode==="subheader"&&d.shouldRenderRowGroupHeader?(X(),pe("tr",ie({key:0,class:t.cx("rowGroupHeader"),style:n.rowGroupHeaderStyle,role:"row"},t.ptm("rowGroupHeader")),[M("td",ie({colspan:d.columnsLength-1},Du(Du({},d.getColumnPT("bodycell")),t.ptm("rowGroupHeaderCell"))),[n.expandableRowGroups?(X(),pe("button",ie({key:0,class:t.cx("rowToggleButton"),onClick:e[0]||(e[0]=function(){return d.onRowGroupToggle&&d.onRowGroupToggle.apply(d,arguments)}),type:"button"},t.ptm("rowToggleButton")),[n.templates.rowtoggleicon||n.templates.rowgrouptogglericon?(X(),bt(Tn(n.templates.rowtoggleicon||n.templates.rowgrouptogglericon),{key:0,expanded:d.isRowGroupExpanded},null,8,["expanded"])):(X(),pe(an,{key:1},[d.isRowGroupExpanded&&n.expandedRowIcon?(X(),pe("span",ie({key:0,class:[t.cx("rowToggleIcon"),n.expandedRowIcon]},t.ptm("rowToggleIcon")),null,16)):d.isRowGroupExpanded&&!n.expandedRowIcon?(X(),bt(x,ie({key:1,class:t.cx("rowToggleIcon")},t.ptm("rowToggleIcon")),null,16,["class"])):!d.isRowGroupExpanded&&n.collapsedRowIcon?(X(),pe("span",ie({key:2,class:[t.cx("rowToggleIcon"),n.collapsedRowIcon]},t.ptm("rowToggleIcon")),null,16)):!d.isRowGroupExpanded&&!n.collapsedRowIcon?(X(),bt(s,ie({key:3,class:t.cx("rowToggleIcon")},t.ptm("rowToggleIcon")),null,16,["class"])):Ct("",!0)],64))],16)):Ct("",!0),(X(),bt(Tn(n.templates.groupheader),{data:n.rowData,index:d.rowIndex},null,8,["data","index"]))],16,Wj)],16)):Ct("",!0),!n.expandableRowGroups||d.isRowGroupExpanded?(X(),pe("tr",ie({key:1,class:d.rowClasses,style:d.rowStyles,tabindex:d.rowTabindex,role:"row","aria-selected":n.selectionMode?d.isSelected:null,onClick:e[1]||(e[1]=function(){return d.onRowClick&&d.onRowClick.apply(d,arguments)}),onDblclick:e[2]||(e[2]=function(){return d.onRowDblClick&&d.onRowDblClick.apply(d,arguments)}),onContextmenu:e[3]||(e[3]=function(){return d.onRowRightClick&&d.onRowRightClick.apply(d,arguments)}),onTouchend:e[4]||(e[4]=function(){return d.onRowTouchEnd&&d.onRowTouchEnd.apply(d,arguments)}),onKeydown:e[5]||(e[5]=Ih(function(){return d.onRowKeyDown&&d.onRowKeyDown.apply(d,arguments)},["self"])),onMousedown:e[6]||(e[6]=function(){return d.onRowMouseDown&&d.onRowMouseDown.apply(d,arguments)}),onDragstart:e[7]||(e[7]=function(){return d.onRowDragStart&&d.onRowDragStart.apply(d,arguments)}),onDragover:e[8]||(e[8]=function(){return d.onRowDragOver&&d.onRowDragOver.apply(d,arguments)}),onDragleave:e[9]||(e[9]=function(){return d.onRowDragLeave&&d.onRowDragLeave.apply(d,arguments)}),onDragend:e[10]||(e[10]=function(){return d.onRowDragEnd&&d.onRowDragEnd.apply(d,arguments)}),onDrop:e[11]||(e[11]=function(){return d.onRowDrop&&d.onRowDrop.apply(d,arguments)})},d.getBodyRowPTOptions("bodyRow"),{"data-p-index":d.rowIndex,"data-p-selectable-row":!!n.selectionMode,"data-p-selected":n.selection&&d.isSelected,"data-p-selected-contextmenu":n.contextMenuSelection&&d.isSelectedWithContextMenu}),[(X(!0),pe(an,null,fr(n.columns,function(E,A){return X(),pe(an,null,[d.shouldRenderBodyCell(E)?(X(),bt(T,{key:d.columnProp(E,"columnKey")||d.columnProp(E,"field")||A,rowData:n.rowData,column:E,rowIndex:d.rowIndex,index:A,selected:d.isSelected,frozenRow:n.frozenRow,rowspan:n.rowGroupMode==="rowspan"?d.calculateRowGroupSize(E):null,editMode:n.editMode,editing:n.editMode==="row"&&d.isRowEditing,editingMeta:n.editingMeta,virtualScrollerContentProps:n.virtualScrollerContentProps,ariaControls:n.expandedRowId+"_"+d.rowIndex+"_expansion",name:n.nameAttributeSelector,isRowExpanded:m.d_rowExpanded,expandedRowIcon:n.expandedRowIcon,collapsedRowIcon:n.collapsedRowIcon,editButtonProps:n.editButtonProps,onRadioChange:d.onRadioChange,onCheckboxChange:d.onCheckboxChange,onRowToggle:d.onRowToggle,onCellEditInit:d.onCellEditInit,onCellEditComplete:d.onCellEditComplete,onCellEditCancel:d.onCellEditCancel,onRowEditInit:d.onRowEditInit,onRowEditSave:d.onRowEditSave,onRowEditCancel:d.onRowEditCancel,onEditingMetaChange:d.onEditingMetaChange,unstyled:t.unstyled,pt:t.pt},null,8,["rowData","column","rowIndex","index","selected","frozenRow","rowspan","editMode","editing","editingMeta","virtualScrollerContentProps","ariaControls","name","isRowExpanded","expandedRowIcon","collapsedRowIcon","editButtonProps","onRadioChange","onCheckboxChange","onRowToggle","onCellEditInit","onCellEditComplete","onCellEditCancel","onRowEditInit","onRowEditSave","onRowEditCancel","onEditingMetaChange","unstyled","pt"])):Ct("",!0)],64)}),256))],16,Kj)):Ct("",!0),n.templates.expansion&&n.expandedRows&&m.d_rowExpanded?(X(),pe("tr",ie({key:2,id:n.expandedRowId+"_"+d.rowIndex+"_expansion",class:t.cx("rowExpansion"),role:"row"},t.ptm("rowExpansion")),[M("td",ie({colspan:d.columnsLength},Du(Du({},d.getColumnPT("bodycell")),t.ptm("rowExpansionCell"))),[(X(),bt(Tn(n.templates.expansion),{data:n.rowData,index:d.rowIndex},null,8,["data","index"]))],16,Xj)],16,Zj)):Ct("",!0),n.templates.groupfooter&&n.rowGroupMode==="subheader"&&d.shouldRenderRowGroupFooter?(X(),pe("tr",ie({key:3,class:t.cx("rowGroupFooter"),role:"row"},t.ptm("rowGroupFooter")),[M("td",ie({colspan:d.columnsLength-1},Du(Du({},d.getColumnPT("bodycell")),t.ptm("rowGroupFooterCell"))),[(X(),bt(Tn(n.templates.groupfooter),{data:n.rowData,index:d.rowIndex},null,8,["data","index"]))],16,Yj)],16)):Ct("",!0)],64))}O6.render=Qj;var z6={name:"TableBody",hostName:"DataTable",extends:mr,emits:["rowgroup-toggle","row-click","row-dblclick","row-rightclick","row-touchend","row-keydown","row-mousedown","row-dragstart","row-dragover","row-dragleave","row-dragend","row-drop","row-toggle","radio-change","checkbox-change","cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","editing-meta-change"],props:{value:{type:Array,default:null},columns:{type:null,default:null},frozenRow:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},first:{type:Number,default:0},dataKey:{type:[String,Function],default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},expandedRows:{type:[Array,Object],default:null},selection:{type:[Array,Object],default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},rowClass:{type:null,default:null},rowStyle:{type:null,default:null},editMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},editingRows:{type:Array,default:null},editingRowKeys:{type:null,default:null},editingMeta:{type:Object,default:null},templates:{type:null,default:null},scrollable:{type:Boolean,default:!1},editButtonProps:{type:Object,default:null},virtualScrollerContentProps:{type:Object,default:null},isVirtualScrollerDisabled:{type:Boolean,default:!1}},data:function(){return{rowGroupHeaderStyleObject:{}}},mounted:function(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()},updated:function(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()},methods:{getRowKey:function(e,n){return this.dataKey?wi(e,this.dataKey):n},updateFrozenRowStickyPosition:function(){this.$el.style.top=jl(this.$el.previousElementSibling)+"px"},updateFrozenRowGroupHeaderStickyPosition:function(){var e=jl(this.$el.previousElementSibling);this.rowGroupHeaderStyleObject.top=e+"px"},getVirtualScrollerProp:function(e,n){return n=n||this.virtualScrollerContentProps,n?n[e]:null},bodyRef:function(e){var n=this.getVirtualScrollerProp("contentRef");n&&n(e)}},computed:{rowGroupHeaderStyle:function(){return this.scrollable?{top:this.rowGroupHeaderStyleObject.top}:null},bodyContentStyle:function(){return this.getVirtualScrollerProp("contentStyle")},ptmTBodyOptions:function(){var e;return{context:{scrollable:(e=this.$parentInstance)===null||e===void 0||(e=e.$parentInstance)===null||e===void 0?void 0:e.scrollable}}},expandedRowId:function(){return $o()},nameAttributeSelector:function(){return $o()}},components:{DTBodyRow:O6}};function eU(t,e,n,l,m,d){var x=wn("DTBodyRow");return X(),pe("tbody",ie({ref:d.bodyRef,class:t.cx("tbody"),role:"rowgroup",style:d.bodyContentStyle},t.ptm("tbody",d.ptmTBodyOptions)),[n.empty?(X(),bt(x,{key:1,empty:n.empty,columns:n.columns,templates:n.templates,unstyled:t.unstyled,pt:t.pt},null,8,["empty","columns","templates","unstyled","pt"])):(X(!0),pe(an,{key:0},fr(n.value,function(s,T){return X(),bt(x,{key:d.getRowKey(s,T),rowData:s,index:T,value:n.value,columns:n.columns,frozenRow:n.frozenRow,empty:n.empty,first:n.first,dataKey:n.dataKey,selection:n.selection,selectionKeys:n.selectionKeys,selectionMode:n.selectionMode,contextMenu:n.contextMenu,contextMenuSelection:n.contextMenuSelection,rowGroupMode:n.rowGroupMode,groupRowsBy:n.groupRowsBy,expandableRowGroups:n.expandableRowGroups,rowClass:n.rowClass,rowStyle:n.rowStyle,editMode:n.editMode,compareSelectionBy:n.compareSelectionBy,scrollable:n.scrollable,expandedRowIcon:n.expandedRowIcon,collapsedRowIcon:n.collapsedRowIcon,expandedRows:n.expandedRows,expandedRowGroups:n.expandedRowGroups,editingRows:n.editingRows,editingRowKeys:n.editingRowKeys,templates:n.templates,editButtonProps:n.editButtonProps,virtualScrollerContentProps:n.virtualScrollerContentProps,isVirtualScrollerDisabled:n.isVirtualScrollerDisabled,editingMeta:n.editingMeta,rowGroupHeaderStyle:d.rowGroupHeaderStyle,expandedRowId:d.expandedRowId,nameAttributeSelector:d.nameAttributeSelector,onRowgroupToggle:e[0]||(e[0]=function(E){return t.$emit("rowgroup-toggle",E)}),onRowClick:e[1]||(e[1]=function(E){return t.$emit("row-click",E)}),onRowDblclick:e[2]||(e[2]=function(E){return t.$emit("row-dblclick",E)}),onRowRightclick:e[3]||(e[3]=function(E){return t.$emit("row-rightclick",E)}),onRowTouchend:e[4]||(e[4]=function(E){return t.$emit("row-touchend",E)}),onRowKeydown:e[5]||(e[5]=function(E){return t.$emit("row-keydown",E)}),onRowMousedown:e[6]||(e[6]=function(E){return t.$emit("row-mousedown",E)}),onRowDragstart:e[7]||(e[7]=function(E){return t.$emit("row-dragstart",E)}),onRowDragover:e[8]||(e[8]=function(E){return t.$emit("row-dragover",E)}),onRowDragleave:e[9]||(e[9]=function(E){return t.$emit("row-dragleave",E)}),onRowDragend:e[10]||(e[10]=function(E){return t.$emit("row-dragend",E)}),onRowDrop:e[11]||(e[11]=function(E){return t.$emit("row-drop",E)}),onRowToggle:e[12]||(e[12]=function(E){return t.$emit("row-toggle",E)}),onRadioChange:e[13]||(e[13]=function(E){return t.$emit("radio-change",E)}),onCheckboxChange:e[14]||(e[14]=function(E){return t.$emit("checkbox-change",E)}),onCellEditInit:e[15]||(e[15]=function(E){return t.$emit("cell-edit-init",E)}),onCellEditComplete:e[16]||(e[16]=function(E){return t.$emit("cell-edit-complete",E)}),onCellEditCancel:e[17]||(e[17]=function(E){return t.$emit("cell-edit-cancel",E)}),onRowEditInit:e[18]||(e[18]=function(E){return t.$emit("row-edit-init",E)}),onRowEditSave:e[19]||(e[19]=function(E){return t.$emit("row-edit-save",E)}),onRowEditCancel:e[20]||(e[20]=function(E){return t.$emit("row-edit-cancel",E)}),onEditingMetaChange:e[21]||(e[21]=function(E){return t.$emit("editing-meta-change",E)}),unstyled:t.unstyled,pt:t.pt},null,8,["rowData","index","value","columns","frozenRow","empty","first","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowGroups","editingRows","editingRowKeys","templates","editButtonProps","virtualScrollerContentProps","isVirtualScrollerDisabled","editingMeta","rowGroupHeaderStyle","expandedRowId","nameAttributeSelector","unstyled","pt"])}),128))],16)}z6.render=eU;var B6={name:"FooterCell",hostName:"DataTable",extends:mr,props:{column:{type:Object,default:null},index:{type:Number,default:null}},data:function(){return{styleObject:{}}},mounted:function(){this.columnProp("frozen")&&this.updateStickyPosition()},updated:function(){this.columnProp("frozen")&&this.updateStickyPosition()},methods:{columnProp:function(e){return zc(this.column,e)},getColumnPT:function(e){var n,l,m={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,size:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.size,showGridlines:((l=this.$parentInstance)===null||l===void 0||(l=l.$parentInstance)===null||l===void 0?void 0:l.showGridlines)||!1}};return ie(this.ptm("column.".concat(e),{column:m}),this.ptm("column.".concat(e),m),this.ptmo(this.getColumnProp(),e,m))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},updateStickyPosition:function(){if(this.columnProp("frozen")){var e=this.columnProp("alignFrozen");if(e==="right"){var n=0,l=gS(this.$el,'[data-p-frozen-column="true"]');l&&(n=So(l)+parseFloat(l.style.right||0)),this.styleObject.insetInlineEnd=n+"px"}else{var m=0,d=yS(this.$el,'[data-p-frozen-column="true"]');d&&(m=So(d)+parseFloat(d.style.left||0)),this.styleObject.insetInlineStart=m+"px"}}}},computed:{containerClass:function(){return[this.columnProp("footerClass"),this.columnProp("class"),this.cx("footerCell")]},containerStyle:function(){var e=this.columnProp("footerStyle"),n=this.columnProp("style");return this.columnProp("frozen")?[n,e,this.styleObject]:[n,e]}}};function Ly(t){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ly(t)}function N4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function V4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N4(Object(n),!0).forEach(function(l){tU(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function tU(t,e,n){return(e=nU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nU(t){var e=rU(t,"string");return Ly(e)=="symbol"?e:e+""}function rU(t,e){if(Ly(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Ly(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iU=["colspan","rowspan","data-p-frozen-column"];function oU(t,e,n,l,m,d){return X(),pe("td",ie({style:d.containerStyle,class:d.containerClass,role:"cell",colspan:d.columnProp("colspan"),rowspan:d.columnProp("rowspan")},V4(V4({},d.getColumnPT("root")),d.getColumnPT("footerCell")),{"data-p-frozen-column":d.columnProp("frozen")}),[n.column.children&&n.column.children.footer?(X(),bt(Tn(n.column.children.footer),{key:0,column:n.column},null,8,["column"])):Ct("",!0),d.columnProp("footer")?(X(),pe("span",ie({key:1,class:t.cx("columnFooter")},d.getColumnPT("columnFooter")),Ue(d.columnProp("footer")),17)):Ct("",!0)],16,iU)}B6.render=oU;function sU(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=aU(t))||e){n&&(t=n);var l=0,m=function(){};return{s:m,n:function(){return l>=t.length?{done:!0}:{done:!1,value:t[l++]}},e:function(E){throw E},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,x=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var E=n.next();return x=E.done,E},e:function(E){s=!0,d=E},f:function(){try{x||n.return==null||n.return()}finally{if(s)throw d}}}}function aU(t,e){if(t){if(typeof t=="string")return j4(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j4(t,e):void 0}}function j4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}var F6={name:"TableFooter",hostName:"DataTable",extends:mr,props:{columnGroup:{type:null,default:null},columns:{type:Object,default:null}},provide:function(){return{$rows:this.d_footerRows,$columns:this.d_footerColumns}},data:function(){return{d_footerRows:new Sf({type:"Row"}),d_footerColumns:new Sf({type:"Column"})}},beforeUnmount:function(){this.d_footerRows.clear(),this.d_footerColumns.clear()},methods:{columnProp:function(e,n){return zc(e,n)},getColumnGroupPT:function(e){var n={props:this.getColumnGroupProps(),parent:{instance:this,props:this.$props,state:this.$data},context:{type:"footer",scrollable:this.ptmTFootOptions.context.scrollable}};return ie(this.ptm("columnGroup.".concat(e),{columnGroup:n}),this.ptm("columnGroup.".concat(e),n),this.ptmo(this.getColumnGroupProps(),e,n))},getColumnGroupProps:function(){return this.columnGroup&&this.columnGroup.props&&this.columnGroup.props.pt?this.columnGroup.props.pt:void 0},getRowPT:function(e,n,l){var m={props:e.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:l}};return ie(this.ptm("row.".concat(n),{row:m}),this.ptm("row.".concat(n),m),this.ptmo(this.getRowProp(e),n,m))},getRowProp:function(e){return e.props&&e.props.pt?e.props.pt:void 0},getFooterRows:function(){var e;return(e=this.d_footerRows)===null||e===void 0?void 0:e.get(this.columnGroup,this.columnGroup.children)},getFooterColumns:function(e){var n;return(n=this.d_footerColumns)===null||n===void 0?void 0:n.get(e,e.children)}},computed:{hasFooter:function(){var e=!1;if(this.columnGroup)e=!0;else if(this.columns){var n=sU(this.columns),l;try{for(n.s();!(l=n.n()).done;){var m=l.value;if(this.columnProp(m,"footer")||m.children&&m.children.footer){e=!0;break}}}catch(d){n.e(d)}finally{n.f()}}return e},ptmTFootOptions:function(){var e;return{context:{scrollable:(e=this.$parentInstance)===null||e===void 0||(e=e.$parentInstance)===null||e===void 0?void 0:e.scrollable}}}},components:{DTFooterCell:B6}};function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function U4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function bb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U4(Object(n),!0).forEach(function(l){lU(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function lU(t,e,n){return(e=cU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cU(t){var e=uU(t,"string");return Oy(e)=="symbol"?e:e+""}function uU(t,e){if(Oy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Oy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dU(t,e,n,l,m,d){var x=wn("DTFooterCell");return d.hasFooter?(X(),pe("tfoot",ie({key:0,class:t.cx("tfoot"),style:t.sx("tfoot"),role:"rowgroup"},n.columnGroup?bb(bb({},t.ptm("tfoot",d.ptmTFootOptions)),d.getColumnGroupPT("root")):t.ptm("tfoot",d.ptmTFootOptions),{"data-pc-section":"tfoot"}),[n.columnGroup?(X(!0),pe(an,{key:1},fr(d.getFooterRows(),function(s,T){return X(),pe("tr",ie({key:T,role:"row",ref_for:!0},bb(bb({},t.ptm("footerRow")),d.getRowPT(s,"root",T))),[(X(!0),pe(an,null,fr(d.getFooterColumns(s),function(E,A){return X(),pe(an,{key:d.columnProp(E,"columnKey")||d.columnProp(E,"field")||A},[d.columnProp(E,"hidden")?Ct("",!0):(X(),bt(x,{key:0,column:E,index:T,pt:t.pt},null,8,["column","index","pt"]))],64)}),128))],16)}),128)):(X(),pe("tr",ie({key:0,role:"row"},t.ptm("footerRow")),[(X(!0),pe(an,null,fr(n.columns,function(s,T){return X(),pe(an,{key:d.columnProp(s,"columnKey")||d.columnProp(s,"field")||T},[d.columnProp(s,"hidden")?Ct("",!0):(X(),bt(x,{key:0,column:s,pt:t.pt},null,8,["column","pt"]))],64)}),128))],16))],16)):Ct("",!0)}F6.render=dU;function zy(t){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zy(t)}function q4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function dh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q4(Object(n),!0).forEach(function(l){hU(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function hU(t,e,n){return(e=pU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pU(t){var e=fU(t,"string");return zy(e)=="symbol"?e:e+""}function fU(t,e){if(zy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(zy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IS={name:"ColumnFilter",hostName:"DataTable",extends:mr,emits:["filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{field:{type:String,default:null},type:{type:String,default:"text"},display:{type:String,default:null},showMenu:{type:Boolean,default:!0},matchMode:{type:String,default:null},showOperator:{type:Boolean,default:!0},showClearButton:{type:Boolean,default:!0},showApplyButton:{type:Boolean,default:!0},showMatchModes:{type:Boolean,default:!0},showAddButton:{type:Boolean,default:!0},matchModeOptions:{type:Array,default:null},maxConstraints:{type:Number,default:2},filterElement:{type:Function,default:null},filterHeaderTemplate:{type:Function,default:null},filterFooterTemplate:{type:Function,default:null},filterClearTemplate:{type:Function,default:null},filterApplyTemplate:{type:Function,default:null},filterIconTemplate:{type:Function,default:null},filterAddIconTemplate:{type:Function,default:null},filterRemoveIconTemplate:{type:Function,default:null},filterClearIconTemplate:{type:Function,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},filterMenuClass:{type:String,default:null},filterMenuStyle:{type:null,default:null},filterInputProps:{type:null,default:null},filterButtonProps:{type:null,default:null},column:null},data:function(){return{id:this.$attrs.id,overlayVisible:!1,defaultMatchMode:null,defaultOperator:null}},watch:{"$attrs.id":function(e){this.id=e||$o()}},overlay:null,selfClick:!1,overlayEventListener:null,beforeUnmount:function(){this.overlayEventListener&&(ql.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null),this.overlay&&(bo.clear(this.overlay),this.onOverlayHide())},mounted:function(){if(this.id=this.id||$o(),this.filters&&this.filters[this.field]){var e=this.filters[this.field];e.operator?(this.defaultMatchMode=e.constraints[0].matchMode,this.defaultOperator=e.operator):this.defaultMatchMode=this.filters[this.field].matchMode}},methods:{getColumnPT:function(e,n){var l=dh({props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data}},n);return ie(this.ptm("column.".concat(e),{column:l}),this.ptm("column.".concat(e),l),this.ptmo(this.getColumnProp(),e,l))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},ptmFilterConstraintOptions:function(e){return{context:{highlighted:e&&this.isRowMatchModeSelected(e.value)}}},clearFilter:function(){var e=dh({},this.filters);e[this.field].operator?(e[this.field].constraints.splice(1),e[this.field].operator=this.defaultOperator,e[this.field].constraints[0]={value:null,matchMode:this.defaultMatchMode}):(e[this.field].value=null,e[this.field].matchMode=this.defaultMatchMode),this.$emit("filter-clear"),this.$emit("filter-change",e),this.$emit("filter-apply"),this.hide()},applyFilter:function(){this.$emit("apply-click",{field:this.field,constraints:this.filters[this.field]}),this.$emit("filter-apply"),this.hide()},hasFilter:function(){if(this.filtersStore){var e=this.filtersStore[this.field];if(e)return e.operator?!this.isFilterBlank(e.constraints[0].value):!this.isFilterBlank(e.value)}return!1},hasRowFilter:function(){return this.filters[this.field]&&!this.isFilterBlank(this.filters[this.field].value)},isFilterBlank:function(e){return e!=null?typeof e=="string"&&e.trim().length==0||e instanceof Array&&e.length==0:!0},toggleMenu:function(e){this.overlayVisible=!this.overlayVisible,e.preventDefault()},onToggleButtonKeyDown:function(e){switch(e.code){case"Enter":case"NumpadEnter":case"Space":this.toggleMenu(e);break;case"Escape":this.overlayVisible=!1;break}},onRowMatchModeChange:function(e){var n=dh({},this.filters);n[this.field].matchMode=e,this.$emit("matchmode-change",{field:this.field,matchMode:e}),this.$emit("filter-change",n),this.$emit("filter-apply"),this.hide()},onRowMatchModeKeyDown:function(e){var n=e.target;switch(e.code){case"ArrowDown":var l=this.findNextItem(n);l&&(n.removeAttribute("tabindex"),l.tabIndex="0",l.focus()),e.preventDefault();break;case"ArrowUp":var m=this.findPrevItem(n);m&&(n.removeAttribute("tabindex"),m.tabIndex="0",m.focus()),e.preventDefault();break}},isRowMatchModeSelected:function(e){return this.filters[this.field].matchMode===e},onOperatorChange:function(e){var n=dh({},this.filters);n[this.field].operator=e,this.$emit("filter-change",n),this.$emit("operator-change",{field:this.field,operator:e}),this.showApplyButton||this.$emit("filter-apply")},onMenuMatchModeChange:function(e,n){var l=dh({},this.filters);l[this.field].constraints[n].matchMode=e,this.$emit("matchmode-change",{field:this.field,matchMode:e,index:n}),this.showApplyButton||this.$emit("filter-apply")},addConstraint:function(){var e=dh({},this.filters),n={value:null,matchMode:this.defaultMatchMode};e[this.field].constraints.push(n),this.$emit("constraint-add",{field:this.field,constraing:n}),this.$emit("filter-change",e),this.showApplyButton||this.$emit("filter-apply")},removeConstraint:function(e){var n=dh({},this.filters),l=n[this.field].constraints.splice(e,1);this.$emit("constraint-remove",{field:this.field,constraing:l}),this.$emit("filter-change",n),this.showApplyButton||this.$emit("filter-apply")},filterCallback:function(){this.$emit("filter-apply")},findNextItem:function(e){var n=e.nextElementSibling;return n?Ci(n,"data-pc-section")==="filterconstraintseparator"?this.findNextItem(n):n:e.parentElement.firstElementChild},findPrevItem:function(e){var n=e.previousElementSibling;return n?Ci(n,"data-pc-section")==="filterconstraintseparator"?this.findPrevItem(n):n:e.parentElement.lastElementChild},hide:function(){this.overlayVisible=!1,this.showMenuButton&&Ro(this.$refs.icon.$el)},onContentClick:function(e){this.selfClick=!0,ql.emit("overlay-click",{originalEvent:e,target:this.overlay})},onContentMouseDown:function(){this.selfClick=!0},onOverlayEnter:function(e){var n=this;this.filterMenuStyle&&Sh(this.overlay,this.filterMenuStyle),bo.set("overlay",e,this.$primevue.config.zIndex.overlay),Sh(e,{position:"absolute",top:"0",left:"0"}),D_(this.overlay,this.$refs.icon.$el),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.overlayEventListener=function(l){n.isOutsideClicked(l.target)||(n.selfClick=!0)},ql.on("overlay-click",this.overlayEventListener)},onOverlayAfterEnter:function(){var e;(e=this.overlay)===null||e===void 0||(e=e.$focustrap)===null||e===void 0||e.autoFocus()},onOverlayLeave:function(){this.onOverlayHide()},onOverlayAfterLeave:function(e){bo.clear(e)},onOverlayHide:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindScrollListener(),this.overlay=null,ql.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null},overlayRef:function(e){this.overlay=e},isOutsideClicked:function(e){return!this.isTargetClicked(e)&&this.overlay&&!(this.overlay.isSameNode(e)||this.overlay.contains(e))},isTargetClicked:function(e){return this.$refs.icon&&(this.$refs.icon.$el.isSameNode(e)||this.$refs.icon.$el.contains(e))},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&!e.selfClick&&e.isOutsideClicked(n.target)&&(e.overlayVisible=!1),e.selfClick=!1},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null,this.selfClick=!1)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new B_(this.$refs.icon.$el,function(){e.overlayVisible&&e.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!L_()&&e.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}},computed:{showMenuButton:function(){return this.showMenu&&(this.display==="row"?this.type!=="boolean":!0)},overlayId:function(){return this.id+"_overlay"},matchModes:function(){var e=this;return this.matchModeOptions||this.$primevue.config.filterMatchModeOptions[this.type].map(function(n){return{label:e.$primevue.config.locale[n],value:n}})},isShowMatchModes:function(){return this.type!=="boolean"&&this.showMatchModes&&this.matchModes},operatorOptions:function(){return[{label:this.$primevue.config.locale.matchAll,value:h_.AND},{label:this.$primevue.config.locale.matchAny,value:h_.OR}]},noFilterLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.noFilter:void 0},isShowOperator:function(){return this.showOperator&&this.filters[this.field].operator},operator:function(){return this.filters[this.field].operator},fieldConstraints:function(){return this.filters[this.field].constraints||[this.filters[this.field]]},showRemoveIcon:function(){return this.fieldConstraints.length>1},removeRuleButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.removeRule:void 0},addRuleButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.addRule:void 0},isShowAddConstraint:function(){return this.showAddButton&&this.filters[this.field].operator&&this.fieldConstraints&&this.fieldConstraints.length<this.maxConstraints},clearButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.clear:void 0},applyButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.apply:void 0},columnFilterButtonAriaLabel:function(){return this.$primevue.config.locale?this.overlayVisible?this.$primevue.config.locale.showFilterMenu:this.$primevue.config.locale.hideFilterMenu:void 0},filterOperatorAriaLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.filterOperator:void 0},filterRuleAriaLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.filterConstraint:void 0},ptmHeaderFilterClearParams:function(){return{context:{hidden:this.hasRowFilter()}}},ptmFilterMenuParams:function(){return{context:{overlayVisible:this.overlayVisible,active:this.hasFilter()}}}},components:{Select:xs,Button:jr,Portal:td,FilterSlashIcon:P6,FilterIcon:I6,TrashIcon:R6,PlusIcon:A6},directives:{focustrap:ES}};function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function H4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function Qp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H4(Object(n),!0).forEach(function(l){mU(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function mU(t,e,n){return(e=gU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gU(t){var e=yU(t,"string");return By(e)=="symbol"?e:e+""}function yU(t,e){if(By(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(By(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vU=["id","aria-modal"],bU=["onClick","onKeydown","tabindex"];function _U(t,e,n,l,m,d){var x=wn("Button"),s=wn("Select"),T=wn("Portal"),E=No("focustrap");return X(),pe("div",ie({class:t.cx("filter")},d.getColumnPT("filter")),[n.display==="row"?(X(),pe("div",ie({key:0,class:t.cx("filterElementContainer")},Qp(Qp({},n.filterInputProps),d.getColumnPT("filterElementContainer"))),[(X(),bt(Tn(n.filterElement),{field:n.field,filterModel:n.filters[n.field],filterCallback:d.filterCallback},null,8,["field","filterModel","filterCallback"]))],16)):Ct("",!0),d.showMenuButton?(X(),bt(x,ie({key:1,ref:"icon","aria-label":d.columnFilterButtonAriaLabel,"aria-haspopup":"true","aria-expanded":m.overlayVisible,"aria-controls":d.overlayId,class:t.cx("pcColumnFilterButton"),unstyled:t.unstyled,onClick:e[0]||(e[0]=function(A){return d.toggleMenu(A)}),onKeydown:e[1]||(e[1]=function(A){return d.onToggleButtonKeyDown(A)})},Qp(Qp({},d.getColumnPT("pcColumnFilterButton",d.ptmFilterMenuParams)),n.filterButtonProps.filter)),{icon:Xe(function(A){return[(X(),bt(Tn(n.filterIconTemplate||"FilterIcon"),ie({class:A.class},d.getColumnPT("filterMenuIcon")),null,16,["class"]))]}),_:1},16,["aria-label","aria-expanded","aria-controls","class","unstyled"])):Ct("",!0),n.showClearButton&&n.display==="row"&&d.hasRowFilter()?(X(),bt(x,ie({key:2,class:t.cx("pcColumnFilterClearButton"),unstyled:t.unstyled,onClick:e[2]||(e[2]=function(A){return d.clearFilter()})},Qp(Qp({},d.getColumnPT("pcColumnFilterClearButton",d.ptmHeaderFilterClearParams)),n.filterButtonProps.inline.clear)),{icon:Xe(function(A){return[(X(),bt(Tn(n.filterClearIconTemplate||"FilterSlashIcon"),ie({class:A.class},d.getColumnPT("filterClearIcon")),null,16,["class"]))]}),_:1},16,["class","unstyled"])):Ct("",!0),ge(T,null,{default:Xe(function(){return[ge(Eh,ie({name:"p-connected-overlay",onEnter:d.onOverlayEnter,onAfterEnter:d.onOverlayAfterEnter,onLeave:d.onOverlayLeave,onAfterLeave:d.onOverlayAfterLeave},d.getColumnPT("transition")),{default:Xe(function(){return[m.overlayVisible?_r((X(),pe("div",ie({key:0,ref:d.overlayRef,id:d.overlayId,"aria-modal":m.overlayVisible,role:"dialog",class:[t.cx("filterOverlay"),n.filterMenuClass],onKeydown:e[10]||(e[10]=qi(function(){return d.hide&&d.hide.apply(d,arguments)},["escape"])),onClick:e[11]||(e[11]=function(){return d.onContentClick&&d.onContentClick.apply(d,arguments)}),onMousedown:e[12]||(e[12]=function(){return d.onContentMouseDown&&d.onContentMouseDown.apply(d,arguments)})},d.getColumnPT("filterOverlay")),[(X(),bt(Tn(n.filterHeaderTemplate),{field:n.field,filterModel:n.filters[n.field],filterCallback:d.filterCallback},null,8,["field","filterModel","filterCallback"])),n.display==="row"?(X(),pe("ul",ie({key:0,class:t.cx("filterConstraintList")},d.getColumnPT("filterConstraintList")),[(X(!0),pe(an,null,fr(d.matchModes,function(A,z){return X(),pe("li",ie({key:A.label,class:t.cx("filterConstraint",{matchMode:A}),onClick:function(U){return d.onRowMatchModeChange(A.value)},onKeydown:[e[3]||(e[3]=function(j){return d.onRowMatchModeKeyDown(j)}),qi(Ih(function(j){return d.onRowMatchModeChange(A.value)},["prevent"]),["enter"])],tabindex:z===0?"0":null,ref_for:!0},d.getColumnPT("filterConstraint",d.ptmFilterConstraintOptions(A))),Ue(A.label),17,bU)}),128)),M("li",ie({class:t.cx("filterConstraintSeparator")},d.getColumnPT("filterConstraintSeparator")),null,16),M("li",ie({class:t.cx("filterConstraint"),onClick:e[4]||(e[4]=function(A){return d.clearFilter()}),onKeydown:[e[5]||(e[5]=function(A){return d.onRowMatchModeKeyDown(A)}),e[6]||(e[6]=qi(function(A){return t.onRowClearItemClick()},["enter"]))]},d.getColumnPT("filterConstraint")),Ue(d.noFilterLabel),17)],16)):(X(),pe(an,{key:1},[d.isShowOperator?(X(),pe("div",ie({key:0,class:t.cx("filterOperator")},d.getColumnPT("filterOperator")),[ge(s,{options:d.operatorOptions,modelValue:d.operator,"aria-label":d.filterOperatorAriaLabel,class:vn(t.cx("pcFilterOperatorDropdown")),optionLabel:"label",optionValue:"value","onUpdate:modelValue":e[7]||(e[7]=function(A){return d.onOperatorChange(A)}),unstyled:t.unstyled,pt:d.getColumnPT("pcFilterOperatorDropdown")},null,8,["options","modelValue","aria-label","class","unstyled","pt"])],16)):Ct("",!0),M("div",ie({class:t.cx("filterRuleList")},d.getColumnPT("filterRuleList")),[(X(!0),pe(an,null,fr(d.fieldConstraints,function(A,z){return X(),pe("div",ie({key:z,class:t.cx("filterRule"),ref_for:!0},d.getColumnPT("filterRule")),[d.isShowMatchModes?(X(),bt(s,{key:0,options:d.matchModes,modelValue:A.matchMode,class:vn(t.cx("pcFilterConstraintDropdown")),optionLabel:"label",optionValue:"value","aria-label":d.filterRuleAriaLabel,"onUpdate:modelValue":function(U){return d.onMenuMatchModeChange(U,z)},unstyled:t.unstyled,pt:d.getColumnPT("pcFilterConstraintDropdown")},null,8,["options","modelValue","class","aria-label","onUpdate:modelValue","unstyled","pt"])):Ct("",!0),n.display==="menu"?(X(),bt(Tn(n.filterElement),{key:1,field:n.field,filterModel:A,filterCallback:d.filterCallback,applyFilter:d.applyFilter},null,8,["field","filterModel","filterCallback","applyFilter"])):Ct("",!0),d.showRemoveIcon?(X(),pe("div",ie({key:2,ref_for:!0},d.getColumnPT("filterRemove")),[ge(x,ie({type:"button",class:t.cx("pcFilterRemoveRuleButton"),onClick:function(U){return d.removeConstraint(z)},label:d.removeRuleButtonLabel,unstyled:t.unstyled,ref_for:!0},n.filterButtonProps.popover.removeRule,{pt:d.getColumnPT("pcFilterRemoveRuleButton")}),{icon:Xe(function(j){return[(X(),bt(Tn(n.filterRemoveIconTemplate||"TrashIcon"),ie({class:j.class,ref_for:!0},d.getColumnPT("pcFilterRemoveRuleButton").icon),null,16,["class"]))]}),_:2},1040,["class","onClick","label","unstyled","pt"])],16)):Ct("",!0)],16)}),128))],16),d.isShowAddConstraint?(X(),pe("div",ka(ie({key:1},d.getColumnPT("filterAddButtonContainer"))),[ge(x,ie({type:"button",label:d.addRuleButtonLabel,iconPos:"left",class:t.cx("pcFilterAddRuleButton"),onClick:e[8]||(e[8]=function(A){return d.addConstraint()}),unstyled:t.unstyled},n.filterButtonProps.popover.addRule,{pt:d.getColumnPT("pcFilterAddRuleButton")}),{icon:Xe(function(A){return[(X(),bt(Tn(n.filterAddIconTemplate||"PlusIcon"),ie({class:A.class},d.getColumnPT("pcFilterAddRuleButton").icon),null,16,["class"]))]}),_:1},16,["label","class","unstyled","pt"])],16)):Ct("",!0),M("div",ie({class:t.cx("filterButtonbar")},d.getColumnPT("filterButtonbar")),[!n.filterClearTemplate&&n.showClearButton?(X(),bt(x,ie({key:0,type:"button",class:t.cx("pcFilterClearButton"),label:d.clearButtonLabel,onClick:d.clearFilter,unstyled:t.unstyled},n.filterButtonProps.popover.clear,{pt:d.getColumnPT("pcFilterClearButton")}),null,16,["class","label","onClick","unstyled","pt"])):(X(),bt(Tn(n.filterClearTemplate),{key:1,field:n.field,filterModel:n.filters[n.field],filterCallback:d.clearFilter},null,8,["field","filterModel","filterCallback"])),n.showApplyButton?(X(),pe(an,{key:2},[n.filterApplyTemplate?(X(),bt(Tn(n.filterApplyTemplate),{key:1,field:n.field,filterModel:n.filters[n.field],filterCallback:d.applyFilter},null,8,["field","filterModel","filterCallback"])):(X(),bt(x,ie({key:0,type:"button",class:t.cx("pcFilterApplyButton"),label:d.applyButtonLabel,onClick:e[9]||(e[9]=function(A){return d.applyFilter()}),unstyled:t.unstyled},n.filterButtonProps.popover.apply,{pt:d.getColumnPT("pcFilterApplyButton")}),null,16,["class","label","unstyled","pt"]))],64)):Ct("",!0)],16)],64)),(X(),bt(Tn(n.filterFooterTemplate),{field:n.field,filterModel:n.filters[n.field],filterCallback:d.filterCallback},null,8,["field","filterModel","filterCallback"]))],16,vU)),[[E]]):Ct("",!0)]}),_:1},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:1})],16)}IS.render=_U;var PS={name:"HeaderCheckbox",hostName:"DataTable",extends:mr,emits:["change"],props:{checked:null,disabled:null,column:null,headerCheckboxIconTemplate:{type:Function,default:null}},methods:{getColumnPT:function(e){var n={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{checked:this.checked,disabled:this.disabled}};return ie(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.getColumnProp(),e,n))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onChange:function(e){this.$emit("change",{originalEvent:e,checked:!this.checked})}},computed:{headerCheckboxAriaLabel:function(){return this.$primevue.config.locale.aria?this.checked?this.$primevue.config.locale.aria.selectAll:this.$primevue.config.locale.aria.unselectAll:void 0}},components:{CheckIcon:Xu,Checkbox:a0}};function xU(t,e,n,l,m,d){var x=wn("CheckIcon"),s=wn("Checkbox");return X(),bt(s,{modelValue:n.checked,binary:!0,disabled:n.disabled,"aria-label":d.headerCheckboxAriaLabel,onChange:d.onChange,unstyled:t.unstyled,pt:d.getColumnPT("pcHeaderCheckbox")},{icon:Xe(function(T){return[n.headerCheckboxIconTemplate?(X(),bt(Tn(n.headerCheckboxIconTemplate),{key:0,checked:T.checked,class:vn(T.class)},null,8,["checked","class"])):!n.headerCheckboxIconTemplate&&T.checked?(X(),bt(x,ie({key:1,class:T.class},d.getColumnPT("pcHeaderCheckbox").icon),null,16,["class"])):Ct("",!0)]}),_:1},8,["modelValue","disabled","aria-label","onChange","unstyled","pt"])}PS.render=xU;var $6={name:"HeaderCell",hostName:"DataTable",extends:mr,emits:["column-click","column-mousedown","column-dragstart","column-dragover","column-dragleave","column-drop","column-resizestart","checkbox-change","filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{column:{type:Object,default:null},index:{type:Number,default:null},resizableColumns:{type:Boolean,default:!1},groupRowsBy:{type:[Array,String,Function],default:null},sortMode:{type:String,default:"single"},groupRowSortField:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},multiSortMeta:{type:Array,default:null},allRowsSelected:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},filterDisplay:{type:String,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},filterColumn:{type:Boolean,default:!1},reorderableColumns:{type:Boolean,default:!1},filterInputProps:{type:null,default:null},filterButtonProps:{type:null,default:null}},data:function(){return{styleObject:{}}},mounted:function(){this.columnProp("frozen")&&this.updateStickyPosition()},updated:function(){this.columnProp("frozen")&&this.updateStickyPosition()},methods:{columnProp:function(e){return zc(this.column,e)},getColumnPT:function(e){var n,l,m={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,sortable:this.columnProp("sortable")===""||this.columnProp("sortable"),sorted:this.isColumnSorted(),resizable:this.resizableColumns,size:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.size,showGridlines:((l=this.$parentInstance)===null||l===void 0||(l=l.$parentInstance)===null||l===void 0?void 0:l.showGridlines)||!1}};return ie(this.ptm("column.".concat(e),{column:m}),this.ptm("column.".concat(e),m),this.ptmo(this.getColumnProp(),e,m))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onClick:function(e){this.$emit("column-click",{originalEvent:e,column:this.column})},onKeyDown:function(e){(e.code==="Enter"||e.code==="NumpadEnter"||e.code==="Space")&&e.currentTarget.nodeName==="TH"&&Ci(e.currentTarget,"data-p-sortable-column")&&(this.$emit("column-click",{originalEvent:e,column:this.column}),e.preventDefault())},onMouseDown:function(e){this.$emit("column-mousedown",{originalEvent:e,column:this.column})},onDragStart:function(e){this.$emit("column-dragstart",{originalEvent:e,column:this.column})},onDragOver:function(e){this.$emit("column-dragover",{originalEvent:e,column:this.column})},onDragLeave:function(e){this.$emit("column-dragleave",{originalEvent:e,column:this.column})},onDrop:function(e){this.$emit("column-drop",{originalEvent:e,column:this.column})},onResizeStart:function(e){this.$emit("column-resizestart",e)},getMultiSortMetaIndex:function(){var e=this;return this.multiSortMeta.findIndex(function(n){return n.field===e.columnProp("field")||n.field===e.columnProp("sortField")})},getBadgeValue:function(){var e=this.getMultiSortMetaIndex();return this.groupRowsBy&&this.groupRowsBy===this.groupRowSortField&&e>-1?e:e+1},isMultiSorted:function(){return this.sortMode==="multiple"&&this.columnProp("sortable")&&this.getMultiSortMetaIndex()>-1},isColumnSorted:function(){return this.sortMode==="single"?this.sortField&&(this.sortField===this.columnProp("field")||this.sortField===this.columnProp("sortField")):this.isMultiSorted()},updateStickyPosition:function(){if(this.columnProp("frozen")){var e=this.columnProp("alignFrozen");if(e==="right"){var n=0,l=gS(this.$el,'[data-p-frozen-column="true"]');l&&(n=So(l)+parseFloat(l.style.right||0)),this.styleObject.insetInlineEnd=n+"px"}else{var m=0,d=yS(this.$el,'[data-p-frozen-column="true"]');d&&(m=So(d)+parseFloat(d.style.left||0)),this.styleObject.insetInlineStart=m+"px"}var x=this.$el.parentElement.nextElementSibling;if(x){var s=Dc(this.$el);x.children[s]&&(x.children[s].style.left=this.styleObject.left,x.children[s].style.right=this.styleObject.right)}}},onHeaderCheckboxChange:function(e){this.$emit("checkbox-change",e)}},computed:{containerClass:function(){return[this.cx("headerCell"),this.filterColumn?this.columnProp("filterHeaderClass"):this.columnProp("headerClass"),this.columnProp("class")]},containerStyle:function(){var e=this.filterColumn?this.columnProp("filterHeaderStyle"):this.columnProp("headerStyle"),n=this.columnProp("style");return this.columnProp("frozen")?[n,e,this.styleObject]:[n,e]},sortState:function(){var e=!1,n=null;if(this.sortMode==="single")e=this.sortField&&(this.sortField===this.columnProp("field")||this.sortField===this.columnProp("sortField")),n=e?this.sortOrder:0;else if(this.sortMode==="multiple"){var l=this.getMultiSortMetaIndex();l>-1&&(e=!0,n=this.multiSortMeta[l].order)}return{sorted:e,sortOrder:n}},sortableColumnIcon:function(){var e=this.sortState,n=e.sorted,l=e.sortOrder;if(n){if(n&&l>0)return _2;if(n&&l<0)return b2}else return v2;return null},ariaSort:function(){if(this.columnProp("sortable")){var e=this.sortState,n=e.sorted,l=e.sortOrder;return n&&l<0?"descending":n&&l>0?"ascending":"none"}else return null}},components:{Badge:Af,DTHeaderCheckbox:PS,DTColumnFilter:IS,SortAltIcon:v2,SortAmountUpAltIcon:_2,SortAmountDownIcon:b2}};function Fy(t){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(t)}function G4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function W4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G4(Object(n),!0).forEach(function(l){wU(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function wU(t,e,n){return(e=SU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SU(t){var e=CU(t,"string");return Fy(e)=="symbol"?e:e+""}function CU(t,e){if(Fy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Fy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kU=["tabindex","colspan","rowspan","aria-sort","data-p-sortable-column","data-p-resizable-column","data-p-sorted","data-p-filter-column","data-p-frozen-column","data-p-reorderable-column"];function TU(t,e,n,l,m,d){var x=wn("Badge"),s=wn("DTHeaderCheckbox"),T=wn("DTColumnFilter");return X(),pe("th",ie({style:d.containerStyle,class:d.containerClass,tabindex:d.columnProp("sortable")?"0":null,role:"columnheader",colspan:d.columnProp("colspan"),rowspan:d.columnProp("rowspan"),"aria-sort":d.ariaSort,onClick:e[8]||(e[8]=function(){return d.onClick&&d.onClick.apply(d,arguments)}),onKeydown:e[9]||(e[9]=function(){return d.onKeyDown&&d.onKeyDown.apply(d,arguments)}),onMousedown:e[10]||(e[10]=function(){return d.onMouseDown&&d.onMouseDown.apply(d,arguments)}),onDragstart:e[11]||(e[11]=function(){return d.onDragStart&&d.onDragStart.apply(d,arguments)}),onDragover:e[12]||(e[12]=function(){return d.onDragOver&&d.onDragOver.apply(d,arguments)}),onDragleave:e[13]||(e[13]=function(){return d.onDragLeave&&d.onDragLeave.apply(d,arguments)}),onDrop:e[14]||(e[14]=function(){return d.onDrop&&d.onDrop.apply(d,arguments)})},W4(W4({},d.getColumnPT("root")),d.getColumnPT("headerCell")),{"data-p-sortable-column":d.columnProp("sortable"),"data-p-resizable-column":n.resizableColumns,"data-p-sorted":d.isColumnSorted(),"data-p-filter-column":n.filterColumn,"data-p-frozen-column":d.columnProp("frozen"),"data-p-reorderable-column":n.reorderableColumns}),[n.resizableColumns&&!d.columnProp("frozen")?(X(),pe("span",ie({key:0,class:t.cx("columnResizer"),onMousedown:e[0]||(e[0]=function(){return d.onResizeStart&&d.onResizeStart.apply(d,arguments)})},d.getColumnPT("columnResizer")),null,16)):Ct("",!0),M("div",ie({class:t.cx("columnHeaderContent")},d.getColumnPT("columnHeaderContent")),[n.column.children&&n.column.children.header?(X(),bt(Tn(n.column.children.header),{key:0,column:n.column},null,8,["column"])):Ct("",!0),d.columnProp("header")?(X(),pe("span",ie({key:1,class:t.cx("columnTitle")},d.getColumnPT("columnTitle")),Ue(d.columnProp("header")),17)):Ct("",!0),d.columnProp("sortable")?(X(),pe("span",ka(ie({key:2},d.getColumnPT("sort"))),[(X(),bt(Tn(n.column.children&&n.column.children.sorticon||d.sortableColumnIcon),ie({sorted:d.sortState.sorted,sortOrder:d.sortState.sortOrder,class:t.cx("sortIcon")},d.getColumnPT("sorticon")),null,16,["sorted","sortOrder","class"]))],16)):Ct("",!0),d.isMultiSorted()?(X(),bt(x,{key:3,class:vn(t.cx("pcSortBadge")),pt:d.getColumnPT("pcSortBadge"),value:d.getBadgeValue(),size:"small"},null,8,["class","pt","value"])):Ct("",!0),d.columnProp("selectionMode")==="multiple"&&n.filterDisplay!=="row"?(X(),bt(s,{key:4,checked:n.allRowsSelected,onChange:d.onHeaderCheckboxChange,disabled:n.empty,headerCheckboxIconTemplate:n.column.children&&n.column.children.headercheckboxicon,column:n.column,unstyled:t.unstyled,pt:t.pt},null,8,["checked","onChange","disabled","headerCheckboxIconTemplate","column","unstyled","pt"])):Ct("",!0),n.filterDisplay==="menu"&&n.column.children&&n.column.children.filter?(X(),bt(T,{key:5,field:d.columnProp("filterField")||d.columnProp("field"),type:d.columnProp("dataType"),display:"menu",showMenu:d.columnProp("showFilterMenu"),filterElement:n.column.children&&n.column.children.filter,filterHeaderTemplate:n.column.children&&n.column.children.filterheader,filterFooterTemplate:n.column.children&&n.column.children.filterfooter,filterClearTemplate:n.column.children&&n.column.children.filterclear,filterApplyTemplate:n.column.children&&n.column.children.filterapply,filterIconTemplate:n.column.children&&n.column.children.filtericon,filterAddIconTemplate:n.column.children&&n.column.children.filteraddicon,filterRemoveIconTemplate:n.column.children&&n.column.children.filterremoveicon,filterClearIconTemplate:n.column.children&&n.column.children.filterclearicon,filters:n.filters,filtersStore:n.filtersStore,filterInputProps:n.filterInputProps,filterButtonProps:n.filterButtonProps,onFilterChange:e[1]||(e[1]=function(E){return t.$emit("filter-change",E)}),onFilterApply:e[2]||(e[2]=function(E){return t.$emit("filter-apply")}),filterMenuStyle:d.columnProp("filterMenuStyle"),filterMenuClass:d.columnProp("filterMenuClass"),showOperator:d.columnProp("showFilterOperator"),showClearButton:d.columnProp("showClearButton"),showApplyButton:d.columnProp("showApplyButton"),showMatchModes:d.columnProp("showFilterMatchModes"),showAddButton:d.columnProp("showAddButton"),matchModeOptions:d.columnProp("filterMatchModeOptions"),maxConstraints:d.columnProp("maxConstraints"),onOperatorChange:e[3]||(e[3]=function(E){return t.$emit("operator-change",E)}),onMatchmodeChange:e[4]||(e[4]=function(E){return t.$emit("matchmode-change",E)}),onConstraintAdd:e[5]||(e[5]=function(E){return t.$emit("constraint-add",E)}),onConstraintRemove:e[6]||(e[6]=function(E){return t.$emit("constraint-remove",E)}),onApplyClick:e[7]||(e[7]=function(E){return t.$emit("apply-click",E)}),column:n.column,unstyled:t.unstyled,pt:t.pt},null,8,["field","type","showMenu","filterElement","filterHeaderTemplate","filterFooterTemplate","filterClearTemplate","filterApplyTemplate","filterIconTemplate","filterAddIconTemplate","filterRemoveIconTemplate","filterClearIconTemplate","filters","filtersStore","filterInputProps","filterButtonProps","filterMenuStyle","filterMenuClass","showOperator","showClearButton","showApplyButton","showMatchModes","showAddButton","matchModeOptions","maxConstraints","column","unstyled","pt"])):Ct("",!0)],16)],16,kU)}$6.render=TU;var N6={name:"TableHeader",hostName:"DataTable",extends:mr,emits:["column-click","column-mousedown","column-dragstart","column-dragover","column-dragleave","column-drop","column-resizestart","checkbox-change","filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{columnGroup:{type:null,default:null},columns:{type:null,default:null},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},resizableColumns:{type:Boolean,default:!1},allRowsSelected:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},sortMode:{type:String,default:"single"},groupRowSortField:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},multiSortMeta:{type:Array,default:null},filterDisplay:{type:String,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},reorderableColumns:{type:Boolean,default:!1},first:{type:Number,default:0},filterInputProps:{type:null,default:null},filterButtonProps:{type:null,default:null}},provide:function(){return{$rows:this.d_headerRows,$columns:this.d_headerColumns}},data:function(){return{d_headerRows:new Sf({type:"Row"}),d_headerColumns:new Sf({type:"Column"})}},beforeUnmount:function(){this.d_headerRows.clear(),this.d_headerColumns.clear()},methods:{columnProp:function(e,n){return zc(e,n)},getColumnGroupPT:function(e){var n,l={props:this.getColumnGroupProps(),parent:{instance:this,props:this.$props,state:this.$data},context:{type:"header",scrollable:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.scrollable}};return ie(this.ptm("columnGroup.".concat(e),{columnGroup:l}),this.ptm("columnGroup.".concat(e),l),this.ptmo(this.getColumnGroupProps(),e,l))},getColumnGroupProps:function(){return this.columnGroup&&this.columnGroup.props&&this.columnGroup.props.pt?this.columnGroup.props.pt:void 0},getRowPT:function(e,n,l){var m={props:e.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:l}};return ie(this.ptm("row.".concat(n),{row:m}),this.ptm("row.".concat(n),m),this.ptmo(this.getRowProp(e),n,m))},getRowProp:function(e){return e.props&&e.props.pt?e.props.pt:void 0},getColumnPT:function(e,n,l){var m={props:e.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:l}};return ie(this.ptm("column.".concat(n),{column:m}),this.ptm("column.".concat(n),m),this.ptmo(this.getColumnProp(e),n,m))},getColumnProp:function(e){return e.props&&e.props.pt?e.props.pt:void 0},getFilterColumnHeaderClass:function(e){return[this.cx("headerCell",{column:e}),this.columnProp(e,"filterHeaderClass"),this.columnProp(e,"class")]},getFilterColumnHeaderStyle:function(e){return[this.columnProp(e,"filterHeaderStyle"),this.columnProp(e,"style")]},getHeaderRows:function(){var e;return(e=this.d_headerRows)===null||e===void 0?void 0:e.get(this.columnGroup,this.columnGroup.children)},getHeaderColumns:function(e){var n;return(n=this.d_headerColumns)===null||n===void 0?void 0:n.get(e,e.children)}},computed:{ptmTHeadOptions:function(){var e;return{context:{scrollable:(e=this.$parentInstance)===null||e===void 0||(e=e.$parentInstance)===null||e===void 0?void 0:e.scrollable}}}},components:{DTHeaderCell:$6,DTHeaderCheckbox:PS,DTColumnFilter:IS}};function $y(t){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$y(t)}function K4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function ef(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K4(Object(n),!0).forEach(function(l){EU(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function EU(t,e,n){return(e=IU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IU(t){var e=PU(t,"string");return $y(e)=="symbol"?e:e+""}function PU(t,e){if($y(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if($y(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AU(t,e,n,l,m,d){var x=wn("DTHeaderCell"),s=wn("DTHeaderCheckbox"),T=wn("DTColumnFilter");return X(),pe("thead",ie({class:t.cx("thead"),style:t.sx("thead"),role:"rowgroup"},n.columnGroup?ef(ef({},t.ptm("thead",d.ptmTHeadOptions)),d.getColumnGroupPT("root")):t.ptm("thead",d.ptmTHeadOptions),{"data-pc-section":"thead"}),[n.columnGroup?(X(!0),pe(an,{key:1},fr(d.getHeaderRows(),function(E,A){return X(),pe("tr",ie({key:A,role:"row",ref_for:!0},ef(ef({},t.ptm("headerRow")),d.getRowPT(E,"root",A))),[(X(!0),pe(an,null,fr(d.getHeaderColumns(E),function(z,j){return X(),pe(an,{key:d.columnProp(z,"columnKey")||d.columnProp(z,"field")||j},[!d.columnProp(z,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==d.columnProp(z,"field"))&&typeof z.children!="string"?(X(),bt(x,{key:0,column:z,onColumnClick:e[15]||(e[15]=function(U){return t.$emit("column-click",U)}),onColumnMousedown:e[16]||(e[16]=function(U){return t.$emit("column-mousedown",U)}),groupRowsBy:n.groupRowsBy,groupRowSortField:n.groupRowSortField,sortMode:n.sortMode,sortField:n.sortField,sortOrder:n.sortOrder,multiSortMeta:n.multiSortMeta,allRowsSelected:n.allRowsSelected,empty:n.empty,onCheckboxChange:e[17]||(e[17]=function(U){return t.$emit("checkbox-change",U)}),filters:n.filters,filterDisplay:n.filterDisplay,filtersStore:n.filtersStore,onFilterChange:e[18]||(e[18]=function(U){return t.$emit("filter-change",U)}),onFilterApply:e[19]||(e[19]=function(U){return t.$emit("filter-apply")}),onOperatorChange:e[20]||(e[20]=function(U){return t.$emit("operator-change",U)}),onMatchmodeChange:e[21]||(e[21]=function(U){return t.$emit("matchmode-change",U)}),onConstraintAdd:e[22]||(e[22]=function(U){return t.$emit("constraint-add",U)}),onConstraintRemove:e[23]||(e[23]=function(U){return t.$emit("constraint-remove",U)}),onApplyClick:e[24]||(e[24]=function(U){return t.$emit("apply-click",U)}),unstyled:t.unstyled,pt:t.pt},null,8,["column","groupRowsBy","groupRowSortField","sortMode","sortField","sortOrder","multiSortMeta","allRowsSelected","empty","filters","filterDisplay","filtersStore","unstyled","pt"])):Ct("",!0)],64)}),128))],16)}),128)):(X(),pe("tr",ie({key:0,role:"row"},t.ptm("headerRow")),[(X(!0),pe(an,null,fr(n.columns,function(E,A){return X(),pe(an,{key:d.columnProp(E,"columnKey")||d.columnProp(E,"field")||A},[!d.columnProp(E,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==d.columnProp(E,"field"))?(X(),bt(x,{key:0,column:E,index:A,onColumnClick:e[0]||(e[0]=function(z){return t.$emit("column-click",z)}),onColumnMousedown:e[1]||(e[1]=function(z){return t.$emit("column-mousedown",z)}),onColumnDragstart:e[2]||(e[2]=function(z){return t.$emit("column-dragstart",z)}),onColumnDragover:e[3]||(e[3]=function(z){return t.$emit("column-dragover",z)}),onColumnDragleave:e[4]||(e[4]=function(z){return t.$emit("column-dragleave",z)}),onColumnDrop:e[5]||(e[5]=function(z){return t.$emit("column-drop",z)}),groupRowsBy:n.groupRowsBy,groupRowSortField:n.groupRowSortField,reorderableColumns:n.reorderableColumns,resizableColumns:n.resizableColumns,onColumnResizestart:e[6]||(e[6]=function(z){return t.$emit("column-resizestart",z)}),sortMode:n.sortMode,sortField:n.sortField,sortOrder:n.sortOrder,multiSortMeta:n.multiSortMeta,allRowsSelected:n.allRowsSelected,empty:n.empty,onCheckboxChange:e[7]||(e[7]=function(z){return t.$emit("checkbox-change",z)}),filters:n.filters,filterDisplay:n.filterDisplay,filtersStore:n.filtersStore,filterInputProps:n.filterInputProps,filterButtonProps:n.filterButtonProps,first:n.first,onFilterChange:e[8]||(e[8]=function(z){return t.$emit("filter-change",z)}),onFilterApply:e[9]||(e[9]=function(z){return t.$emit("filter-apply")}),onOperatorChange:e[10]||(e[10]=function(z){return t.$emit("operator-change",z)}),onMatchmodeChange:e[11]||(e[11]=function(z){return t.$emit("matchmode-change",z)}),onConstraintAdd:e[12]||(e[12]=function(z){return t.$emit("constraint-add",z)}),onConstraintRemove:e[13]||(e[13]=function(z){return t.$emit("constraint-remove",z)}),onApplyClick:e[14]||(e[14]=function(z){return t.$emit("apply-click",z)}),unstyled:t.unstyled,pt:t.pt},null,8,["column","index","groupRowsBy","groupRowSortField","reorderableColumns","resizableColumns","sortMode","sortField","sortOrder","multiSortMeta","allRowsSelected","empty","filters","filterDisplay","filtersStore","filterInputProps","filterButtonProps","first","unstyled","pt"])):Ct("",!0)],64)}),128))],16)),n.filterDisplay==="row"?(X(),pe("tr",ie({key:2,role:"row"},t.ptm("headerRow")),[(X(!0),pe(an,null,fr(n.columns,function(E,A){return X(),pe(an,{key:d.columnProp(E,"columnKey")||d.columnProp(E,"field")||A},[!d.columnProp(E,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==d.columnProp(E,"field"))?(X(),pe("th",ie({key:0,style:d.getFilterColumnHeaderStyle(E),class:d.getFilterColumnHeaderClass(E),ref_for:!0},ef(ef({},d.getColumnPT(E,"root",A)),d.getColumnPT(E,"headerCell",A))),[d.columnProp(E,"selectionMode")==="multiple"?(X(),bt(s,{key:0,checked:n.allRowsSelected,disabled:n.empty,onChange:e[25]||(e[25]=function(z){return t.$emit("checkbox-change",z)}),column:E,unstyled:t.unstyled,pt:t.pt},null,8,["checked","disabled","column","unstyled","pt"])):Ct("",!0),E.children&&E.children.filter?(X(),bt(T,{key:1,field:d.columnProp(E,"filterField")||d.columnProp(E,"field"),type:d.columnProp(E,"dataType"),display:"row",showMenu:d.columnProp(E,"showFilterMenu"),filterElement:E.children&&E.children.filter,filterHeaderTemplate:E.children&&E.children.filterheader,filterFooterTemplate:E.children&&E.children.filterfooter,filterClearTemplate:E.children&&E.children.filterclear,filterApplyTemplate:E.children&&E.children.filterapply,filterIconTemplate:E.children&&E.children.filtericon,filterAddIconTemplate:E.children&&E.children.filteraddicon,filterRemoveIconTemplate:E.children&&E.children.filterremoveicon,filterClearIconTemplate:E.children&&E.children.filterclearicon,filters:n.filters,filtersStore:n.filtersStore,filterInputProps:n.filterInputProps,filterButtonProps:n.filterButtonProps,onFilterChange:e[26]||(e[26]=function(z){return t.$emit("filter-change",z)}),onFilterApply:e[27]||(e[27]=function(z){return t.$emit("filter-apply")}),filterMenuStyle:d.columnProp(E,"filterMenuStyle"),filterMenuClass:d.columnProp(E,"filterMenuClass"),showOperator:d.columnProp(E,"showFilterOperator"),showClearButton:d.columnProp(E,"showClearButton"),showApplyButton:d.columnProp(E,"showApplyButton"),showMatchModes:d.columnProp(E,"showFilterMatchModes"),showAddButton:d.columnProp(E,"showAddButton"),matchModeOptions:d.columnProp(E,"filterMatchModeOptions"),maxConstraints:d.columnProp(E,"maxConstraints"),onOperatorChange:e[28]||(e[28]=function(z){return t.$emit("operator-change",z)}),onMatchmodeChange:e[29]||(e[29]=function(z){return t.$emit("matchmode-change",z)}),onConstraintAdd:e[30]||(e[30]=function(z){return t.$emit("constraint-add",z)}),onConstraintRemove:e[31]||(e[31]=function(z){return t.$emit("constraint-remove",z)}),onApplyClick:e[32]||(e[32]=function(z){return t.$emit("apply-click",z)}),column:E,unstyled:t.unstyled,pt:t.pt},null,8,["field","type","showMenu","filterElement","filterHeaderTemplate","filterFooterTemplate","filterClearTemplate","filterApplyTemplate","filterIconTemplate","filterAddIconTemplate","filterRemoveIconTemplate","filterClearIconTemplate","filters","filtersStore","filterInputProps","filterButtonProps","filterMenuStyle","filterMenuClass","showOperator","showClearButton","showApplyButton","showMatchModes","showAddButton","matchModeOptions","maxConstraints","column","unstyled","pt"])):Ct("",!0)],16)):Ct("",!0)],64)}),128))],16)):Ct("",!0)],16)}N6.render=AU;function Ny(t){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(t)}var RU=["expanded"];function MU(t,e){if(t==null)return{};var n,l,m=DU(t,e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(l=0;l<d.length;l++)n=d[l],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(m[n]=t[n])}return m}function DU(t,e){if(t==null)return{};var n={};for(var l in t)if({}.hasOwnProperty.call(t,l)){if(e.includes(l))continue;n[l]=t[l]}return n}function Z4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function aa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z4(Object(n),!0).forEach(function(l){LU(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function LU(t,e,n){return(e=OU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OU(t){var e=zU(t,"string");return Ny(e)=="symbol"?e:e+""}function zU(t,e){if(Ny(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Ny(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X4(t,e){return $U(t)||FU(t,e)||AS(t,e)||BU()}function BU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FU(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var l,m,d,x,s=[],T=!0,E=!1;try{if(d=(n=n.call(t)).next,e!==0)for(;!(T=(l=d.call(n)).done)&&(s.push(l.value),s.length!==e);T=!0);}catch(A){E=!0,m=A}finally{try{if(!T&&n.return!=null&&(x=n.return(),Object(x)!==x))return}finally{if(E)throw m}}return s}}function $U(t){if(Array.isArray(t))return t}function Rg(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=AS(t))||e){n&&(t=n);var l=0,m=function(){};return{s:m,n:function(){return l>=t.length?{done:!0}:{done:!1,value:t[l++]}},e:function(E){throw E},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,x=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var E=n.next();return x=E.done,E},e:function(E){s=!0,d=E},f:function(){try{x||n.return==null||n.return()}finally{if(s)throw d}}}}function uo(t){return jU(t)||VU(t)||AS(t)||NU()}function NU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AS(t,e){if(t){if(typeof t=="string")return x2(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x2(t,e):void 0}}function VU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jU(t){if(Array.isArray(t))return x2(t)}function x2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}var Xs={name:"DataTable",extends:Aj,inheritAttrs:!1,emits:["value-change","update:first","update:rows","page","update:sortField","update:sortOrder","update:multiSortMeta","sort","filter","row-click","row-dblclick","update:selection","row-select","row-unselect","update:contextMenuSelection","row-contextmenu","row-unselect-all","row-select-all","select-all-change","column-resize-end","column-reorder","row-reorder","update:expandedRows","row-collapse","row-expand","update:expandedRowGroups","rowgroup-collapse","rowgroup-expand","update:filters","state-restore","state-save","cell-edit-init","cell-edit-complete","cell-edit-cancel","update:editingRows","row-edit-init","row-edit-save","row-edit-cancel"],provide:function(){return{$columns:this.d_columns,$columnGroups:this.d_columnGroups}},data:function(){return{d_first:this.first,d_rows:this.rows,d_sortField:this.sortField,d_sortOrder:this.sortOrder,d_nullSortOrder:this.nullSortOrder,d_multiSortMeta:this.multiSortMeta?uo(this.multiSortMeta):[],d_groupRowsSortMeta:null,d_selectionKeys:null,d_columnOrder:null,d_editingRowKeys:null,d_editingMeta:{},d_filters:this.cloneFilters(this.filters),d_columns:new Sf({type:"Column"}),d_columnGroups:new Sf({type:"ColumnGroup"})}},rowTouched:!1,anchorRowIndex:null,rangeRowIndex:null,documentColumnResizeListener:null,documentColumnResizeEndListener:null,lastResizeHelperX:null,resizeColumnElement:null,columnResizing:!1,colReorderIconWidth:null,colReorderIconHeight:null,draggedColumn:null,draggedColumnElement:null,draggedRowIndex:null,droppedRowIndex:null,rowDragging:null,columnWidthsState:null,tableWidthState:null,columnWidthsRestored:!1,watch:{first:function(e){this.d_first=e},rows:function(e){this.d_rows=e},sortField:function(e){this.d_sortField=e},sortOrder:function(e){this.d_sortOrder=e},nullSortOrder:function(e){this.d_nullSortOrder=e},multiSortMeta:function(e){this.d_multiSortMeta=e},selection:{immediate:!0,handler:function(e){this.dataKey&&this.updateSelectionKeys(e)}},editingRows:{immediate:!0,handler:function(e){this.dataKey&&this.updateEditingRowKeys(e)}},filters:{deep:!0,handler:function(e){this.d_filters=this.cloneFilters(e)}}},mounted:function(){this.isStateful()&&(this.restoreState(),this.resizableColumns&&this.restoreColumnWidths()),this.editMode==="row"&&this.dataKey&&!this.d_editingRowKeys&&this.updateEditingRowKeys(this.editingRows)},beforeUnmount:function(){this.unbindColumnResizeEvents(),this.destroyStyleElement(),this.d_columns.clear(),this.d_columnGroups.clear()},updated:function(){this.isStateful()&&this.saveState(),this.editMode==="row"&&this.dataKey&&!this.d_editingRowKeys&&this.updateEditingRowKeys(this.editingRows)},methods:{columnProp:function(e,n){return zc(e,n)},onPage:function(e){var n=this;this.clearEditingMetaData(),this.d_first=e.first,this.d_rows=e.rows;var l=this.createLazyLoadEvent(e);l.pageCount=e.pageCount,l.page=e.page,this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",l),this.$nextTick(function(){n.$emit("value-change",n.processedData)})},onColumnHeaderClick:function(e){var n=this,l=e.originalEvent,m=e.column;if(this.columnProp(m,"sortable")){var d=l.target,x=this.columnProp(m,"sortField")||this.columnProp(m,"field");if(Ci(d,"data-p-sortable-column")===!0||Ci(d,"data-pc-section")==="columntitle"||Ci(d,"data-pc-section")==="columnheadercontent"||Ci(d,"data-pc-section")==="sorticon"||Ci(d.parentElement,"data-pc-section")==="sorticon"||Ci(d.parentElement.parentElement,"data-pc-section")==="sorticon"||d.closest('[data-p-sortable-column="true"]')&&!d.closest('[data-pc-section="columnfilterbutton"]')&&!pw(l.target)){if(Rb(),this.sortMode==="single")this.d_sortField===x?this.removableSort&&this.d_sortOrder*-1===this.defaultSortOrder?(this.d_sortOrder=null,this.d_sortField=null):this.d_sortOrder=this.d_sortOrder*-1:(this.d_sortOrder=this.defaultSortOrder,this.d_sortField=x),this.$emit("update:sortField",this.d_sortField),this.$emit("update:sortOrder",this.d_sortOrder),this.resetPage();else if(this.sortMode==="multiple"){var s=l.metaKey||l.ctrlKey;s||(this.d_multiSortMeta=this.d_multiSortMeta.filter(function(T){return T.field===x})),this.addMultiSortField(x),this.$emit("update:multiSortMeta",this.d_multiSortMeta)}this.$emit("sort",this.createLazyLoadEvent(l)),this.$nextTick(function(){n.$emit("value-change",n.processedData)})}}},sortSingle:function(e){var n=this;if(this.clearEditingMetaData(),this.groupRowsBy&&this.groupRowsBy===this.sortField)return this.d_multiSortMeta=[{field:this.sortField,order:this.sortOrder||this.defaultSortOrder},{field:this.d_sortField,order:this.d_sortOrder}],this.sortMultiple(e);var l=uo(e),m=new Map,d=Rg(l),x;try{for(d.s();!(x=d.n()).done;){var s=x.value;m.set(s,wi(s,this.d_sortField))}}catch(E){d.e(E)}finally{d.f()}var T=t2();return l.sort(function(E,A){var z=m.get(E),j=m.get(A);return W5(z,j,n.d_sortOrder,T,n.d_nullSortOrder)}),l},sortMultiple:function(e){var n=this;if(this.clearEditingMetaData(),this.groupRowsBy&&(this.d_groupRowsSortMeta||this.d_multiSortMeta.length&&this.groupRowsBy===this.d_multiSortMeta[0].field)){var l=this.d_multiSortMeta[0];!this.d_groupRowsSortMeta&&(this.d_groupRowsSortMeta=l),l.field!==this.d_groupRowsSortMeta.field&&(this.d_multiSortMeta=[this.d_groupRowsSortMeta].concat(uo(this.d_multiSortMeta)))}var m=uo(e);return m.sort(function(d,x){return n.multisortField(d,x,0)}),m},multisortField:function(e,n,l){var m=wi(e,this.d_multiSortMeta[l].field),d=wi(n,this.d_multiSortMeta[l].field),x=t2();return m===d?this.d_multiSortMeta.length-1>l?this.multisortField(e,n,l+1):0:W5(m,d,this.d_multiSortMeta[l].order,x,this.d_nullSortOrder)},addMultiSortField:function(e){var n=this.d_multiSortMeta.findIndex(function(l){return l.field===e});n>=0?this.removableSort&&this.d_multiSortMeta[n].order*-1===this.defaultSortOrder?this.d_multiSortMeta.splice(n,1):this.d_multiSortMeta[n]={field:e,order:this.d_multiSortMeta[n].order*-1}:this.d_multiSortMeta.push({field:e,order:this.defaultSortOrder}),this.d_multiSortMeta=uo(this.d_multiSortMeta)},getActiveFilters:function(e){var n=function(x){var s=X4(x,2),T=s[0],E=s[1];if(E.constraints){var A=E.constraints.filter(function(z){return z.value!==null});if(A.length>0)return[T,aa(aa({},E),{},{constraints:A})]}else if(E.value!==null)return[T,E]},l=function(x){return x!==void 0},m=Object.entries(e).map(n).filter(l);return Object.fromEntries(m)},filter:function(e){var n=this;if(e){this.clearEditingMetaData();var l=this.getActiveFilters(this.filters),m;l.global&&(m=this.globalFilterFields||this.columns.map(function(re){return n.columnProp(re,"filterField")||n.columnProp(re,"field")}));for(var d=[],x=0;x<e.length;x++){var s=!0,T=!1,E=!1;for(var A in l)if(Object.prototype.hasOwnProperty.call(l,A)&&A!=="global"){E=!0;var z=A,j=l[z];if(j.operator){var U=Rg(j.constraints),K;try{for(U.s();!(K=U.n()).done;){var oe=K.value;if(s=this.executeLocalFilter(z,e[x],oe),j.operator===h_.OR&&s||j.operator===h_.AND&&!s)break}}catch(re){U.e(re)}finally{U.f()}}else s=this.executeLocalFilter(z,e[x],j);if(!s)break}if(s&&l.global&&!T&&m)for(var fe=0;fe<m.length;fe++){var me=m[fe];if(T=f2.filters[l.global.matchMode||es.CONTAINS](wi(e[x],me),l.global.value,this.filterLocale),T)break}var ne=void 0;l.global?ne=E?E&&s&&T:T:ne=E&&s,ne&&d.push(e[x])}(d.length===this.value.length||Object.keys(l).length==0)&&(d=e);var te=this.createLazyLoadEvent();return te.filteredValue=d,this.$emit("filter",te),this.$nextTick(function(){n.$emit("value-change",n.processedData)}),d}},executeLocalFilter:function(e,n,l){var m=l.value,d=l.matchMode||es.STARTS_WITH,x=wi(n,e),s=f2.filters[d];return s(x,m,this.filterLocale)},onRowClick:function(e){var n=e.originalEvent,l=this.$refs.bodyRef&&this.$refs.bodyRef.$el,m=yo(l,'tr[data-p-selectable-row="true"][tabindex="0"]');if(!pw(n.target)){if(this.$emit("row-click",e),this.selectionMode){var d=e.data,x=this.d_first+e.index;if(this.isMultipleSelectionMode()&&n.shiftKey&&this.anchorRowIndex!=null)Rb(),this.rangeRowIndex=x,this.selectRange(n);else{var s=this.isSelected(d),T=this.rowTouched?!1:this.metaKeySelection;if(this.anchorRowIndex=x,this.rangeRowIndex=x,T){var E=n.metaKey||n.ctrlKey;if(s&&E){if(this.isSingleSelectionMode())this.$emit("update:selection",null);else{var A=this.findIndexInSelection(d),z=this.selection.filter(function(te,re){return re!=A});this.$emit("update:selection",z)}this.$emit("row-unselect",{originalEvent:n,data:d,index:x,type:"row"})}else{if(this.isSingleSelectionMode())this.$emit("update:selection",d);else if(this.isMultipleSelectionMode()){var j=E?this.selection||[]:[];j=[].concat(uo(j),[d]),this.$emit("update:selection",j)}this.$emit("row-select",{originalEvent:n,data:d,index:x,type:"row"})}}else if(this.selectionMode==="single")s?(this.$emit("update:selection",null),this.$emit("row-unselect",{originalEvent:n,data:d,index:x,type:"row"})):(this.$emit("update:selection",d),this.$emit("row-select",{originalEvent:n,data:d,index:x,type:"row"}));else if(this.selectionMode==="multiple")if(s){var U=this.findIndexInSelection(d),K=this.selection.filter(function(te,re){return re!=U});this.$emit("update:selection",K),this.$emit("row-unselect",{originalEvent:n,data:d,index:x,type:"row"})}else{var oe=this.selection?[].concat(uo(this.selection),[d]):[d];this.$emit("update:selection",oe),this.$emit("row-select",{originalEvent:n,data:d,index:x,type:"row"})}}}if(this.rowTouched=!1,m){var fe,me;if(((fe=n.target)===null||fe===void 0?void 0:fe.getAttribute("data-pc-section"))==="rowtoggleicon")return;var ne=(me=n.currentTarget)===null||me===void 0?void 0:me.closest('tr[data-p-selectable-row="true"]');m.tabIndex="-1",ne&&(ne.tabIndex="0")}}},onRowDblClick:function(e){var n=e.originalEvent;pw(n.target)||this.$emit("row-dblclick",e)},onRowRightClick:function(e){this.contextMenu&&(Rb(),e.originalEvent.target.focus()),this.$emit("update:contextMenuSelection",e.data),this.$emit("row-contextmenu",e)},onRowTouchEnd:function(){this.rowTouched=!0},onRowKeyDown:function(e,n){var l=e.originalEvent,m=e.data,d=e.index,x=l.metaKey||l.ctrlKey;if(this.selectionMode){var s=l.target;switch(l.code){case"ArrowDown":this.onArrowDownKey(l,s,d,n);break;case"ArrowUp":this.onArrowUpKey(l,s,d,n);break;case"Home":this.onHomeKey(l,s,d,n);break;case"End":this.onEndKey(l,s,d,n);break;case"Enter":case"NumpadEnter":this.onEnterKey(l,m,d);break;case"Space":this.onSpaceKey(l,m,d,n);break;case"Tab":this.onTabKey(l,d);break;default:if(l.code==="KeyA"&&x&&this.isMultipleSelectionMode()){var T=this.dataToRender(n.rows);this.$emit("update:selection",T)}l.preventDefault();break}}},onArrowDownKey:function(e,n,l,m){var d=this.findNextSelectableRow(n);if(d&&this.focusRowChange(n,d),e.shiftKey){var x=this.dataToRender(m.rows),s=l+1>=x.length?x.length-1:l+1;this.onRowClick({originalEvent:e,data:x[s],index:s})}e.preventDefault()},onArrowUpKey:function(e,n,l,m){var d=this.findPrevSelectableRow(n);if(d&&this.focusRowChange(n,d),e.shiftKey){var x=this.dataToRender(m.rows),s=l-1<=0?0:l-1;this.onRowClick({originalEvent:e,data:x[s],index:s})}e.preventDefault()},onHomeKey:function(e,n,l,m){var d=this.findFirstSelectableRow();if(d&&this.focusRowChange(n,d),e.ctrlKey&&e.shiftKey){var x=this.dataToRender(m.rows);this.$emit("update:selection",x.slice(0,l+1))}e.preventDefault()},onEndKey:function(e,n,l,m){var d=this.findLastSelectableRow();if(d&&this.focusRowChange(n,d),e.ctrlKey&&e.shiftKey){var x=this.dataToRender(m.rows);this.$emit("update:selection",x.slice(l,x.length))}e.preventDefault()},onEnterKey:function(e,n,l){this.onRowClick({originalEvent:e,data:n,index:l}),e.preventDefault()},onSpaceKey:function(e,n,l,m){if(this.onEnterKey(e,n,l),e.shiftKey&&this.selection!==null){var d=this.dataToRender(m.rows),x;if(this.selection.length>0){var s,T;s=fw(this.selection[0],d),T=fw(this.selection[this.selection.length-1],d),x=l<=s?T:s}else x=fw(this.selection,d);var E=x!==l?d.slice(Math.min(x,l),Math.max(x,l)+1):n;this.$emit("update:selection",E)}},onTabKey:function(e,n){var l=this.$refs.bodyRef&&this.$refs.bodyRef.$el,m=la(l,'tr[data-p-selectable-row="true"]');if(e.code==="Tab"&&m&&m.length>0){var d=yo(l,'tr[data-p-selected="true"]'),x=yo(l,'tr[data-p-selectable-row="true"][tabindex="0"]');d?(d.tabIndex="0",x&&x!==d&&(x.tabIndex="-1")):(m[0].tabIndex="0",x!==m[0]&&(m[n].tabIndex="-1"))}},findNextSelectableRow:function(e){var n=e.nextElementSibling;return n?Ci(n,"data-p-selectable-row")===!0?n:this.findNextSelectableRow(n):null},findPrevSelectableRow:function(e){var n=e.previousElementSibling;return n?Ci(n,"data-p-selectable-row")===!0?n:this.findPrevSelectableRow(n):null},findFirstSelectableRow:function(){var e=yo(this.$refs.table,'tr[data-p-selectable-row="true"]');return e},findLastSelectableRow:function(){var e=la(this.$refs.table,'tr[data-p-selectable-row="true"]');return e?e[e.length-1]:null},focusRowChange:function(e,n){e.tabIndex="-1",n.tabIndex="0",Ro(n)},toggleRowWithRadio:function(e){var n=e.data;this.isSelected(n)?(this.$emit("update:selection",null),this.$emit("row-unselect",{originalEvent:e.originalEvent,data:n,index:e.index,type:"radiobutton"})):(this.$emit("update:selection",n),this.$emit("row-select",{originalEvent:e.originalEvent,data:n,index:e.index,type:"radiobutton"}))},toggleRowWithCheckbox:function(e){var n=e.data;if(this.isSelected(n)){var l=this.findIndexInSelection(n),m=this.selection.filter(function(x,s){return s!=l});this.$emit("update:selection",m),this.$emit("row-unselect",{originalEvent:e.originalEvent,data:n,index:e.index,type:"checkbox"})}else{var d=this.selection?uo(this.selection):[];d=[].concat(uo(d),[n]),this.$emit("update:selection",d),this.$emit("row-select",{originalEvent:e.originalEvent,data:n,index:e.index,type:"checkbox"})}},toggleRowsWithCheckbox:function(e){if(this.selectAll!==null)this.$emit("select-all-change",e);else{var n=e.originalEvent,l=e.checked,m=[];l?(m=this.frozenValue?[].concat(uo(this.frozenValue),uo(this.processedData)):this.processedData,this.$emit("row-select-all",{originalEvent:n,data:m})):this.$emit("row-unselect-all",{originalEvent:n}),this.$emit("update:selection",m)}},isSingleSelectionMode:function(){return this.selectionMode==="single"},isMultipleSelectionMode:function(){return this.selectionMode==="multiple"},isSelected:function(e){return e&&this.selection?this.dataKey?this.d_selectionKeys?this.d_selectionKeys[wi(e,this.dataKey)]!==void 0:!1:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection):!1},findIndexInSelection:function(e){return this.findIndex(e,this.selection)},findIndex:function(e,n){var l=-1;if(n&&n.length){for(var m=0;m<n.length;m++)if(this.equals(e,n[m])){l=m;break}}return l},updateSelectionKeys:function(e){if(this.d_selectionKeys={},Array.isArray(e)){var n=Rg(e),l;try{for(n.s();!(l=n.n()).done;){var m=l.value;this.d_selectionKeys[String(wi(m,this.dataKey))]=1}}catch(d){n.e(d)}finally{n.f()}}else this.d_selectionKeys[String(wi(e,this.dataKey))]=1},updateEditingRowKeys:function(e){if(e&&e.length){this.d_editingRowKeys={};var n=Rg(e),l;try{for(n.s();!(l=n.n()).done;){var m=l.value;this.d_editingRowKeys[String(wi(m,this.dataKey))]=1}}catch(d){n.e(d)}finally{n.f()}}else this.d_editingRowKeys=null},equals:function(e,n){return this.compareSelectionBy==="equals"?e===n:$c(e,n,this.dataKey)},selectRange:function(e){var n,l;this.rangeRowIndex>this.anchorRowIndex?(n=this.anchorRowIndex,l=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(n=this.rangeRowIndex,l=this.anchorRowIndex):(n=this.rangeRowIndex,l=this.rangeRowIndex),this.lazy&&this.paginator&&(n-=this.first,l-=this.first);for(var m=this.processedData,d=[],x=n;x<=l;x++){var s=m[x];d.push(s),this.$emit("row-select",{originalEvent:e,data:s,type:"row"})}this.$emit("update:selection",d)},exportCSV:function(e,n){var l=this,m="\uFEFF";n||(n=this.processedData,e&&e.selectionOnly?n=this.selection||[]:this.frozenValue&&(n=n?[].concat(uo(this.frozenValue),uo(n)):this.frozenValue));for(var d=!1,x=0;x<this.columns.length;x++){var s=this.columns[x];this.columnProp(s,"exportable")!==!1&&this.columnProp(s,"field")&&(d?m+=this.csvSeparator:d=!0,m+='"'+(this.columnProp(s,"exportHeader")||this.columnProp(s,"header")||this.columnProp(s,"field"))+'"')}n&&n.forEach(function(z){m+=`
`;for(var j=!1,U=0;U<l.columns.length;U++){var K=l.columns[U];if(l.columnProp(K,"exportable")!==!1&&l.columnProp(K,"field")){j?m+=l.csvSeparator:j=!0;var oe=wi(z,l.columnProp(K,"field"));oe!=null?l.exportFunction?oe=l.exportFunction({data:oe,field:l.columnProp(K,"field")}):oe=String(oe).replace(/"/g,'""'):oe="",m+='"'+oe+'"'}}});for(var T=!1,E=0;E<this.columns.length;E++){var A=this.columns[E];E===0&&(m+=`
`),this.columnProp(A,"exportable")!==!1&&this.columnProp(A,"exportFooter")&&(T?m+=this.csvSeparator:T=!0,m+='"'+(this.columnProp(A,"exportFooter")||this.columnProp(A,"footer")||this.columnProp(A,"field"))+'"')}qz(m,this.exportFilename)},resetPage:function(){this.d_first=0,this.$emit("update:first",this.d_first)},onColumnResizeStart:function(e){var n=Ea(this.$el).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizeHelperX=e.pageX-n+this.$el.scrollLeft,this.bindColumnResizeEvents()},onColumnResize:function(e){var n=Ea(this.$el).left;this.$el.setAttribute("data-p-unselectable-text","true"),!this.isUnstyled&&Sh(this.$el,{"user-select":"none"}),this.$refs.resizeHelper.style.height=this.$el.offsetHeight+"px",this.$refs.resizeHelper.style.top="0px",this.$refs.resizeHelper.style.left=e.pageX-n+this.$el.scrollLeft+"px",this.$refs.resizeHelper.style.display="block"},onColumnResizeEnd:function(){var e=fy(this.$el)?this.lastResizeHelperX-this.$refs.resizeHelper.offsetLeft:this.$refs.resizeHelper.offsetLeft-this.lastResizeHelperX,n=this.resizeColumnElement.offsetWidth,l=n+e,m=this.resizeColumnElement.style.minWidth||15;if(n+e>parseInt(m,10)){if(this.columnResizeMode==="fit"){var d=this.resizeColumnElement.nextElementSibling,x=d.offsetWidth-e;l>15&&x>15&&this.resizeTableCells(l,x)}else if(this.columnResizeMode==="expand"){var s=this.$refs.table.offsetWidth+e+"px",T=function(j){j&&(j.style.width=j.style.minWidth=s)};if(this.resizeTableCells(l),T(this.$refs.table),!this.virtualScrollerDisabled){var E=this.$refs.bodyRef&&this.$refs.bodyRef.$el,A=this.$refs.frozenBodyRef&&this.$refs.frozenBodyRef.$el;T(E),T(A)}}this.$emit("column-resize-end",{element:this.resizeColumnElement,delta:e})}this.$refs.resizeHelper.style.display="none",this.resizeColumn=null,this.$el.removeAttribute("data-p-unselectable-text"),!this.isUnstyled&&(this.$el.style["user-select"]=""),this.unbindColumnResizeEvents(),this.isStateful()&&this.saveState()},resizeTableCells:function(e,n){var l=Dc(this.resizeColumnElement),m=[],d=la(this.$refs.table,'thead[data-pc-section="thead"] > tr > th');d.forEach(function(T){return m.push(So(T))}),this.destroyStyleElement(),this.createStyleElement();var x="",s='[data-pc-name="datatable"]['.concat(this.$attrSelector,'] > [data-pc-section="tablecontainer"] ').concat(this.virtualScrollerDisabled?"":'> [data-pc-name="virtualscroller"]',' > table[data-pc-section="table"]');m.forEach(function(T,E){var A=E===l?e:n&&E===l+1?n:T,z="width: ".concat(A,"px !important; max-width: ").concat(A,"px !important");x+=`
                    `.concat(s,' > thead[data-pc-section="thead"] > tr > th:nth-child(').concat(E+1,`),
                    `).concat(s,' > tbody[data-pc-section="tbody"] > tr > td:nth-child(').concat(E+1,`),
                    `).concat(s,' > tfoot[data-pc-section="tfoot"] > tr > td:nth-child(').concat(E+1,`) {
                        `).concat(z,`
                    }
                `)}),this.styleElement.innerHTML=x},bindColumnResizeEvents:function(){var e=this;this.documentColumnResizeListener||(this.documentColumnResizeListener=document.addEventListener("mousemove",function(){e.columnResizing&&e.onColumnResize(event)})),this.documentColumnResizeEndListener||(this.documentColumnResizeEndListener=document.addEventListener("mouseup",function(){e.columnResizing&&(e.columnResizing=!1,e.onColumnResizeEnd())}))},unbindColumnResizeEvents:function(){this.documentColumnResizeListener&&(document.removeEventListener("document",this.documentColumnResizeListener),this.documentColumnResizeListener=null),this.documentColumnResizeEndListener&&(document.removeEventListener("document",this.documentColumnResizeEndListener),this.documentColumnResizeEndListener=null)},onColumnHeaderMouseDown:function(e){var n=e.originalEvent,l=e.column;this.reorderableColumns&&this.columnProp(l,"reorderableColumn")!==!1&&(n.target.nodeName==="INPUT"||n.target.nodeName==="TEXTAREA"||Ci(n.target,'[data-pc-section="columnresizer"]')?n.currentTarget.draggable=!1:n.currentTarget.draggable=!0)},onColumnHeaderDragStart:function(e){var n=e.originalEvent,l=e.column;if(this.columnResizing){n.preventDefault();return}this.colReorderIconWidth=Gz(this.$refs.reorderIndicatorUp),this.colReorderIconHeight=Hz(this.$refs.reorderIndicatorUp),this.draggedColumn=l,this.draggedColumnElement=this.findParentHeader(n.target),n.dataTransfer.setData("text","b")},onColumnHeaderDragOver:function(e){var n=e.originalEvent,l=e.column,m=this.findParentHeader(n.target);if(this.reorderableColumns&&this.draggedColumnElement&&m&&!this.columnProp(l,"frozen")){n.preventDefault();var d=Ea(this.$el),x=Ea(m);if(this.draggedColumnElement!==m){var s=x.left-d.left,T=x.left+m.offsetWidth/2;this.$refs.reorderIndicatorUp.style.top=x.top-d.top-(this.colReorderIconHeight-1)+"px",this.$refs.reorderIndicatorDown.style.top=x.top-d.top+m.offsetHeight+"px",n.pageX>T?(this.$refs.reorderIndicatorUp.style.left=s+m.offsetWidth-Math.ceil(this.colReorderIconWidth/2)+"px",this.$refs.reorderIndicatorDown.style.left=s+m.offsetWidth-Math.ceil(this.colReorderIconWidth/2)+"px",this.dropPosition=1):(this.$refs.reorderIndicatorUp.style.left=s-Math.ceil(this.colReorderIconWidth/2)+"px",this.$refs.reorderIndicatorDown.style.left=s-Math.ceil(this.colReorderIconWidth/2)+"px",this.dropPosition=-1),this.$refs.reorderIndicatorUp.style.display="block",this.$refs.reorderIndicatorDown.style.display="block"}}},onColumnHeaderDragLeave:function(e){var n=e.originalEvent;this.reorderableColumns&&this.draggedColumnElement&&(n.preventDefault(),this.$refs.reorderIndicatorUp.style.display="none",this.$refs.reorderIndicatorDown.style.display="none")},onColumnHeaderDrop:function(e){var n=this,l=e.originalEvent,m=e.column;if(l.preventDefault(),this.draggedColumnElement){var d=Dc(this.draggedColumnElement),x=Dc(this.findParentHeader(l.target)),s=d!==x;if(s&&(x-d===1&&this.dropPosition===-1||x-d===-1&&this.dropPosition===1)&&(s=!1),s){var T=function(me,ne){return n.columnProp(me,"columnKey")||n.columnProp(ne,"columnKey")?n.columnProp(me,"columnKey")===n.columnProp(ne,"columnKey"):n.columnProp(me,"field")===n.columnProp(ne,"field")},E=this.columns.findIndex(function(fe){return T(fe,n.draggedColumn)}),A=this.columns.findIndex(function(fe){return T(fe,m)}),z=[],j=la(this.$el,'thead[data-pc-section="thead"] > tr > th');j.forEach(function(fe){return z.push(So(fe))});var U=z.find(function(fe,me){return me===E}),K=z.filter(function(fe,me){return me!==E}),oe=[].concat(uo(K.slice(0,A)),[U],uo(K.slice(A)));this.addColumnWidthStyles(oe),A<E&&this.dropPosition===1&&A++,A>E&&this.dropPosition===-1&&A--,G5(this.columns,E,A),this.updateReorderableColumns(),this.$emit("column-reorder",{originalEvent:l,dragIndex:E,dropIndex:A})}this.$refs.reorderIndicatorUp.style.display="none",this.$refs.reorderIndicatorDown.style.display="none",this.draggedColumnElement.draggable=!1,this.draggedColumnElement=null,this.draggedColumn=null,this.dropPosition=null}},findParentHeader:function(e){if(e.nodeName==="TH")return e;for(var n=e.parentElement;n.nodeName!=="TH"&&(n=n.parentElement,!!n););return n},findColumnByKey:function(e,n){if(e&&e.length)for(var l=0;l<e.length;l++){var m=e[l];if(this.columnProp(m,"columnKey")===n||this.columnProp(m,"field")===n)return m}return null},onRowMouseDown:function(e){Ci(e.target,"data-pc-section")==="reorderablerowhandle"||Ci(e.target.parentElement,"data-pc-section")==="reorderablerowhandle"?e.currentTarget.draggable=!0:e.currentTarget.draggable=!1},onRowDragStart:function(e){var n=e.originalEvent,l=e.index;this.rowDragging=!0,this.draggedRowIndex=l,n.dataTransfer.setData("text","b")},onRowDragOver:function(e){var n=e.originalEvent,l=e.index;if(this.rowDragging&&this.draggedRowIndex!==l){var m=n.currentTarget,d=Ea(m).top,x=n.pageY,s=d+jl(m)/2,T=m.previousElementSibling;x<s?(m.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&Rc(m,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=l,T?(T.setAttribute("data-p-datatable-dragpoint-bottom","true"),!this.isUnstyled&&Lc(T,"p-datatable-dragpoint-bottom")):(m.setAttribute("data-p-datatable-dragpoint-top","true"),!this.isUnstyled&&Lc(m,"p-datatable-dragpoint-top"))):(T?(T.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&Rc(T,"p-datatable-dragpoint-bottom")):(m.setAttribute("data-p-datatable-dragpoint-top","true"),!this.isUnstyled&&Lc(m,"p-datatable-dragpoint-top")),this.droppedRowIndex=l+1,m.setAttribute("data-p-datatable-dragpoint-bottom","true"),!this.isUnstyled&&Lc(m,"p-datatable-dragpoint-bottom")),n.preventDefault()}},onRowDragLeave:function(e){var n=e.currentTarget,l=n.previousElementSibling;l&&(l.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&Rc(l,"p-datatable-dragpoint-bottom")),n.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&Rc(n,"p-datatable-dragpoint-bottom"),n.setAttribute("data-p-datatable-dragpoint-top","false"),!this.isUnstyled&&Rc(n,"p-datatable-dragpoint-top")},onRowDragEnd:function(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null,e.currentTarget.draggable=!1},onRowDrop:function(e){if(this.droppedRowIndex!=null){var n=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:this.droppedRowIndex===0?0:this.droppedRowIndex-1,l=uo(this.processedData);G5(l,this.draggedRowIndex+this.d_first,n+this.d_first),this.$emit("row-reorder",{originalEvent:e,dragIndex:this.draggedRowIndex,dropIndex:n,value:l})}this.onRowDragLeave(e),this.onRowDragEnd(e),e.preventDefault()},toggleRow:function(e){var n=this,l=e.expanded,m=MU(e,RU),d=e.data,x;if(this.dataKey){var s=wi(d,this.dataKey);x=this.expandedRows?aa({},this.expandedRows):{},l?x[s]=!0:delete x[s]}else x=this.expandedRows?uo(this.expandedRows):[],l?x.push(d):x=x.filter(function(T){return!n.equals(d,T)});this.$emit("update:expandedRows",x),l?this.$emit("row-expand",m):this.$emit("row-collapse",m)},toggleRowGroup:function(e){var n=e.originalEvent,l=e.data,m=wi(l,this.groupRowsBy),d=this.expandedRowGroups?uo(this.expandedRowGroups):[];this.isRowGroupExpanded(l)?(d=d.filter(function(x){return x!==m}),this.$emit("update:expandedRowGroups",d),this.$emit("rowgroup-collapse",{originalEvent:n,data:m})):(d.push(m),this.$emit("update:expandedRowGroups",d),this.$emit("rowgroup-expand",{originalEvent:n,data:m}))},isRowGroupExpanded:function(e){if(this.expandableRowGroups&&this.expandedRowGroups){var n=wi(e,this.groupRowsBy);return this.expandedRowGroups.indexOf(n)>-1}return!1},isStateful:function(){return this.stateKey!=null},getStorage:function(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}},saveState:function(){var e=this.getStorage(),n={};this.paginator&&(n.first=this.d_first,n.rows=this.d_rows),this.d_sortField&&(n.sortField=this.d_sortField,n.sortOrder=this.d_sortOrder),this.d_multiSortMeta&&(n.multiSortMeta=this.d_multiSortMeta),this.hasFilters&&(n.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(n),this.reorderableColumns&&(n.columnOrder=this.d_columnOrder),this.expandedRows&&(n.expandedRows=this.expandedRows),this.expandedRowGroups&&(n.expandedRowGroups=this.expandedRowGroups),this.selection&&(n.selection=this.selection,n.selectionKeys=this.d_selectionKeys),Object.keys(n).length&&e.setItem(this.stateKey,JSON.stringify(n)),this.$emit("state-save",n)},restoreState:function(){var e=this.getStorage(),n=e.getItem(this.stateKey),l=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,m=function(s,T){return typeof T=="string"&&l.test(T)?new Date(T):T};if(n){var d=JSON.parse(n,m);this.paginator&&(this.d_first=d.first,this.d_rows=d.rows),d.sortField&&(this.d_sortField=d.sortField,this.d_sortOrder=d.sortOrder),d.multiSortMeta&&(this.d_multiSortMeta=d.multiSortMeta),d.filters&&this.$emit("update:filters",d.filters),this.resizableColumns&&(this.columnWidthsState=d.columnWidths,this.tableWidthState=d.tableWidth),this.reorderableColumns&&(this.d_columnOrder=d.columnOrder),d.expandedRows&&this.$emit("update:expandedRows",d.expandedRows),d.expandedRowGroups&&this.$emit("update:expandedRowGroups",d.expandedRowGroups),d.selection&&(this.d_selectionKeys=d.d_selectionKeys,this.$emit("update:selection",d.selection)),this.$emit("state-restore",d)}},saveColumnWidths:function(e){var n=[],l=la(this.$el,'thead[data-pc-section="thead"] > tr > th');l.forEach(function(m){return n.push(So(m))}),e.columnWidths=n.join(","),this.columnResizeMode==="expand"&&(e.tableWidth=So(this.$refs.table)+"px")},addColumnWidthStyles:function(e){this.createStyleElement();var n="",l='[data-pc-name="datatable"]['.concat(this.$attrSelector,'] > [data-pc-section="tablecontainer"] ').concat(this.virtualScrollerDisabled?"":'> [data-pc-name="virtualscroller"]',' > table[data-pc-section="table"]');e.forEach(function(m,d){var x="width: ".concat(m,"px !important; max-width: ").concat(m,"px !important");n+=`
        `.concat(l,' > thead[data-pc-section="thead"] > tr > th:nth-child(').concat(d+1,`),
        `).concat(l,' > tbody[data-pc-section="tbody"] > tr > td:nth-child(').concat(d+1,`),
        `).concat(l,' > tfoot[data-pc-section="tfoot"] > tr > td:nth-child(').concat(d+1,`) {
            `).concat(x,`
        }
    `)}),this.styleElement.innerHTML=n},restoreColumnWidths:function(){if(this.columnWidthsState){var e=this.columnWidthsState.split(",");this.columnResizeMode==="expand"&&this.tableWidthState&&(this.$refs.table.style.width=this.tableWidthState,this.$refs.table.style.minWidth=this.tableWidthState),Zr(e)&&this.addColumnWidthStyles(e)}},onCellEditInit:function(e){this.$emit("cell-edit-init",e)},onCellEditComplete:function(e){this.$emit("cell-edit-complete",e)},onCellEditCancel:function(e){this.$emit("cell-edit-cancel",e)},onRowEditInit:function(e){var n=this.editingRows?uo(this.editingRows):[];n.push(e.data),this.$emit("update:editingRows",n),this.$emit("row-edit-init",e)},onRowEditSave:function(e){var n=uo(this.editingRows);n.splice(this.findIndex(e.data,n),1),this.$emit("update:editingRows",n),this.$emit("row-edit-save",e)},onRowEditCancel:function(e){var n=uo(this.editingRows);n.splice(this.findIndex(e.data,n),1),this.$emit("update:editingRows",n),this.$emit("row-edit-cancel",e)},onEditingMetaChange:function(e){var n=e.data,l=e.field,m=e.index,d=e.editing,x=aa({},this.d_editingMeta),s=x[m];if(d)!s&&(s=x[m]={data:aa({},n),fields:[]}),s.fields.push(l);else if(s){var T=s.fields.filter(function(E){return E!==l});T.length?s.fields=T:delete x[m]}this.d_editingMeta=x},clearEditingMetaData:function(){this.editMode&&(this.d_editingMeta={})},createLazyLoadEvent:function(e){return{originalEvent:e,first:this.d_first,rows:this.d_rows,sortField:this.d_sortField,sortOrder:this.d_sortOrder,multiSortMeta:this.d_multiSortMeta,filters:this.d_filters}},hasGlobalFilter:function(){return this.filters&&Object.prototype.hasOwnProperty.call(this.filters,"global")},onFilterChange:function(e){this.d_filters=e},onFilterApply:function(){this.d_first=0,this.$emit("update:first",this.d_first),this.$emit("update:filters",this.d_filters),this.lazy&&this.$emit("filter",this.createLazyLoadEvent())},cloneFilters:function(){var e={};return this.filters&&Object.entries(this.filters).forEach(function(n){var l=X4(n,2),m=l[0],d=l[1];e[m]=d.operator?{operator:d.operator,constraints:d.constraints.map(function(x){return aa({},x)})}:aa({},d)}),e},updateReorderableColumns:function(){var e=this,n=[];this.columns.forEach(function(l){return n.push(e.columnProp(l,"columnKey")||e.columnProp(l,"field"))}),this.d_columnOrder=n},createStyleElement:function(){var e;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",If(this.styleElement,"nonce",(e=this.$primevue)===null||e===void 0||(e=e.config)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce),document.head.appendChild(this.styleElement)},destroyStyleElement:function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},dataToRender:function(e){var n=e||this.processedData;if(n&&this.paginator){var l=this.lazy?0:this.d_first;return n.slice(l,l+this.d_rows)}return n},getVirtualScrollerRef:function(){return this.$refs.virtualScroller},hasSpacerStyle:function(e){return Zr(e)}},computed:{columns:function(){var e=this.d_columns.get(this);if(this.reorderableColumns&&this.d_columnOrder){var n=[],l=Rg(this.d_columnOrder),m;try{for(l.s();!(m=l.n()).done;){var d=m.value,x=this.findColumnByKey(e,d);x&&!this.columnProp(x,"hidden")&&n.push(x)}}catch(s){l.e(s)}finally{l.f()}return[].concat(n,uo(e.filter(function(s){return n.indexOf(s)<0})))}return e},columnGroups:function(){return this.d_columnGroups.get(this)},headerColumnGroup:function(){var e,n=this;return(e=this.columnGroups)===null||e===void 0?void 0:e.find(function(l){return n.columnProp(l,"type")==="header"})},footerColumnGroup:function(){var e,n=this;return(e=this.columnGroups)===null||e===void 0?void 0:e.find(function(l){return n.columnProp(l,"type")==="footer"})},hasFilters:function(){return this.filters&&Object.keys(this.filters).length>0&&this.filters.constructor===Object},processedData:function(){var e,n=this.value||[];return!this.lazy&&!((e=this.virtualScrollerOptions)!==null&&e!==void 0&&e.lazy)&&n&&n.length&&(this.hasFilters&&(n=this.filter(n)),this.sorted&&(this.sortMode==="single"?n=this.sortSingle(n):this.sortMode==="multiple"&&(n=this.sortMultiple(n)))),n},totalRecordsLength:function(){if(this.lazy)return this.totalRecords;var e=this.processedData;return e?e.length:0},empty:function(){var e=this.processedData;return!e||e.length===0},paginatorTop:function(){return this.paginator&&(this.paginatorPosition!=="bottom"||this.paginatorPosition==="both")},paginatorBottom:function(){return this.paginator&&(this.paginatorPosition!=="top"||this.paginatorPosition==="both")},sorted:function(){return this.d_sortField||this.d_multiSortMeta&&this.d_multiSortMeta.length>0},allRowsSelected:function(){var e=this;if(this.selectAll!==null)return this.selectAll;var n=this.frozenValue?[].concat(uo(this.frozenValue),uo(this.processedData)):this.processedData;return Zr(n)&&this.selection&&Array.isArray(this.selection)&&n.every(function(l){return e.selection.some(function(m){return e.equals(m,l)})})},groupRowSortField:function(){return this.sortMode==="single"?this.sortField:this.d_groupRowsSortMeta?this.d_groupRowsSortMeta.field:null},headerFilterButtonProps:function(){return aa(aa({filter:{severity:"secondary",text:!0,rounded:!0}},this.filterButtonProps),{},{inline:aa({clear:{severity:"secondary",text:!0,rounded:!0}},this.filterButtonProps.inline),popover:aa({addRule:{severity:"info",text:!0,size:"small"},removeRule:{severity:"danger",text:!0,size:"small"},apply:{size:"small"},clear:{outlined:!0,size:"small"}},this.filterButtonProps.popover)})},rowEditButtonProps:function(){return aa(aa({},{init:{severity:"secondary",text:!0,rounded:!0},save:{severity:"secondary",text:!0,rounded:!0},cancel:{severity:"secondary",text:!0,rounded:!0}}),this.editButtonProps)},virtualScrollerDisabled:function(){return ha(this.virtualScrollerOptions)||!this.scrollable}},components:{DTPaginator:U_,DTTableHeader:N6,DTTableBody:z6,DTTableFooter:F6,DTVirtualScroller:CS,ArrowDownIcon:a6,ArrowUpIcon:l6,SpinnerIcon:s0}};function Vy(t){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vy(t)}function Y4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function J4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y4(Object(n),!0).forEach(function(l){UU(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function UU(t,e,n){return(e=qU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qU(t){var e=HU(t,"string");return Vy(e)=="symbol"?e:e+""}function HU(t,e){if(Vy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Vy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GU(t,e,n,l,m,d){var x=wn("SpinnerIcon"),s=wn("DTPaginator"),T=wn("DTTableHeader"),E=wn("DTTableBody"),A=wn("DTTableFooter"),z=wn("DTVirtualScroller");return X(),pe("div",ie({class:t.cx("root"),"data-scrollselectors":".p-datatable-wrapper"},t.ptmi("root")),[jt(t.$slots,"default"),t.loading?(X(),pe("div",ie({key:0,class:t.cx("mask")},t.ptm("mask")),[t.$slots.loading?jt(t.$slots,"loading",{key:0}):(X(),pe(an,{key:1},[t.$slots.loadingicon?(X(),bt(Tn(t.$slots.loadingicon),{key:0,class:vn(t.cx("loadingIcon"))},null,8,["class"])):t.loadingIcon?(X(),pe("i",ie({key:1,class:[t.cx("loadingIcon"),"pi-spin",t.loadingIcon]},t.ptm("loadingIcon")),null,16)):(X(),bt(x,ie({key:2,spin:"",class:t.cx("loadingIcon")},t.ptm("loadingIcon")),null,16,["class"]))],64))],16)):Ct("",!0),t.$slots.header?(X(),pe("div",ie({key:1,class:t.cx("header")},t.ptm("header")),[jt(t.$slots,"header")],16)):Ct("",!0),d.paginatorTop?(X(),bt(s,{key:2,rows:m.d_rows,first:m.d_first,totalRecords:d.totalRecordsLength,pageLinkSize:t.pageLinkSize,template:t.paginatorTemplate,rowsPerPageOptions:t.rowsPerPageOptions,currentPageReportTemplate:t.currentPageReportTemplate,class:vn(t.cx("pcPaginator",{position:"top"})),onPage:e[0]||(e[0]=function(j){return d.onPage(j)}),alwaysShow:t.alwaysShowPaginator,unstyled:t.unstyled,pt:t.ptm("pcPaginator")},Gu({_:2},[t.$slots.paginatorcontainer?{name:"container",fn:Xe(function(){return[jt(t.$slots,"paginatorcontainer",{first:t.slotProps.first,last:t.slotProps.last,rows:t.slotProps.rows,page:t.slotProps.page,pageCount:t.slotProps.pageCount,totalRecords:t.slotProps.totalRecords,firstPageCallback:t.slotProps.firstPageCallback,lastPageCallback:t.slotProps.lastPageCallback,prevPageCallback:t.slotProps.prevPageCallback,nextPageCallback:t.slotProps.nextPageCallback,rowChangeCallback:t.slotProps.rowChangeCallback})]}),key:"0"}:void 0,t.$slots.paginatorstart?{name:"start",fn:Xe(function(){return[jt(t.$slots,"paginatorstart")]}),key:"1"}:void 0,t.$slots.paginatorend?{name:"end",fn:Xe(function(){return[jt(t.$slots,"paginatorend")]}),key:"2"}:void 0,t.$slots.paginatorfirstpagelinkicon?{name:"firstpagelinkicon",fn:Xe(function(j){return[jt(t.$slots,"paginatorfirstpagelinkicon",{class:vn(j.class)})]}),key:"3"}:void 0,t.$slots.paginatorprevpagelinkicon?{name:"prevpagelinkicon",fn:Xe(function(j){return[jt(t.$slots,"paginatorprevpagelinkicon",{class:vn(j.class)})]}),key:"4"}:void 0,t.$slots.paginatornextpagelinkicon?{name:"nextpagelinkicon",fn:Xe(function(j){return[jt(t.$slots,"paginatornextpagelinkicon",{class:vn(j.class)})]}),key:"5"}:void 0,t.$slots.paginatorlastpagelinkicon?{name:"lastpagelinkicon",fn:Xe(function(j){return[jt(t.$slots,"paginatorlastpagelinkicon",{class:vn(j.class)})]}),key:"6"}:void 0,t.$slots.paginatorjumptopagedropdownicon?{name:"jumptopagedropdownicon",fn:Xe(function(j){return[jt(t.$slots,"paginatorjumptopagedropdownicon",{class:vn(j.class)})]}),key:"7"}:void 0,t.$slots.paginatorrowsperpagedropdownicon?{name:"rowsperpagedropdownicon",fn:Xe(function(j){return[jt(t.$slots,"paginatorrowsperpagedropdownicon",{class:vn(j.class)})]}),key:"8"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","class","alwaysShow","unstyled","pt"])):Ct("",!0),M("div",ie({class:t.cx("tableContainer"),style:[t.sx("tableContainer"),{maxHeight:d.virtualScrollerDisabled?t.scrollHeight:""}]},t.ptm("tableContainer")),[ge(z,ie({ref:"virtualScroller"},t.virtualScrollerOptions,{items:d.processedData,columns:d.columns,style:t.scrollHeight!=="flex"?{height:t.scrollHeight}:void 0,scrollHeight:t.scrollHeight!=="flex"?void 0:"100%",disabled:d.virtualScrollerDisabled,loaderDisabled:"",inline:"",autoSize:"",showSpacer:!1,pt:t.ptm("virtualScroller")}),{content:Xe(function(j){return[M("table",ie({ref:"table",role:"table",class:[t.cx("table"),t.tableClass],style:[t.tableStyle,j.spacerStyle]},J4(J4({},t.tableProps),t.ptm("table"))),[t.showHeaders?(X(),bt(T,{key:0,columnGroup:d.headerColumnGroup,columns:j.columns,rowGroupMode:t.rowGroupMode,groupRowsBy:t.groupRowsBy,groupRowSortField:d.groupRowSortField,reorderableColumns:t.reorderableColumns,resizableColumns:t.resizableColumns,allRowsSelected:d.allRowsSelected,empty:d.empty,sortMode:t.sortMode,sortField:m.d_sortField,sortOrder:m.d_sortOrder,multiSortMeta:m.d_multiSortMeta,filters:m.d_filters,filtersStore:t.filters,filterDisplay:t.filterDisplay,filterButtonProps:d.headerFilterButtonProps,filterInputProps:t.filterInputProps,first:m.d_first,onColumnClick:e[1]||(e[1]=function(U){return d.onColumnHeaderClick(U)}),onColumnMousedown:e[2]||(e[2]=function(U){return d.onColumnHeaderMouseDown(U)}),onFilterChange:d.onFilterChange,onFilterApply:d.onFilterApply,onColumnDragstart:e[3]||(e[3]=function(U){return d.onColumnHeaderDragStart(U)}),onColumnDragover:e[4]||(e[4]=function(U){return d.onColumnHeaderDragOver(U)}),onColumnDragleave:e[5]||(e[5]=function(U){return d.onColumnHeaderDragLeave(U)}),onColumnDrop:e[6]||(e[6]=function(U){return d.onColumnHeaderDrop(U)}),onColumnResizestart:e[7]||(e[7]=function(U){return d.onColumnResizeStart(U)}),onCheckboxChange:e[8]||(e[8]=function(U){return d.toggleRowsWithCheckbox(U)}),unstyled:t.unstyled,pt:t.pt},null,8,["columnGroup","columns","rowGroupMode","groupRowsBy","groupRowSortField","reorderableColumns","resizableColumns","allRowsSelected","empty","sortMode","sortField","sortOrder","multiSortMeta","filters","filtersStore","filterDisplay","filterButtonProps","filterInputProps","first","onFilterChange","onFilterApply","unstyled","pt"])):Ct("",!0),t.frozenValue?(X(),bt(E,{key:1,ref:"frozenBodyRef",value:t.frozenValue,frozenRow:!0,columns:j.columns,first:m.d_first,dataKey:t.dataKey,selection:t.selection,selectionKeys:m.d_selectionKeys,selectionMode:t.selectionMode,contextMenu:t.contextMenu,contextMenuSelection:t.contextMenuSelection,rowGroupMode:t.rowGroupMode,groupRowsBy:t.groupRowsBy,expandableRowGroups:t.expandableRowGroups,rowClass:t.rowClass,rowStyle:t.rowStyle,editMode:t.editMode,compareSelectionBy:t.compareSelectionBy,scrollable:t.scrollable,expandedRowIcon:t.expandedRowIcon,collapsedRowIcon:t.collapsedRowIcon,expandedRows:t.expandedRows,expandedRowGroups:t.expandedRowGroups,editingRows:t.editingRows,editingRowKeys:m.d_editingRowKeys,templates:t.$slots,editButtonProps:d.rowEditButtonProps,isVirtualScrollerDisabled:!0,onRowgroupToggle:d.toggleRowGroup,onRowClick:e[9]||(e[9]=function(U){return d.onRowClick(U)}),onRowDblclick:e[10]||(e[10]=function(U){return d.onRowDblClick(U)}),onRowRightclick:e[11]||(e[11]=function(U){return d.onRowRightClick(U)}),onRowTouchend:d.onRowTouchEnd,onRowKeydown:d.onRowKeyDown,onRowMousedown:d.onRowMouseDown,onRowDragstart:e[12]||(e[12]=function(U){return d.onRowDragStart(U)}),onRowDragover:e[13]||(e[13]=function(U){return d.onRowDragOver(U)}),onRowDragleave:e[14]||(e[14]=function(U){return d.onRowDragLeave(U)}),onRowDragend:e[15]||(e[15]=function(U){return d.onRowDragEnd(U)}),onRowDrop:e[16]||(e[16]=function(U){return d.onRowDrop(U)}),onRowToggle:e[17]||(e[17]=function(U){return d.toggleRow(U)}),onRadioChange:e[18]||(e[18]=function(U){return d.toggleRowWithRadio(U)}),onCheckboxChange:e[19]||(e[19]=function(U){return d.toggleRowWithCheckbox(U)}),onCellEditInit:e[20]||(e[20]=function(U){return d.onCellEditInit(U)}),onCellEditComplete:e[21]||(e[21]=function(U){return d.onCellEditComplete(U)}),onCellEditCancel:e[22]||(e[22]=function(U){return d.onCellEditCancel(U)}),onRowEditInit:e[23]||(e[23]=function(U){return d.onRowEditInit(U)}),onRowEditSave:e[24]||(e[24]=function(U){return d.onRowEditSave(U)}),onRowEditCancel:e[25]||(e[25]=function(U){return d.onRowEditCancel(U)}),editingMeta:m.d_editingMeta,onEditingMetaChange:d.onEditingMetaChange,unstyled:t.unstyled,pt:t.pt},null,8,["value","columns","first","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowGroups","editingRows","editingRowKeys","templates","editButtonProps","onRowgroupToggle","onRowTouchend","onRowKeydown","onRowMousedown","editingMeta","onEditingMetaChange","unstyled","pt"])):Ct("",!0),ge(E,{ref:"bodyRef",value:d.dataToRender(j.rows),class:vn(j.styleClass),columns:j.columns,empty:d.empty,first:m.d_first,dataKey:t.dataKey,selection:t.selection,selectionKeys:m.d_selectionKeys,selectionMode:t.selectionMode,contextMenu:t.contextMenu,contextMenuSelection:t.contextMenuSelection,rowGroupMode:t.rowGroupMode,groupRowsBy:t.groupRowsBy,expandableRowGroups:t.expandableRowGroups,rowClass:t.rowClass,rowStyle:t.rowStyle,editMode:t.editMode,compareSelectionBy:t.compareSelectionBy,scrollable:t.scrollable,expandedRowIcon:t.expandedRowIcon,collapsedRowIcon:t.collapsedRowIcon,expandedRows:t.expandedRows,expandedRowGroups:t.expandedRowGroups,editingRows:t.editingRows,editingRowKeys:m.d_editingRowKeys,templates:t.$slots,editButtonProps:d.rowEditButtonProps,virtualScrollerContentProps:j,isVirtualScrollerDisabled:d.virtualScrollerDisabled,onRowgroupToggle:d.toggleRowGroup,onRowClick:e[26]||(e[26]=function(U){return d.onRowClick(U)}),onRowDblclick:e[27]||(e[27]=function(U){return d.onRowDblClick(U)}),onRowRightclick:e[28]||(e[28]=function(U){return d.onRowRightClick(U)}),onRowTouchend:d.onRowTouchEnd,onRowKeydown:function(K){return d.onRowKeyDown(K,j)},onRowMousedown:d.onRowMouseDown,onRowDragstart:e[29]||(e[29]=function(U){return d.onRowDragStart(U)}),onRowDragover:e[30]||(e[30]=function(U){return d.onRowDragOver(U)}),onRowDragleave:e[31]||(e[31]=function(U){return d.onRowDragLeave(U)}),onRowDragend:e[32]||(e[32]=function(U){return d.onRowDragEnd(U)}),onRowDrop:e[33]||(e[33]=function(U){return d.onRowDrop(U)}),onRowToggle:e[34]||(e[34]=function(U){return d.toggleRow(U)}),onRadioChange:e[35]||(e[35]=function(U){return d.toggleRowWithRadio(U)}),onCheckboxChange:e[36]||(e[36]=function(U){return d.toggleRowWithCheckbox(U)}),onCellEditInit:e[37]||(e[37]=function(U){return d.onCellEditInit(U)}),onCellEditComplete:e[38]||(e[38]=function(U){return d.onCellEditComplete(U)}),onCellEditCancel:e[39]||(e[39]=function(U){return d.onCellEditCancel(U)}),onRowEditInit:e[40]||(e[40]=function(U){return d.onRowEditInit(U)}),onRowEditSave:e[41]||(e[41]=function(U){return d.onRowEditSave(U)}),onRowEditCancel:e[42]||(e[42]=function(U){return d.onRowEditCancel(U)}),editingMeta:m.d_editingMeta,onEditingMetaChange:d.onEditingMetaChange,unstyled:t.unstyled,pt:t.pt},null,8,["value","class","columns","empty","first","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowGroups","editingRows","editingRowKeys","templates","editButtonProps","virtualScrollerContentProps","isVirtualScrollerDisabled","onRowgroupToggle","onRowTouchend","onRowKeydown","onRowMousedown","editingMeta","onEditingMetaChange","unstyled","pt"]),d.hasSpacerStyle(j.spacerStyle)?(X(),pe("tbody",ie({key:2,class:t.cx("virtualScrollerSpacer"),style:{height:"calc(".concat(j.spacerStyle.height," - ").concat(j.rows.length*j.itemSize,"px)")}},t.ptm("virtualScrollerSpacer")),null,16)):Ct("",!0),ge(A,{columnGroup:d.footerColumnGroup,columns:j.columns,pt:t.pt},null,8,["columnGroup","columns","pt"])],16)]}),_:1},16,["items","columns","style","scrollHeight","disabled","pt"])],16),d.paginatorBottom?(X(),bt(s,{key:3,rows:m.d_rows,first:m.d_first,totalRecords:d.totalRecordsLength,pageLinkSize:t.pageLinkSize,template:t.paginatorTemplate,rowsPerPageOptions:t.rowsPerPageOptions,currentPageReportTemplate:t.currentPageReportTemplate,class:vn(t.cx("pcPaginator",{position:"bottom"})),onPage:e[43]||(e[43]=function(j){return d.onPage(j)}),alwaysShow:t.alwaysShowPaginator,unstyled:t.unstyled,pt:t.ptm("pcPaginator")},Gu({_:2},[t.$slots.paginatorcontainer?{name:"container",fn:Xe(function(j){return[jt(t.$slots,"paginatorcontainer",{first:j.first,last:j.last,rows:j.rows,page:j.page,pageCount:j.pageCount,totalRecords:j.totalRecords,firstPageCallback:j.firstPageCallback,lastPageCallback:j.lastPageCallback,prevPageCallback:j.prevPageCallback,nextPageCallback:j.nextPageCallback,rowChangeCallback:j.rowChangeCallback})]}),key:"0"}:void 0,t.$slots.paginatorstart?{name:"start",fn:Xe(function(){return[jt(t.$slots,"paginatorstart")]}),key:"1"}:void 0,t.$slots.paginatorend?{name:"end",fn:Xe(function(){return[jt(t.$slots,"paginatorend")]}),key:"2"}:void 0,t.$slots.paginatorfirstpagelinkicon?{name:"firstpagelinkicon",fn:Xe(function(j){return[jt(t.$slots,"paginatorfirstpagelinkicon",{class:vn(j.class)})]}),key:"3"}:void 0,t.$slots.paginatorprevpagelinkicon?{name:"prevpagelinkicon",fn:Xe(function(j){return[jt(t.$slots,"paginatorprevpagelinkicon",{class:vn(j.class)})]}),key:"4"}:void 0,t.$slots.paginatornextpagelinkicon?{name:"nextpagelinkicon",fn:Xe(function(j){return[jt(t.$slots,"paginatornextpagelinkicon",{class:vn(j.class)})]}),key:"5"}:void 0,t.$slots.paginatorlastpagelinkicon?{name:"lastpagelinkicon",fn:Xe(function(j){return[jt(t.$slots,"paginatorlastpagelinkicon",{class:vn(j.class)})]}),key:"6"}:void 0,t.$slots.paginatorjumptopagedropdownicon?{name:"jumptopagedropdownicon",fn:Xe(function(j){return[jt(t.$slots,"paginatorjumptopagedropdownicon",{class:vn(j.class)})]}),key:"7"}:void 0,t.$slots.paginatorrowsperpagedropdownicon?{name:"rowsperpagedropdownicon",fn:Xe(function(j){return[jt(t.$slots,"paginatorrowsperpagedropdownicon",{class:vn(j.class)})]}),key:"8"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","class","alwaysShow","unstyled","pt"])):Ct("",!0),t.$slots.footer?(X(),pe("div",ie({key:4,class:t.cx("footer")},t.ptm("footer")),[jt(t.$slots,"footer")],16)):Ct("",!0),M("div",ie({ref:"resizeHelper",class:t.cx("columnResizeIndicator"),style:{display:"none"}},t.ptm("columnResizeIndicator")),null,16),t.reorderableColumns?(X(),pe("span",ie({key:5,ref:"reorderIndicatorUp",class:t.cx("rowReorderIndicatorUp"),style:{position:"absolute",display:"none"}},t.ptm("rowReorderIndicatorUp")),[(X(),bt(Tn(t.$slots.rowreorderindicatorupicon||t.$slots.reorderindicatorupicon||"ArrowDownIcon")))],16)):Ct("",!0),t.reorderableColumns?(X(),pe("span",ie({key:6,ref:"reorderIndicatorDown",class:t.cx("rowReorderIndicatorDown"),style:{position:"absolute",display:"none"}},t.ptm("rowReorderIndicatorDown")),[(X(),bt(Tn(t.$slots.rowreorderindicatordownicon||t.$slots.reorderindicatordownicon||"ArrowUpIcon")))],16)):Ct("",!0)],16)}Xs.render=GU;var WU=function(e){var n=e.dt;return`
.p-divider-horizontal {
    display: flex;
    width: 100%;
    position: relative;
    align-items: center;
    margin: `.concat(n("divider.horizontal.margin"),`;
    padding: `).concat(n("divider.horizontal.padding"),`;
}

.p-divider-horizontal:before {
    position: absolute;
    display: block;
    inset-block-start: 50%;
    inset-inline-start: 0;
    width: 100%;
    content: "";
    border-block-start: 1px solid `).concat(n("divider.border.color"),`;
}

.p-divider-horizontal .p-divider-content {
    padding: `).concat(n("divider.horizontal.content.padding"),`;
}

.p-divider-vertical {
    min-height: 100%;
    display: flex;
    position: relative;
    justify-content: center;
    margin: `).concat(n("divider.vertical.margin"),`;
    padding: `).concat(n("divider.vertical.padding"),`;
}

.p-divider-vertical:before {
    position: absolute;
    display: block;
    inset-block-start: 0;
    inset-inline-start: 50%;
    height: 100%;
    content: "";
    border-inline-start: 1px solid `).concat(n("divider.border.color"),`;
}

.p-divider.p-divider-vertical .p-divider-content {
    padding: `).concat(n("divider.vertical.content.padding"),`;
}

.p-divider-content {
    z-index: 1;
    background: `).concat(n("divider.content.background"),`;
    color: `).concat(n("divider.content.color"),`;
}

.p-divider-solid.p-divider-horizontal:before {
    border-block-start-style: solid;
}

.p-divider-solid.p-divider-vertical:before {
    border-inline-start-style: solid;
}

.p-divider-dashed.p-divider-horizontal:before {
    border-block-start-style: dashed;
}

.p-divider-dashed.p-divider-vertical:before {
    border-inline-start-style: dashed;
}

.p-divider-dotted.p-divider-horizontal:before {
    border-block-start-style: dotted;
}

.p-divider-dotted.p-divider-vertical:before {
    border-inline-start-style: dotted;
}

.p-divider-left:dir(rtl),
.p-divider-right:dir(rtl) {
    flex-direction: row-reverse;
}
`)},KU={root:function(e){var n=e.props;return{justifyContent:n.layout==="horizontal"?n.align==="center"||n.align===null?"center":n.align==="left"?"flex-start":n.align==="right"?"flex-end":null:null,alignItems:n.layout==="vertical"?n.align==="center"||n.align===null?"center":n.align==="top"?"flex-start":n.align==="bottom"?"flex-end":null:null}}},ZU={root:function(e){var n=e.props;return["p-divider p-component","p-divider-"+n.layout,"p-divider-"+n.type,{"p-divider-left":n.layout==="horizontal"&&(!n.align||n.align==="left")},{"p-divider-center":n.layout==="horizontal"&&n.align==="center"},{"p-divider-right":n.layout==="horizontal"&&n.align==="right"},{"p-divider-top":n.layout==="vertical"&&n.align==="top"},{"p-divider-center":n.layout==="vertical"&&(!n.align||n.align==="center")},{"p-divider-bottom":n.layout==="vertical"&&n.align==="bottom"}]},content:"p-divider-content"},XU=Xn.extend({name:"divider",theme:WU,classes:ZU,inlineStyles:KU}),YU={name:"BaseDivider",extends:mr,props:{align:{type:String,default:null},layout:{type:String,default:"horizontal"},type:{type:String,default:"solid"}},style:XU,provide:function(){return{$pcDivider:this,$parentInstance:this}}},Rh={name:"Divider",extends:YU,inheritAttrs:!1},JU=["aria-orientation"];function QU(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root"),style:t.sx("root"),role:"separator","aria-orientation":t.layout},t.ptmi("root")),[t.$slots.default?(X(),pe("div",ie({key:0,class:t.cx("content")},t.ptm("content")),[jt(t.$slots,"default")],16)):Ct("",!0)],16,JU)}Rh.render=QU;var eq={name:"Dropdown",extends:xs,mounted:function(){console.warn("Deprecated since v4. Use Select component instead.")}},tq=function(e){var n=e.dt;return`
.p-floatlabel {
    display: block;
    position: relative;
}

.p-floatlabel label {
    position: absolute;
    pointer-events: none;
    top: 50%;
    transform: translateY(-50%);
    transition-property: all;
    transition-timing-function: ease;
    line-height: 1;
    font-weight: `.concat(n("floatlabel.font.weight"),`;
    inset-inline-start: `).concat(n("floatlabel.position.x"),`;
    color: `).concat(n("floatlabel.color"),`;
    transition-duration: `).concat(n("floatlabel.transition.duration"),`;
}

.p-floatlabel:has(.p-textarea) label {
    top: `).concat(n("floatlabel.position.y"),`;
    transform: translateY(0);
}

.p-floatlabel:has(.p-inputicon:first-child) label {
    inset-inline-start: calc((`).concat(n("form.field.padding.x")," * 2) + ").concat(n("icon.size"),`);
}

.p-floatlabel:has(.p-invalid) label {
    color: `).concat(n("floatlabel.invalid.color"),`;
}

.p-floatlabel:has(input:focus) label,
.p-floatlabel:has(input.p-filled) label,
.p-floatlabel:has(input:-webkit-autofill) label,
.p-floatlabel:has(textarea:focus) label,
.p-floatlabel:has(textarea.p-filled) label,
.p-floatlabel:has(.p-inputwrapper-focus) label,
.p-floatlabel:has(.p-inputwrapper-filled) label {
    top: `).concat(n("floatlabel.over.active.top"),`;
    transform: translateY(0);
    font-size: `).concat(n("floatlabel.active.font.size"),`;
    font-weight: `).concat(n("floatlabel.label.active.font.weight"),`;
}

.p-floatlabel:has(input.p-filled) label,
.p-floatlabel:has(textarea.p-filled) label,
.p-floatlabel:has(.p-inputwrapper-filled) label {
    color: `).concat(n("floatlabel.active.color"),`;
}

.p-floatlabel:has(input:focus) label,
.p-floatlabel:has(input:-webkit-autofill) label,
.p-floatlabel:has(textarea:focus) label,
.p-floatlabel:has(.p-inputwrapper-focus) label {
    color: `).concat(n("floatlabel.focus.color"),`;
}

.p-floatlabel-in .p-inputtext,
.p-floatlabel-in .p-textarea,
.p-floatlabel-in .p-select-label,
.p-floatlabel-in .p-multiselect-label,
.p-floatlabel-in .p-autocomplete-input-multiple,
.p-floatlabel-in .p-cascadeselect-label,
.p-floatlabel-in .p-treeselect-label {
    padding-block-start: `).concat(n("floatlabel.in.input.padding.top"),`;
    padding-block-end: `).concat(n("floatlabel.in.input.padding.bottom"),`;
}

.p-floatlabel-in:has(input:focus) label,
.p-floatlabel-in:has(input.p-filled) label,
.p-floatlabel-in:has(input:-webkit-autofill) label,
.p-floatlabel-in:has(textarea:focus) label,
.p-floatlabel-in:has(textarea.p-filled) label,
.p-floatlabel-in:has(.p-inputwrapper-focus) label,
.p-floatlabel-in:has(.p-inputwrapper-filled) label {
    top: `).concat(n("floatlabel.in.active.top"),`;
}

.p-floatlabel-on:has(input:focus) label,
.p-floatlabel-on:has(input.p-filled) label,
.p-floatlabel-on:has(input:-webkit-autofill) label,
.p-floatlabel-on:has(textarea:focus) label,
.p-floatlabel-on:has(textarea.p-filled) label,
.p-floatlabel-on:has(.p-inputwrapper-focus) label,
.p-floatlabel-on:has(.p-inputwrapper-filled) label {
    top: 0;
    transform: translateY(-50%);
    border-radius: `).concat(n("floatlabel.on.border.radius"),`;
    background: `).concat(n("floatlabel.on.active.background"),`;
    padding: `).concat(n("floatlabel.on.active.padding"),`;
}
`)},nq={root:function(e){e.instance;var n=e.props;return["p-floatlabel",{"p-floatlabel-over":n.variant==="over","p-floatlabel-on":n.variant==="on","p-floatlabel-in":n.variant==="in"}]}},rq=Xn.extend({name:"floatlabel",theme:tq,classes:nq}),iq={name:"BaseFloatLabel",extends:mr,props:{variant:{type:String,default:"over"}},style:rq,provide:function(){return{$pcFloatLabel:this,$parentInstance:this}}},gf={name:"FloatLabel",extends:iq,inheritAttrs:!1};function oq(t,e,n,l,m,d){return X(),pe("span",ie({class:t.cx("root")},t.ptmi("root")),[jt(t.$slots,"default")],16)}gf.render=oq;var sq=function(e){var n=e.dt;return`
.p-iftalabel {
    display: block;
    position: relative;
}

.p-iftalabel label {
    position: absolute;
    pointer-events: none;
    top: `.concat(n("iftalabel.top"),`;
    transition-property: all;
    transition-timing-function: ease;
    line-height: 1;
    font-size: `).concat(n("iftalabel.font.size"),`;
    font-weight: `).concat(n("iftalabel.font.weight"),`;
    inset-inline-start: `).concat(n("iftalabel.position.x"),`;
    color: `).concat(n("iftalabel.color"),`;
    transition-duration: `).concat(n("iftalabel.transition.duration"),`;
}

.p-iftalabel .p-inputtext,
.p-iftalabel .p-textarea,
.p-iftalabel .p-select-label,
.p-iftalabel .p-multiselect-label,
.p-iftalabel .p-autocomplete-input-multiple,
.p-iftalabel .p-cascadeselect-label,
.p-iftalabel .p-treeselect-label {
    padding-block-start: `).concat(n("iftalabel.input.padding.top"),`;
    padding-block-end: `).concat(n("iftalabel.input.padding.bottom"),`;
}

.p-iftalabel:has(.p-invalid) label {
    color: `).concat(n("iftalabel.invalid.color"),`;
}

.p-iftalabel:has(input:focus) label,
.p-iftalabel:has(input:-webkit-autofill) label,
.p-iftalabel:has(textarea:focus) label,
.p-iftalabel:has(.p-inputwrapper-focus) label {
    color: `).concat(n("iftalabel.focus.color"),`;
}

.p-iftalabel .p-inputicon {
    top: `).concat(n("iftalabel.input.padding.top"),`;
    transform: translateY(25%);
    margin-top: 0;
}
`)},aq={root:"p-iftalabel"},lq=Xn.extend({name:"iftalabel",theme:sq,classes:aq}),cq={name:"BaseIftaLabel",extends:mr,style:lq,provide:function(){return{$pcIftaLabel:this,$parentInstance:this}}},Db={name:"IftaLabel",extends:cq,inheritAttrs:!1};function uq(t,e,n,l,m,d){return X(),pe("span",ie({class:t.cx("root")},t.ptmi("root")),[jt(t.$slots,"default")],16)}Db.render=uq;var RS={name:"EyeIcon",extends:Qr};function dq(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.0535499 7.25213C0.208567 7.59162 2.40413 12.4 7 12.4C11.5959 12.4 13.7914 7.59162 13.9465 7.25213C13.9487 7.2471 13.9506 7.24304 13.952 7.24001C13.9837 7.16396 14 7.08239 14 7.00001C14 6.91762 13.9837 6.83605 13.952 6.76001C13.9506 6.75697 13.9487 6.75292 13.9465 6.74788C13.7914 6.4084 11.5959 1.60001 7 1.60001C2.40413 1.60001 0.208567 6.40839 0.0535499 6.74788C0.0512519 6.75292 0.0494023 6.75697 0.048 6.76001C0.0163137 6.83605 0 6.91762 0 7.00001C0 7.08239 0.0163137 7.16396 0.048 7.24001C0.0494023 7.24304 0.0512519 7.2471 0.0535499 7.25213ZM7 11.2C3.664 11.2 1.736 7.92001 1.264 7.00001C1.736 6.08001 3.664 2.80001 7 2.80001C10.336 2.80001 12.264 6.08001 12.736 7.00001C12.264 7.92001 10.336 11.2 7 11.2ZM5.55551 9.16182C5.98308 9.44751 6.48576 9.6 7 9.6C7.68891 9.59789 8.349 9.32328 8.83614 8.83614C9.32328 8.349 9.59789 7.68891 9.59999 7C9.59999 6.48576 9.44751 5.98308 9.16182 5.55551C8.87612 5.12794 8.47006 4.7947 7.99497 4.59791C7.51988 4.40112 6.99711 4.34963 6.49276 4.44995C5.98841 4.55027 5.52513 4.7979 5.16152 5.16152C4.7979 5.52513 4.55027 5.98841 4.44995 6.49276C4.34963 6.99711 4.40112 7.51988 4.59791 7.99497C4.7947 8.47006 5.12794 8.87612 5.55551 9.16182ZM6.2222 5.83594C6.45243 5.6821 6.7231 5.6 7 5.6C7.37065 5.6021 7.72553 5.75027 7.98762 6.01237C8.24972 6.27446 8.39789 6.62934 8.4 7C8.4 7.27689 8.31789 7.54756 8.16405 7.77779C8.01022 8.00802 7.79157 8.18746 7.53575 8.29343C7.27994 8.39939 6.99844 8.42711 6.72687 8.37309C6.4553 8.31908 6.20584 8.18574 6.01005 7.98994C5.81425 7.79415 5.68091 7.54469 5.6269 7.27312C5.57288 7.00155 5.6006 6.72006 5.70656 6.46424C5.81253 6.20842 5.99197 5.98977 6.2222 5.83594Z",fill:"currentColor"},null,-1)]),16)}RS.render=dq;var V6={name:"RefreshIcon",extends:Qr};function hq(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.77051 5.96336C6.84324 5.99355 6.92127 6.00891 7.00002 6.00854C7.07877 6.00891 7.1568 5.99355 7.22953 5.96336C7.30226 5.93317 7.36823 5.88876 7.42357 5.83273L9.82101 3.43529C9.93325 3.32291 9.99629 3.17058 9.99629 3.01175C9.99629 2.85292 9.93325 2.70058 9.82101 2.5882L7.42357 0.190763C7.3687 0.131876 7.30253 0.0846451 7.22901 0.0518865C7.15549 0.019128 7.07612 0.00151319 6.99564 9.32772e-05C6.91517 -0.00132663 6.83523 0.0134773 6.7606 0.0436218C6.68597 0.0737664 6.61817 0.118634 6.56126 0.175548C6.50435 0.232462 6.45948 0.300257 6.42933 0.374888C6.39919 0.449519 6.38439 0.529456 6.38581 0.609933C6.38722 0.690409 6.40484 0.769775 6.4376 0.843296C6.47036 0.916817 6.51759 0.982986 6.57647 1.03786L7.95103 2.41241H6.99998C5.46337 2.41241 3.98969 3.02283 2.90314 4.10938C1.81659 5.19593 1.20618 6.66961 1.20618 8.20622C1.20618 9.74283 1.81659 11.2165 2.90314 12.3031C3.98969 13.3896 5.46337 14 6.99998 14C8.53595 13.9979 10.0084 13.3868 11.0945 12.3007C12.1806 11.2146 12.7917 9.74218 12.7938 8.20622C12.7938 8.04726 12.7306 7.89481 12.6182 7.78241C12.5058 7.67001 12.3534 7.60686 12.1944 7.60686C12.0355 7.60686 11.883 7.67001 11.7706 7.78241C11.6582 7.89481 11.5951 8.04726 11.5951 8.20622C11.5951 9.11504 11.3256 10.0035 10.8207 10.7591C10.3157 11.5148 9.59809 12.1037 8.75845 12.4515C7.9188 12.7993 6.99489 12.8903 6.10353 12.713C5.21217 12.5357 4.3934 12.0981 3.75077 11.4554C3.10813 10.8128 2.67049 9.99404 2.49319 9.10268C2.31589 8.21132 2.40688 7.2874 2.75468 6.44776C3.10247 5.60811 3.69143 4.89046 4.44709 4.38554C5.20275 3.88063 6.09116 3.61113 6.99998 3.61113H7.95098L6.57647 4.98564C6.46423 5.09802 6.40119 5.25035 6.40119 5.40918C6.40119 5.56801 6.46423 5.72035 6.57647 5.83273C6.63181 5.88876 6.69778 5.93317 6.77051 5.96336Z",fill:"currentColor"},null,-1)]),16)}V6.render=hq;var j6={name:"SearchMinusIcon",extends:Qr};function pq(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.0208 12.0411C4.83005 12.0411 3.66604 11.688 2.67596 11.0265C1.68589 10.3649 0.914216 9.42464 0.458534 8.32452C0.00285271 7.22441 -0.116374 6.01388 0.11593 4.84601C0.348235 3.67813 0.921637 2.60537 1.76363 1.76338C2.60562 0.921393 3.67838 0.34799 4.84625 0.115686C6.01412 -0.116618 7.22466 0.00260857 8.32477 0.45829C9.42488 0.913972 10.3652 1.68564 11.0267 2.67572C11.6883 3.66579 12.0414 4.8298 12.0414 6.02056C12.0395 7.41563 11.5542 8.76029 10.6783 9.8305L13.8244 12.9765C13.9367 13.089 13.9997 13.2414 13.9997 13.4003C13.9997 13.5592 13.9367 13.7116 13.8244 13.8241C13.769 13.8801 13.703 13.9245 13.6302 13.9548C13.5575 13.985 13.4794 14.0003 13.4006 14C13.3218 14.0003 13.2437 13.985 13.171 13.9548C13.0982 13.9245 13.0322 13.8801 12.9768 13.8241L9.83082 10.678C8.76059 11.5539 7.4159 12.0393 6.0208 12.0411ZM6.0208 1.20731C5.07199 1.20731 4.14449 1.48867 3.35559 2.0158C2.56669 2.54292 1.95181 3.29215 1.58872 4.16874C1.22562 5.04532 1.13062 6.00989 1.31572 6.94046C1.50083 7.87104 1.95772 8.72583 2.62863 9.39674C3.29954 10.0676 4.15433 10.5245 5.0849 10.7096C6.01548 10.8947 6.98005 10.7997 7.85663 10.4367C8.73322 10.0736 9.48244 9.45868 10.0096 8.66978C10.5367 7.88088 10.8181 6.95337 10.8181 6.00457C10.8181 4.73226 10.3126 3.51206 9.41297 2.6124C8.51331 1.71274 7.29311 1.20731 6.0208 1.20731ZM4.00591 6.60422H8.00362C8.16266 6.60422 8.31518 6.54104 8.42764 6.42859C8.5401 6.31613 8.60328 6.1636 8.60328 6.00456C8.60328 5.84553 8.5401 5.693 8.42764 5.58054C8.31518 5.46809 8.16266 5.40491 8.00362 5.40491H4.00591C3.84687 5.40491 3.69434 5.46809 3.58189 5.58054C3.46943 5.693 3.40625 5.84553 3.40625 6.00456C3.40625 6.1636 3.46943 6.31613 3.58189 6.42859C3.69434 6.54104 3.84687 6.60422 4.00591 6.60422Z",fill:"currentColor"},null,-1)]),16)}j6.render=pq;var U6={name:"SearchPlusIcon",extends:Qr};function fq(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.67596 11.0265C3.66604 11.688 4.83005 12.0411 6.0208 12.0411C6.81143 12.0411 7.59432 11.8854 8.32477 11.5828C8.86999 11.357 9.37802 11.0526 9.83311 10.6803L12.9768 13.8241C13.0322 13.8801 13.0982 13.9245 13.171 13.9548C13.2437 13.985 13.3218 14.0003 13.4006 14C13.4794 14.0003 13.5575 13.985 13.6302 13.9548C13.703 13.9245 13.769 13.8801 13.8244 13.8241C13.9367 13.7116 13.9997 13.5592 13.9997 13.4003C13.9997 13.2414 13.9367 13.089 13.8244 12.9765L10.6806 9.8328C11.0529 9.37773 11.3572 8.86972 11.5831 8.32452C11.8856 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0267 2.67572C10.3652 1.68564 9.42488 0.913972 8.32477 0.45829C7.22466 0.00260857 6.01412 -0.116618 4.84625 0.115686C3.67838 0.34799 2.60562 0.921393 1.76363 1.76338C0.921637 2.60537 0.348235 3.67813 0.11593 4.84601C-0.116374 6.01388 0.00285271 7.22441 0.458534 8.32452C0.914216 9.42464 1.68589 10.3649 2.67596 11.0265ZM3.35559 2.0158C4.14449 1.48867 5.07199 1.20731 6.0208 1.20731C7.29311 1.20731 8.51331 1.71274 9.41297 2.6124C10.3126 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5367 7.88088 10.0096 8.66978C9.48244 9.45868 8.73322 10.0736 7.85663 10.4367C6.98005 10.7997 6.01548 10.8947 5.0849 10.7096C4.15433 10.5245 3.29954 10.0676 2.62863 9.39674C1.95772 8.72583 1.50083 7.87104 1.31572 6.94046C1.13062 6.00989 1.22562 5.04532 1.58872 4.16874C1.95181 3.29215 2.56669 2.54292 3.35559 2.0158ZM6.00481 8.60309C5.84641 8.60102 5.69509 8.53718 5.58308 8.42517C5.47107 8.31316 5.40722 8.16183 5.40515 8.00344V6.60422H4.00591C3.84687 6.60422 3.69434 6.54104 3.58189 6.42859C3.46943 6.31613 3.40625 6.1636 3.40625 6.00456C3.40625 5.84553 3.46943 5.693 3.58189 5.58054C3.69434 5.46809 3.84687 5.40491 4.00591 5.40491H5.40515V4.00572C5.40515 3.84668 5.46833 3.69416 5.58079 3.5817C5.69324 3.46924 5.84577 3.40607 6.00481 3.40607C6.16385 3.40607 6.31637 3.46924 6.42883 3.5817C6.54129 3.69416 6.60447 3.84668 6.60447 4.00572V5.40491H8.00362C8.16266 5.40491 8.31518 5.46809 8.42764 5.58054C8.5401 5.693 8.60328 5.84553 8.60328 6.00456C8.60328 6.1636 8.5401 6.31613 8.42764 6.42859C8.31518 6.54104 8.16266 6.60422 8.00362 6.60422H6.60447V8.00344C6.60239 8.16183 6.53855 8.31316 6.42654 8.42517C6.31453 8.53718 6.1632 8.60102 6.00481 8.60309Z",fill:"currentColor"},null,-1)]),16)}U6.render=fq;var q6={name:"UndoIcon",extends:Qr};function mq(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.77042 5.96336C6.84315 5.99355 6.92118 6.00891 6.99993 6.00854C7.07868 6.00891 7.15671 5.99355 7.22944 5.96336C7.30217 5.93317 7.36814 5.88876 7.42348 5.83273C7.53572 5.72035 7.59876 5.56801 7.59876 5.40918C7.59876 5.25035 7.53572 5.09802 7.42348 4.98564L6.04897 3.61113H6.99998C7.9088 3.61113 8.79722 3.88063 9.55288 4.38554C10.3085 4.89046 10.8975 5.60811 11.2453 6.44776C11.5931 7.2874 11.6841 8.21132 11.5068 9.10268C11.3295 9.99404 10.8918 10.8128 10.2492 11.4554C9.60657 12.0981 8.7878 12.5357 7.89644 12.713C7.00508 12.8903 6.08116 12.7993 5.24152 12.4515C4.40188 12.1037 3.68422 11.5148 3.17931 10.7591C2.67439 10.0035 2.4049 9.11504 2.4049 8.20622C2.4049 8.04726 2.34175 7.89481 2.22935 7.78241C2.11695 7.67001 1.9645 7.60686 1.80554 7.60686C1.64658 7.60686 1.49413 7.67001 1.38172 7.78241C1.26932 7.89481 1.20618 8.04726 1.20618 8.20622C1.20829 9.74218 1.81939 11.2146 2.90548 12.3007C3.99157 13.3868 5.46402 13.9979 6.99998 14C8.5366 14 10.0103 13.3896 11.0968 12.3031C12.1834 11.2165 12.7938 9.74283 12.7938 8.20622C12.7938 6.66961 12.1834 5.19593 11.0968 4.10938C10.0103 3.02283 8.5366 2.41241 6.99998 2.41241H6.04892L7.42348 1.03786C7.48236 0.982986 7.5296 0.916817 7.56235 0.843296C7.59511 0.769775 7.61273 0.690409 7.61415 0.609933C7.61557 0.529456 7.60076 0.449519 7.57062 0.374888C7.54047 0.300257 7.49561 0.232462 7.43869 0.175548C7.38178 0.118634 7.31398 0.0737664 7.23935 0.0436218C7.16472 0.0134773 7.08478 -0.00132663 7.00431 9.32772e-05C6.92383 0.00151319 6.84447 0.019128 6.77095 0.0518865C6.69742 0.0846451 6.63126 0.131876 6.57638 0.190763L4.17895 2.5882C4.06671 2.70058 4.00366 2.85292 4.00366 3.01175C4.00366 3.17058 4.06671 3.32291 4.17895 3.43529L6.57638 5.83273C6.63172 5.88876 6.69769 5.93317 6.77042 5.96336Z",fill:"currentColor"},null,-1)]),16)}q6.render=mq;var gq=function(e){var n=e.dt;return`
.p-image-mask {
    display: flex;
    align-items: center;
    justify-content: center;
}

.p-image-preview {
    position: relative;
    display: inline-flex;
    line-height: 0;
}

.p-image-preview-mask {
    position: absolute;
    inset-inline-start: 0;
    inset-block-start: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s;
    border: 0 none;
    padding: 0;
    cursor: pointer;
    background: transparent;
    color: `.concat(n("image.preview.mask.color"),`;
    transition: background `).concat(n("image.transition.duration"),`;
}

.p-image-preview:hover > .p-image-preview-mask {
    opacity: 1;
    cursor: pointer;
    background: `).concat(n("image.preview.mask.background"),`;
}

.p-image-preview-icon {
    font-size: `).concat(n("image.preview.icon.size"),`;
    width: `).concat(n("image.preview.icon.size"),`;
    height: `).concat(n("image.preview.icon.size"),`;
}

.p-image-toolbar {
    position: absolute;
    inset-block-start: `).concat(n("image.toolbar.position.top"),`;
    inset-inline-end: `).concat(n("image.toolbar.position.right"),`;
    inset-inline-start: `).concat(n("image.toolbar.position.left"),`;
    inset-block-end: `).concat(n("image.toolbar.position.bottom"),`;
    display: flex;
    z-index: 1;
    padding: `).concat(n("image.toolbar.padding"),`;
    background: `).concat(n("image.toolbar.background"),`;
    backdrop-filter: blur(`).concat(n("image.toolbar.blur"),`);
    border-color: `).concat(n("image.toolbar.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("image.toolbar.border.width"),`;
    border-radius: `).concat(n("image.toolbar.border.radius"),`;
    gap: `).concat(n("image.toolbar.gap"),`;
}

.p-image-action {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    color: `).concat(n("image.action.color"),`;
    background: transparent;
    width: `).concat(n("image.action.size"),`;
    height: `).concat(n("image.action.size"),`;
    margin: 0;
    padding: 0;
    border: 0 none;
    cursor: pointer;
    user-select: none;
    border-radius: `).concat(n("image.action.border.radius"),`;
    outline-color: transparent;
    transition: background `).concat(n("image.transition.duration"),", color ").concat(n("image.transition.duration"),", outline-color ").concat(n("image.transition.duration"),", box-shadow ").concat(n("image.transition.duration"),`;
}

.p-image-action:hover {
    color: `).concat(n("image.action.hover.color"),`;
    background: `).concat(n("image.action.hover.background"),`;
}

.p-image-action:focus-visible {
    box-shadow: `).concat(n("image.action.focus.ring.shadow"),`;
    outline: `).concat(n("image.action.focus.ring.width")," ").concat(n("image.action.focus.ring.style")," ").concat(n("image.action.focus.ring.color"),`;
    outline-offset: `).concat(n("image.action.focus.ring.offset"),`;
}

.p-image-action .p-icon {
    font-size: `).concat(n("image.action.icon.size"),`;
    width: `).concat(n("image.action.icon.size"),`;
    height: `).concat(n("image.action.icon.size"),`;
}

.p-image-action.p-disabled {
    pointer-events: auto;
}

.p-image-original {
    transition: transform 0.15s;
    max-width: 100vw;
    max-height: 100vh;
}

.p-image-original-enter-active {
    transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
}

.p-image-original-leave-active {
    transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.p-image-original-enter-from,
.p-image-original-leave-to {
    opacity: 0;
    transform: scale(0.7);
}
`)},yq={root:function(e){var n=e.props;return["p-image p-component",{"p-image-preview":n.preview}]},previewMask:"p-image-preview-mask",previewIcon:"p-image-preview-icon",mask:"p-image-mask p-overlay-mask p-overlay-mask-enter",toolbar:"p-image-toolbar",rotateRightButton:"p-image-action p-image-rotate-right-button",rotateLeftButton:"p-image-action p-image-rotate-left-button",zoomOutButton:function(e){var n=e.instance;return["p-image-action p-image-zoom-out-button",{"p-disabled":n.isZoomOutDisabled}]},zoomInButton:function(e){var n=e.instance;return["p-image-action p-image-zoom-in-button",{"p-disabled":n.isZoomInDisabled}]},closeButton:"p-image-action p-image-close-button",original:"p-image-original"},vq=Xn.extend({name:"image",theme:gq,classes:yq}),bq={name:"BaseImage",extends:mr,props:{preview:{type:Boolean,default:!1},class:{type:null,default:null},style:{type:null,default:null},imageStyle:{type:null,default:null},imageClass:{type:null,default:null},previewButtonProps:{type:null,default:null},indicatorIcon:{type:String,default:void 0},previewIcon:{type:String,default:void 0},zoomInDisabled:{type:Boolean,default:!1},zoomOutDisabled:{type:Boolean,default:!1}},style:vq,provide:function(){return{$pcImage:this,$parentInstance:this}}},jy={name:"Image",extends:bq,inheritAttrs:!1,emits:["show","hide","error"],mask:null,data:function(){return{maskVisible:!1,previewVisible:!1,rotate:0,scale:1}},beforeUnmount:function(){this.mask&&bo.clear(this.container)},methods:{maskRef:function(e){this.mask=e},toolbarRef:function(e){this.toolbarRef=e},onImageClick:function(){var e=this;this.preview&&(n_(),this.maskVisible=!0,setTimeout(function(){e.previewVisible=!0},25))},onPreviewImageClick:function(){this.previewClick=!0},onMaskClick:function(e){var n=Xz(e.target,"data-pc-section-group","action")||e.target.closest('[data-pc-section-group="action"]');!this.previewClick&&!n&&(this.previewVisible=!1,this.rotate=0,this.scale=1),this.previewClick=!1},onMaskKeydown:function(e){var n=this;switch(e.code){case"Escape":this.hidePreview(),setTimeout(function(){Ro(n.$refs.previewButton)},200),e.preventDefault();break}},onError:function(){this.$emit("error")},rotateRight:function(){this.rotate+=90,this.previewClick=!0},rotateLeft:function(){this.rotate-=90,this.previewClick=!0},zoomIn:function(){this.scale=this.scale+.1,this.previewClick=!0},zoomOut:function(){this.scale=this.scale-.1,this.previewClick=!0},onBeforeEnter:function(){bo.set("modal",this.mask,this.$primevue.config.zIndex.modal)},onEnter:function(){this.focus(),this.$emit("show")},onBeforeLeave:function(){!this.isUnstyled&&Lc(this.mask,"p-overlay-mask-leave")},onLeave:function(){hy(),this.$emit("hide")},onAfterLeave:function(e){bo.clear(e),this.maskVisible=!1},focus:function(){var e=this.mask.querySelector("[autofocus]");e&&e.focus()},hidePreview:function(){this.previewVisible=!1,this.rotate=0,this.scale=1,hy()}},computed:{containerClass:function(){return[this.cx("root"),this.class]},rotateClass:function(){return"p-image-preview-rotate-"+this.rotate},imagePreviewStyle:function(){return{transform:"rotate("+this.rotate+"deg) scale("+this.scale+")"}},isZoomInDisabled:function(){return this.zoomInDisabled||this.scale>=1.5},isZoomOutDisabled:function(){return this.zoomOutDisabled||this.scale<=.5},rightAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.rotateRight:void 0},leftAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.rotateLeft:void 0},zoomInAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomIn:void 0},zoomOutAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomOut:void 0},zoomImageAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomImage:void 0},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0}},components:{Portal:td,EyeIcon:RS,RefreshIcon:V6,UndoIcon:q6,SearchMinusIcon:j6,SearchPlusIcon:U6,TimesIcon:Rf},directives:{focustrap:ES}};function Uy(t){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(t)}function Q4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function _b(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q4(Object(n),!0).forEach(function(l){_q(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q4(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function _q(t,e,n){return(e=xq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xq(t){var e=wq(t,"string");return Uy(e)=="symbol"?e:e+""}function wq(t,e){if(Uy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Uy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sq=["aria-label"],Cq=["aria-modal"],kq=["aria-label"],Tq=["aria-label"],Eq=["disabled","aria-label"],Iq=["disabled","aria-label"],Pq=["aria-label"],Aq=["src"];function Rq(t,e,n,l,m,d){var x=wn("RefreshIcon"),s=wn("UndoIcon"),T=wn("SearchMinusIcon"),E=wn("SearchPlusIcon"),A=wn("TimesIcon"),z=wn("Portal"),j=No("focustrap");return X(),pe("span",ie({class:d.containerClass,style:t.style},t.ptmi("root")),[jt(t.$slots,"image",{errorCallback:d.onError},function(){return[M("img",ie({style:t.imageStyle,class:t.imageClass,onError:e[0]||(e[0]=function(){return d.onError&&d.onError.apply(d,arguments)})},_b(_b({},t.$attrs),t.ptm("image"))),null,16)]}),t.preview?(X(),pe("button",ie({key:0,ref:"previewButton","aria-label":d.zoomImageAriaLabel,type:"button",class:t.cx("previewMask"),onClick:e[1]||(e[1]=function(){return d.onImageClick&&d.onImageClick.apply(d,arguments)})},_b(_b({},t.previewButtonProps),t.ptm("previewMask"))),[jt(t.$slots,t.$slots.previewicon?"previewicon":"indicatoricon",{},function(){return[(X(),bt(Tn(t.previewIcon||t.indicatorIcon?"i":"EyeIcon"),ie({class:t.cx("previewIcon")},t.ptm("previewIcon")),null,16,["class"]))]})],16,Sq)):Ct("",!0),ge(z,null,{default:Xe(function(){return[m.maskVisible?_r((X(),pe("div",ie({key:0,ref:d.maskRef,role:"dialog",class:t.cx("mask"),"aria-modal":m.maskVisible,onClick:e[8]||(e[8]=function(){return d.onMaskClick&&d.onMaskClick.apply(d,arguments)}),onKeydown:e[9]||(e[9]=function(){return d.onMaskKeydown&&d.onMaskKeydown.apply(d,arguments)})},t.ptm("mask")),[M("div",ie({class:t.cx("toolbar")},t.ptm("toolbar")),[M("button",ie({class:t.cx("rotateRightButton"),onClick:e[2]||(e[2]=function(){return d.rotateRight&&d.rotateRight.apply(d,arguments)}),type:"button","aria-label":d.rightAriaLabel},t.ptm("rotateRightButton"),{"data-pc-group-section":"action"}),[jt(t.$slots,"refresh",{},function(){return[ge(x,ka(mh(t.ptm("rotateRightIcon"))),null,16)]})],16,kq),M("button",ie({class:t.cx("rotateLeftButton"),onClick:e[3]||(e[3]=function(){return d.rotateLeft&&d.rotateLeft.apply(d,arguments)}),type:"button","aria-label":d.leftAriaLabel},t.ptm("rotateLeftButton"),{"data-pc-group-section":"action"}),[jt(t.$slots,"undo",{},function(){return[ge(s,ka(mh(t.ptm("rotateLeftIcon"))),null,16)]})],16,Tq),M("button",ie({class:t.cx("zoomOutButton"),onClick:e[4]||(e[4]=function(){return d.zoomOut&&d.zoomOut.apply(d,arguments)}),type:"button",disabled:d.isZoomOutDisabled,"aria-label":d.zoomOutAriaLabel},t.ptm("zoomOutButton"),{"data-pc-group-section":"action"}),[jt(t.$slots,"zoomout",{},function(){return[ge(T,ka(mh(t.ptm("zoomOutIcon"))),null,16)]})],16,Eq),M("button",ie({class:t.cx("zoomInButton"),onClick:e[5]||(e[5]=function(){return d.zoomIn&&d.zoomIn.apply(d,arguments)}),type:"button",disabled:d.isZoomInDisabled,"aria-label":d.zoomInAriaLabel},t.ptm("zoomInButton"),{"data-pc-group-section":"action"}),[jt(t.$slots,"zoomin",{},function(){return[ge(E,ka(mh(t.ptm("zoomInIcon"))),null,16)]})],16,Iq),M("button",ie({class:t.cx("closeButton"),type:"button",onClick:e[6]||(e[6]=function(){return d.hidePreview&&d.hidePreview.apply(d,arguments)}),"aria-label":d.closeAriaLabel,autofocus:""},t.ptm("closeButton"),{"data-pc-group-section":"action"}),[jt(t.$slots,"close",{},function(){return[ge(A,ka(mh(t.ptm("closeIcon"))),null,16)]})],16,Pq)],16),ge(Eh,ie({name:"p-image-original",onBeforeEnter:d.onBeforeEnter,onEnter:d.onEnter,onLeave:d.onLeave,onBeforeLeave:d.onBeforeLeave,onAfterLeave:d.onAfterLeave},t.ptm("transition")),{default:Xe(function(){return[m.previewVisible?(X(),pe("div",ka(ie({key:0},t.ptm("originalContainer"))),[jt(t.$slots,t.$slots.original?"original":"preview",{class:vn(t.cx("original")),style:Wl(d.imagePreviewStyle),previewCallback:d.onPreviewImageClick},function(){return[M("img",ie({src:t.$attrs.src,class:t.cx("original"),style:d.imagePreviewStyle,onClick:e[7]||(e[7]=function(){return d.onPreviewImageClick&&d.onPreviewImageClick.apply(d,arguments)})},t.ptm("original")),null,16,Aq)]})],16)):Ct("",!0)]}),_:3},16,["onBeforeEnter","onEnter","onLeave","onBeforeLeave","onAfterLeave"])],16,Cq)),[[j]]):Ct("",!0)]}),_:3})],16)}jy.render=Rq;var w2={name:"ExclamationTriangleIcon",extends:Qr};function Mq(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M13.4018 13.1893H0.598161C0.49329 13.189 0.390283 13.1615 0.299143 13.1097C0.208003 13.0578 0.131826 12.9832 0.0780112 12.8932C0.0268539 12.8015 0 12.6982 0 12.5931C0 12.4881 0.0268539 12.3848 0.0780112 12.293L6.47985 1.08982C6.53679 1.00399 6.61408 0.933574 6.70484 0.884867C6.7956 0.836159 6.897 0.810669 7 0.810669C7.103 0.810669 7.2044 0.836159 7.29516 0.884867C7.38592 0.933574 7.46321 1.00399 7.52015 1.08982L13.922 12.293C13.9731 12.3848 14 12.4881 14 12.5931C14 12.6982 13.9731 12.8015 13.922 12.8932C13.8682 12.9832 13.792 13.0578 13.7009 13.1097C13.6097 13.1615 13.5067 13.189 13.4018 13.1893ZM1.63046 11.989H12.3695L7 2.59425L1.63046 11.989Z",fill:"currentColor"},null,-1),M("path",{d:"M6.99996 8.78801C6.84143 8.78594 6.68997 8.72204 6.57787 8.60993C6.46576 8.49782 6.40186 8.34637 6.39979 8.18784V5.38703C6.39979 5.22786 6.46302 5.0752 6.57557 4.96265C6.68813 4.85009 6.84078 4.78686 6.99996 4.78686C7.15914 4.78686 7.31179 4.85009 7.42435 4.96265C7.5369 5.0752 7.60013 5.22786 7.60013 5.38703V8.18784C7.59806 8.34637 7.53416 8.49782 7.42205 8.60993C7.30995 8.72204 7.15849 8.78594 6.99996 8.78801Z",fill:"currentColor"},null,-1),M("path",{d:"M6.99996 11.1887C6.84143 11.1866 6.68997 11.1227 6.57787 11.0106C6.46576 10.8985 6.40186 10.7471 6.39979 10.5885V10.1884C6.39979 10.0292 6.46302 9.87658 6.57557 9.76403C6.68813 9.65147 6.84078 9.58824 6.99996 9.58824C7.15914 9.58824 7.31179 9.65147 7.42435 9.76403C7.5369 9.87658 7.60013 10.0292 7.60013 10.1884V10.5885C7.59806 10.7471 7.53416 10.8985 7.42205 11.0106C7.30995 11.1227 7.15849 11.1866 6.99996 11.1887Z",fill:"currentColor"},null,-1)]),16)}w2.render=Mq;var S2={name:"InfoCircleIcon",extends:Qr};function Dq(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.11101 12.8203C4.26215 13.5895 5.61553 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.61553 13.5895 4.26215 12.8203 3.11101C12.0511 1.95987 10.9579 1.06266 9.67879 0.532846C8.3997 0.00303296 6.99224 -0.13559 5.63437 0.134506C4.2765 0.404603 3.02922 1.07129 2.05026 2.05026C1.07129 3.02922 0.404603 4.2765 0.134506 5.63437C-0.13559 6.99224 0.00303296 8.3997 0.532846 9.67879C1.06266 10.9579 1.95987 12.0511 3.11101 12.8203ZM3.75918 2.14976C4.71846 1.50879 5.84628 1.16667 7 1.16667C8.5471 1.16667 10.0308 1.78125 11.1248 2.87521C12.2188 3.96918 12.8333 5.45291 12.8333 7C12.8333 8.15373 12.4912 9.28154 11.8502 10.2408C11.2093 11.2001 10.2982 11.9478 9.23232 12.3893C8.16642 12.8308 6.99353 12.9463 5.86198 12.7212C4.73042 12.4962 3.69102 11.9406 2.87521 11.1248C2.05941 10.309 1.50384 9.26958 1.27876 8.13803C1.05367 7.00647 1.16919 5.83358 1.61071 4.76768C2.05222 3.70178 2.79989 2.79074 3.75918 2.14976ZM7.00002 4.8611C6.84594 4.85908 6.69873 4.79698 6.58977 4.68801C6.48081 4.57905 6.4187 4.43185 6.41669 4.27776V3.88888C6.41669 3.73417 6.47815 3.58579 6.58754 3.4764C6.69694 3.367 6.84531 3.30554 7.00002 3.30554C7.15473 3.30554 7.3031 3.367 7.4125 3.4764C7.52189 3.58579 7.58335 3.73417 7.58335 3.88888V4.27776C7.58134 4.43185 7.51923 4.57905 7.41027 4.68801C7.30131 4.79698 7.1541 4.85908 7.00002 4.8611ZM7.00002 10.6945C6.84594 10.6925 6.69873 10.6304 6.58977 10.5214C6.48081 10.4124 6.4187 10.2652 6.41669 10.1111V6.22225C6.41669 6.06754 6.47815 5.91917 6.58754 5.80977C6.69694 5.70037 6.84531 5.63892 7.00002 5.63892C7.15473 5.63892 7.3031 5.70037 7.4125 5.80977C7.52189 5.91917 7.58335 6.06754 7.58335 6.22225V10.1111C7.58134 10.2652 7.51923 10.4124 7.41027 10.5214C7.30131 10.6304 7.1541 10.6925 7.00002 10.6945Z",fill:"currentColor"},null,-1)]),16)}S2.render=Dq;var Lq=function(e){var n=e.dt;return`
.p-inputgroup,
.p-inputgroup .p-iconfield,
.p-inputgroup .p-floatlabel,
.p-inputgroup .p-iftalabel {
    display: flex;
    align-items: stretch;
    width: 100%;
}

.p-inputgroup .p-inputtext,
.p-inputgroup .p-inputwrapper {
    flex: 1 1 auto;
    width: 1%;
}

.p-inputgroupaddon {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: `.concat(n("inputgroup.addon.padding"),`;
    background: `).concat(n("inputgroup.addon.background"),`;
    color: `).concat(n("inputgroup.addon.color"),`;
    border-block-start: 1px solid `).concat(n("inputgroup.addon.border.color"),`;
    border-block-end: 1px solid `).concat(n("inputgroup.addon.border.color"),`;
    min-width: `).concat(n("inputgroup.addon.min.width"),`;
}

.p-inputgroupaddon:first-child,
.p-inputgroupaddon + .p-inputgroupaddon {
    border-inline-start: 1px solid `).concat(n("inputgroup.addon.border.color"),`;
}

.p-inputgroupaddon:last-child {
    border-inline-end: 1px solid `).concat(n("inputgroup.addon.border.color"),`;
}

.p-inputgroupaddon:has(.p-button) {
    padding: 0;
    overflow: hidden;
}

.p-inputgroupaddon .p-button {
    border-radius: 0;
}

.p-inputgroup > .p-component,
.p-inputgroup > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iconfield > .p-component,
.p-inputgroup > .p-floatlabel > .p-component,
.p-inputgroup > .p-floatlabel > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel > .p-component,
.p-inputgroup > .p-iftalabel > .p-inputwrapper > .p-component {
    border-radius: 0;
    margin: 0;
}

.p-inputgroupaddon:first-child,
.p-inputgroup > .p-component:first-child,
.p-inputgroup > .p-inputwrapper:first-child > .p-component,
.p-inputgroup > .p-iconfield:first-child > .p-component,
.p-inputgroup > .p-floatlabel:first-child > .p-component,
.p-inputgroup > .p-floatlabel:first-child > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel:first-child > .p-component,
.p-inputgroup > .p-iftalabel:first-child > .p-inputwrapper > .p-component {
    border-start-start-radius: `).concat(n("inputgroup.addon.border.radius"),`;
    border-end-start-radius: `).concat(n("inputgroup.addon.border.radius"),`;
}

.p-inputgroupaddon:last-child,
.p-inputgroup > .p-component:last-child,
.p-inputgroup > .p-inputwrapper:last-child > .p-component,
.p-inputgroup > .p-iconfield:last-child > .p-component,
.p-inputgroup > .p-floatlabel:last-child > .p-component,
.p-inputgroup > .p-floatlabel:last-child > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel:last-child > .p-component,
.p-inputgroup > .p-iftalabel:last-child > .p-inputwrapper > .p-component {
    border-start-end-radius: `).concat(n("inputgroup.addon.border.radius"),`;
    border-end-end-radius: `).concat(n("inputgroup.addon.border.radius"),`;
}

.p-inputgroup .p-component:focus,
.p-inputgroup .p-component.p-focus,
.p-inputgroup .p-inputwrapper-focus,
.p-inputgroup .p-component:focus ~ label,
.p-inputgroup .p-component.p-focus ~ label,
.p-inputgroup .p-inputwrapper-focus ~ label {
    z-index: 1;
}

.p-inputgroup > .p-button:not(.p-button-icon-only) {
    width: auto;
}

.p-inputgroup .p-iconfield + .p-iconfield .p-inputtext {
    border-inline-start: 0;
}
`)},Oq={root:"p-inputgroup"},zq=Xn.extend({name:"inputgroup",theme:Lq,classes:Oq}),Bq={name:"BaseInputGroup",extends:mr,style:zq,provide:function(){return{$pcInputGroup:this,$parentInstance:this}}},Qg={name:"InputGroup",extends:Bq,inheritAttrs:!1};function Fq(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root")},t.ptmi("root")),[jt(t.$slots,"default")],16)}Qg.render=Fq;var $q={root:"p-inputgroupaddon"},Nq=Xn.extend({name:"inputgroupaddon",classes:$q}),Vq={name:"BaseInputGroupAddon",extends:mr,style:Nq,provide:function(){return{$pcInputGroupAddon:this,$parentInstance:this}}},ey={name:"InputGroupAddon",extends:Vq,inheritAttrs:!1};function jq(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root")},t.ptmi("root")),[jt(t.$slots,"default")],16)}ey.render=jq;var Uq=function(e){var n=e.dt;return`
.p-overlaybadge {
    position: relative;
}

.p-overlaybadge .p-badge {
    position: absolute;
    inset-block-start: 0;
    inset-inline-end: 0;
    transform: translate(50%, -50%);
    transform-origin: 100% 0;
    margin: 0;
    outline-width: `.concat(n("overlaybadge.outline.width"),`;
    outline-style: solid;
    outline-color: `).concat(n("overlaybadge.outline.color"),`;
}

.p-overlaybadge .p-badge:dir(rtl) {
    transform: translate(-50%, -50%);
}
`)},qq={root:"p-overlaybadge"},Hq=Xn.extend({name:"overlaybadge",theme:Uq,classes:qq}),Gq={name:"OverlayBadge",extends:Af,style:Hq,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},H6={name:"OverlayBadge",extends:Gq,inheritAttrs:!1,components:{Badge:Af}};function Wq(t,e,n,l,m,d){var x=wn("Badge");return X(),pe("div",ie({class:t.cx("root")},t.ptmi("root")),[jt(t.$slots,"default"),ge(x,ie(t.$props,{pt:t.ptm("pcBadge")}),null,16,["pt"])],16)}H6.render=Wq;var G6={name:"EyeSlashIcon",extends:Qr};function Kq(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.9414 6.74792C13.9437 6.75295 13.9455 6.757 13.9469 6.76003C13.982 6.8394 14.0001 6.9252 14.0001 7.01195C14.0001 7.0987 13.982 7.1845 13.9469 7.26386C13.6004 8.00059 13.1711 8.69549 12.6674 9.33515C12.6115 9.4071 12.54 9.46538 12.4582 9.50556C12.3765 9.54574 12.2866 9.56678 12.1955 9.56707C12.0834 9.56671 11.9737 9.53496 11.8788 9.47541C11.7838 9.41586 11.7074 9.3309 11.6583 9.23015C11.6092 9.12941 11.5893 9.01691 11.6008 8.90543C11.6124 8.79394 11.6549 8.68793 11.7237 8.5994C12.1065 8.09726 12.4437 7.56199 12.7313 6.99995C12.2595 6.08027 10.3402 2.8014 6.99732 2.8014C6.63723 2.80218 6.27816 2.83969 5.92569 2.91336C5.77666 2.93304 5.62568 2.89606 5.50263 2.80972C5.37958 2.72337 5.29344 2.59398 5.26125 2.44714C5.22907 2.30031 5.2532 2.14674 5.32885 2.01685C5.40451 1.88696 5.52618 1.79021 5.66978 1.74576C6.10574 1.64961 6.55089 1.60134 6.99732 1.60181C11.5916 1.60181 13.7864 6.40856 13.9414 6.74792ZM2.20333 1.61685C2.35871 1.61411 2.5091 1.67179 2.6228 1.77774L12.2195 11.3744C12.3318 11.4869 12.3949 11.6393 12.3949 11.7983C12.3949 11.9572 12.3318 12.1097 12.2195 12.2221C12.107 12.3345 11.9546 12.3976 11.7956 12.3976C11.6367 12.3976 11.4842 12.3345 11.3718 12.2221L10.5081 11.3584C9.46549 12.0426 8.24432 12.4042 6.99729 12.3981C2.403 12.3981 0.208197 7.59135 0.0532336 7.25198C0.0509364 7.24694 0.0490875 7.2429 0.0476856 7.23986C0.0162332 7.16518 3.05176e-05 7.08497 3.05176e-05 7.00394C3.05176e-05 6.92291 0.0162332 6.8427 0.0476856 6.76802C0.631261 5.47831 1.46902 4.31959 2.51084 3.36119L1.77509 2.62545C1.66914 2.51175 1.61146 2.36136 1.61421 2.20597C1.61695 2.05059 1.6799 1.90233 1.78979 1.79244C1.89968 1.68254 2.04794 1.6196 2.20333 1.61685ZM7.45314 8.35147L5.68574 6.57609V6.5361C5.5872 6.78938 5.56498 7.06597 5.62183 7.33173C5.67868 7.59749 5.8121 7.84078 6.00563 8.03158C6.19567 8.21043 6.43052 8.33458 6.68533 8.39089C6.94014 8.44721 7.20543 8.43359 7.45314 8.35147ZM1.26327 6.99994C1.7351 7.91163 3.64645 11.1985 6.99729 11.1985C7.9267 11.2048 8.8408 10.9618 9.64438 10.4947L8.35682 9.20718C7.86027 9.51441 7.27449 9.64491 6.69448 9.57752C6.11446 9.51014 5.57421 9.24881 5.16131 8.83592C4.74842 8.42303 4.4871 7.88277 4.41971 7.30276C4.35232 6.72274 4.48282 6.13697 4.79005 5.64041L3.35855 4.2089C2.4954 5.00336 1.78523 5.94935 1.26327 6.99994Z",fill:"currentColor"},null,-1)]),16)}G6.render=Kq;var Zq=function(e){var n=e.dt;return`
.p-password {
    display: inline-flex;
    position: relative;
}

.p-password .p-password-overlay {
    min-width: 100%;
}

.p-password-meter {
    height: `.concat(n("password.meter.height"),`;
    background: `).concat(n("password.meter.background"),`;
    border-radius: `).concat(n("password.meter.border.radius"),`;
}

.p-password-meter-label {
    height: 100%;
    width: 0;
    transition: width 1s ease-in-out;
    border-radius: `).concat(n("password.meter.border.radius"),`;
}

.p-password-meter-weak {
    background: `).concat(n("password.strength.weak.background"),`;
}

.p-password-meter-medium {
    background: `).concat(n("password.strength.medium.background"),`;
}

.p-password-meter-strong {
    background: `).concat(n("password.strength.strong.background"),`;
}

.p-password-fluid {
    display: flex;
}

.p-password-fluid .p-password-input {
    width: 100%;
}

.p-password-input::-ms-reveal,
.p-password-input::-ms-clear {
    display: none;
}

.p-password-overlay {
    padding: `).concat(n("password.overlay.padding"),`;
    background: `).concat(n("password.overlay.background"),`;
    color: `).concat(n("password.overlay.color"),`;
    border: 1px solid `).concat(n("password.overlay.border.color"),`;
    box-shadow: `).concat(n("password.overlay.shadow"),`;
    border-radius: `).concat(n("password.overlay.border.radius"),`;
}

.p-password-content {
    display: flex;
    flex-direction: column;
    gap: `).concat(n("password.content.gap"),`;
}

.p-password-toggle-mask-icon {
    inset-inline-end: `).concat(n("form.field.padding.x"),`;
    color: `).concat(n("password.icon.color"),`;
    position: absolute;
    top: 50%;
    margin-top: calc(-1 * calc(`).concat(n("icon.size"),` / 2));
    width: `).concat(n("icon.size"),`;
    height: `).concat(n("icon.size"),`;
}

.p-password:has(.p-password-toggle-mask-icon) .p-password-input {
    padding-inline-end: calc((`).concat(n("form.field.padding.x")," * 2) + ").concat(n("icon.size"),`);
}
`)},Xq={root:function(e){var n=e.props;return{position:n.appendTo==="self"?"relative":void 0}}},Yq={root:function(e){var n=e.instance;return["p-password p-component p-inputwrapper",{"p-inputwrapper-filled":n.$filled,"p-inputwrapper-focus":n.focused,"p-password-fluid":n.$fluid}]},pcInputText:"p-password-input",maskIcon:"p-password-toggle-mask-icon p-password-mask-icon",unmaskIcon:"p-password-toggle-mask-icon p-password-unmask-icon",overlay:"p-password-overlay p-component",content:"p-password-content",meter:"p-password-meter",meterLabel:function(e){var n=e.instance;return"p-password-meter-label ".concat(n.meter?"p-password-meter-"+n.meter.strength:"")},meterText:"p-password-meter-text"},Jq=Xn.extend({name:"password",theme:Zq,classes:Yq,inlineStyles:Xq}),Qq={name:"BasePassword",extends:Ah,props:{promptLabel:{type:String,default:null},mediumRegex:{type:[String,RegExp],default:"^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})"},strongRegex:{type:[String,RegExp],default:"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})"},weakLabel:{type:String,default:null},mediumLabel:{type:String,default:null},strongLabel:{type:String,default:null},feedback:{type:Boolean,default:!0},appendTo:{type:[String,Object],default:"body"},toggleMask:{type:Boolean,default:!1},hideIcon:{type:String,default:void 0},maskIcon:{type:String,default:void 0},showIcon:{type:String,default:void 0},unmaskIcon:{type:String,default:void 0},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},inputProps:{type:null,default:null},panelId:{type:String,default:null},panelClass:{type:[String,Object],default:null},panelStyle:{type:Object,default:null},panelProps:{type:null,default:null},overlayId:{type:String,default:null},overlayClass:{type:[String,Object],default:null},overlayStyle:{type:Object,default:null},overlayProps:{type:null,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null},autofocus:{type:Boolean,default:null}},style:Jq,provide:function(){return{$pcPassword:this,$parentInstance:this}}},yf={name:"Password",extends:Qq,inheritAttrs:!1,emits:["change","focus","blur","invalid"],inject:{$pcFluid:{default:null}},data:function(){return{id:this.$attrs.id,overlayVisible:!1,meter:null,infoText:null,focused:!1,unmasked:!1}},watch:{"$attrs.id":function(e){this.id=e||$o()}},mediumCheckRegExp:null,strongCheckRegExp:null,resizeListener:null,scrollHandler:null,overlay:null,mounted:function(){this.id=this.id||$o(),this.infoText=this.promptText,this.mediumCheckRegExp=new RegExp(this.mediumRegex),this.strongCheckRegExp=new RegExp(this.strongRegex)},beforeUnmount:function(){this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(bo.clear(this.overlay),this.overlay=null)},methods:{onOverlayEnter:function(e){bo.set("overlay",e,this.$primevue.config.zIndex.overlay),Sh(e,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),this.bindScrollListener(),this.bindResizeListener()},onOverlayLeave:function(){this.unbindScrollListener(),this.unbindResizeListener(),this.overlay=null},onOverlayAfterLeave:function(e){bo.clear(e)},alignOverlay:function(){this.appendTo==="self"?fS(this.overlay,this.$refs.input.$el):(this.overlay.style.minWidth=So(this.$refs.input.$el)+"px",D_(this.overlay,this.$refs.input.$el))},testStrength:function(e){var n=0;return this.strongCheckRegExp.test(e)?n=3:this.mediumCheckRegExp.test(e)?n=2:e.length&&(n=1),n},onInput:function(e){this.writeValue(e.target.value,e),this.$emit("change",e)},onFocus:function(e){this.focused=!0,this.feedback&&(this.setPasswordMeter(this.d_value),this.overlayVisible=!0),this.$emit("focus",e)},onBlur:function(e){this.focused=!1,this.feedback&&(this.overlayVisible=!1),this.$emit("blur",e)},onKeyUp:function(e){if(this.feedback){var n=e.target.value,l=this.checkPasswordStrength(n),m=l.meter,d=l.label;if(this.meter=m,this.infoText=d,e.code==="Escape"){this.overlayVisible&&(this.overlayVisible=!1);return}this.overlayVisible||(this.overlayVisible=!0)}},setPasswordMeter:function(){if(!this.d_value){this.meter=null,this.infoText=this.promptText;return}var e=this.checkPasswordStrength(this.d_value),n=e.meter,l=e.label;this.meter=n,this.infoText=l,this.overlayVisible||(this.overlayVisible=!0)},checkPasswordStrength:function(e){var n=null,l=null;switch(this.testStrength(e)){case 1:n=this.weakText,l={strength:"weak",width:"33.33%"};break;case 2:n=this.mediumText,l={strength:"medium",width:"66.66%"};break;case 3:n=this.strongText,l={strength:"strong",width:"100%"};break;default:n=this.promptText,l=null;break}return{label:n,meter:l}},onInvalid:function(e){this.$emit("invalid",e)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new B_(this.$refs.input.$el,function(){e.overlayVisible&&(e.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!L_()&&(e.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},overlayRef:function(e){this.overlay=e},onMaskToggle:function(){this.unmasked=!this.unmasked},onOverlayClick:function(e){ql.emit("overlay-click",{originalEvent:e,target:this.$el})}},computed:{inputType:function(){return this.unmasked?"text":"password"},weakText:function(){return this.weakLabel||this.$primevue.config.locale.weak},mediumText:function(){return this.mediumLabel||this.$primevue.config.locale.medium},strongText:function(){return this.strongLabel||this.$primevue.config.locale.strong},promptText:function(){return this.promptLabel||this.$primevue.config.locale.passwordPrompt},overlayUniqueId:function(){return this.id+"_overlay"}},components:{InputText:vo,Portal:td,EyeSlashIcon:G6,EyeIcon:RS}};function qy(t){"@babel/helpers - typeof";return qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qy(t)}function eE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function Pw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eE(Object(n),!0).forEach(function(l){eH(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function eH(t,e,n){return(e=tH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tH(t){var e=nH(t,"string");return qy(e)=="symbol"?e:e+""}function nH(t,e){if(qy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(qy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rH=["id"];function iH(t,e,n,l,m,d){var x=wn("InputText"),s=wn("Portal");return X(),pe("div",ie({class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[ge(x,ie({ref:"input",id:t.inputId,type:d.inputType,class:[t.cx("pcInputText"),t.inputClass],style:t.inputStyle,value:t.d_value,name:t.$formName,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-controls":t.overlayProps&&t.overlayProps.id||t.overlayId||t.panelProps&&t.panelProps.id||t.panelId||d.overlayUniqueId,"aria-expanded":m.overlayVisible,"aria-haspopup":!0,placeholder:t.placeholder,required:t.required,fluid:t.fluid,disabled:t.disabled,variant:t.variant,invalid:t.invalid,size:t.size,autofocus:t.autofocus,onInput:d.onInput,onFocus:d.onFocus,onBlur:d.onBlur,onKeyup:d.onKeyUp,onInvalid:d.onInvalid},t.inputProps,{pt:t.ptm("pcInputText"),unstyled:t.unstyled}),null,16,["id","type","class","style","value","name","aria-labelledby","aria-label","aria-controls","aria-expanded","placeholder","required","fluid","disabled","variant","invalid","size","autofocus","onInput","onFocus","onBlur","onKeyup","onInvalid","pt","unstyled"]),t.toggleMask&&m.unmasked?jt(t.$slots,t.$slots.maskicon?"maskicon":"hideicon",{key:0,toggleCallback:d.onMaskToggle},function(){return[(X(),bt(Tn(t.maskIcon?"i":"EyeSlashIcon"),ie({class:[t.cx("maskIcon"),t.maskIcon],onClick:d.onMaskToggle},t.ptm("maskIcon")),null,16,["class","onClick"]))]}):Ct("",!0),t.toggleMask&&!m.unmasked?jt(t.$slots,t.$slots.unmaskicon?"unmaskicon":"showicon",{key:1,toggleCallback:d.onMaskToggle},function(){return[(X(),bt(Tn(t.unmaskIcon?"i":"EyeIcon"),ie({class:[t.cx("unmaskIcon"),t.unmaskIcon],onClick:d.onMaskToggle},t.ptm("unmaskIcon")),null,16,["class","onClick"]))]}):Ct("",!0),M("span",ie({class:"p-hidden-accessible","aria-live":"polite"},t.ptm("hiddenAccesible"),{"data-p-hidden-accessible":!0}),Ue(m.infoText),17),ge(s,{appendTo:t.appendTo},{default:Xe(function(){return[ge(Eh,ie({name:"p-connected-overlay",onEnter:d.onOverlayEnter,onLeave:d.onOverlayLeave,onAfterLeave:d.onOverlayAfterLeave},t.ptm("transition")),{default:Xe(function(){return[m.overlayVisible?(X(),pe("div",ie({key:0,ref:d.overlayRef,id:t.overlayId||t.panelId||d.overlayUniqueId,class:[t.cx("overlay"),t.panelClass,t.overlayClass],style:[t.overlayStyle,t.panelStyle],onClick:e[0]||(e[0]=function(){return d.onOverlayClick&&d.onOverlayClick.apply(d,arguments)})},Pw(Pw(Pw({},t.panelProps),t.overlayProps),t.ptm("overlay"))),[jt(t.$slots,"header"),jt(t.$slots,"content",{},function(){return[M("div",ie({class:t.cx("content")},t.ptm("content")),[M("div",ie({class:t.cx("meter")},t.ptm("meter")),[M("div",ie({class:t.cx("meterLabel"),style:{width:m.meter?m.meter.width:""}},t.ptm("meterLabel")),null,16)],16),M("div",ie({class:t.cx("meterText")},t.ptm("meterText")),Ue(m.infoText),17)],16)]}),jt(t.$slots,"footer")],16,rH)):Ct("",!0)]}),_:3},16,["onEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo"])],16)}yf.render=iH;var oH=function(e){var n=e.dt;return`
.p-progressspinner {
    position: relative;
    margin: 0 auto;
    width: 100px;
    height: 100px;
    display: inline-block;
}

.p-progressspinner::before {
    content: "";
    display: block;
    padding-top: 100%;
}

.p-progressspinner-spin {
    height: 100%;
    transform-origin: center center;
    width: 100%;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    animation: p-progressspinner-rotate 2s linear infinite;
}

.p-progressspinner-circle {
    stroke-dasharray: 89, 200;
    stroke-dashoffset: 0;
    stroke: `.concat(n("progressspinner.color.1"),`;
    animation: p-progressspinner-dash 1.5s ease-in-out infinite, p-progressspinner-color 6s ease-in-out infinite;
    stroke-linecap: round;
}

@keyframes p-progressspinner-rotate {
    100% {
        transform: rotate(360deg);
    }
}
@keyframes p-progressspinner-dash {
    0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
    }
    50% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -35px;
    }
    100% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -124px;
    }
}
@keyframes p-progressspinner-color {
    100%,
    0% {
        stroke: `).concat(n("progressspinner.color.1"),`;
    }
    40% {
        stroke: `).concat(n("progressspinner.color.2"),`;
    }
    66% {
        stroke: `).concat(n("progressspinner.color.3"),`;
    }
    80%,
    90% {
        stroke: `).concat(n("progressspinner.color.4"),`;
    }
}
`)},sH={root:"p-progressspinner",spin:"p-progressspinner-spin",circle:"p-progressspinner-circle"},aH=Xn.extend({name:"progressspinner",theme:oH,classes:sH}),lH={name:"BaseProgressSpinner",extends:mr,props:{strokeWidth:{type:String,default:"2"},fill:{type:String,default:"none"},animationDuration:{type:String,default:"2s"}},style:aH,provide:function(){return{$pcProgressSpinner:this,$parentInstance:this}}},W6={name:"ProgressSpinner",extends:lH,inheritAttrs:!1,computed:{svgStyle:function(){return{"animation-duration":this.animationDuration}}}},cH=["fill","stroke-width"];function uH(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root"),role:"progressbar"},t.ptmi("root")),[(X(),pe("svg",ie({class:t.cx("spin"),viewBox:"25 25 50 50",style:d.svgStyle},t.ptm("spin")),[M("circle",ie({class:t.cx("circle"),cx:"50",cy:"50",r:"20",fill:t.fill,"stroke-width":t.strokeWidth,strokeMiterlimit:"10"},t.ptm("circle")),null,16,cH)],16))],16)}W6.render=uH;var K6={name:"BanIcon",extends:Qr};function dH(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M7 0C5.61553 0 4.26215 0.410543 3.11101 1.17971C1.95987 1.94888 1.06266 3.04213 0.532846 4.32122C0.00303296 5.6003 -0.13559 7.00776 0.134506 8.36563C0.404603 9.7235 1.07129 10.9708 2.05026 11.9497C3.02922 12.9287 4.2765 13.5954 5.63437 13.8655C6.99224 14.1356 8.3997 13.997 9.67879 13.4672C10.9579 12.9373 12.0511 12.0401 12.8203 10.889C13.5895 9.73785 14 8.38447 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0ZM1.16667 7C1.16549 5.65478 1.63303 4.35118 2.48889 3.31333L10.6867 11.5111C9.83309 12.2112 8.79816 12.6544 7.70243 12.789C6.60669 12.9236 5.49527 12.744 4.49764 12.2713C3.50001 11.7986 2.65724 11.0521 2.06751 10.1188C1.47778 9.18558 1.16537 8.10397 1.16667 7ZM11.5111 10.6867L3.31334 2.48889C4.43144 1.57388 5.84966 1.10701 7.29265 1.1789C8.73565 1.2508 10.1004 1.85633 11.1221 2.87795C12.1437 3.89956 12.7492 5.26435 12.8211 6.70735C12.893 8.15034 12.4261 9.56856 11.5111 10.6867Z",fill:"currentColor"},null,-1)]),16)}K6.render=dH;var Z6={name:"StarIcon",extends:Qr};function hH(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M10.9741 13.6721C10.8806 13.6719 10.7886 13.6483 10.7066 13.6033L7.00002 11.6545L3.29345 13.6033C3.19926 13.6539 3.09281 13.6771 2.98612 13.6703C2.87943 13.6636 2.77676 13.6271 2.6897 13.5651C2.60277 13.5014 2.53529 13.4147 2.4948 13.3148C2.45431 13.215 2.44241 13.1058 2.46042 12.9995L3.17881 8.87264L0.167699 5.95324C0.0922333 5.8777 0.039368 5.78258 0.0150625 5.67861C-0.00924303 5.57463 -0.00402231 5.46594 0.030136 5.36477C0.0621323 5.26323 0.122141 5.17278 0.203259 5.10383C0.284377 5.03488 0.383311 4.99023 0.488681 4.97501L4.63087 4.37126L6.48797 0.618832C6.54083 0.530159 6.61581 0.456732 6.70556 0.405741C6.79532 0.35475 6.89678 0.327942 7.00002 0.327942C7.10325 0.327942 7.20471 0.35475 7.29447 0.405741C7.38422 0.456732 7.4592 0.530159 7.51206 0.618832L9.36916 4.37126L13.5114 4.97501C13.6167 4.99023 13.7157 5.03488 13.7968 5.10383C13.8779 5.17278 13.9379 5.26323 13.9699 5.36477C14.0041 5.46594 14.0093 5.57463 13.985 5.67861C13.9607 5.78258 13.9078 5.8777 13.8323 5.95324L10.8212 8.87264L11.532 12.9995C11.55 13.1058 11.5381 13.215 11.4976 13.3148C11.4571 13.4147 11.3896 13.5014 11.3027 13.5651C11.2059 13.632 11.0917 13.6692 10.9741 13.6721ZM7.00002 10.4393C7.09251 10.4404 7.18371 10.4613 7.2675 10.5005L10.2098 12.029L9.65193 8.75036C9.6368 8.6584 9.64343 8.56418 9.6713 8.47526C9.69918 8.38633 9.74751 8.30518 9.81242 8.23832L12.1969 5.94559L8.90298 5.45648C8.81188 5.44198 8.72555 5.406 8.65113 5.35152C8.57671 5.29703 8.51633 5.2256 8.475 5.14314L7.00002 2.1626L5.52503 5.15078C5.4837 5.23324 5.42332 5.30467 5.3489 5.35916C5.27448 5.41365 5.18815 5.44963 5.09705 5.46412L1.80318 5.94559L4.18761 8.23832C4.25252 8.30518 4.30085 8.38633 4.32873 8.47526C4.3566 8.56418 4.36323 8.6584 4.3481 8.75036L3.7902 12.0519L6.73253 10.5234C6.81451 10.4762 6.9058 10.4475 7.00002 10.4393Z",fill:"currentColor"},null,-1)]),16)}Z6.render=hH;var X6={name:"StarFillIcon",extends:Qr};function pH(t,e,n,l,m,d){return X(),pe("svg",ie({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[M("path",{d:"M13.9718 5.36453C13.9398 5.26298 13.8798 5.17252 13.7986 5.10356C13.7175 5.0346 13.6186 4.98994 13.5132 4.97472L9.37043 4.37088L7.51307 0.617955C7.46021 0.529271 7.38522 0.455834 7.29545 0.404836C7.20568 0.353838 7.1042 0.327026 7.00096 0.327026C6.89771 0.327026 6.79624 0.353838 6.70647 0.404836C6.6167 0.455834 6.54171 0.529271 6.48885 0.617955L4.63149 4.37088L0.488746 4.97472C0.383363 4.98994 0.284416 5.0346 0.203286 5.10356C0.122157 5.17252 0.0621407 5.26298 0.03014 5.36453C-0.00402286 5.46571 -0.00924428 5.57442 0.0150645 5.67841C0.0393733 5.7824 0.0922457 5.87753 0.167722 5.95308L3.17924 8.87287L2.4684 13.0003C2.45038 13.1066 2.46229 13.2158 2.50278 13.3157C2.54328 13.4156 2.61077 13.5022 2.6977 13.5659C2.78477 13.628 2.88746 13.6644 2.99416 13.6712C3.10087 13.678 3.20733 13.6547 3.30153 13.6042L7.00096 11.6551L10.708 13.6042C10.79 13.6491 10.882 13.6728 10.9755 13.673C11.0958 13.6716 11.2129 13.6343 11.3119 13.5659C11.3988 13.5022 11.4663 13.4156 11.5068 13.3157C11.5473 13.2158 11.5592 13.1066 11.5412 13.0003L10.8227 8.87287L13.8266 5.95308C13.9033 5.87835 13.9577 5.7836 13.9833 5.67957C14.009 5.57554 14.005 5.4664 13.9718 5.36453Z",fill:"currentColor"},null,-1)]),16)}X6.render=pH;var fH=function(e){var n=e.dt;return`
.p-rating {
    position: relative;
    display: flex;
    align-items: center;
    gap: `.concat(n("rating.gap"),`;
}

.p-rating-option {
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    outline-color: transparent;
    border-radius: 50%;
    transition: background `).concat(n("rating.transition.duration"),", color ").concat(n("rating.transition.duration"),", border-color ").concat(n("rating.transition.duration"),", outline-color ").concat(n("rating.transition.duration"),", box-shadow ").concat(n("rating.transition.duration"),`;
}

.p-rating-option.p-focus-visible {
    box-shadow: `).concat(n("rating.focus.ring.shadow"),`;
    outline: `).concat(n("rating.focus.ring.width")," ").concat(n("rating.focus.ring.style")," ").concat(n("rating.focus.ring.color"),`;
    outline-offset: `).concat(n("rating.focus.ring.offset"),`;
}

.p-rating-icon {
    color: `).concat(n("rating.icon.color"),`;
    transition: background `).concat(n("rating.transition.duration"),", color ").concat(n("rating.transition.duration"),", border-color ").concat(n("rating.transition.duration"),", outline-color ").concat(n("rating.transition.duration"),", box-shadow ").concat(n("rating.transition.duration"),`;
    font-size: `).concat(n("rating.icon.size"),`;
    width: `).concat(n("rating.icon.size"),`;
    height: `).concat(n("rating.icon.size"),`;
}

.p-rating:not(.p-disabled):not(.p-readonly) .p-rating-option:hover .p-rating-icon {
    color: `).concat(n("rating.icon.hover.color"),`;
}

.p-rating-option-active .p-rating-icon {
    color: `).concat(n("rating.icon.active.color"),`;
}

.p-rating-icon.p-invalid { /* @todo */
    stroke: `).concat(n("rating.invalid.icon.color"),`;
}
`)},mH={root:function(e){var n=e.props;return["p-rating",{"p-readonly":n.readonly,"p-disabled":n.disabled}]},option:function(e){var n=e.instance,l=e.value;return["p-rating-option",{"p-rating-option-active":l<=n.d_value,"p-focus-visible":l===n.focusedOptionIndex&&n.isFocusVisibleItem}]},onIcon:function(e){var n=e.instance;return["p-rating-icon p-rating-on-icon",{"p-invalid":n.$invalid}]},offIcon:function(e){var n=e.instance;return["p-rating-icon p-rating-off-icon",{"p-invalid":n.$invalid}]}},gH=Xn.extend({name:"rating",theme:fH,classes:mH}),yH={name:"BaseRating",extends:z_,props:{readonly:{type:Boolean,default:!1},stars:{type:Number,default:5},onIcon:{type:String,default:void 0},offIcon:{type:String,default:void 0}},style:gH,provide:function(){return{$pcRating:this,$parentInstance:this}}},$l={name:"Rating",extends:yH,inheritAttrs:!1,emits:["change","focus","blur"],data:function(){return{d_name:this.name,focusedOptionIndex:-1,isFocusVisibleItem:!0}},watch:{name:function(e){this.d_name=e||$o()}},mounted:function(){this.d_name=this.d_name||$o()},methods:{getPTOptions:function(e,n){return this.ptm(e,{context:{active:n<=this.d_value,focused:n===this.focusedOptionIndex}})},onOptionClick:function(e,n){if(!this.readonly&&!this.disabled){this.onOptionSelect(e,n),this.isFocusVisibleItem=!1;var l=Nu(e.currentTarget);l&&Ro(l)}},onFocus:function(e,n){this.focusedOptionIndex=n,this.$emit("focus",e)},onBlur:function(e){var n,l;this.focusedOptionIndex=-1,this.$emit("blur",e),(n=(l=this.formField).onBlur)===null||n===void 0||n.call(l)},onChange:function(e,n){this.onOptionSelect(e,n),this.isFocusVisibleItem=!0},onOptionSelect:function(e,n){this.focusedOptionIndex===n||this.d_value===n?(this.focusedOptionIndex=-1,this.updateModel(e,null)):(this.focusedOptionIndex=n,this.updateModel(e,n||null))},updateModel:function(e,n){this.writeValue(n,e),this.$emit("change",{originalEvent:e,value:n})},starAriaLabel:function(e){return e===1?this.$primevue.config.locale.aria.star:this.$primevue.config.locale.aria.stars.replace(/{star}/g,e)}},components:{StarFillIcon:X6,StarIcon:Z6,BanIcon:K6}},vH=["onClick","data-p-active","data-p-focused"],bH=["value","name","checked","disabled","readonly","aria-label","onFocus","onChange"];function _H(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root")},t.ptmi("root")),[(X(!0),pe(an,null,fr(t.stars,function(x){return X(),pe("div",ie({key:x,class:t.cx("option",{value:x}),onClick:function(T){return d.onOptionClick(T,x)},ref_for:!0},d.getPTOptions("option",x),{"data-p-active":x<=t.d_value,"data-p-focused":x===m.focusedOptionIndex}),[M("span",ie({class:"p-hidden-accessible",ref_for:!0},t.ptm("hiddenOptionInputContainer"),{"data-p-hidden-accessible":!0}),[M("input",ie({type:"radio",value:x,name:m.d_name,checked:t.d_value===x,disabled:t.disabled,readonly:t.readonly,"aria-label":d.starAriaLabel(x),onFocus:function(T){return d.onFocus(T,x)},onBlur:e[0]||(e[0]=function(){return d.onBlur&&d.onBlur.apply(d,arguments)}),onChange:function(T){return d.onChange(T,x)},ref_for:!0},t.ptm("hiddenOptionInput")),null,16,bH)],16),x<=t.d_value?jt(t.$slots,"onicon",{key:0,value:x,class:vn(t.cx("onIcon"))},function(){return[(X(),bt(Tn(t.onIcon?"span":"StarFillIcon"),ie({class:[t.cx("onIcon"),t.onIcon],ref_for:!0},t.ptm("onIcon")),null,16,["class"]))]}):jt(t.$slots,"officon",{key:1,value:x,class:vn(t.cx("offIcon"))},function(){return[(X(),bt(Tn(t.offIcon?"span":"StarIcon"),ie({class:[t.cx("offIcon"),t.offIcon],ref_for:!0},t.ptm("offIcon")),null,16,["class"]))]})],16,vH)}),128))],16)}$l.render=_H;var xH=function(e){var n=e.dt;return`
.p-slider {
    position: relative;
    background: `.concat(n("slider.track.background"),`;
    border-radius: `).concat(n("slider.track.border.radius"),`;
}

.p-slider-handle {
    cursor: grab;
    touch-action: none;
    user-select: none;
    display: flex;
    justify-content: center;
    align-items: center;
    height: `).concat(n("slider.handle.height"),`;
    width: `).concat(n("slider.handle.width"),`;
    background: `).concat(n("slider.handle.background"),`;
    border-radius: `).concat(n("slider.handle.border.radius"),`;
    transition: background `).concat(n("slider.transition.duration"),", color ").concat(n("slider.transition.duration"),", border-color ").concat(n("slider.transition.duration"),", box-shadow ").concat(n("slider.transition.duration"),", outline-color ").concat(n("slider.transition.duration"),`;
    outline-color: transparent;
}

.p-slider-handle::before {
    content: "";
    width: `).concat(n("slider.handle.content.width"),`;
    height: `).concat(n("slider.handle.content.height"),`;
    display: block;
    background: `).concat(n("slider.handle.content.background"),`;
    border-radius: `).concat(n("slider.handle.content.border.radius"),`;
    box-shadow: `).concat(n("slider.handle.content.shadow"),`;
    transition: background `).concat(n("slider.transition.duration"),`;
}

.p-slider:not(.p-disabled) .p-slider-handle:hover {
    background: `).concat(n("slider.handle.hover.background"),`;
}

.p-slider:not(.p-disabled) .p-slider-handle:hover::before {
    background: `).concat(n("slider.handle.content.hover.background"),`;
}

.p-slider-handle:focus-visible {
    box-shadow: `).concat(n("slider.handle.focus.ring.shadow"),`;
    outline: `).concat(n("slider.handle.focus.ring.width")," ").concat(n("slider.handle.focus.ring.style")," ").concat(n("slider.handle.focus.ring.color"),`;
    outline-offset: `).concat(n("slider.handle.focus.ring.offset"),`;
}

.p-slider-range {
    display: block;
    background: `).concat(n("slider.range.background"),`;
    border-radius: `).concat(n("slider.border.radius"),`;
}

.p-slider.p-slider-horizontal {
    height: `).concat(n("slider.track.size"),`;
}

.p-slider-horizontal .p-slider-range {
    inset-block-start: 0;
    inset-inline-start: 0;
    height: 100%;
}

.p-slider-horizontal .p-slider-handle {
    inset-block-start: 50%;
    margin-block-start: calc(-1 * calc(`).concat(n("slider.handle.height"),` / 2));
    margin-inline-start: calc(-1 * calc(`).concat(n("slider.handle.width"),` / 2));
}

.p-slider-vertical {
    min-height: 100px;
    width: `).concat(n("slider.track.size"),`;
}

.p-slider-vertical .p-slider-handle {
    inset-inline-start: 50%;
    margin-inline-start: calc(-1 * calc(`).concat(n("slider.handle.width"),` / 2));
    margin-block-end: calc(-1 * calc(`).concat(n("slider.handle.height"),` / 2));
}

.p-slider-vertical .p-slider-range {
    inset-block-end: 0;
    inset-inline-start: 0;
    width: 100%;
}
`)},wH={handle:{position:"absolute"},range:{position:"absolute"}},SH={root:function(e){var n=e.instance,l=e.props;return["p-slider p-component",{"p-disabled":l.disabled,"p-invalid":n.$invalid,"p-slider-horizontal":l.orientation==="horizontal","p-slider-vertical":l.orientation==="vertical"}]},range:"p-slider-range",handle:"p-slider-handle"},CH=Xn.extend({name:"slider",theme:xH,classes:SH,inlineStyles:wH}),kH={name:"BaseSlider",extends:z_,props:{min:{type:Number,default:0},max:{type:Number,default:100},orientation:{type:String,default:"horizontal"},step:{type:Number,default:null},range:{type:Boolean,default:!1},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:CH,provide:function(){return{$pcSlider:this,$parentInstance:this}}};function TH(t){return AH(t)||PH(t)||IH(t)||EH()}function EH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IH(t,e){if(t){if(typeof t=="string")return C2(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C2(t,e):void 0}}function PH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function AH(t){if(Array.isArray(t))return C2(t)}function C2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}var k2={name:"Slider",extends:kH,inheritAttrs:!1,emits:["change","slideend"],dragging:!1,handleIndex:null,initX:null,initY:null,barWidth:null,barHeight:null,dragListener:null,dragEndListener:null,beforeUnmount:function(){this.unbindDragListeners()},methods:{updateDomData:function(){var e=this.$el.getBoundingClientRect();this.initX=e.left+yP(),this.initY=e.top+vP(),this.barWidth=this.$el.offsetWidth,this.barHeight=this.$el.offsetHeight},setValue:function(e){var n,l=e.touches?e.touches[0].pageX:e.pageX,m=e.touches?e.touches[0].pageY:e.pageY;this.orientation==="horizontal"?fy(this.$el)?n=(this.initX+this.barWidth-l)*100/this.barWidth:n=(l-this.initX)*100/this.barWidth:n=(this.initY+this.barHeight-m)*100/this.barHeight;var d=(this.max-this.min)*(n/100)+this.min;if(this.step){var x=this.range?this.value[this.handleIndex]:this.value,s=d-x;s<0?d=x+Math.ceil(d/this.step-x/this.step)*this.step:s>0&&(d=x+Math.floor(d/this.step-x/this.step)*this.step)}else d=Math.floor(d);this.updateModel(e,d)},updateModel:function(e,n){var l=parseFloat(n.toFixed(10)),m;this.range?(m=this.value?TH(this.value):[],this.handleIndex==0?(l<this.min?l=this.min:l>=this.max&&(l=this.max),m[0]=l):(l>this.max?l=this.max:l<=this.min&&(l=this.min),m[1]=l)):(l<this.min?l=this.min:l>this.max&&(l=this.max),m=l),this.writeValue(m,e),this.$emit("change",m)},onDragStart:function(e,n){this.disabled||(this.$el.setAttribute("data-p-sliding",!0),this.dragging=!0,this.updateDomData(),this.range&&this.value[0]===this.max?this.handleIndex=0:this.handleIndex=n,e.currentTarget.focus())},onDrag:function(e){this.dragging&&this.setValue(e)},onDragEnd:function(e){this.dragging&&(this.dragging=!1,this.$el.setAttribute("data-p-sliding",!1),this.$emit("slideend",{originalEvent:e,value:this.value}))},onBarClick:function(e){this.disabled||Ci(e.target,"data-pc-section")!=="handle"&&(this.updateDomData(),this.setValue(e))},onMouseDown:function(e,n){this.bindDragListeners(),this.onDragStart(e,n)},onKeyDown:function(e,n){switch(this.handleIndex=n,e.code){case"ArrowDown":case"ArrowLeft":this.decrementValue(e,n),e.preventDefault();break;case"ArrowUp":case"ArrowRight":this.incrementValue(e,n),e.preventDefault();break;case"PageDown":this.decrementValue(e,n,!0),e.preventDefault();break;case"PageUp":this.incrementValue(e,n,!0),e.preventDefault();break;case"Home":this.updateModel(e,this.min),e.preventDefault();break;case"End":this.updateModel(e,this.max),e.preventDefault();break}},onBlur:function(e,n){var l,m;(l=(m=this.formField).onBlur)===null||l===void 0||l.call(m,e)},decrementValue:function(e,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,m;this.range?this.step?m=this.value[n]-this.step:m=this.value[n]-1:this.step?m=this.value-this.step:!this.step&&l?m=this.value-10:m=this.value-1,this.updateModel(e,m),e.preventDefault()},incrementValue:function(e,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,m;this.range?this.step?m=this.value[n]+this.step:m=this.value[n]+1:this.step?m=this.value+this.step:!this.step&&l?m=this.value+10:m=this.value+1,this.updateModel(e,m),e.preventDefault()},bindDragListeners:function(){this.dragListener||(this.dragListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.dragListener)),this.dragEndListener||(this.dragEndListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.dragEndListener))},unbindDragListeners:function(){this.dragListener&&(document.removeEventListener("mousemove",this.dragListener),this.dragListener=null),this.dragEndListener&&(document.removeEventListener("mouseup",this.dragEndListener),this.dragEndListener=null)},rangeStyle:function(){if(this.range){var e=this.rangeEndPosition>this.rangeStartPosition?this.rangeEndPosition-this.rangeStartPosition:this.rangeStartPosition-this.rangeEndPosition,n=this.rangeEndPosition>this.rangeStartPosition?this.rangeStartPosition:this.rangeEndPosition;return this.horizontal?{"inset-inline-start":n+"%",width:e+"%"}:{bottom:n+"%",height:e+"%"}}else return this.horizontal?{width:this.handlePosition+"%"}:{height:this.handlePosition+"%"}},handleStyle:function(){return this.horizontal?{"inset-inline-start":this.handlePosition+"%"}:{bottom:this.handlePosition+"%"}},rangeStartHandleStyle:function(){return this.horizontal?{"inset-inline-start":this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%"}},rangeEndHandleStyle:function(){return this.horizontal?{"inset-inline-start":this.rangeEndPosition+"%"}:{bottom:this.rangeEndPosition+"%"}}},computed:{value:function(){var e;if(this.range){var n,l,m,d;return[(n=(l=this.d_value)===null||l===void 0?void 0:l[0])!==null&&n!==void 0?n:this.min,(m=(d=this.d_value)===null||d===void 0?void 0:d[1])!==null&&m!==void 0?m:this.max]}return(e=this.d_value)!==null&&e!==void 0?e:this.min},horizontal:function(){return this.orientation==="horizontal"},vertical:function(){return this.orientation==="vertical"},handlePosition:function(){return this.value<this.min?0:this.value>this.max?100:(this.value-this.min)*100/(this.max-this.min)},rangeStartPosition:function(){return this.value&&this.value[0]!==void 0?this.value[0]<this.min?0:(this.value[0]-this.min)*100/(this.max-this.min):0},rangeEndPosition:function(){return this.value&&this.value.length===2&&this.value[1]!==void 0?this.value[1]>this.max?100:(this.value[1]-this.min)*100/(this.max-this.min):100}}},RH=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation"],MH=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation"],DH=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation"];function LH(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root"),onClick:e[18]||(e[18]=function(){return d.onBarClick&&d.onBarClick.apply(d,arguments)})},t.ptmi("root"),{"data-p-sliding":!1}),[M("span",ie({class:t.cx("range"),style:[t.sx("range"),d.rangeStyle()]},t.ptm("range")),null,16),t.range?Ct("",!0):(X(),pe("span",ie({key:0,class:t.cx("handle"),style:[t.sx("handle"),d.handleStyle()],onTouchstartPassive:e[0]||(e[0]=function(x){return d.onDragStart(x)}),onTouchmovePassive:e[1]||(e[1]=function(x){return d.onDrag(x)}),onTouchend:e[2]||(e[2]=function(x){return d.onDragEnd(x)}),onMousedown:e[3]||(e[3]=function(x){return d.onMouseDown(x)}),onKeydown:e[4]||(e[4]=function(x){return d.onKeyDown(x)}),onBlur:e[5]||(e[5]=function(x){return d.onBlur(x)}),tabindex:t.tabindex,role:"slider","aria-valuemin":t.min,"aria-valuenow":t.d_value,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-orientation":t.orientation},t.ptm("handle")),null,16,RH)),t.range?(X(),pe("span",ie({key:1,class:t.cx("handle"),style:[t.sx("handle"),d.rangeStartHandleStyle()],onTouchstartPassive:e[6]||(e[6]=function(x){return d.onDragStart(x,0)}),onTouchmovePassive:e[7]||(e[7]=function(x){return d.onDrag(x)}),onTouchend:e[8]||(e[8]=function(x){return d.onDragEnd(x)}),onMousedown:e[9]||(e[9]=function(x){return d.onMouseDown(x,0)}),onKeydown:e[10]||(e[10]=function(x){return d.onKeyDown(x,0)}),onBlur:e[11]||(e[11]=function(x){return d.onBlur(x,0)}),tabindex:t.tabindex,role:"slider","aria-valuemin":t.min,"aria-valuenow":t.d_value?t.d_value[0]:null,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-orientation":t.orientation},t.ptm("startHandler")),null,16,MH)):Ct("",!0),t.range?(X(),pe("span",ie({key:2,class:t.cx("handle"),style:[t.sx("handle"),d.rangeEndHandleStyle()],onTouchstartPassive:e[12]||(e[12]=function(x){return d.onDragStart(x,1)}),onTouchmovePassive:e[13]||(e[13]=function(x){return d.onDrag(x)}),onTouchend:e[14]||(e[14]=function(x){return d.onDragEnd(x)}),onMousedown:e[15]||(e[15]=function(x){return d.onMouseDown(x,1)}),onKeydown:e[16]||(e[16]=function(x){return d.onKeyDown(x,1)}),onBlur:e[17]||(e[17]=function(x){return d.onBlur(x,1)}),tabindex:t.tabindex,role:"slider","aria-valuemin":t.min,"aria-valuenow":t.d_value?t.d_value[1]:null,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-orientation":t.orientation},t.ptm("endHandler")),null,16,DH)):Ct("",!0)],16)}k2.render=LH;var OH=function(e){var n=e.dt;return`
.p-splitter {
    display: flex;
    flex-wrap: nowrap;
    border: 1px solid `.concat(n("splitter.border.color"),`;
    background: `).concat(n("splitter.background"),`;
    border-radius: `).concat(n("border.radius.md"),`;
    color: `).concat(n("splitter.color"),`;
}

.p-splitter-vertical {
    flex-direction: column;
}

.p-splitter-gutter {
    flex-grow: 0;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
    background: `).concat(n("splitter.gutter.background"),`;
}

.p-splitter-gutter-handle {
    border-radius: `).concat(n("splitter.handle.border.radius"),`;
    background: `).concat(n("splitter.handle.background"),`;
    transition: outline-color `).concat(n("splitter.transition.duration"),", box-shadow ").concat(n("splitter.transition.duration"),`;
    outline-color: transparent;
}

.p-splitter-gutter-handle:focus-visible {
    box-shadow: `).concat(n("splitter.handle.focus.ring.shadow"),`;
    outline: `).concat(n("splitter.handle.focus.ring.width")," ").concat(n("splitter.handle.focus.ring.style")," ").concat(n("splitter.handle.focus.ring.color"),`;
    outline-offset: `).concat(n("splitter.handle.focus.ring.offset"),`;
}

.p-splitter-horizontal.p-splitter-resizing {
    cursor: col-resize;
    user-select: none;
}

.p-splitter-vertical.p-splitter-resizing {
    cursor: row-resize;
    user-select: none;
}

.p-splitter-horizontal > .p-splitter-gutter > .p-splitter-gutter-handle {
    height: `).concat(n("splitter.handle.size"),`;
    width: 100%;
}

.p-splitter-vertical > .p-splitter-gutter > .p-splitter-gutter-handle {
    width: `).concat(n("splitter.handle.size"),`;
    height: 100%;
}

.p-splitter-horizontal > .p-splitter-gutter {
    cursor: col-resize;
}

.p-splitter-vertical > .p-splitter-gutter {
    cursor: row-resize;
}

.p-splitterpanel {
    flex-grow: 1;
    overflow: hidden;
}

.p-splitterpanel-nested {
    display: flex;
}

.p-splitterpanel .p-splitter {
    flex-grow: 1;
    border: 0 none;
}
`)},zH={root:function(e){var n=e.props;return["p-splitter p-component","p-splitter-"+n.layout]},gutter:"p-splitter-gutter",gutterHandle:"p-splitter-gutter-handle"},BH={root:function(e){var n=e.props;return[{display:"flex","flex-wrap":"nowrap"},n.layout==="vertical"?{"flex-direction":"column"}:""]}},FH=Xn.extend({name:"splitter",theme:OH,classes:zH,inlineStyles:BH}),$H={name:"BaseSplitter",extends:mr,props:{layout:{type:String,default:"horizontal"},gutterSize:{type:Number,default:4},stateKey:{type:String,default:null},stateStorage:{type:String,default:"session"},step:{type:Number,default:5}},style:FH,provide:function(){return{$pcSplitter:this,$parentInstance:this}}};function tE(t){return UH(t)||jH(t)||VH(t)||NH()}function NH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VH(t,e){if(t){if(typeof t=="string")return T2(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T2(t,e):void 0}}function jH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UH(t){if(Array.isArray(t))return T2(t)}function T2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}var Y6={name:"Splitter",extends:$H,inheritAttrs:!1,emits:["resizestart","resizeend","resize"],dragging:!1,mouseMoveListener:null,mouseUpListener:null,touchMoveListener:null,touchEndListener:null,size:null,gutterElement:null,startPos:null,prevPanelElement:null,nextPanelElement:null,nextPanelSize:null,prevPanelSize:null,panelSizes:null,prevPanelIndex:null,timer:null,data:function(){return{prevSize:null}},mounted:function(){this.initializePanels()},beforeUnmount:function(){this.clear(),this.unbindMouseListeners()},methods:{isSplitterPanel:function(e){return e.type.name==="SplitterPanel"},initializePanels:function(){var e=this;if(this.panels&&this.panels.length){var n=!1;if(this.isStateful()&&(n=this.restoreState()),!n){var l=tE(this.$el.children).filter(function(d){return d.getAttribute("data-pc-name")==="splitterpanel"}),m=[];this.panels.map(function(d,x){var s=d.props&&d.props.size?d.props.size:null,T=s||100/e.panels.length;m[x]=T,l[x].style.flexBasis="calc("+T+"% - "+(e.panels.length-1)*e.gutterSize+"px)"}),this.panelSizes=m,this.prevSize=parseFloat(m[0]).toFixed(4)}}},onResizeStart:function(e,n,l){this.gutterElement=e.currentTarget||e.target.parentElement,this.size=this.horizontal?bs(this.$el):Mc(this.$el),l||(this.dragging=!0,this.startPos=this.layout==="horizontal"?e.pageX||e.changedTouches[0].pageX:e.pageY||e.changedTouches[0].pageY),this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,l?(this.prevPanelSize=this.horizontal?So(this.prevPanelElement,!0):jl(this.prevPanelElement,!0),this.nextPanelSize=this.horizontal?So(this.nextPanelElement,!0):jl(this.nextPanelElement,!0)):(this.prevPanelSize=100*(this.horizontal?So(this.prevPanelElement,!0):jl(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal?So(this.nextPanelElement,!0):jl(this.nextPanelElement,!0))/this.size),this.prevPanelIndex=n,this.$emit("resizestart",{originalEvent:e,sizes:this.panelSizes}),this.$refs.gutter[n].setAttribute("data-p-gutter-resizing",!0),this.$el.setAttribute("data-p-resizing",!0)},onResize:function(e,n,l){var m,d,x;l?this.horizontal?(d=100*(this.prevPanelSize+n)/this.size,x=100*(this.nextPanelSize-n)/this.size):(d=100*(this.prevPanelSize-n)/this.size,x=100*(this.nextPanelSize+n)/this.size):(this.horizontal?fy(this.$el)?m=(this.startPos-e.pageX)*100/this.size:m=(e.pageX-this.startPos)*100/this.size:m=(e.pageY-this.startPos)*100/this.size,d=this.prevPanelSize+m,x=this.nextPanelSize-m),this.validateResize(d,x)&&(this.prevPanelElement.style.flexBasis="calc("+d+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+x+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.panelSizes[this.prevPanelIndex]=d,this.panelSizes[this.prevPanelIndex+1]=x,this.prevSize=parseFloat(d).toFixed(4)),this.$emit("resize",{originalEvent:e,sizes:this.panelSizes})},onResizeEnd:function(e){this.isStateful()&&this.saveState(),this.$emit("resizeend",{originalEvent:e,sizes:this.panelSizes}),this.$refs.gutter.forEach(function(n){return n.setAttribute("data-p-gutter-resizing",!1)}),this.$el.setAttribute("data-p-resizing",!1),this.clear()},repeat:function(e,n,l){this.onResizeStart(e,n,!0),this.onResize(e,l,!0)},setTimer:function(e,n,l){var m=this;this.timer||(this.timer=setInterval(function(){m.repeat(e,n,l)},40))},clearTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onGutterKeyUp:function(){this.clearTimer(),this.onResizeEnd()},onGutterKeyDown:function(e,n){switch(e.code){case"ArrowLeft":{this.layout==="horizontal"&&this.setTimer(e,n,this.step*-1),e.preventDefault();break}case"ArrowRight":{this.layout==="horizontal"&&this.setTimer(e,n,this.step),e.preventDefault();break}case"ArrowDown":{this.layout==="vertical"&&this.setTimer(e,n,this.step*-1),e.preventDefault();break}case"ArrowUp":{this.layout==="vertical"&&this.setTimer(e,n,this.step),e.preventDefault();break}}},onGutterMouseDown:function(e,n){this.onResizeStart(e,n),this.bindMouseListeners()},onGutterTouchStart:function(e,n){this.onResizeStart(e,n),this.bindTouchListeners(),e.preventDefault()},onGutterTouchMove:function(e){this.onResize(e),e.preventDefault()},onGutterTouchEnd:function(e){this.onResizeEnd(e),this.unbindTouchListeners(),e.preventDefault()},bindMouseListeners:function(){var e=this;this.mouseMoveListener||(this.mouseMoveListener=function(n){return e.onResize(n)},document.addEventListener("mousemove",this.mouseMoveListener)),this.mouseUpListener||(this.mouseUpListener=function(n){e.onResizeEnd(n),e.unbindMouseListeners()},document.addEventListener("mouseup",this.mouseUpListener))},bindTouchListeners:function(){var e=this;this.touchMoveListener||(this.touchMoveListener=function(n){return e.onResize(n.changedTouches[0])},document.addEventListener("touchmove",this.touchMoveListener)),this.touchEndListener||(this.touchEndListener=function(n){e.resizeEnd(n),e.unbindTouchListeners()},document.addEventListener("touchend",this.touchEndListener))},validateResize:function(e,n){if(e>100||e<0||n>100||n<0)return!1;var l=zc(this.panels[this.prevPanelIndex],"minSize");if(this.panels[this.prevPanelIndex].props&&l&&l>e)return!1;var m=zc(this.panels[this.prevPanelIndex+1],"minSize");return!(this.panels[this.prevPanelIndex+1].props&&m&&m>n)},unbindMouseListeners:function(){this.mouseMoveListener&&(document.removeEventListener("mousemove",this.mouseMoveListener),this.mouseMoveListener=null),this.mouseUpListener&&(document.removeEventListener("mouseup",this.mouseUpListener),this.mouseUpListener=null)},unbindTouchListeners:function(){this.touchMoveListener&&(document.removeEventListener("touchmove",this.touchMoveListener),this.touchMoveListener=null),this.touchEndListener&&(document.removeEventListener("touchend",this.touchEndListener),this.touchEndListener=null)},clear:function(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null},isStateful:function(){return this.stateKey!=null},getStorage:function(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}},saveState:function(){i0(this.panelSizes)&&this.getStorage().setItem(this.stateKey,JSON.stringify(this.panelSizes))},restoreState:function(){var e=this,n=this.getStorage(),l=n.getItem(this.stateKey);if(l){this.panelSizes=JSON.parse(l);var m=tE(this.$el.children).filter(function(d){return d.getAttribute("data-pc-name")==="splitterpanel"});return m.forEach(function(d,x){d.style.flexBasis="calc("+e.panelSizes[x]+"% - "+(e.panels.length-1)*e.gutterSize+"px)"}),!0}return!1},resetState:function(){this.initializePanels()}},computed:{panels:function(){var e=this,n=[];return this.$slots.default().forEach(function(l){e.isSplitterPanel(l)?n.push(l):l.children instanceof Array&&l.children.forEach(function(m){e.isSplitterPanel(m)&&n.push(m)})}),n},gutterStyle:function(){return this.horizontal?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}},horizontal:function(){return this.layout==="horizontal"},getPTOptions:function(){var e;return{context:{nested:(e=this.$parentInstance)===null||e===void 0?void 0:e.nestedState}}}}},qH=["onMousedown","onTouchstart","onTouchmove","onTouchend"],HH=["aria-orientation","aria-valuenow","onKeydown"];function GH(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root"),style:t.sx("root"),"data-p-resizing":!1},t.ptmi("root",d.getPTOptions)),[(X(!0),pe(an,null,fr(d.panels,function(x,s){return X(),pe(an,{key:s},[(X(),bt(Tn(x),{tabindex:"-1"})),s!==d.panels.length-1?(X(),pe("div",ie({key:0,ref_for:!0,ref:"gutter",class:t.cx("gutter"),role:"separator",tabindex:"-1",onMousedown:function(E){return d.onGutterMouseDown(E,s)},onTouchstart:function(E){return d.onGutterTouchStart(E,s)},onTouchmove:function(E){return d.onGutterTouchMove(E,s)},onTouchend:function(E){return d.onGutterTouchEnd(E,s)},"data-p-gutter-resizing":!1},t.ptm("gutter")),[M("div",ie({class:t.cx("gutterHandle"),tabindex:"0",style:[d.gutterStyle],"aria-orientation":t.layout,"aria-valuenow":m.prevSize,onKeyup:e[0]||(e[0]=function(){return d.onGutterKeyUp&&d.onGutterKeyUp.apply(d,arguments)}),onKeydown:function(E){return d.onGutterKeyDown(E,s)},ref_for:!0},t.ptm("gutterHandle")),null,16,HH)],16,qH)):Ct("",!0)],64)}),128))],16)}Y6.render=GH;var WH={root:function(e){var n=e.instance;return["p-splitterpanel",{"p-splitterpanel-nested":n.isNested}]}},KH=Xn.extend({name:"splitterpanel",classes:WH}),ZH={name:"BaseSplitterPanel",extends:mr,props:{size:{type:Number,default:null},minSize:{type:Number,default:null}},style:KH,provide:function(){return{$pcSplitterPanel:this,$parentInstance:this}}},E2={name:"SplitterPanel",extends:ZH,inheritAttrs:!1,data:function(){return{nestedState:null}},computed:{isNested:function(){var e=this;return this.$slots.default().some(function(n){return e.nestedState=n.type.name==="Splitter"?!0:null,e.nestedState})},getPTOptions:function(){return{context:{nested:this.isNested}}}}};function XH(t,e,n,l,m,d){return X(),pe("div",ie({ref:"container",class:t.cx("root")},t.ptmi("root",d.getPTOptions)),[jt(t.$slots,"default")],16)}E2.render=XH;var YH={root:function(e){var n=e.instance,l=e.props;return["p-tab",{"p-tab-active":n.active,"p-disabled":l.disabled}]}},JH=Xn.extend({name:"tab",classes:YH}),QH={name:"BaseTab",extends:mr,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:JH,provide:function(){return{$pcTab:this,$parentInstance:this}}},Hy={name:"Tab",extends:QH,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(e){switch(e.code){case"ArrowRight":this.onArrowRightKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(e);break}},onArrowRightKey:function(e){var n=this.findNextTab(e.currentTarget);n?this.changeFocusedTab(e,n):this.onHomeKey(e),e.preventDefault()},onArrowLeftKey:function(e){var n=this.findPrevTab(e.currentTarget);n?this.changeFocusedTab(e,n):this.onEndKey(e),e.preventDefault()},onHomeKey:function(e){var n=this.findFirstTab();this.changeFocusedTab(e,n),e.preventDefault()},onEndKey:function(e){var n=this.findLastTab();this.changeFocusedTab(e,n),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.findLastTab()),e.preventDefault()},onPageUpKey:function(e){this.scrollInView(this.findFirstTab()),e.preventDefault()},onEnterKey:function(e){this.changeActiveValue(),e.preventDefault()},findNextTab:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=n?e:e.nextElementSibling;return l?Ci(l,"data-p-disabled")||Ci(l,"data-pc-section")==="inkbar"?this.findNextTab(l):yo(l,'[data-pc-name="tab"]'):null},findPrevTab:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=n?e:e.previousElementSibling;return l?Ci(l,"data-p-disabled")||Ci(l,"data-pc-section")==="inkbar"?this.findPrevTab(l):yo(l,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.content.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.content.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(e,n){Ro(n),this.scrollInView(n)},scrollInView:function(e){var n;e==null||(n=e.scrollIntoView)===null||n===void 0||n.call(e,{block:"nearest"})}},computed:{active:function(){var e;return $c((e=this.$pcTabs)===null||e===void 0?void 0:e.d_value,this.value)},id:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tab_").concat(this.value)},ariaControls:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tabpanel_").concat(this.value)},attrs:function(){return ie(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}}},directives:{ripple:zs}};function eG(t,e,n,l,m,d){var x=No("ripple");return t.asChild?jt(t.$slots,"default",{key:1,class:vn(t.cx("root")),active:d.active,a11yAttrs:d.a11yAttrs,onClick:d.onClick}):_r((X(),bt(Tn(t.as),ie({key:0,class:t.cx("root"),onClick:d.onClick},d.attrs),{default:Xe(function(){return[jt(t.$slots,"default")]}),_:3},16,["class","onClick"])),[[x]])}Hy.render=eG;var tG={root:"p-tablist",content:function(e){var n=e.instance;return["p-tablist-content",{"p-tablist-viewport":n.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},nG=Xn.extend({name:"tablist",classes:tG}),rG={name:"BaseTabList",extends:mr,props:{},style:nG,provide:function(){return{$pcTabList:this,$parentInstance:this}}},MS={name:"TabList",extends:rG,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(e){e?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var e=this;this.$nextTick(function(){e.updateInkBar()}),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(e){this.showNavigators&&this.updateButtonState(),e.preventDefault()},onPrevButtonClick:function(){var e=this.$refs.content,n=this.getVisibleButtonWidths(),l=bs(e)-n,m=Math.abs(e.scrollLeft),d=l*.8,x=m-d,s=Math.max(x,0);e.scrollLeft=fy(e)?-1*s:s},onNextButtonClick:function(){var e=this.$refs.content,n=this.getVisibleButtonWidths(),l=bs(e)-n,m=Math.abs(e.scrollLeft),d=l*.8,x=m+d,s=e.scrollWidth-l,T=Math.min(x,s);e.scrollLeft=fy(e)?-1*T:T},bindResizeObserver:function(){var e=this;this.resizeObserver=new ResizeObserver(function(){return e.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var e;(e=this.resizeObserver)===null||e===void 0||e.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var e=this.$refs,n=e.content,l=e.inkbar,m=e.tabs,d=yo(n,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(l.style.height=jl(d)+"px",l.style.top=Ea(d).top-Ea(m).top+"px"):(l.style.width=So(d)+"px",l.style.left=Ea(d).left-Ea(m).left+"px")},updateButtonState:function(){var e=this.$refs,n=e.list,l=e.content,m=l.scrollTop,d=l.scrollWidth,x=l.scrollHeight,s=l.offsetWidth,T=l.offsetHeight,E=Math.abs(l.scrollLeft),A=[bs(l),Mc(l)],z=A[0],j=A[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=m!==0,this.isNextButtonEnabled=n.offsetHeight>=T&&parseInt(m)!==x-j):(this.isPrevButtonEnabled=E!==0,this.isNextButtonEnabled=n.offsetWidth>=s&&parseInt(E)!==d-z)},getVisibleButtonWidths:function(){var e=this.$refs,n=e.prevButton,l=e.nextButton,m=0;return this.showNavigators&&(m=((n==null?void 0:n.offsetWidth)||0)+((l==null?void 0:l.offsetWidth)||0)),m}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0}},components:{ChevronLeftIcon:$_,ChevronRightIcon:ed},directives:{ripple:zs}},iG=["aria-label","tabindex"],oG=["aria-orientation"],sG=["aria-label","tabindex"];function aG(t,e,n,l,m,d){var x=No("ripple");return X(),pe("div",ie({ref:"list",class:t.cx("root")},t.ptmi("root")),[d.showNavigators&&m.isPrevButtonEnabled?_r((X(),pe("button",ie({key:0,ref:"prevButton",class:t.cx("prevButton"),"aria-label":d.prevButtonAriaLabel,tabindex:d.$pcTabs.tabindex,onClick:e[0]||(e[0]=function(){return d.onPrevButtonClick&&d.onPrevButtonClick.apply(d,arguments)})},t.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(X(),bt(Tn(d.templates.previcon||"ChevronLeftIcon"),ie({"aria-hidden":"true"},t.ptm("prevIcon")),null,16))],16,iG)),[[x]]):Ct("",!0),M("div",ie({ref:"content",class:t.cx("content"),onScroll:e[1]||(e[1]=function(){return d.onScroll&&d.onScroll.apply(d,arguments)})},t.ptm("content")),[M("div",ie({ref:"tabs",class:t.cx("tabList"),role:"tablist","aria-orientation":d.$pcTabs.orientation||"horizontal"},t.ptm("tabList")),[jt(t.$slots,"default"),M("span",ie({ref:"inkbar",class:t.cx("activeBar"),role:"presentation","aria-hidden":"true"},t.ptm("activeBar")),null,16)],16,oG)],16),d.showNavigators&&m.isNextButtonEnabled?_r((X(),pe("button",ie({key:1,ref:"nextButton",class:t.cx("nextButton"),"aria-label":d.nextButtonAriaLabel,tabindex:d.$pcTabs.tabindex,onClick:e[2]||(e[2]=function(){return d.onNextButtonClick&&d.onNextButtonClick.apply(d,arguments)})},t.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(X(),bt(Tn(d.templates.nexticon||"ChevronRightIcon"),ie({"aria-hidden":"true"},t.ptm("nextIcon")),null,16))],16,sG)),[[x]]):Ct("",!0)],16)}MS.render=aG;var lG={root:function(e){var n=e.instance;return["p-tabpanel",{"p-tabpanel-active":n.active}]}},cG=Xn.extend({name:"tabpanel",classes:lG}),uG={name:"BaseTabPanel",extends:mr,props:{value:{type:[String,Number],default:void 0},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1},header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean},style:cG,provide:function(){return{$pcTabPanel:this,$parentInstance:this}}},Cf={name:"TabPanel",extends:uG,inheritAttrs:!1,inject:["$pcTabs"],computed:{active:function(){var e;return $c((e=this.$pcTabs)===null||e===void 0?void 0:e.d_value,this.value)},id:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tabpanel_").concat(this.value)},ariaLabelledby:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tab_").concat(this.value)},attrs:function(){return ie(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){var e;return{id:this.id,tabindex:(e=this.$pcTabs)===null||e===void 0?void 0:e.tabindex,role:"tabpanel","aria-labelledby":this.ariaLabelledby,"data-pc-name":"tabpanel","data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function dG(t,e,n,l,m,d){var x,s;return d.$pcTabs?(X(),pe(an,{key:1},[t.asChild?jt(t.$slots,"default",{key:1,class:vn(t.cx("root")),active:d.active,a11yAttrs:d.a11yAttrs}):(X(),pe(an,{key:0},[!((x=d.$pcTabs)!==null&&x!==void 0&&x.lazy)||d.active?_r((X(),bt(Tn(t.as),ie({key:0,class:t.cx("root")},d.attrs),{default:Xe(function(){return[jt(t.$slots,"default")]}),_:3},16,["class"])),[[cy,(s=d.$pcTabs)!==null&&s!==void 0&&s.lazy?!0:d.active]]):Ct("",!0)],64))],64)):jt(t.$slots,"default",{key:0})}Cf.render=dG;var hG={root:"p-tabpanels"},pG=Xn.extend({name:"tabpanels",classes:hG}),fG={name:"BaseTabPanels",extends:mr,props:{},style:pG,provide:function(){return{$pcTabPanels:this,$parentInstance:this}}},DS={name:"TabPanels",extends:fG,inheritAttrs:!1};function mG(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root"),role:"presentation"},t.ptmi("root")),[jt(t.$slots,"default")],16)}DS.render=mG;var gG=function(e){var n=e.dt;return`
.p-tabs {
    display: flex;
    flex-direction: column;
}

.p-tablist {
    display: flex;
    position: relative;
}

.p-tabs-scrollable > .p-tablist {
    overflow: hidden;
}

.p-tablist-viewport {
    overflow-x: auto;
    overflow-y: hidden;
    scroll-behavior: smooth;
    scrollbar-width: none;
    overscroll-behavior: contain auto;
}

.p-tablist-viewport::-webkit-scrollbar {
    display: none;
}

.p-tablist-tab-list {
    position: relative;
    display: flex;
    background: `.concat(n("tabs.tablist.background"),`;
    border-style: solid;
    border-color: `).concat(n("tabs.tablist.border.color"),`;
    border-width: `).concat(n("tabs.tablist.border.width"),`;
}

.p-tablist-content {
    flex-grow: 1;
}

.p-tablist-nav-button {
    all: unset;
    position: absolute !important;
    flex-shrink: 0;
    inset-block-start: 0;
    z-index: 2;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: `).concat(n("tabs.nav.button.background"),`;
    color: `).concat(n("tabs.nav.button.color"),`;
    width: `).concat(n("tabs.nav.button.width"),`;
    transition: color `).concat(n("tabs.transition.duration"),", outline-color ").concat(n("tabs.transition.duration"),", box-shadow ").concat(n("tabs.transition.duration"),`;
    box-shadow: `).concat(n("tabs.nav.button.shadow"),`;
    outline-color: transparent;
    cursor: pointer;
}

.p-tablist-nav-button:focus-visible {
    z-index: 1;
    box-shadow: `).concat(n("tabs.nav.button.focus.ring.shadow"),`;
    outline: `).concat(n("tabs.nav.button.focus.ring.width")," ").concat(n("tabs.nav.button.focus.ring.style")," ").concat(n("tabs.nav.button.focus.ring.color"),`;
    outline-offset: `).concat(n("tabs.nav.button.focus.ring.offset"),`;
}

.p-tablist-nav-button:hover {
    color: `).concat(n("tabs.nav.button.hover.color"),`;
}

.p-tablist-prev-button {
    inset-inline-start: 0;
}

.p-tablist-next-button {
    inset-inline-end: 0;
}

.p-tablist-prev-button:dir(rtl),
.p-tablist-next-button:dir(rtl) {
    transform: rotate(180deg);
}


.p-tab {
    flex-shrink: 0;
    cursor: pointer;
    user-select: none;
    position: relative;
    border-style: solid;
    white-space: nowrap;
    background: `).concat(n("tabs.tab.background"),`;
    border-width: `).concat(n("tabs.tab.border.width"),`;
    border-color: `).concat(n("tabs.tab.border.color"),`;
    color: `).concat(n("tabs.tab.color"),`;
    padding: `).concat(n("tabs.tab.padding"),`;
    font-weight: `).concat(n("tabs.tab.font.weight"),`;
    transition: background `).concat(n("tabs.transition.duration"),", border-color ").concat(n("tabs.transition.duration"),", color ").concat(n("tabs.transition.duration"),", outline-color ").concat(n("tabs.transition.duration"),", box-shadow ").concat(n("tabs.transition.duration"),`;
    margin: `).concat(n("tabs.tab.margin"),`;
    outline-color: transparent;
}

.p-tab:not(.p-disabled):focus-visible {
    z-index: 1;
    box-shadow: `).concat(n("tabs.tab.focus.ring.shadow"),`;
    outline: `).concat(n("tabs.tab.focus.ring.width")," ").concat(n("tabs.tab.focus.ring.style")," ").concat(n("tabs.tab.focus.ring.color"),`;
    outline-offset: `).concat(n("tabs.tab.focus.ring.offset"),`;
}

.p-tab:not(.p-tab-active):not(.p-disabled):hover {
    background: `).concat(n("tabs.tab.hover.background"),`;
    border-color: `).concat(n("tabs.tab.hover.border.color"),`;
    color: `).concat(n("tabs.tab.hover.color"),`;
}

.p-tab-active {
    background: `).concat(n("tabs.tab.active.background"),`;
    border-color: `).concat(n("tabs.tab.active.border.color"),`;
    color: `).concat(n("tabs.tab.active.color"),`;
}

.p-tabpanels {
    background: `).concat(n("tabs.tabpanel.background"),`;
    color: `).concat(n("tabs.tabpanel.color"),`;
    padding: `).concat(n("tabs.tabpanel.padding"),`;
    outline: 0 none;
}

.p-tabpanel:focus-visible {
    box-shadow: `).concat(n("tabs.tabpanel.focus.ring.shadow"),`;
    outline: `).concat(n("tabs.tabpanel.focus.ring.width")," ").concat(n("tabs.tabpanel.focus.ring.style")," ").concat(n("tabs.tabpanel.focus.ring.color"),`;
    outline-offset: `).concat(n("tabs.tabpanel.focus.ring.offset"),`;
}

.p-tablist-active-bar {
    z-index: 1;
    display: block;
    position: absolute;
    inset-block-end: `).concat(n("tabs.active.bar.bottom"),`;
    height: `).concat(n("tabs.active.bar.height"),`;
    background: `).concat(n("tabs.active.bar.background"),`;
    transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
}
`)},yG={root:function(e){var n=e.props;return["p-tabs p-component",{"p-tabs-scrollable":n.scrollable}]}},vG=Xn.extend({name:"tabs",theme:gG,classes:yG}),bG={name:"BaseTabs",extends:mr,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:vG,provide:function(){return{$pcTabs:this,$parentInstance:this}}},LS={name:"Tabs",extends:bG,inheritAttrs:!1,emits:["update:value"],data:function(){return{id:this.$attrs.id,d_value:this.value}},watch:{"$attrs.id":function(e){this.id=e||$o()},value:function(e){this.d_value=e}},mounted:function(){this.id=this.id||$o()},methods:{updateValue:function(e){this.d_value!==e&&(this.d_value=e,this.$emit("update:value",e))},isVertical:function(){return this.orientation==="vertical"}}};function _G(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root")},t.ptmi("root")),[jt(t.$slots,"default")],16)}LS.render=_G;var xG=function(e){var n=e.dt;return`
.p-tabview-tablist-container {
    position: relative;
}

.p-tabview-scrollable > .p-tabview-tablist-container {
    overflow: hidden;
}

.p-tabview-tablist-scroll-container {
    overflow-x: auto;
    overflow-y: hidden;
    scroll-behavior: smooth;
    scrollbar-width: none;
    overscroll-behavior: contain auto;
}

.p-tabview-tablist-scroll-container::-webkit-scrollbar {
    display: none;
}

.p-tabview-tablist {
    display: flex;
    margin: 0;
    padding: 0;
    list-style-type: none;
    flex: 1 1 auto;
    background: `.concat(n("tabview.tab.list.background"),`;
    border: 1px solid `).concat(n("tabview.tab.list.border.color"),`;
    border-width: 0 0 1px 0;
    position: relative;
}

.p-tabview-tab-header {
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    text-decoration: none;
    position: relative;
    overflow: hidden;
    border-style: solid;
    border-width: 0 0 1px 0;
    border-color: transparent transparent `).concat(n("tabview.tab.border.color"),` transparent;
    color: `).concat(n("tabview.tab.color"),`;
    padding: 1rem 1.125rem;
    font-weight: 600;
    border-top-right-radius: `).concat(n("border.radius.md"),`;
    border-top-left-radius: `).concat(n("border.radius.md"),`;
    transition: color `).concat(n("tabview.transition.duration"),", outline-color ").concat(n("tabview.transition.duration"),`;
    margin: 0 0 -1px 0;
    outline-color: transparent;
}

.p-tabview-tablist-item:not(.p-disabled) .p-tabview-tab-header:focus-visible {
    outline: `).concat(n("focus.ring.width")," ").concat(n("focus.ring.style")," ").concat(n("focus.ring.color"),`;
    outline-offset: -1px;
}

.p-tabview-tablist-item:not(.p-highlight):not(.p-disabled):hover > .p-tabview-tab-header {
    color: `).concat(n("tabview.tab.hover.color"),`;
}

.p-tabview-tablist-item.p-highlight > .p-tabview-tab-header {
    color: `).concat(n("tabview.tab.active.color"),`;
}

.p-tabview-tab-title {
    line-height: 1;
    white-space: nowrap;
}

.p-tabview-next-button,
.p-tabview-prev-button {
    position: absolute;
    top: 0;
    margin: 0;
    padding: 0;
    z-index: 2;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: `).concat(n("tabview.nav.button.background"),`;
    color: `).concat(n("tabview.nav.button.color"),`;
    width: 2.5rem;
    border-radius: 0;
    outline-color: transparent;
    transition: color `).concat(n("tabview.transition.duration"),", outline-color ").concat(n("tabview.transition.duration"),`;
    box-shadow: `).concat(n("tabview.nav.button.shadow"),`;
    border: none;
    cursor: pointer;
    user-select: none;
}

.p-tabview-next-button:focus-visible,
.p-tabview-prev-button:focus-visible {
    outline: `).concat(n("focus.ring.width")," ").concat(n("focus.ring.style")," ").concat(n("focus.ring.color"),`;
    outline-offset: `).concat(n("focus.ring.offset"),`;
}

.p-tabview-next-button:hover,
.p-tabview-prev-button:hover {
    color: `).concat(n("tabview.nav.button.hover.color"),`;
}

.p-tabview-prev-button {
    left: 0;
}

.p-tabview-next-button {
    right: 0;
}

.p-tabview-panels {
    background: `).concat(n("tabview.tab.panel.background"),`;
    color: `).concat(n("tabview.tab.panel.color"),`;
    padding: 0.875rem 1.125rem 1.125rem 1.125rem;
}

.p-tabview-ink-bar {
    z-index: 1;
    display: block;
    position: absolute;
    bottom: -1px;
    height: 1px;
    background: `).concat(n("tabview.tab.active.border.color"),`;
    transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
}
`)},wG={root:function(e){var n=e.props;return["p-tabview p-component",{"p-tabview-scrollable":n.scrollable}]},navContainer:"p-tabview-tablist-container",prevButton:"p-tabview-prev-button",navContent:"p-tabview-tablist-scroll-container",nav:"p-tabview-tablist",tab:{header:function(e){var n=e.instance,l=e.tab,m=e.index;return["p-tabview-tablist-item",n.getTabProp(l,"headerClass"),{"p-tabview-tablist-item-active":n.d_activeIndex===m,"p-disabled":n.getTabProp(l,"disabled")}]},headerAction:"p-tabview-tab-header",headerTitle:"p-tabview-tab-title",content:function(e){var n=e.instance,l=e.tab;return["p-tabview-panel",n.getTabProp(l,"contentClass")]}},inkbar:"p-tabview-ink-bar",nextButton:"p-tabview-next-button",panelContainer:"p-tabview-panels"},SG=Xn.extend({name:"tabview",theme:xG,classes:wG}),CG={name:"BaseTabView",extends:mr,props:{activeIndex:{type:Number,default:0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},prevButtonProps:{type:null,default:null},nextButtonProps:{type:null,default:null},prevIcon:{type:String,default:void 0},nextIcon:{type:String,default:void 0}},style:SG,provide:function(){return{$pcTabs:void 0,$pcTabView:this,$parentInstance:this}}},J6={name:"TabView",extends:CG,inheritAttrs:!1,emits:["update:activeIndex","tab-change","tab-click"],data:function(){return{id:this.$attrs.id,d_activeIndex:this.activeIndex,isPrevButtonDisabled:!0,isNextButtonDisabled:!1}},watch:{"$attrs.id":function(e){this.id=e||$o()},activeIndex:function(e){this.d_activeIndex=e,this.scrollInView({index:e})}},mounted:function(){console.warn("Deprecated since v4. Use Tabs component instead."),this.id=this.id||$o(),this.updateInkBar(),this.scrollable&&this.updateButtonState()},updated:function(){this.updateInkBar(),this.scrollable&&this.updateButtonState()},methods:{isTabPanel:function(e){return e.type.name==="TabPanel"},isTabActive:function(e){return this.d_activeIndex===e},getTabProp:function(e,n){return e.props?e.props[n]:void 0},getKey:function(e,n){return this.getTabProp(e,"header")||n},getTabHeaderActionId:function(e){return"".concat(this.id,"_").concat(e,"_header_action")},getTabContentId:function(e){return"".concat(this.id,"_").concat(e,"_content")},getTabPT:function(e,n,l){var m=this.tabs.length,d={props:e.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:l,count:m,first:l===0,last:l===m-1,active:this.isTabActive(l)}};return ie(this.ptm("tabpanel.".concat(n),{tabpanel:d}),this.ptm("tabpanel.".concat(n),d),this.ptmo(this.getTabProp(e,"pt"),n,d))},onScroll:function(e){this.scrollable&&this.updateButtonState(),e.preventDefault()},onPrevButtonClick:function(){var e=this.$refs.content,n=bs(e),l=e.scrollLeft-n;e.scrollLeft=l<=0?0:l},onNextButtonClick:function(){var e=this.$refs.content,n=bs(e)-this.getVisibleButtonWidths(),l=e.scrollLeft+n,m=e.scrollWidth-n;e.scrollLeft=l>=m?m:l},onTabClick:function(e,n,l){this.changeActiveIndex(e,n,l),this.$emit("tab-click",{originalEvent:e,index:l})},onTabKeyDown:function(e,n,l){switch(e.code){case"ArrowLeft":this.onTabArrowLeftKey(e);break;case"ArrowRight":this.onTabArrowRightKey(e);break;case"Home":this.onTabHomeKey(e);break;case"End":this.onTabEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onTabEnterKey(e,n,l);break}},onTabArrowRightKey:function(e){var n=this.findNextHeaderAction(e.target.parentElement);n?this.changeFocusedTab(e,n):this.onTabHomeKey(e),e.preventDefault()},onTabArrowLeftKey:function(e){var n=this.findPrevHeaderAction(e.target.parentElement);n?this.changeFocusedTab(e,n):this.onTabEndKey(e),e.preventDefault()},onTabHomeKey:function(e){var n=this.findFirstHeaderAction();this.changeFocusedTab(e,n),e.preventDefault()},onTabEndKey:function(e){var n=this.findLastHeaderAction();this.changeFocusedTab(e,n),e.preventDefault()},onPageDownKey:function(e){this.scrollInView({index:this.$refs.nav.children.length-2}),e.preventDefault()},onPageUpKey:function(e){this.scrollInView({index:0}),e.preventDefault()},onTabEnterKey:function(e,n,l){this.changeActiveIndex(e,n,l),e.preventDefault()},findNextHeaderAction:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=n?e:e.nextElementSibling;return l?Ci(l,"data-p-disabled")||Ci(l,"data-pc-section")==="inkbar"?this.findNextHeaderAction(l):yo(l,'[data-pc-section="headeraction"]'):null},findPrevHeaderAction:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=n?e:e.previousElementSibling;return l?Ci(l,"data-p-disabled")||Ci(l,"data-pc-section")==="inkbar"?this.findPrevHeaderAction(l):yo(l,'[data-pc-section="headeraction"]'):null},findFirstHeaderAction:function(){return this.findNextHeaderAction(this.$refs.nav.firstElementChild,!0)},findLastHeaderAction:function(){return this.findPrevHeaderAction(this.$refs.nav.lastElementChild,!0)},changeActiveIndex:function(e,n,l){!this.getTabProp(n,"disabled")&&this.d_activeIndex!==l&&(this.d_activeIndex=l,this.$emit("update:activeIndex",l),this.$emit("tab-change",{originalEvent:e,index:l}),this.scrollInView({index:l}))},changeFocusedTab:function(e,n){if(n&&(Ro(n),this.scrollInView({element:n}),this.selectOnFocus)){var l=parseInt(n.parentElement.dataset.pcIndex,10),m=this.tabs[l];this.changeActiveIndex(e,m,l)}},scrollInView:function(e){var n=e.element,l=e.index,m=l===void 0?-1:l,d=n||this.$refs.nav.children[m];d&&d.scrollIntoView&&d.scrollIntoView({block:"nearest"})},updateInkBar:function(){var e=this.$refs.nav.children[this.d_activeIndex];this.$refs.inkbar.style.width=bs(e)+"px",this.$refs.inkbar.style.left=Ea(e).left-Ea(this.$refs.nav).left+"px"},updateButtonState:function(){var e=this.$refs.content,n=e.scrollLeft,l=e.scrollWidth,m=bs(e);this.isPrevButtonDisabled=n===0,this.isNextButtonDisabled=parseInt(n)===l-m},getVisibleButtonWidths:function(){var e=this.$refs,n=e.prevBtn,l=e.nextBtn;return[n,l].reduce(function(m,d){return d?m+bs(d):m},0)}},computed:{tabs:function(){var e=this;return this.$slots.default().reduce(function(n,l){return e.isTabPanel(l)?n.push(l):l.children&&l.children instanceof Array&&l.children.forEach(function(m){e.isTabPanel(m)&&n.push(m)}),n},[])},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0}},directives:{ripple:zs},components:{ChevronLeftIcon:$_,ChevronRightIcon:ed}};function Gy(t){"@babel/helpers - typeof";return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gy(t)}function nE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function Sa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nE(Object(n),!0).forEach(function(l){kG(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function kG(t,e,n){return(e=TG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TG(t){var e=EG(t,"string");return Gy(e)=="symbol"?e:e+""}function EG(t,e){if(Gy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Gy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IG=["tabindex","aria-label"],PG=["data-p-active","data-p-disabled","data-pc-index"],AG=["id","tabindex","aria-disabled","aria-selected","aria-controls","onClick","onKeydown"],RG=["tabindex","aria-label"],MG=["id","aria-labelledby","data-pc-index","data-p-active"];function DG(t,e,n,l,m,d){var x=No("ripple");return X(),pe("div",ie({class:t.cx("root"),role:"tablist"},t.ptmi("root")),[M("div",ie({class:t.cx("navContainer")},t.ptm("navContainer")),[t.scrollable&&!m.isPrevButtonDisabled?_r((X(),pe("button",ie({key:0,ref:"prevBtn",type:"button",class:t.cx("prevButton"),tabindex:t.tabindex,"aria-label":d.prevButtonAriaLabel,onClick:e[0]||(e[0]=function(){return d.onPrevButtonClick&&d.onPrevButtonClick.apply(d,arguments)})},Sa(Sa({},t.prevButtonProps),t.ptm("prevButton")),{"data-pc-group-section":"navbutton"}),[jt(t.$slots,"previcon",{},function(){return[(X(),bt(Tn(t.prevIcon?"span":"ChevronLeftIcon"),ie({"aria-hidden":"true",class:t.prevIcon},t.ptm("prevIcon")),null,16,["class"]))]})],16,IG)),[[x]]):Ct("",!0),M("div",ie({ref:"content",class:t.cx("navContent"),onScroll:e[1]||(e[1]=function(){return d.onScroll&&d.onScroll.apply(d,arguments)})},t.ptm("navContent")),[M("ul",ie({ref:"nav",class:t.cx("nav")},t.ptm("nav")),[(X(!0),pe(an,null,fr(d.tabs,function(s,T){return X(),pe("li",ie({key:d.getKey(s,T),style:d.getTabProp(s,"headerStyle"),class:t.cx("tab.header",{tab:s,index:T}),role:"presentation",ref_for:!0},Sa(Sa(Sa({},d.getTabProp(s,"headerProps")),d.getTabPT(s,"root",T)),d.getTabPT(s,"header",T)),{"data-pc-name":"tabpanel","data-p-active":m.d_activeIndex===T,"data-p-disabled":d.getTabProp(s,"disabled"),"data-pc-index":T}),[_r((X(),pe("a",ie({id:d.getTabHeaderActionId(T),class:t.cx("tab.headerAction"),tabindex:d.getTabProp(s,"disabled")||!d.isTabActive(T)?-1:t.tabindex,role:"tab","aria-disabled":d.getTabProp(s,"disabled"),"aria-selected":d.isTabActive(T),"aria-controls":d.getTabContentId(T),onClick:function(A){return d.onTabClick(A,s,T)},onKeydown:function(A){return d.onTabKeyDown(A,s,T)},ref_for:!0},Sa(Sa({},d.getTabProp(s,"headerActionProps")),d.getTabPT(s,"headerAction",T))),[s.props&&s.props.header?(X(),pe("span",ie({key:0,class:t.cx("tab.headerTitle"),ref_for:!0},d.getTabPT(s,"headerTitle",T)),Ue(s.props.header),17)):Ct("",!0),s.children&&s.children.header?(X(),bt(Tn(s.children.header),{key:1})):Ct("",!0)],16,AG)),[[x]])],16,PG)}),128)),M("li",ie({ref:"inkbar",class:t.cx("inkbar"),role:"presentation","aria-hidden":"true"},t.ptm("inkbar")),null,16)],16)],16),t.scrollable&&!m.isNextButtonDisabled?_r((X(),pe("button",ie({key:1,ref:"nextBtn",type:"button",class:t.cx("nextButton"),tabindex:t.tabindex,"aria-label":d.nextButtonAriaLabel,onClick:e[2]||(e[2]=function(){return d.onNextButtonClick&&d.onNextButtonClick.apply(d,arguments)})},Sa(Sa({},t.nextButtonProps),t.ptm("nextButton")),{"data-pc-group-section":"navbutton"}),[jt(t.$slots,"nexticon",{},function(){return[(X(),bt(Tn(t.nextIcon?"span":"ChevronRightIcon"),ie({"aria-hidden":"true",class:t.nextIcon},t.ptm("nextIcon")),null,16,["class"]))]})],16,RG)),[[x]]):Ct("",!0)],16),M("div",ie({class:t.cx("panelContainer")},t.ptm("panelContainer")),[(X(!0),pe(an,null,fr(d.tabs,function(s,T){return X(),pe(an,{key:d.getKey(s,T)},[!t.lazy||d.isTabActive(T)?_r((X(),pe("div",ie({key:0,id:d.getTabContentId(T),style:d.getTabProp(s,"contentStyle"),class:t.cx("tab.content",{tab:s}),role:"tabpanel","aria-labelledby":d.getTabHeaderActionId(T),ref_for:!0},Sa(Sa(Sa({},d.getTabProp(s,"contentProps")),d.getTabPT(s,"root",T)),d.getTabPT(s,"content",T)),{"data-pc-name":"tabpanel","data-pc-index":T,"data-p-active":m.d_activeIndex===T}),[(X(),bt(Tn(s)))],16,MG)),[[cy,t.lazy?!0:d.isTabActive(T)]]):Ct("",!0)],64)}),128))],16)],16)}J6.render=DG;var LG=function(e){var n=e.dt;return`
.p-tag {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: `.concat(n("tag.primary.background"),`;
    color: `).concat(n("tag.primary.color"),`;
    font-size: `).concat(n("tag.font.size"),`;
    font-weight: `).concat(n("tag.font.weight"),`;
    padding: `).concat(n("tag.padding"),`;
    border-radius: `).concat(n("tag.border.radius"),`;
    gap: `).concat(n("tag.gap"),`;
}

.p-tag-icon {
    font-size: `).concat(n("tag.icon.size"),`;
    width: `).concat(n("tag.icon.size"),`;
    height:`).concat(n("tag.icon.size"),`;
}

.p-tag-rounded {
    border-radius: `).concat(n("tag.rounded.border.radius"),`;
}

.p-tag-success {
    background: `).concat(n("tag.success.background"),`;
    color: `).concat(n("tag.success.color"),`;
}

.p-tag-info {
    background: `).concat(n("tag.info.background"),`;
    color: `).concat(n("tag.info.color"),`;
}

.p-tag-warn {
    background: `).concat(n("tag.warn.background"),`;
    color: `).concat(n("tag.warn.color"),`;
}

.p-tag-danger {
    background: `).concat(n("tag.danger.background"),`;
    color: `).concat(n("tag.danger.color"),`;
}

.p-tag-secondary {
    background: `).concat(n("tag.secondary.background"),`;
    color: `).concat(n("tag.secondary.color"),`;
}

.p-tag-contrast {
    background: `).concat(n("tag.contrast.background"),`;
    color: `).concat(n("tag.contrast.color"),`;
}
`)},OG={root:function(e){var n=e.props;return["p-tag p-component",{"p-tag-info":n.severity==="info","p-tag-success":n.severity==="success","p-tag-warn":n.severity==="warn","p-tag-danger":n.severity==="danger","p-tag-secondary":n.severity==="secondary","p-tag-contrast":n.severity==="contrast","p-tag-rounded":n.rounded}]},icon:"p-tag-icon",label:"p-tag-label"},zG=Xn.extend({name:"tag",theme:LG,classes:OG}),BG={name:"BaseTag",extends:mr,props:{value:null,severity:null,rounded:Boolean,icon:String},style:zG,provide:function(){return{$pcTag:this,$parentInstance:this}}},Hs={name:"Tag",extends:BG,inheritAttrs:!1};function FG(t,e,n,l,m,d){return X(),pe("span",ie({class:t.cx("root")},t.ptmi("root")),[t.$slots.icon?(X(),bt(Tn(t.$slots.icon),ie({key:0,class:t.cx("icon")},t.ptm("icon")),null,16,["class"])):t.icon?(X(),pe("span",ie({key:1,class:[t.cx("icon"),t.icon]},t.ptm("icon")),null,16)):Ct("",!0),t.value!=null||t.$slots.default?jt(t.$slots,"default",{key:2},function(){return[M("span",ie({class:t.cx("label")},t.ptm("label")),Ue(t.value),17)]}):Ct("",!0)],16)}Hs.render=FG;var $G=function(e){var n=e.dt;return`
.p-timeline {
    display: flex;
    flex-grow: 1;
    flex-direction: column;
    direction: ltr;
}

.p-timeline-left .p-timeline-event-opposite {
    text-align: right;
}

.p-timeline-left .p-timeline-event-content {
    text-align: left;
}

.p-timeline-right .p-timeline-event {
    flex-direction: row-reverse;
}

.p-timeline-right .p-timeline-event-opposite {
    text-align: left;
}

.p-timeline-right .p-timeline-event-content {
    text-align: right;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) {
    flex-direction: row-reverse;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-opposite {
    text-align: right;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-content {
    text-align: left;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-opposite {
    text-align: left;
}

.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-content {
    text-align: right;
}

.p-timeline-vertical .p-timeline-event-opposite,
.p-timeline-vertical .p-timeline-event-content {
    padding: `.concat(n("timeline.vertical.event.content.padding"),`;
}

.p-timeline-vertical .p-timeline-event-connector {
    width: `).concat(n("timeline.event.connector.size"),`;
}

.p-timeline-event {
    display: flex;
    position: relative;
    min-height: `).concat(n("timeline.event.min.height"),`;
}

.p-timeline-event:last-child {
    min-height: 0;
}

.p-timeline-event-opposite {
    flex: 1;
}

.p-timeline-event-content {
    flex: 1;
}

.p-timeline-event-separator {
    flex: 0;
    display: flex;
    align-items: center;
    flex-direction: column;
}

.p-timeline-event-marker {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    align-self: baseline;
    border-width: `).concat(n("timeline.event.marker.border.width"),`;
    border-style: solid;
    border-color: `).concat(n("timeline.event.marker.border.color"),`;
    border-radius: `).concat(n("timeline.event.marker.border.radius"),`;
    width: `).concat(n("timeline.event.marker.size"),`;
    height: `).concat(n("timeline.event.marker.size"),`;
    background: `).concat(n("timeline.event.marker.background"),`;
}

.p-timeline-event-marker::before {
    content: " ";
    border-radius: `).concat(n("timeline.event.marker.content.border.radius"),`;
    width: `).concat(n("timeline.event.marker.content.size"),`;
    height:`).concat(n("timeline.event.marker.content.size"),`;
    background: `).concat(n("timeline.event.marker.content.background"),`;
}

.p-timeline-event-marker::after {
    content: " ";
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: `).concat(n("timeline.event.marker.border.radius"),`;
    box-shadow: `).concat(n("timeline.event.marker.content.inset.shadow"),`;
}

.p-timeline-event-connector {
    flex-grow: 1;
    background: `).concat(n("timeline.event.connector.color"),`;
}

.p-timeline-horizontal {
    flex-direction: row;
}

.p-timeline-horizontal .p-timeline-event {
    flex-direction: column;
    flex: 1;
}

.p-timeline-horizontal .p-timeline-event:last-child {
    flex: 0;
}

.p-timeline-horizontal .p-timeline-event-separator {
    flex-direction: row;
}

.p-timeline-horizontal .p-timeline-event-connector {
    width: 100%;
    height: `).concat(n("timeline.event.connector.size"),`;
}

.p-timeline-horizontal .p-timeline-event-opposite,
.p-timeline-horizontal .p-timeline-event-content {
    padding: `).concat(n("timeline.horizontal.event.content.padding"),`;
}

.p-timeline-horizontal.p-timeline-alternate .p-timeline-event:nth-child(even) {
    flex-direction: column-reverse;
}

.p-timeline-bottom .p-timeline-event {
    flex-direction: column-reverse;
}
`)},NG={root:function(e){var n=e.props;return["p-timeline p-component","p-timeline-"+n.align,"p-timeline-"+n.layout]},event:"p-timeline-event",eventOpposite:"p-timeline-event-opposite",eventSeparator:"p-timeline-event-separator",eventMarker:"p-timeline-event-marker",eventConnector:"p-timeline-event-connector",eventContent:"p-timeline-event-content"},VG=Xn.extend({name:"timeline",theme:$G,classes:NG}),jG={name:"BaseTimeline",extends:mr,props:{value:null,align:{mode:String,default:"left"},layout:{mode:String,default:"vertical"},dataKey:null},style:VG,provide:function(){return{$pcTimeline:this,$parentInstance:this}}},OS={name:"Timeline",extends:jG,inheritAttrs:!1,methods:{getKey:function(e,n){return this.dataKey?wi(e,this.dataKey):n},getPTOptions:function(e,n){return this.ptm(e,{context:{index:n,count:this.value.length}})}}};function UG(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root")},t.ptmi("root")),[(X(!0),pe(an,null,fr(t.value,function(x,s){return X(),pe("div",ie({key:d.getKey(x,s),class:t.cx("event"),ref_for:!0},d.getPTOptions("event",s)),[M("div",ie({class:t.cx("eventOpposite",{index:s}),ref_for:!0},d.getPTOptions("eventOpposite",s)),[jt(t.$slots,"opposite",{item:x,index:s})],16),M("div",ie({class:t.cx("eventSeparator"),ref_for:!0},d.getPTOptions("eventSeparator",s)),[jt(t.$slots,"marker",{item:x,index:s},function(){return[M("div",ie({class:t.cx("eventMarker"),ref_for:!0},d.getPTOptions("eventMarker",s)),null,16)]}),s!==t.value.length-1?jt(t.$slots,"connector",{key:0,item:x,index:s},function(){return[M("div",ie({class:t.cx("eventConnector"),ref_for:!0},d.getPTOptions("eventConnector",s)),null,16)]}):Ct("",!0)],16),M("div",ie({class:t.cx("eventContent"),ref_for:!0},d.getPTOptions("eventContent",s)),[jt(t.$slots,"content",{item:x,index:s})],16)],16)}),128))],16)}OS.render=UG;var Ca=o0();function Wy(t){"@babel/helpers - typeof";return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wy(t)}function xb(t,e,n){return(e=qG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qG(t){var e=HG(t,"string");return Wy(e)=="symbol"?e:e+""}function HG(t,e){if(Wy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Wy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GG=function(e){var n=e.dt;return`
.p-toast {
    width: `.concat(n("toast.width"),`;
    white-space: pre-line;
    word-break: break-word;
}

.p-toast-message {
    margin: 0 0 1rem 0;
}

.p-toast-message-icon {
    flex-shrink: 0;
    font-size: `).concat(n("toast.icon.size"),`;
    width: `).concat(n("toast.icon.size"),`;
    height: `).concat(n("toast.icon.size"),`;
}

.p-toast-message-content {
    display: flex;
    align-items: flex-start;
    padding: `).concat(n("toast.content.padding"),`;
    gap: `).concat(n("toast.content.gap"),`;
}

.p-toast-message-text {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    gap: `).concat(n("toast.text.gap"),`;
}

.p-toast-summary {
    font-weight: `).concat(n("toast.summary.font.weight"),`;
    font-size: `).concat(n("toast.summary.font.size"),`;
}

.p-toast-detail {
    font-weight: `).concat(n("toast.detail.font.weight"),`;
    font-size: `).concat(n("toast.detail.font.size"),`;
}

.p-toast-close-button {
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    cursor: pointer;
    background: transparent;
    transition: background `).concat(n("toast.transition.duration"),", color ").concat(n("toast.transition.duration"),", outline-color ").concat(n("toast.transition.duration"),", box-shadow ").concat(n("toast.transition.duration"),`;
    outline-color: transparent;
    color: inherit;
    width: `).concat(n("toast.close.button.width"),`;
    height: `).concat(n("toast.close.button.height"),`;
    border-radius: `).concat(n("toast.close.button.border.radius"),`;
    margin: -25% 0 0 0;
    right: -25%;
    padding: 0;
    border: none;
    user-select: none;
}

.p-toast-close-button:dir(rtl) {
    margin: -25% 0 0 auto;
    left: -25%;
    right: auto;
}

.p-toast-message-info,
.p-toast-message-success,
.p-toast-message-warn,
.p-toast-message-error,
.p-toast-message-secondary,
.p-toast-message-contrast {
    border-width: `).concat(n("toast.border.width"),`;
    border-style: solid;
    backdrop-filter: blur(`).concat(n("toast.blur"),`);
    border-radius: `).concat(n("toast.border.radius"),`;
}

.p-toast-close-icon {
    font-size: `).concat(n("toast.close.icon.size"),`;
    width: `).concat(n("toast.close.icon.size"),`;
    height: `).concat(n("toast.close.icon.size"),`;
}

.p-toast-close-button:focus-visible {
    outline-width: `).concat(n("focus.ring.width"),`;
    outline-style: `).concat(n("focus.ring.style"),`;
    outline-offset: `).concat(n("focus.ring.offset"),`;
}

.p-toast-message-info {
    background: `).concat(n("toast.info.background"),`;
    border-color: `).concat(n("toast.info.border.color"),`;
    color: `).concat(n("toast.info.color"),`;
    box-shadow: `).concat(n("toast.info.shadow"),`;
}

.p-toast-message-info .p-toast-detail {
    color: `).concat(n("toast.info.detail.color"),`;
}

.p-toast-message-info .p-toast-close-button:focus-visible {
    outline-color: `).concat(n("toast.info.close.button.focus.ring.color"),`;
    box-shadow: `).concat(n("toast.info.close.button.focus.ring.shadow"),`;
}

.p-toast-message-info .p-toast-close-button:hover {
    background: `).concat(n("toast.info.close.button.hover.background"),`;
}

.p-toast-message-success {
    background: `).concat(n("toast.success.background"),`;
    border-color: `).concat(n("toast.success.border.color"),`;
    color: `).concat(n("toast.success.color"),`;
    box-shadow: `).concat(n("toast.success.shadow"),`;
}

.p-toast-message-success .p-toast-detail {
    color: `).concat(n("toast.success.detail.color"),`;
}

.p-toast-message-success .p-toast-close-button:focus-visible {
    outline-color: `).concat(n("toast.success.close.button.focus.ring.color"),`;
    box-shadow: `).concat(n("toast.success.close.button.focus.ring.shadow"),`;
}

.p-toast-message-success .p-toast-close-button:hover {
    background: `).concat(n("toast.success.close.button.hover.background"),`;
}

.p-toast-message-warn {
    background: `).concat(n("toast.warn.background"),`;
    border-color: `).concat(n("toast.warn.border.color"),`;
    color: `).concat(n("toast.warn.color"),`;
    box-shadow: `).concat(n("toast.warn.shadow"),`;
}

.p-toast-message-warn .p-toast-detail {
    color: `).concat(n("toast.warn.detail.color"),`;
}

.p-toast-message-warn .p-toast-close-button:focus-visible {
    outline-color: `).concat(n("toast.warn.close.button.focus.ring.color"),`;
    box-shadow: `).concat(n("toast.warn.close.button.focus.ring.shadow"),`;
}

.p-toast-message-warn .p-toast-close-button:hover {
    background: `).concat(n("toast.warn.close.button.hover.background"),`;
}

.p-toast-message-error {
    background: `).concat(n("toast.error.background"),`;
    border-color: `).concat(n("toast.error.border.color"),`;
    color: `).concat(n("toast.error.color"),`;
    box-shadow: `).concat(n("toast.error.shadow"),`;
}

.p-toast-message-error .p-toast-detail {
    color: `).concat(n("toast.error.detail.color"),`;
}

.p-toast-message-error .p-toast-close-button:focus-visible {
    outline-color: `).concat(n("toast.error.close.button.focus.ring.color"),`;
    box-shadow: `).concat(n("toast.error.close.button.focus.ring.shadow"),`;
}

.p-toast-message-error .p-toast-close-button:hover {
    background: `).concat(n("toast.error.close.button.hover.background"),`;
}

.p-toast-message-secondary {
    background: `).concat(n("toast.secondary.background"),`;
    border-color: `).concat(n("toast.secondary.border.color"),`;
    color: `).concat(n("toast.secondary.color"),`;
    box-shadow: `).concat(n("toast.secondary.shadow"),`;
}

.p-toast-message-secondary .p-toast-detail {
    color: `).concat(n("toast.secondary.detail.color"),`;
}

.p-toast-message-secondary .p-toast-close-button:focus-visible {
    outline-color: `).concat(n("toast.secondary.close.button.focus.ring.color"),`;
    box-shadow: `).concat(n("toast.secondary.close.button.focus.ring.shadow"),`;
}

.p-toast-message-secondary .p-toast-close-button:hover {
    background: `).concat(n("toast.secondary.close.button.hover.background"),`;
}

.p-toast-message-contrast {
    background: `).concat(n("toast.contrast.background"),`;
    border-color: `).concat(n("toast.contrast.border.color"),`;
    color: `).concat(n("toast.contrast.color"),`;
    box-shadow: `).concat(n("toast.contrast.shadow"),`;
}

.p-toast-message-contrast .p-toast-detail {
    color: `).concat(n("toast.contrast.detail.color"),`;
}

.p-toast-message-contrast .p-toast-close-button:focus-visible {
    outline-color: `).concat(n("toast.contrast.close.button.focus.ring.color"),`;
    box-shadow: `).concat(n("toast.contrast.close.button.focus.ring.shadow"),`;
}

.p-toast-message-contrast .p-toast-close-button:hover {
    background: `).concat(n("toast.contrast.close.button.hover.background"),`;
}

.p-toast-top-center {
    transform: translateX(-50%);
}

.p-toast-bottom-center {
    transform: translateX(-50%);
}

.p-toast-center {
    min-width: 20vw;
    transform: translate(-50%, -50%);
}

.p-toast-message-enter-from {
    opacity: 0;
    transform: translateY(50%);
}

.p-toast-message-leave-from {
    max-height: 1000px;
}

.p-toast .p-toast-message.p-toast-message-leave-to {
    max-height: 0;
    opacity: 0;
    margin-bottom: 0;
    overflow: hidden;
}

.p-toast-message-enter-active {
    transition: transform 0.3s, opacity 0.3s;
}

.p-toast-message-leave-active {
    transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin-bottom 0.3s;
}
`)},WG={root:function(e){var n=e.position;return{position:"fixed",top:n==="top-right"||n==="top-left"||n==="top-center"?"20px":n==="center"?"50%":null,right:(n==="top-right"||n==="bottom-right")&&"20px",bottom:(n==="bottom-left"||n==="bottom-right"||n==="bottom-center")&&"20px",left:n==="top-left"||n==="bottom-left"?"20px":n==="center"||n==="top-center"||n==="bottom-center"?"50%":null}}},KG={root:function(e){var n=e.props;return["p-toast p-component p-toast-"+n.position]},message:function(e){var n=e.props;return["p-toast-message",{"p-toast-message-info":n.message.severity==="info"||n.message.severity===void 0,"p-toast-message-warn":n.message.severity==="warn","p-toast-message-error":n.message.severity==="error","p-toast-message-success":n.message.severity==="success","p-toast-message-secondary":n.message.severity==="secondary","p-toast-message-contrast":n.message.severity==="contrast"}]},messageContent:"p-toast-message-content",messageIcon:function(e){var n=e.props;return["p-toast-message-icon",xb(xb(xb(xb({},n.infoIcon,n.message.severity==="info"),n.warnIcon,n.message.severity==="warn"),n.errorIcon,n.message.severity==="error"),n.successIcon,n.message.severity==="success")]},messageText:"p-toast-message-text",summary:"p-toast-summary",detail:"p-toast-detail",closeButton:"p-toast-close-button",closeIcon:"p-toast-close-icon"},ZG=Xn.extend({name:"toast",theme:GG,classes:KG,inlineStyles:WG}),XG={name:"BaseToast",extends:mr,props:{group:{type:String,default:null},position:{type:String,default:"top-right"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},breakpoints:{type:Object,default:null},closeIcon:{type:String,default:void 0},infoIcon:{type:String,default:void 0},warnIcon:{type:String,default:void 0},errorIcon:{type:String,default:void 0},successIcon:{type:String,default:void 0},closeButtonProps:{type:null,default:null}},style:ZG,provide:function(){return{$pcToast:this,$parentInstance:this}}},Q6={name:"ToastMessage",hostName:"Toast",extends:mr,emits:["close"],closeTimeout:null,props:{message:{type:null,default:null},templates:{type:Object,default:null},closeIcon:{type:String,default:null},infoIcon:{type:String,default:null},warnIcon:{type:String,default:null},errorIcon:{type:String,default:null},successIcon:{type:String,default:null},closeButtonProps:{type:null,default:null}},mounted:function(){var e=this;this.message.life&&(this.closeTimeout=setTimeout(function(){e.close({message:e.message,type:"life-end"})},this.message.life))},beforeUnmount:function(){this.clearCloseTimeout()},methods:{close:function(e){this.$emit("close",e)},onCloseClick:function(){this.clearCloseTimeout(),this.close({message:this.message,type:"close"})},clearCloseTimeout:function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)}},computed:{iconComponent:function(){return{info:!this.infoIcon&&S2,success:!this.successIcon&&Xu,warn:!this.warnIcon&&w2,error:!this.errorIcon&&u2}[this.message.severity]},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0}},components:{TimesIcon:Rf,InfoCircleIcon:S2,CheckIcon:Xu,ExclamationTriangleIcon:w2,TimesCircleIcon:u2},directives:{ripple:zs}};function Ky(t){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(t)}function rE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function iE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rE(Object(n),!0).forEach(function(l){YG(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rE(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function YG(t,e,n){return(e=JG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JG(t){var e=QG(t,"string");return Ky(e)=="symbol"?e:e+""}function QG(t,e){if(Ky(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Ky(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eW=["aria-label"];function tW(t,e,n,l,m,d){var x=No("ripple");return X(),pe("div",ie({class:[t.cx("message"),n.message.styleClass],role:"alert","aria-live":"assertive","aria-atomic":"true"},t.ptm("message")),[n.templates.container?(X(),bt(Tn(n.templates.container),{key:0,message:n.message,closeCallback:d.onCloseClick},null,8,["message","closeCallback"])):(X(),pe("div",ie({key:1,class:[t.cx("messageContent"),n.message.contentStyleClass]},t.ptm("messageContent")),[n.templates.message?(X(),bt(Tn(n.templates.message),{key:1,message:n.message},null,8,["message"])):(X(),pe(an,{key:0},[(X(),bt(Tn(n.templates.messageicon?n.templates.messageicon:n.templates.icon?n.templates.icon:d.iconComponent&&d.iconComponent.name?d.iconComponent:"span"),ie({class:t.cx("messageIcon")},t.ptm("messageIcon")),null,16,["class"])),M("div",ie({class:t.cx("messageText")},t.ptm("messageText")),[M("span",ie({class:t.cx("summary")},t.ptm("summary")),Ue(n.message.summary),17),M("div",ie({class:t.cx("detail")},t.ptm("detail")),Ue(n.message.detail),17)],16)],64)),n.message.closable!==!1?(X(),pe("div",ka(ie({key:2},t.ptm("buttonContainer"))),[_r((X(),pe("button",ie({class:t.cx("closeButton"),type:"button","aria-label":d.closeAriaLabel,onClick:e[0]||(e[0]=function(){return d.onCloseClick&&d.onCloseClick.apply(d,arguments)}),autofocus:""},iE(iE({},n.closeButtonProps),t.ptm("closeButton"))),[(X(),bt(Tn(n.templates.closeicon||"TimesIcon"),ie({class:[t.cx("closeIcon"),n.closeIcon]},t.ptm("closeIcon")),null,16,["class"]))],16,eW)),[[x]])],16)):Ct("",!0)],16))],16)}Q6.render=tW;function nW(t){return sW(t)||oW(t)||iW(t)||rW()}function rW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iW(t,e){if(t){if(typeof t=="string")return I2(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I2(t,e):void 0}}function oW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sW(t){if(Array.isArray(t))return I2(t)}function I2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,l=Array(e);n<e;n++)l[n]=t[n];return l}var aW=0,Mh={name:"Toast",extends:XG,inheritAttrs:!1,emits:["close","life-end"],data:function(){return{messages:[]}},styleElement:null,mounted:function(){Ca.on("add",this.onAdd),Ca.on("remove",this.onRemove),Ca.on("remove-group",this.onRemoveGroup),Ca.on("remove-all-groups",this.onRemoveAllGroups),this.breakpoints&&this.createStyle()},beforeUnmount:function(){this.destroyStyle(),this.$refs.container&&this.autoZIndex&&bo.clear(this.$refs.container),Ca.off("add",this.onAdd),Ca.off("remove",this.onRemove),Ca.off("remove-group",this.onRemoveGroup),Ca.off("remove-all-groups",this.onRemoveAllGroups)},methods:{add:function(e){e.id==null&&(e.id=aW++),this.messages=[].concat(nW(this.messages),[e])},remove:function(e){var n=this.messages.findIndex(function(l){return l.id===e.message.id});n!==-1&&(this.messages.splice(n,1),this.$emit(e.type,{message:e.message}))},onAdd:function(e){this.group==e.group&&this.add(e)},onRemove:function(e){this.remove({message:e,type:"close"})},onRemoveGroup:function(e){this.group===e&&(this.messages=[])},onRemoveAllGroups:function(){this.messages=[]},onEnter:function(){this.autoZIndex&&bo.set("modal",this.$refs.container,this.baseZIndex||this.$primevue.config.zIndex.modal)},onLeave:function(){var e=this;this.$refs.container&&this.autoZIndex&&ha(this.messages)&&setTimeout(function(){bo.clear(e.$refs.container)},200)},createStyle:function(){if(!this.styleElement&&!this.isUnstyled){var e;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",If(this.styleElement,"nonce",(e=this.$primevue)===null||e===void 0||(e=e.config)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce),document.head.appendChild(this.styleElement);var n="";for(var l in this.breakpoints){var m="";for(var d in this.breakpoints[l])m+=d+":"+this.breakpoints[l][d]+"!important;";n+=`
                        @media screen and (max-width: `.concat(l,`) {
                            .p-toast[`).concat(this.$attrSelector,`] {
                                `).concat(m,`
                            }
                        }
                    `)}this.styleElement.innerHTML=n}},destroyStyle:function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}},components:{ToastMessage:Q6,Portal:td}};function Zy(t){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(t)}function oE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function lW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oE(Object(n),!0).forEach(function(l){cW(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oE(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function cW(t,e,n){return(e=uW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uW(t){var e=dW(t,"string");return Zy(e)=="symbol"?e:e+""}function dW(t,e){if(Zy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Zy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hW(t,e,n,l,m,d){var x=wn("ToastMessage"),s=wn("Portal");return X(),bt(s,null,{default:Xe(function(){return[M("div",ie({ref:"container",class:t.cx("root"),style:t.sx("root",!0,{position:t.position})},t.ptmi("root")),[ge(kO,ie({name:"p-toast-message",tag:"div",onEnter:d.onEnter,onLeave:d.onLeave},lW({},t.ptm("transition"))),{default:Xe(function(){return[(X(!0),pe(an,null,fr(m.messages,function(T){return X(),bt(x,{key:T.id,message:T,templates:t.$slots,closeIcon:t.closeIcon,infoIcon:t.infoIcon,warnIcon:t.warnIcon,errorIcon:t.errorIcon,successIcon:t.successIcon,closeButtonProps:t.closeButtonProps,unstyled:t.unstyled,onClose:e[0]||(e[0]=function(E){return d.remove(E)}),pt:t.pt},null,8,["message","templates","closeIcon","infoIcon","warnIcon","errorIcon","successIcon","closeButtonProps","unstyled","pt"])}),128))]}),_:1},16,["onEnter","onLeave"])],16)]}),_:1})}Mh.render=hW;var pW={install:function(e){var n={add:function(m){Ca.emit("add",m)},remove:function(m){Ca.emit("remove",m)},removeGroup:function(m){Ca.emit("remove-group",m)},removeAllGroups:function(){Ca.emit("remove-all-groups")}};e.config.globalProperties.$toast=n,e.provide(KP,n)}};const Vl=t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t),fW={class:"product-card"},mW={class:"image-wrapper"},gW=["src"],yW=["src"],vW={class:"product-content"},bW={class:"product-name"},_W={class:"flex items-center gap-2 text-sm mt-2"},xW={class:"font-bold"},wW={class:"line-through text-[#c4c4c4]"},SW={class:"quick-add p-2"},CW={class:"flex gap-2 my-2"},kW=["onClick"],TW={class:"absolute top-2 left-2 flex gap-1 text-sm"},EW={class:"font-bold"},IW=Xr({__name:"ProductCard",props:{product:{}},setup(t){const e=Fc(),n=t,l=()=>{console.log(n.product.id),e.push({name:"product",params:{id:n.product.id}})},m=Ke(1),d=Ke(""),x=ki(()=>{var z;const A=new Map;return(z=n.product.variants)==null||z.forEach(j=>{A.has(j.colorHex)||A.set(j.colorHex,{colorHex:j.colorHex,colorName:j.colorName})}),Array.from(A.values()).map((j,U)=>({id:U+1,type:"color",color:j.colorHex,alt:j.colorName}))}),s=ki(()=>{var z;const A=new Set;return(z=n.product.variants)==null||z.forEach(j=>{A.add(j.size)}),Array.from(A).sort()}),T=ki(()=>{var z;if(!m.value||!d.value)return;const A=x.value[m.value-1];if(A)return(z=n.product.variants)==null?void 0:z.find(j=>j.colorHex===A.color&&j.size===d.value)}),E=A=>{d.value=d.value===A?"":A};return ho(()=>n.product,A=>{var z;((z=A.variants)==null?void 0:z.length)>0&&(m.value=1,d.value=s.value[0]||"")},{immediate:!0}),ho(m,A=>{console.log("Selected color:",A)}),ho(d,A=>{console.log("Selected size:",A)}),ho(T,A=>{console.log("Selected variant:",A)}),(A,z)=>{var j,U,K,oe,fe;return X(),pe("div",fW,[M("div",mW,[M("img",{src:typeof((j=n.product.images)==null?void 0:j[0])=="string"?n.product.images[0]:"https://via.placeholder.com/300",alt:"",class:"product-image",onClick:l},null,8,gW),M("img",{src:typeof((U=n.product.images)==null?void 0:U[1])=="string"?n.product.images[1]:typeof((K=n.product.images)==null?void 0:K[0])=="string"?n.product.images[0]:"https://via.placeholder.com/300",alt:"",class:"product-image hover-image",onClick:l},null,8,yW)]),M("div",vW,[M("p",bW,Ue(n.product.name),1),ge(GP,{modelValue:m.value,"onUpdate:modelValue":z[0]||(z[0]=me=>m.value=me),colorOptions:x.value},null,8,["modelValue","colorOptions"]),M("div",_W,[M("span",xW,Ue(Ie(Vl)(((oe=T.value)==null?void 0:oe.price)||n.product.price)),1),z[1]||(z[1]=M("span",{class:"rounded-lg bg-[#273bcd] p-1 text-white text-sm font-bold",style:{"font-size":"10px !important"}},"-20%",-1)),M("span",wW,Ue(Ie(Vl)(((fe=T.value)==null?void 0:fe.price)||n.product.price)),1)])]),M("div",SW,[z[2]||(z[2]=M("p",{class:"font-bold"},"Thm nhanh vo gi hng",-1)),M("div",CW,[(X(!0),pe(an,null,fr(s.value,me=>(X(),pe("span",{key:me,class:vn(["bg-white px-3 py-1 text-center rounded-lg cursor-pointer size",{"selected-size":d.value===me}]),onClick:ne=>E(me)},Ue(me),11,kW))),128))])]),z[4]||(z[4]=M("div",{class:"absolute uppercase text-white text-sm font-bold bg-[#273bcd] px-2 py-1 rounded-full right-[10px] top-[10px]",style:{"font-size":"10px !important"}}," New ",-1)),M("div",TW,[M("span",EW,Ue(n.product.rating),1),ge(Ie($l),{stars:1,modelValue:1}),z[3]||(z[3]=M("span",{class:"text-[#273bcd] font-bold"},"(83)",-1))])])}}}),Qa=Lo(IW,[["__scopeId","data-v-db053a75"]]),PW={class:"relative"},AW={class:""},RW={class:"w-primary mx-auto mb-8"},MW={class:"flex gap-4"},DW={class:"flex mt-4 gap-4"},LW={href:"/products",class:"overflow-hidden rounded-2xl"},OW=["src","alt"],zW={class:"text-2xl font-bold text-center"},BW={class:"w-primary mx-auto mb-8 mt-4"},FW={class:"grid"},$W={class:"col-3"},NW={class:"col-3"},VW={class:"col-3"},jW={class:"col-3"},UW={class:"w-primary mx-auto mb-8"},qW={class:"grid"},HW={class:"col-3"},GW={class:"col-3"},WW={class:"col-3"},KW={class:"col-3"},ZW=Xr({__name:"HomePage",setup(t){const e=s=>{console.log(s)},n=[A9,R9,M9],l=Ke("men"),m=[{image:"https://media3.coolmate.me/cdn-cgi/image/quality=80,format=auto/uploads/June2025/Tshirt.jpg",title:"o thun nam"},{image:"https://media3.coolmate.me/cdn-cgi/image/quality=80,format=auto/uploads/June2025/Polo_61.jpg",title:"o polo nam"},{image:"https://media3.coolmate.me/cdn-cgi/image/quality=80,format=auto/uploads/June2025/Short_Nam1.jpg",title:"Qun short nam"}],d=[{image:"https://media3.coolmate.me/cdn-cgi/image/quality=80,format=auto/uploads/June2025/Phu_kien12.jpg",title:"Ph kin"},{image:"https://media3.coolmate.me/cdn-cgi/image/quality=80,format=auto/uploads/June2025/Ao_Nu12.jpg",title:"o Th thao"},{image:"https://media3.coolmate.me/cdn-cgi/image/quality=80,format=auto/uploads/June2025/Shorts_nu12.jpg",title:"Qun th thao"}],x=[{id:"1",name:"o thun nam basic",description:"o thun nam cht liu cotton thong mt",price:199e3,rating:4.5,status:"active",variants:[]},{id:"2",name:"o polo nam th thao",description:"o polo nam ph hp cho th thao",price:299e3,rating:4.8,status:"active",variants:[]},{id:"3",name:"Qun jean nam slim fit",description:"Qun jean nam kiu dng slim fit hin i",price:399e3,rating:4.6,status:"active",variants:[]},{id:"4",name:"o khoc denim nam",description:"o khoc denim nam phong cch casual",price:599e3,rating:4.7,status:"active",variants:[]}];return(s,T)=>(X(),pe("div",PW,[M("div",AW,[ge(Ie(P9),{"slides-per-view":1,onSwiper:e,class:"w-full h-screen",modules:n,autoplay:{delay:2500,disableOnInteraction:!1},navigation:!0},{default:Xe(()=>[ge(Ie(Tw),null,{default:Xe(()=>T[2]||(T[2]=[M("a",{href:"/ai-recommendation"},[M("img",{src:"https://media3.coolmate.me/cdn-cgi/image/width=1920,quality=90,format=auto/uploads/April2025/1920x788(1)promax.jpg",alt:""})],-1)])),_:1}),ge(Ie(Tw),null,{default:Xe(()=>T[3]||(T[3]=[M("a",{href:"/ai-recommendation"},[M("img",{src:"https://media3.coolmate.me/cdn-cgi/image/width=1920,quality=90,format=auto/uploads/May2025/T-SHIRT__POLO_THE_THAO_-_Desktop-1.jpg",alt:""})],-1)])),_:1}),ge(Ie(Tw),null,{default:Xe(()=>T[4]||(T[4]=[M("a",{href:"/ai-recommendation"},[M("img",{src:"https://media3.coolmate.me/cdn-cgi/image/width=1920,quality=90,format=auto/uploads/May2025/T-SHIRT__POLO_THE_THAO_-_Desktopzz.jpg",alt:""})],-1)])),_:1})]),_:1}),M("div",RW,[M("div",MW,[M("span",{onClick:T[0]||(T[0]=E=>l.value="men"),class:vn(["px-5 py-2 rounded-full font-bold text-xl cursor-pointer",l.value==="men"?"bg-black text-white":"bg-gray-200"])},"  nam ",2),M("span",{onClick:T[1]||(T[1]=E=>l.value="women"),class:vn(["px-5 py-2 rounded-full font-bold text-xl cursor-pointer",l.value==="women"?"bg-black text-white":"bg-gray-200"])},"  n ",2)]),M("div",DW,[(X(!0),pe(an,null,fr(l.value==="men"?m:d,(E,A)=>(X(),pe("div",{key:A,class:"flex flex-col gap-4"},[M("a",LW,[M("img",{src:E.image,alt:E.title,class:"w-[280px] hover:scale-105 transition-all duration-300 object-cover flex-1 !rounded-2xl"},null,8,OW)]),M("div",zW,Ue(E.title),1)]))),128))])]),T[7]||(T[7]=da('<div class="w-primary mx-auto mb-8 flex gap-4"><div class="relative flex-1 overflow-hidden rounded-2xl"><img src="https://media3.coolmate.me/cdn-cgi/image/width=1800,height=1200,quality=80,format=auto/uploads/May2025/Frame_87642.jpg" alt="" class="w-full object-cover rounded-2xl hover:scale-105 transition-all duration-300"><span class="font-bold text-2xl absolute bottom-42 left-8 text-white">MEN WEAR</span><span class="font-bold text-lg absolute bottom-32 left-8 text-white">Nhp COOLNEW Gim 30k n t 199k</span><button class="font-bold text-2xl absolute bottom-14 left-8 bg-white rounded-full px-4 py-2"> Mua ngay </button></div><div class="relative flex-1 overflow-hidden rounded-2xl"><img src="https://media3.coolmate.me/cdn-cgi/image/width=1800,height=1200,quality=80,format=auto/uploads/May2025/Frame_87638.jpg" alt="" class="w-full object-cover rounded-2xl hover:scale-105 transition-all duration-300"><span class="font-bold text-2xl absolute bottom-42 left-8 text-white">WOMEN ACTIVE</span><span class="font-bold text-lg absolute bottom-32 left-8 text-white">Tng Cc Coolmate n t 299k | Freeship</span><button class="font-bold text-2xl absolute bottom-14 left-8 bg-white rounded-full px-4 py-2"> Mua ngay </button></div></div><div class="relative"><div class="font-bold text-8xl absolute bottom-86 left-20 text-white"> CASUALWEAR </div><div class="font-bold text-8xl absolute bottom-62 left-20 text-white"> COLLECTION </div><div class="font-bold text-2xl absolute bottom-52 left-20 text-white"> Nhp COOLNEW Gim 30k n u tin t 199k </div><img src="https://media3.coolmate.me/cdn-cgi/image/quality=80,format=auto/uploads/May2025/Casual_-_Desktop.jpg" alt=""><button class="font-bold text-2xl absolute bottom-20 left-20 bg-white rounded-full px-6 py-4"> Mua ngay </button></div>',2)),M("div",BW,[T[5]||(T[5]=M("div",{class:"!font-criteria font-bold mb-2 text-2xl"},"SN PHM MC HNG NGY",-1)),M("div",FW,[M("div",$W,[ge(Qa,{product:x[0]},null,8,["product"])]),M("div",NW,[ge(Qa,{product:x[1]},null,8,["product"])]),M("div",VW,[ge(Qa,{product:x[2]},null,8,["product"])]),M("div",jW,[ge(Qa,{product:x[3]},null,8,["product"])])])]),T[8]||(T[8]=da('<div class="relative"><div class="font-bold text-8xl absolute bottom-86 left-20 text-white"> CASUALWEAR </div><div class="font-bold text-8xl absolute bottom-62 left-20 text-white"> COLLECTION </div><div class="font-bold text-2xl absolute bottom-52 left-20 text-white"> Nhp COOLNEW Gim 30k n u tin t 199k </div><img src="https://media3.coolmate.me/cdn-cgi/image/quality=80,format=auto/uploads/May2025/Casual_-_Desktop.jpg" alt=""><button class="font-bold text-2xl absolute bottom-20 left-20 bg-white rounded-full px-6 py-4"> Mua ngay </button></div>',1)),M("div",UW,[T[6]||(T[6]=M("div",null,"SN PHM MC HNG NGY",-1)),M("div",qW,[M("div",HW,[ge(Qa,{product:x[0]},null,8,["product"])]),M("div",GW,[ge(Qa,{product:x[1]},null,8,["product"])]),M("div",WW,[ge(Qa,{product:x[2]},null,8,["product"])]),M("div",KW,[ge(Qa,{product:x[3]},null,8,["product"])])])])])]))}}),ph=Ke(null),Mg=Ke(null),Dg=Ke(null),XW=ki(()=>!!ph.value);function l0(){const t=Fc(),e=()=>{const T=localStorage.getItem("accessToken"),E=localStorage.getItem("refreshToken"),A=localStorage.getItem("user");if(T&&(ph.value=T),E&&(Mg.value=E),A)try{Dg.value=JSON.parse(A)}catch{console.warn("Invalid user data in localStorage, clearing..."),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),Dg.value=null,ph.value=null,Mg.value=null}},n=(T,E)=>{if(!T.accessToken||!T.refreshToken)throw new Error("Invalid tokens provided");if(!E||!E.id||!E.username)throw new Error("Invalid user data provided");ph.value=T.accessToken,Mg.value=T.refreshToken,Dg.value=E,localStorage.setItem("accessToken",T.accessToken),localStorage.setItem("refreshToken",T.refreshToken),localStorage.setItem("user",JSON.stringify(E))},l=()=>{console.log("Clearing auth state"),ph.value=null,Mg.value=null,Dg.value=null;try{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),console.log("LocalStorage cleared successfully")}catch(T){console.warn("Error clearing localStorage:",T)}},m=()=>{try{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),console.log("LocalStorage cleared successfully")}catch(T){console.warn("Error clearing localStorage:",T)}},d=()=>{console.log("Logout called - clearing auth state"),l(),t&&typeof t.push=="function"?(console.log("Redirecting to login page"),t.push("/login")):(console.log("Router not available, using window.location"),window.location.href="/login")},x=()=>{console.log("Logout without redirect - clearing auth state only"),l()},s=T=>{console.log("Updating access token:",!!T),ph.value=T,localStorage.setItem("accessToken",T)};return{accessToken:ki(()=>ph.value),refreshToken:ki(()=>Mg.value),user:ki(()=>Dg.value),isAuthenticated:XW,initializeAuth:e,setAuth:n,clearAuth:l,clearLocalStorage:m,logout:d,logoutWithoutRedirect:x,updateAccessToken:s}}const YW={key:0,class:"flex items-center gap-4 cursor-pointer"},JW={class:"!w-8 !h-8 bg-primary rounded-full flex items-center justify-center text-white font-bold"},QW={class:"hidden md:block"},eK={class:"text-sm font-medium"},tK={class:"text-xs text-gray-500"},nK={key:1,class:"flex items-center gap-2"},rK=Xr({__name:"UserMenu",setup(t){const{user:e,isAuthenticated:n,logout:l}=l0(),m=Xl(),d=Fc(),x=ki(()=>{var E;return(E=e.value)!=null&&E.username?e.value.username.charAt(0).toUpperCase():"U"});console.log(e);const s=async()=>{try{l(),m.add({severity:"success",summary:"ng xut thnh cng",detail:"Bn  ng xut khi h thng",life:3e3})}catch{m.add({severity:"error",summary:"Li ng xut",detail:"C li xy ra khi ng xut",life:3e3})}},T=()=>{d.push({name:"info"})};return(E,A)=>{var j,U;const z=No("tooltip");return Ie(n)?(X(),pe("div",YW,[M("div",{class:"flex items-center gap-2",onClick:T},[M("div",JW,Ue(x.value),1),M("div",QW,[M("p",eK,Ue((j=Ie(e))==null?void 0:j.username),1),M("p",tK,Ue((U=Ie(e))==null?void 0:U.email),1)])]),_r(ge(Ie(jr),{icon:"pi pi-sign-out",severity:"secondary",text:"",onClick:s},null,512),[[z,"ng xut",void 0,{top:!0}]])])):(X(),pe("div",nK,[ge(Ie(jr),{label:"ng nhp",severity:"secondary",text:"",onClick:A[0]||(A[0]=K=>E.$router.push("/login"))}),ge(Ie(jr),{label:"ng k",onClick:A[1]||(A[1]=K=>E.$router.push("/signup"))})]))}}}),iK={class:"flex justify-between items-center px-4 py-2 border-b border-gray-200"},oK={class:"flex items-center gap-4 justify-center"},c0=Xr({__name:"AppHeader",setup(t){const e=Fc(),n=Ke(""),l=()=>{e.push("/cart")},m=()=>{e.push({name:"home"})},d=()=>{e.push({name:"spotlight"})},x=()=>{e.push({name:"chat"})};return(s,T)=>{const E=No("tooltip");return X(),pe("header",iK,[M("div",{class:"flex items-center cursor-pointer",onClick:m},T[1]||(T[1]=[M("img",{src:"https://www.coolmate.me/images/logo.png",alt:"Logo",class:"!h-8"},null,-1)])),T[2]||(T[2]=M("div",{class:"flex-1 flex justify-center"},null,-1)),M("div",oK,[ge(Ie(N_),null,{default:Xe(()=>[ge(Ie(vo),{modelValue:n.value,"onUpdate:modelValue":T[0]||(T[0]=A=>n.value=A),placeholder:"Tm kim sn phm",size:"small",class:"!rounded-full",onKeyup:qi(d,["enter"])},null,8,["modelValue"]),ge(Ie(V_),{class:"pi pi-search"})]),_:1}),ge(rK),_r(ge(Ie(jr),{icon:"pi pi-comments",class:"p-button-text p-button-secondary",onClick:x},null,512),[[E,"H tr khch hng",void 0,{top:!0}]]),ge(Ie(H6),{value:"4",severity:"danger",size:"small"},{default:Xe(()=>[M("img",{src:"https://www.coolmate.me/icons/icon-cart.svg",alt:"",onClick:l,class:"cursor-pointer"})]),_:1})])])}}});function eA(t,e){return function(){return t.apply(e,arguments)}}const{toString:sK}=Object.prototype,{getPrototypeOf:zS}=Object,{iterator:q_,toStringTag:tA}=Symbol,H_=(t=>e=>{const n=sK.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ll=t=>(t=t.toLowerCase(),e=>H_(e)===t),G_=t=>e=>typeof e===t,{isArray:Mf}=Array,Xy=G_("undefined");function aK(t){return t!==null&&!Xy(t)&&t.constructor!==null&&!Xy(t.constructor)&&Ks(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nA=ll("ArrayBuffer");function lK(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&nA(t.buffer),e}const cK=G_("string"),Ks=G_("function"),rA=G_("number"),W_=t=>t!==null&&typeof t=="object",uK=t=>t===!0||t===!1,Lb=t=>{if(H_(t)!=="object")return!1;const e=zS(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(tA in t)&&!(q_ in t)},dK=ll("Date"),hK=ll("File"),pK=ll("Blob"),fK=ll("FileList"),mK=t=>W_(t)&&Ks(t.pipe),gK=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ks(t.append)&&((e=H_(t))==="formdata"||e==="object"&&Ks(t.toString)&&t.toString()==="[object FormData]"))},yK=ll("URLSearchParams"),[vK,bK,_K,xK]=["ReadableStream","Request","Response","Headers"].map(ll),wK=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function u0(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let l,m;if(typeof t!="object"&&(t=[t]),Mf(t))for(l=0,m=t.length;l<m;l++)e.call(null,t[l],l,t);else{const d=n?Object.getOwnPropertyNames(t):Object.keys(t),x=d.length;let s;for(l=0;l<x;l++)s=d[l],e.call(null,t[s],s,t)}}function iA(t,e){e=e.toLowerCase();const n=Object.keys(t);let l=n.length,m;for(;l-- >0;)if(m=n[l],e===m.toLowerCase())return m;return null}const yh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,oA=t=>!Xy(t)&&t!==yh;function P2(){const{caseless:t}=oA(this)&&this||{},e={},n=(l,m)=>{const d=t&&iA(e,m)||m;Lb(e[d])&&Lb(l)?e[d]=P2(e[d],l):Lb(l)?e[d]=P2({},l):Mf(l)?e[d]=l.slice():e[d]=l};for(let l=0,m=arguments.length;l<m;l++)arguments[l]&&u0(arguments[l],n);return e}const SK=(t,e,n,{allOwnKeys:l}={})=>(u0(e,(m,d)=>{n&&Ks(m)?t[d]=eA(m,n):t[d]=m},{allOwnKeys:l}),t),CK=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),kK=(t,e,n,l)=>{t.prototype=Object.create(e.prototype,l),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},TK=(t,e,n,l)=>{let m,d,x;const s={};if(e=e||{},t==null)return e;do{for(m=Object.getOwnPropertyNames(t),d=m.length;d-- >0;)x=m[d],(!l||l(x,t,e))&&!s[x]&&(e[x]=t[x],s[x]=!0);t=n!==!1&&zS(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},EK=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const l=t.indexOf(e,n);return l!==-1&&l===n},IK=t=>{if(!t)return null;if(Mf(t))return t;let e=t.length;if(!rA(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},PK=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&zS(Uint8Array)),AK=(t,e)=>{const l=(t&&t[q_]).call(t);let m;for(;(m=l.next())&&!m.done;){const d=m.value;e.call(t,d[0],d[1])}},RK=(t,e)=>{let n;const l=[];for(;(n=t.exec(e))!==null;)l.push(n);return l},MK=ll("HTMLFormElement"),DK=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,l,m){return l.toUpperCase()+m}),sE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),LK=ll("RegExp"),sA=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),l={};u0(n,(m,d)=>{let x;(x=e(m,d,t))!==!1&&(l[d]=x||m)}),Object.defineProperties(t,l)},OK=t=>{sA(t,(e,n)=>{if(Ks(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const l=t[n];if(Ks(l)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},zK=(t,e)=>{const n={},l=m=>{m.forEach(d=>{n[d]=!0})};return Mf(t)?l(t):l(String(t).split(e)),n},BK=()=>{},FK=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function $K(t){return!!(t&&Ks(t.append)&&t[tA]==="FormData"&&t[q_])}const NK=t=>{const e=new Array(10),n=(l,m)=>{if(W_(l)){if(e.indexOf(l)>=0)return;if(!("toJSON"in l)){e[m]=l;const d=Mf(l)?[]:{};return u0(l,(x,s)=>{const T=n(x,m+1);!Xy(T)&&(d[s]=T)}),e[m]=void 0,d}}return l};return n(t,0)},VK=ll("AsyncFunction"),jK=t=>t&&(W_(t)||Ks(t))&&Ks(t.then)&&Ks(t.catch),aA=((t,e)=>t?setImmediate:e?((n,l)=>(yh.addEventListener("message",({source:m,data:d})=>{m===yh&&d===n&&l.length&&l.shift()()},!1),m=>{l.push(m),yh.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ks(yh.postMessage)),UK=typeof queueMicrotask<"u"?queueMicrotask.bind(yh):typeof process<"u"&&process.nextTick||aA,qK=t=>t!=null&&Ks(t[q_]),qt={isArray:Mf,isArrayBuffer:nA,isBuffer:aK,isFormData:gK,isArrayBufferView:lK,isString:cK,isNumber:rA,isBoolean:uK,isObject:W_,isPlainObject:Lb,isReadableStream:vK,isRequest:bK,isResponse:_K,isHeaders:xK,isUndefined:Xy,isDate:dK,isFile:hK,isBlob:pK,isRegExp:LK,isFunction:Ks,isStream:mK,isURLSearchParams:yK,isTypedArray:PK,isFileList:fK,forEach:u0,merge:P2,extend:SK,trim:wK,stripBOM:CK,inherits:kK,toFlatObject:TK,kindOf:H_,kindOfTest:ll,endsWith:EK,toArray:IK,forEachEntry:AK,matchAll:RK,isHTMLForm:MK,hasOwnProperty:sE,hasOwnProp:sE,reduceDescriptors:sA,freezeMethods:OK,toObjectSet:zK,toCamelCase:DK,noop:BK,toFiniteNumber:FK,findKey:iA,global:yh,isContextDefined:oA,isSpecCompliantForm:$K,toJSONObject:NK,isAsyncFn:VK,isThenable:jK,setImmediate:aA,asap:UK,isIterable:qK};function Jr(t,e,n,l,m){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),l&&(this.request=l),m&&(this.response=m,this.status=m.status?m.status:null)}qt.inherits(Jr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:qt.toJSONObject(this.config),code:this.code,status:this.status}}});const lA=Jr.prototype,cA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{cA[t]={value:t}});Object.defineProperties(Jr,cA);Object.defineProperty(lA,"isAxiosError",{value:!0});Jr.from=(t,e,n,l,m,d)=>{const x=Object.create(lA);return qt.toFlatObject(t,x,function(T){return T!==Error.prototype},s=>s!=="isAxiosError"),Jr.call(x,t.message,e,n,l,m),x.cause=t,x.name=t.name,d&&Object.assign(x,d),x};const HK=null;function A2(t){return qt.isPlainObject(t)||qt.isArray(t)}function uA(t){return qt.endsWith(t,"[]")?t.slice(0,-2):t}function aE(t,e,n){return t?t.concat(e).map(function(m,d){return m=uA(m),!n&&d?"["+m+"]":m}).join(n?".":""):e}function GK(t){return qt.isArray(t)&&!t.some(A2)}const WK=qt.toFlatObject(qt,{},null,function(e){return/^is[A-Z]/.test(e)});function K_(t,e,n){if(!qt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=qt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(oe,fe){return!qt.isUndefined(fe[oe])});const l=n.metaTokens,m=n.visitor||A,d=n.dots,x=n.indexes,T=(n.Blob||typeof Blob<"u"&&Blob)&&qt.isSpecCompliantForm(e);if(!qt.isFunction(m))throw new TypeError("visitor must be a function");function E(K){if(K===null)return"";if(qt.isDate(K))return K.toISOString();if(qt.isBoolean(K))return K.toString();if(!T&&qt.isBlob(K))throw new Jr("Blob is not supported. Use a Buffer instead.");return qt.isArrayBuffer(K)||qt.isTypedArray(K)?T&&typeof Blob=="function"?new Blob([K]):Buffer.from(K):K}function A(K,oe,fe){let me=K;if(K&&!fe&&typeof K=="object"){if(qt.endsWith(oe,"{}"))oe=l?oe:oe.slice(0,-2),K=JSON.stringify(K);else if(qt.isArray(K)&&GK(K)||(qt.isFileList(K)||qt.endsWith(oe,"[]"))&&(me=qt.toArray(K)))return oe=uA(oe),me.forEach(function(te,re){!(qt.isUndefined(te)||te===null)&&e.append(x===!0?aE([oe],re,d):x===null?oe:oe+"[]",E(te))}),!1}return A2(K)?!0:(e.append(aE(fe,oe,d),E(K)),!1)}const z=[],j=Object.assign(WK,{defaultVisitor:A,convertValue:E,isVisitable:A2});function U(K,oe){if(!qt.isUndefined(K)){if(z.indexOf(K)!==-1)throw Error("Circular reference detected in "+oe.join("."));z.push(K),qt.forEach(K,function(me,ne){(!(qt.isUndefined(me)||me===null)&&m.call(e,me,qt.isString(ne)?ne.trim():ne,oe,j))===!0&&U(me,oe?oe.concat(ne):[ne])}),z.pop()}}if(!qt.isObject(t))throw new TypeError("data must be an object");return U(t),e}function lE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(l){return e[l]})}function BS(t,e){this._pairs=[],t&&K_(t,this,e)}const dA=BS.prototype;dA.append=function(e,n){this._pairs.push([e,n])};dA.toString=function(e){const n=e?function(l){return e.call(this,l,lE)}:lE;return this._pairs.map(function(m){return n(m[0])+"="+n(m[1])},"").join("&")};function KK(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hA(t,e,n){if(!e)return t;const l=n&&n.encode||KK;qt.isFunction(n)&&(n={serialize:n});const m=n&&n.serialize;let d;if(m?d=m(e,n):d=qt.isURLSearchParams(e)?e.toString():new BS(e,n).toString(l),d){const x=t.indexOf("#");x!==-1&&(t=t.slice(0,x)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class cE{constructor(){this.handlers=[]}use(e,n,l){return this.handlers.push({fulfilled:e,rejected:n,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){qt.forEach(this.handlers,function(l){l!==null&&e(l)})}}const pA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZK=typeof URLSearchParams<"u"?URLSearchParams:BS,XK=typeof FormData<"u"?FormData:null,YK=typeof Blob<"u"?Blob:null,JK={isBrowser:!0,classes:{URLSearchParams:ZK,FormData:XK,Blob:YK},protocols:["http","https","file","blob","url","data"]},FS=typeof window<"u"&&typeof document<"u",R2=typeof navigator=="object"&&navigator||void 0,QK=FS&&(!R2||["ReactNative","NativeScript","NS"].indexOf(R2.product)<0),eZ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tZ=FS&&window.location.href||"http://localhost",nZ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:FS,hasStandardBrowserEnv:QK,hasStandardBrowserWebWorkerEnv:eZ,navigator:R2,origin:tZ},Symbol.toStringTag,{value:"Module"})),_s={...nZ,...JK};function rZ(t,e){return K_(t,new _s.classes.URLSearchParams,Object.assign({visitor:function(n,l,m,d){return _s.isNode&&qt.isBuffer(n)?(this.append(l,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},e))}function iZ(t){return qt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function oZ(t){const e={},n=Object.keys(t);let l;const m=n.length;let d;for(l=0;l<m;l++)d=n[l],e[d]=t[d];return e}function fA(t){function e(n,l,m,d){let x=n[d++];if(x==="__proto__")return!0;const s=Number.isFinite(+x),T=d>=n.length;return x=!x&&qt.isArray(m)?m.length:x,T?(qt.hasOwnProp(m,x)?m[x]=[m[x],l]:m[x]=l,!s):((!m[x]||!qt.isObject(m[x]))&&(m[x]=[]),e(n,l,m[x],d)&&qt.isArray(m[x])&&(m[x]=oZ(m[x])),!s)}if(qt.isFormData(t)&&qt.isFunction(t.entries)){const n={};return qt.forEachEntry(t,(l,m)=>{e(iZ(l),m,n,0)}),n}return null}function sZ(t,e,n){if(qt.isString(t))try{return(e||JSON.parse)(t),qt.trim(t)}catch(l){if(l.name!=="SyntaxError")throw l}return(n||JSON.stringify)(t)}const d0={transitional:pA,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const l=n.getContentType()||"",m=l.indexOf("application/json")>-1,d=qt.isObject(e);if(d&&qt.isHTMLForm(e)&&(e=new FormData(e)),qt.isFormData(e))return m?JSON.stringify(fA(e)):e;if(qt.isArrayBuffer(e)||qt.isBuffer(e)||qt.isStream(e)||qt.isFile(e)||qt.isBlob(e)||qt.isReadableStream(e))return e;if(qt.isArrayBufferView(e))return e.buffer;if(qt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(d){if(l.indexOf("application/x-www-form-urlencoded")>-1)return rZ(e,this.formSerializer).toString();if((s=qt.isFileList(e))||l.indexOf("multipart/form-data")>-1){const T=this.env&&this.env.FormData;return K_(s?{"files[]":e}:e,T&&new T,this.formSerializer)}}return d||m?(n.setContentType("application/json",!1),sZ(e)):e}],transformResponse:[function(e){const n=this.transitional||d0.transitional,l=n&&n.forcedJSONParsing,m=this.responseType==="json";if(qt.isResponse(e)||qt.isReadableStream(e))return e;if(e&&qt.isString(e)&&(l&&!this.responseType||m)){const x=!(n&&n.silentJSONParsing)&&m;try{return JSON.parse(e)}catch(s){if(x)throw s.name==="SyntaxError"?Jr.from(s,Jr.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_s.classes.FormData,Blob:_s.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};qt.forEach(["delete","get","head","post","put","patch"],t=>{d0.headers[t]={}});const aZ=qt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lZ=t=>{const e={};let n,l,m;return t&&t.split(`
`).forEach(function(x){m=x.indexOf(":"),n=x.substring(0,m).trim().toLowerCase(),l=x.substring(m+1).trim(),!(!n||e[n]&&aZ[n])&&(n==="set-cookie"?e[n]?e[n].push(l):e[n]=[l]:e[n]=e[n]?e[n]+", "+l:l)}),e},uE=Symbol("internals");function Lg(t){return t&&String(t).trim().toLowerCase()}function Ob(t){return t===!1||t==null?t:qt.isArray(t)?t.map(Ob):String(t)}function cZ(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=n.exec(t);)e[l[1]]=l[2];return e}const uZ=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Aw(t,e,n,l,m){if(qt.isFunction(l))return l.call(this,e,n);if(m&&(e=n),!!qt.isString(e)){if(qt.isString(l))return e.indexOf(l)!==-1;if(qt.isRegExp(l))return l.test(e)}}function dZ(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,l)=>n.toUpperCase()+l)}function hZ(t,e){const n=qt.toCamelCase(" "+e);["get","set","has"].forEach(l=>{Object.defineProperty(t,l+n,{value:function(m,d,x){return this[l].call(this,e,m,d,x)},configurable:!0})})}let Zs=class{constructor(e){e&&this.set(e)}set(e,n,l){const m=this;function d(s,T,E){const A=Lg(T);if(!A)throw new Error("header name must be a non-empty string");const z=qt.findKey(m,A);(!z||m[z]===void 0||E===!0||E===void 0&&m[z]!==!1)&&(m[z||T]=Ob(s))}const x=(s,T)=>qt.forEach(s,(E,A)=>d(E,A,T));if(qt.isPlainObject(e)||e instanceof this.constructor)x(e,n);else if(qt.isString(e)&&(e=e.trim())&&!uZ(e))x(lZ(e),n);else if(qt.isObject(e)&&qt.isIterable(e)){let s={},T,E;for(const A of e){if(!qt.isArray(A))throw TypeError("Object iterator must return a key-value pair");s[E=A[0]]=(T=s[E])?qt.isArray(T)?[...T,A[1]]:[T,A[1]]:A[1]}x(s,n)}else e!=null&&d(n,e,l);return this}get(e,n){if(e=Lg(e),e){const l=qt.findKey(this,e);if(l){const m=this[l];if(!n)return m;if(n===!0)return cZ(m);if(qt.isFunction(n))return n.call(this,m,l);if(qt.isRegExp(n))return n.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Lg(e),e){const l=qt.findKey(this,e);return!!(l&&this[l]!==void 0&&(!n||Aw(this,this[l],l,n)))}return!1}delete(e,n){const l=this;let m=!1;function d(x){if(x=Lg(x),x){const s=qt.findKey(l,x);s&&(!n||Aw(l,l[s],s,n))&&(delete l[s],m=!0)}}return qt.isArray(e)?e.forEach(d):d(e),m}clear(e){const n=Object.keys(this);let l=n.length,m=!1;for(;l--;){const d=n[l];(!e||Aw(this,this[d],d,e,!0))&&(delete this[d],m=!0)}return m}normalize(e){const n=this,l={};return qt.forEach(this,(m,d)=>{const x=qt.findKey(l,d);if(x){n[x]=Ob(m),delete n[d];return}const s=e?dZ(d):String(d).trim();s!==d&&delete n[d],n[s]=Ob(m),l[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return qt.forEach(this,(l,m)=>{l!=null&&l!==!1&&(n[m]=e&&qt.isArray(l)?l.join(", "):l)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const l=new this(e);return n.forEach(m=>l.set(m)),l}static accessor(e){const l=(this[uE]=this[uE]={accessors:{}}).accessors,m=this.prototype;function d(x){const s=Lg(x);l[s]||(hZ(m,x),l[s]=!0)}return qt.isArray(e)?e.forEach(d):d(e),this}};Zs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);qt.reduceDescriptors(Zs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(l){this[n]=l}}});qt.freezeMethods(Zs);function Rw(t,e){const n=this||d0,l=e||n,m=Zs.from(l.headers);let d=l.data;return qt.forEach(t,function(s){d=s.call(n,d,m.normalize(),e?e.status:void 0)}),m.normalize(),d}function mA(t){return!!(t&&t.__CANCEL__)}function Df(t,e,n){Jr.call(this,t??"canceled",Jr.ERR_CANCELED,e,n),this.name="CanceledError"}qt.inherits(Df,Jr,{__CANCEL__:!0});function gA(t,e,n){const l=n.config.validateStatus;!n.status||!l||l(n.status)?t(n):e(new Jr("Request failed with status code "+n.status,[Jr.ERR_BAD_REQUEST,Jr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function pZ(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function fZ(t,e){t=t||10;const n=new Array(t),l=new Array(t);let m=0,d=0,x;return e=e!==void 0?e:1e3,function(T){const E=Date.now(),A=l[d];x||(x=E),n[m]=T,l[m]=E;let z=d,j=0;for(;z!==m;)j+=n[z++],z=z%t;if(m=(m+1)%t,m===d&&(d=(d+1)%t),E-x<e)return;const U=A&&E-A;return U?Math.round(j*1e3/U):void 0}}function mZ(t,e){let n=0,l=1e3/e,m,d;const x=(E,A=Date.now())=>{n=A,m=null,d&&(clearTimeout(d),d=null),t.apply(null,E)};return[(...E)=>{const A=Date.now(),z=A-n;z>=l?x(E,A):(m=E,d||(d=setTimeout(()=>{d=null,x(m)},l-z)))},()=>m&&x(m)]}const p_=(t,e,n=3)=>{let l=0;const m=fZ(50,250);return mZ(d=>{const x=d.loaded,s=d.lengthComputable?d.total:void 0,T=x-l,E=m(T),A=x<=s;l=x;const z={loaded:x,total:s,progress:s?x/s:void 0,bytes:T,rate:E||void 0,estimated:E&&s&&A?(s-x)/E:void 0,event:d,lengthComputable:s!=null,[e?"download":"upload"]:!0};t(z)},n)},dE=(t,e)=>{const n=t!=null;return[l=>e[0]({lengthComputable:n,total:t,loaded:l}),e[1]]},hE=t=>(...e)=>qt.asap(()=>t(...e)),gZ=_s.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,_s.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(_s.origin),_s.navigator&&/(msie|trident)/i.test(_s.navigator.userAgent)):()=>!0,yZ=_s.hasStandardBrowserEnv?{write(t,e,n,l,m,d){const x=[t+"="+encodeURIComponent(e)];qt.isNumber(n)&&x.push("expires="+new Date(n).toGMTString()),qt.isString(l)&&x.push("path="+l),qt.isString(m)&&x.push("domain="+m),d===!0&&x.push("secure"),document.cookie=x.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vZ(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function bZ(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function yA(t,e,n){let l=!vZ(e);return t&&(l||n==!1)?bZ(t,e):e}const pE=t=>t instanceof Zs?{...t}:t;function kh(t,e){e=e||{};const n={};function l(E,A,z,j){return qt.isPlainObject(E)&&qt.isPlainObject(A)?qt.merge.call({caseless:j},E,A):qt.isPlainObject(A)?qt.merge({},A):qt.isArray(A)?A.slice():A}function m(E,A,z,j){if(qt.isUndefined(A)){if(!qt.isUndefined(E))return l(void 0,E,z,j)}else return l(E,A,z,j)}function d(E,A){if(!qt.isUndefined(A))return l(void 0,A)}function x(E,A){if(qt.isUndefined(A)){if(!qt.isUndefined(E))return l(void 0,E)}else return l(void 0,A)}function s(E,A,z){if(z in e)return l(E,A);if(z in t)return l(void 0,E)}const T={url:d,method:d,data:d,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,withXSRFToken:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:s,headers:(E,A,z)=>m(pE(E),pE(A),z,!0)};return qt.forEach(Object.keys(Object.assign({},t,e)),function(A){const z=T[A]||m,j=z(t[A],e[A],A);qt.isUndefined(j)&&z!==s||(n[A]=j)}),n}const vA=t=>{const e=kh({},t);let{data:n,withXSRFToken:l,xsrfHeaderName:m,xsrfCookieName:d,headers:x,auth:s}=e;e.headers=x=Zs.from(x),e.url=hA(yA(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),s&&x.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let T;if(qt.isFormData(n)){if(_s.hasStandardBrowserEnv||_s.hasStandardBrowserWebWorkerEnv)x.setContentType(void 0);else if((T=x.getContentType())!==!1){const[E,...A]=T?T.split(";").map(z=>z.trim()).filter(Boolean):[];x.setContentType([E||"multipart/form-data",...A].join("; "))}}if(_s.hasStandardBrowserEnv&&(l&&qt.isFunction(l)&&(l=l(e)),l||l!==!1&&gZ(e.url))){const E=m&&d&&yZ.read(d);E&&x.set(m,E)}return e},_Z=typeof XMLHttpRequest<"u",xZ=_Z&&function(t){return new Promise(function(n,l){const m=vA(t);let d=m.data;const x=Zs.from(m.headers).normalize();let{responseType:s,onUploadProgress:T,onDownloadProgress:E}=m,A,z,j,U,K;function oe(){U&&U(),K&&K(),m.cancelToken&&m.cancelToken.unsubscribe(A),m.signal&&m.signal.removeEventListener("abort",A)}let fe=new XMLHttpRequest;fe.open(m.method.toUpperCase(),m.url,!0),fe.timeout=m.timeout;function me(){if(!fe)return;const te=Zs.from("getAllResponseHeaders"in fe&&fe.getAllResponseHeaders()),ze={data:!s||s==="text"||s==="json"?fe.responseText:fe.response,status:fe.status,statusText:fe.statusText,headers:te,config:t,request:fe};gA(function(Me){n(Me),oe()},function(Me){l(Me),oe()},ze),fe=null}"onloadend"in fe?fe.onloadend=me:fe.onreadystatechange=function(){!fe||fe.readyState!==4||fe.status===0&&!(fe.responseURL&&fe.responseURL.indexOf("file:")===0)||setTimeout(me)},fe.onabort=function(){fe&&(l(new Jr("Request aborted",Jr.ECONNABORTED,t,fe)),fe=null)},fe.onerror=function(){l(new Jr("Network Error",Jr.ERR_NETWORK,t,fe)),fe=null},fe.ontimeout=function(){let re=m.timeout?"timeout of "+m.timeout+"ms exceeded":"timeout exceeded";const ze=m.transitional||pA;m.timeoutErrorMessage&&(re=m.timeoutErrorMessage),l(new Jr(re,ze.clarifyTimeoutError?Jr.ETIMEDOUT:Jr.ECONNABORTED,t,fe)),fe=null},d===void 0&&x.setContentType(null),"setRequestHeader"in fe&&qt.forEach(x.toJSON(),function(re,ze){fe.setRequestHeader(ze,re)}),qt.isUndefined(m.withCredentials)||(fe.withCredentials=!!m.withCredentials),s&&s!=="json"&&(fe.responseType=m.responseType),E&&([j,K]=p_(E,!0),fe.addEventListener("progress",j)),T&&fe.upload&&([z,U]=p_(T),fe.upload.addEventListener("progress",z),fe.upload.addEventListener("loadend",U)),(m.cancelToken||m.signal)&&(A=te=>{fe&&(l(!te||te.type?new Df(null,t,fe):te),fe.abort(),fe=null)},m.cancelToken&&m.cancelToken.subscribe(A),m.signal&&(m.signal.aborted?A():m.signal.addEventListener("abort",A)));const ne=pZ(m.url);if(ne&&_s.protocols.indexOf(ne)===-1){l(new Jr("Unsupported protocol "+ne+":",Jr.ERR_BAD_REQUEST,t));return}fe.send(d||null)})},wZ=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let l=new AbortController,m;const d=function(E){if(!m){m=!0,s();const A=E instanceof Error?E:this.reason;l.abort(A instanceof Jr?A:new Df(A instanceof Error?A.message:A))}};let x=e&&setTimeout(()=>{x=null,d(new Jr(`timeout ${e} of ms exceeded`,Jr.ETIMEDOUT))},e);const s=()=>{t&&(x&&clearTimeout(x),x=null,t.forEach(E=>{E.unsubscribe?E.unsubscribe(d):E.removeEventListener("abort",d)}),t=null)};t.forEach(E=>E.addEventListener("abort",d));const{signal:T}=l;return T.unsubscribe=()=>qt.asap(s),T}},SZ=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let l=0,m;for(;l<n;)m=l+e,yield t.slice(l,m),l=m},CZ=async function*(t,e){for await(const n of kZ(t))yield*SZ(n,e)},kZ=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:l}=await e.read();if(n)break;yield l}}finally{await e.cancel()}},fE=(t,e,n,l)=>{const m=CZ(t,e);let d=0,x,s=T=>{x||(x=!0,l&&l(T))};return new ReadableStream({async pull(T){try{const{done:E,value:A}=await m.next();if(E){s(),T.close();return}let z=A.byteLength;if(n){let j=d+=z;n(j)}T.enqueue(new Uint8Array(A))}catch(E){throw s(E),E}},cancel(T){return s(T),m.return()}},{highWaterMark:2})},Z_=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",bA=Z_&&typeof ReadableStream=="function",TZ=Z_&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),_A=(t,...e)=>{try{return!!t(...e)}catch{return!1}},EZ=bA&&_A(()=>{let t=!1;const e=new Request(_s.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),mE=64*1024,M2=bA&&_A(()=>qt.isReadableStream(new Response("").body)),f_={stream:M2&&(t=>t.body)};Z_&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!f_[e]&&(f_[e]=qt.isFunction(t[e])?n=>n[e]():(n,l)=>{throw new Jr(`Response type '${e}' is not supported`,Jr.ERR_NOT_SUPPORT,l)})})})(new Response);const IZ=async t=>{if(t==null)return 0;if(qt.isBlob(t))return t.size;if(qt.isSpecCompliantForm(t))return(await new Request(_s.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(qt.isArrayBufferView(t)||qt.isArrayBuffer(t))return t.byteLength;if(qt.isURLSearchParams(t)&&(t=t+""),qt.isString(t))return(await TZ(t)).byteLength},PZ=async(t,e)=>{const n=qt.toFiniteNumber(t.getContentLength());return n??IZ(e)},AZ=Z_&&(async t=>{let{url:e,method:n,data:l,signal:m,cancelToken:d,timeout:x,onDownloadProgress:s,onUploadProgress:T,responseType:E,headers:A,withCredentials:z="same-origin",fetchOptions:j}=vA(t);E=E?(E+"").toLowerCase():"text";let U=wZ([m,d&&d.toAbortSignal()],x),K;const oe=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let fe;try{if(T&&EZ&&n!=="get"&&n!=="head"&&(fe=await PZ(A,l))!==0){let ze=new Request(e,{method:"POST",body:l,duplex:"half"}),_t;if(qt.isFormData(l)&&(_t=ze.headers.get("content-type"))&&A.setContentType(_t),ze.body){const[Me,he]=dE(fe,p_(hE(T)));l=fE(ze.body,mE,Me,he)}}qt.isString(z)||(z=z?"include":"omit");const me="credentials"in Request.prototype;K=new Request(e,{...j,signal:U,method:n.toUpperCase(),headers:A.normalize().toJSON(),body:l,duplex:"half",credentials:me?z:void 0});let ne=await fetch(K,j);const te=M2&&(E==="stream"||E==="response");if(M2&&(s||te&&oe)){const ze={};["status","statusText","headers"].forEach(Ce=>{ze[Ce]=ne[Ce]});const _t=qt.toFiniteNumber(ne.headers.get("content-length")),[Me,he]=s&&dE(_t,p_(hE(s),!0))||[];ne=new Response(fE(ne.body,mE,Me,()=>{he&&he(),oe&&oe()}),ze)}E=E||"text";let re=await f_[qt.findKey(f_,E)||"text"](ne,t);return!te&&oe&&oe(),await new Promise((ze,_t)=>{gA(ze,_t,{data:re,headers:Zs.from(ne.headers),status:ne.status,statusText:ne.statusText,config:t,request:K})})}catch(me){throw oe&&oe(),me&&me.name==="TypeError"&&/Load failed|fetch/i.test(me.message)?Object.assign(new Jr("Network Error",Jr.ERR_NETWORK,t,K),{cause:me.cause||me}):Jr.from(me,me&&me.code,t,K)}}),D2={http:HK,xhr:xZ,fetch:AZ};qt.forEach(D2,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const gE=t=>`- ${t}`,RZ=t=>qt.isFunction(t)||t===null||t===!1,xA={getAdapter:t=>{t=qt.isArray(t)?t:[t];const{length:e}=t;let n,l;const m={};for(let d=0;d<e;d++){n=t[d];let x;if(l=n,!RZ(n)&&(l=D2[(x=String(n)).toLowerCase()],l===void 0))throw new Jr(`Unknown adapter '${x}'`);if(l)break;m[x||"#"+d]=l}if(!l){const d=Object.entries(m).map(([s,T])=>`adapter ${s} `+(T===!1?"is not supported by the environment":"is not available in the build"));let x=e?d.length>1?`since :
`+d.map(gE).join(`
`):" "+gE(d[0]):"as no adapter specified";throw new Jr("There is no suitable adapter to dispatch the request "+x,"ERR_NOT_SUPPORT")}return l},adapters:D2};function Mw(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Df(null,t)}function yE(t){return Mw(t),t.headers=Zs.from(t.headers),t.data=Rw.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xA.getAdapter(t.adapter||d0.adapter)(t).then(function(l){return Mw(t),l.data=Rw.call(t,t.transformResponse,l),l.headers=Zs.from(l.headers),l},function(l){return mA(l)||(Mw(t),l&&l.response&&(l.response.data=Rw.call(t,t.transformResponse,l.response),l.response.headers=Zs.from(l.response.headers))),Promise.reject(l)})}const wA="1.10.0",X_={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{X_[t]=function(l){return typeof l===t||"a"+(e<1?"n ":" ")+t}});const vE={};X_.transitional=function(e,n,l){function m(d,x){return"[Axios v"+wA+"] Transitional option '"+d+"'"+x+(l?". "+l:"")}return(d,x,s)=>{if(e===!1)throw new Jr(m(x," has been removed"+(n?" in "+n:"")),Jr.ERR_DEPRECATED);return n&&!vE[x]&&(vE[x]=!0,console.warn(m(x," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(d,x,s):!0}};X_.spelling=function(e){return(n,l)=>(console.warn(`${l} is likely a misspelling of ${e}`),!0)};function MZ(t,e,n){if(typeof t!="object")throw new Jr("options must be an object",Jr.ERR_BAD_OPTION_VALUE);const l=Object.keys(t);let m=l.length;for(;m-- >0;){const d=l[m],x=e[d];if(x){const s=t[d],T=s===void 0||x(s,d,t);if(T!==!0)throw new Jr("option "+d+" must be "+T,Jr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Jr("Unknown option "+d,Jr.ERR_BAD_OPTION)}}const zb={assertOptions:MZ,validators:X_},zl=zb.validators;let _h=class{constructor(e){this.defaults=e||{},this.interceptors={request:new cE,response:new cE}}async request(e,n){try{return await this._request(e,n)}catch(l){if(l instanceof Error){let m={};Error.captureStackTrace?Error.captureStackTrace(m):m=new Error;const d=m.stack?m.stack.replace(/^.+\n/,""):"";try{l.stack?d&&!String(l.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+d):l.stack=d}catch{}}throw l}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=kh(this.defaults,n);const{transitional:l,paramsSerializer:m,headers:d}=n;l!==void 0&&zb.assertOptions(l,{silentJSONParsing:zl.transitional(zl.boolean),forcedJSONParsing:zl.transitional(zl.boolean),clarifyTimeoutError:zl.transitional(zl.boolean)},!1),m!=null&&(qt.isFunction(m)?n.paramsSerializer={serialize:m}:zb.assertOptions(m,{encode:zl.function,serialize:zl.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),zb.assertOptions(n,{baseUrl:zl.spelling("baseURL"),withXsrfToken:zl.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let x=d&&qt.merge(d.common,d[n.method]);d&&qt.forEach(["delete","get","head","post","put","patch","common"],K=>{delete d[K]}),n.headers=Zs.concat(x,d);const s=[];let T=!0;this.interceptors.request.forEach(function(oe){typeof oe.runWhen=="function"&&oe.runWhen(n)===!1||(T=T&&oe.synchronous,s.unshift(oe.fulfilled,oe.rejected))});const E=[];this.interceptors.response.forEach(function(oe){E.push(oe.fulfilled,oe.rejected)});let A,z=0,j;if(!T){const K=[yE.bind(this),void 0];for(K.unshift.apply(K,s),K.push.apply(K,E),j=K.length,A=Promise.resolve(n);z<j;)A=A.then(K[z++],K[z++]);return A}j=s.length;let U=n;for(z=0;z<j;){const K=s[z++],oe=s[z++];try{U=K(U)}catch(fe){oe.call(this,fe);break}}try{A=yE.call(this,U)}catch(K){return Promise.reject(K)}for(z=0,j=E.length;z<j;)A=A.then(E[z++],E[z++]);return A}getUri(e){e=kh(this.defaults,e);const n=yA(e.baseURL,e.url,e.allowAbsoluteUrls);return hA(n,e.params,e.paramsSerializer)}};qt.forEach(["delete","get","head","options"],function(e){_h.prototype[e]=function(n,l){return this.request(kh(l||{},{method:e,url:n,data:(l||{}).data}))}});qt.forEach(["post","put","patch"],function(e){function n(l){return function(d,x,s){return this.request(kh(s||{},{method:e,headers:l?{"Content-Type":"multipart/form-data"}:{},url:d,data:x}))}}_h.prototype[e]=n(),_h.prototype[e+"Form"]=n(!0)});let DZ=class SA{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const l=this;this.promise.then(m=>{if(!l._listeners)return;let d=l._listeners.length;for(;d-- >0;)l._listeners[d](m);l._listeners=null}),this.promise.then=m=>{let d;const x=new Promise(s=>{l.subscribe(s),d=s}).then(m);return x.cancel=function(){l.unsubscribe(d)},x},e(function(d,x,s){l.reason||(l.reason=new Df(d,x,s),n(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=l=>{e.abort(l)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new SA(function(m){e=m}),cancel:e}}};function LZ(t){return function(n){return t.apply(null,n)}}function OZ(t){return qt.isObject(t)&&t.isAxiosError===!0}const L2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(L2).forEach(([t,e])=>{L2[e]=t});function CA(t){const e=new _h(t),n=eA(_h.prototype.request,e);return qt.extend(n,_h.prototype,e,{allOwnKeys:!0}),qt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(m){return CA(kh(t,m))},n}const Do=CA(d0);Do.Axios=_h;Do.CanceledError=Df;Do.CancelToken=DZ;Do.isCancel=mA;Do.VERSION=wA;Do.toFormData=K_;Do.AxiosError=Jr;Do.Cancel=Do.CanceledError;Do.all=function(e){return Promise.all(e)};Do.spread=LZ;Do.isAxiosError=OZ;Do.mergeConfig=kh;Do.AxiosHeaders=Zs;Do.formToJSON=t=>fA(qt.isHTMLForm(t)?new FormData(t):t);Do.getAdapter=xA.getAdapter;Do.HttpStatusCode=L2;Do.default=Do;const{Axios:bue,AxiosError:_ue,CanceledError:xue,isCancel:wue,CancelToken:Sue,VERSION:Cue,all:kue,Cancel:Tue,isAxiosError:Eue,spread:Iue,toFormData:Pue,AxiosHeaders:Aue,HttpStatusCode:Rue,formToJSON:Mue,getAdapter:Due,mergeConfig:Lue}=Do,Oi=Do.create({baseURL:"http://localhost:8888"});let wb=!1,Bb=[];const Dw=(t,e=null)=>{console.log("Processing queue:",{error:!!t,token:!!e,queueLength:Bb.length}),Bb.forEach(({resolve:n,reject:l})=>{t?l(t):n(e)}),Bb=[]};Oi.interceptors.request.use(t=>{var n;const{accessToken:e}=l0();return e.value&&!((n=t.url)!=null&&n.includes("/auth/token"))&&(t.headers.Authorization=`Bearer ${e.value}`,console.log("Added Authorization header for request:",t.url)),t},t=>(console.log("Request interceptor error:",t),Promise.reject(t)));Oi.interceptors.response.use(t=>(console.log("Response success:",{url:t.config.url,status:t.status}),t),async t=>{var d,x,s,T,E,A,z,j,U,K,oe;const e=t.config,{refreshToken:n,updateAccessToken:l,logoutWithoutRedirect:m}=l0();if(console.log("Response interceptor error:",{status:(d=t.response)==null?void 0:d.status,url:(x=t.config)==null?void 0:x.url,message:(T=(s=t.response)==null?void 0:s.data)==null?void 0:T.message,isRetry:e._retry,isRefreshing:wb}),((E=t.response)==null?void 0:E.status)===401&&!e._retry){if(console.log("Handling 401 error - access token expired"),wb)return console.log("Already refreshing, adding request to queue"),new Promise((fe,me)=>{Bb.push({resolve:fe,reject:me})}).then(fe=>(console.log("Request from queue resolved with token:",!!fe),e.headers.Authorization=`Bearer ${fe}`,Oi(e))).catch(fe=>(console.log("Request from queue rejected:",fe),Promise.reject(fe)));console.log("Starting token refresh process"),e._retry=!0,wb=!0;try{console.log("Calling refresh token API with stored refresh token:",!!n.value);const fe=await FZ(n.value);return console.log("Refresh token API response received:",{hasAccessToken:!!fe.accessToken}),l(fe.accessToken),console.log("Access token updated successfully"),Dw(null,fe.accessToken),e.headers.Authorization=`Bearer ${fe.accessToken}`,console.log("Retrying original request with new token"),Oi(e)}catch(fe){const me=fe;return console.log("Refresh token failed:",{error:fe,status:(A=me.response)==null?void 0:A.status,message:(j=(z=me.response)==null?void 0:z.data)==null?void 0:j.message}),console.log("Refresh token expired (400 error), logging out user and redirecting to login"),Dw(fe,null),m(),window.location.href="/login",Promise.reject(fe)}finally{console.log("Refresh process completed, setting isRefreshing to false"),wb=!1}}return((U=t.response)==null?void 0:U.status)===400&&((oe=(K=t.config)==null?void 0:K.url)!=null&&oe.includes("/api/auth/token"))?(Dw(t,null),m(),window.location.href="/login",Promise.reject(t)):(console.log("Error not handled by interceptors, rejecting:",t),Promise.reject(t))});const zZ=async t=>{try{const e=await Oi.post("/api/auth/register",t);return Promise.resolve(e.data)}catch(e){return Promise.reject(e)}},BZ=async t=>{try{const e=await Oi.post("/api/auth/login",t);return Promise.resolve(e.data)}catch(e){return Promise.reject(e)}},FZ=async t=>{try{console.log("Calling refresh token API");const e=await Oi.post("/api/auth/token",{refreshToken:t});return console.log("Refresh token API response:",{hasAccessToken:!!e.data.accessToken}),Promise.resolve(e.data)}catch(e){return console.log("Refresh token API error:",e),Promise.reject(e)}},$Z={class:"!mt-header max-w-primary mx-auto pt-12"},NZ={class:"grid"},VZ={class:"col !pr-12 pt-8"},jZ={class:"flex items-center justify-between my-4"},UZ={class:"flex items-center gap-2"},qZ={class:"flex items-center justify-center gap-4 mt-4"},HZ={class:"bg-gray-100 p-4 text-center rounded mt-4"},GZ=Xr({__name:"LoginPage",setup(t){const e=Ke(""),n=Ke(""),l=Ke(!1),m=Fc(),d=Xl(),{setAuth:x}=l0(),s=async()=>{try{const T=await BZ({username:e.value,password:n.value}),E={id:T.userProfile.userId,username:T.userProfile.username,email:T.userProfile.email,role:"user"};x({accessToken:T.accessToken,refreshToken:T.refreshToken},E),d.add({severity:"success",summary:"ng nhp thnh cng",detail:"Cho mng bn quay tr li!",life:3e3}),m.push({name:"home"})}catch{d.add({severity:"error",summary:"ng nhp tht bi",detail:"Tn ng nhp hoc mt khu khng ng. Vui lng th li!",life:5e3})}};return(T,E)=>{const A=wn("router-link");return X(),pe(an,null,[ge(c0,{title:"Login"}),ge(Ie(Mh)),M("div",$Z,[M("div",NZ,[M("div",VZ,[E[13]||(E[13]=M("h1",{class:"font-bold text-2xl mb-4 text-center"},"Log in to your account",-1)),ge(Ie(gf),{variant:"in",class:"mb-2 w-full"},{default:Xe(()=>[ge(Ie(vo),{id:"username",modelValue:e.value,"onUpdate:modelValue":E[0]||(E[0]=z=>e.value=z),variant:"filled",class:"w-full"},null,8,["modelValue"]),E[3]||(E[3]=M("label",{for:"username"},"Username",-1))]),_:1}),ge(Ie(gf),{variant:"in",class:"mb-2 w-full"},{default:Xe(()=>[ge(Ie(yf),{id:"password",modelValue:n.value,"onUpdate:modelValue":E[1]||(E[1]=z=>n.value=z),variant:"filled",class:"w-full",feedback:!1,toggleMask:""},null,8,["modelValue"]),E[4]||(E[4]=M("label",{for:"password"},"Password",-1))]),_:1}),M("div",jZ,[M("div",UZ,[ge(Ie(a0),{modelValue:l.value,"onUpdate:modelValue":E[2]||(E[2]=z=>l.value=z),inputId:"remember",name:"remember",value:"remember"},null,8,["modelValue"]),E[5]||(E[5]=M("label",{for:"remember",class:"text-sm"},"Remember me",-1))]),ge(A,{to:"/forgot-password",class:"text-primary text-sm underline"},{default:Xe(()=>E[6]||(E[6]=[tr(" Forgot password? ")])),_:1})]),ge(Ie(jr),{label:"Log in",icon:"pi pi-sign-in",class:"w-full",onClick:s}),ge(Ie(Rh),{align:"center"},{default:Xe(()=>E[7]||(E[7]=[M("b",null,"Or log in with",-1)])),_:1}),M("div",qZ,[ge(Ie(jr),{variant:"outlined",class:"!border-2"},{default:Xe(()=>E[8]||(E[8]=[M("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/1200px-Google_%22G%22_logo.svg.png",alt:"",class:"w-[24px] h-[24px]"},null,-1)])),_:1}),ge(Ie(jr),{variant:"outlined",class:"!border-2"},{default:Xe(()=>E[9]||(E[9]=[M("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Facebook_Logo_%282019%29.png/1200px-Facebook_Logo_%282019%29.png",alt:"",class:"w-[24px] h-[24px]"},null,-1)])),_:1}),ge(Ie(jr),{variant:"outlined",class:"!border-2"},{default:Xe(()=>E[10]||(E[10]=[M("img",{src:"https://www.iwarebatik.org/wp-content/uploads/2019/07/1200px-Apple_logo_black.svg.png",alt:"",class:"w-[24px] h-[24px]"},null,-1)])),_:1})]),M("p",HZ,[E[12]||(E[12]=tr(" Don't have an account? ")),ge(A,{to:"/signup",class:"text-primary font-bold underline"},{default:Xe(()=>E[11]||(E[11]=[tr("Sign up")])),_:1})])]),E[14]||(E[14]=M("div",{class:"col"},[M("img",{src:"https://frontends.udemycdn.com/components/auth/desktop-illustration-x1.webp",alt:""})],-1))])])],64)}}}),WZ={class:"flex gap-2"},KZ=["for"],ZZ={key:0,class:"absolute inset-0 w-full h-full bg-no-repeat bg-center",style:{"background-image":"url('data:image/svg+xml,%3csvg width=\\'100%25\\' height=\\'100%25\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3e%3cline x1=\\'0\\' y1=\\'0\\' x2=\\'100%25\\' y2=\\'100%25\\' stroke=\\'%23cccccc\\' stroke-width=\\'1\\' stroke-dasharray=\\'2 2\\'/%3e%3cline x1=\\'100%25\\' y1=\\'0\\' x2=\\'0\\' y2=\\'100%25\\' stroke=\\'%23cccccc\\' stroke-width=\\'1\\' stroke-dasharray=\\'2 2\\'/%3e%3c/svg%3e')"}},kA=Xr({__name:"SizePicker",props:{modelValue:{},sizeOptions:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,l=e,m=Ke(n.modelValue);ho(()=>n.modelValue,x=>{m.value=x});const d=()=>{l("update:modelValue",m.value)};return(x,s)=>(X(),pe("div",WZ,[(X(!0),pe(an,null,fr(x.sizeOptions,T=>(X(),pe("label",{key:T.id,for:"size_"+T.id,class:vn(["cursor-pointer",{"cursor-not-allowed":T.disabled}])},[ge(Ie(gs),{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=E=>m.value=E),name:"size",value:T.id,class:"hidden",inputId:"size_"+T.id,disabled:T.disabled,onChange:d},null,8,["modelValue","value","inputId","disabled"]),M("div",{class:vn(["relative rounded-lg w-[65px] h-[40px] overflow-hidden flex items-center justify-center border border-[#e6e6e680]",{"bg-black":m.value===T.id&&!T.disabled,"bg-gray-100":T.disabled}])},[M("span",{class:vn(["text-sm",{"text-gray-400":T.disabled,"text-white":m.value===T.id&&!T.disabled}])},Ue(T.label),3),T.disabled?(X(),pe("div",ZZ)):Ct("",!0)],2)],10,KZ))),128))]))}}),O2=async(t={})=>(await Oi.get("/api/products",{params:t})).data,XZ=async t=>(await Oi.get(`/api/products/${t}`)).data,YZ=async()=>{try{const t=await Oi.get("/api/products/me");return Promise.resolve(t.data)}catch(t){return Promise.reject(t)}},JZ=async t=>{try{return(await Oi.get(`/api/products/comments/${t}`)).data}catch(e){throw console.error("Error fetching product comments:",e),e}};async function QZ(t){const e=new FormData;return e.append("product",JSON.stringify({name:t.name,description:t.description,price:t.price,variants:t.variants})),t.images&&t.images.length>0&&t.images.forEach(n=>{n instanceof File&&e.append("files",n)}),Oi.post("/api/products",e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(n=>n.data)}const eX=async t=>{try{return(await Oi.post("/api/products/comments",t)).data}catch(e){throw console.error("Error creating product comment:",e),e}},tX={class:"grid p-4"},nX={class:"col-3"},rX={class:"m-0"},iX={class:"flex flex-col gap-4"},oX=["for"],sX={class:"m-0"},aX={class:"col-9"},lX=["href","onClick"],cX={class:"font-semibold"},uX=["href","target"],dX={class:""},hX={class:"my-4 flex justify-between items-center"},pX={class:"flex items-center gap-2"},fX={key:0,class:"flex justify-center items-center py-8"},mX={key:1,class:"grid"},gX=Xr({__name:"ProductListPage",setup(t){const e=Ke([]),n=Ke(!1),l=Ke({page:0,size:8,totalElements:0,totalPages:0}),m=async()=>{try{n.value=!0;const U={page:l.value.page,size:l.value.size},K=await O2(U);console.log("Products API Response:",K),e.value=K.products.map(oe=>({id:oe.id.toString(),name:oe.name,description:oe.description,price:oe.price,rating:oe.rating,status:oe.status||"",variants:oe.variants.map(fe=>{var me;return{sku:fe.sku||"",productId:((me=fe.productId)==null?void 0:me.toString())||"",size:fe.size,colorName:fe.colorName,colorHex:fe.colorHex,price:fe.price,stockQuantity:fe.stockQuantity}}),images:oe.images||[]})),l.value={page:K.page,size:K.size,totalElements:K.totalElements,totalPages:K.totalPages},console.log("Products Pagination state:",{page:K.page,size:K.size,totalElements:K.totalElements,totalPages:K.totalPages,first:K.page*K.size})}catch(U){console.error("Error loading products:",U)}finally{n.value=!1}},d=U=>{console.log("Product page change event:",U),l.value.page=U.page,l.value.size=U.rows,m()},x=Ke([{label:"Trang ch",route:"/"},{label:" nam",route:"/products"},{label:"o nam",route:"/inputtext"}]),s=Ke({name:"Bn chy"}),T=Ke([{name:"Bn chy"},{name:"Mi nht"},{name:"Gi thp n cao"},{name:"Gi cao n thp"},{name:"% Gim gi nhiu"}]),E=Ke("Production"),A=Ke([{name:"i tic",key:"A"},{name:"Mc hng ngy",key:"M"},{name:"Cng s",key:"P"},{name:"Th thao",key:"R"}]),z=Ke(1),j=Ke([{id:1,label:"S"},{id:2,label:"M"},{id:3,label:"L"},{id:4,label:"XL"},{id:5,label:"XXL"}]);return Co(()=>{m()}),(U,K)=>{const oe=wn("router-link");return X(),pe("div",tX,[M("div",nX,[ge(Ie(XP),{value:"0"},{default:Xe(()=>[ge(Ie(Jg),{value:"0"},{default:Xe(()=>[ge(Ie(Yg),null,{default:Xe(()=>K[3]||(K[3]=[tr("Ph hp vi")])),_:1}),ge(Ie(Xg),null,{default:Xe(()=>[M("div",rX,[M("div",iX,[(X(!0),pe(an,null,fr(A.value,fe=>(X(),pe("div",{key:fe.key,class:"flex items-center gap-2"},[ge(Ie(gs),{modelValue:E.value,"onUpdate:modelValue":K[0]||(K[0]=me=>E.value=me),inputId:fe.key,name:"dynamic",value:fe.name},null,8,["modelValue","inputId","value"]),M("label",{for:fe.key},Ue(fe.name),9,oX)]))),128))])])]),_:1})]),_:1}),ge(Ie(Jg),{value:"1"},{default:Xe(()=>[ge(Ie(Yg),null,{default:Xe(()=>K[4]||(K[4]=[tr("Kch c")])),_:1}),ge(Ie(Xg),null,{default:Xe(()=>[M("p",sX,[ge(kA,{modelValue:z.value,"onUpdate:modelValue":K[1]||(K[1]=fe=>z.value=fe),sizeOptions:j.value},null,8,["modelValue","sizeOptions"])])]),_:1})]),_:1}),ge(Ie(Jg),{value:"2"},{default:Xe(()=>[ge(Ie(Yg),null,{default:Xe(()=>K[5]||(K[5]=[tr("Mu sc")])),_:1}),ge(Ie(Xg),null,{default:Xe(()=>K[6]||(K[6]=[M("div",{class:"m-0 grid"},[M("div",{class:"flex flex-col col-3 cursor-pointer justify-center items-center"},[M("span",{class:"!w-8 h-8 rounded-full bg-black"}),M("span",null,"en")]),M("div",{class:"flex flex-col col-3 cursor-pointer justify-center items-center"},[M("span",{class:"!w-8 h-8 rounded-full bg-gray-500"}),M("span",null,"Xm")]),M("div",{class:"flex flex-col col-3 justify-center items-center"},[M("div",{class:"!w-8 h-8 rounded-full bg-green-500"}),M("span",null,"Xanh l")]),M("div",{class:"flex flex-col col-3 cursor-pointer justify-center items-center"},[M("span",{class:"!w-8 h-8 rounded-full bg-yellow-500"}),M("span",null,"Vng")])],-1)])),_:1})]),_:1})]),_:1})]),M("div",aX,[ge(Ie(kS),{model:x.value,class:"p-0"},{item:Xe(({item:fe,props:me})=>[fe.route?(X(),bt(oe,{key:0,to:fe.route,custom:""},{default:Xe(({href:ne,navigate:te})=>[M("a",ie({href:ne},me.action,{onClick:te}),[M("span",cX,Ue(fe.label),1)],16,lX)]),_:2},1032,["to"])):(X(),pe("a",ie({key:1,href:fe.url,target:fe.target},me.action),[M("span",dX,Ue(fe.label),1)],16,uX))]),separator:Xe(()=>K[7]||(K[7]=[tr(" / ")])),_:1},8,["model"]),K[10]||(K[10]=da('<p class="uppercase text-xl font-bold my-4" data-v-7b69defe>o s mi nam</p><div class="my-4 flex gap-4" data-v-7b69defe><div class="flex gap-2 flex-col cursor-pointer" data-v-7b69defe><img src="https://media3.coolmate.me/cdn-cgi/image/width=672,height=990,quality=80,format=auto/uploads/March2025/quan-jeans-nam.png" alt="" class="w-32 rounded-lg" data-v-7b69defe><span class="font-bold" data-v-7b69defe>Qun Jean</span></div><div class="flex gap-2 flex-col cursor-pointer" data-v-7b69defe><img src="https://media3.coolmate.me/cdn-cgi/image/width=672,height=990,quality=80,format=auto/uploads/March2025/quan-jogger-nam.jpg" alt="" class="w-32 rounded-lg" data-v-7b69defe><span class="font-bold" data-v-7b69defe>Qun Jean</span></div><div class="flex gap-2 flex-col cursor-pointer" data-v-7b69defe><img src="https://media3.coolmate.me/cdn-cgi/image/width=672,height=990,quality=80,format=auto/uploads/March2025/quan-kaki-nam.jpg" alt="" class="w-32 rounded-lg" data-v-7b69defe><span class="font-bold" data-v-7b69defe>Qun Jean</span></div></div>',2)),ge(Ie(Rh),{align:"center"}),M("div",hX,[M("p",null,Ue(l.value.totalElements)+" kt qu",1),M("div",pX,[K[8]||(K[8]=M("p",{class:"flex-1"},"Sp xp theo",-1)),ge(Ie(xs),{modelValue:s.value,"onUpdate:modelValue":K[2]||(K[2]=fe=>s.value=fe),options:T.value,optionLabel:"name",placeholder:"Select a City",pt:{root:{class:"!w-48 !rounded-full "}}},null,8,["modelValue","options"])])]),n.value?(X(),pe("div",fX,K[9]||(K[9]=[M("div",{class:"loading-spinner"},null,-1),M("span",{class:"ml-2"},"ang ti sn phm...",-1)]))):(X(),pe("div",mX,[(X(!0),pe(an,null,fr(e.value,fe=>(X(),pe("div",{class:"col-3",key:fe.id},[ge(Qa,{product:fe},null,8,["product"])]))),128))])),l.value.totalElements>0?(X(),bt(Ie(U_),{key:2,rows:l.value.size,totalRecords:l.value.totalElements,first:l.value.page*l.value.size,onPage:d,lazy:!0,rowsPerPageOptions:[4,8,12,16],class:"mt-6"},null,8,["rows","totalRecords","first"])):Ct("",!0)])])}}}),yX=Lo(gX,[["__scopeId","data-v-7b69defe"]]),vX={class:"!mt-header max-w-primary mx-auto pt-12"},bX={class:"grid"},_X={class:"col !pr-12 pt-8"},xX={class:"mb-2 w-full flex items-center gap-2"},wX={class:"flex items-center justify-center gap-4 mt-4"},SX={class:"bg-gray-100 p-4 text-center rounded"},CX=Xr({__name:"SignUpPage",setup(t){const e=Ke(""),n=Ke(""),l=Ke("");Ke(!1);const m=Ke(!1),d=Fc(),x=Xl(),s=async()=>{try{await zZ({username:e.value,email:n.value,password:l.value,isVendor:m.value}),x.add({severity:"success",summary:"ng k thnh cng",detail:"Ti khon ca bn  c to thnh cng!",life:3e3}),d.push("/home")}catch{x.add({severity:"error",summary:"ng k tht bi",detail:"C li xy ra khi ng k. Vui lng th li!",life:5e3})}};return(T,E)=>{const A=wn("router-link");return X(),pe(an,null,[ge(c0,{title:"Product List"}),ge(Ie(Mh)),M("div",vX,[M("div",bX,[M("div",_X,[E[14]||(E[14]=M("h1",{class:"font-bold text-2xl mb-4 text-center"},"Sign up with email",-1)),ge(Ie(gf),{variant:"in",class:"mb-2 w-full"},{default:Xe(()=>[ge(Ie(vo),{id:"username",modelValue:e.value,"onUpdate:modelValue":E[0]||(E[0]=z=>e.value=z),variant:"filled",class:"w-full"},null,8,["modelValue"]),E[4]||(E[4]=M("label",{for:"username"},"Username",-1))]),_:1}),ge(Ie(gf),{variant:"in",class:"mb-2 w-full"},{default:Xe(()=>[ge(Ie(vo),{id:"email",modelValue:n.value,"onUpdate:modelValue":E[1]||(E[1]=z=>n.value=z),variant:"filled",class:"w-full",type:"email"},null,8,["modelValue"]),E[5]||(E[5]=M("label",{for:"email"},"Email",-1))]),_:1}),ge(Ie(gf),{variant:"in",class:"mb-2 w-full"},{default:Xe(()=>[ge(Ie(yf),{id:"password",modelValue:l.value,"onUpdate:modelValue":E[2]||(E[2]=z=>l.value=z),variant:"filled",class:"w-full",feedback:!1,toggleMask:""},null,8,["modelValue"]),E[6]||(E[6]=M("label",{for:"password"},"Password",-1))]),_:1}),M("div",xX,[ge(Ie(a0),{modelValue:m.value,"onUpdate:modelValue":E[3]||(E[3]=z=>m.value=z),inputId:"isVendor",binary:!0},null,8,["modelValue"]),E[7]||(E[7]=M("label",{for:"isVendor"},"ng k lm ngi bn",-1))]),ge(Ie(jr),{label:"Continue with email",icon:"pi pi-envelope",class:"w-full",onClick:s}),ge(Ie(Rh),{align:"center"},{default:Xe(()=>E[8]||(E[8]=[M("b",null,"Other sign up options",-1)])),_:1}),M("div",wX,[ge(Ie(jr),{variant:"outlined",class:"!border-2"},{default:Xe(()=>E[9]||(E[9]=[M("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/1200px-Google_%22G%22_logo.svg.png",alt:"",class:"w-[24px] h-[24px]"},null,-1)])),_:1}),ge(Ie(jr),{variant:"outlined",class:"!border-2"},{default:Xe(()=>E[10]||(E[10]=[M("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Facebook_Logo_%282019%29.png/1200px-Facebook_Logo_%282019%29.png",alt:"",class:"w-[24px] h-[24px]"},null,-1)])),_:1}),ge(Ie(jr),{variant:"outlined",class:"!border-2"},{default:Xe(()=>E[11]||(E[11]=[M("img",{src:"https://www.iwarebatik.org/wp-content/uploads/2019/07/1200px-Apple_logo_black.svg.png",alt:"",class:"w-[24px] h-[24px]"},null,-1)])),_:1})]),E[15]||(E[15]=M("p",{class:"text-center text-xs my-4"},[tr(" By signing up, you agree to our "),M("a",{href:"/",class:"text-primary underline"},"Terms of Use"),tr(" and "),M("a",{href:"/",class:"text-primary underline"},"Privacy Policy")],-1)),M("p",SX,[E[13]||(E[13]=tr(" Already have an account? ")),ge(A,{to:"/login",class:"text-primary font-bold underline"},{default:Xe(()=>E[12]||(E[12]=[tr("Log in")])),_:1})])]),E[16]||(E[16]=M("div",{class:"col"},[M("img",{src:"https://frontends.udemycdn.com/components/auth/desktop-illustration-x1.webp",alt:""})],-1))])])],64)}}});var kX=function(e){var n=e.dt;return`
/*!
* Quill Editor v1.3.3
* https://quilljs.com/
* Copyright (c) 2014, Jason Chen
* Copyright (c) 2013, salesforce.com
*/
.ql-container {
    box-sizing: border-box;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 13px;
    height: 100%;
    margin: 0;
    position: relative;
}
.ql-container.ql-disabled .ql-tooltip {
    visibility: hidden;
}
.ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {
    pointer-events: none;
}
.ql-clipboard {
    inset-inline-start: -100000px;
    height: 1px;
    overflow-y: hidden;
    position: absolute;
    top: 50%;
}
.ql-clipboard p {
    margin: 0;
    padding: 0;
}
.ql-editor {
    box-sizing: border-box;
    line-height: 1.42;
    height: 100%;
    outline: none;
    overflow-y: auto;
    padding: 12px 15px;
    tab-size: 4;
    -moz-tab-size: 4;
    text-align: left;
    white-space: pre-wrap;
    word-wrap: break-word;
}
.ql-editor > * {
    cursor: text;
}
.ql-editor p,
.ql-editor ol,
.ql-editor ul,
.ql-editor pre,
.ql-editor blockquote,
.ql-editor h1,
.ql-editor h2,
.ql-editor h3,
.ql-editor h4,
.ql-editor h5,
.ql-editor h6 {
    margin: 0;
    padding: 0;
    counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
}
.ql-editor ol,
.ql-editor ul {
    padding-inline-start: 1.5rem;
}
.ql-editor ol > li,
.ql-editor ul > li {
    list-style-type: none;
}
.ql-editor ul > li::before {
    content: '\\2022';
}
.ql-editor ul[data-checked='true'],
.ql-editor ul[data-checked='false'] {
    pointer-events: none;
}
.ql-editor ul[data-checked='true'] > li *,
.ql-editor ul[data-checked='false'] > li * {
    pointer-events: all;
}
.ql-editor ul[data-checked='true'] > li::before,
.ql-editor ul[data-checked='false'] > li::before {
    color: #777;
    cursor: pointer;
    pointer-events: all;
}
.ql-editor ul[data-checked='true'] > li::before {
    content: '\\2611';
}
.ql-editor ul[data-checked='false'] > li::before {
    content: '\\2610';
}
.ql-editor li::before {
    display: inline-block;
    white-space: nowrap;
    width: 1.2rem;
}
.ql-editor li:not(.ql-direction-rtl)::before {
    margin-inline-start: -1.5rem;
    margin-inline-end: 0.3rem;
    text-align: right;
}
.ql-editor li.ql-direction-rtl::before {
    margin-inline-start: 0.3rem;
    margin-inline-end: -1.5rem;
}
.ql-editor ol li:not(.ql-direction-rtl),
.ql-editor ul li:not(.ql-direction-rtl) {
    padding-inline-start: 1.5rem;
}
.ql-editor ol li.ql-direction-rtl,
.ql-editor ul li.ql-direction-rtl {
    padding-inline-end: 1.5rem;
}
.ql-editor ol li {
    counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
    counter-increment: list-0;
}
.ql-editor ol li:before {
    content: counter(list-0, decimal) '. ';
}
.ql-editor ol li.ql-indent-1 {
    counter-increment: list-1;
}
.ql-editor ol li.ql-indent-1:before {
    content: counter(list-1, lower-alpha) '. ';
}
.ql-editor ol li.ql-indent-1 {
    counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
}
.ql-editor ol li.ql-indent-2 {
    counter-increment: list-2;
}
.ql-editor ol li.ql-indent-2:before {
    content: counter(list-2, lower-roman) '. ';
}
.ql-editor ol li.ql-indent-2 {
    counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;
}
.ql-editor ol li.ql-indent-3 {
    counter-increment: list-3;
}
.ql-editor ol li.ql-indent-3:before {
    content: counter(list-3, decimal) '. ';
}
.ql-editor ol li.ql-indent-3 {
    counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;
}
.ql-editor ol li.ql-indent-4 {
    counter-increment: list-4;
}
.ql-editor ol li.ql-indent-4:before {
    content: counter(list-4, lower-alpha) '. ';
}
.ql-editor ol li.ql-indent-4 {
    counter-reset: list-5 list-6 list-7 list-8 list-9;
}
.ql-editor ol li.ql-indent-5 {
    counter-increment: list-5;
}
.ql-editor ol li.ql-indent-5:before {
    content: counter(list-5, lower-roman) '. ';
}
.ql-editor ol li.ql-indent-5 {
    counter-reset: list-6 list-7 list-8 list-9;
}
.ql-editor ol li.ql-indent-6 {
    counter-increment: list-6;
}
.ql-editor ol li.ql-indent-6:before {
    content: counter(list-6, decimal) '. ';
}
.ql-editor ol li.ql-indent-6 {
    counter-reset: list-7 list-8 list-9;
}
.ql-editor ol li.ql-indent-7 {
    counter-increment: list-7;
}
.ql-editor ol li.ql-indent-7:before {
    content: counter(list-7, lower-alpha) '. ';
}
.ql-editor ol li.ql-indent-7 {
    counter-reset: list-8 list-9;
}
.ql-editor ol li.ql-indent-8 {
    counter-increment: list-8;
}
.ql-editor ol li.ql-indent-8:before {
    content: counter(list-8, lower-roman) '. ';
}
.ql-editor ol li.ql-indent-8 {
    counter-reset: list-9;
}
.ql-editor ol li.ql-indent-9 {
    counter-increment: list-9;
}
.ql-editor ol li.ql-indent-9:before {
    content: counter(list-9, decimal) '. ';
}
.ql-editor .ql-video {
    display: block;
    max-width: 100%;
}
.ql-editor .ql-video.ql-align-center {
    margin: 0 auto;
}
.ql-editor .ql-video.ql-align-right {
    margin: 0 0 0 auto;
}
.ql-editor .ql-bg-black {
    background: #000;
}
.ql-editor .ql-bg-red {
    background: #e60000;
}
.ql-editor .ql-bg-orange {
    background: #f90;
}
.ql-editor .ql-bg-yellow {
    background: #ff0;
}
.ql-editor .ql-bg-green {
    background: #008a00;
}
.ql-editor .ql-bg-blue {
    background: #06c;
}
.ql-editor .ql-bg-purple {
    background: #93f;
}
.ql-editor .ql-color-white {
    color: #fff;
}
.ql-editor .ql-color-red {
    color: #e60000;
}
.ql-editor .ql-color-orange {
    color: #f90;
}
.ql-editor .ql-color-yellow {
    color: #ff0;
}
.ql-editor .ql-color-green {
    color: #008a00;
}
.ql-editor .ql-color-blue {
    color: #06c;
}
.ql-editor .ql-color-purple {
    color: #93f;
}
.ql-editor .ql-font-serif {
    font-family: Georgia, Times New Roman, serif;
}
.ql-editor .ql-font-monospace {
    font-family: Monaco, Courier New, monospace;
}
.ql-editor .ql-size-small {
    font-size: 0.75rem;
}
.ql-editor .ql-size-large {
    font-size: 1.5rem;
}
.ql-editor .ql-size-huge {
    font-size: 2.5rem;
}
.ql-editor .ql-direction-rtl {
    direction: rtl;
    text-align: inherit;
}
.ql-editor .ql-align-center {
    text-align: center;
}
.ql-editor .ql-align-justify {
    text-align: justify;
}
.ql-editor .ql-align-right {
    text-align: right;
}
.ql-editor.ql-blank::before {
    color: rgba(0, 0, 0, 0.6);
    content: attr(data-placeholder);
    font-style: italic;
    inset-inline-start: 15px;
    pointer-events: none;
    position: absolute;
    inset-inline-end: 15px;
}
.ql-snow.ql-toolbar:after,
.ql-snow .ql-toolbar:after {
    clear: both;
    content: '';
    display: table;
}
.ql-snow.ql-toolbar button,
.ql-snow .ql-toolbar button {
    background: none;
    border: none;
    cursor: pointer;
    display: inline-block;
    float: left;
    height: 24px;
    padding-block: 3px;
    padding-inline: 5px;
    width: 28px;
}
.ql-snow.ql-toolbar button svg,
.ql-snow .ql-toolbar button svg {
    float: left;
    height: 100%;
}
.ql-snow.ql-toolbar button:active:hover,
.ql-snow .ql-toolbar button:active:hover {
    outline: none;
}
.ql-snow.ql-toolbar input.ql-image[type='file'],
.ql-snow .ql-toolbar input.ql-image[type='file'] {
    display: none;
}
.ql-snow.ql-toolbar button:hover,
.ql-snow .ql-toolbar button:hover,
.ql-snow.ql-toolbar button:focus,
.ql-snow .ql-toolbar button:focus,
.ql-snow.ql-toolbar button.ql-active,
.ql-snow .ql-toolbar button.ql-active,
.ql-snow.ql-toolbar .ql-picker-label:hover,
.ql-snow .ql-toolbar .ql-picker-label:hover,
.ql-snow.ql-toolbar .ql-picker-label.ql-active,
.ql-snow .ql-toolbar .ql-picker-label.ql-active,
.ql-snow.ql-toolbar .ql-picker-item:hover,
.ql-snow .ql-toolbar .ql-picker-item:hover,
.ql-snow.ql-toolbar .ql-picker-item.ql-selected,
.ql-snow .ql-toolbar .ql-picker-item.ql-selected {
    color: #06c;
}
.ql-snow.ql-toolbar button:hover .ql-fill,
.ql-snow .ql-toolbar button:hover .ql-fill,
.ql-snow.ql-toolbar button:focus .ql-fill,
.ql-snow .ql-toolbar button:focus .ql-fill,
.ql-snow.ql-toolbar button.ql-active .ql-fill,
.ql-snow .ql-toolbar button.ql-active .ql-fill,
.ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,
.ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,
.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,
.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,
.ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,
.ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,
.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,
.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,
.ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,
.ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,
.ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,
.ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,
.ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,
.ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,
.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,
.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {
    fill: #06c;
}
.ql-snow.ql-toolbar button:hover .ql-stroke,
.ql-snow .ql-toolbar button:hover .ql-stroke,
.ql-snow.ql-toolbar button:focus .ql-stroke,
.ql-snow .ql-toolbar button:focus .ql-stroke,
.ql-snow.ql-toolbar button.ql-active .ql-stroke,
.ql-snow .ql-toolbar button.ql-active .ql-stroke,
.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,
.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,
.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,
.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,
.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,
.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,
.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
.ql-snow.ql-toolbar button:hover .ql-stroke-miter,
.ql-snow .ql-toolbar button:hover .ql-stroke-miter,
.ql-snow.ql-toolbar button:focus .ql-stroke-miter,
.ql-snow .ql-toolbar button:focus .ql-stroke-miter,
.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,
.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,
.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,
.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {
    stroke: #06c;
}
@media (pointer: coarse) {
    .ql-snow.ql-toolbar button:hover:not(.ql-active),
    .ql-snow .ql-toolbar button:hover:not(.ql-active) {
        color: #444;
    }
    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,
    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill {
        fill: #444;
    }
    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,
    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter {
        stroke: #444;
    }
}
.ql-snow {
    box-sizing: border-box;
}
.ql-snow * {
    box-sizing: border-box;
}
.ql-snow .ql-hidden {
    display: none;
}
.ql-snow .ql-out-bottom,
.ql-snow .ql-out-top {
    visibility: hidden;
}
.ql-snow .ql-tooltip {
    position: absolute;
    transform: translateY(10px);
}
.ql-snow .ql-tooltip a {
    cursor: pointer;
    text-decoration: none;
}
.ql-snow .ql-tooltip.ql-flip {
    transform: translateY(-10px);
}
.ql-snow .ql-formats {
    display: inline-block;
    vertical-align: middle;
}
.ql-snow .ql-formats:after {
    clear: both;
    content: '';
    display: table;
}
.ql-snow .ql-stroke {
    fill: none;
    stroke: #444;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-width: 2;
}
.ql-snow .ql-stroke-miter {
    fill: none;
    stroke: #444;
    stroke-miterlimit: 10;
    stroke-width: 2;
}
.ql-snow .ql-fill,
.ql-snow .ql-stroke.ql-fill {
    fill: #444;
}
.ql-snow .ql-empty {
    fill: none;
}
.ql-snow .ql-even {
    fill-rule: evenodd;
}
.ql-snow .ql-thin,
.ql-snow .ql-stroke.ql-thin {
    stroke-width: 1;
}
.ql-snow .ql-transparent {
    opacity: 0.4;
}
.ql-snow .ql-direction svg:last-child {
    display: none;
}
.ql-snow .ql-direction.ql-active svg:last-child {
    display: inline;
}
.ql-snow .ql-direction.ql-active svg:first-child {
    display: none;
}
.ql-snow .ql-editor h1 {
    font-size: 2rem;
}
.ql-snow .ql-editor h2 {
    font-size: 1.5rem;
}
.ql-snow .ql-editor h3 {
    font-size: 1.17rem;
}
.ql-snow .ql-editor h4 {
    font-size: 1rem;
}
.ql-snow .ql-editor h5 {
    font-size: 0.83rem;
}
.ql-snow .ql-editor h6 {
    font-size: 0.67rem;
}
.ql-snow .ql-editor a {
    text-decoration: underline;
}
.ql-snow .ql-editor blockquote {
    border-inline-start: 4px solid #ccc;
    margin-block-end: 5px;
    margin-block-start: 5px;
    padding-inline-start: 16px;
}
.ql-snow .ql-editor code,
.ql-snow .ql-editor pre {
    background: #f0f0f0;
    border-radius: 3px;
}
.ql-snow .ql-editor pre {
    white-space: pre-wrap;
    margin-block-end: 5px;
    margin-block-start: 5px;
    padding: 5px 10px;
}
.ql-snow .ql-editor code {
    font-size: 85%;
    padding: 2px 4px;
}
.ql-snow .ql-editor pre.ql-syntax {
    background: #23241f;
    color: #f8f8f2;
    overflow: visible;
}
.ql-snow .ql-editor img {
    max-width: 100%;
}
.ql-snow .ql-picker {
    color: #444;
    display: inline-block;
    float: left;
    inset-inline-start: 0;
    font-size: 14px;
    font-weight: 500;
    height: 24px;
    position: relative;
    vertical-align: middle;
}
.ql-snow .ql-picker-label {
    cursor: pointer;
    display: inline-block;
    height: 100%;
    padding-inline-start: 8px;
    padding-inline-end: 2px;
    position: relative;
    width: 100%;
}
.ql-snow .ql-picker-label::before {
    display: inline-block;
    line-height: 22px;
}
.ql-snow .ql-picker-options {
    background: #fff;
    display: none;
    min-width: 100%;
    padding: 4px 8px;
    position: absolute;
    white-space: nowrap;
}
.ql-snow .ql-picker-options .ql-picker-item {
    cursor: pointer;
    display: block;
    padding-block-end: 5px;
    padding-block-start: 5px;
}
.ql-snow .ql-picker.ql-expanded .ql-picker-label {
    color: #ccc;
    z-index: 2;
}
.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill {
    fill: #ccc;
}
.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke {
    stroke: #ccc;
}
.ql-snow .ql-picker.ql-expanded .ql-picker-options {
    display: block;
    margin-block-start: -1px;
    top: 100%;
    z-index: 1;
}
.ql-snow .ql-color-picker,
.ql-snow .ql-icon-picker {
    width: 28px;
}
.ql-snow .ql-color-picker .ql-picker-label,
.ql-snow .ql-icon-picker .ql-picker-label {
    padding: 2px 4px;
}
.ql-snow .ql-color-picker .ql-picker-label svg,
.ql-snow .ql-icon-picker .ql-picker-label svg {
    inset-inline-end: 4px;
}
.ql-snow .ql-icon-picker .ql-picker-options {
    padding: 4px 0;
}
.ql-snow .ql-icon-picker .ql-picker-item {
    height: 24px;
    width: 24px;
    padding: 2px 4px;
}
.ql-snow .ql-color-picker .ql-picker-options {
    padding: 3px 5px;
    width: 152px;
}
.ql-snow .ql-color-picker .ql-picker-item {
    border: 1px solid transparent;
    float: left;
    height: 16px;
    margin: 2px;
    padding: 0;
    width: 16px;
}
.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg {
    position: absolute;
    margin-block-start: -9px;
    inset-inline-end: 0;
    top: 50%;
    width: 18px;
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,
.ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,
.ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,
.ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,
.ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before {
    content: attr(data-label);
}
.ql-snow .ql-picker.ql-header {
    width: 98px;
}
.ql-snow .ql-picker.ql-header .ql-picker-label::before,
.ql-snow .ql-picker.ql-header .ql-picker-item::before {
    content: 'Normal';
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='1']::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {
    content: 'Heading 1';
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='2']::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {
    content: 'Heading 2';
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='3']::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {
    content: 'Heading 3';
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='4']::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {
    content: 'Heading 4';
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='5']::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {
    content: 'Heading 5';
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='6']::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {
    content: 'Heading 6';
}
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {
    font-size: 2rem;
}
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {
    font-size: 1.5rem;
}
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {
    font-size: 1.17rem;
}
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {
    font-size: 1rem;
}
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {
    font-size: 0.83rem;
}
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {
    font-size: 0.67rem;
}
.ql-snow .ql-picker.ql-font {
    width: 108px;
}
.ql-snow .ql-picker.ql-font .ql-picker-label::before,
.ql-snow .ql-picker.ql-font .ql-picker-item::before {
    content: 'Sans Serif';
}
.ql-snow .ql-picker.ql-font .ql-picker-label[data-value='serif']::before,
.ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {
    content: 'Serif';
}
.ql-snow .ql-picker.ql-font .ql-picker-label[data-value='monospace']::before,
.ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {
    content: 'Monospace';
}
.ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {
    font-family: Georgia, Times New Roman, serif;
}
.ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {
    font-family: Monaco, Courier New, monospace;
}
.ql-snow .ql-picker.ql-size {
    width: 98px;
}
.ql-snow .ql-picker.ql-size .ql-picker-label::before,
.ql-snow .ql-picker.ql-size .ql-picker-item::before {
    content: 'Normal';
}
.ql-snow .ql-picker.ql-size .ql-picker-label[data-value='small']::before,
.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {
    content: 'Small';
}
.ql-snow .ql-picker.ql-size .ql-picker-label[data-value='large']::before,
.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {
    content: 'Large';
}
.ql-snow .ql-picker.ql-size .ql-picker-label[data-value='huge']::before,
.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {
    content: 'Huge';
}
.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {
    font-size: 10px;
}
.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {
    font-size: 18px;
}
.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {
    font-size: 32px;
}
.ql-snow .ql-color-picker.ql-background .ql-picker-item {
    background: #fff;
}
.ql-snow .ql-color-picker.ql-color .ql-picker-item {
    background: #000;
}
.ql-toolbar.ql-snow {
    border: 1px solid #ccc;
    box-sizing: border-box;
    font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
    padding: 8px;
}
.ql-toolbar.ql-snow .ql-formats {
    margin-inline-end: 15px;
}
.ql-toolbar.ql-snow .ql-picker-label {
    border: 1px solid transparent;
}
.ql-toolbar.ql-snow .ql-picker-options {
    border: 1px solid transparent;
    box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;
}
.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {
    border-color: #ccc;
}
.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {
    border-color: #ccc;
}
.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,
.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover {
    border-color: #000;
}
.ql-toolbar.ql-snow + .ql-container.ql-snow {
    border-block-start: 0;
}
.ql-snow .ql-tooltip {
    background: #fff;
    border: 1px solid #ccc;
    box-shadow: 0 0 5px #ddd;
    color: #444;
    padding: 5px 12px;
    white-space: nowrap;
}
.ql-snow .ql-tooltip::before {
    content: 'Visit URL:';
    line-height: 26px;
    margin-inline-end: 8px;
}
.ql-snow .ql-tooltip input[type='text'] {
    display: none;
    border: 1px solid #ccc;
    font-size: 13px;
    height: 26px;
    margin: 0;
    padding: 3px 5px;
    width: 170px;
}
.ql-snow .ql-tooltip a.ql-preview {
    display: inline-block;
    max-width: 200px;
    overflow-x: hidden;
    text-overflow: ellipsis;
    vertical-align: top;
}
.ql-snow .ql-tooltip a.ql-action::after {
    border-inline-end: 1px solid #ccc;
    content: 'Edit';
    margin-inline-start: 16px;
    padding-inline-end: 8px;
}
.ql-snow .ql-tooltip a.ql-remove::before {
    content: 'Remove';
    margin-inline-start: 8px;
}
.ql-snow .ql-tooltip a {
    line-height: 26px;
}
.ql-snow .ql-tooltip.ql-editing a.ql-preview,
.ql-snow .ql-tooltip.ql-editing a.ql-remove {
    display: none;
}
.ql-snow .ql-tooltip.ql-editing input[type='text'] {
    display: inline-block;
}
.ql-snow .ql-tooltip.ql-editing a.ql-action::after {
    border-inline-end: 0;
    content: 'Save';
    padding-inline-end: 0;
}
.ql-snow .ql-tooltip[data-mode='link']::before {
    content: 'Enter link:';
}
.ql-snow .ql-tooltip[data-mode='formula']::before {
    content: 'Enter formula:';
}
.ql-snow .ql-tooltip[data-mode='video']::before {
    content: 'Enter video:';
}
.ql-snow a {
    color: #06c;
}
.ql-container.ql-snow {
    border: 1px solid #ccc;
}

.p-editor .p-editor-toolbar {
    background: `.concat(n("editor.toolbar.background"),`;
    border-start-end-radius: `).concat(n("editor.toolbar.border.radius"),`;
    border-start-start-radius: `).concat(n("editor.toolbar.border.radius"),`;
}

.p-editor .p-editor-toolbar.ql-snow {
    border: 1px solid `).concat(n("editor.toolbar.border.color"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-stroke {
    stroke: `).concat(n("editor.toolbar.item.color"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-fill {
    fill: `).concat(n("editor.toolbar.item.color"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-picker .ql-picker-label {
    border: 0 none;
    color: `).concat(n("editor.toolbar.item.color"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-picker .ql-picker-label:hover {
    color: `).concat(n("editor.toolbar.item.hover.color"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-picker .ql-picker-label:hover .ql-stroke {
    stroke: `).concat(n("editor.toolbar.item.hover.color"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-picker .ql-picker-label:hover .ql-fill {
    fill: `).concat(n("editor.toolbar.item.hover.color"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {
    color: `).concat(n("editor.toolbar.item.active.color"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke {
    stroke: `).concat(n("editor.toolbar.item.active.color"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill {
    fill: `).concat(n("editor.toolbar.item.active.color"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {
    background: `).concat(n("editor.overlay.background"),`;
    border: 1px solid `).concat(n("editor.overlay.border.color"),`;
    box-shadow: `).concat(n("editor.overlay.shadow"),`;
    border-radius: `).concat(n("editor.overlay.border.radius"),`;
    padding: `).concat(n("editor.overlay.padding"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options .ql-picker-item {
    color: `).concat(n("editor.overlay.option.color"),`;
    border-radius: `).concat(n("editor.overlay.option.border.radius"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options .ql-picker-item:hover {
    background: `).concat(n("editor.overlay.option.focus.background"),`;
    color: `).concat(n("editor.overlay.option.focus.color"),`;
}

.p-editor .p-editor-toolbar.ql-snow .ql-picker.ql-expanded:not(.ql-icon-picker) .ql-picker-item {
    padding: `).concat(n("editor.overlay.option.padding"),`;
}

.p-editor .p-editor-content {
    border-end-end-radius: `).concat(n("editor.content.border.radius"),`;
    border-end-start-radius: `).concat(n("editor.content.border.radius"),`;
}

.p-editor .p-editor-content.ql-snow {
    border: 1px solid `).concat(n("editor.content.border.color"),`;
}

.p-editor .p-editor-content .ql-editor {
    background: `).concat(n("editor.content.background"),`;
    color: `).concat(n("editor.content.color"),`;
    border-end-end-radius: `).concat(n("editor.content.border.radius"),`;
    border-end-start-radius: `).concat(n("editor.content.border.radius"),`;
}

.p-editor .ql-snow.ql-toolbar button:hover,
.p-editor .ql-snow.ql-toolbar button:focus {
    color: `).concat(n("editor.toolbar.item.hover.color"),`;
}

.p-editor .ql-snow.ql-toolbar button:hover .ql-stroke,
.p-editor .ql-snow.ql-toolbar button:focus .ql-stroke {
    stroke: `).concat(n("editor.toolbar.item.hover.color"),`;
}

.p-editor .ql-snow.ql-toolbar button:hover .ql-fill,
.p-editor .ql-snow.ql-toolbar button:focus .ql-fill {
    fill: `).concat(n("editor.toolbar.item.hover.color"),`;
}

.p-editor .ql-snow.ql-toolbar button.ql-active,
.p-editor .ql-snow.ql-toolbar .ql-picker-label.ql-active,
.p-editor .ql-snow.ql-toolbar .ql-picker-item.ql-selected {
    color: `).concat(n("editor.toolbar.item.active.color"),`;
}

.p-editor .ql-snow.ql-toolbar button.ql-active .ql-stroke,
.p-editor .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,
.p-editor .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke {
    stroke: `).concat(n("editor.toolbar.item.active.color"),`;
}

.p-editor .ql-snow.ql-toolbar button.ql-active .ql-fill,
.p-editor .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,
.p-editor .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill {
    fill: `).concat(n("editor.toolbar.item.active.color"),`;
}

.p-editor .ql-snow.ql-toolbar button.ql-active .ql-picker-label,
.p-editor .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-picker-label,
.p-editor .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-picker-label {
    color: `).concat(n("editor.toolbar.item.active.color"),`;
}
`)},TX={root:function(e){var n=e.instance;return["p-editor",{"p-invalid":n.$invalid}]},toolbar:"p-editor-toolbar",content:"p-editor-content"},EX=Xn.extend({name:"editor",theme:kX,classes:TX}),IX={name:"BaseEditor",extends:z_,props:{placeholder:String,readonly:Boolean,formats:Array,editorStyle:null,modules:null},style:EX,provide:function(){return{$pcEditor:this,$parentInstance:this}}};function Yy(t){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yy(t)}function bE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function PX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bE(Object(n),!0).forEach(function(l){AX(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bE(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function AX(t,e,n){return(e=RX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RX(t){var e=MX(t,"string");return Yy(e)=="symbol"?e:e+""}function MX(t,e){if(Yy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Yy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _E=function(){try{return window.Quill}catch{return null}}(),$S={name:"Editor",extends:IX,inheritAttrs:!1,emits:["text-change","selection-change","load"],data:function(){return{reRenderColorKey:0}},quill:null,watch:{modelValue:function(e,n){e!==n&&this.quill&&!this.quill.hasFocus()&&(this.reRenderColorKey++,this.renderValue(e))},readonly:function(){this.handleReadOnlyChange()}},mounted:function(){var e=this,n={modules:PX({toolbar:this.$refs.toolbarElement},this.modules),readOnly:this.readonly,theme:"snow",formats:this.formats,placeholder:this.placeholder};_E?(this.quill=new _E(this.$refs.editorElement,n),this.initQuill(),this.handleLoad()):xS(()=>import("./quill-7ifaCZyY.js"),[]).then(function(l){l&&xP(e.$refs.editorElement)&&(l.default?e.quill=new l.default(e.$refs.editorElement,n):e.quill=new l(e.$refs.editorElement,n),e.initQuill())}).then(function(){e.handleLoad()})},beforeUnmount:function(){this.quill=null},methods:{renderValue:function(e){this.quill&&(e?this.quill.clipboard.dangerouslyPasteHTML(e):this.quill.setText(""))},initQuill:function(){var e=this;this.renderValue(this.d_value),this.quill.on("text-change",function(n,l,m){if(m==="user"){var d=e.$refs.editorElement.children[0].innerHTML,x=e.quill.getText().trim();d==="<p><br></p>"&&(d=""),e.writeValue(d),e.$emit("text-change",{htmlValue:d,textValue:x,delta:n,source:m,instance:e.quill})}}),this.quill.on("selection-change",function(n,l,m){var d=e.$refs.editorElement.children[0].innerHTML,x=e.quill.getText().trim();e.$emit("selection-change",{htmlValue:d,textValue:x,range:n,oldRange:l,source:m,instance:e.quill})})},handleLoad:function(){this.quill&&this.quill.getModule("toolbar")&&this.$emit("load",{instance:this.quill})},handleReadOnlyChange:function(){this.quill&&this.quill.enable(!this.readonly)}}};function DX(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root")},t.ptmi("root")),[M("div",ie({ref:"toolbarElement",class:t.cx("toolbar")},t.ptm("toolbar")),[jt(t.$slots,"toolbar",{},function(){return[M("span",ie({class:"ql-formats"},t.ptm("formats")),[M("select",ie({class:"ql-header",defaultValue:"0"},t.ptm("header")),[M("option",ie({value:"1"},t.ptm("option")),"Heading",16),M("option",ie({value:"2"},t.ptm("option")),"Subheading",16),M("option",ie({value:"0"},t.ptm("option")),"Normal",16)],16),M("select",ie({class:"ql-font"},t.ptm("font")),[M("option",ka(mh(t.ptm("option"))),null,16),M("option",ie({value:"serif"},t.ptm("option")),null,16),M("option",ie({value:"monospace"},t.ptm("option")),null,16)],16)],16),M("span",ie({class:"ql-formats"},t.ptm("formats")),[M("button",ie({class:"ql-bold",type:"button"},t.ptm("bold")),null,16),M("button",ie({class:"ql-italic",type:"button"},t.ptm("italic")),null,16),M("button",ie({class:"ql-underline",type:"button"},t.ptm("underline")),null,16)],16),(X(),pe("span",ie({key:m.reRenderColorKey,class:"ql-formats"},t.ptm("formats")),[M("select",ie({class:"ql-color"},t.ptm("color")),null,16),M("select",ie({class:"ql-background"},t.ptm("background")),null,16)],16)),M("span",ie({class:"ql-formats"},t.ptm("formats")),[M("button",ie({class:"ql-list",value:"ordered",type:"button"},t.ptm("list")),null,16),M("button",ie({class:"ql-list",value:"bullet",type:"button"},t.ptm("list")),null,16),M("select",ie({class:"ql-align"},t.ptm("select")),[M("option",ie({defaultValue:""},t.ptm("option")),null,16),M("option",ie({value:"center"},t.ptm("option")),null,16),M("option",ie({value:"right"},t.ptm("option")),null,16),M("option",ie({value:"justify"},t.ptm("option")),null,16)],16)],16),M("span",ie({class:"ql-formats"},t.ptm("formats")),[M("button",ie({class:"ql-link",type:"button"},t.ptm("link")),null,16),M("button",ie({class:"ql-image",type:"button"},t.ptm("image")),null,16),M("button",ie({class:"ql-code-block",type:"button"},t.ptm("codeBlock")),null,16)],16),M("span",ie({class:"ql-formats"},t.ptm("formats")),[M("button",ie({class:"ql-clean",type:"button"},t.ptm("clean")),null,16)],16)]})],16),M("div",ie({ref:"editorElement",class:t.cx("content"),style:t.editorStyle},t.ptm("content")),null,16)],16)}$S.render=DX;const LX={class:"bg-[#f2f2f2] p-8 grid"},OX={class:"col-3 flex flex-col gap-4"},zX={class:""},BX={class:"flex gap-2 flex-col mt-2"},FX={class:"flex items-center gap-2"},$X={for:"fiveStar",class:"flex items-center gap-2"},NX={class:"text-gray-500"},VX={class:"flex items-center gap-2"},jX={for:"fourStar",class:"flex items-center gap-2"},UX={class:"text-gray-500"},qX={class:"flex items-center gap-2"},HX={for:"threeStar",class:"flex items-center gap-2"},GX={class:"text-gray-500"},WX={class:"flex items-center gap-2"},KX={for:"twoStar",class:"flex items-center gap-2"},ZX={class:"text-gray-500"},XX={class:"flex items-center gap-2"},YX={for:"oneStar",class:"flex items-center gap-2"},JX={class:"text-gray-500"},QX={class:""},eY={class:"flex gap-2 flex-col mt-2"},tY={class:"flex items-center gap-2"},nY={class:"flex items-center gap-2"},rY={key:0,class:"mt-4"},iY={class:"col-8"},oY={class:""},sY={class:"flex items-center gap-2"},aY={class:"text-8xl font-bold"},lY={class:"text-sm my-2"},cY={key:0,class:"flex justify-center items-center py-8"},uY={key:1,class:"flex flex-col gap-4"},dY={key:0,class:"text-center py-8 text-gray-500"},hY={class:"flex items-center gap-4"},pY={class:"font-bold"},fY={class:"text-[#a3a3a3]"},mY={class:"my-2"},gY=["innerHTML"],yY={class:"mt-6"},vY={class:"bg-white p-6 rounded-lg"},bY={class:"flex items-center gap-4 mb-4"},_Y={class:"flex-1"},xY={class:"my-4"},wY={class:"flex"},SY=Xr({__name:"CommentProduct",props:{productId:{}},setup(t){const e=t,n=Xl(),l=Ke(""),m=Ke(""),d=Ke(""),x=Ke(0),s=Ke(""),T=Ke([]),E=Ke(!1),A=Ke(!1),z=ki(()=>T.value.length===0?0:T.value.reduce((te,re)=>te+re.rating,0)/T.value.length),j=ki(()=>{let ne=[...T.value];if(m.value){const re={five:5,four:4,three:3,two:2,one:1}[m.value];re&&(ne=ne.filter(ze=>ze.rating===re))}return d.value==="responded"||d.value,ne}),U=ki(()=>{const ne={five:0,four:0,three:0,two:0,one:0};return T.value.forEach(te=>{switch(te.rating){case 5:ne.five++;break;case 4:ne.four++;break;case 3:ne.three++;break;case 2:ne.two++;break;case 1:ne.one++;break}}),ne}),K=ne=>new Date(ne).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),oe=async()=>{try{E.value=!0;const ne=await JZ(e.productId);T.value=ne}catch(ne){console.error("Error fetching comments:",ne),n.add({severity:"error",summary:"Li",detail:"Khng th ti danh sch nh gi",life:3e3})}finally{E.value=!1}},fe=async()=>{if(x.value===0){n.add({severity:"warn",summary:"Cnh bo",detail:"Vui lng chn s sao nh gi",life:3e3});return}if(!s.value.trim()){n.add({severity:"warn",summary:"Cnh bo",detail:"Vui lng nhp ni dung nh gi",life:3e3});return}try{A.value=!0;const ne={productId:e.productId,content:s.value,rating:x.value};await eX(ne),n.add({severity:"success",summary:"Thnh cng",detail:"nh gi ca bn  c gi thnh cng",life:3e3}),x.value=0,s.value="",await oe()}catch(ne){console.error("Error submitting comment:",ne),n.add({severity:"error",summary:"Li",detail:"Khng th gi nh gi. Vui lng th li sau.",life:3e3})}finally{A.value=!1}},me=()=>{m.value="",d.value=""};return Co(()=>{oe()}),(ne,te)=>(X(),pe("div",LX,[ge(Ie(Mh)),M("div",OX,[te[19]||(te[19]=M("p",{class:"text-5xl font-bold uppercase"},"nh gi",-1)),te[20]||(te[20]=M("p",{class:"text-5xl font-bold uppercase"},"Sn phm",-1)),ge(Ie(N_),null,{default:Xe(()=>[ge(Ie(V_),{class:"pi pi-search"}),ge(Ie(vo),{modelValue:l.value,"onUpdate:modelValue":te[0]||(te[0]=re=>l.value=re),placeholder:"Tm kim sn phm",size:"small",class:"!rounded-full w-full"},null,8,["modelValue"])]),_:1}),M("div",zX,[te[15]||(te[15]=M("p",{class:"text-[#a3a3a3] font-bold"},"Phn loi sp hng",-1)),M("div",BX,[M("div",FX,[ge(Ie(gs),{modelValue:m.value,"onUpdate:modelValue":te[1]||(te[1]=re=>m.value=re),inputId:"fiveStar",name:"star",value:"five"},null,8,["modelValue"]),M("label",$X,[te[10]||(te[10]=M("span",null,"5",-1)),ge(Ie($l),{modelValue:5,readonly:"",class:"!text-black"}),M("span",NX,"("+Ue(U.value.five)+")",1)])]),M("div",VX,[ge(Ie(gs),{modelValue:m.value,"onUpdate:modelValue":te[2]||(te[2]=re=>m.value=re),inputId:"fourStar",name:"star",value:"four"},null,8,["modelValue"]),M("label",jX,[te[11]||(te[11]=M("span",null,"4",-1)),ge(Ie($l),{modelValue:4,readonly:"",class:"!text-black"}),M("span",UX,"("+Ue(U.value.four)+")",1)])]),M("div",qX,[ge(Ie(gs),{modelValue:m.value,"onUpdate:modelValue":te[3]||(te[3]=re=>m.value=re),inputId:"threeStar",name:"star",value:"three"},null,8,["modelValue"]),M("label",HX,[te[12]||(te[12]=M("span",null,"3",-1)),ge(Ie($l),{modelValue:3,readonly:"",class:"!text-black"}),M("span",GX,"("+Ue(U.value.three)+")",1)])]),M("div",WX,[ge(Ie(gs),{modelValue:m.value,"onUpdate:modelValue":te[4]||(te[4]=re=>m.value=re),inputId:"twoStar",name:"star",value:"two"},null,8,["modelValue"]),M("label",KX,[te[13]||(te[13]=M("span",null,"2",-1)),ge(Ie($l),{modelValue:2,readonly:"",class:"!text-black"}),M("span",ZX,"("+Ue(U.value.two)+")",1)])]),M("div",XX,[ge(Ie(gs),{modelValue:m.value,"onUpdate:modelValue":te[5]||(te[5]=re=>m.value=re),inputId:"oneStar",name:"star",value:"one"},null,8,["modelValue"]),M("label",YX,[te[14]||(te[14]=M("span",null,"1",-1)),ge(Ie($l),{modelValue:1,readonly:"",class:"!text-black"}),M("span",JX,"("+Ue(U.value.one)+")",1)])])])]),te[21]||(te[21]=M("div",{class:"flex gap-2 bg-[#e3e6fa] rounded-md p-2 w-[80%]"},[M("img",{src:"https://mcdn.coolmate.me//image/February2025/mceclip0_64.png",alt:"",class:"w-[26px] object-contain"}),M("p",{class:"text-[#273bcd] text-sm"}," Cac review u n t khach hang a thc s mua hang cua Coolmate ")],-1)),M("div",QX,[te[18]||(te[18]=M("p",{class:"text-[#a3a3a3] font-bold"},"Lc phn hi",-1)),M("div",eY,[M("div",tY,[ge(Ie(gs),{modelValue:d.value,"onUpdate:modelValue":te[6]||(te[6]=re=>d.value=re),inputId:"responded",name:"response",value:"responded"},null,8,["modelValue"]),te[16]||(te[16]=M("label",{for:"responded",class:"flex items-center gap-2"},[M("span",null," phn hi")],-1))]),M("div",nY,[ge(Ie(gs),{modelValue:d.value,"onUpdate:modelValue":te[7]||(te[7]=re=>d.value=re),inputId:"unresponded",name:"response",value:"unresponded"},null,8,["modelValue"]),te[17]||(te[17]=M("label",{for:"unresponded",class:"flex items-center gap-2"},[M("span",null,"C hnh nh")],-1))])]),m.value||d.value?(X(),pe("div",rY,[ge(Ie(jr),{label:"Xa b lc",icon:"pi pi-times",size:"small",severity:"secondary",onClick:me,class:"w-full"})])):Ct("",!0)])]),M("div",iY,[M("div",oY,[M("div",sY,[M("span",aY,Ue(z.value.toFixed(1)),1),te[22]||(te[22]=da('<div class="" data-v-503f8874><span class="h-[32px] w-[32px] bg-no-repeat bg-contain inline-block" style="background-image:url(&quot;https://www.coolmate.me/images/star-yellow.svg?f45857fa30ff48521e7bc19ed0871508&quot;);" data-v-503f8874></span><span class="h-[32px] w-[32px] bg-no-repeat bg-contain inline-block" style="background-image:url(&quot;https://www.coolmate.me/images/star-yellow.svg?f45857fa30ff48521e7bc19ed0871508&quot;);" data-v-503f8874></span><span class="h-[32px] w-[32px] bg-no-repeat bg-contain inline-block" style="background-image:url(&quot;https://www.coolmate.me/images/star-yellow.svg?f45857fa30ff48521e7bc19ed0871508&quot;);" data-v-503f8874></span><span class="h-[32px] w-[32px] bg-no-repeat bg-contain inline-block" style="background-image:url(&quot;https://www.coolmate.me/images/star-yellow.svg?f45857fa30ff48521e7bc19ed0871508&quot;);" data-v-503f8874></span><span class="h-[32px] w-[32px] bg-no-repeat bg-contain inline-block" style="background-image:url(https://www.coolmate.me/images/star-yellow-half.svg?c15aca386e56880113c78217141727a4);" data-v-503f8874></span></div>',1))]),M("p",lY,"Da trn "+Ue(T.value.length)+" nh gi n t khch hng",1)]),te[24]||(te[24]=M("div",{class:""},null,-1)),E.value?(X(),pe("div",cY,[ge(Ie(W6))])):(X(),pe("div",uY,[j.value.length===0?(X(),pe("div",dY,Ue(m.value||d.value?"Khng c nh gi no ph hp vi b lc":"Cha c nh gi no cho sn phm ny"),1)):Ct("",!0),(X(!0),pe(an,null,fr(j.value,re=>(X(),pe("div",{key:re.id,class:"p-4 bg-white rounded-lg"},[M("div",hY,[M("span",pY,Ue(re.userName),1),M("span",fY,Ue(K(re.createdAt)),1)]),M("div",mY,[ge(Ie($l),{modelValue:re.rating,readonly:"",class:"!text-black"},null,8,["modelValue"])]),M("div",{class:"mt-2 comment-content",innerHTML:re.content},null,8,gY)]))),128))])),M("div",yY,[M("div",vY,[te[23]||(te[23]=M("h3",{class:"text-xl font-bold"},"Vit nh gi ca bn",-1)),M("div",bY,[M("div",_Y,[M("div",xY,[ge(Ie($l),{modelValue:x.value,"onUpdate:modelValue":te[8]||(te[8]=re=>x.value=re),cancel:!1},null,8,["modelValue"])]),ge(Ie($S),{modelValue:s.value,"onUpdate:modelValue":te[9]||(te[9]=re=>s.value=re),editorStyle:"height: 200px",placeholder:"Chia s tri nghim ca bn v sn phm ny...",class:"w-full"},null,8,["modelValue"])])]),M("div",wY,[ge(Ie(jr),{label:"Gi nh gi",icon:"pi pi-send",class:"p-button-primary",loading:A.value,onClick:fe},null,8,["loading"])])])])])]))}}),CY=Lo(SY,[["__scopeId","data-v-503f8874"]]),kY={};function TY(t,e){return"a"}const EY=Lo(kY,[["render",TY]]),IY=async()=>{try{const t=await Oi.get("/api/carts");return Promise.resolve(t.data)}catch(t){return Promise.reject(t)}},PY=async t=>{try{const e=await Oi.post("/api/carts/items",t);return Promise.resolve(e.data)}catch(e){return Promise.reject(e)}},AY=async(t,e)=>{try{const n=await Oi.put(`/api/carts/items/${t}`,{quantity:e});return Promise.resolve(n.data)}catch(n){return Promise.reject(n)}},RY=async t=>{try{const e=await Oi.delete("/api/carts/items",{data:t});return Promise.resolve(e.data)}catch(e){return Promise.reject(e)}},MY={class:"w-primary mx-auto pt-12"},DY=["href","onClick"],LY={class:"text-primary font-semibold"},OY=["href","target"],zY={class:"text-surface-700 dark:text-surface-0"},BY={class:"grid"},FY={class:"col-6 !grid !grid-cols-12"},$Y={class:"col-span-2 flex flex-col gap-4"},NY=["src","onClick"],VY={class:"col-span-10"},jY={class:"flex gap-4 col-6"},UY={class:"flex-1"},qY={class:"font-bold text-3xl"},HY={class:"flex gap-2 my-2"},GY={class:"my-2"},WY={class:"text-[#c4c4c4]"},KY={class:"font-bold text-2xl flex gap-4 align-items-center"},ZY={class:"font-bold text-2xl"},XY={class:"my-2"},YY={class:"font-bold"},JY={class:"flex flex-wrap gap-4"},QY={class:"my-2"},eJ={class:"font-bold"},tJ={class:"flex flex-wrap gap-4 mb-4"},nJ={class:"mb-4 flex gap-2"},rJ={class:"flex gap-2 mb-4"},iJ=Xr({__name:"ProductPage",setup(t){var _t;const e=M_(),n=String(e.params.id),l=Ke(),m=Xl(),d=Ke(1),x=()=>{var he;const Me={sku:((he=oe.value)==null?void 0:he.sku)||"",quantity:d.value,price:fe.value,productDetails:l.value||void 0};PY(Me).then(()=>{m.add({severity:"success",summary:" thm vo gi hng",detail:"Vo gi hng  thm chi tit",life:3e3})}).catch(Ce=>{m.add({severity:"error",summary:"Li",detail:"Thm vo gi hng tht bi",life:3e3})})},s=Ke({icon:"pi pi-home",route:"/"}),T=Ke([{label:"Sn phm",route:"/products"},{label:((_t=l.value)==null?void 0:_t.name)||"..."}]);ho(l,Me=>{Me&&(T.value=[{label:"Sn phm",route:"/products"},{label:Me.name}])}),Ke(!0),Ke("bottom"),Ke([{breakpoint:"1300px",numVisible:4},{breakpoint:"575px",numVisible:1}]),Ke([{itemImageSrc:"https://media3.coolmate.me/cdn-cgi/image/quality=80,format=auto/uploads/May2025/Ao-tanktop-nam-mac-trong-anti-smell-Navy_1.jpg",thumbnailImageSrc:"https://media3.coolmate.me/cdn-cgi/image/quality=80,format=auto/uploads/May2025/Ao-tanktop-nam-mac-trong-anti-smell-Navy_1.jpg",alt:"Description for Image 1",title:"Title 1"},{itemImageSrc:"https://primefaces.org/cdn/primevue/images/galleria/galleria4.jpg",thumbnailImageSrc:"https://primefaces.org/cdn/primevue/images/galleria/galleria4s.jpg",alt:"Description for Image 1",title:"Title 1"}]);const E=Ke(1),A=Ke([]),z=ki(()=>{const Me=A.value.find(he=>he.id===E.value);return(Me==null?void 0:Me.label)||""}),j=Ke(1),U=Ke([]),K=ki(()=>{const Me=U.value.find(he=>he.id===j.value);return(Me==null?void 0:Me.alt)||""}),oe=ki(()=>{var $e,Je,ft;if(!(($e=l.value)!=null&&$e.variants))return null;const Me=(Je=A.value.find(ut=>ut.id===E.value))==null?void 0:Je.label,he=(ft=U.value.find(ut=>ut.id===j.value))==null?void 0:ft.alt;return l.value.variants.find(ut=>{const Qe=ut.size===Me,Qt=ut.colorName===he;return Qe&&Qt})}),fe=ki(()=>{var Me,he;return((Me=oe.value)==null?void 0:Me.price)||((he=l.value)==null?void 0:he.price)||0}),me=ki(()=>{var Ce,$e;if(!((Ce=l.value)!=null&&Ce.variants))return A.value;const Me=($e=U.value.find(Je=>Je.id===j.value))==null?void 0:$e.alt;if(!Me)return A.value;const he=[...new Set(l.value.variants.filter(Je=>Je.colorName===Me).map(Je=>Je.size))];return A.value.map(Je=>({...Je,disabled:!he.includes(Je.label)}))});ho(j,Me=>{var $e,Je;const he=($e=U.value.find(ft=>ft.id===Me))==null?void 0:$e.alt;if(!he||!((Je=l.value)!=null&&Je.variants))return;const Ce=l.value.variants.filter(ft=>ft.colorName===he).map(ft=>ft.size)[0];if(Ce){const ft=A.value.find(ut=>ut.label===Ce);ft&&(E.value=ft.id)}});const ne=Ke([]),te=Ke(""),re=Me=>{te.value=Me};Ke(!1);const ze=()=>{alert("Chc nng chat vi shop s c pht trin!")};return Co(async()=>{var Me,he;if(window.scrollTo(0,0),l.value=await XZ(n),(Me=l.value)!=null&&Me.images&&l.value.images.length>0?(ne.value=l.value.images.filter(Ce=>typeof Ce=="string"),te.value=ne.value[0]):(ne.value=["https://via.placeholder.com/300x400?text=No+Image"],te.value=ne.value[0]),(he=l.value)!=null&&he.variants){const Ce=[...new Set(l.value.variants.map(Je=>Je.size))];A.value=Ce.map((Je,ft)=>({id:ft+1,label:Je}));const $e=[...new Set(l.value.variants.map(Je=>Je.colorName))];if(U.value=$e.map((Je,ft)=>{const ut=l.value.variants.find(Qe=>Qe.colorName===Je);return{id:ft+1,type:"color",color:(ut==null?void 0:ut.colorHex)||"#cccccc",alt:Je}}),l.value.variants.length>0){const Je=l.value.variants[0],ft=A.value.find(Qe=>Qe.label===Je.size);ft&&(E.value=ft.id);const ut=U.value.find(Qe=>Qe.alt===Je.colorName);ut&&(j.value=ut.id)}}}),(Me,he)=>{var $e,Je;const Ce=wn("router-link");return X(),pe(an,null,[M("div",MY,[ge(Ie(kS),{home:s.value,model:T.value,class:""},{item:Xe(({item:ft,props:ut})=>[ft.route?(X(),bt(Ce,{key:0,to:ft.route,custom:""},{default:Xe(({href:Qe,navigate:Qt})=>[M("a",ie({href:Qe},ut.action,{onClick:Qt}),[M("span",{class:vn([ft.icon,"text-color"])},null,2),M("span",LY,Ue(ft.label),1)],16,DY)]),_:2},1032,["to"])):(X(),pe("a",ie({key:1,href:ft.url,target:ft.target},ut.action),[M("span",zY,Ue(ft.label),1)],16,OY))]),separator:Xe(()=>he[3]||(he[3]=[tr(" / ")])),_:1},8,["home","model"]),M("div",BY,[M("div",FY,[M("div",$Y,[(X(!0),pe(an,null,fr(ne.value,(ft,ut)=>(X(),pe("img",{key:ut,src:ft,class:vn(["rounded-md cursor-pointer hover:opacity-80 transition-opacity w-8",[ft===te.value?"opacity-100":"opacity-60"]]),onClick:Qe=>re(ft),alt:""},null,10,NY))),128))]),M("div",VY,[ge(Ie(jy),{src:te.value,alt:"Image",class:"rounded-md w-full",preview:""},null,8,["src"])])]),M("div",jY,[M("div",UY,[he[10]||(he[10]=da('<div class="flex justify-between items-center mb-4"><div class="flex items-center gap-2"><img src="" alt="" class="!w-10 !h-10 rounded-full"><span class="font-bold">Adidas</span></div><i class="pi pi-heart"></i></div>',1)),M("p",qY,Ue((($e=l.value)==null?void 0:$e.name)||"..."),1),M("span",HY,[ge(Ie($l),{"model-value":(Je=l.value)==null?void 0:Je.rating,readonly:""},null,8,["model-value"]),he[4]||(he[4]=tr("(39)"))]),M("div",GY,[M("del",WY,Ue(Ie(Vl)(fe.value)),1)]),M("p",KY,[M("span",ZY,Ue(Ie(Vl)(fe.value)),1),ge(Ie(Af),null,{default:Xe(()=>he[5]||(he[5]=[tr("-11%")])),_:1})]),M("p",XY,[he[6]||(he[6]=M("span",null,"Mu sc: ",-1)),M("span",YY,Ue(K.value),1)]),M("div",JY,[ge(GP,{modelValue:j.value,"onUpdate:modelValue":he[0]||(he[0]=ft=>j.value=ft),colorOptions:U.value},null,8,["modelValue","colorOptions"])]),M("p",QY,[he[7]||(he[7]=M("span",null,"Kch thc: ",-1)),M("span",eJ,Ue(z.value),1)]),M("div",tJ,[ge(kA,{modelValue:E.value,"onUpdate:modelValue":he[1]||(he[1]=ft=>E.value=ft),sizeOptions:me.value},null,8,["modelValue","sizeOptions"])]),ge(Ie(Mh)),M("div",nJ,[ge(Ie(j_),{modelValue:d.value,"onUpdate:modelValue":he[2]||(he[2]=ft=>d.value=ft),showButtons:"",buttonLayout:"horizontal",min:0,max:99,size:"small","input-class":"w-[36px]"},{incrementbuttonicon:Xe(()=>he[8]||(he[8]=[M("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:Xe(()=>he[9]||(he[9]=[M("span",{class:"pi pi-minus"},null,-1)])),_:1},8,["modelValue"])]),M("div",rJ,[M("button",{class:"border rounded-lg flex-1 py-2 bg-black text-white cursor-pointer",onClick:x}," Thm vo gi hng "),ge(Ie(jr),{icon:"pi pi-comments",class:"rounded-lg text-black bg-gray-200 border-none hover:bg-gray-300",onClick:ze,pt:{icon:{class:"text-black"}}})]),he[11]||(he[11]=M("div",{class:"flex gap-2 align-items-center"},[M("i",{class:"pi pi-truck"}),M("p",{class:"font-medium"},"Freeship n trn 200K")],-1))])])])]),ge(EY),ge(CY,{productId:Number(Ie(n))},null,8,["productId"])],64)}}}),oJ="/assets/favicon-uSLXchjO.ico",sJ={},aJ={class:"bg-gray-100 border-t border-gray-200 py-6 mt-8"};function lJ(t,e){return X(),pe("footer",aJ,e[0]||(e[0]=[da('<div class="!max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4 px-4"><div class="flex items-center gap-2"><img src="'+oJ+'" alt="Logo" class="w-8 h-8"><span class="font-bold text-lg text-gray-700">My App</span></div><nav class="flex gap-6 text-gray-600 text-sm"><a href="/" class="hover:text-primary">Trang ch</a><a href="/products" class="hover:text-primary">Sn phm</a><a href="/contact" class="hover:text-primary">Lin h</a></nav><div class="flex gap-3"><a href="#" aria-label="Facebook" class="hover:text-blue-600"><i class="pi pi-facebook text-xl"></i></a><a href="#" aria-label="Instagram" class="hover:text-pink-500"><i class="pi pi-instagram text-xl"></i></a></div></div><div class="text-center text-xs text-gray-400 mt-4"> 2025 My App. All rights reserved.</div>',2)]))}const TA=Lo(sJ,[["render",lJ]]),cJ={class:"layout"},uJ={class:""},dJ=Xr({__name:"HeaderLayout",setup(t){return(e,n)=>{const l=wn("router-view");return X(),pe("div",cJ,[ge(c0,{title:"Product List"}),M("main",uJ,[ge(l)]),ge(TA)])}}}),hJ=Lo(dJ,[["__scopeId","data-v-35160831"]]),pJ={class:"layout"},fJ={class:""},mJ=Xr({__name:"FullWidth",setup(t){return(e,n)=>{const l=wn("router-view");return X(),pe("div",pJ,[ge(c0,{title:"Product List"}),M("main",fJ,[ge(l)]),ge(TA)])}}}),gJ=Lo(mJ,[["__scopeId","data-v-500f2fba"]]);var Oue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yJ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fb={exports:{}},vJ=Fb.exports,xE;function bJ(){return xE||(xE=1,function(t,e){(function(n,l){t.exports=l()})(vJ,function(){var n,l,m;function d(s,T){if(!n)n=T;else if(!l)l=T;else{var E="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+l+")(sharedChunk); self.onerror = null;",A={};n(A),m=T(A),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(m.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}d(["exports"],function(s){var T=1e-6,E=typeof Float32Array<"u"?Float32Array:Array;function A(a,r){var o=r[0],u=r[1],h=r[2],g=r[3],y=o*g-h*u;return y?(a[0]=g*(y=1/y),a[1]=-u*y,a[2]=-h*y,a[3]=o*y,a):null}function z(){var a=new E(9);return E!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function j(a,r){var o=r[0],u=r[1],h=r[2],g=r[3],y=r[4],_=r[5],S=r[6],C=r[7],P=r[8];return a[0]=y*P-_*C,a[1]=h*C-u*P,a[2]=u*_-h*y,a[3]=_*S-g*P,a[4]=o*P-h*S,a[5]=h*g-o*_,a[6]=g*C-y*S,a[7]=u*S-o*C,a[8]=o*y-u*g,a}function U(a,r,o){var u=r[0],h=r[1],g=r[2],y=r[3],_=r[4],S=r[5],C=r[6],P=r[7],R=r[8],D=o[0],B=o[1],$=o[2],q=o[3],W=o[4],J=o[5],ce=o[6],ue=o[7],H=o[8];return a[0]=D*u+B*y+$*C,a[1]=D*h+B*_+$*P,a[2]=D*g+B*S+$*R,a[3]=q*u+W*y+J*C,a[4]=q*h+W*_+J*P,a[5]=q*g+W*S+J*R,a[6]=ce*u+ue*y+H*C,a[7]=ce*h+ue*_+H*P,a[8]=ce*g+ue*S+H*R,a}function K(){var a=new E(16);return E!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function oe(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function fe(a,r){var o=r[0],u=r[1],h=r[2],g=r[3],y=r[4],_=r[5],S=r[6],C=r[7],P=r[8],R=r[9],D=r[10],B=r[11],$=r[12],q=r[13],W=r[14],J=r[15],ce=o*_-u*y,ue=o*S-h*y,H=o*C-g*y,se=u*S-h*_,de=u*C-g*_,be=h*C-g*S,Oe=P*q-R*$,Re=P*W-D*$,Be=P*J-B*$,je=R*W-D*q,at=R*J-B*q,At=D*J-B*W,yt=ce*At-ue*at+H*je+se*Be-de*Re+be*Oe;return yt?(a[0]=(_*At-S*at+C*je)*(yt=1/yt),a[1]=(h*at-u*At-g*je)*yt,a[2]=(q*be-W*de+J*se)*yt,a[3]=(D*de-R*be-B*se)*yt,a[4]=(S*Be-y*At-C*Re)*yt,a[5]=(o*At-h*Be+g*Re)*yt,a[6]=(W*H-$*be-J*ue)*yt,a[7]=(P*be-D*H+B*ue)*yt,a[8]=(y*at-_*Be+C*Oe)*yt,a[9]=(u*Be-o*at-g*Oe)*yt,a[10]=($*de-q*H+J*ce)*yt,a[11]=(R*H-P*de-B*ce)*yt,a[12]=(_*Re-y*je-S*Oe)*yt,a[13]=(o*je-u*Re+h*Oe)*yt,a[14]=(q*ue-$*se-W*ce)*yt,a[15]=(P*se-R*ue+D*ce)*yt,a):null}function me(a,r,o){var u=r[0],h=r[1],g=r[2],y=r[3],_=r[4],S=r[5],C=r[6],P=r[7],R=r[8],D=r[9],B=r[10],$=r[11],q=r[12],W=r[13],J=r[14],ce=r[15],ue=o[0],H=o[1],se=o[2],de=o[3];return a[0]=ue*u+H*_+se*R+de*q,a[1]=ue*h+H*S+se*D+de*W,a[2]=ue*g+H*C+se*B+de*J,a[3]=ue*y+H*P+se*$+de*ce,a[4]=(ue=o[4])*u+(H=o[5])*_+(se=o[6])*R+(de=o[7])*q,a[5]=ue*h+H*S+se*D+de*W,a[6]=ue*g+H*C+se*B+de*J,a[7]=ue*y+H*P+se*$+de*ce,a[8]=(ue=o[8])*u+(H=o[9])*_+(se=o[10])*R+(de=o[11])*q,a[9]=ue*h+H*S+se*D+de*W,a[10]=ue*g+H*C+se*B+de*J,a[11]=ue*y+H*P+se*$+de*ce,a[12]=(ue=o[12])*u+(H=o[13])*_+(se=o[14])*R+(de=o[15])*q,a[13]=ue*h+H*S+se*D+de*W,a[14]=ue*g+H*C+se*B+de*J,a[15]=ue*y+H*P+se*$+de*ce,a}function ne(a,r,o){var u,h,g,y,_,S,C,P,R,D,B,$,q=o[0],W=o[1],J=o[2];return r===a?(a[12]=r[0]*q+r[4]*W+r[8]*J+r[12],a[13]=r[1]*q+r[5]*W+r[9]*J+r[13],a[14]=r[2]*q+r[6]*W+r[10]*J+r[14],a[15]=r[3]*q+r[7]*W+r[11]*J+r[15]):(h=r[1],g=r[2],y=r[3],_=r[4],S=r[5],C=r[6],P=r[7],R=r[8],D=r[9],B=r[10],$=r[11],a[0]=u=r[0],a[1]=h,a[2]=g,a[3]=y,a[4]=_,a[5]=S,a[6]=C,a[7]=P,a[8]=R,a[9]=D,a[10]=B,a[11]=$,a[12]=u*q+_*W+R*J+r[12],a[13]=h*q+S*W+D*J+r[13],a[14]=g*q+C*W+B*J+r[14],a[15]=y*q+P*W+$*J+r[15]),a}function te(a,r,o){var u=o[0],h=o[1],g=o[2];return a[0]=r[0]*u,a[1]=r[1]*u,a[2]=r[2]*u,a[3]=r[3]*u,a[4]=r[4]*h,a[5]=r[5]*h,a[6]=r[6]*h,a[7]=r[7]*h,a[8]=r[8]*g,a[9]=r[9]*g,a[10]=r[10]*g,a[11]=r[11]*g,a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a}function re(a,r,o){var u=Math.sin(o),h=Math.cos(o),g=r[4],y=r[5],_=r[6],S=r[7],C=r[8],P=r[9],R=r[10],D=r[11];return r!==a&&(a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[4]=g*h+C*u,a[5]=y*h+P*u,a[6]=_*h+R*u,a[7]=S*h+D*u,a[8]=C*h-g*u,a[9]=P*h-y*u,a[10]=R*h-_*u,a[11]=D*h-S*u,a}function ze(a,r,o){var u=Math.sin(o),h=Math.cos(o),g=r[0],y=r[1],_=r[2],S=r[3],C=r[8],P=r[9],R=r[10],D=r[11];return r!==a&&(a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[0]=g*h-C*u,a[1]=y*h-P*u,a[2]=_*h-R*u,a[3]=S*h-D*u,a[8]=g*u+C*h,a[9]=y*u+P*h,a[10]=_*u+R*h,a[11]=S*u+D*h,a}function _t(a,r,o){var u=Math.sin(o),h=Math.cos(o),g=r[0],y=r[1],_=r[2],S=r[3],C=r[4],P=r[5],R=r[6],D=r[7];return r!==a&&(a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[0]=g*h+C*u,a[1]=y*h+P*u,a[2]=_*h+R*u,a[3]=S*h+D*u,a[4]=C*h-g*u,a[5]=P*h-y*u,a[6]=R*h-_*u,a[7]=D*h-S*u,a}function Me(a,r){return a[0]=r[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function he(a,r,o){var u,h,g,y=o[0],_=o[1],S=o[2],C=Math.hypot(y,_,S);return C<T?null:(y*=C=1/C,_*=C,S*=C,u=Math.sin(r),h=Math.cos(r),a[0]=y*y*(g=1-h)+h,a[1]=_*y*g+S*u,a[2]=S*y*g-_*u,a[3]=0,a[4]=y*_*g-S*u,a[5]=_*_*g+h,a[6]=S*_*g+y*u,a[7]=0,a[8]=y*S*g+_*u,a[9]=_*S*g-y*u,a[10]=S*S*g+h,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function Ce(a,r){var o=r[0],u=r[1],h=r[2],g=r[3],y=o+o,_=u+u,S=h+h,C=o*y,P=u*y,R=u*_,D=h*y,B=h*_,$=h*S,q=g*y,W=g*_,J=g*S;return a[0]=1-R-$,a[1]=P+J,a[2]=D-W,a[3]=0,a[4]=P-J,a[5]=1-C-$,a[6]=B+q,a[7]=0,a[8]=D+W,a[9]=B-q,a[10]=1-C-R,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}Math.hypot||(Math.hypot=function(){for(var a=0,r=arguments.length;r--;)a+=arguments[r]*arguments[r];return Math.sqrt(a)});var $e=me;function Je(){var a=new E(3);return E!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function ft(a){var r=new E(3);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r}function ut(a){return Math.hypot(a[0],a[1],a[2])}function Qe(a,r,o){var u=new E(3);return u[0]=a,u[1]=r,u[2]=o,u}function Qt(a,r,o){return a[0]=r[0]+o[0],a[1]=r[1]+o[1],a[2]=r[2]+o[2],a}function kt(a,r,o){return a[0]=r[0]-o[0],a[1]=r[1]-o[1],a[2]=r[2]-o[2],a}function wt(a,r,o){return a[0]=r[0]*o[0],a[1]=r[1]*o[1],a[2]=r[2]*o[2],a}function Et(a,r,o){return a[0]=Math.min(r[0],o[0]),a[1]=Math.min(r[1],o[1]),a[2]=Math.min(r[2],o[2]),a}function on(a,r,o){return a[0]=Math.max(r[0],o[0]),a[1]=Math.max(r[1],o[1]),a[2]=Math.max(r[2],o[2]),a}function In(a,r,o){return a[0]=r[0]*o,a[1]=r[1]*o,a[2]=r[2]*o,a}function ir(a,r,o,u){return a[0]=r[0]+o[0]*u,a[1]=r[1]+o[1]*u,a[2]=r[2]+o[2]*u,a}function Or(a,r){var o=r[0]-a[0],u=r[1]-a[1],h=r[2]-a[2];return o*o+u*u+h*h}function oo(a){var r=a[0],o=a[1],u=a[2];return r*r+o*o+u*u}function Un(a,r){return a[0]=-r[0],a[1]=-r[1],a[2]=-r[2],a}function pn(a,r){var o=r[0],u=r[1],h=r[2],g=o*o+u*u+h*h;return g>0&&(g=1/Math.sqrt(g)),a[0]=r[0]*g,a[1]=r[1]*g,a[2]=r[2]*g,a}function kn(a,r){return a[0]*r[0]+a[1]*r[1]+a[2]*r[2]}function $t(a,r,o){var u=r[0],h=r[1],g=r[2],y=o[0],_=o[1],S=o[2];return a[0]=h*S-g*_,a[1]=g*y-u*S,a[2]=u*_-h*y,a}function Ln(a,r,o,u){var h=r[0],g=r[1],y=r[2];return a[0]=h+u*(o[0]-h),a[1]=g+u*(o[1]-g),a[2]=y+u*(o[2]-y),a}function cn(a,r,o){var u=r[0],h=r[1],g=r[2],y=o[3]*u+o[7]*h+o[11]*g+o[15];return a[0]=(o[0]*u+o[4]*h+o[8]*g+o[12])/(y=y||1),a[1]=(o[1]*u+o[5]*h+o[9]*g+o[13])/y,a[2]=(o[2]*u+o[6]*h+o[10]*g+o[14])/y,a}function Yn(a,r,o){var u=r[0],h=r[1],g=r[2];return a[0]=u*o[0]+h*o[3]+g*o[6],a[1]=u*o[1]+h*o[4]+g*o[7],a[2]=u*o[2]+h*o[5]+g*o[8],a}function ei(a,r,o){var u=o[0],h=o[1],g=o[2],y=r[0],_=r[1],S=r[2],C=h*S-g*_,P=g*y-u*S,R=u*_-h*y,D=h*R-g*P,B=g*C-u*R,$=u*P-h*C,q=2*o[3];return P*=q,R*=q,B*=2,$*=2,a[0]=y+(C*=q)+(D*=2),a[1]=_+P+B,a[2]=S+R+$,a}function He(a,r){return a[0]===r[0]&&a[1]===r[1]&&a[2]===r[2]}var qe=kt,xt=wt,Xt=ut;function Kt(){var a=new E(4);return E!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0),a}function Jt(a,r,o){return a[0]=r[0]*o,a[1]=r[1]*o,a[2]=r[2]*o,a[3]=r[3]*o,a}function On(a,r){var o=r[0],u=r[1],h=r[2],g=r[3],y=o*o+u*u+h*h+g*g;return y>0&&(y=1/Math.sqrt(y)),a[0]=o*y,a[1]=u*y,a[2]=h*y,a[3]=g*y,a}function _n(a,r,o){var u=r[0],h=r[1],g=r[2],y=r[3];return a[0]=o[0]*u+o[4]*h+o[8]*g+o[12]*y,a[1]=o[1]*u+o[5]*h+o[9]*g+o[13]*y,a[2]=o[2]*u+o[6]*h+o[10]*g+o[14]*y,a[3]=o[3]*u+o[7]*h+o[11]*g+o[15]*y,a}function xn(){var a=new E(4);return E!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function gn(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function cr(a,r,o){o*=.5;var u=r[0],h=r[1],g=r[2],y=r[3],_=Math.sin(o),S=Math.cos(o);return a[0]=u*S+y*_,a[1]=h*S+g*_,a[2]=g*S-h*_,a[3]=y*S-u*_,a}function zn(a,r,o){o*=.5;var u=r[0],h=r[1],g=r[2],y=r[3],_=Math.sin(o),S=Math.cos(o);return a[0]=u*S-g*_,a[1]=h*S+y*_,a[2]=g*S+u*_,a[3]=y*S-h*_,a}Je(),Kt();var Hn,yr,Gr,Wr,_i,so=On,fo=(Hn=Je(),yr=Qe(1,0,0),Gr=Qe(0,1,0),function(a,r,o){var u=kn(r,o);return u<-.999999?($t(Hn,yr,r),Xt(Hn)<1e-6&&$t(Hn,Gr,r),pn(Hn,Hn),function(h,g,y){y*=.5;var _=Math.sin(y);h[0]=_*g[0],h[1]=_*g[1],h[2]=_*g[2],h[3]=Math.cos(y)}(a,Hn,Math.PI),a):u>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):($t(Hn,r,o),a[0]=Hn[0],a[1]=Hn[1],a[2]=Hn[2],a[3]=1+u,so(a,a))});function Ui(){var a=new E(2);return E!=Float32Array&&(a[0]=0,a[1]=0),a}function ao(a,r){var o=new E(2);return o[0]=a,o[1]=r,o}function ws(a,r,o){return a[0]=r[0]+o[0],a[1]=r[1]+o[1],a}function Ys(a,r,o){return a[0]=r[0]-o[0],a[1]=r[1]-o[1],a}function mo(a,r,o){return a[0]=r[0]*o,a[1]=r[1]*o,a}function ko(a){return Math.hypot(a[0],a[1])}function Ma(a,r){var o=r[0],u=r[1],h=o*o+u*u;return h>0&&(h=1/Math.sqrt(h)),a[0]=r[0]*h,a[1]=r[1]*h,a}function xi(a,r){return a[0]*r[0]+a[1]*r[1]}function cl(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}xn(),xn(),z(),Ui();var Nc,ls,zf=function(){if(_i)return Wr;function a(r,o,u,h){this.cx=3*r,this.bx=3*(u-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(h-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=o,this.p2x=u,this.p2y=h}return _i=1,Wr=a,a.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,o){if(o===void 0&&(o=1e-6),r<0)return 0;if(r>1)return 1;for(var u=r,h=0;h<8;h++){var g=this.sampleCurveX(u)-r;if(Math.abs(g)<o)return u;var y=this.sampleCurveDerivativeX(u);if(Math.abs(y)<1e-6)break;u-=g/y}var _=0,S=1;for(u=r,h=0;h<20&&(g=this.sampleCurveX(u),!(Math.abs(g-r)<o));h++)r>g?_=u:S=u,u=.5*(S-_)+_;return u},solve:function(r,o){return this.sampleCurveY(this.solveCurveX(r,o))}},Wr}(),Dh=cl(zf);function Yl(){if(ls)return Nc;function a(r,o){this.x=r,this.y=o}return ls=1,Nc=a,a.prototype={clone:function(){return new a(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,o){return this.clone()._rotateAround(r,o)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var o=r.x-this.x,u=r.y-this.y;return o*o+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,o){return Math.atan2(this.x*o-this.y*r,this.x*r+this.y*o)},_matMult:function(r){var o=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=o,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var o=Math.cos(r),u=Math.sin(r),h=u*this.x+o*this.y;return this.x=o*this.x-u*this.y,this.y=h,this},_rotateAround:function(r,o){var u=Math.cos(r),h=Math.sin(r),g=o.y+h*(this.x-o.x)+u*(this.y-o.y);return this.x=o.x+u*(this.x-o.x)-h*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(r){return r instanceof a?r:Array.isArray(r)?new a(r[0],r[1]):r},Nc}var Vt=cl(Yl());function Da(a,r){if(Array.isArray(a)){if(!Array.isArray(r)||a.length!==r.length)return!1;for(let o=0;o<a.length;o++)if(!Da(a[o],r[o]))return!1;return!0}if(typeof a=="object"&&a!==null&&r!==null){if(typeof r!="object"||Object.keys(a).length!==Object.keys(r).length)return!1;for(const o in a)if(!Da(a[o],r[o]))return!1;return!0}return a===r}const Bf=Math.PI/180,nd=180/Math.PI;function Cr(a){return a*Bf}function rt(a){return a*nd}const Q=[[0,0],[1,0],[1,1],[0,1]];function le(a){if(a<=0)return 0;if(a>=1)return 1;const r=a*a,o=r*a;return 4*(a<.5?o:3*(a-r)+o-.75)}function xe(a,r,o,u){const h=new Dh(a,r,o,u);return function(g){return h.solve(g)}}const Le=xe(.25,.1,.25,1);function Te(a,r,o){return Math.min(o,Math.max(r,a))}function Ne(a,r,o){return(o=Te((o-a)/(r-a),0,1))*o*(3-2*o)}function et(a,r,o){const u=o-r,h=((a-r)%u+u)%u+r;return h===r?o:h}function Ve(a,r,o){if(!a.length)return o(null,[]);let u=a.length;const h=new Array(a.length);let g=null;a.forEach((y,_)=>{r(y,(S,C)=>{S&&(g=S),h[_]=C,--u==0&&o(g,h)})})}function tt(a,...r){for(const o of r)for(const u in o)a[u]=o[u];return a}let vt=1;function it(){return vt++}function Nt(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function dn(a,r){a.forEach(o=>{r[o]&&(r[o]=r[o].bind(r))})}function fn(a,r,o){const u={};for(const h in a)u[h]=r.call(this,a[h],h,a);return u}function Fn(a,r,o){const u={};for(const h in a)r.call(this,a[h],h,a)&&(u[h]=a[h]);return u}function Nn(a){return Array.isArray(a)?a.map(Nn):typeof a=="object"&&a?fn(a,Nn):a}function qn(a,r){for(let o=0;o<a.length;o++)if(r.indexOf(a[o])>=0)return!0;return!1}const lr={};function Zn(a){lr[a]||(typeof console<"u"&&console.warn(a),lr[a]=!0)}function Yr(a,r,o){return(o.y-a.y)*(r.x-a.x)>(r.y-a.y)*(o.x-a.x)}function mi(a){let r=0;for(let o,u,h=0,g=a.length,y=g-1;h<g;y=h++)o=a[h],u=a[y],r+=(u.x-o.x)*(o.y+u.y);return r}function gi([a,r,o]){const u=Cr(r+90),h=Cr(o);return{x:a*Math.cos(u)*Math.sin(h),y:a*Math.sin(u)*Math.sin(h),z:a*Math.cos(h),azimuthal:r,polar:o}}function zr(a){return(typeof self<"u"||a!==void 0)&&typeof WorkerGlobalScope<"u"&&(a!==void 0?a:self)instanceof WorkerGlobalScope}function Tr(a){const r={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,u,h,g)=>{const y=h||g;return r[u]=!y||y.toLowerCase(),""}),r["max-age"]){const o=parseInt(r["max-age"],10);isNaN(o)?delete r["max-age"]:r["max-age"]=o}return r}let Ni=null;function Ri(a,r){return[a[4*r],a[4*r+1],a[4*r+2],a[4*r+3]]}function Ti(a,r,o,u){for(;r<o;){const h=r+o>>1;a[h]<u?r=h+1:o=h}return r}function _o(a,r,o,u){for(;r<o;){const h=r+o>>1;a[h]<=u?r=h+1:o=h}return r}function rs(a){return a>0?1/(1.001-a):1+a}function Vo(a){return a>0?1-1/(1.001-a):-a}function rd(a,r,o){return(a-r.min)*(o.max-o.min)/(r.max-r.min)+o.min}const To={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!To.API_URL)return null;try{const a=new URL(To.API_URL);return a.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":a.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",BUILDING_GEN_URL:"https://api.mapbox.com/mapbox-gl-js/building-gen/building_gen_v0.3.0.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function ul(a){return To.API_URL_REGEX.test(a)}function Lh(a){return To.API_SPRITE_REGEX.test(a)}let id,od,Oh,zh,Jl,sd;function Bh(){return id==null&&(id=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),id}const Js={now:()=>zh!==void 0?zh:performance.now(),setNow(a){zh=a},restoreNow(){zh=void 0},frame(a){const r=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(a,r=0){const{width:o,height:u}=a;Jl||(Jl=document.createElement("canvas"));const h=Jl.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return(o>Jl.width||u>Jl.height)&&(Jl.width=o,Jl.height=u),h.clearRect(-r,-r,o+2*r,u+2*r),h.drawImage(a,0,0,o,u),h.getImageData(-r,-r,o+2*r,u+2*r)},resolveURL:a=>(od||(od=document.createElement("a")),od.href=a,od.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Oh==null&&(Oh=window.matchMedia("(prefers-reduced-motion: reduce)")),Oh.matches)},hasCanvasFingerprintNoise(){if(sd!==void 0)return sd;if(!Bh())return sd=!1,!1;const a=new OffscreenCanvas(85,1),r=a.getContext("2d",{willReadFrequently:!0});let o=0;for(let h=0;h<a.width;++h)r.fillStyle=`rgba(${o++},${o++},${o++}, 255)`,r.fillRect(h,0,1,1);const u=r.getImageData(0,0,a.width,a.height);o=0;for(let h=0;h<u.data.length;++h)if(h%4!=3&&o++!==u.data[h])return sd=!0,!0;return sd=!1,!1}};function Ss(a,r){const o=a.indexOf("?");if(o<0)return`${a}?${new URLSearchParams(r).toString()}`;const u=new URLSearchParams(a.slice(o));for(const h in r)u.set(h,r[h]);return`${a.slice(0,o)}?${u.toString()}`}function Bs(a,r={persistentParams:[]}){const o=a.indexOf("?");if(o<0)return a;const u=new URLSearchParams,h=new URLSearchParams(a.slice(o));for(const y of r.persistentParams){const _=h.get(y);_&&u.set(y,_)}const g=u.toString();return`${a.slice(0,o)}${g.length>0?`?${g}`:""}`}const La="mapbox-tiles";let Qs=500,Oa=50;const ad=["language","worldview","jobid"];let pa,ld;function Ql(){try{return caches}catch{}}function Vc(){const a=Ql();a&&pa==null&&(pa=a.open(La))}let Ff=1/0;const $f={supported:!1,testSupport:function(a){!cd&&ec&&(jc?p0(a):is=a)}};let is,ec,cd=!1,jc=!1;const h0=typeof self<"u"?self:{};function p0(a){const r=a.createTexture();a.bindTexture(a.TEXTURE_2D,r);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,ec),a.isContextLost())return;$f.supported=!0}catch{}a.deleteTexture(r),cd=!0}h0.document&&(ec=h0.document.createElement("img"),ec.onload=function(){is&&p0(is),is=null,jc=!0},ec.onerror=function(){cd=!0,is=null},ec.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ud={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(ud);class wr extends Error{constructor(r,o,u){o===401&&ul(u)&&(r+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(r),this.status=o,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Fh=zr()?()=>self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Uc=function(a,r){if(!(/^file:/.test(o=a.url)||/^file:/.test(Fh())&&!/^\w+:/.test(o))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(u,h){const g=new AbortController,y=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:Fh(),referrerPolicy:u.referrerPolicy,signal:g.signal});let _=!1,S=!1;const C=(P=y.url).indexOf("sku=")>0&&ul(P);var P;u.type==="json"&&y.headers.set("Accept","application/json");const R=(B,$,q)=>{if(S)return;if(B&&B.message!=="SecurityError"&&Zn(B.toString()),$&&q)return D($);const W=Date.now();fetch(y).then(J=>{if(J.ok){const ce=C?J.clone():null;return D(J,ce,W)}return h(new wr(J.statusText,J.status,u.url))}).catch(J=>{J.name!=="AbortError"&&h(new Error(`${J.message} ${u.url}`))})},D=(B,$,q)=>{(u.type==="arrayBuffer"?B.arrayBuffer():u.type==="json"?B.json():B.text()).then(W=>{S||($&&q&&function(J,ce,ue){if(Vc(),pa==null)return;const H=Tr(ce.headers.get("Cache-Control")||"");if(H["no-store"])return;const se={status:ce.status,statusText:ce.statusText,headers:new Headers};ce.headers.forEach((Oe,Re)=>se.headers.set(Re,Oe)),H["max-age"]&&se.headers.set("Expires",new Date(ue+1e3*H["max-age"]).toUTCString());const de=se.headers.get("Expires");if(!de||new Date(de).getTime()-ue<42e4)return;let be=Bs(J.url,{persistentParams:ad});if(ce.status===206){const Oe=J.headers.get("Range");if(!Oe)return;se.status=200,be=Ss(be,{range:Oe})}(function(Oe,Re){if(ld===void 0)try{new Response(new ReadableStream),ld=!0}catch{ld=!1}ld?Re(Oe.body):Oe.blob().then(Re).catch(Be=>Zn(Be.message))})(ce,Oe=>{const Re=new Response((Be=ce.status)!==200&&Be!==404&&[101,103,204,205,304].includes(Be)?null:Oe,se);var Be;Vc(),pa!=null&&pa.then(je=>je.put(be,Re)).catch(je=>Zn(je.message))})}(y,$,q),_=!0,h(null,W,B.headers.get("Cache-Control"),B.headers.get("Expires")))}).catch(W=>{S||h(new Error(W.message))})};return C?function(B,$){if(Vc(),pa==null)return $(null);pa.then(q=>{let W=Bs(B.url,{persistentParams:ad});const J=B.headers.get("Range");J&&(W=Ss(W,{range:J})),q.match(W).then(ce=>{const ue=function(H){if(!H)return!1;const se=new Date(H.headers.get("Expires")||0),de=Tr(H.headers.get("Cache-Control")||"");return Number(se)>Date.now()&&!de["no-cache"]}(ce);q.delete(W).catch($),ue&&q.put(W,ce.clone()).catch($),$(null,ce,ue)}).catch($)}).catch($)}(y,R):R(null,null),{cancel:()=>{S=!0,_||g.abort()}}}(a,r);if(zr(self)&&self.worker.actor)return self.worker.actor.send("getResource",a,r,void 0,!0)}var o;return function(u,h){const g=new XMLHttpRequest;g.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const y in u.headers)g.setRequestHeader(y,u.headers[y]);return u.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=u.credentials==="include",g.onerror=()=>{h(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let y=g.response;if(u.type==="json")try{y=JSON.parse(g.response)}catch(_){return h(_)}h(null,y,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else h(new wr(g.statusText,g.status,u.url))},g.send(u.body),{cancel:()=>g.abort()}}(a,r)},dd=function(a,r){return Uc(tt(a,{type:"arrayBuffer"}),r)};function e1(a){const r=document.createElement("a");return r.href=a,r.protocol===location.protocol&&r.host===location.host}const hd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let tc,dl;tc=[],dl=0;const Nf=function(a,r){if($f.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),dl>=To.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:a,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return tc.push(g),g}dl++;let o=!1;const u=()=>{if(!o)for(o=!0,dl--;tc.length&&dl<To.MAX_PARALLEL_IMAGE_REQUESTS;){const g=tc.shift(),{requestParameters:y,callback:_,cancelled:S}=g;S||(g.cancel=Nf(y,_).cancel)}},h=dd(a,(g,y,_,S)=>{u(),g?r(g):y&&(self.createImageBitmap?function(C,P){const R=new Blob([new Uint8Array(C)],{type:"image/png"});createImageBitmap(R).then(D=>{P(null,D)}).catch(D=>{P(new Error(`Could not load image because of ${D.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(C,P)=>r(C,P,_,S)):function(C,P){const R=new Image;R.onload=()=>{P(null,R),URL.revokeObjectURL(R.src),R.onload=null,requestAnimationFrame(()=>{R.src=hd})},R.onerror=()=>P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const D=new Blob([new Uint8Array(C)],{type:"image/png"});R.src=C.byteLength?URL.createObjectURL(D):hd}(y,(C,P)=>r(C,P,_,S)))});return{cancel:()=>{h.cancel(),u()}}};var Vf,nc,f0,za={exports:{}},$h={exports:{}},Nh={exports:{}},ea=function(){if(f0)return za.exports;f0=1;var a=(Vf||(Vf=1,$h.exports=function(o,u){var h,g,y,_,S,C,P,R;for(g=o.length-(h=3&o.length),y=u,S=3432918353,C=461845907,R=0;R<g;)P=255&o.charCodeAt(R)|(255&o.charCodeAt(++R))<<8|(255&o.charCodeAt(++R))<<16|(255&o.charCodeAt(++R))<<24,++R,y=27492+(65535&(_=5*(65535&(y=(y^=P=(65535&(P=(P=(65535&P)*S+(((P>>>16)*S&65535)<<16)&4294967295)<<15|P>>>17))*C+(((P>>>16)*C&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(P=0,h){case 3:P^=(255&o.charCodeAt(R+2))<<16;case 2:P^=(255&o.charCodeAt(R+1))<<8;case 1:y^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt(R)))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<15|P>>>17))*C+(((P>>>16)*C&65535)<<16)&4294967295}return y^=o.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}),$h.exports),r=(nc||(nc=1,Nh.exports=function(o,u){for(var h,g=o.length,y=u^g,_=0;g>=4;)h=1540483477*(65535&(h=255&o.charCodeAt(_)|(255&o.charCodeAt(++_))<<8|(255&o.charCodeAt(++_))<<16|(255&o.charCodeAt(++_))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),g-=4,++_;switch(g){case 3:y^=(255&o.charCodeAt(_+2))<<16;case 2:y^=(255&o.charCodeAt(_+1))<<8;case 1:y=1540483477*(65535&(y^=255&o.charCodeAt(_)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}),Nh.exports);return za.exports=a,za.exports.murmur3=a,za.exports.murmur2=r,za.exports}(),pd=cl(ea);class rc{constructor(r,...o){tt(this,o[0]||{}),this.type=r}}class Vh extends rc{constructor(r,o={}){super("error",tt({error:r},o))}}function jf(a,r,o){o[a]&&o[a].indexOf(r)!==-1||(o[a]=o[a]||[],o[a].push(r))}function jh(a,r,o){if(o&&o[a]){const u=o[a].indexOf(r);u!==-1&&o[a].splice(u,1)}}class ic{on(r,o){return this._listeners=this._listeners||{},jf(r,o,this._listeners),this}off(r,o){return jh(r,o,this._listeners),jh(r,o,this._oneTimeListeners),this}once(r,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},jf(r,o,this._oneTimeListeners),this):new Promise(u=>{this.once(r,u)})}fire(r,o){const u=typeof r=="string"?new rc(r,o):r,h=u.type;if(this.listens(h)){u.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of g)S.call(this,u);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of y)jh(h,S,this._oneTimeListeners),S.call(this,u);const _=this._eventedParent;_&&(tt(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(u))}else u instanceof Vh&&console.error(u.error);return this}listens(r){return!!(this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r))}setEventedParent(r,o){return this._eventedParent=r,this._eventedParentData=o,this}}class cs{constructor(r){typeof r=="string"?this.name=r:(this.name=r.name,this.iconsetId=r.iconsetId)}static from(r){return new cs(r)}static toString(r){return r.iconsetId?`${r.name}${r.iconsetId}`:r.name}static parse(r){const[o,u]=r.split("");return new cs({name:o,iconsetId:u})}static isEqual(r,o){return r.name===o.name&&r.iconsetId===o.iconsetId}toString(){return cs.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var Uf,qc={},oc=function(){if(Uf)return qc;Uf=1;var a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(g){return(g=Math.round(g))<0?0:g>255?255:g}function o(g){return r(g[g.length-1]==="%"?parseFloat(g)/100*255:parseInt(g))}function u(g){return(y=g[g.length-1]==="%"?parseFloat(g)/100:parseFloat(g))<0?0:y>1?1:y;var y}function h(g,y,_){return _<0?_+=1:_>1&&(_-=1),6*_<1?g+(y-g)*_*6:2*_<1?y:3*_<2?g+(y-g)*(2/3-_)*6:g}try{qc.parseCSSColor=function(g){var y,_=g.replace(/ /g,"").toLowerCase();if(_ in a)return a[_].slice();if(_[0]==="#")return _.length===4?(y=parseInt(_.substr(1),16))>=0&&y<=4095?[(3840&y)>>4|(3840&y)>>8,240&y|(240&y)>>4,15&y|(15&y)<<4,1]:null:_.length===7&&(y=parseInt(_.substr(1),16))>=0&&y<=16777215?[(16711680&y)>>16,(65280&y)>>8,255&y,1]:null;var S=_.indexOf("("),C=_.indexOf(")");if(S!==-1&&C+1===_.length){var P=_.substr(0,S),R=_.substr(S+1,C-(S+1)).split(","),D=1;switch(P){case"rgba":if(R.length!==4)return null;D=u(R.pop());case"rgb":return R.length!==3?null:[o(R[0]),o(R[1]),o(R[2]),D];case"hsla":if(R.length!==4)return null;D=u(R.pop());case"hsl":if(R.length!==3)return null;var B=(parseFloat(R[0])%360+360)%360/360,$=u(R[1]),q=u(R[2]),W=q<=.5?q*($+1):q+$-q*$,J=2*q-W;return[r(255*h(J,W,B+1/3)),r(255*h(J,W,B)),r(255*h(J,W,B-1/3)),D];default:return null}}return null}}catch{}return qc}();class Ar{constructor(r,o,u,h=1){this.r=r,this.g=o,this.b=u,this.a=h}static parse(r){if(!r)return;if(r instanceof Ar)return r;if(typeof r!="string")return;const o=oc.parseCSSColor(r);return o?new Ar(o[0]/255,o[1]/255,o[2]/255,o[3]):void 0}toString(){const[r,o,u,h]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*r)},${Math.round(255*o)},${Math.round(255*u)},${h})`}toNonPremultipliedRenderColor(r){const{r:o,g:u,b:h,a:g}=this;return new t1(r,o,u,h,g)}toPremultipliedRenderColor(r){const{r:o,g:u,b:h,a:g}=this;return new qf(r,o*g,u*g,h*g,g)}clone(){return new Ar(this.r,this.g,this.b,this.a)}}class ta{constructor(r,o,u,h,g,y=!1){if(this.premultiplied=!1,this.premultiplied=y,r){const _=r.image.height,S=_*_;this.premultiplied?(o=g===0?0:o/g*(_-1),u=g===0?0:u/g*(_-1),h=g===0?0:h/g*(_-1)):(o*=_-1,u*=_-1,h*=_-1);const C=Math.floor(o),P=Math.floor(u),R=Math.floor(h),D=Math.ceil(o),B=Math.ceil(u),$=Math.ceil(h),q=o-C,W=u-P,J=h-R,ce=r.image.data,ue=4*(C+P*S+R*_),H=4*(C+P*S+$*_),se=4*(C+B*S+R*_),de=4*(C+B*S+$*_),be=4*(D+P*S+R*_),Oe=4*(D+P*S+$*_),Re=4*(D+B*S+R*_),Be=4*(D+B*S+$*_);if(ue<0||Be>=ce.length)throw new Error("out of range");this.r=Mn(Mn(Mn(ce[ue],ce[H],J),Mn(ce[se],ce[de],J),W),Mn(Mn(ce[be],ce[Oe],J),Mn(ce[Re],ce[Be],J),W),q)/255*(this.premultiplied?g:1),this.g=Mn(Mn(Mn(ce[ue+1],ce[H+1],J),Mn(ce[se+1],ce[de+1],J),W),Mn(Mn(ce[be+1],ce[Oe+1],J),Mn(ce[Re+1],ce[Be+1],J),W),q)/255*(this.premultiplied?g:1),this.b=Mn(Mn(Mn(ce[ue+2],ce[H+2],J),Mn(ce[se+2],ce[de+2],J),W),Mn(Mn(ce[be+2],ce[Oe+2],J),Mn(ce[Re+2],ce[Be+2],J),W),q)/255*(this.premultiplied?g:1),this.a=g}else this.r=o,this.g=u,this.b=h,this.a=g}toArray(){const{r,g:o,b:u,a:h}=this;return[255*r,255*o,255*u,h]}toHslaArray(){let{r,g:o,b:u,a:h}=this;if(this.premultiplied){if(h===0)return[0,0,0,0];r/=h,o/=h,u/=h}const g=Math.min(Math.max(r,0),1),y=Math.min(Math.max(o,0),1),_=Math.min(Math.max(u,0),1),S=Math.min(g,y,_),C=Math.max(g,y,_),P=(S+C)/2;if(S===C)return[0,0,100*P,h];const R=C-S,D=P>.5?R/(2-C-S):R/(C+S);let B=0;return C===g?B=(y-_)/R+(y<_?6:0):C===y?B=(_-g)/R+2:C===_&&(B=(g-y)/R+4),B*=60,[Math.min(Math.max(B,0),360),Math.min(Math.max(100*D,0),100),Math.min(Math.max(100*P,0),100),h]}toArray01(){const{r,g:o,b:u,a:h}=this;return[r,o,u,h]}toArray01Scaled(r){const{r:o,g:u,b:h}=this;return[o*r,u*r,h*r]}toArray01Linear(){const{r,g:o,b:u,a:h}=this;return[Math.pow(r,2.2),Math.pow(o,2.2),Math.pow(u,2.2),h]}}class t1 extends ta{constructor(r,o,u,h,g){super(r,o,u,h,g,!1)}}class qf extends ta{constructor(r,o,u,h,g){super(r,o,u,h,g,!0)}}function Mn(a,r,o){return a*(1-o)+r*o}function Uh(a,r,o){return a.map((u,h)=>Mn(u,r[h],o))}Ar.black=new Ar(0,0,0,1),Ar.white=new Ar(1,1,1,1),Ar.transparent=new Ar(0,0,0,0),Ar.red=new Ar(1,0,0,1),Ar.blue=new Ar(0,0,1,1);var fd=Object.freeze({__proto__:null,array:Uh,color:function(a,r,o){return new Ar(Mn(a.r,r.r,o),Mn(a.g,r.g,o),Mn(a.b,r.b,o),Mn(a.a,r.a,o))},number:Mn});function sc(a,...r){for(const o of r)for(const u in o)a[u]=o[u];return a}class Cs extends Error{constructor(r,o){super(o),this.message=o,this.key=r}}class Hf{constructor(r,o=[]){this.parent=r,this.bindings={};for(const[u,h]of o)this.bindings[u]=h}concat(r){return new Hf(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Hc={kind:"null"},yn={kind:"number"},$r={kind:"string"},Ir={kind:"boolean"},us={kind:"color"},Ba={kind:"object"},Rr={kind:"value"},qh={kind:"collator"},md={kind:"formatted"},gd={kind:"resolvedImage"};function Ko(a,r){return{kind:"array",itemType:a,N:r}}function to(a){if(a.kind==="array"){const r=to(a.itemType);return typeof a.N=="number"?`array<${r}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${r}>`}return a.kind}const n1=[Hc,yn,$r,Ir,us,md,Ba,Ko(Rr),gd];function Gc(a,r){if(r.kind==="error")return null;if(a.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Gc(a.itemType,r.itemType))&&(typeof a.N!="number"||a.N===r.N))return null}else{if(a.kind===r.kind)return null;if(a.kind==="value"){for(const o of n1)if(!Gc(o,r))return null}}return`Expected ${to(a)} but found ${to(r)} instead.`}function hl(a,r){return r.some(o=>o.kind===a.kind)}function yd(a,r){return r.some(o=>o==="null"?a===null:o==="array"?Array.isArray(a):o==="object"?a&&!Array.isArray(a)&&typeof a=="object":o===typeof a)}function Hh(a,r){return a.kind==="array"&&r.kind==="array"?a.N===r.N&&Hh(a.itemType,r.itemType):a.kind===r.kind}class vd{constructor(r,o,u){this.sensitivity=r?o?"variant":"case":o?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,o){return this.collator.compare(r,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Gh{constructor(r,o,u,h,g){this.text=r.normalize?r.normalize():r,this.image=o,this.scale=u,this.fontStack=h,this.textColor=g}}class Zo{constructor(r){this.sections=r}static fromString(r){return new Zo([new Gh(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||!!r.image&&r.image.hasPrimary())}static factory(r){return r instanceof Zo?r:Zo.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}serialize(){const r=["format"];for(const o of this.sections){if(o.image){const h=o.image.getPrimary().id.toString();r.push(["image",h]);continue}r.push(o.text);const u={};o.fontStack&&(u["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(u["font-scale"]=o.scale),o.textColor&&(u["text-color"]=["rgba"].concat(o.textColor.toNonPremultipliedRenderColor(null).toArray())),r.push(u)}return r}}class Fa{constructor(r,o={}){if(this.id=cs.from(r),this.options=Object.assign({},o),o.transform){const{a:u,b:h,c:g,d:y,e:_,f:S}=o.transform;this.options.transform=new DOMMatrix([u,h,g,y,_,S])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:r,b:o,c:u,d:h,e:g,f:y}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:r,b:o,c:u,d:h,e:g,f:y}})}static parse(r){let o,u,h,g;try{({name:o,iconsetId:u,params:h,transform:g}=JSON.parse(r)||{})}catch{return null}if(!o)return null;const{a:y,b:_,c:S,d:C,e:P,f:R}=g||{};return new Fa({name:o,iconsetId:u},{params:h,transform:new DOMMatrix([y,_,S,C,P,R])})}scaleSelf(r,o){return this.options.transform.scaleSelf(r,o),this}}class os{constructor(r,o,u,h,g=!1){this.primaryId=cs.from(r),this.primaryOptions=o,u&&(this.secondaryId=cs.from(u)),this.secondaryOptions=h,this.available=g}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new Fa(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new Fa(this.secondaryId,this.secondaryOptions):null}static from(r){return typeof r=="string"?os.build({name:r}):r}static build(r,o,u,h){return!r||typeof r=="object"&&!("name"in r)?null:new os(r,u,o,h)}}function ac(a,r,o,u){return typeof a=="number"&&a>=0&&a<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof o=="number"&&o>=0&&o<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[a,r,o,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[a,r,o,u]:[a,r,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function or(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Ar||a instanceof vd||a instanceof Zo||a instanceof os)return!0;if(Array.isArray(a)){for(const r of a)if(!or(r))return!1;return!0}if(typeof a=="object"){for(const r in a)if(!or(a[r]))return!1;return!0}return!1}function en(a){if(a===null)return Hc;if(typeof a=="string")return $r;if(typeof a=="boolean")return Ir;if(typeof a=="number")return yn;if(a instanceof Ar)return us;if(a instanceof vd)return qh;if(a instanceof Zo)return md;if(a instanceof os)return gd;if(Array.isArray(a)){const r=a.length;let o;for(const u of a){const h=en(u);if(o){if(o===h)continue;o=Rr;break}o=h}return Ko(o||Rr,r)}return Ba}function Fs(a){const r=typeof a;return a===null?"":r==="string"||r==="number"||r==="boolean"?String(a):a instanceof Zo||a instanceof os||a instanceof Ar?a.toString():JSON.stringify(a)}class $n{constructor(r,o){this.type=r,this.value=o}static parse(r,o){if(r.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!or(r[1]))return o.error("invalid value");const u=r[1];let h=en(u);const g=o.expectedType;return h.kind!=="array"||h.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(h=g),new $n(h,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ar?["rgba"].concat(this.value.toNonPremultipliedRenderColor(null).toArray()):this.value instanceof Zo?this.value.serialize():this.value}}class Xi{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const bd={string:$r,number:yn,boolean:Ir,object:Ba};class An{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");let u,h=1;const g=r[0];if(g==="array"){let _,S;if(r.length>2){const C=r[1];if(typeof C!="string"||!(C in bd)||C==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);_=bd[C],h++}else _=Rr;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return o.error('The length argument to "array" must be a positive integer literal',2);S=r[2],h++}u=Ko(_,S)}else u=bd[g];const y=[];for(;h<r.length;h++){const _=o.parse(r[h],h,Rr);if(!_)return null;y.push(_)}return new An(u,y)}evaluate(r){for(let o=0;o<this.args.length;o++){const u=this.args[o].evaluate(r);if(!Gc(this.type,en(u)))return u;if(o===this.args.length-1)throw new Xi(`The expression ${JSON.stringify(this.args[o].serialize())} evaluated to ${to(en(u))} but was expected to be of type ${to(this.type)}.`)}return null}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=this.type,o=[r.kind];if(r.kind==="array"){const u=r.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){o.push(u.kind);const h=r.N;(typeof h=="number"||this.args.length>1)&&o.push(h)}}return o.concat(this.args.map(u=>u.serialize()))}}class Wc{constructor(r){this.type=md,this.sections=r}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const u=r[1];if(!Array.isArray(u)&&typeof u=="object")return o.error("First argument must be an image or text section.");const h=[];let g=!1;for(let y=1;y<=r.length-1;++y){const _=r[y];if(g&&typeof _=="object"&&!Array.isArray(_)){g=!1;let S=null;if(_["font-scale"]&&(S=o.parseObjectValue(_["font-scale"],y,"font-scale",yn),!S))return null;let C=null;if(_["text-font"]&&(C=o.parseObjectValue(_["text-font"],y,"text-font",Ko($r)),!C))return null;let P=null;if(_["text-color"]&&(P=o.parseObjectValue(_["text-color"],y,"text-color",us),!P))return null;const R=h[h.length-1];R.scale=S,R.font=C,R.textColor=P}else{const S=o.parse(r[y],y,Rr);if(!S)return null;const C=S.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,h.push({content:S,scale:null,font:null,textColor:null})}}return new Wc(h)}evaluate(r){return new Zo(this.sections.map(o=>{const u=o.content.evaluate(r);return Hh(en(u),gd)?new Gh("",u,null,null,null):new Gh(Fs(u),null,o.scale?o.scale.evaluate(r):null,o.font?o.font.evaluate(r).join(","):null,o.textColor?o.textColor.evaluate(r):null)}))}eachChild(r){for(const o of this.sections)r(o.content),o.scale&&r(o.scale),o.font&&r(o.font),o.textColor&&r(o.textColor)}outputDefined(){return!1}serialize(){const r=["format"];for(const o of this.sections){r.push(o.content.serialize());const u={};o.scale&&(u["font-scale"]=o.scale.serialize()),o.font&&(u["text-font"]=o.font.serialize()),o.textColor&&(u["text-color"]=o.textColor.serialize()),r.push(u)}return r}}class Kc{constructor(r,o,u,h){this._imageWarnHistory={},this.type=gd,this.namePrimary=r,this.nameSecondary=o,u&&(this.paramsPrimary=u.params,this.iconsetIdPrimary=u.iconset?u.iconset.id:void 0),h&&(this.paramsSecondary=h.params,this.iconsetIdSecondary=h.iconset?h.iconset.id:void 0)}static parse(r,o){if(r.length<2)return o.error("Expected two or more arguments.");let u=1;const h=[];function g(){if(u<r.length){const _=o.parse(r[u],u++,$r);return _?(h.push({image:_,options:{}}),!0):(o.error(h.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function y(){if(u<r.length){const S=r[u];if((_=S)===null||typeof _!="object"||Array.isArray(_))return!0;const C=S.params,P=S.iconset,R=o.concat(u);if(!C&&!P)return u++,!0;if(C){if(typeof C!="object"||C.constructor!==Object)return R.error('Image options "params" should be an object'),!1;const D={},B=R.concat(void 0,"params");for(const $ in C){if(!$)return B.error("Image parameter name should be non-empty"),!1;const q=B.concat(void 0,$).parse(C[$],void 0,us,void 0,{typeAnnotation:"coerce"});if(!q)return!1;D[$]=q}h[h.length-1].options.params=D}if(P){if(typeof P!="object"||P.constructor!==Object)return R.error('Image options "iconset" should be an object'),!1;if(!P.id)return R.error('Image options "iconset" should have an "id" property'),!1;h[h.length-1].options.iconset=P}return u++,!0}var _;return!0}for(let _=0;_<2;_++)if(!g()||!y())return;return new Kc(h[0].image,h[1]?h[1].image:void 0,h[0].options,h[1]?h[1].options:void 0)}evaluateParams(r,o){const u={};if(o){for(const h in o)if(o[h])try{u[h]=o[h].evaluate(r)}catch{continue}if(Object.keys(u).length!==0)return{params:u}}}evaluate(r){const o={name:this.namePrimary.evaluate(r),iconsetId:this.iconsetIdPrimary},u=this.nameSecondary?{name:this.nameSecondary.evaluate(r),iconsetId:this.iconsetIdSecondary}:void 0,h=os.build(o,u,this.paramsPrimary?this.evaluateParams(r,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(r,this.paramsSecondary):void 0);if(h&&r.availableImages){const g=h.getPrimary().id;if(h.available=r.availableImages.some(y=>cs.isEqual(y,g)),h.available){const y=h.getSecondary()?h.getSecondary().id:null;y&&(h.available=r.availableImages.some(_=>cs.isEqual(_,y)))}}return h}eachChild(r){if(r(this.namePrimary),this.paramsPrimary)for(const o in this.paramsPrimary)this.paramsPrimary[o]&&r(this.paramsPrimary[o]);if(this.nameSecondary&&(r(this.nameSecondary),this.paramsSecondary))for(const o in this.paramsSecondary)this.paramsSecondary[o]&&r(this.paramsSecondary[o])}outputDefined(){return!1}serializeOptions(r,o){const u={};if(o&&(u.iconset={id:o}),r){u.params={};for(const h in r)r[h]&&(u.params[h]=r[h].serialize())}return Object.keys(u).length>0?u:void 0}serialize(){const r=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const o=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);o&&r.push(o)}if(this.nameSecondary&&(r.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const o=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);o&&r.push(o)}return r}}function pl(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}const m0={"to-boolean":Ir,"to-color":us,"to-number":yn,"to-string":$r};class $s{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const u=r[0],h=[];let g=Hc;if(u==="to-array"){if(!Array.isArray(r[1]))return null;const y=r[1].length;if(o.expectedType){if(o.expectedType.kind!=="array")return o.error(`Expected ${o.expectedType.kind} but found array.`);g=Ko(o.expectedType.itemType,y)}else{if(!(y>0&&or(r[1][0])))return null;g=Ko(en(r[1][0]),y)}for(let _=0;_<y;_++){const S=r[1][_];let C;if(pl(S)==="array")C=o.parse(S,void 0,g.itemType);else{const P=pl(S);if(P!==g.itemType.kind)return o.error(`Expected ${g.itemType.kind} but found ${P}.`);C=o.registry.literal.parse(["literal",S===void 0?null:S],o)}if(!C)return null;h.push(C)}}else{if((u==="to-boolean"||u==="to-string")&&r.length!==2)return o.error("Expected one argument.");g=m0[u];for(let y=1;y<r.length;y++){const _=o.parse(r[y],y,Rr);if(!_)return null;h.push(_)}}return new $s(g,h)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let o,u;for(const h of this.args){if(o=h.evaluate(r),u=null,o instanceof Ar)return o;if(typeof o=="string"){const g=r.parseColor(o);if(g)return g}else if(Array.isArray(o)&&(u=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:ac(o[0],o[1],o[2],o[3]),!u))return new Ar(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Xi(u||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const u of this.args){if(o=u.evaluate(r),o===null)return 0;const h=Number(o);if(!isNaN(h))return h}throw new Xi(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?Zo.fromString(Fs(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?os.build(Fs(this.args[0].evaluate(r))):this.type.kind==="array"?this.args.map(o=>o.evaluate(r)):Fs(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Wc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Kc(this.args[0]).serialize();const r=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(o=>{r.push(o.serialize())}),r}}const Xo=["Unknown","Point","LineString","Polygon"];class _d{constructor(r,o){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=r,this.options=o}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(r){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const r=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:u,y:h}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*o-r[0])+this.featureDistanceData.bearing[1]*(h*o-r[1])}return 0}parseColor(r){let o=this._parseColorCache[r];return o||(o=this._parseColorCache[r]=Ar.parse(r)),o}getConfig(r){return this.options?this.options.get(r):null}}class xo{constructor(r,o,u,h,g){this.name=r,this.type=o,this._evaluate=u,this.args=h,this._overloadIndex=g}evaluate(r){if(!this._evaluate){const o=xo.definitions[this.name];this._evaluate=Array.isArray(o)?o[2]:o.overloads[this._overloadIndex][1]}return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(r=>r.serialize()))}static parse(r,o){const u=r[0],h=xo.definitions[u];if(!h)return o.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,_=[];let S=null,C=-1;for(const[P,R]of y){if(Array.isArray(P)&&P.length!==r.length-1)continue;_.push(P),C++,S=new ip(o.registry,o.path,null,o.scope,void 0,o._scope,o.options);const D=[];let B=!1;for(let $=1;$<r.length;$++){const q=r[$],W=Array.isArray(P)?P[$-1]:P.type,J=S.parse(q,1+D.length,W);if(!J){B=!0;break}D.push(J)}if(!B)if(Array.isArray(P)&&P.length!==D.length)S.error(`Expected ${P.length} arguments, but found ${D.length} instead.`);else{for(let $=0;$<D.length;$++){const q=Array.isArray(P)?P[$]:P.type,W=D[$];S.concat($+1).checkSubtype(q,W.type)}if(S.errors.length===0)return new xo(u,g,R,D,C)}}if(_.length===1)o.errors.push(...S.errors);else{const P=(_.length?_:y.map(([D])=>D)).map(Gf).join(" | "),R=[];for(let D=1;D<r.length;D++){const B=o.parse(r[D],1+R.length);if(!B)return null;R.push(to(B.type))}o.error(`Expected arguments of type ${P}, but found (${R.join(", ")}) instead.`)}return null}static register(r,o){xo.definitions=o;for(const u in o)r[u]=xo}}function Gf(a){return Array.isArray(a)?`(${a.map(to).join(", ")})`:`(${to(a.type)}...)`}class fa{constructor(r,o,u){this.type=qh,this.locale=u,this.caseSensitive=r,this.diacriticSensitive=o}static parse(r,o){if(r.length!==2)return o.error("Expected one argument.");const u=r[1];if(typeof u!="object"||Array.isArray(u))return o.error("Collator options argument must be an object.");const h=u["case-sensitive"]===void 0?o.parse(!1,1,Ir):o.parseObjectValue(u["case-sensitive"],1,"case-sensitive",Ir);if(!h)return null;const g=u["diacritic-sensitive"]===void 0?o.parse(!1,1,Ir):o.parseObjectValue(u["diacritic-sensitive"],1,"diacritic-sensitive",Ir);if(!g)return null;let y=null;return u.locale&&(y=o.parseObjectValue(u.locale,1,"locale",$r),!y)?null:new fa(h,g,y)}evaluate(r){return new vd(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}serialize(){const r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]}}function jo(a,r,o=0,u=a.length-1,h=r1){for(;u>o;){if(u-o>600){const S=u-o+1,C=r-o+1,P=Math.log(S),R=.5*Math.exp(2*P/3),D=.5*Math.sqrt(P*R*(S-R)/S)*(C-S/2<0?-1:1);jo(a,r,Math.max(o,Math.floor(r-C*R/S+D)),Math.min(u,Math.floor(r+(S-C)*R/S+D)),h)}const g=a[r];let y=o,_=u;for(xd(a,o,r),h(a[u],g)>0&&xd(a,o,u);y<_;){for(xd(a,y,_),y++,_--;h(a[y],g)<0;)y++;for(;h(a[_],g)>0;)_--}h(a[o],g)===0?xd(a,o,_):(_++,xd(a,_,u)),_<=r&&(o=_+1),r<=_&&(u=_-1)}}function xd(a,r,o){const u=a[r];a[r]=a[o],a[o]=u}function r1(a,r){return a<r?-1:a>r?1:0}function i1(a){let r=0;for(let o,u,h=0,g=a.length,y=g-1;h<g;y=h++)o=a[h],u=a[y],r+=(u.x-o.x)*(o.y+u.y);return r}function fl(a,r){a[0]=Math.min(a[0],r[0]),a[1]=Math.min(a[1],r[1]),a[2]=Math.max(a[2],r[0]),a[3]=Math.max(a[3],r[1])}function Zc(a,r){return!(a[0]<=r[0]||a[2]>=r[2]||a[1]<=r[1]||a[3]>=r[3])}function lc(a,r,o){const u=a[0]-r[0],h=a[1]-r[1],g=a[0]-o[0],y=a[1]-o[1];return u*y-g*h==0&&u*g<=0&&h*y<=0}function Xc(a,r,o=!1){let u=!1;for(let _=0,S=r.length;_<S;_++){const C=r[_];for(let P=0,R=C.length,D=R-1;P<R;D=P++){const B=C[D],$=C[P];if(lc(a,B,$))return o;(g=B)[1]>(h=a)[1]!=(y=$)[1]>h[1]&&h[0]<(y[0]-g[0])*(h[1]-g[1])/(y[1]-g[1])+g[0]&&(u=!u)}}var h,g,y;return u}function g0(a,r,o,u){const h=u[0]-o[0],g=u[1]-o[1],y=(a[0]-o[0])*g-h*(a[1]-o[1]),_=(r[0]-o[0])*g-h*(r[1]-o[1]);return y>0&&_<0||y<0&&_>0}function Wh(a,r,o,u){return(h=[u[0]-o[0],u[1]-o[1]])[0]*(g=[r[0]-a[0],r[1]-a[1]])[1]-h[1]*g[0]!=0&&!(!g0(a,r,o,u)||!g0(o,u,a,r));var h,g}function Wf(a){const r=new Vt(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),o=new Vt(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const u of a[0])r.x>u.x&&(r.x=u.x),r.y>u.y&&(r.y=u.y),o.x<u.x&&(o.x=u.x),o.y<u.y&&(o.y=u.y);return{min:r,max:o}}const $a=8192;function o1(a,r){const o=(180+a[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,h=Math.pow(2,r.z);return[Math.round(o*h*$a),Math.round(u*h*$a)]}function s1(a,r){for(let o=0;o<r.length;o++)if(Xc(a,r[o]))return!0;return!1}function y0(a,r,o){for(const u of o)for(let h=0,g=u.length,y=g-1;h<g;y=h++)if(Wh(a,r,u[y],u[h]))return!0;return!1}function v0(a,r){for(let o=0;o<a.length;++o)if(!Xc(a[o],r))return!1;for(let o=0;o<a.length-1;++o)if(y0(a[o],a[o+1],r))return!1;return!0}function cc(a,r){for(let o=0;o<r.length;o++)if(v0(a,r[o]))return!0;return!1}function Kf(a,r,o){const u=[];for(let h=0;h<a.length;h++){const g=[];for(let y=0;y<a[h].length;y++){const _=o1(a[h][y],o);fl(r,_),g.push(_)}u.push(g)}return u}function b0(a,r,o){const u=[];for(let h=0;h<a.length;h++){const g=Kf(a[h],r,o);u.push(g)}return u}function Kh(a,r,o,u){if(a[0]<o[0]||a[0]>o[2]){const h=.5*u;let g=a[0]-o[0]>h?-u:o[0]-a[0]>h?u:0;g===0&&(g=a[0]-o[2]>h?-u:o[2]-a[0]>h?u:0),a[0]+=g}fl(r,a)}function Zf(a,r,o,u){const h=Math.pow(2,u.z)*$a,g=[u.x*$a,u.y*$a],y=[];if(!a)return y;for(const _ of a)for(const S of _){const C=[S.x+g[0],S.y+g[1]];Kh(C,r,o,h),y.push(C)}return y}function Xf(a,r,o,u){const h=Math.pow(2,u.z)*$a,g=[u.x*$a,u.y*$a],y=[];if(!a)return y;for(const S of a){const C=[];for(const P of S){const R=[P.x+g[0],P.y+g[1]];fl(r,R),C.push(R)}y.push(C)}if(r[2]-r[0]<=h/2){(_=r)[0]=_[1]=1/0,_[2]=_[3]=-1/0;for(const S of y)for(const C of S)Kh(C,r,o,h)}var _;return y}class Uo{constructor(r,o){this.type=Ir,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(or(r[1])){const u=r[1];if(u.type==="FeatureCollection")for(let h=0;h<u.features.length;++h){const g=u.features[h].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Uo(u,u.features[h].geometry)}else if(u.type==="Feature"){const h=u.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Uo(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new Uo(u,u)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(o,u){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if(!y)return!1;if(u.type==="Polygon"){const _=Kf(u.coordinates,g,y),S=Zf(o.geometry(),h,g,y);if(!Zc(h,g))return!1;for(const C of S)if(!Xc(C,_))return!1}if(u.type==="MultiPolygon"){const _=b0(u.coordinates,g,y),S=Zf(o.geometry(),h,g,y);if(!Zc(h,g))return!1;for(const C of S)if(!s1(C,_))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(o,u){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if(!y)return!1;if(u.type==="Polygon"){const _=Kf(u.coordinates,g,y),S=Xf(o.geometry(),h,g,y);if(!Zc(h,g))return!1;for(const C of S)if(!v0(C,_))return!1}if(u.type==="MultiPolygon"){const _=b0(u.coordinates,g,y),S=Xf(o.geometry(),h,g,y);if(!Zc(h,g))return!1;for(const C of S)if(!cc(C,_))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const wd={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Yf=1/298.257223563,Jf=Yf*(2-Yf),Yc=Math.PI/180;class Jc{static fromTile(r,o,u){const h=Math.PI*(1-2*(r+.5)/Math.pow(2,o)),g=Math.atan(.5*(Math.exp(h)-Math.exp(-h)))/Yc;return new Jc(g,u)}static get units(){return wd}constructor(r,o){if(r===void 0)throw new Error("No latitude given.");if(o&&!wd[o])throw new Error(`Unknown unit ${o}. Use one of: ${Object.keys(wd).join(", ")}`);const u=6378.137*Yc*(o?wd[o]:1),h=Math.cos(r*Yc),g=1/(1-Jf*(1-h*h)),y=Math.sqrt(g);this.kx=u*y*h,this.ky=u*y*g*(1-Jf)}distance(r,o){const u=ks(r[0]-o[0])*this.kx,h=(r[1]-o[1])*this.ky;return Math.sqrt(u*u+h*h)}bearing(r,o){const u=ks(o[0]-r[0])*this.kx;return Math.atan2(u,(o[1]-r[1])*this.ky)/Yc}destination(r,o,u){const h=u*Yc;return this.offset(r,Math.sin(h)*o,Math.cos(h)*o)}offset(r,o,u){return[r[0]+o/this.kx,r[1]+u/this.ky]}lineDistance(r){let o=0;for(let u=0;u<r.length-1;u++)o+=this.distance(r[u],r[u+1]);return o}area(r){let o=0;for(let u=0;u<r.length;u++){const h=r[u];for(let g=0,y=h.length,_=y-1;g<y;_=g++)o+=ks(h[g][0]-h[_][0])*(h[g][1]+h[_][1])*(u?-1:1)}return Math.abs(o)/2*this.kx*this.ky}along(r,o){let u=0;if(o<=0)return r[0];for(let h=0;h<r.length-1;h++){const g=r[h],y=r[h+1],_=this.distance(g,y);if(u+=_,u>o)return Zh(g,y,(o-(u-_))/_)}return r[r.length-1]}pointToSegmentDistance(r,o,u){let[h,g]=o,y=ks(u[0]-h)*this.kx,_=(u[1]-g)*this.ky;if(y!==0||_!==0){const S=(ks(r[0]-h)*this.kx*y+(r[1]-g)*this.ky*_)/(y*y+_*_);S>1?(h=u[0],g=u[1]):S>0&&(h+=y/this.kx*S,g+=_/this.ky*S)}return y=ks(r[0]-h)*this.kx,_=(r[1]-g)*this.ky,Math.sqrt(y*y+_*_)}pointOnLine(r,o){let u=1/0,h=r[0][0],g=r[0][1],y=0,_=0;for(let S=0;S<r.length-1;S++){let C=r[S][0],P=r[S][1],R=ks(r[S+1][0]-C)*this.kx,D=(r[S+1][1]-P)*this.ky,B=0;R===0&&D===0||(B=(ks(o[0]-C)*this.kx*R+(o[1]-P)*this.ky*D)/(R*R+D*D),B>1?(C=r[S+1][0],P=r[S+1][1]):B>0&&(C+=R/this.kx*B,P+=D/this.ky*B)),R=ks(o[0]-C)*this.kx,D=(o[1]-P)*this.ky;const $=R*R+D*D;$<u&&(u=$,h=C,g=P,y=S,_=B)}return{point:[h,g],index:y,t:Math.max(0,Math.min(1,_))}}lineSlice(r,o,u){let h=this.pointOnLine(u,r),g=this.pointOnLine(u,o);if(h.index>g.index||h.index===g.index&&h.t>g.t){const C=h;h=g,g=C}const y=[h.point],_=h.index+1,S=g.index;!Qf(u[_],y[0])&&_<=S&&y.push(u[_]);for(let C=_+1;C<=S;C++)y.push(u[C]);return Qf(u[S],g.point)||y.push(g.point),y}lineSliceAlong(r,o,u){let h=0;const g=[];for(let y=0;y<u.length-1;y++){const _=u[y],S=u[y+1],C=this.distance(_,S);if(h+=C,h>r&&g.length===0&&g.push(Zh(_,S,(r-(h-C))/C)),h>=o)return g.push(Zh(_,S,(o-(h-C))/C)),g;h>r&&g.push(S)}return g}bufferPoint(r,o){const u=o/this.ky,h=o/this.kx;return[r[0]-h,r[1]-u,r[0]+h,r[1]+u]}bufferBBox(r,o){const u=o/this.ky,h=o/this.kx;return[r[0]-h,r[1]-u,r[2]+h,r[3]+u]}insideBBox(r,o){return ks(r[0]-o[0])>=0&&ks(r[0]-o[2])<=0&&r[1]>=o[1]&&r[1]<=o[3]}}function Qf(a,r){return a[0]===r[0]&&a[1]===r[1]}function Zh(a,r,o){const u=ks(r[0]-a[0]);return[a[0]+u*o,a[1]+(r[1]-a[1])*o]}function ks(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}class Xh{constructor(r=[],o=(u,h)=>u<h?-1:u>h?1:0){if(this.data=r,this.length=this.data.length,this.compare=o,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:o,compare:u}=this,h=o[r];for(;r>0;){const g=r-1>>1,y=o[g];if(u(h,y)>=0)break;o[r]=y,r=g}o[r]=h}_down(r){const{data:o,compare:u}=this,h=this.length>>1,g=o[r];for(;r<h;){let y=1+(r<<1);const _=y+1;if(_<this.length&&u(o[_],o[y])<0&&(y=_),u(o[y],g)>=0)break;o[r]=o[y],r=y}o[r]=g}}var Ut=8192;function em(a,r){return r.dist-a.dist}const Qc=100,eu=50;function Sd(a){const r=[1/0,1/0,-1/0,-1/0];if(r.length!==a.length)return!1;for(let o=0;o<r.length;o++)if(r[o]!==a[o])return!1;return!0}function Cd(a){return a[1]-a[0]+1}function ma(a,r){const o=a[1]>=a[0]&&a[1]<r;return o||console.warn("Distance Expression: Index is out of range"),o}function Yh(a,r){if(a[0]>a[1])return[null,null];const o=Cd(a);if(r){if(o===2)return[a,null];const u=Math.floor(o/2);return[[a[0],a[0]+u],[a[0]+u,a[1]]]}{if(o===1)return[a,null];const u=Math.floor(o/2)-1;return[[a[0],a[0]+u],[a[0]+u+1,a[1]]]}}function Ns(a,r){const o=[1/0,1/0,-1/0,-1/0];if(!ma(r,a.length))return o;for(let u=r[0];u<=r[1];++u)fl(o,a[u]);return o}function gr(a){const r=[1/0,1/0,-1/0,-1/0];for(let o=0;o<a.length;++o)for(let u=0;u<a[o].length;++u)fl(r,a[o][u]);return r}function tu(a,r,o){if(Sd(a)||Sd(r))return NaN;let u=0,h=0;return a[2]<r[0]&&(u=r[0]-a[2]),a[0]>r[2]&&(u=a[0]-r[2]),a[1]>r[3]&&(h=a[1]-r[3]),a[3]<r[1]&&(h=r[1]-a[3]),o.distance([0,0],[u,h])}function a1(a){return 360*a-180}function l1(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function Jh(a,r){const o=Math.pow(2,r.z),u=(a.y/Ut+r.y)/o;return[a1((a.x/Ut+r.x)/o),l1(u)]}function c1(a,r){const o=[];for(let u=0;u<a.length;++u)o.push(Jh(a[u],r));return o}function Ei(a,r,o){const u=o.pointOnLine(r,a).point;return o.distance(a,u)}function _0(a,r,o,u,h){const g=o.slice(u[0],u[1]+1);let y=1/0;for(let _=r[0];_<=r[1];++_)if((y=Math.min(y,Ei(a[_],g,h)))===0)return 0;return y}function tm(a,r,o,u,h){const g=Math.min(h.pointToSegmentDistance(a,o,u),h.pointToSegmentDistance(r,o,u)),y=Math.min(h.pointToSegmentDistance(o,a,r),h.pointToSegmentDistance(u,a,r));return Math.min(g,y)}function u1(a,r,o,u,h){if(!ma(r,a.length)||!ma(u,o.length))return NaN;let g=1/0;for(let y=r[0];y<r[1];++y)for(let _=u[0];_<u[1];++_){if(Wh(a[y],a[y+1],o[_],o[_+1]))return 0;g=Math.min(g,tm(a[y],a[y+1],o[_],o[_+1],h))}return g}function d1(a,r,o,u,h){if(!ma(r,a.length)||!ma(u,o.length))return NaN;let g=1/0;for(let y=r[0];y<=r[1];++y)for(let _=u[0];_<=u[1];++_)if((g=Math.min(g,h.distance(a[y],o[_])))===0)return g;return g}function h1(a,r,o){if(Xc(a,r,!0))return 0;let u=1/0;for(const h of r){const g=h.length;if(g<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(h[0]!==h[g-1]&&(u=Math.min(u,o.pointToSegmentDistance(a,h[g-1],h[0])))===0||(u=Math.min(u,Ei(a,h,o)))===0)return u}return u}function p1(a,r,o,u){if(!ma(r,a.length))return NaN;for(let g=r[0];g<=r[1];++g)if(Xc(a[g],o,!0))return 0;let h=1/0;for(let g=r[0];g<r[1];++g)for(const y of o)for(let _=0,S=y.length,C=S-1;_<S;C=_++){if(Wh(a[g],a[g+1],y[C],y[_]))return 0;h=Math.min(h,tm(a[g],a[g+1],y[C],y[_],u))}return h}function x0(a,r){for(const o of a)for(let u=0;u<=o.length-1;++u)if(Xc(o[u],r,!0))return!0;return!1}function f1(a,r,o,u=1/0){const h=gr(a),g=gr(r);if(u!==1/0&&tu(h,g,o)>=u)return u;if(Zc(h,g)){if(x0(a,r))return 0}else if(x0(r,a))return 0;let y=u;for(const _ of a)for(let S=0,C=_.length,P=C-1;S<C;P=S++)for(const R of r)for(let D=0,B=R.length,$=B-1;D<B;$=D++){if(Wh(_[P],_[S],R[$],R[D]))return 0;y=Math.min(y,tm(_[P],_[S],R[$],R[D],o))}return y}function Qh(a,r,o,u,h,g,y){if(g===null||y===null)return;const _=tu(Ns(u,g),Ns(h,y),o);_<r&&a.push({dist:_,range1:g,range2:y})}function m1(a,r,o,u,h=1/0){let g=Math.min(u.distance(a[0],o[0][0]),h);if(g===0)return g;const y=new Xh([{dist:0,range1:[0,a.length-1],range2:[0,0]}],em),_=r?eu:Qc,S=gr(o);for(;y.length;){const C=y.pop();if(C.dist>=g)continue;const P=C.range1;if(Cd(P)<=_){if(!ma(P,a.length))return NaN;if(r){const R=p1(a,P,o,u);if((g=Math.min(g,R))===0)return g}else for(let R=P[0];R<=P[1];++R){const D=h1(a[R],o,u);if((g=Math.min(g,D))===0)return g}}else{const R=Yh(P,r);if(R[0]!==null){const D=tu(Ns(a,R[0]),S,u);D<g&&y.push({dist:D,range1:R[0],range2:[0,0]})}if(R[1]!==null){const D=tu(Ns(a,R[1]),S,u);D<g&&y.push({dist:D,range1:R[1],range2:[0,0]})}}}return g}function w0(a,r,o,u,h,g=1/0){let y=Math.min(g,h.distance(a[0],o[0]));if(y===0)return y;const _=new Xh([{dist:0,range1:[0,a.length-1],range2:[0,o.length-1]}],em),S=r?eu:Qc,C=u?eu:Qc;for(;_.length;){const P=_.pop();if(P.dist>=y)continue;const R=P.range1,D=P.range2;if(Cd(R)<=S&&Cd(D)<=C){if(!ma(R,a.length)||!ma(D,o.length))return NaN;if(r&&u?y=Math.min(y,u1(a,R,o,D,h)):r||u?r&&!u?y=Math.min(y,_0(o,D,a,R,h)):!r&&u&&(y=Math.min(y,_0(a,R,o,D,h))):y=Math.min(y,d1(a,R,o,D,h)),y===0)return y}else{const B=Yh(R,r),$=Yh(D,u);Qh(_,y,h,a,o,B[0],$[0]),Qh(_,y,h,a,o,B[0],$[1]),Qh(_,y,h,a,o,B[1],$[0]),Qh(_,y,h,a,o,B[1],$[1])}}return y}function nm(a,r,o,u,h=1/0){let g=h;const y=Ns(a,[0,a.length-1]);for(const _ of o)if(!(g!==1/0&&tu(y,Ns(_,[0,_.length-1]),u)>=g)&&(g=Math.min(g,w0(a,r,_,!0,u,g)),g===0))return g;return g}function ep(a,r,o,u,h=1/0){let g=h;const y=Ns(a,[0,a.length-1]);for(const _ of o){if(g!==1/0&&tu(y,gr(_),u)>=g)continue;const S=m1(a,r,_,u,g);if(isNaN(S))return S;if((g=Math.min(g,S))===0)return g}return g}function rm(a){return a==="Point"||a==="MultiPoint"||a==="LineString"||a==="MultiLineString"||a==="Polygon"||a==="MultiPolygon"}class uc{constructor(r,o){this.type=yn,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'distance' expression requires either one argument, but found ' ${r.length-1} instead.`);if(or(r[1])){const u=r[1];if(u.type==="FeatureCollection"){for(let h=0;h<u.features.length;++h)if(rm(u.features[h].geometry.type))return new uc(u,u.features[h].geometry)}else if(u.type==="Feature"){if(rm(u.geometry.type))return new uc(u,u.geometry)}else if(rm(u.type))return new uc(u,u)}return o.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(r){const o=r.geometry(),u=r.canonicalID();if(o!=null&&u!=null){if(r.geometryType()==="Point")return function(h,g,y){const _=[];for(const C of h)for(const P of C)_.push(Jh(P,g));const S=new Jc(_[0][1],"meters");return y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString"?w0(_,!1,y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",S):y.type==="MultiLineString"?nm(_,!1,y.coordinates,S):y.type==="Polygon"||y.type==="MultiPolygon"?ep(_,!1,y.type==="Polygon"?[y.coordinates]:y.coordinates,S):null}(o,u,this.geometries);if(r.geometryType()==="LineString")return function(h,g,y){const _=[];for(const C of h){const P=[];for(const R of C)P.push(Jh(R,g));_.push(P)}const S=new Jc(_[0][0][1],"meters");if(y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString")return nm(y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",_,S);if(y.type==="MultiLineString"){let C=1/0;for(let P=0;P<y.coordinates.length;P++){const R=nm(y.coordinates[P],!0,_,S,C);if(isNaN(R))return R;if((C=Math.min(C,R))===0)return C}return C}if(y.type==="Polygon"||y.type==="MultiPolygon"){let C=1/0;for(let P=0;P<_.length;P++){const R=ep(_[P],!0,y.type==="Polygon"?[y.coordinates]:y.coordinates,S,C);if(isNaN(R))return R;if((C=Math.min(C,R))===0)return C}return C}return null}(o,u,this.geometries);if(r.geometryType()==="Polygon")return function(h,g,y){const _=[];for(const C of function(P,R){const D=P.length;if(D<=1)return[P];const B=[];let $,q;for(let W=0;W<D;W++){const J=i1(P[W]);J!==0&&(P[W].area=Math.abs(J),q===void 0&&(q=J<0),q===J<0?($&&B.push($),$=[P[W]]):$.push(P[W]))}return $&&B.push($),B}(h)){const P=[];for(let R=0;R<C.length;++R)P.push(c1(C[R],g));_.push(P)}const S=new Jc(_[0][0][0][1],"meters");if(y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString")return ep(y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",_,S);if(y.type==="MultiLineString"){let C=1/0;for(let P=0;P<y.coordinates.length;P++){const R=ep(y.coordinates[P],!0,_,S,C);if(isNaN(R))return R;if((C=Math.min(C,R))===0)return C}return C}return y.type==="Polygon"||y.type==="MultiPolygon"?function(C,P,R){let D=1/0;for(const B of C)for(const $ of P){const q=f1(B,$,R,D);if(isNaN(q))return q;if((D=Math.min(D,q))===0)return D}return D}(y.type==="Polygon"?[y.coordinates]:y.coordinates,_,S):null}(o,u,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function nu(a){if(a instanceof xo&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Uo||a instanceof uc)return!1;if(a instanceof iu)return a.featureConstant;let r=!0;return a.eachChild(o=>{r&&!nu(o)&&(r=!1)}),r}function tp(a){if(a instanceof xo&&a.name==="feature-state")return!1;let r=!0;return a.eachChild(o=>{r&&!tp(o)&&(r=!1)}),r}function np(a){if(a instanceof iu)return new Set([a.key]);let r=new Set;return a.eachChild(o=>{r=new Set([...r,...np(o)])}),r}function ru(a,r){if(a instanceof xo&&r.indexOf(a.name)>=0)return!1;let o=!0;return a.eachChild(u=>{o&&!ru(u,r)&&(o=!1)}),o}function S0(a,r,o){return[a,r,o].filter(Boolean).join("")}function im(a,r){switch(a){case"string":return Fs(r);case"number":return+r;case"boolean":return!!r;case"color":return Ar.parse(r);case"formatted":return Zo.fromString(Fs(r));case"resolvedImage":return os.build(Fs(r))}return r}function C0(a,r,o,u){return u!==void 0&&(a=u*Math.round(a/u)),r!==void 0&&a<r&&(a=r),o!==void 0&&a>o&&(a=o),a}class iu{constructor(r,o,u,h=!1){this.type=r,this.key=o,this.scope=u,this.featureConstant=h}static parse(r,o){let u=o.expectedType;if(u==null&&(u=Rr),r.length<2||r.length>3)return o.error("Invalid number of arguments for 'config' expression.");const h=o.parse(r[1],1);if(!(h instanceof $n))return o.error("Key name of 'config' expression must be a string literal.");let g,y=!0;const _=Fs(h.value);if(r.length>=3){const S=o.parse(r[2],2);if(!(S instanceof $n))return o.error("Scope of 'config' expression must be a string literal.");g=Fs(S.value)}if(o.options){const S=S0(_,g,o._scope),C=o.options.get(S);C&&(y=nu(C.value||C.default))}return new iu(u,_,g,y)}evaluate(r){const o=S0(this.key,this.scope,r.scope),u=r.getConfig(o);if(!u)return null;const{type:h,value:g,values:y,minValue:_,maxValue:S,stepValue:C}=u,P=u.default.evaluate(r);let R=P;if(g){const D=r.scope;r.scope=(D||"").split("").slice(1).join(""),R=g.evaluate(r),r.scope=D}return h&&(R=im(h,R)),R===void 0||_===void 0&&S===void 0&&C===void 0||(typeof R=="number"?R=C0(R,_,S,C):Array.isArray(R)&&(R=R.map(D=>typeof D=="number"?C0(D,_,S,C):D))),g!==void 0&&R!==void 0&&y&&!y.includes(R)&&(R=P,h&&(R=im(h,R))),(h&&h!==this.type||R!==void 0&&!Hh(en(R),this.type))&&(R=im(this.type.kind,R)),R}eachChild(){}outputDefined(){return!1}serialize(){const r=["config",this.key];return this.scope&&r.concat(this.scope),r}}class rp{constructor(r,o){this.type=o.type,this.name=r,this.boundExpression=o}static parse(r,o){if(r.length!==2||typeof r[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const u=r[1];return o.scope.has(u)?new rp(u,o.scope.get(u)):o.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class ip{constructor(r,o=[],u,h=new Hf,g=[],y,_){this.registry=r,this.path=o,this.key=o.map(S=>typeof S=="string"?`['${S}']`:`[${S}]`).join(""),this.scope=h,this.errors=g,this.expectedType=u,this._scope=y,this.options=_}parse(r,o,u,h,g={}){return o||u?this.concat(o,null,u,h)._parse(r,g):this._parse(r,g)}parseObjectValue(r,o,u,h,g,y={}){return this.concat(o,u,h,g)._parse(r,y)}_parse(r,o){function u(h,g,y){return y==="assert"?new An(g,[h]):y==="coerce"?new $s(g,[h]):h}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=typeof r[0]=="string"?this.registry[r[0]]:void 0;if(h){let g=h.parse(r,this);if(!g)return null;if(this.expectedType){const y=this.expectedType,_=g.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||_.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||_.kind!=="value"&&_.kind!=="string"){if(this.checkSubtype(y,_))return null}else g=u(g,y,o.typeAnnotation||"coerce");else g=u(g,y,o.typeAnnotation||"assert")}if(!(g instanceof $n)&&g.type.kind!=="resolvedImage"&&om(g)){const y=new _d(this._scope,this.options);try{g=new $n(g.type,g.evaluate(y))}catch(_){return this.error(_.message),null}}return g}return $s.parse(["to-array",r],this)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,o,u,h){let g=typeof r=="number"?this.path.concat(r):this.path;g=typeof o=="string"?g.concat(o):g;const y=h?this.scope.concat(h):this.scope;return new ip(this.registry,g,u||null,y,this.errors,this._scope,this.options)}error(r,...o){const u=`${this.key}${o.map(h=>`[${h}]`).join("")}`;this.errors.push(new Cs(u,r))}checkSubtype(r,o){const u=Gc(r,o);return u&&this.error(u),u}}function om(a){if(a instanceof rp)return om(a.boundExpression);if(a instanceof xo&&a.name==="error"||a instanceof fa||a instanceof Uo||a instanceof uc||a instanceof iu)return!1;const r=a instanceof $s||a instanceof An;let o=!0;return a.eachChild(u=>{o=r?o&&om(u):o&&u instanceof $n}),!!o&&nu(a)&&ru(a,["zoom","heatmap-density","worldview","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function op(a,r){const o=a.length-1;let u,h,g=0,y=o,_=0;for(;g<=y;)if(_=Math.floor((g+y)/2),u=a[_],h=a[_+1],u<=r){if(_===o||r<h)return _;g=_+1}else{if(!(u>r))throw new Xi("Input is not a number.");y=_-1}return 0}class kd{constructor(r,o,u){this.type=r,this.input=o,this.labels=[],this.outputs=[];for(const[h,g]of u)this.labels.push(h),this.outputs.push(g)}static parse(r,o){if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");const u=o.parse(r[1],1,yn);if(!u)return null;const h=[];let g=null;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);for(let y=1;y<r.length;y+=2){const _=y===1?-1/0:r[y],S=r[y+1],C=y,P=y+1;if(typeof _!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(h.length&&h[h.length-1][0]>=_)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const R=o.parse(S,P,g);if(!R)return null;g=g||R.type,h.push([_,R])}return new kd(g,u,h)}evaluate(r){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(r);const h=this.input.evaluate(r);if(h<=o[0])return u[0].evaluate(r);const g=o.length;return h>=o[g-1]?u[g-1].evaluate(r):u[op(o,h)].evaluate(r)}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){const r=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&r.push(this.labels[o]),r.push(this.outputs[o].serialize());return r}}const k0=.95047,T0=1.08883,E0=4/29,ml=6/29,I0=3*ml*ml,P0=ml*ml*ml,g1=Math.PI/180,y1=180/Math.PI;function sm(a){return a>P0?Math.pow(a,1/3):a/I0+E0}function sp(a){return a>ml?a*a*a:I0*(a-E0)}function ap(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function gl(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function am(a){const r=gl(a.r),o=gl(a.g),u=gl(a.b),h=sm((.4124564*r+.3575761*o+.1804375*u)/k0),g=sm((.2126729*r+.7151522*o+.072175*u)/1);return{l:116*g-16,a:500*(h-g),b:200*(g-sm((.0193339*r+.119192*o+.9503041*u)/T0)),alpha:a.a}}function lm(a){let r=(a.l+16)/116,o=isNaN(a.a)?r:r+a.a/500,u=isNaN(a.b)?r:r-a.b/200;return r=1*sp(r),o=k0*sp(o),u=T0*sp(u),new Ar(ap(3.2404542*o-1.5371385*r-.4985314*u),ap(-.969266*o+1.8760108*r+.041556*u),ap(.0556434*o-.2040259*r+1.0572252*u),a.alpha)}function v1(a,r,o){const u=r-a;return a+o*(u>180||u<-180?u-360*Math.round(u/360):u)}const dc={forward:am,reverse:lm,interpolate:function(a,r,o){return{l:Mn(a.l,r.l,o),a:Mn(a.a,r.a,o),b:Mn(a.b,r.b,o),alpha:Mn(a.alpha,r.alpha,o)}}},hc={forward:function(a){const{l:r,a:o,b:u}=am(a),h=Math.atan2(u,o)*y1;return{h:h<0?h+360:h,c:Math.sqrt(o*o+u*u),l:r,alpha:a.a}},reverse:function(a){const r=a.h*g1,o=a.c;return lm({l:a.l,a:Math.cos(r)*o,b:Math.sin(r)*o,alpha:a.alpha})},interpolate:function(a,r,o){return{h:v1(a.h,r.h,o),c:Mn(a.c,r.c,o),l:Mn(a.l,r.l,o),alpha:Mn(a.alpha,r.alpha,o)}}};var A0=Object.freeze({__proto__:null,hcl:hc,lab:dc});class Ts{constructor(r,o,u,h,g){this.type=r,this.operator=o,this.interpolation=u,this.input=h,this.labels=[],this.outputs=[];for(const[y,_]of g)this.labels.push(y),this.outputs.push(_)}static interpolationFactor(r,o,u,h){let g=0;if(r.name==="exponential")g=lp(o,r.base,u,h);else if(r.name==="linear")g=lp(o,1,u,h);else if(r.name==="cubic-bezier"){const y=r.controlPoints;g=new Dh(y[0],y[1],y[2],y[3]).solve(lp(o,1,u,h))}return g}static parse(r,o){let[u,h,g,...y]=r;if(!Array.isArray(h)||h.length===0)return o.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const C=h[1];if(typeof C!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:C}}else{if(h[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const C=h.slice(1);if(C.length!==4||C.some(P=>typeof P!="number"||P<0||P>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:C}}}if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length-1>3&&(r.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(g=o.parse(g,2,yn),!g)return null;const _=[];let S=null;u==="interpolate-hcl"||u==="interpolate-lab"?S=us:o.expectedType&&o.expectedType.kind!=="value"&&(S=o.expectedType);for(let C=0;C<y.length;C+=2){const P=y[C],R=y[C+1],D=C+3,B=C+4;if(typeof P!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(_.length&&_[_.length-1][0]>=P)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',D);const $=o.parse(R,B,S);if(!$)return null;S=S||$.type,_.push([P,$])}return S.kind==="number"||S.kind==="color"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new Ts(S,u,h,g,_):o.error(`Type ${to(S)} is not interpolatable.`)}evaluate(r){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(r);const h=this.input.evaluate(r);if(h<=o[0])return u[0].evaluate(r);const g=o.length;if(h>=o[g-1])return u[g-1].evaluate(r);const y=op(o,h),_=Ts.interpolationFactor(this.interpolation,h,o[y],o[y+1]),S=u[y].evaluate(r),C=u[y+1].evaluate(r);return this.operator==="interpolate"?fd[this.type.kind.toLowerCase()](S,C,_):this.operator==="interpolate-hcl"?hc.reverse(hc.interpolate(hc.forward(S),hc.forward(C),_)):dc.reverse(dc.interpolate(dc.forward(S),dc.forward(C),_))}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const o=[this.operator,r,this.input.serialize()];for(let u=0;u<this.labels.length;u++)o.push(this.labels[u],this.outputs[u].serialize());return o}}function lp(a,r,o,u){const h=u-o,g=a-o;return h===0?0:r===1?g/h:(Math.pow(r,g)-1)/(Math.pow(r,h)-1)}class Td{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expectected at least one argument.");let u=null;const h=o.expectedType;h&&h.kind!=="value"&&(u=h);const g=[];for(const _ of r.slice(1)){const S=o.parse(_,1+g.length,u,void 0,{typeAnnotation:"omit"});if(!S)return null;u=u||S.type,g.push(S)}const y=h&&g.some(_=>Gc(h,_.type));return new Td(y?Rr:u,g)}evaluate(r){let o,u=null,h=0;for(const g of this.args){if(h++,u=g.evaluate(r),u&&u instanceof os&&!u.available&&(o||(o=u),u=null,h===this.args.length))return o;if(u!==null)break}return u}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=["coalesce"];return this.eachChild(o=>{r.push(o.serialize())}),r}}class cp{constructor(r,o){this.type=o.type,this.bindings=[].concat(r),this.result=o}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const o of this.bindings)r(o[1]);r(this.result)}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const u=[];for(let g=1;g<r.length-1;g+=2){const y=r[g];if(typeof y!="string")return o.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return o.error("Variable names must contain only alphanumeric characters or '_'.",g);const _=o.parse(r[g+1],g+1);if(!_)return null;u.push([y,_])}const h=o.parse(r[r.length-1],r.length-1,o.expectedType,u);return h?new cp(u,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const r=["let"];for(const[o,u]of this.bindings)r.push(o,u.serialize());return r.push(this.result.serialize()),r}}class cm{constructor(r,o,u){this.type=r,this.index=o,this.input=u}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=o.parse(r[1],1,yn),h=o.parse(r[2],2,Ko(o.expectedType||Rr));return u&&h?new cm(h.type.itemType,u,h):null}evaluate(r){const o=this.index.evaluate(r),u=this.input.evaluate(r);if(o<0)throw new Xi(`Array index out of bounds: ${o} < 0.`);if(o>=u.length)throw new Xi(`Array index out of bounds: ${o} > ${u.length-1}.`);if(o!==Math.floor(o))throw new Xi(`Array index must be an integer, but found ${o} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return u[o]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class um{constructor(r,o,u){this.type=r,this.index=o,this.input=u}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=o.parse(r[1],1,yn),h=o.parse(r[2],2,Ko(o.expectedType||Rr));return u&&h?new um(h.type.itemType,u,h):null}evaluate(r){const o=this.index.evaluate(r),u=this.input.evaluate(r);if(o<0)throw new Xi(`Array index out of bounds: ${o} < 0.`);if(o>u.length-1)throw new Xi(`Array index out of bounds: ${o} > ${u.length-1}.`);if(o===Math.floor(o))return u[o];const h=Math.floor(o),g=Math.ceil(o),y=u[h],_=u[g];if(typeof y!="number"||typeof _!="number")throw new Xi(`Cannot interpolate between non-number values at index ${o}.`);const S=o-h;return y*(1-S)+_*S}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class up{constructor(r,o){this.type=Ir,this.needle=r,this.haystack=o}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=o.parse(r[1],1,Rr),h=o.parse(r[2],2,Rr);return u&&h?hl(u.type,[Ir,$r,yn,Hc,Rr])?new up(u,h):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${to(u.type)} instead`):null}evaluate(r){const o=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(u==null)return!1;if(!yd(o,["boolean","string","number","null"]))throw new Xi(`Expected first argument to be of type boolean, string, number or null, but found ${to(en(o))} instead.`);if(!yd(u,["string","array"]))throw new Xi(`Expected second argument to be of type array or string, but found ${to(en(u))} instead.`);return u.indexOf(o)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Ed{constructor(r,o,u){this.type=yn,this.needle=r,this.haystack=o,this.fromIndex=u}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=o.parse(r[1],1,Rr),h=o.parse(r[2],2,Rr);if(!u||!h)return null;if(!hl(u.type,[Ir,$r,yn,Hc,Rr]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${to(u.type)} instead`);if(r.length===4){const g=o.parse(r[3],3,yn);return g?new Ed(u,h,g):null}return new Ed(u,h)}evaluate(r){const o=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!yd(o,["boolean","string","number","null"]))throw new Xi(`Expected first argument to be of type boolean, string, number or null, but found ${to(en(o))} instead.`);if(!yd(u,["string","array"]))throw new Xi(`Expected second argument to be of type array or string, but found ${to(en(u))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(r);return u.indexOf(o,h)}return u.indexOf(o)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class ou{constructor(r,o,u,h,g,y){this.inputType=r,this.type=o,this.input=u,this.cases=h,this.outputs=g,this.otherwise=y}static parse(r,o){if(r.length<5)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return o.error("Expected an even number of arguments.");let u,h;o.expectedType&&o.expectedType.kind!=="value"&&(h=o.expectedType);const g={},y=[];for(let C=2;C<r.length-1;C+=2){let P=r[C];const R=r[C+1];Array.isArray(P)||(P=[P]);const D=o.concat(C);if(P.length===0)return D.error("Expected at least one branch label.");for(const $ of P){if(typeof $!="number"&&typeof $!="string")return D.error("Branch labels must be numbers or strings.");if(typeof $=="number"&&Math.abs($)>Number.MAX_SAFE_INTEGER)return D.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof $=="number"&&Math.floor($)!==$)return D.error("Numeric branch labels must be integer values.");if(u){if(D.checkSubtype(u,en($)))return null}else u=en($);if(g[String($)]!==void 0)return D.error("Branch labels must be unique.");g[String($)]=y.length}const B=o.parse(R,C,h);if(!B)return null;h=h||B.type,y.push(B)}const _=o.parse(r[1],1,Rr);if(!_)return null;const S=o.parse(r[r.length-1],r.length-1,h);return S?_.type.kind!=="value"&&o.concat(1).checkSubtype(u,_.type)?null:new ou(u,h,_,g,y,S):null}evaluate(r){const o=this.input.evaluate(r);return(Hh(en(o),this.inputType)&&this.outputs[this.cases[o]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),u=[],h={};for(const y of o){const _=h[this.cases[y]];_===void 0?(h[this.cases[y]]=u.length,u.push([this.cases[y],[y]])):u[_][1].push(y)}const g=y=>this.inputType.kind==="number"?Number(y):y;for(const[y,_]of u)r.push(_.length===1?g(_[0]):_.map(g)),r.push(this.outputs[y].serialize());return r.push(this.otherwise.serialize()),r}}class dm{constructor(r,o,u){this.type=r,this.branches=o,this.otherwise=u}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return o.error("Expected an odd number of arguments.");let u;o.expectedType&&o.expectedType.kind!=="value"&&(u=o.expectedType);const h=[];for(let y=1;y<r.length-1;y+=2){const _=o.parse(r[y],y,Ir);if(!_)return null;const S=o.parse(r[y+1],y+1,u);if(!S)return null;h.push([_,S]),u=u||S.type}const g=o.parse(r[r.length-1],r.length-1,u);return g?new dm(u,h,g):null}evaluate(r){for(const[o,u]of this.branches)if(o.evaluate(r))return u.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[o,u]of this.branches)r(o),r(u);r(this.otherwise)}outputDefined(){return this.branches.every(([r,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["case"];return this.eachChild(o=>{r.push(o.serialize())}),r}}class Id{constructor(r,o,u,h){this.type=r,this.input=o,this.beginIndex=u,this.endIndex=h}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=o.parse(r[1],1,Rr),h=o.parse(r[2],2,yn);if(!u||!h)return null;if(!hl(u.type,[Ko(Rr),$r,Rr]))return o.error(`Expected first argument to be of type array or string, but found ${to(u.type)} instead`);if(r.length===4){const g=o.parse(r[3],3,yn);return g?new Id(u.type,u,h,g):null}return new Id(u.type,u,h)}evaluate(r){const o=this.input.evaluate(r),u=this.beginIndex.evaluate(r);if(!yd(o,["string","array"]))throw new Xi(`Expected first argument to be of type array or string, but found ${to(en(o))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(r);return o.slice(u,h)}return o.slice(u)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function R0(a,r){return a==="=="||a==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function M0(a,r,o,u){return u.compare(r,o)===0}function pc(a,r,o){const u=a!=="=="&&a!=="!=";return class EA{constructor(g,y,_){this.type=Ir,this.lhs=g,this.rhs=y,this.collator=_,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");const _=g[0];let S=y.parse(g[1],1,Rr);if(!S)return null;if(!R0(_,S.type))return y.concat(1).error(`"${_}" comparisons are not supported for type '${to(S.type)}'.`);let C=y.parse(g[2],2,Rr);if(!C)return null;if(!R0(_,C.type))return y.concat(2).error(`"${_}" comparisons are not supported for type '${to(C.type)}'.`);if(S.type.kind!==C.type.kind&&S.type.kind!=="value"&&C.type.kind!=="value")return y.error(`Cannot compare types '${to(S.type)}' and '${to(C.type)}'.`);u&&(S.type.kind==="value"&&C.type.kind!=="value"?S=new An(C.type,[S]):S.type.kind!=="value"&&C.type.kind==="value"&&(C=new An(S.type,[C])));let P=null;if(g.length===4){if(S.type.kind!=="string"&&C.type.kind!=="string"&&S.type.kind!=="value"&&C.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(P=y.parse(g[3],3,qh),!P)return null}return new EA(S,C,P)}evaluate(g){const y=this.lhs.evaluate(g),_=this.rhs.evaluate(g);if(u&&this.hasUntypedArgument){const S=en(y),C=en(_);if(S.kind!==C.kind||S.kind!=="string"&&S.kind!=="number")throw new Xi(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${S.kind}, ${C.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const S=en(y),C=en(_);if(S.kind!=="string"||C.kind!=="string")return r(g,y,_)}return this.collator?o(g,y,_,this.collator.evaluate(g)):r(g,y,_)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[a];return this.eachChild(y=>{g.push(y.serialize())}),g}}}const D0=pc("==",function(a,r,o){return r===o},M0),b1=pc("!=",function(a,r,o){return r!==o},function(a,r,o,u){return!M0(0,r,o,u)}),_1=pc("<",function(a,r,o){return r<o},function(a,r,o,u){return u.compare(r,o)<0}),x1=pc(">",function(a,r,o){return r>o},function(a,r,o,u){return u.compare(r,o)>0}),dp=pc("<=",function(a,r,o){return r<=o},function(a,r,o,u){return u.compare(r,o)<=0}),w1=pc(">=",function(a,r,o){return r>=o},function(a,r,o,u){return u.compare(r,o)>=0});class hp{constructor(r,o,u,h,g,y){this.type=$r,this.number=r,this.locale=o,this.currency=u,this.unit=h,this.minFractionDigits=g,this.maxFractionDigits=y}static parse(r,o){if(r.length!==3)return o.error("Expected two arguments.");const u=o.parse(r[1],1,yn);if(!u)return null;const h=r[2];if(typeof h!="object"||Array.isArray(h))return o.error("NumberFormat options argument must be an object.");let g=null;if(h.locale&&(g=o.parseObjectValue(h.locale,2,"locale",$r),!g))return null;let y=null;if(h.currency&&(y=o.parseObjectValue(h.currency,2,"currency",$r),!y))return null;let _=null;if(h.unit&&(_=o.parseObjectValue(h.unit,2,"unit",$r),!_))return null;let S=null;if(h["min-fraction-digits"]&&(S=o.parseObjectValue(h["min-fraction-digits"],2,"min-fraction-digits",yn),!S))return null;let C=null;return h["max-fraction-digits"]&&(C=o.parseObjectValue(h["max-fraction-digits"],2,"max-fraction-digits",yn),!C)?null:new hp(u,g,y,_,S,C)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(r):void 0,unit:this.unit?this.unit.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.unit&&r(this.unit),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.unit&&(r.unit=this.unit.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]}}class hm{constructor(r){this.type=yn,this.input=r}static parse(r,o){if(r.length!==2)return o.error(`Expected 1 argument, but found ${r.length-1} instead.`);const u=o.parse(r[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${to(u.type)} instead.`):new hm(u):null}evaluate(r){const o=this.input.evaluate(r);if(typeof o=="string"||Array.isArray(o))return o.length;throw new Xi(`Expected value to be of type string or array, but found ${to(en(o))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){const r=["length"];return this.eachChild(o=>{r.push(o.serialize())}),r}}function L0(a){return function(){a=1831565813+(a|=0)|0;let r=Math.imul(a^a>>>15,1|a);return r=r+Math.imul(r^r>>>7,61|r)^r,((r^r>>>14)>>>0)/4294967296}}const fc={"==":D0,"!=":b1,">":x1,"<":_1,">=":w1,"<=":dp,array:An,at:cm,"at-interpolated":um,boolean:An,case:dm,coalesce:Td,collator:fa,format:Wc,image:Kc,in:up,"index-of":Ed,interpolate:Ts,"interpolate-hcl":Ts,"interpolate-lab":Ts,length:hm,let:cp,literal:$n,match:ou,number:An,"number-format":hp,object:An,slice:Id,step:kd,string:An,"to-boolean":$s,"to-color":$s,"to-number":$s,"to-string":$s,var:rp,within:Uo,distance:uc,config:iu};function pm(a,[r,o,u,h]){r=r.evaluate(a),o=o.evaluate(a),u=u.evaluate(a);const g=h?h.evaluate(a):1,y=ac(r,o,u,g);if(y)throw new Xi(y);return new Ar(r/255,o/255,u/255,g)}function fm(a,[r,o,u,h]){r=r.evaluate(a),o=o.evaluate(a),u=u.evaluate(a);const g=h?h.evaluate(a):1,y=function(C,P,R,D){return typeof C=="number"&&C>=0&&C<=360?typeof P=="number"&&P>=0&&P<=100&&typeof R=="number"&&R>=0&&R<=100?D===void 0||typeof D=="number"&&D>=0&&D<=1?null:`Invalid hsla value [${[C,P,R,D].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof D=="number"?[C,P,R,D]:[C,P,R]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof D=="number"?[C,P,R,D]:[C,P,R]).join(", ")}]: 'h' must be between 0 and 360.`}(r,o,u,g);if(y)throw new Xi(y);const _=`hsla(${r}, ${o}%, ${u}%, ${g})`,S=Ar.parse(_);if(!S)throw new Xi(`Failed to parse HSLA color: ${_}`);return S}function O0(a,r){return a in r}function yl(a,r){const o=r[a];return o===void 0?null:o}function mc(a){return{type:a}}function z0(a){return{result:"success",value:a}}function vl(a){return{result:"error",value:a}}function pp(a,r){return!!a&&!!a.parameters&&a.parameters.indexOf(r)>-1}function Pd(a){return a["property-type"]==="data-driven"}function mm(a){return pp(a.expression,"measure-light")}function gm(a){return pp(a.expression,"zoom")}function Ad(a){return!!a.expression&&a.expression.interpolated}function Rd(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function B0(a){return a}function F0(a,r){const o=r.type==="color",u=a.stops&&typeof a.stops[0][0]=="object",h=u||!(u||a.property!==void 0),g=a.type||(Ad(r)?"exponential":"interval");if(o&&((a=sc({},a)).stops&&(a.stops=a.stops.map(C=>[C[0],Ar.parse(C[1])])),a.default=Ar.parse(a.default?a.default:r.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!A0[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let y,_,S;if(g==="exponential")y=ym;else if(g==="interval")y=C1;else if(g==="categorical"){y=S1,_=Object.create(null);for(const C of a.stops)_[C[0]]=C[1];S=typeof a.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);y=k1}if(u){const C={},P=[];for(let B=0;B<a.stops.length;B++){const $=a.stops[B],q=$[0].zoom;C[q]===void 0&&(C[q]={zoom:q,type:a.type,property:a.property,default:a.default,stops:[]},P.push(q)),C[q].stops.push([$[0].value,$[1]])}const R=[];for(const B of P)R.push([C[B].zoom,F0(C[B],r)]);const D={name:"linear"};return{kind:"composite",interpolationType:D,interpolationFactor:Ts.interpolationFactor.bind(void 0,D),zoomStops:R.map(B=>B[0]),evaluate:({zoom:B},$)=>ym({stops:R,base:a.base},r,B).evaluate(B,$)}}if(h){const C=g==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:Ts.interpolationFactor.bind(void 0,C),zoomStops:a.stops.map(P=>P[0]),evaluate:({zoom:P})=>y(a,r,P,_,S)}}return{kind:"source",evaluate(C,P){const R=P&&P.properties?P.properties[a.property]:void 0;return R===void 0?Vs(a.default,r.default):y(a,r,R,_,S)}}}function Vs(a,r,o){return a!==void 0?a:r!==void 0?r:o!==void 0?o:void 0}function S1(a,r,o,u,h){return Vs(typeof o===h?u[o]:void 0,a.default,r.default)}function C1(a,r,o){if(pl(o)!=="number")return Vs(a.default,r.default);const u=a.stops.length;if(u===1||o<=a.stops[0][0])return a.stops[0][1];if(o>=a.stops[u-1][0])return a.stops[u-1][1];const h=op(a.stops.map(g=>g[0]),o);return a.stops[h][1]}function ym(a,r,o){const u=a.base!==void 0?a.base:1;if(pl(o)!=="number")return Vs(a.default,r.default);const h=a.stops.length;if(h===1||o<=a.stops[0][0])return a.stops[0][1];if(o>=a.stops[h-1][0])return a.stops[h-1][1];const g=op(a.stops.map(P=>P[0]),o),y=function(P,R,D,B){const $=B-D,q=P-D;return $===0?0:R===1?q/$:(Math.pow(R,q)-1)/(Math.pow(R,$)-1)}(o,u,a.stops[g][0],a.stops[g+1][0]),_=a.stops[g][1],S=a.stops[g+1][1];let C=fd[r.type]||B0;if(a.colorSpace&&a.colorSpace!=="rgb"){const P=A0[a.colorSpace];C=(R,D)=>P.reverse(P.interpolate(P.forward(R),P.forward(D),y))}return typeof _.evaluate=="function"?{evaluate(...P){const R=_.evaluate.apply(void 0,P),D=S.evaluate.apply(void 0,P);if(R!==void 0&&D!==void 0)return C(R,D,y)}}:C(_,S,y)}function k1(a,r,o){return r.type==="color"?o=Ar.parse(o):r.type==="formatted"?o=Zo.fromString(o.toString()):r.type==="resolvedImage"?o=os.build(o.toString()):pl(o)===r.type||r.type==="enum"&&r.values[o]||(o=void 0),Vs(o,a.default,r.default)}xo.register(fc,{error:[{kind:"error"},[$r],(a,[r])=>{throw new Xi(r.evaluate(a))}],typeof:[$r,[Rr],(a,[r])=>to(en(r.evaluate(a)))],"to-rgba":[Ko(yn,4),[us],(a,[r])=>r.evaluate(a).toNonPremultipliedRenderColor(null).toArray()],"to-hsla":[Ko(yn,4),[us],(a,[r])=>r.evaluate(a).toNonPremultipliedRenderColor(null).toHslaArray()],rgb:[us,[yn,yn,yn],pm],rgba:[us,[yn,yn,yn,yn],pm],hsl:[us,[yn,yn,yn],fm],hsla:[us,[yn,yn,yn,yn],fm],has:{type:Ir,overloads:[[[$r],(a,[r])=>O0(r.evaluate(a),a.properties())],[[$r,Ba],(a,[r,o])=>O0(r.evaluate(a),o.evaluate(a))]]},get:{type:Rr,overloads:[[[$r],(a,[r])=>yl(r.evaluate(a),a.properties())],[[$r,Ba],(a,[r,o])=>yl(r.evaluate(a),o.evaluate(a))]]},"feature-state":[Rr,[$r],(a,[r])=>yl(r.evaluate(a),a.featureState||{})],properties:[Ba,[],a=>a.properties()],"geometry-type":[$r,[],a=>a.geometryType()],worldview:[$r,[],a=>a.globals.worldview||""],id:[Rr,[],a=>a.id()],zoom:[yn,[],a=>a.globals.zoom],pitch:[yn,[],a=>a.globals.pitch||0],"distance-from-center":[yn,[],a=>a.distanceFromCenter()],"measure-light":[yn,[$r],(a,[r])=>a.measureLight(r.evaluate(a))],"heatmap-density":[yn,[],a=>a.globals.heatmapDensity||0],"line-progress":[yn,[],a=>a.globals.lineProgress||0],"raster-value":[yn,[],a=>a.globals.rasterValue||0],"raster-particle-speed":[yn,[],a=>a.globals.rasterParticleSpeed||0],"sky-radial-progress":[yn,[],a=>a.globals.skyRadialProgress||0],accumulated:[Rr,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[yn,mc(yn),(a,r)=>{let o=0;for(const u of r)o+=u.evaluate(a);return o}],"*":[yn,mc(yn),(a,r)=>{let o=1;for(const u of r)o*=u.evaluate(a);return o}],"-":{type:yn,overloads:[[[yn,yn],(a,[r,o])=>r.evaluate(a)-o.evaluate(a)],[[yn],(a,[r])=>-r.evaluate(a)]]},"/":[yn,[yn,yn],(a,[r,o])=>r.evaluate(a)/o.evaluate(a)],"%":[yn,[yn,yn],(a,[r,o])=>r.evaluate(a)%o.evaluate(a)],ln2:[yn,[],()=>Math.LN2],pi:[yn,[],()=>Math.PI],e:[yn,[],()=>Math.E],"^":[yn,[yn,yn],(a,[r,o])=>Math.pow(r.evaluate(a),o.evaluate(a))],sqrt:[yn,[yn],(a,[r])=>Math.sqrt(r.evaluate(a))],log10:[yn,[yn],(a,[r])=>Math.log(r.evaluate(a))/Math.LN10],ln:[yn,[yn],(a,[r])=>Math.log(r.evaluate(a))],log2:[yn,[yn],(a,[r])=>Math.log(r.evaluate(a))/Math.LN2],sin:[yn,[yn],(a,[r])=>Math.sin(r.evaluate(a))],cos:[yn,[yn],(a,[r])=>Math.cos(r.evaluate(a))],tan:[yn,[yn],(a,[r])=>Math.tan(r.evaluate(a))],asin:[yn,[yn],(a,[r])=>Math.asin(r.evaluate(a))],acos:[yn,[yn],(a,[r])=>Math.acos(r.evaluate(a))],atan:[yn,[yn],(a,[r])=>Math.atan(r.evaluate(a))],min:[yn,mc(yn),(a,r)=>Math.min(...r.map(o=>o.evaluate(a)))],max:[yn,mc(yn),(a,r)=>Math.max(...r.map(o=>o.evaluate(a)))],abs:[yn,[yn],(a,[r])=>Math.abs(r.evaluate(a))],round:[yn,[yn],(a,[r])=>{const o=r.evaluate(a);return o<0?-Math.round(-o):Math.round(o)}],floor:[yn,[yn],(a,[r])=>Math.floor(r.evaluate(a))],ceil:[yn,[yn],(a,[r])=>Math.ceil(r.evaluate(a))],"filter-==":[Ir,[$r,Rr],(a,[r,o])=>a.properties()[r.value]===o.value],"filter-id-==":[Ir,[Rr],(a,[r])=>a.id()===r.value],"filter-type-==":[Ir,[$r],(a,[r])=>a.geometryType()===r.value],"filter-<":[Ir,[$r,Rr],(a,[r,o])=>{const u=a.properties()[r.value],h=o.value;return typeof u==typeof h&&u<h}],"filter-id-<":[Ir,[Rr],(a,[r])=>{const o=a.id(),u=r.value;return typeof o==typeof u&&o<u}],"filter->":[Ir,[$r,Rr],(a,[r,o])=>{const u=a.properties()[r.value],h=o.value;return typeof u==typeof h&&u>h}],"filter-id->":[Ir,[Rr],(a,[r])=>{const o=a.id(),u=r.value;return typeof o==typeof u&&o>u}],"filter-<=":[Ir,[$r,Rr],(a,[r,o])=>{const u=a.properties()[r.value],h=o.value;return typeof u==typeof h&&u<=h}],"filter-id-<=":[Ir,[Rr],(a,[r])=>{const o=a.id(),u=r.value;return typeof o==typeof u&&o<=u}],"filter->=":[Ir,[$r,Rr],(a,[r,o])=>{const u=a.properties()[r.value],h=o.value;return typeof u==typeof h&&u>=h}],"filter-id->=":[Ir,[Rr],(a,[r])=>{const o=a.id(),u=r.value;return typeof o==typeof u&&o>=u}],"filter-has":[Ir,[Rr],(a,[r])=>r.value in a.properties()],"filter-has-id":[Ir,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Ir,[Ko($r)],(a,[r])=>r.value.indexOf(a.geometryType())>=0],"filter-id-in":[Ir,[Ko(Rr)],(a,[r])=>r.value.indexOf(a.id())>=0],"filter-in-small":[Ir,[$r,Ko(Rr)],(a,[r,o])=>o.value.indexOf(a.properties()[r.value])>=0],"filter-in-large":[Ir,[$r,Ko(Rr)],(a,[r,o])=>function(u,h,g,y){for(;g<=y;){const _=g+y>>1;if(h[_]===u)return!0;h[_]>u?y=_-1:g=_+1}return!1}(a.properties()[r.value],o.value,0,o.value.length-1)],all:{type:Ir,overloads:[[[Ir,Ir],(a,[r,o])=>r.evaluate(a)&&o.evaluate(a)],[mc(Ir),(a,r)=>{for(const o of r)if(!o.evaluate(a))return!1;return!0}]]},any:{type:Ir,overloads:[[[Ir,Ir],(a,[r,o])=>r.evaluate(a)||o.evaluate(a)],[mc(Ir),(a,r)=>{for(const o of r)if(o.evaluate(a))return!0;return!1}]]},"!":[Ir,[Ir],(a,[r])=>!r.evaluate(a)],"is-supported-script":[Ir,[$r],(a,[r])=>{const o=a.globals&&a.globals.isSupportedScript;return!o||o(r.evaluate(a))}],upcase:[$r,[$r],(a,[r])=>r.evaluate(a).toUpperCase()],downcase:[$r,[$r],(a,[r])=>r.evaluate(a).toLowerCase()],concat:[$r,mc(Rr),(a,r)=>r.map(o=>Fs(o.evaluate(a))).join("")],"resolved-locale":[$r,[qh],(a,[r])=>r.evaluate(a).resolvedLocale()],random:[yn,[yn,yn,Rr],(a,r)=>{const[o,u,h]=r.map(y=>y.evaluate(a));if(o>u||o===u)return o;let g;if(typeof h=="string")g=function(y){let _=0;if(y.length===0)return _;for(let S=0;S<y.length;S++)_=(_<<5)-_+y.charCodeAt(S),_|=0;return _}(h);else{if(typeof h!="number")throw new Xi(`Invalid seed input: ${h}`);g=h}return o+L0(g)()*(u-o)}]});class su{constructor(r,o,u,h){this.expression=r,this._warningHistory={},this._evaluator=new _d(u,h),this._defaultValue=o?function(g){return g.type==="color"&&(Rd(g.default)||Array.isArray(g.default))?new Ar(0,0,0,0):g.type==="color"?Ar.parse(g.default)||null:g.default===void 0?null:g.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null,this.configDependencies=np(r)}evaluateWithoutErrorHandling(r,o,u,h,g,y,_,S){return this._evaluator.globals=r,this._evaluator.feature=o,this._evaluator.featureState=u,this._evaluator.canonical=h||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=_||null,this._evaluator.featureDistanceData=S||null,this.expression.evaluate(this._evaluator)}evaluate(r,o,u,h,g,y,_,S){this._evaluator.globals=r,this._evaluator.feature=o||null,this._evaluator.featureState=u||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=_||null,this._evaluator.featureDistanceData=S||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Xi(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${C.message}`)),this._defaultValue}}}function fp(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in fc}function Na(a,r,o,u){const h=new ip(fc,[],r?function(y){const _={color:us,string:$r,number:yn,enum:$r,boolean:Ir,formatted:md,resolvedImage:gd};return y.type==="array"?Ko(_[y.value]||Rr,y.length):_[y.type]}(r):void 0,void 0,void 0,o,u),g=h.parse(a,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?z0(new su(g,r,o,u)):vl(h.errors)}class Md{constructor(r,o,u,h){this.kind=r,this._styleExpression=o,this.isLightConstant=u,this.isLineProgressConstant=h,this.isStateDependent=r!=="constant"&&!tp(o.expression),this.configDependencies=np(o.expression)}evaluateWithoutErrorHandling(r,o,u,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(r,o,u,h,g,y)}evaluate(r,o,u,h,g,y){return this._styleExpression.evaluate(r,o,u,h,g,y)}}class Dd{constructor(r,o,u,h,g,y){this.kind=r,this.zoomStops=u,this._styleExpression=o,this.isStateDependent=r!=="camera"&&!tp(o.expression),this.isLightConstant=g,this.isLineProgressConstant=y,this.configDependencies=np(o.expression),this.interpolationType=h}evaluateWithoutErrorHandling(r,o,u,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(r,o,u,h,g,y)}evaluate(r,o,u,h,g,y){return this._styleExpression.evaluate(r,o,u,h,g,y)}interpolationFactor(r,o,u){return this.interpolationType?Ts.interpolationFactor(this.interpolationType,r,o,u):0}}function $0(a,r,o,u){if((a=Na(a,r,o,u)).result==="error")return a;const h=a.value.expression,g=nu(h);if(!g&&!Pd(r))return vl([new Cs("","data expressions not supported")]);const y=ru(h,["zoom","pitch","distance-from-center"]);if(!y&&!gm(r))return vl([new Cs("","zoom expressions not supported")]);const _=ru(h,["measure-light"]);if(!_&&!mm(r))return vl([new Cs("","measure-light expression not supported")]);const S=ru(h,["line-progress"]);if(!S&&!function(R){return pp(R.expression,"line-progress")}(r))return vl([new Cs("","line-progress expression not supported")]);const C=r.expression&&r.expression.relaxZoomRestriction,P=lu(h);return P||y||C?P instanceof Cs?vl([P]):P instanceof Ts&&!Ad(r)?vl([new Cs("",'"interpolate" expressions cannot be used with this property')]):z0(P?new Dd(g&&S?"camera":"composite",a.value,P.labels,P instanceof Ts?P.interpolation:void 0,_,S):new Md(g&&S?"constant":"source",a.value,_,S)):vl([new Cs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class au{constructor(r,o){this._parameters=r,this._specification=o,sc(this,F0(this._parameters,this._specification))}static deserialize(r){return new au(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function lu(a){let r=null;if(a instanceof cp)r=lu(a.result);else if(a instanceof Td){for(const o of a.args)if(r=lu(o),r)break}else(a instanceof kd||a instanceof Ts)&&a.input instanceof xo&&a.input.name==="zoom"&&(r=a);return r instanceof Cs||a.eachChild(o=>{const u=lu(o);u instanceof Cs?r=u:r&&u&&r!==u&&(r=new Cs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}var mp,vm,bm=function(){if(vm)return mp;vm=1,mp=r;var a=3;function r(o,u,h){var g=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var y=new Int32Array(this.arrayBuffer);o=y[0],this.d=(u=y[1])+2*(h=y[2]);for(var _=0;_<this.d*this.d;_++){var S=y[a+_],C=y[a+_+1];g.push(S===C?null:y.subarray(S,C))}var P=y[a+g.length+1];this.keys=y.subarray(y[a+g.length],P),this.bboxes=y.subarray(P),this.insert=this._insertReadonly}else{this.d=u+2*h;for(var R=0;R<this.d*this.d;R++)g.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=o,this.padding=h,this.scale=u/o,this.uid=0;var D=h/u*o;this.min=-D,this.max=o+D}return r.prototype.insert=function(o,u,h,g,y){this._forEachCell(u,h,g,y,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(u),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(y)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(o,u,h,g,y,_){this.cells[y].push(_)},r.prototype.query=function(o,u,h,g,y){var _=this.min,S=this.max;if(o<=_&&u<=_&&S<=h&&S<=g&&!y)return Array.prototype.slice.call(this.keys);var C=[];return this._forEachCell(o,u,h,g,this._queryCell,C,{},y),C},r.prototype._queryCell=function(o,u,h,g,y,_,S,C){var P=this.cells[y];if(P!==null)for(var R=this.keys,D=this.bboxes,B=0;B<P.length;B++){var $=P[B];if(S[$]===void 0){var q=4*$;(C?C(D[q+0],D[q+1],D[q+2],D[q+3]):o<=D[q+2]&&u<=D[q+3]&&h>=D[q+0]&&g>=D[q+1])?(S[$]=!0,_.push(R[$])):S[$]=!1}}},r.prototype._forEachCell=function(o,u,h,g,y,_,S,C){for(var P=this._convertToCellCoord(o),R=this._convertToCellCoord(u),D=this._convertToCellCoord(h),B=this._convertToCellCoord(g),$=P;$<=D;$++)for(var q=R;q<=B;q++){var W=this.d*q+$;if((!C||C(this._convertFromCellCoord($),this._convertFromCellCoord(q),this._convertFromCellCoord($+1),this._convertFromCellCoord(q+1)))&&y.call(this,o,u,h,g,W,_,S,C))return}},r.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},r.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,u=a+this.cells.length+1+1,h=0,g=0;g<this.cells.length;g++)h+=this.cells[g].length;var y=new Int32Array(u+h+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;for(var _=u,S=0;S<o.length;S++){var C=o[S];y[a+S]=_,y.set(C,_),_+=C.length}return y[a+o.length]=_,y.set(this.keys,_),y[a+o.length+1]=_+=this.keys.length,y.set(this.bboxes,_),_+=this.bboxes.length,y.buffer},mp}(),Va=cl(bm);const ja={};function tn(a,r,o={}){Object.defineProperty(a,"_classRegistryKey",{value:r,writable:!1}),ja[r]={klass:a,omit:o.omit||[]}}tn(Object,"Object"),Va.serialize=function(a,r){const o=a.toArrayBuffer();return r&&r.add(o),{buffer:o}},Va.deserialize=function(a){return new Va(a.buffer)},Object.defineProperty(Va,"name",{value:"Grid"}),tn(Va,"Grid"),typeof DOMMatrix<"u"&&tn(DOMMatrix,"DOMMatrix"),tn(Ar,"Color"),tn(Error,"Error"),tn(Zo,"Formatted"),tn(Gh,"FormattedSection"),tn(wr,"AJAXError"),tn(os,"ResolvedImage"),tn(au,"StylePropertyFunction"),tn(su,"StyleExpression",{omit:["_evaluator"]}),tn(cs,"ImageId"),tn(Fa,"ImageVariant"),tn(Dd,"ZoomDependentExpression"),tn(Md,"ZoomConstantExpression"),tn(xo,"CompoundExpression",{omit:["_evaluate"]});for(const a in fc)ja[fc[a]._classRegistryKey]||tn(fc[a],`Expression${a}`);function N0(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function V0(a){return self.ImageBitmap&&a instanceof ImageBitmap}function bl(a,r){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(N0(a)||V0(a))return r&&r.add(a),a;if(ArrayBuffer.isView(a))return r&&r.add(a.buffer),a;if(a instanceof ImageData)return r&&r.add(a.data.buffer),a;if(Array.isArray(a)){const o=[];for(const u of a)o.push(bl(u,r));return o}if(a instanceof Map){const o={$name:"Map",entries:[]};for(const[u,h]of a.entries())o.entries.push(bl(u),bl(h,r));return o}if(a instanceof Set){const o={$name:"Set"};let u=0;for(const h of a.values())o[++u]=bl(h);return o}if(a instanceof DOMMatrix){const o={$name:"DOMMatrix"},u=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const h of u)o[h]=a[h];return o}if(typeof a=="bigint")return{$name:"BigInt",value:a.toString()};if(typeof a=="object"){const o=a.constructor,u=o._classRegistryKey;if(!u)throw new Error(`Can't serialize object of unregistered class "${o.name}".`);const h=o.serialize?o.serialize(a,r):{};if(!o.serialize){for(const g in a)a.hasOwnProperty(g)&&(ja[u].omit.indexOf(g)>=0||(h[g]=bl(a[g],r)));a instanceof Error&&(h.message=a.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(h.$name=u),h}throw new Error("can't serialize object of type "+typeof a)}function _l(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||N0(a)||V0(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(_l);if(typeof a=="object"){const r=a.$name||"Object";if(r==="Map"){const h=a.entries||[],g=new Map;for(let y=0;y<h.length;y+=2)g.set(_l(h[y]),_l(h[y+1]));return g}if(r==="Set"){const h=new Set;for(const g of Object.keys(a))g!=="$name"&&h.add(_l(a[g]));return h}if(r==="DOMMatrix"){let h;return h=a.is2D?[a.a,a.b,a.c,a.d,a.e,a.f]:[a.m11,a.m12,a.m13,a.m14,a.m21,a.m22,a.m23,a.m24,a.m31,a.m32,a.m33,a.m34,a.m41,a.m42,a.m43,a.m44],new DOMMatrix(h)}if(r==="BigInt")return BigInt(a.value);const{klass:o}=ja[r];if(!o)throw new Error(`Can't deserialize unregistered class "${r}".`);if(o.deserialize)return o.deserialize(a);const u=Object.create(o.prototype);for(const h of Object.keys(a))h!=="$name"&&(u[h]=_l(a[h]));return u}throw new Error("can't deserialize object of type "+typeof a)}const En={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519,Osage:a=>a>=66736&&a<=66815,"CJK Unified Ideographs Extension B":a=>a>=131072&&a<=173791};function Ld(a){for(const r of a)if(_m(r.charCodeAt(0)))return!0;return!1}function T1(a){for(const r of a)if(!E1(r.charCodeAt(0)))return!1;return!0}function E1(a){return!(En.Arabic(a)||En["Arabic Supplement"](a)||En["Arabic Extended-A"](a)||En["Arabic Presentation Forms-A"](a)||En["Arabic Presentation Forms-B"](a))}function _m(a){return!(a!==746&&a!==747&&(a<4352||!(En["Bopomofo Extended"](a)||En.Bopomofo(a)||En["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||En["CJK Compatibility Ideographs"](a)||En["CJK Compatibility"](a)||En["CJK Radicals Supplement"](a)||En["CJK Strokes"](a)||!(!En["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||En["CJK Unified Ideographs Extension A"](a)||En["CJK Unified Ideographs"](a)||En["Enclosed CJK Letters and Months"](a)||En["Hangul Compatibility Jamo"](a)||En["Hangul Jamo Extended-A"](a)||En["Hangul Jamo Extended-B"](a)||En["Hangul Jamo"](a)||En["Hangul Syllables"](a)||En.Hiragana(a)||En["Ideographic Description Characters"](a)||En.Kanbun(a)||En["Kangxi Radicals"](a)||En["Katakana Phonetic Extensions"](a)||En.Katakana(a)&&a!==12540||!(!En["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!En["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||En["Unified Canadian Aboriginal Syllabics"](a)||En["Unified Canadian Aboriginal Syllabics Extended"](a)||En["Vertical Forms"](a)||En["Yijing Hexagram Symbols"](a)||En["Yi Syllables"](a)||En["Yi Radicals"](a))))}function j0(a){return!(_m(a)||function(r){return!!(En["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||En["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||En["Letterlike Symbols"](r)||En["Number Forms"](r)||En["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||En["Control Pictures"](r)&&r!==9251||En["Optical Character Recognition"](r)||En["Enclosed Alphanumerics"](r)||En["Geometric Shapes"](r)||En["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||En["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||En["CJK Symbols and Punctuation"](r)||En.Katakana(r)||En["Private Use Area"](r)||En["CJK Compatibility Forms"](r)||En["Small Form Variants"](r)||En["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(a))}function I1(a){return En.Arabic(a)||En["Arabic Supplement"](a)||En["Arabic Extended-A"](a)||En["Arabic Presentation Forms-A"](a)||En["Arabic Presentation Forms-B"](a)}function U0(a){return a>=1424&&a<=2303||En["Arabic Presentation Forms-A"](a)||En["Arabic Presentation Forms-B"](a)}function P1(a,r){return!(!r&&U0(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||En.Khmer(a))}function A1(a){for(const r of a)if(U0(r.charCodeAt(0)))return!0;return!1}const ds={unavailable:"unavailable",deferred:"deferred",loading:"loading",parsing:"parsing",parsed:"parsed",loaded:"loaded",error:"error"};let xm=null,Yo=ds.unavailable,Ua=null;const gc=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(Yo=ds.error),xm&&xm(a)};function gp(){yp.fire(new rc("pluginStateChange",{pluginStatus:Yo,pluginURL:Ua}))}const yp=new ic,cu=function(){return Yo},q0=function(){if(Yo!==ds.deferred||!Ua)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Yo=ds.loading,gp(),Ua&&dd({url:Ua},a=>{a?gc(a):(Yo=ds.loaded,gp())})},qa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Yo===ds.loaded||qa.applyArabicShaping!=null,isLoading:()=>Yo===ds.loading,setState(a){Yo=a.pluginStatus,Ua=a.pluginURL},isParsing:()=>Yo===ds.parsing,isParsed:()=>Yo===ds.parsed,getPluginURL:()=>Ua};class Ur{constructor(r,o){this.zoom=r,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.transition=o.transition,this.pitch=o.pitch,this.brightness=o.brightness,this.worldview=o.worldview):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(r){return function(o,u){for(const h of o)if(!P1(h.charCodeAt(0),u))return!1;return!0}(r,qa.isLoaded())}}class Od{constructor(r,o,u,h){this.property=r,this.value=o,this.expression=function(g,y,_,S){if(Rd(g))return new au(g,y);if(fp(g)||Array.isArray(g)&&g.length>0){const C=$0(g,y,_,S);if(C.result==="error")throw new Error(C.value.map(P=>`${P.key}: ${P.message}`).join(", "));return C.value}{let C=g;return typeof g=="string"&&y.type==="color"&&(C=Ar.parse(g)),{kind:"constant",configDependencies:new Set,evaluate:()=>C}}}(o===void 0?r.specification.default:o,r.specification,u,h)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,o,u){return this.property.possiblyEvaluate(this,r,o,u)}}class xl{constructor(r,o,u){this.property=r,this.value=new Od(r,void 0,o,u)}transitioned(r,o){return new G0(this.property,this.value,o,tt({},r.transition,this.transition),r.now)}untransitioned(){return new G0(this.property,this.value,null,{},0)}}class H0{constructor(r,o,u){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues),this._scope=o,this._options=u,this.configDependencies=new Set}getValue(r){return Nn(this._values[r].value.value)}setValue(r,o){this._values.hasOwnProperty(r)||(this._values[r]=new xl(this._values[r].property,this._scope,this._options)),this._values[r].value=new Od(this._values[r].property,o===null?void 0:Nn(o),this._scope,this._options),this._values[r].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[r].value.expression.configDependencies]))}setTransitionOrValue(r,o){o&&(this._options=o);const u=this._properties.properties;if(r)for(const h in r){const g=r[h];if(h.endsWith("-transition")){const y=h.slice(0,-11);u[y]&&this.setTransition(y,g)}else u.hasOwnProperty(h)&&this.setValue(h,g)}}getTransition(r){return Nn(this._values[r].transition)}setTransition(r,o){this._values.hasOwnProperty(r)||(this._values[r]=new xl(this._values[r].property)),this._values[r].transition=Nn(o)||void 0}serialize(){const r={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(r[o]=u);const h=this.getTransition(o);h!==void 0&&(r[`${o}-transition`]=h)}return r}transitioned(r,o){const u=new W0(this._properties);for(const h of Object.keys(this._values))u._values[h]=this._values[h].transitioned(r,o._values[h]);return u}untransitioned(){const r=new W0(this._properties);for(const o of Object.keys(this._values))r._values[o]=this._values[o].untransitioned();return r}}class G0{constructor(r,o,u,h,g){const y=h.delay||0,_=h.duration||0;g=g||0,this.property=r,this.value=o,this.begin=g+y,this.end=this.begin+_,r.specification.transition&&(h.delay||h.duration)&&(this.prior=u)}possiblyEvaluate(r,o,u){const h=r.now||0,g=this.value.possiblyEvaluate(r,o,u),y=this.prior;if(y){if(h>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(h<this.begin)return y.possiblyEvaluate(r,o,u);{const _=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(r,o,u),g,le(_))}}return g}}class W0{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,o,u){const h=new yc(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(r,o,u);return h}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class R1{constructor(r,o,u){this._properties=r,this._values=Object.create(r.defaultPropertyValues),this._scope=o,this._options=u,this.configDependencies=new Set}getValue(r){return Nn(this._values[r].value)}setValue(r,o){this._values[r]=new Od(this._values[r].property,o===null?void 0:Nn(o),this._scope,this._options),this._values[r].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[r].expression.configDependencies]))}serialize(){const r={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(r[o]=u)}return r}possiblyEvaluate(r,o,u){const h=new yc(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(r,o,u);return h}}class uu{constructor(r,o,u){this.property=r,this.value=o,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,o,u,h){return this.property.evaluate(this.value,this.parameters,r,o,u,h)}}class yc{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Mt{constructor(r){this.specification=r}possiblyEvaluate(r,o){return r.expression.evaluate(o)}interpolate(r,o,u){const h=fd[this.specification.type];return h?h(r,o,u):r}}class Zt{constructor(r,o){this.specification=r,this.overrides=o}possiblyEvaluate(r,o,u,h){return new uu(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(o,null,{},u,h)}:r.expression,o)}interpolate(r,o,u){if(r.value.kind!=="constant"||o.value.kind!=="constant")return r;if(r.value.value===void 0||o.value.value===void 0)return new uu(this,{kind:"constant",value:void 0},r.parameters);const h=fd[this.specification.type];return h?new uu(this,{kind:"constant",value:h(r.value.value,o.value.value,u)},r.parameters):r}evaluate(r,o,u,h,g,y){return r.kind==="constant"?r.value:r.evaluate(o,u,h,g,y)}}class vc{constructor(r){this.specification=r}possiblyEvaluate(r,o,u,h){return!!r.expression.evaluate(o,null,{},u,h)}interpolate(){return!1}}class Mi{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const o=new Ur(0,{});for(const u in r){const h=r[u];h.specification.overridable&&this.overridableProperties.push(u);const g=this.defaultPropertyValues[u]=new Od(h,void 0),y=this.defaultTransitionablePropertyValues[u]=new xl(h);this.defaultTransitioningPropertyValues[u]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=g.possiblyEvaluate(o)}}}tn(Zt,"DataDrivenProperty"),tn(Mt,"DataConstantProperty"),tn(vc,"ColorRampProperty");var We=JSON.parse('{"$version":8,"$root":{"version":{"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow"},"rain":{"type":"rain"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor"},"imports":{"type":"array","value":"import"},"iconsets":{"type":"iconsets"},"schema":{"type":"schema"},"sources":{"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"type":"featuresets"}},"featuresets":{"*":{"type":"featureset"}},"featureset":{"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"layer":{"type":"string"},"properties":{"type":"selectorProperty"},"featureNamespace":{"type":"string"},"_uniqueFeatureID":{"type":"boolean"}},"selectorProperty":{"*":{"type":"*"}},"model":{"type":"string"},"import":{"id":{"type":"string"},"url":{"type":"string"},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","expression":{}},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string"},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false},"shadow-quality":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]}},"shadow-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"type":"enum","values":{"sprite":1}},"url":{"type":"string"}},"iconset_source":{"type":{"type":"enum","values":{"source":1}},"source":{"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"type":"enum","values":{"video":1}},"urls":{"type":"array","value":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"type":"enum","values":{"image":1}},"url":{"type":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string"},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"building":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{},"clip":{}}},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_building","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{}},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","expression":{}},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-extrusion-edge-radius":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}}},"layout_building":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"building-roof-shape":{"type":"enum","values":{"flat":1,"hipped":1,"gabled":1,"parapet":1,"mansard":1,"skillion":1,"pyramidal":1},"default":"flat","expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"},"building-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","expression":{}},"line-cross-slope":{"type":"number","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","expression":{"parameters":["zoom"]}}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]}},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]}},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]}},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","expression":{"parameters":["zoom"]}},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]}},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]}},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_building":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*"}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"high-color":{"type":"color","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"space-color":{"type":"color","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"horizon-blend":{"type":"number","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.4,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","default":0.71,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.57,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","default":0.7,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective"}},"colorTheme":{"data":{"type":"string","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","expression":{}},"buildingFeaturesetId":{"type":"string","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator"},"center":{"type":"array","length":2,"value":"number","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string"},"exaggeration":{"type":"number","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_building","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"flat"},"fill-extrusion-base-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"terrain"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"type":"color","default":"#ffffff","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true}},"paint_building":{"building-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-ambient-occlusion-wall-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-cast-shadows":{"type":"boolean","default":true},"building-color":{"type":"color","default":"rgba(193, 154, 127, 1)","use-theme":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]},"property-type":"data-driven"},"building-emissive-strength":{"type":"number","default":0,"minimum":0,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-gradient":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["line-progress"]}},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1]},"line-trim-fade-range":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-trim-color":{"type":"color","default":"transparent","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-border-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"use-theme":true,"expression":{"interpolated":true,"parameters":["heatmap-density"]}},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-image-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{}},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-value"]}},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]}},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"raster-array-band":{"type":"string"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string"},"raster-particle-count":{"type":"number","default":512,"minimum":1},"raster-particle-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-particle-speed"]}},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-shadow-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-accent-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]}},"background-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]}},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]}},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]}},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"use-theme":true,"expression":{"interpolated":true,"parameters":["sky-radial-progress"]}},"sky-atmosphere-halo-color":{"type":"color","default":"white","use-theme":true},"sky-atmosphere-color":{"type":"color","default":"white","use-theme":true},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"use-theme":true,"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d"},"model-cast-shadows":{"type":"boolean","default":true},"model-receive-shadows":{"type":"boolean","default":true},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"model-front-cutoff":{"type":"array","value":"number","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"promoteId":{"*":{"type":"*"}}}');function na(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function vp(a){if(Array.isArray(a))return a.map(vp);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const r={};for(const o in a)r[o]=vp(a[o]);return r}return na(a)}function bp(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const r of a.slice(1))if(!bp(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}function wm(a,r="",o=null,u="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};bp(a)||(a=_p(a));const h=a;let g=!0;try{g=function(P){if(!du(P))return P;let R=vp(P);return Z0(R),R=K0(R),R}(h)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(h,null,2)}
        `)}let y=null,_=null;if(u!=="background"&&u!=="sky"&&u!=="slot"){_=We[`filter_${u}`];const P=Na(g,_,r,o);if(P.result==="error")throw new Error(P.value.map(R=>`${R.key}: ${R.message}`).join(", "));y=(R,D,B)=>P.value.evaluate(R,D,{},B)}let S=null,C=null;if(g!==h){const P=Na(h,_,r,o);if(P.result==="error")throw new Error(P.value.map(R=>`${R.key}: ${R.message}`).join(", "));S=(R,D,B,$,q)=>P.value.evaluate(R,D,{},B,void 0,void 0,$,q),C=!nu(P.value.expression)}return{filter:y,dynamicFilter:S||void 0,needGeometry:X0(g),needFeature:!!C}}function K0(a){if(!Array.isArray(a))return a;const r=function(o){if(M1.has(o[0])){for(let u=1;u<o.length;u++)if(du(o[u]))return!0}return o}(a);return r===!0?r:r.map(o=>K0(o))}function Z0(a){let r=!1;const o=[];if(a[0]==="case"){for(let u=1;u<a.length-1;u+=2)r=r||du(a[u]),o.push(a[u+1]);o.push(a[a.length-1])}else if(a[0]==="match"){r=r||du(a[1]);for(let u=2;u<a.length-1;u+=2)o.push(a[u+1]);o.push(a[a.length-1])}else if(a[0]==="step"){r=r||du(a[1]);for(let u=1;u<a.length-1;u+=2)o.push(a[u+1])}r&&(a.length=0,a.push("any",...o));for(let u=1;u<a.length;u++)Z0(a[u])}function du(a){if(!Array.isArray(a))return!1;if((r=a[0])==="pitch"||r==="distance-from-center")return!0;var r;for(let o=1;o<a.length;o++)if(du(a[o]))return!0;return!1}const M1=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function D1(a,r){return a<r?-1:a>r?1:0}function X0(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let r=1;r<a.length;r++)if(X0(a[r]))return!0;return!1}function _p(a){if(!a)return!0;const r=a[0];return a.length<=1?r!=="any":r==="=="?Sm(a[1],a[2],"=="):r==="!="?xp(Sm(a[1],a[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Sm(a[1],a[2],r):r==="any"?(o=a.slice(1),["any"].concat(o.map(_p))):r==="all"?["all"].concat(a.slice(1).map(_p)):r==="none"?["all"].concat(a.slice(1).map(_p).map(xp)):r==="in"?Cm(a[1],a.slice(2)):r==="!in"?xp(Cm(a[1],a.slice(2))):r==="has"?Y0(a[1]):r!=="!has"||xp(Y0(a[1]));var o}function Sm(a,r,o){switch(a){case"$type":return[`filter-type-${o}`,r];case"$id":return[`filter-id-${o}`,r];default:return[`filter-${o}`,a,r]}}function Cm(a,r){if(r.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(o=>typeof o!=typeof r[0])?["filter-in-large",a,["literal",r.sort(D1)]]:["filter-in-small",a,["literal",r]]}}function Y0(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function xp(a){return["!",a]}const zd="";function bc(a,r){return r?`${a}${zd}${r}`:a}const km="-transition",wl=new Set(["fill","line","background","hillshade","raster"]);class qo extends ic{constructor(r,o,u,h,g){if(super(),this.id=r.id,this.fqid=bc(this.id,u),this.type=r.type,this.scope=u,this.lut=h,this.options=g,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,r.type!=="custom"){if(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type&&r.type!=="background"&&r.type!=="sky"&&r.type!=="slot"){this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter;const y=Na(this.filter,We[`filter_${r.type}`]);y.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...y.value.configDependencies]))}if(r.slot&&(this.slot=r.slot),o.layout&&(this._unevaluatedLayout=new R1(o.layout,this.scope,g),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),o.paint){this._transitionablePaint=new H0(o.paint,this.scope,g);for(const y in r.paint)this.setPaintProperty(y,r.paint[y]);for(const y in r.layout)this.setLayoutProperty(y,r.layout[y]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new yc(o.paint)}}}onAdd(r){}onRemove(r){}isDraped(r){return!this.is3D(!0)&&wl.has(this.type)}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,o){if(this.type==="custom"&&r==="visibility")return void(this.visibility=o);const u=this._unevaluatedLayout;u._properties.properties[r]&&(u.setValue(r,o),this.configDependencies=new Set([...this.configDependencies,...u.configDependencies]),r==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(r){return r.endsWith(km)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,o){const u=this._transitionablePaint,h=u._properties.properties;if(r.endsWith(km)){const R=r.slice(0,-11);return h[R]&&u.setTransition(R,o||void 0),!1}if(!h[r])return!1;const g=u._values[r],y=g.value.isDataDriven(),_=g.value;u.setValue(r,o),this.configDependencies=new Set([...this.configDependencies,...u.configDependencies]),this._handleSpecialPaintPropertyUpdate(r);const S=u._values[r].value,C=S.isDataDriven(),P=r.endsWith("pattern")||r==="line-dasharray";return C||y||P||this._handleOverridablePaintPropertyUpdate(r,_,S)}_handleSpecialPaintPropertyUpdate(r){}getProgramIds(){return null}getDefaultProgramParams(r,o,u){return null}_handleOverridablePaintPropertyUpdate(r,o,u){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,o){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,o)}serialize(){return Fn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(r,o)=>!(r===void 0||o==="layout"&&!Object.keys(r).length||o==="paint"&&!Object.keys(r).length))}is3D(r){return!1}hasElevation(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const r in this.paint._values){const o=this.paint.get(r);if(o instanceof uu&&Pd(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}compileFilter(r){this._filterCompiled||(this._featureFilter=wm(this.filter,this.scope,r),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(r){this._stats&&(r.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(r){}queryIntersectsFeature(r,o,u,h,g,y,_,S,C){}}const L1={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Bd{constructor(r,o){this._structArray=r,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class yi{constructor(){this.capacity=-1,this.resize(0)}static serialize(r,o){return r._trim(),o&&o.add(r.arrayBuffer),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const o=Object.create(this.prototype);return o.arrayBuffer=r.arrayBuffer,o.length=r.length,o.capacity=r.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...r){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...r){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Sr(a,r=1){let o=0,u=0;return{members:a.map(h=>{const g=L1[h.type].BYTES_PER_ELEMENT,y=o=Tm(o,Math.max(r,g)),_=h.components||1;return u=Math.max(u,g),o+=g*_,{name:h.name,type:h.type,components:_,offset:y}}),size:Tm(o,Math.max(u,r)),alignment:r}}function Tm(a,r){return Math.ceil(a/r)*r}class Ha extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o){const u=this.length;return this.resize(u+1),this.emplace(u,r,o)}emplace(r,o,u){const h=2*r;return this.int16[h+0]=o,this.int16[h+1]=u,r}}Ha.prototype.bytesPerElement=4,tn(Ha,"StructArrayLayout2i4");class Fd extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u){const h=this.length;return this.resize(h+1),this.emplace(h,r,o,u)}emplace(r,o,u,h){const g=3*r;return this.int16[g+0]=o,this.int16[g+1]=u,this.int16[g+2]=h,r}}Fd.prototype.bytesPerElement=6,tn(Fd,"StructArrayLayout3i6");class hu extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,o,u,h)}emplace(r,o,u,h,g){const y=4*r;return this.int16[y+0]=o,this.int16[y+1]=u,this.int16[y+2]=h,this.int16[y+3]=g,r}}hu.prototype.bytesPerElement=8,tn(hu,"StructArrayLayout4i8");class Sl extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.float32[1*r+0]=o,r}}Sl.prototype.bytesPerElement=4,tn(Sl,"StructArrayLayout1f4");class Em extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u){const h=this.length;return this.resize(h+1),this.emplace(h,r,o,u)}emplace(r,o,u,h){const g=4*r,y=2*r;return this.int16[g+0]=o,this.int16[g+1]=u,this.float32[y+1]=h,r}}Em.prototype.bytesPerElement=8,tn(Em,"StructArrayLayout2i1f8");class wp extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u){const h=this.length;return this.resize(h+1),this.emplace(h,r,o,u)}emplace(r,o,u,h){const g=4*r;return this.int16[g+0]=o,this.int16[g+1]=u,this.int16[g+2]=h,r}}wp.prototype.bytesPerElement=8,tn(wp,"StructArrayLayout3i8");class pu extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,r,o,u,h,g)}emplace(r,o,u,h,g,y){const _=5*r;return this.int16[_+0]=o,this.int16[_+1]=u,this.int16[_+2]=h,this.int16[_+3]=g,this.int16[_+4]=y,r}}pu.prototype.bytesPerElement=10,tn(pu,"StructArrayLayout5i10");class Im extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,o,u,h,g,y,_)}emplace(r,o,u,h,g,y,_,S){const C=6*r,P=12*r,R=3*r;return this.int16[C+0]=o,this.int16[C+1]=u,this.uint8[P+4]=h,this.uint8[P+5]=g,this.uint8[P+6]=y,this.uint8[P+7]=_,this.float32[R+2]=S,r}}Im.prototype.bytesPerElement=12,tn(Im,"StructArrayLayout2i4ub1f12");class ga extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u){const h=this.length;return this.resize(h+1),this.emplace(h,r,o,u)}emplace(r,o,u,h){const g=3*r;return this.float32[g+0]=o,this.float32[g+1]=u,this.float32[g+2]=h,r}}ga.prototype.bytesPerElement=12,tn(ga,"StructArrayLayout3f12");class Cl extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,r,o,u,h,g)}emplace(r,o,u,h,g,y){const _=6*r,S=3*r;return this.uint16[_+0]=o,this.uint16[_+1]=u,this.uint16[_+2]=h,this.uint16[_+3]=g,this.float32[S+2]=y,r}}Cl.prototype.bytesPerElement=12,tn(Cl,"StructArrayLayout4ui1f12");class $d extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,o,u,h)}emplace(r,o,u,h,g){const y=4*r;return this.uint16[y+0]=o,this.uint16[y+1]=u,this.uint16[y+2]=h,this.uint16[y+3]=g,r}}$d.prototype.bytesPerElement=8,tn($d,"StructArrayLayout4ui8");class Sp extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y){const _=this.length;return this.resize(_+1),this.emplace(_,r,o,u,h,g,y)}emplace(r,o,u,h,g,y,_){const S=6*r;return this.int16[S+0]=o,this.int16[S+1]=u,this.int16[S+2]=h,this.int16[S+3]=g,this.int16[S+4]=y,this.int16[S+5]=_,r}}Sp.prototype.bytesPerElement=12,tn(Sp,"StructArrayLayout6i12");class fu extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y,_,S,C,P,R,D){const B=this.length;return this.resize(B+1),this.emplace(B,r,o,u,h,g,y,_,S,C,P,R,D)}emplace(r,o,u,h,g,y,_,S,C,P,R,D,B){const $=12*r;return this.int16[$+0]=o,this.int16[$+1]=u,this.int16[$+2]=h,this.int16[$+3]=g,this.uint16[$+4]=y,this.uint16[$+5]=_,this.uint16[$+6]=S,this.uint16[$+7]=C,this.int16[$+8]=P,this.int16[$+9]=R,this.int16[$+10]=D,this.int16[$+11]=B,r}}fu.prototype.bytesPerElement=24,tn(fu,"StructArrayLayout4i4ui4i24");class mu extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y){const _=this.length;return this.resize(_+1),this.emplace(_,r,o,u,h,g,y)}emplace(r,o,u,h,g,y,_){const S=10*r,C=5*r;return this.int16[S+0]=o,this.int16[S+1]=u,this.int16[S+2]=h,this.float32[C+2]=g,this.float32[C+3]=y,this.float32[C+4]=_,r}}mu.prototype.bytesPerElement=20,tn(mu,"StructArrayLayout3i3f20");class Eo extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,o,u,h)}emplace(r,o,u,h,g){const y=4*r;return this.float32[y+0]=o,this.float32[y+1]=u,this.float32[y+2]=h,this.float32[y+3]=g,r}}Eo.prototype.bytesPerElement=16,tn(Eo,"StructArrayLayout4f16");class gu extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint32[1*r+0]=o,r}}gu.prototype.bytesPerElement=4,tn(gu,"StructArrayLayout1ul4");class kl extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o){const u=this.length;return this.resize(u+1),this.emplace(u,r,o)}emplace(r,o,u){const h=2*r;return this.uint16[h+0]=o,this.uint16[h+1]=u,r}}kl.prototype.bytesPerElement=4,tn(kl,"StructArrayLayout2ui4");class Pm extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y,_,S,C,P,R,D,B){const $=this.length;return this.resize($+1),this.emplace($,r,o,u,h,g,y,_,S,C,P,R,D,B)}emplace(r,o,u,h,g,y,_,S,C,P,R,D,B,$){const q=20*r,W=10*r;return this.int16[q+0]=o,this.int16[q+1]=u,this.int16[q+2]=h,this.int16[q+3]=g,this.int16[q+4]=y,this.float32[W+3]=_,this.float32[W+4]=S,this.float32[W+5]=C,this.float32[W+6]=P,this.int16[q+14]=R,this.uint32[W+8]=D,this.uint16[q+18]=B,this.uint16[q+19]=$,r}}Pm.prototype.bytesPerElement=40,tn(Pm,"StructArrayLayout5i4f1i1ul2ui40");class Cp extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,o,u,h,g,y,_)}emplace(r,o,u,h,g,y,_,S){const C=8*r;return this.int16[C+0]=o,this.int16[C+1]=u,this.int16[C+2]=h,this.int16[C+4]=g,this.int16[C+5]=y,this.int16[C+6]=_,this.int16[C+7]=S,r}}Cp.prototype.bytesPerElement=16,tn(Cp,"StructArrayLayout3i2i2i16");class Am extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,r,o,u,h,g)}emplace(r,o,u,h,g,y){const _=4*r,S=8*r;return this.float32[_+0]=o,this.float32[_+1]=u,this.float32[_+2]=h,this.int16[S+6]=g,this.int16[S+7]=y,r}}Am.prototype.bytesPerElement=16,tn(Am,"StructArrayLayout2f1f2i16");class Nd extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y){const _=this.length;return this.resize(_+1),this.emplace(_,r,o,u,h,g,y)}emplace(r,o,u,h,g,y,_){const S=20*r,C=5*r;return this.uint8[S+0]=o,this.uint8[S+1]=u,this.float32[C+1]=h,this.float32[C+2]=g,this.float32[C+3]=y,this.float32[C+4]=_,r}}Nd.prototype.bytesPerElement=20,tn(Nd,"StructArrayLayout2ub4f20");class Io extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,u){const h=this.length;return this.resize(h+1),this.emplace(h,r,o,u)}emplace(r,o,u,h){const g=3*r;return this.uint16[g+0]=o,this.uint16[g+1]=u,this.uint16[g+2]=h,r}}Io.prototype.bytesPerElement=6,tn(Io,"StructArrayLayout3ui6");class Vd extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W,J,ce,ue,H,se){const de=this.length;return this.resize(de+1),this.emplace(de,r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W,J,ce,ue,H,se)}emplace(r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W,J,ce,ue,H,se,de){const be=30*r,Oe=15*r,Re=60*r;return this.int16[be+0]=o,this.int16[be+1]=u,this.int16[be+2]=h,this.float32[Oe+2]=g,this.float32[Oe+3]=y,this.uint16[be+8]=_,this.uint16[be+9]=S,this.uint32[Oe+5]=C,this.uint32[Oe+6]=P,this.uint32[Oe+7]=R,this.uint16[be+16]=D,this.uint16[be+17]=B,this.uint16[be+18]=$,this.float32[Oe+10]=q,this.float32[Oe+11]=W,this.uint8[Re+48]=J,this.uint8[Re+49]=ce,this.uint8[Re+50]=ue,this.uint32[Oe+13]=H,this.int16[be+28]=se,this.uint8[Re+58]=de,r}}Vd.prototype.bytesPerElement=60,tn(Vd,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Rm extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W,J,ce,ue,H,se,de,be,Oe,Re,Be,je,at,At,yt,Pt,Rt,ct){const Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W,J,ce,ue,H,se,de,be,Oe,Re,Be,je,at,At,yt,Pt,Rt,ct)}emplace(r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W,J,ce,ue,H,se,de,be,Oe,Re,Be,je,at,At,yt,Pt,Rt,ct,Tt){const ot=20*r,lt=40*r,Lt=80*r;return this.float32[ot+0]=o,this.float32[ot+1]=u,this.int16[lt+4]=h,this.int16[lt+5]=g,this.int16[lt+6]=y,this.int16[lt+7]=_,this.int16[lt+8]=S,this.int16[lt+9]=C,this.int16[lt+10]=P,this.int16[lt+11]=R,this.int16[lt+12]=D,this.uint16[lt+13]=B,this.uint16[lt+14]=$,this.uint16[lt+15]=q,this.uint16[lt+16]=W,this.uint16[lt+17]=J,this.uint16[lt+18]=ce,this.uint16[lt+19]=ue,this.uint16[lt+20]=H,this.uint16[lt+21]=se,this.uint16[lt+22]=de,this.uint16[lt+23]=be,this.uint16[lt+24]=Oe,this.uint16[lt+25]=Re,this.uint16[lt+26]=Be,this.uint16[lt+27]=je,this.uint32[ot+14]=at,this.float32[ot+15]=At,this.float32[ot+16]=yt,this.float32[ot+17]=Pt,this.float32[ot+18]=Rt,this.uint8[Lt+76]=ct,this.uint16[lt+39]=Tt,r}}Rm.prototype.bytesPerElement=80,tn(Rm,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class Mm extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y){const _=this.length;return this.resize(_+1),this.emplace(_,r,o,u,h,g,y)}emplace(r,o,u,h,g,y,_){const S=6*r;return this.float32[S+0]=o,this.float32[S+1]=u,this.float32[S+2]=h,this.float32[S+3]=g,this.float32[S+4]=y,this.float32[S+5]=_,r}}Mm.prototype.bytesPerElement=24,tn(Mm,"StructArrayLayout6f24");class Tl extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,r,o,u,h,g)}emplace(r,o,u,h,g,y){const _=5*r;return this.float32[_+0]=o,this.float32[_+1]=u,this.float32[_+2]=h,this.float32[_+3]=g,this.float32[_+4]=y,r}}Tl.prototype.bytesPerElement=20,tn(Tl,"StructArrayLayout5f20");class jd extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,o,u,h,g,y,_)}emplace(r,o,u,h,g,y,_,S){const C=7*r;return this.float32[C+0]=o,this.float32[C+1]=u,this.float32[C+2]=h,this.float32[C+3]=g,this.float32[C+4]=y,this.float32[C+5]=_,this.float32[C+6]=S,r}}jd.prototype.bytesPerElement=28,tn(jd,"StructArrayLayout7f28");class Dm extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y,_,S,C,P,R){const D=this.length;return this.resize(D+1),this.emplace(D,r,o,u,h,g,y,_,S,C,P,R)}emplace(r,o,u,h,g,y,_,S,C,P,R,D){const B=11*r;return this.float32[B+0]=o,this.float32[B+1]=u,this.float32[B+2]=h,this.float32[B+3]=g,this.float32[B+4]=y,this.float32[B+5]=_,this.float32[B+6]=S,this.float32[B+7]=C,this.float32[B+8]=P,this.float32[B+9]=R,this.float32[B+10]=D,r}}Dm.prototype.bytesPerElement=44,tn(Dm,"StructArrayLayout11f44");class kp extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y,_,S,C){const P=this.length;return this.resize(P+1),this.emplace(P,r,o,u,h,g,y,_,S,C)}emplace(r,o,u,h,g,y,_,S,C,P){const R=9*r;return this.float32[R+0]=o,this.float32[R+1]=u,this.float32[R+2]=h,this.float32[R+3]=g,this.float32[R+4]=y,this.float32[R+5]=_,this.float32[R+6]=S,this.float32[R+7]=C,this.float32[R+8]=P,r}}kp.prototype.bytesPerElement=36,tn(kp,"StructArrayLayout9f36");class _c extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o){const u=this.length;return this.resize(u+1),this.emplace(u,r,o)}emplace(r,o,u){const h=2*r;return this.float32[h+0]=o,this.float32[h+1]=u,r}}_c.prototype.bytesPerElement=8,tn(_c,"StructArrayLayout2f8");class Lm extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,o,u,h)}emplace(r,o,u,h,g){const y=6*r;return this.uint32[3*r+0]=o,this.uint16[y+2]=u,this.uint16[y+3]=h,this.uint16[y+4]=g,r}}Lm.prototype.bytesPerElement=12,tn(Lm,"StructArrayLayout1ul3ui12");class Ud extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint16[1*r+0]=o,r}}Ud.prototype.bytesPerElement=2,tn(Ud,"StructArrayLayout1ui2");class yu extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W){const J=this.length;return this.resize(J+1),this.emplace(J,r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W)}emplace(r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W,J){const ce=16*r;return this.float32[ce+0]=o,this.float32[ce+1]=u,this.float32[ce+2]=h,this.float32[ce+3]=g,this.float32[ce+4]=y,this.float32[ce+5]=_,this.float32[ce+6]=S,this.float32[ce+7]=C,this.float32[ce+8]=P,this.float32[ce+9]=R,this.float32[ce+10]=D,this.float32[ce+11]=B,this.float32[ce+12]=$,this.float32[ce+13]=q,this.float32[ce+14]=W,this.float32[ce+15]=J,r}}yu.prototype.bytesPerElement=64,tn(yu,"StructArrayLayout16f64");class qd extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,h,g,y,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,o,u,h,g,y,_)}emplace(r,o,u,h,g,y,_,S){const C=10*r,P=5*r;return this.uint16[C+0]=o,this.uint16[C+1]=u,this.uint16[C+2]=h,this.uint16[C+3]=g,this.float32[P+2]=y,this.float32[P+3]=_,this.float32[P+4]=S,r}}qd.prototype.bytesPerElement=20,tn(qd,"StructArrayLayout4ui3f20");class Om extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.int16[1*r+0]=o,r}}Om.prototype.bytesPerElement=2,tn(Om,"StructArrayLayout1i2");class Tp extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint8[1*r+0]=o,r}}Tp.prototype.bytesPerElement=1,tn(Tp,"StructArrayLayout1ub1");class J0 extends Bd{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}J0.prototype.size=40;class Ep extends Pm{get(r){return new J0(this,r)}}tn(Ep,"CollisionBoxArray");class Q0 extends Bd{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(r){this._structArray.uint8[this._pos1+49]=r}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(r){this._structArray.uint8[this._pos1+50]=r}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(r){this._structArray.uint32[this._pos4+13]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(r){this._structArray.uint8[this._pos1+58]=r}}Q0.prototype.size=60;class ev extends Vd{get(r){return new Q0(this,r)}}tn(ev,"PlacedSymbolArray");class tv extends Bd{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(r){this._structArray.uint32[this._pos4+14]=r}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(r){this._structArray.float32[this._pos4+18]=r}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}tv.prototype.size=80;class nv extends Rm{get(r){return new tv(this,r)}}tn(nv,"SymbolInstanceArray");class zm extends Sl{getoffsetX(r){return this.float32[1*r+0]}}tn(zm,"GlyphOffsetArray");class rv extends Ha{getx(r){return this.int16[2*r+0]}gety(r){return this.int16[2*r+1]}}tn(rv,"SymbolLineVertexArray");class iv extends Bd{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}iv.prototype.size=12;class ov extends Lm{get(r){return new iv(this,r)}}tn(ov,"FeatureIndexArray");class sv extends kl{geta_centroid_pos0(r){return this.uint16[2*r+0]}geta_centroid_pos1(r){return this.uint16[2*r+1]}}tn(sv,"FillExtrusionCentroidArray");class av extends Bd{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}av.prototype.size=6;class lv extends Fd{get(r){return new av(this,r)}}tn(lv,"FillExtrusionWallArray");const O1=Sr([{name:"a_pos",components:2,type:"Int16"}],4),z1=Sr([{name:"a_circle_z_offset",components:1,type:"Float32"}],4),Ip=Sr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class zi{constructor(r=[]){this.segments=r}_prepareSegment(r,o,u,h){let g=this.segments[this.segments.length-1];return r>zi.MAX_VERTEX_ARRAY_LENGTH&&Zn(`Max vertices per segment is ${zi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!g||g.vertexLength+r>zi.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==h)&&(g={vertexOffset:o,primitiveOffset:u,vertexLength:0,primitiveLength:0},h!==void 0&&(g.sortKey=h),this.segments.push(g)),g}prepareSegment(r,o,u,h){return this._prepareSegment(r,o.length,u.length,h)}get(){return this.segments}destroy(){for(const r of this.segments)for(const o in r.vaos)r.vaos[o].destroy()}static simpleSegment(r,o,u,h){return new zi([{vertexOffset:r,primitiveOffset:o,vertexLength:u,primitiveLength:h,vaos:{},sortKey:0}])}}function cv(a,r){return 256*(a=Te(Math.floor(a),0,255))+Te(Math.floor(r),0,255)}zi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,tn(zi,"SegmentVector");const Pp=Sr([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Bm=Sr([{name:"a_pattern_b",components:4,type:"Uint16"}]),uv=Sr([{name:"a_dash",components:4,type:"Uint16"}]);class Hd{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(r,o,u,h){this.ids.push(Fm(r)),this.positions.push(o,u,h)}eachPosition(r,o){const u=Fm(r);let h=0,g=this.ids.length-1;for(;h<g;){const y=h+g>>1;this.ids[y]>=u?g=y:h=y+1}for(;this.ids[h]===u;)o(this.positions[3*h],this.positions[3*h+1],this.positions[3*h+2]),h++}static serialize(r,o){const u=new Float64Array(r.ids),h=new Uint32Array(r.positions);return Ap(u,h,0,u.length-1),o&&(o.add(u.buffer),o.add(h.buffer)),{ids:u,positions:h}}static deserialize(r){const o=new Hd;let u;o.ids=r.ids,o.positions=r.positions;for(const h of o.ids)h!==u&&o.uniqueIds.push(h),u=h;return o.indexed=!0,o}}function Fm(a){const r=+a;return!isNaN(r)&&Number.MIN_SAFE_INTEGER<=r&&r<=Number.MAX_SAFE_INTEGER?r:pd(String(a))}function Ap(a,r,o,u){for(;o<u;){const h=a[o+u>>1];let g=o-1,y=u+1;for(;;){do g++;while(a[g]<h);do y--;while(a[y]>h);if(g>=y)break;Gd(a,g,y),Gd(r,3*g,3*y),Gd(r,3*g+1,3*y+1),Gd(r,3*g+2,3*y+2)}y-o<u-y?(Ap(a,r,o,y),o=y+1):(Ap(a,r,y+1,u),u=y)}}function Gd(a,r,o){const u=a[r];a[r]=a[o],a[o]=u}tn(Hd,"FeaturePositionMap");class Ga{constructor(r){this.gl=r.gl,this.initialized=!1}fetchUniformLocation(r,o){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(r,o),this.initialized=!0),!!this.location}set(r,o,u){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Rp extends Ga{constructor(r){super(r),this.current=0}set(r,o,u){this.fetchUniformLocation(r,o)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}}class Wi extends Ga{constructor(r){super(r),this.current=0}set(r,o,u){this.fetchUniformLocation(r,o)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class ya extends Ga{constructor(r){super(r),this.current=[0,0]}set(r,o,u){this.fetchUniformLocation(r,o)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}}class Wd extends Ga{constructor(r){super(r),this.current=[0,0,0]}set(r,o,u){this.fetchUniformLocation(r,o)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}}class Mp extends Ga{constructor(r){super(r),this.current=[0,0,0,0]}set(r,o,u){this.fetchUniformLocation(r,o)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class dv extends Ga{constructor(r){super(r),this.current=Ar.transparent.toPremultipliedRenderColor(null)}set(r,o,u){this.fetchUniformLocation(r,o)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const B1=new Float32Array(16);class vu extends Ga{constructor(r){super(r),this.current=B1}set(r,o,u){if(this.fetchUniformLocation(r,o)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let h=1;h<16;h++)if(u[h]!==this.current[h]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}}const $m=new Float32Array(9),va=new Float32Array(4);class Kd extends Ga{constructor(r){super(r),this.current=va}set(r,o,u){if(this.fetchUniformLocation(r,o)){for(let h=0;h<4;h++)if(u[h]!==this.current[h]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}}}function Nm(a){return[cv(255*a.r,255*a.g),cv(255*a.b,255*a.a)]}class Zd{constructor(r,o,u,h){this.value=r,this.uniformNames=o.map(g=>`u_${g}`),this.type=u,this.context=h}setUniform(r,o,u,h,g){const y=h.constantOr(this.value);o.set(r,g,y instanceof Ar?y.toPremultipliedRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):y)}getBinding(r,o){return this.type==="color"?new dv(r):new Wi(r)}}class bu{constructor(r,o){this.uniformNames=o.map(u=>`u_${u}`),this.pattern=null,this.patternTransition=null,this.pixelRatio=1}setConstantPatternPositions(r,o){this.pixelRatio=r.pixelRatio||1,this.pattern=r.tl.concat(r.br),this.patternTransition=o?o.tl.concat(o.br):this.pattern}setUniform(r,o,u,h,g){let y=null;g!=="u_pattern"&&g!=="u_dash"||(y=this.pattern),g==="u_pattern_b"&&(y=this.patternTransition),g==="u_pixel_ratio"&&(y=this.pixelRatio),y&&o.set(r,g,y)}getBinding(r,o){return o==="u_pattern"||o==="u_pattern_b"||o==="u_dash"?new Mp(r):new Wi(r)}}class Wa{constructor(r,o,u,h){this.expression=r,this.type=u,this.maxValue=0,this.paintVertexAttributes=o.map(g=>({name:`a_${g}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(r,o,u,h,g,y,_,S){const C=this.paintVertexArray.length,P=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new Ur(0,{brightness:y,worldview:S}),o,{},g,h,_):this.expression.kind==="constant"&&this.expression.value,R=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ur(0,{brightness:y,worldview:S}),o,{},g,h,_):this.lutExpression.value)==="none";this.paintVertexArray.resize(r),this._setPaintValue(C,r,P,R?null:this.context.lut)}updatePaintArray(r,o,u,h,g,y,_,S){const C=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:_,worldview:S},u,h,void 0,g):this.expression.kind==="constant"&&this.expression.value,P=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ur(0,{brightness:_,worldview:S}),u,h,void 0,g):this.lutExpression.value)==="none";this._setPaintValue(r,o,C,P?null:this.context.lut)}_setPaintValue(r,o,u,h){if(this.type==="color"){const g=Nm(u.toPremultipliedRenderColor(h));for(let y=r;y<o;y++)this.paintVertexArray.emplace(y,g[0],g[1])}else{for(let g=r;g<o;g++)this.paintVertexArray.emplace(g,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ra{constructor(r,o,u,h,g,y){this.expression=r,this.uniformNames=o.map(_=>`u_${_}_t`),this.type=u,this.useIntegerZoom=h,this.context=g,this.maxValue=0,this.paintVertexAttributes=o.map(_=>({name:`a_${_}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(r,o,u,h,g,y,_,S){const C=this.expression.evaluate(new Ur(this.context.zoom,{brightness:y,worldview:S}),o,{},g,h,_),P=this.expression.evaluate(new Ur(this.context.zoom+1,{brightness:y,worldview:S}),o,{},g,h,_),R=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ur(0,{brightness:y,worldview:S}),o,{},g,h,_):this.lutExpression.value)==="none",D=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(D,r,C,P,R?null:this.context.lut)}updatePaintArray(r,o,u,h,g,y,_,S){const C=this.expression.evaluate({zoom:this.context.zoom,brightness:_,worldview:S},u,h,void 0,g),P=this.expression.evaluate({zoom:this.context.zoom+1,brightness:_,worldview:S},u,h,void 0,g),R=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ur(0,{brightness:_,worldview:S}),u,h,void 0,g):this.lutExpression.value)==="none";this._setPaintValue(r,o,C,P,R?null:this.context.lut)}_setPaintValue(r,o,u,h,g){if(this.type==="color"){const y=Nm(u.toPremultipliedRenderColor(g)),_=Nm(u.toPremultipliedRenderColor(g));for(let S=r;S<o;S++)this.paintVertexArray.emplace(S,y[0],y[1],_[0],_[1])}else{for(let y=r;y<o;y++)this.paintVertexArray.emplace(y,u,h);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,o,u,h,g){const y=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,_=Te(this.expression.interpolationFactor(y,this.context.zoom,this.context.zoom+1),0,1);o.set(r,g,_)}getBinding(r,o){return new Wi(r)}}class js{constructor(r,o,u,h,g){this.expression=r,this.layerId=g,this.paintVertexAttributes=(u==="array"?uv:Pp).members;for(let y=0;y<o.length;++y);this.paintVertexArray=new h,this.paintTransitionVertexArray=new $d}populatePaintArray(r,o,u,h){const g=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValues(g,r,o.patterns&&o.patterns[this.layerId],u)}updatePaintArray(r,o,u,h,g,y,_){this._setPaintValues(r,o,u.patterns&&u.patterns[this.layerId],y)}_setPaintValues(r,o,u,h){if(!h||!u)return;const g=h[u[0]],y=h[u[1]];if(g){if(g){const{tl:_,br:S,pixelRatio:C}=g;for(let P=r;P<o;P++)this.paintVertexArray.emplace(P,_[0],_[1],S[0],S[1],C)}if(y){this.paintTransitionVertexArray.resize(this.paintVertexArray.length);const{tl:_,br:S}=y;for(let C=r;C<o;C++)this.paintTransitionVertexArray.emplace(C,_[0],_[1],S[0],S[1])}}}upload(r){const o=this.expression.isStateDependent||!this.expression.isLightConstant;this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,o)),this.paintTransitionVertexArray&&this.paintTransitionVertexArray.length&&(this.paintTransitionVertexBuffer=r.createVertexBuffer(this.paintTransitionVertexArray,Bm.members,o))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy(),this.paintTransitionVertexBuffer&&this.paintTransitionVertexBuffer.destroy()}}class _u{constructor(r,o,u=()=>!0){this.binders={},this._buffers=[],this.context=o;const h=[];for(const g in r.paint._values){const y=r.paint.get(g);if(g.endsWith("-use-theme")||!u(g)||!(y instanceof uu&&Pd(y.property.specification)))continue;const _=c(g,r.type),S=y.value,C=y.property.specification.type,P=!!y.property.useIntegerZoom,R=g==="line-dasharray"||g.endsWith("pattern"),D=r.paint.get(`${g}-use-theme`),B=g==="line-dasharray"&&r.layout.get("line-cap").value.kind!=="constant"||D&&D.value.kind!=="constant";if(S.kind!=="constant"||B)if(S.kind==="source"||B||R){const $=b(g,C,"source");this.binders[g]=R?new js(S,_,C,$,r.id):new Wa(S,_,C,$),h.push(`/a_${g}`)}else{const $=b(g,C,"composite");this.binders[g]=new ra(S,_,C,P,o,$),h.push(`/z_${g}`)}else this.binders[g]=R?new bu(S.value,_):new Zd(S.value,_,C,o),h.push(`/u_${g}`);D&&(this.binders[g].lutExpression=D.value)}this.cacheKey=h.sort().join("")}getMaxValue(r){const o=this.binders[r];return o instanceof Wa||o instanceof ra?o.maxValue:0}populatePaintArrays(r,o,u,h,g,y,_,S){for(const C in this.binders){const P=this.binders[C];P.context=this.context,(P instanceof Wa||P instanceof ra||P instanceof js)&&P.populatePaintArray(r,o,u,h,g,y,_,S)}}setConstantPatternPositions(r,o){for(const u in this.binders){const h=this.binders[u];h instanceof bu&&h.setConstantPatternPositions(r,o)}}getPatternTransitionVertexBuffer(r){const o=this.binders[r];return o instanceof js?o.paintTransitionVertexBuffer:null}updatePaintArrays(r,o,u,h,g,y,_,S,C,P){let R=!1;const D=Object.keys(r),B=D.length!==0&&!S,$=B?D:o.uniqueIds;this.context.lut=g.lut;for(const q in this.binders){const W=this.binders[q];if(W.context=this.context,(W instanceof Wa||W instanceof ra||W instanceof js)&&W.expression&&W.expression.kind&&W.expression.kind!=="constant"&&(W.expression.isStateDependent===!0||W.expression.isLightConstant===!1)){const J=g.paint.get(q);W.expression=J.value;for(const ce of $){const ue=r[ce.toString()];o.eachPosition(ce,(H,se,de)=>{const be=h.feature(H);W.updatePaintArray(se,de,be,ue,y,_,C,P)})}if(!B)for(const ce of u.uniqueIds){const ue=r[ce.toString()];u.eachPosition(ce,(H,se,de)=>{const be=h.feature(H);W.updatePaintArray(se,de,be,ue,y,_,C,P)})}R=!0}}return R}defines(){const r=[];for(const o in this.binders){const u=this.binders[o];(u instanceof Zd||u instanceof bu)&&r.push(...u.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return r}getBinderAttributes(){const r=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof Wa||u instanceof ra||u instanceof js)for(let h=0;h<u.paintVertexAttributes.length;h++)r.push(u.paintVertexAttributes[h].name);if(u instanceof js)for(let h=0;h<Bm.members.length;h++)r.push(Bm.members[h].name)}return r}getBinderUniforms(){const r=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof Zd||u instanceof bu||u instanceof ra)for(const h of u.uniformNames)r.push(h)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r){const o=[];for(const u in this.binders){const h=this.binders[u];if(h instanceof Zd||h instanceof bu||h instanceof ra)for(const g of h.uniformNames)o.push({name:g,property:u,binding:h.getBinding(r,g)})}return o}setUniforms(r,o,u,h,g){for(const{name:y,property:_,binding:S}of u)this.binders[_].setUniform(r,S,g,h.get(_),y)}updatePaintBuffers(){this._buffers=[];for(const r in this.binders){const o=this.binders[r];(o instanceof Wa||o instanceof ra||o instanceof js)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer),o instanceof js&&o.paintTransitionVertexBuffer&&this._buffers.push(o.paintTransitionVertexBuffer)}}upload(r){for(const o in this.binders){const u=this.binders[o];(u instanceof Wa||u instanceof ra||u instanceof js)&&u.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const o=this.binders[r];(o instanceof Wa||o instanceof ra||o instanceof js)&&o.destroy()}}}class p{constructor(r,o,u=()=>!0){this.programConfigurations={};for(const h of r)this.programConfigurations[h.id]=new _u(h,o,u);this.needsUpload=!1,this._featureMap=new Hd,this._featureMapWithoutIds=new Hd,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(r,o,u,h,g,y,_,S,C){for(const P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(r,o,h,g,y,_,S,C);o.id!==void 0?this._featureMap.add(o.id,u,this._bufferOffset,r):(this._featureMapWithoutIds.add(this._idlessCounter,u,this._bufferOffset,r),this._idlessCounter+=1),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,o,u,h,g,y,_,S){for(const C of u)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(r,this._featureMap,this._featureMapWithoutIds,o,C,h,g,y,_||0,S)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}const i={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio","pattern_b"],"fill-pattern":["pattern","pixel_ratio","pattern_b"],"fill-extrusion-pattern":["pattern","pixel_ratio","pattern_b"],"line-dasharray":["dash"],"fill-bridge-guard-rail-color":["structure_color"],"fill-tunnel-structure-color":["structure_color"]};function c(a,r){return i[a]||[a.replace(`${r}-`,"").replace(/-/g,"_")]}const f={"line-pattern":{source:Cl,composite:Cl},"fill-pattern":{source:Cl,composite:Cl},"fill-extrusion-pattern":{source:Cl,composite:Cl},"line-dasharray":{source:$d,composite:$d}},v={color:{source:_c,composite:Eo},number:{source:Sl,composite:_c}};function b(a,r,o){const u=f[a];return u&&u[o]||v[r][o]}tn(Zd,"ConstantBinder"),tn(bu,"PatternConstantBinder"),tn(Wa,"SourceExpressionBinder"),tn(js,"PatternCompositeBinder"),tn(ra,"CompositeExpressionBinder"),tn(_u,"ProgramConfiguration",{omit:["_buffers"]}),tn(p,"ProgramConfigurationSet");const w=Ut/Math.PI/2,k=5,I=6,L=16383,O=64,N=[O,32,16],F=-w,V=w;function Z(a,r,o,u=w){return o=Cr(o),[a*Math.sin(o)*u,-r*u,a*Math.cos(o)*u]}function G(a,r,o){return Z(Math.cos(Cr(a)),Math.sin(Cr(a)),r,o)}const Y=63710088e-1,ee=2*Math.PI*Y;class ae{constructor(r,o){if(isNaN(r)||isNaN(o))throw new Error(`Invalid LngLat object: (${r}, ${o})`);if(this.lng=+r,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ae(et(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const o=Math.PI/180,u=this.lat*o,h=r.lat*o,g=Math.sin(u)*Math.sin(h)+Math.cos(u)*Math.cos(h)*Math.cos((r.lng-this.lng)*o);return Y*Math.acos(Math.min(g,1))}toBounds(r=0){const o=360*r/40075017,u=o/Math.cos(Math.PI/180*this.lat);return new ve({lng:this.lng-u,lat:this.lat-o},{lng:this.lng+u,lat:this.lat+o})}toEcef(r){return G(this.lat,this.lng,w+r*w/Y)}static convert(r){if(r instanceof ae)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new ae(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new ae(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ve{constructor(r,o){if(r)if(o)this.setSouthWest(r).setNorthEast(o);else if(r.length===4){const u=r;this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]])}else{const u=r;this.setSouthWest(u[0]).setNorthEast(u[1])}}setNorthEast(r){return this._ne=r instanceof ae?new ae(r.lng,r.lat):ae.convert(r),this}setSouthWest(r){return this._sw=r instanceof ae?new ae(r.lng,r.lat):ae.convert(r),this}extend(r){const o=this._sw,u=this._ne;let h,g;if(r instanceof ae)h=r,g=r;else{if(!(r instanceof ve))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(ve.convert(r)):this.extend(ae.convert(r)):typeof r=="object"&&r!==null&&r.hasOwnProperty("lat")&&(r.hasOwnProperty("lon")||r.hasOwnProperty("lng"))?this.extend(ae.convert(r)):this;if(h=r._sw,g=r._ne,!h||!g)return this}return o||u?(o.lng=Math.min(h.lng,o.lng),o.lat=Math.min(h.lat,o.lat),u.lng=Math.max(g.lng,u.lng),u.lat=Math.max(g.lat,u.lat)):(this._sw=new ae(h.lng,h.lat),this._ne=new ae(g.lng,g.lat)),this}getCenter(){return new ae((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ae(this.getWest(),this.getNorth())}getSouthEast(){return new ae(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:o,lat:u}=ae.convert(r);let h=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&h}static convert(r){if(r)return r instanceof ve?r:new ve(r)}}const we=0,Pe=25.5;function Ee(a){return ee*Math.cos(a*Math.PI/180)}function ke(a){return(180+a)/360}function Se(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Ae(a,r){return a/Ee(r)}function De(a){return 360*a-180}function Ze(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function Ye(a,r){return a*Ee(Ze(r))}const ht=85.051129;function pt(a){return Math.cos(Cr(Te(a,-85.051129,ht)))}function It(a,r){const o=Te(r,we,Pe),u=Math.pow(2,o);return pt(a)*ee/(512*u)}function Ge(a){return 1/Math.cos(a*Math.PI/180)}function st(a,r=0){const o=Math.exp(Math.PI*(1-(a.y+r/Ut)/(1<<a.z)*2));return 80150034*o/(o*o+1)/Ut/(1<<a.z)}class Fe{constructor(r,o,u=0){this.x=+r,this.y=+o,this.z=+u}static fromLngLat(r,o=0){const u=ae.convert(r);return new Fe(ke(u.lng),Se(u.lat),Ae(o,u.lat))}toLngLat(){return new ae(De(this.x),Ze(this.y))}toAltitude(){return Ye(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ee*Ge(Ze(this.y))}}function gt(a,r,o,u,h,g,y,_,S){const C=(r+u)/2,P=(o+h)/2,R=new Vt(C,P);_(R),function(D,B,$,q,W,J){const ce=$-W,ue=q-J;return Math.abs((q-B)*ce-($-D)*ue)/Math.hypot(ce,ue)}(R.x,R.y,g.x,g.y,y.x,y.y)>=S?(gt(a,r,o,C,P,g,R,_,S),gt(a,C,P,u,h,R,y,_,S)):a.push(y)}function nt(a,r,o){let u=a[0],h=u.x,g=u.y;r(u);const y=[u];for(let _=1;_<a.length;_++){const S=a[_],{x:C,y:P}=S;r(S),gt(y,h,g,C,P,u,S,r,o),h=C,g=P,u=S}return y}function St(a,r,o,u){if(u(r,o)){const h=r.add(o)._mult(.5);St(a,r,h,u),St(a,h,o,u)}else a.push(o)}function Bt(a,r){let o=a[0];const u=[o];for(let h=1;h<a.length;h++){const g=a[h];St(u,o,g,r),o=g}return u}const mt=Math.pow(2,14)-1,Ot=-mt-1;function nn(a,r){const o=Math.round(a.x*r),u=Math.round(a.y*r);return a.x=Te(o,Ot,mt),a.y=Te(u,Ot,mt),(o<a.x||o>a.x+1||u<a.y||u>a.y+1)&&Zn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function rn(a,r,o){const u=a.loadGeometry(),h=a.extent,g=Ut/h;if(r&&o&&o.projection.isReprojectedInTileSpace){const y=1<<r.z,{scale:_,x:S,y:C,projection:P}=o,R=D=>{const B=De((r.x+D.x/h)/y),$=Ze((r.y+D.y/h)/y),q=P.project(B,$);D.x=(q.x*_-S)*h,D.y=(q.y*_-C)*h};for(let D=0;D<u.length;D++)if(a.type!==1)u[D]=nt(u[D],R,1);else{const B=[];for(const $ of u[D])$.x<0||$.x>=h||$.y<0||$.y>=h||(R($),B.push($));u[D]=B}}for(const y of u)for(const _ of y)nn(_,g);return u}function Yt(a,r){return{type:a.type,id:a.id,properties:a.properties,geometry:r?rn(a):[]}}var mn,bn,Cn,Bn,Jn,Mr,ii,Br={};function Nr(){if(bn)return mn;bn=1;var a=Yl();function r(h,g,y,_,S){this.properties={},this.extent=y,this.type=0,this._pbf=h,this._geometry=-1,this._keys=_,this._values=S,h.readFields(o,this,g)}function o(h,g,y){h==1?g.id=y.readVarint():h==2?function(_,S){for(var C=_.readVarint()+_.pos;_.pos<C;){var P=S._keys[_.readVarint()],R=S._values[_.readVarint()];S.properties[P]=R}}(y,g):h==3?g.type=y.readVarint():h==4&&(g._geometry=y.pos)}function u(h){for(var g,y,_=0,S=0,C=h.length,P=C-1;S<C;P=S++)_+=((y=h[P]).x-(g=h[S]).x)*(g.y+y.y);return _}return mn=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var g,y=h.readVarint()+h.pos,_=1,S=0,C=0,P=0,R=[];h.pos<y;){if(S<=0){var D=h.readVarint();_=7&D,S=D>>3}if(S--,_===1||_===2)C+=h.readSVarint(),P+=h.readSVarint(),_===1&&(g&&R.push(g),g=[]),g.push(new a(C,P));else{if(_!==7)throw new Error("unknown command "+_);g&&g.push(g[0].clone())}}return g&&R.push(g),R},r.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var g=h.readVarint()+h.pos,y=1,_=0,S=0,C=0,P=1/0,R=-1/0,D=1/0,B=-1/0;h.pos<g;){if(_<=0){var $=h.readVarint();y=7&$,_=$>>3}if(_--,y===1||y===2)(S+=h.readSVarint())<P&&(P=S),S>R&&(R=S),(C+=h.readSVarint())<D&&(D=C),C>B&&(B=C);else if(y!==7)throw new Error("unknown command "+y)}return[P,D,R,B]},r.prototype.toGeoJSON=function(h,g,y){var _,S,C=this.extent*Math.pow(2,y),P=this.extent*h,R=this.extent*g,D=this.loadGeometry(),B=r.types[this.type];function $(J){for(var ce=0;ce<J.length;ce++){var ue=J[ce];J[ce]=[360*(ue.x+P)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*(ue.y+R)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(_=0;_<D.length;_++)q[_]=D[_][0];$(D=q);break;case 2:for(_=0;_<D.length;_++)$(D[_]);break;case 3:for(D=function(J){var ce=J.length;if(ce<=1)return[J];for(var ue,H,se=[],de=0;de<ce;de++){var be=u(J[de]);be!==0&&(H===void 0&&(H=be<0),H===be<0?(ue&&se.push(ue),ue=[J[de]]):ue.push(J[de]))}return ue&&se.push(ue),se}(D),_=0;_<D.length;_++)for(S=0;S<D[_].length;S++)$(D[_][S])}D.length===1?D=D[0]:B="Multi"+B;var W={type:"Feature",geometry:{type:B,coordinates:D},properties:this.properties};return"id"in this&&(W.id=this.id),W},mn}function Vi(){if(Bn)return Cn;Bn=1;var a=Nr();function r(u,h){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(o,this,h),this.length=this._features.length}function o(u,h,g){u===15?h.version=g.readVarint():u===1?h.name=g.readString():u===5?h.extent=g.readVarint():u===2?h._features.push(g.pos):u===3?h._keys.push(g.readString()):u===4&&h._values.push(function(y){for(var _=null,S=y.readVarint()+y.pos;y.pos<S;){var C=y.readVarint()>>3;_=C===1?y.readString():C===2?y.readFloat():C===3?y.readDouble():C===4?y.readVarint64():C===5?y.readVarint():C===6?y.readSVarint():C===7?y.readBoolean():null}return _}(g))}return Cn=r,r.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var h=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,h,this.extent,this._keys,this._values)},Cn}function Gn(){return ii||(ii=1,Br.VectorTile=function(){if(Mr)return Jn;Mr=1;var a=Vi();function r(o,u,h){if(o===3){var g=new a(h,h.readVarint()+h.pos);g.length&&(u[g.name]=g)}}return Jn=function(o,u){this.layers=o.readFields(r,{},u)},Jn}(),Br.VectorTileFeature=Nr(),Br.VectorTileLayer=Vi()),Br}var nr=Gn();const ur="3d_elevation_id",ci="level";class Yi{constructor(){this._valid=!1}reset(r){return this.feature=r,this._valid=!0,this._geometry=r.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(r,o){return this._valid&&r(o(this._geometry)),this}require(r,o,u){return this.get(r,!0,o,u)}optional(r,o,u){return this.get(r,!1,o,u)}success(){return this._valid}get(r,o,u,h){const g=this.feature.properties.hasOwnProperty(r)?+this.feature.properties[r]:void 0;return this._valid&&g!==void 0&&!Number.isNaN(g)?u(h?h(g):g):o&&(this._valid=!1),this}}class oi{constructor(r,o){this.featureFunc=r,this.vertexFunc=o}parseFeature(r,o,u){return this.featureFunc(r,o,u)}parseVertex(r,o,u){return this.vertexFunc(r,o,u)}}const Er=new oi((a,r,o)=>a.reset(r).require(ur,u=>{o.id=u}).optional("fixed_height_relative",u=>{o.constantHeight=u},vr.decodeRelativeHeight).geometry(u=>{o.bounds=u},Wf).success(),(a,r,o)=>a.reset(r).require(ur,u=>{o.id=u}).require("elevation_idx",u=>{o.idx=u}).require("extent",u=>{o.extent=u}).require("height_relative",u=>{o.height=u},vr.decodeRelativeHeight).geometry(u=>{o.position=u},vr.getPoint).success()),Di=new oi((a,r,o)=>a.reset(r).require(ur,u=>{o.id=u}).optional("fixed_height",u=>{o.constantHeight=u},vr.decodeMetricHeight).geometry(u=>{o.bounds=u},Wf).success(),(a,r,o)=>a.reset(r).require(ur,u=>{o.id=u}).require("elevation_idx",u=>{o.idx=u}).require("extent",u=>{o.extent=u}).require("height",u=>{o.height=u},vr.decodeMetricHeight).geometry(u=>{o.position=u},vr.getPoint).success());class vr{static getPoint(r){return ao(r[0][0].x,r[0][0].y)}static decodeRelativeHeight(r){return 1e-4*r*5}static decodeMetricHeight(r){return 1e-4*r}static parse(r){const o=[],u=[],h=r.length,g=new Yi;for(let _=0;_<h;_++){const S=r.feature(_),C=S.properties.hasOwnProperty("version")?String(S.properties.version):void 0,P=(y=C)?y==="1.0.1"?Di:void 0:Er;if(P===void 0){Zn(`Unknown elevation feature version number ${C||"(unknown)"}`);continue}const R=S.properties.hasOwnProperty("type")?S.properties.type:void 0;if(R){if(nr.VectorTileFeature.types[S.type]==="Point"&&R==="curve_point"){const D={};P.parseVertex(g,S,D)&&o.push(D)}else if(nr.VectorTileFeature.types[S.type]==="Polygon"&&R==="curve_meta"){const D={};P.parseFeature(g,S,D)&&u.push(D)}}}var y;return{vertices:o,features:u}}}class Ki{constructor(r,o){this.pos=r,this.dir=o}intersectsPlane(r,o,u){const h=xi(o,this.dir);if(Math.abs(h)<1e-6)return!1;const g=((r[0]-this.pos[0])*o[0]+(r[1]-this.pos[1])*o[1])/h;return u[0]=this.pos[0]+this.dir[0]*g,u[1]=this.pos[1]+this.dir[1]*g,!0}}class ui{constructor(r,o){this.pos=r,this.dir=o}intersectsPlane(r,o,u){const h=kn(o,this.dir);if(Math.abs(h)<1e-6)return!1;const g=((r[0]-this.pos[0])*o[0]+(r[1]-this.pos[1])*o[1]+(r[2]-this.pos[2])*o[2])/h;return u[0]=this.pos[0]+this.dir[0]*g,u[1]=this.pos[1]+this.dir[1]*g,u[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(r,o,u){if(function(B,$){var q=B[0],W=B[1],J=B[2],ce=$[0],ue=$[1],H=$[2];return Math.abs(q-ce)<=T*Math.max(1,Math.abs(q),Math.abs(ce))&&Math.abs(W-ue)<=T*Math.max(1,Math.abs(W),Math.abs(ue))&&Math.abs(J-H)<=T*Math.max(1,Math.abs(J),Math.abs(H))}(this.pos,r)||o===0)return u[0]=u[1]=u[2]=0,!1;const[h,g,y]=this.dir,_=this.pos[0]-r[0],S=this.pos[1]-r[1],C=this.pos[2]-r[2],P=h*h+g*g+y*y,R=2*(_*h+S*g+C*y),D=R*R-4*P*(_*_+S*S+C*C-o*o);if(D<0){const B=Math.max(-R/2,0),$=_+h*B,q=S+g*B,W=C+y*B,J=Math.hypot($,q,W);return u[0]=$*o/J,u[1]=q*o/J,u[2]=W*o/J,!1}{const B=(-R-Math.sqrt(D))/(2*P);if(B<0){const $=Math.hypot(_,S,C);return u[0]=_*o/$,u[1]=S*o/$,u[2]=C*o/$,!1}return u[0]=_+h*B,u[1]=S+g*B,u[2]=C+y*B,!0}}}class ti{constructor(r,o,u,h,g){this.TL=r,this.TR=o,this.BR=u,this.BL=h,this.horizon=g}static fromInvProjectionMatrix(r,o,u){const h=[-1,1,1],g=[1,1,1],y=[1,-1,1],_=[-1,-1,1],S=cn(h,h,r),C=cn(g,g,r),P=cn(y,y,r),R=cn(_,_,r);return new ti(S,C,P,R,o/u)}}function di(a,r,o){let u=1/0,h=-1/0;const g=[];for(const y of a){qe(g,y,r);const _=kn(g,o);u=Math.min(u,_),h=Math.max(h,_)}return[u,h]}function Pr(a,r){let o=!0;for(let u=0;u<a.planes.length;u++){const h=a.planes[u];let g=0;for(let y=0;y<r.length;y++)g+=kn(h,r[y])+h[3]>=0;if(g===0)return 0;g!==r.length&&(o=!1)}return o?2:1}function Bi(a,r){for(const o of a.projections){const u=di(r,a.points[0],o.axis);if(o.projection[1]<u[0]||o.projection[0]>u[1])return 0}return 1}function Po(a,r){let o=0;const u=[0,0,0,0];for(let y=0;y<a.length;y++)u[0]=a[y][0],u[1]=a[y][1],u[2]=a[y][2],u[3]=1,(h=u)[0]*(g=r)[0]+h[1]*g[1]+h[2]*g[2]+h[3]*g[3]>=0&&o++;var h,g;return o}class vi{constructor(r,o){this.points=r||new Array(8).fill([0,0,0]),this.planes=o||new Array(6).fill([0,0,0,0]),this.bounds=kr.fromPoints(this.points),this.projections=[],this.frustumEdges=[qe([],this.points[2],this.points[3]),qe([],this.points[0],this.points[3]),qe([],this.points[4],this.points[0]),qe([],this.points[5],this.points[1]),qe([],this.points[6],this.points[2]),qe([],this.points[7],this.points[3])];for(const u of this.frustumEdges){const h=[0,-u[2],u[1]],g=[u[2],0,-u[0]];this.projections.push({axis:h,projection:di(this.points,this.points[0],h)}),this.projections.push({axis:g,projection:di(this.points,this.points[0],g)})}}static fromInvProjectionMatrix(r,o,u,h){const g=Math.pow(2,u),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const P=_n([],C,r),R=1/P[3]/o*g;return(D=P)[0]=(B=P)[0]*($=[R,R,h?1/P[3]:R,R])[0],D[1]=B[1]*$[1],D[2]=B[2]*$[2],D[3]=B[3]*$[3],D;var D,B,$}),_=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const P=pn([],$t([],qe([],y[C[0]],y[C[1]]),qe([],y[C[2]],y[C[1]]))),R=-kn(P,y[C[1]]);return P.concat(R)}),S=[];for(let C=0;C<y.length;C++)S.push([y[C][0],y[C][1],y[C][2]]);return new vi(S,_)}intersectsPrecise(r,o,u){for(let h=0;h<o.length;h++)if(!Po(r,o[h]))return 0;for(let h=0;h<this.planes.length;h++)if(!Po(r,this.planes[h]))return 0;for(const h of u)for(const g of this.frustumEdges){const y=$t([],h,g),_=ut(y);if(_===0)continue;In(y,y,1/_);const S=di(this.points,this.points[0],y),C=di(r,this.points[0],y);if(S[0]>C[1]||C[0]>S[1])return 0}return 1}containsPoint(r){for(const o of this.planes){const u=o[3];if(kn([o[0],o[1],o[2]],r)+u<0)return!1}return!0}}class kr{static fromPoints(r){const o=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const h of r)Et(o,o,h),on(u,u,h);return new kr(o,u)}static fromTileIdAndHeight(r,o,u){const h=1<<r.canonical.z,g=r.canonical.x,y=r.canonical.y;return new kr([g/h,y/h,o],[(g+1)/h,(y+1)/h,u])}static applyTransform(r,o){const u=r.getCorners();for(let h=0;h<u.length;++h)cn(u[h],u[h],o);return kr.fromPoints(u)}static applyTransformFast(r,o){const u=[o[12],o[13],o[14]],h=[...u];for(let g=0;g<3;g++)for(let y=0;y<3;y++){const _=o[4*y+g],S=_*r.min[y],C=_*r.max[y];u[g]+=Math.min(S,C),h[g]+=Math.max(S,C)}return new kr(u,h)}static projectAabbCorners(r,o){const u=r.getCorners();for(let h=0;h<u.length;++h)cn(u[h],u[h],o);return u}constructor(r,o){this.min=r,this.max=o,this.center=In([],Qt([],this.min,this.max),.5)}quadrant(r){const o=[r%2==0,r<2],u=ft(this.min),h=ft(this.max);for(let g=0;g<o.length;g++)u[g]=o[g]?this.min[g]:this.center[g],h[g]=o[g]?this.center[g]:this.max[g];return h[2]=this.max[2],new kr(u,h)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}distanceZ(r){return Math.max(Math.min(this.max[2],r[2]),this.min[2])-r[2]}getCorners(){const r=this.min,o=this.max;return[[r[0],r[1],r[2]],[o[0],r[1],r[2]],[o[0],o[1],r[2]],[r[0],o[1],r[2]],[r[0],r[1],o[2]],[o[0],r[1],o[2]],[o[0],o[1],o[2]],[r[0],o[1],o[2]]]}intersects(r){return this.intersectsAabb(r.bounds)?Pr(r,this.getCorners()):0}intersectsFlat(r){return this.intersectsAabb(r.bounds)?Pr(r,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(r,o){return o||this.intersects(r)?Bi(r,this.getCorners()):0}intersectsPreciseFlat(r,o){return o||this.intersectsFlat(r)?Bi(r,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(r){for(let o=0;o<3;++o)if(this.min[o]>r.max[o]||r.min[o]>this.max[o])return!1;return!0}intersectsAabbXY(r){return!(this.min[0]>r.max[0]||r.min[0]>this.max[0]||this.min[1]>r.max[1]||r.min[1]>this.max[1])}encapsulate(r){for(let o=0;o<3;o++)this.min[o]=Math.min(this.min[o],r.min[o]),this.max[o]=Math.max(this.max[o],r.max[o])}encapsulatePoint(r){for(let o=0;o<3;o++)this.min[o]=Math.min(this.min[o],r[o]),this.max[o]=Math.max(this.max[o],r[o])}closestPoint(r){return[Math.max(Math.min(this.max[0],r[0]),this.min[0]),Math.max(Math.min(this.max[1],r[1]),this.min[1]),Math.max(Math.min(this.max[2],r[2]),this.min[2])]}}tn(kr,"Aabb");class hs{constructor(r,o){this.feature=r,this.metersToTile=o,this.index=0}get(){const r=this.feature.vertices[this.index],o=this.feature.vertexProps[this.index].dir,u=o[1],h=-o[0],g=(r.extent+1)*this.metersToTile;return[new Vt(Math.trunc(r.position[0]+u*g),Math.trunc(r.position[1]+h*g)),new Vt(Math.trunc(r.position[0]-u*g),Math.trunc(r.position[1]-h*g))]}next(){this.index++}valid(){return this.index<this.feature.vertices.length}}class ss{constructor(r,o,u,h,g,y){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=r,this.heightRange={min:u,max:u},this.safeArea=o,this.constantHeight=u,this.constantHeight==null&&(this.constantHeight!=null||h.length!==0)){this.vertices=h,this.edges=g,this.edges=this.edges.filter(_=>{return _.a<this.vertices.length&&_.b<this.vertices.length&&!((S=this.vertices[_.a].position)[0]===(C=this.vertices[_.b].position)[0]&&S[1]===C[1]);var S,C}),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const _ of this.vertices)this.vertexProps.push({dir:ao(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,_.height),this.heightRange.max=Math.max(this.heightRange.max,_.height);for(const _ of this.edges){const S=this.vertices[_.a].position,C=this.vertices[_.b].position,P=Ys(Ui(),C,S),R=ko(P),D=mo(Ui(),P,1/R);this.edgeProps.push({vec:P,dir:D,len:R});const B=this.vertexProps[_.a].dir,$=this.vertexProps[_.b].dir;ws(B,B,D),ws($,$,D)}for(const _ of this.vertexProps)_.dir[0]===0&&_.dir[1]===0||Ma(_.dir,_.dir);this.tessellate(y)}}pointElevation(r){if(this.constantHeight!=null)return this.constantHeight;const o=this.getClosestEdge(r);if(o==null)return 0;const[u,h]=o;return Mn(this.vertices[this.edges[u].a].height,this.vertices[this.edges[u].b].height,h)}computeSlopeNormal(r,o){const u=this.getClosestEdge(r);if(!u)return Qe(0,0,1);const h=u[0],g=this.edges[h],y=this.edgeProps[h].vec,_=Qe(y[0],y[1],(this.vertices[g.b].height-this.vertices[g.a].height)*o),S=Qe(_[1],-_[0],0);$t(S,S,_);const C=ut(S);return C>0?In(S,S,1/C):Qe(0,0,1)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(r){if(this.edges.length===0)return;let o=0,u=Number.POSITIVE_INFINITY,h=0;const g=ao(r.x,r.y);for(let y=0;y<this.edges.length;y++){const _=this.edges[y],S=this.edgeProps[y].dir,C=new Ki(g,this.edgeProps[y].dir),P=this.vertices[_.a].position,R=this.vertices[_.b].position,D=Ui(),B=Ui(),$=C.intersectsPlane(P,this.vertexProps[_.a].dir,D),q=C.intersectsPlane(R,this.vertexProps[_.b].dir,B);if(!$||!q)continue;const W=Ys(Ui(),B,D),J=Ys(Ui(),g,D),ce=xi(W,W),ue=ce>0?xi(J,W)/ce:0,H=Te(ue,0,1),se=Math.abs((ue-H)*this.edgeProps[y].len),de=Ys(Ui(),g,P),be=se+Math.abs(xi(de,ao(S[1],-S[0])));be<u&&(o=y,u=be,h=H)}return[o,h]}tessellate(r){for(let o=this.edges.length-1;o>=0;--o){const u=this.edges[o].a,h=this.edges[o].b,{position:g,height:y,extent:_}=this.vertices[u],{position:S,height:C,extent:P}=this.vertices[h],R=this.vertexProps[u].dir,D=this.vertexProps[h].dir,B=Qe(g[0]/r,g[1]/r,y),$=Qe(S[0]/r,S[1]/r,C),q=Qe(R[1],-R[0],0);In(q,q,_);const W=Qe(D[1],-D[0],0);if(In(W,W,P),this.distSqLines(Qe(B[0]+.5*q[0],B[1]+.5*q[1],B[2]+.5*q[2]),Qe($[0]-.5*W[0],$[1]-.5*W[1],$[2]-.5*W[2]),Qe(B[0]-.5*q[0],B[1]-.5*q[1],B[2]-.5*q[2]),Qe($[0]+.5*W[0],$[1]+.5*W[1],$[2]+.5*W[2]))<=.0025000000000000005)continue;const J=this.vertices.length,ce=ws(Ui(),g,S);this.vertices.push({position:mo(ce,ce,.5),height:.5*(y+C),extent:.5*(_+P)});const ue=ws(Ui(),R,D);this.vertexProps.push({dir:Ma(ue,ue)}),this.edges.splice(o,1),this.edgeProps.splice(o,1),this.edges.push({a:u,b:J}),this.edges.push({a:J,b:h});const H=Ys(Ui(),this.vertices[J].position,g),se=ko(H),de={vec:H,dir:mo(Ui(),H,1/se),len:se};this.edgeProps.push(de),this.edgeProps.push(de)}}distSqLines(r,o,u,h){const g=kt(Je(),o,r),y=kt(Je(),h,u),_=kt(Je(),r,u),S=kn(g,g),C=kn(g,y),P=kn(g,_),R=kn(y,y),D=kn(y,_),B=S*R-C*C;if(B===0){const W=kn(_,y)/kn(y,y);return Or(Ln(Je(),u,h,W),r)}const $=(C*D-P*R)/B,q=(S*D-C*P)/B;return Or(Ln(Je(),r,o,$),Ln(Je(),u,h,q))}}class Es{static parseFrom(r,o){const u=vr.parse(r);if(!u)return[];let{vertices:h,features:g}=u;const y=1/st(o);g.sort((P,R)=>P.id-R.id),h.sort((P,R)=>P.id-R.id||P.idx-R.idx),h=h.filter((P,R,D)=>R===D.findIndex(B=>B.id===P.id&&B.idx===P.idx));const _=new Array;let S=0;const C=h.length;for(const P of g){if(P.constantHeight){_.push(new ss(P.id,P.bounds,P.constantHeight));continue}for(;S!==C&&h[S].id<P.id;)S++;if(S===C||h[S].id!==P.id)continue;const R=new Array,D=new Array,B=S;for(;S!==C&&h[S].id===P.id;){const $=h[S];if(R.push({position:$.position,height:$.height,extent:$.extent}),S!==B&&h[S-1].idx===$.idx-1){const q=S-B;D.push({a:q-1,b:q})}S++}_.push(new ss(P.id,P.bounds,void 0,R,D,y))}return _}static getElevationFeature(r,o){if(!o)return;const u=+r.properties[ur];return Number.isNaN(u)?void 0:o.find(h=>h.id===u)}}class ia{constructor(r,o){this.zScale=1,this.xOffset=0,this.yOffset=0,r.equals(o)||(this.zScale=Math.pow(2,o.z-r.z),this.xOffset=(r.x*this.zScale-o.x)*Ut,this.yOffset=(r.y*this.zScale-o.y)*Ut)}constantElevation(r,o){if(r.constantHeight!=null)return this.computeBiasedHeight(r.constantHeight,o)}pointElevation(r,o,u){const h=this.constantElevation(o,u);return h??(r.x=r.x*this.zScale+this.xOffset,r.y=r.y*this.zScale+this.yOffset,this.computeBiasedHeight(o.pointElevation(r),u))}computeBiasedHeight(r,o){return o<=0?r:r+o*Ne(0,o,r>=0?r:Math.abs(.5*r))}}tn(ss,"ElevationFeature");class Us{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.fqid),this.index=r.index,this.hasPattern=!1,this.projection=r.projection,this.layoutVertexArray=new Ha,this.indexArray=new Io,this.segments=new zi,this.programConfigurations=new p(r.layers,{zoom:r.zoom,lut:r.lut}),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.elevationMode=this.layers[0].layout.get("circle-elevation-reference"),this.hasElevation=!1,this.elevationMode!=="none"&&(this.elevatedLayoutVertexArray=new Sl),this.worldview=r.worldview}updateFootprints(r,o){}populate(r,o,u,h){const g=this.layers[0],y=[];let _=null;g.type==="circle"&&(_=g.layout.get("circle-sort-key"));for(const{feature:C,id:P,index:R,sourceLayerIndex:D}of r){const B=this.layers[0]._featureFilter.needGeometry,$=Yt(C,B);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom,{worldview:this.worldview}),$,u))continue;const q=_?_.evaluate($,{},u):void 0,W={id:P,properties:C.properties,type:C.type,sourceLayerIndex:D,index:R,geometry:B?$.geometry:rn(C,u,h),patterns:{},sortKey:q};y.push(W)}_&&y.sort((C,P)=>C.sortKey-P.sortKey);let S=null;h.projection.name==="globe"&&(this.globeExtVertexArray=new Sp,S=h.projection);for(const C of y){const{geometry:P,index:R,sourceLayerIndex:D}=C,B=r[R].feature;this.addFeature(C,P,R,o.availableImages,u,S,o.brightness,o.elevationFeatures),o.featureIndex.insert(B,P,R,D,this.index)}this.hasElevation||(this.elevatedLayoutVertexArray=void 0)}update(r,o,u,h,g,y,_){this.programConfigurations.updatePaintArrays(r,o,g,u,h,y,_,this.worldview)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,O1.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,Ip.members)),this.elevatedLayoutVertexArray&&(this.elevatedLayoutVertexBuffer=r.createVertexBuffer(this.elevatedLayoutVertexArray,z1.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy())}addFeature(r,o,u,h,g,y,_,S){let C;this.elevationMode!=="none"&&(C=Es.getElevationFeature(r,S));for(const P of o)for(const R of P){const D=R.x,B=R.y;if(D<0||D>=Ut||B<0||B>=Ut)continue;if(y){const W=y.projectTilePoint(D,B,g),J=y.upVector(g,D,B);this.addGlobeExtVertex(W,J),this.addGlobeExtVertex(W,J),this.addGlobeExtVertex(W,J),this.addGlobeExtVertex(W,J)}const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),q=$.vertexLength;if(this.addCircleVertex(D,B,-1,-1),this.addCircleVertex(D,B,1,-1),this.addCircleVertex(D,B,1,1),this.addCircleVertex(D,B,-1,1),this.elevationMode!=="none"){const W=C?C.pointElevation(new Vt(D,B)):0;this.hasElevation=this.hasElevation||W!==0;for(let J=0;J<4;J++)this.elevatedLayoutVertexArray.emplaceBack(W)}this.indexArray.emplaceBack(q,q+1,q+2),this.indexArray.emplaceBack(q,q+2,q+3),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,{},h,g,_,void 0,this.worldview)}addCircleVertex(r,o,u,h){this.layoutVertexArray.emplaceBack(2*r+(u+1)/2,2*o+(h+1)/2)}addGlobeExtVertex(r,o){this.globeExtVertexArray.emplaceBack(r.x,r.y,r.z,o[0]*16384,o[1]*16384,o[2]*16384)}}function as(a,r){for(let o=0;o<a.length;o++)if(ba(r,a[o]))return!0;for(let o=0;o<r.length;o++)if(ba(a,r[o]))return!0;return!!Xd(a,r)}function El(a,r,o){return!!ba(a,r)||!!Yd(r,a,o)}function oa(a,r){if(a.length===1)return Lp(r,a[0]);for(let o=0;o<r.length;o++){const u=r[o];for(let h=0;h<u.length;h++)if(ba(a,u[h]))return!0}for(let o=0;o<a.length;o++)if(Lp(r,a[o]))return!0;for(let o=0;o<r.length;o++)if(Xd(a,r[o]))return!0;return!1}function Il(a,r,o){if(a.length>1){if(Xd(a,r))return!0;for(let u=0;u<r.length;u++)if(Yd(r[u],a,o))return!0}for(let u=0;u<a.length;u++)if(Yd(a[u],r,o))return!0;return!1}function Xd(a,r){if(a.length===0||r.length===0)return!1;for(let o=0;o<a.length-1;o++){const u=a[o],h=a[o+1];for(let g=0;g<r.length-1;g++)if(Vm(u,h,r[g],r[g+1]))return!0}return!1}function Vm(a,r,o,u){return Yr(a,o,u)!==Yr(r,o,u)&&Yr(a,r,o)!==Yr(a,r,u)}function xu(a,r,o){return(a.x-o.x)*(r.y-o.y)-(a.y-o.y)*(r.x-o.x)}function jm(a,r,o,u){const h=xu(a,r,u),g=xu(a,r,o);if(Math.sign(h)===Math.sign(g))return;const y=xu(o,u,a),_=y+g-h;return Math.sign(y)!==Math.sign(_)?[y/(y-_),g/(g-h)]:void 0}function Yd(a,r,o){const u=o*o;if(r.length===1)return a.distSqr(r[0])<u;for(let h=1;h<r.length;h++)if(Dp(a,r[h-1],r[h])<u)return!0;return!1}function Dp(a,r,o){const u=r.distSqr(o);if(u===0)return a.distSqr(r);const h=((a.x-r.x)*(o.x-r.x)+(a.y-r.y)*(o.y-r.y))/u;return a.distSqr(h<0?r:h>1?o:o.sub(r)._mult(h)._add(r))}function Lp(a,r){let o,u,h,g=!1;for(let y=0;y<a.length;y++){o=a[y];for(let _=0,S=o.length-1;_<o.length;S=_++)u=o[_],h=o[S],u.y>r.y!=h.y>r.y&&r.x<(h.x-u.x)*(r.y-u.y)/(h.y-u.y)+u.x&&(g=!g)}return g}function ba(a,r){let o=!1;for(let u=0,h=a.length-1;u<a.length;h=u++){const g=a[u],y=a[h];g.y>r.y!=y.y>r.y&&r.x<(y.x-g.x)*(r.y-g.y)/(y.y-g.y)+g.x&&(o=!o)}return o}function wu(a,r,o,u,h){for(const y of a)if(r<=y.x&&o<=y.y&&u>=y.x&&h>=y.y)return!0;const g=[new Vt(r,o),new Vt(r,h),new Vt(u,h),new Vt(u,o)];if(a.length>2){for(const y of g)if(ba(a,y))return!0}for(let y=0;y<a.length-1;y++)if(xc(a[y],a[y+1],g))return!0;return!1}function xc(a,r,o){const u=o[0],h=o[2];if(a.x<u.x&&r.x<u.x||a.x>h.x&&r.x>h.x||a.y<u.y&&r.y<u.y||a.y>h.y&&r.y>h.y)return!1;const g=Yr(a,r,o[0]);return g!==Yr(a,r,o[1])||g!==Yr(a,r,o[2])||g!==Yr(a,r,o[3])}function Pl(a,r,o,u,h,g){let y=r.y-a.y,_=a.x-r.x;if(g=g||0){const S=y*y+_*_;if(S===0)return!0;const C=Math.sqrt(S);y/=C,_/=C}return!((o.x-a.x)*y+(o.y-a.y)*_-g<0||(u.x-a.x)*y+(u.y-a.y)*_-g<0||(h.x-a.x)*y+(h.y-a.y)*_-g<0)}function F1(a,r,o,u,h,g,y){return!(Pl(a,r,u,h,g,y)||Pl(r,o,u,h,g,y)||Pl(o,a,u,h,g,y)||Pl(u,h,a,r,o,y)||Pl(h,g,a,r,o,y)||Pl(g,u,a,r,o,y))}function Op(a,r,o){const u=r.paint.get(a).value;return u.kind==="constant"?u.value:o.programConfigurations.get(r.id).getMaxValue(a)}function hv(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function HS(a,r,o,u,h){if(!r[0]&&!r[1])return a;const g=Vt.convert(r)._mult(h);o==="viewport"&&g._rotate(-u);const y=[];for(let _=0;_<a.length;_++)y.push(a[_].sub(g));return y}function GS(a,r,o,u){const h=Vt.convert(a)._mult(u);return r==="viewport"&&h._rotate(-o),h}let WS,KS;function ZS(a,r,o){var u=2*Math.PI*6378137/256/Math.pow(2,o);return[a*u-2*Math.PI*6378137/2,r*u-2*Math.PI*6378137/2]}tn(Us,"CircleBucket",{omit:["layers"]});class Jd{constructor(r,o,u){this.z=r,this.x=o,this.y=u,this.key=zp(0,r,r,o,u)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,o){const u=function(g,y,_){var S=ZS(256*g,256*(y=Math.pow(2,_)-y-1),_),C=ZS(256*(g+1),256*(y+1),_);return S[0]+","+S[1]+","+C[0]+","+C[1]}(this.x,this.y,this.z),h=function(g,y,_){let S,C="";for(let P=g;P>0;P--)S=1<<P-1,C+=(y&S?1:0)+(_&S?2:0);return C}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class XS{constructor(r,o){this.wrap=r,this.canonical=o,this.key=zp(r,o.z,o.z,o.x,o.y)}}class Jo{constructor(r,o,u,h,g){this.overscaledZ=r,this.wrap=o,this.canonical=new Jd(u,+h,+g),this.key=o===0&&r===u?this.canonical.key:zp(o,r,u,h,g)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){const o=this.canonical.z-r;return r>this.canonical.z?new Jo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Jo(r,this.wrap,r,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(r,o=!0){if(this.overscaledZ===r&&o)return this.key;if(r>this.canonical.z)return zp(this.wrap*+o,r,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-r;return zp(this.wrap*+o,r,r,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(r){if(r.wrap!==this.wrap)return!1;const o=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.z<this.canonical.z&&r.canonical.x===this.canonical.x>>o&&r.canonical.y===this.canonical.y>>o}children(r){if(this.overscaledZ>=r)return[new Jo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,u=2*this.canonical.x,h=2*this.canonical.y;return[new Jo(o,this.wrap,o,u,h),new Jo(o,this.wrap,o,u+1,h),new Jo(o,this.wrap,o,u,h+1),new Jo(o,this.wrap,o,u+1,h+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Jo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Jo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new XS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function zp(a,r,o,u,h){const g=1<<Math.min(o,22);let y=g*(h%g)+u%g;return a&&o<22&&(y+=g*g*((a<0?-2*a-1:2*a)%(1<<2*(22-o)))),16*(32*y+o)+(r-o)}const KA=[a=>{let r=a.canonical.x-1,o=a.wrap;return r<0&&(r=(1<<a.canonical.z)-1,o--),new Jo(a.overscaledZ,o,a.canonical.z,r,a.canonical.y)},a=>{let r=a.canonical.x+1,o=a.wrap;return r===1<<a.canonical.z&&(r=0,o++),new Jo(a.overscaledZ,o,a.canonical.z,r,a.canonical.y)},a=>new Jo(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,(a.canonical.y===0?1<<a.canonical.z:a.canonical.y)-1),a=>new Jo(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y===(1<<a.canonical.z)-1?0:a.canonical.y+1)];tn(Jd,"CanonicalTileID"),tn(Jo,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const ZA=Sr([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:pv}=ZA,XA=Sr([{name:"a_pos_3",components:3,type:"Int16"}]);var YS=Sr([{name:"a_pos",type:"Int16",components:2}]);function fv(a){return a*w/Y}const YA=[new kr([F,F,F],[V,V,V]),new kr([F,F,F],[0,0,V]),new kr([0,F,F],[V,0,V]),new kr([F,0,F],[0,V,V]),new kr([0,0,F],[V,V,V])];function JS(a,r,o,u=!0){const h=In([],a._camera.position,a.worldSize),g=[r,o,1,1];_n(g,g,a.pixelMatrixInverse),Jt(g,g,1/g[3]);const y=pn([],qe([],g,h)),_=a.globeMatrix,S=[_[12],_[13],_[14]],C=qe([],S,h),P=ut(C),R=pn([],C),D=a.worldSize/(2*Math.PI),B=kn(R,y),$=Math.asin(D/P);if($<Math.acos(B)){if(!u)return null;const Be=[],je=[];In(Be,y,P/B),pn(je,qe(je,Be,C)),pn(y,Qt(y,C,In(y,je,Math.tan($)*P)))}const q=[];new ui(h,y).closestPointOnSphere(S,D,q);const W=pn([],Ri(_,0)),J=pn([],Ri(_,1)),ce=pn([],Ri(_,2)),ue=kn(W,q),H=kn(J,q),se=kn(ce,q),de=rt(Math.asin(-H/D));let be=rt(Math.atan2(ue,se));be=a.center.lng+function(Be,je){const at=(je-Be+180)%360-180;return at<-180?at+360:at}(a.center.lng,be);const Oe=ke(be),Re=Te(Se(de),0,1);return new Fe(Oe,Re)}class JA{constructor(r,o,u){this.a=qe([],r,u),this.b=qe([],o,u),this.center=u;const h=pn([],this.a),g=pn([],this.b);this.angle=Math.acos(kn(h,g))}}function $1(a,r){if(a.angle===0)return null;let o;return o=a.a[r]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[r]/a.a[r]/Math.sin(a.angle)-1/Math.tan(a.angle)),o<0||o>1?null:function(u,h,g,y){const _=Math.sin(g);return u*(Math.sin((1-y)*g)/_)+h*(Math.sin(y*g)/_)}(a.a[r],a.b[r],a.angle,Te(o,0,1))+a.center[r]}function Al(a){if(a.z<=1)return YA[a.z+2*a.y+a.x];const r=N1(mv(a));return kr.fromPoints(r)}function wc(a,r,o){return In(a,a,1-o),ir(a,a,r,o)}function QS(a,r,o){for(const u of a)cn(u,u,r),In(u,u,o)}function eC(a,r,o,u){const h=r/a.worldSize,g=a.globeMatrix;if(o.z<=1){const Re=Al(o).getCorners();return QS(Re,g,h),kr.fromPoints(Re)}const y=mv(o,u),_=N1(y,w+fv(a._tileCoverLift));QS(_,g,h);const S=Number.MAX_VALUE,C=[-S,-S,-S],P=[S,S,S];if(y.contains(a.center)){for(const je of _)Et(P,P,je),on(C,C,je);C[2]=0;const Re=a.point,Be=[Re.x*h,Re.y*h,0];return Et(P,P,Be),on(C,C,Be),new kr(P,C)}if(a._tileCoverLift>0){for(const Re of _)Et(P,P,Re),on(C,C,Re);return new kr(P,C)}const R=[g[12]*h,g[13]*h,g[14]*h],D=y.getCenter(),B=Te(a.center.lat,-85.051129,ht),$=Te(D.lat,-85.051129,ht),q=ke(a.center.lng),W=Se(B);let J=q-ke(D.lng);const ce=W-Se($);J>.5?J-=1:J<-.5&&(J+=1);let ue=0;Math.abs(J)>Math.abs(ce)?ue=J>=0?1:3:(ue=ce>=0?0:2,ir(R,R,[g[4]*h,g[5]*h,g[6]*h],-Math.sin(Cr(ce>=0?y.getSouth():y.getNorth()))*w));const H=_[ue],se=_[(ue+1)%4],de=new JA(H,se,R),be=[$1(de,0)||H[0],$1(de,1)||H[1],$1(de,2)||H[2]],Oe=Su(a.zoom);if(Oe>0){const Re=function({x:je,y:at,z:At},yt,Pt,Rt,ct){const Tt=1/(1<<At);let ot=je*Tt,lt=ot+Tt,Lt=at*Tt,zt=Lt+Tt,Sn=0;const un=(ot+lt)/2-Rt;return un>.5?Sn=-1:un<-.5&&(Sn=1),ot=((ot+Sn)*yt-(Rt*=yt))*Pt+Rt,lt=((lt+Sn)*yt-Rt)*Pt+Rt,Lt=(Lt*yt-(ct*=yt))*Pt+ct,zt=(zt*yt-ct)*Pt+ct,[[ot,zt,0],[lt,zt,0],[lt,Lt,0],[ot,Lt,0]]}(o,r,a._pixelsPerMercatorPixel,q,W);for(let je=0;je<_.length;je++)wc(_[je],Re[je],Oe);const Be=Qt([],Re[ue],Re[(ue+1)%4]);In(Be,Be,.5),wc(be,Be,Oe)}for(const Re of _)Et(P,P,Re),on(C,C,Re);return P[2]=Math.min(H[2],se[2]),Et(P,P,be),on(C,C,be),new kr(P,C)}function mv({x:a,y:r,z:o},u=!1){const h=1/(1<<o),g=new ae(De(a*h),r===(1<<o)-1&&u?-90:Ze((r+1)*h)),y=new ae(De((a+1)*h),r===0&&u?90:Ze(r*h));return new ve(g,y)}function N1(a,r=w){const o=Cr(a.getNorth()),u=Cr(a.getSouth()),h=Math.cos(o),g=Math.cos(u),y=Math.sin(o),_=Math.sin(u),S=a.getWest(),C=a.getEast();return[Z(g,_,S,r),Z(g,_,C,r),Z(h,y,C,r),Z(h,y,S,r)]}function Um(a,r,o,u){const h=1<<o.z,g=(a/Ut+o.x)/h;return G(Ze((r/Ut+o.y)/h),De(g),u)}function gv({min:a,max:r}){return L/Math.max(r[0]-a[0],r[1]-a[1],r[2]-a[2])}const tC=new Float64Array(16);function yv(a){const r=gv(a),o=Me(tC,[r,r,r]);return ne(o,o,Un([],a.min))}function V1(a){const r=(u=a.min,(o=tC)[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=u[0],o[13]=u[1],o[14]=u[2],o[15]=1,o);var o,u;const h=1/gv(a);return te(r,r,[h,h,h])}function j1(a){const r=Ut/(2*Math.PI);return a/(2*Math.PI)/r}function nC(a,r){return Ut/(512*Math.pow(2,a))*gv(Al(r))}function rC(a,r,o,u,h){const g=j1(o),y=[a,r,-o/(2*Math.PI)],_=oe(new Float64Array(16));return ne(_,_,y),te(_,_,[g,g,g]),re(_,_,Cr(-h)),ze(_,_,Cr(-u)),_}function Su(a){return Ne(k,I,a)}function iC(a,r){const o=G(r.lat,r.lng),u=function($){const q=G($._center.lat,$._center.lng);let W=$t([],Qe(0,1,0),q);const J=he([],-$.angle,q);W=cn(W,W,J),he(J,-$._pitch,W);const ce=pn([],q);return In(ce,ce,fv($.cameraToCenterDistance/$.pixelsPerMeter)),cn(ce,ce,J),Qt([],q,ce)}(a);return y=(h=kt([],u,o))[0],_=h[1],S=h[2],C=(g=o)[0],P=g[1],R=g[2],B=(D=Math.sqrt(y*y+_*_+S*S)*Math.sqrt(C*C+P*P+R*R))&&kn(h,g)/D,Math.acos(Math.min(Math.max(B,-1),1));var h,g,y,_,S,C,P,R,D,B}function U1(a,r){return iC(a,r)>Math.PI/2*1.01}const oC=Cr(85),QA=Math.cos(oC),eR=Math.sin(oC),tR=K(),sC=a=>{const r=[];return a.paint.get("circle-pitch-alignment")==="map"&&r.push("PITCH_WITH_MAP"),a.paint.get("circle-pitch-scale")==="map"&&r.push("SCALE_WITH_MAP"),r};function aC(a,r,o,u,h,g,y,_,S){if(g&&a.queryGeometry.isAboveHorizon)return!1;g&&(S*=a.pixelToTileUnitsFactor);const C=a.tileID.canonical,P=o.projection.upVectorScale(C,o.center.lat,o.worldSize).metersToTile;for(const R of r)for(const D of R){const B=D.add(_),$=h&&o.elevation?o.elevation.exaggeration()*h.getElevationAt(B.x,B.y,!0):0,q=o.projection.projectTilePoint(B.x,B.y,C);if($>0){const ue=o.projection.upVector(C,B.x,B.y);q.x+=ue[0]*P*$,q.y+=ue[1]*P*$,q.z+=ue[2]*P*$}const W=g?B:nR(q.x,q.y,q.z,u),J=g?a.tilespaceRays.map(ue=>iR(ue,$)):a.queryGeometry.screenGeometry,ce=_n([],[q.x,q.y,q.z,1],u);if(!y&&g?S*=ce[3]/o.cameraToCenterDistance:y&&!g&&(S*=o.cameraToCenterDistance/ce[3]),g){const ue=Ze((D.y/Ut+C.y)/(1<<C.z));S/=o.projection.pixelsPerMeter(ue,1)/Ae(1,ue)}if(El(J,W,S))return!0}return!1}function nR(a,r,o,u){const h=_n([],[a,r,o,1],u);return new Vt(h[0]/h[3],h[1]/h[3])}const lC=Qe(0,0,0),rR=Qe(0,0,1);function iR(a,r){const o=Je();return lC[2]=r,a.intersectsPlane(lC,rR,o),new Vt(o[0],o[1])}class cC extends Us{}let uC,dC,hC,pC;function fC(a,{width:r,height:o},u,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==r*o*u)throw new RangeError("mismatched image size")}else h=new Uint8Array(r*o*u);return a.width=r,a.height=o,a.data=h,a}function mC(a,r,o){const{width:u,height:h}=r;u===a.width&&h===a.height||(q1(a,r,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,u),height:Math.min(a.height,h)},o,null),a.width=u,a.height=h,a.data=r.data)}function q1(a,r,o,u,h,g,y,_){if(h.width===0||h.height===0)return r;if(h.width>a.width||h.height>a.height||o.x>a.width-h.width||o.y>a.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>r.width||h.height>r.height||u.x>r.width-h.width||u.y>r.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const S=a.data,C=r.data,P=g===4&&_;for(let R=0;R<h.height;R++){const D=((o.y+R)*a.width+o.x)*g,B=((u.y+R)*r.width+u.x)*g;if(P)for(let $=0;$<h.width;$++){const q=D+$*g+3,W=B+$*g;C[W+0]=255,C[W+1]=255,C[W+2]=255,C[W+3]=S[q]}else if(y)for(let $=0;$<h.width;$++){const q=D+$*g,W=B+$*g,J=new Ar(S[q+0]/255,S[q+1]/255,S[q+2]/255,S[q+3]).toNonPremultipliedRenderColor(y).toArray();C[W+0]=J[0],C[W+1]=J[1],C[W+2]=J[2],C[W+3]=J[3]}else for(let $=0;$<h.width*g;$++)C[B+$]=S[D+$]}return r}tn(cC,"HeatmapBucket",{omit:["layers"]});class Cu{constructor(r,o){fC(this,r,1,o)}resize(r){mC(this,new Cu(r),1)}clone(){return new Cu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,u,h,g){q1(r,o,u,h,g,1,null)}}class Oo{constructor(r,o){fC(this,r,4,o)}resize(r){mC(this,new Oo(r),4)}replace(r,o){o?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Oo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,u,h,g,y,_){q1(r,o,u,h,g,4,y,_)}}class gC{constructor(r,o){this.width=r.width,this.height=r.height,this.data=o instanceof Uint8Array?new Float32Array(o.buffer):o}}function qm(a){const r={},o=a.resolution||256,u=a.clips?a.clips.length:1,h=a.image||new Oo({width:o,height:u}),g=(y,_,S)=>{r[a.evaluationKey]=S;const C=a.expression.evaluate(r),P=C?C.toNonPremultipliedRenderColor(null):null;P&&(h.data[y+_+0]=Math.floor(255*P.r),h.data[y+_+1]=Math.floor(255*P.g),h.data[y+_+2]=Math.floor(255*P.b),h.data[y+_+3]=Math.floor(255*P.a))};if(a.clips)for(let y=0,_=0;y<u;++y,_+=4*o)for(let S=0,C=0;S<o;S++,C+=4){const P=S/(o-1),{start:R,end:D}=a.clips[y];g(_,C,R*(1-P)+D*P)}else for(let y=0,_=0;y<o;y++,_+=4)g(0,_,y/(o-1));return h}tn(Cu,"AlphaImage"),tn(Oo,"RGBAImage");const oR=Sr([{name:"a_pos",components:2,type:"Int16"}],4),sR=Sr([{name:"a_road_z_offset",components:1,type:"Float32"}],4),aR=Sr([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),lR=Sr([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function Hm(a,r,o=2){const u=r&&r.length,h=u?r[0]*o:a.length;let g=yC(a,0,h,o,!0);const y=[];if(!g||g.next===g.prev)return y;let _,S,C;if(u&&(g=function(P,R,D,B){const $=[];for(let q=0,W=R.length;q<W;q++){const J=yC(P,R[q]*B,q<W-1?R[q+1]*B:P.length,B,!1);J===J.next&&(J.steiner=!0),$.push(gR(J))}$.sort(pR);for(let q=0;q<$.length;q++)D=fR($[q],D);return D}(a,r,g,o)),a.length>80*o){_=1/0,S=1/0;let P=-1/0,R=-1/0;for(let D=o;D<h;D+=o){const B=a[D],$=a[D+1];B<_&&(_=B),$<S&&(S=$),B>P&&(P=B),$>R&&(R=$)}C=Math.max(P-_,R-S),C=C!==0?32767/C:0}return Gm(g,y,o,_,S,C,0),y}function yC(a,r,o,u,h){let g;if(h===function(y,_,S,C){let P=0;for(let R=_,D=S-C;R<S;R+=C)P+=(y[D]-y[R])*(y[R+1]+y[D+1]),D=R;return P}(a,r,o,u)>0)for(let y=r;y<o;y+=u)g=xC(y/u|0,a[y],a[y+1],g);else for(let y=o-u;y>=r;y-=u)g=xC(y/u|0,a[y],a[y+1],g);return g&&Bp(g,g.next)&&(Zm(g),g=g.next),g}function Qd(a,r){if(!a)return a;r||(r=a);let o,u=a;do if(o=!1,u.steiner||!Bp(u,u.next)&&go(u.prev,u,u.next)!==0)u=u.next;else{if(Zm(u),u=r=u.prev,u===u.next)break;o=!0}while(o||u!==r);return r}function Gm(a,r,o,u,h,g,y){if(!a)return;!y&&g&&function(S,C,P,R){let D=S;do D.z===0&&(D.z=H1(D.x,D.y,C,P,R)),D.prevZ=D.prev,D.nextZ=D.next,D=D.next;while(D!==S);D.prevZ.nextZ=null,D.prevZ=null,function(B){let $,q=1;do{let W,J=B;B=null;let ce=null;for($=0;J;){$++;let ue=J,H=0;for(let de=0;de<q&&(H++,ue=ue.nextZ,ue);de++);let se=q;for(;H>0||se>0&&ue;)H!==0&&(se===0||!ue||J.z<=ue.z)?(W=J,J=J.nextZ,H--):(W=ue,ue=ue.nextZ,se--),ce?ce.nextZ=W:B=W,W.prevZ=ce,ce=W;J=ue}ce.nextZ=null,q*=2}while($>1)}(D)}(a,u,h,g);let _=a;for(;a.prev!==a.next;){const S=a.prev,C=a.next;if(g?uR(a,u,h,g):cR(a))r.push(S.i,a.i,C.i),Zm(a),a=C.next,_=C.next;else if((a=C)===_){y?y===1?Gm(a=dR(Qd(a),r),r,o,u,h,g,2):y===2&&hR(a,r,o,u,h,g):Gm(Qd(a),r,o,u,h,g,1);break}}}function cR(a){const r=a.prev,o=a,u=a.next;if(go(r,o,u)>=0)return!1;const h=r.x,g=o.x,y=u.x,_=r.y,S=o.y,C=u.y,P=Math.min(h,g,y),R=Math.min(_,S,C),D=Math.max(h,g,y),B=Math.max(_,S,C);let $=u.next;for(;$!==r;){if($.x>=P&&$.x<=D&&$.y>=R&&$.y<=B&&Wm(h,_,g,S,y,C,$.x,$.y)&&go($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function uR(a,r,o,u){const h=a.prev,g=a,y=a.next;if(go(h,g,y)>=0)return!1;const _=h.x,S=g.x,C=y.x,P=h.y,R=g.y,D=y.y,B=Math.min(_,S,C),$=Math.min(P,R,D),q=Math.max(_,S,C),W=Math.max(P,R,D),J=H1(B,$,r,o,u),ce=H1(q,W,r,o,u);let ue=a.prevZ,H=a.nextZ;for(;ue&&ue.z>=J&&H&&H.z<=ce;){if(ue.x>=B&&ue.x<=q&&ue.y>=$&&ue.y<=W&&ue!==h&&ue!==y&&Wm(_,P,S,R,C,D,ue.x,ue.y)&&go(ue.prev,ue,ue.next)>=0||(ue=ue.prevZ,H.x>=B&&H.x<=q&&H.y>=$&&H.y<=W&&H!==h&&H!==y&&Wm(_,P,S,R,C,D,H.x,H.y)&&go(H.prev,H,H.next)>=0))return!1;H=H.nextZ}for(;ue&&ue.z>=J;){if(ue.x>=B&&ue.x<=q&&ue.y>=$&&ue.y<=W&&ue!==h&&ue!==y&&Wm(_,P,S,R,C,D,ue.x,ue.y)&&go(ue.prev,ue,ue.next)>=0)return!1;ue=ue.prevZ}for(;H&&H.z<=ce;){if(H.x>=B&&H.x<=q&&H.y>=$&&H.y<=W&&H!==h&&H!==y&&Wm(_,P,S,R,C,D,H.x,H.y)&&go(H.prev,H,H.next)>=0)return!1;H=H.nextZ}return!0}function dR(a,r){let o=a;do{const u=o.prev,h=o.next.next;!Bp(u,h)&&bC(u,o,o.next,h)&&Km(u,h)&&Km(h,u)&&(r.push(u.i,o.i,h.i),Zm(o),Zm(o.next),o=a=h),o=o.next}while(o!==a);return Qd(o)}function hR(a,r,o,u,h,g){let y=a;do{let _=y.next.next;for(;_!==y.prev;){if(y.i!==_.i&&yR(y,_)){let S=_C(y,_);return y=Qd(y,y.next),S=Qd(S,S.next),Gm(y,r,o,u,h,g,0),void Gm(S,r,o,u,h,g,0)}_=_.next}y=y.next}while(y!==a)}function pR(a,r){let o=a.x-r.x;return o===0&&(o=a.y-r.y,o===0)&&(o=(a.next.y-a.y)/(a.next.x-a.x)-(r.next.y-r.y)/(r.next.x-r.x)),o}function fR(a,r){const o=function(h,g){let y=g;const _=h.x,S=h.y;let C,P=-1/0;if(Bp(h,y))return y;do{if(Bp(h,y.next))return y.next;if(S<=y.y&&S>=y.next.y&&y.next.y!==y.y){const q=y.x+(S-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(q<=_&&q>P&&(P=q,C=y.x<y.next.x?y:y.next,q===_))return C}y=y.next}while(y!==g);if(!C)return null;const R=C,D=C.x,B=C.y;let $=1/0;y=C;do{if(_>=y.x&&y.x>=D&&_!==y.x&&vC(S<B?_:P,S,D,B,S<B?P:_,S,y.x,y.y)){const q=Math.abs(S-y.y)/(_-y.x);Km(y,h)&&(q<$||q===$&&(y.x>C.x||y.x===C.x&&mR(C,y)))&&(C=y,$=q)}y=y.next}while(y!==R);return C}(a,r);if(!o)return r;const u=_C(o,a);return Qd(u,u.next),Qd(o,o.next)}function mR(a,r){return go(a.prev,a,r.prev)<0&&go(r.next,a,a.next)<0}function H1(a,r,o,u,h){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-o)*h|0)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-u)*h|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function gR(a){let r=a,o=a;do(r.x<o.x||r.x===o.x&&r.y<o.y)&&(o=r),r=r.next;while(r!==a);return o}function vC(a,r,o,u,h,g,y,_){return(h-y)*(r-_)>=(a-y)*(g-_)&&(a-y)*(u-_)>=(o-y)*(r-_)&&(o-y)*(g-_)>=(h-y)*(u-_)}function Wm(a,r,o,u,h,g,y,_){return!(a===y&&r===_)&&vC(a,r,o,u,h,g,y,_)}function yR(a,r){return a.next.i!==r.i&&a.prev.i!==r.i&&!function(o,u){let h=o;do{if(h.i!==o.i&&h.next.i!==o.i&&h.i!==u.i&&h.next.i!==u.i&&bC(h,h.next,o,u))return!0;h=h.next}while(h!==o);return!1}(a,r)&&(Km(a,r)&&Km(r,a)&&function(o,u){let h=o,g=!1;const y=(o.x+u.x)/2,_=(o.y+u.y)/2;do h.y>_!=h.next.y>_&&h.next.y!==h.y&&y<(h.next.x-h.x)*(_-h.y)/(h.next.y-h.y)+h.x&&(g=!g),h=h.next;while(h!==o);return g}(a,r)&&(go(a.prev,a,r.prev)||go(a,r.prev,r))||Bp(a,r)&&go(a.prev,a,a.next)>0&&go(r.prev,r,r.next)>0)}function go(a,r,o){return(r.y-a.y)*(o.x-r.x)-(r.x-a.x)*(o.y-r.y)}function Bp(a,r){return a.x===r.x&&a.y===r.y}function bC(a,r,o,u){const h=bv(go(a,r,o)),g=bv(go(a,r,u)),y=bv(go(o,u,a)),_=bv(go(o,u,r));return h!==g&&y!==_||!(h!==0||!vv(a,o,r))||!(g!==0||!vv(a,u,r))||!(y!==0||!vv(o,a,u))||!(_!==0||!vv(o,r,u))}function vv(a,r,o){return r.x<=Math.max(a.x,o.x)&&r.x>=Math.min(a.x,o.x)&&r.y<=Math.max(a.y,o.y)&&r.y>=Math.min(a.y,o.y)}function bv(a){return a>0?1:a<0?-1:0}function Km(a,r){return go(a.prev,a,a.next)<0?go(a,r,a.next)>=0&&go(a,a.prev,r)>=0:go(a,r,a.prev)<0||go(a,a.next,r)<0}function _C(a,r){const o=G1(a.i,a.x,a.y),u=G1(r.i,r.x,r.y),h=a.next,g=r.prev;return a.next=r,r.prev=a,o.next=h,h.prev=o,u.next=o,o.prev=u,g.next=u,u.prev=g,u}function xC(a,r,o,u){const h=G1(a,r,o);return u?(h.next=u.next,h.prev=u,u.next.prev=h,u.next=h):(h.prev=h,h.next=h),h}function Zm(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function G1(a,r,o){return{i:a,x:r,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function _v(a,r){const o=a.length;if(o<=1)return[a];const u=[];let h,g;for(let y=0;y<o;y++){const _=mi(a[y]);_!==0&&(a[y].area=Math.abs(_),g===void 0&&(g=_<0),g===_<0?(h&&u.push(h),h=[a[y]]):h.push(a[y]))}if(h&&u.push(h),r>1)for(let y=0;y<u.length;y++)u[y].length<=r||(jo(u[y],r,1,u[y].length-1,vR),u[y]=u[y].slice(0,r));return u}function vR(a,r){return r.area-a.area}function wC(a,r,o=1){if(!a)return null;const u=typeof a=="string"?os.from(a).getPrimary():a.getPrimary(),h=typeof a=="string"?null:a.getSecondary();for(const g of[u,h]){if(!g)continue;const y=g.id.toString();r.has(y)||r.set(y,[]),g.scaleSelf(o),r.get(y).push(g)}return{primary:u.toString(),secondary:h?h.toString():null}}function W1(a,r,o,u){const h=u.patternDependencies;let g=!1;for(const y of r){const _=y.paint.get(`${a}-pattern`);_.isConstant()||(g=!0),wC(_.constantOr(null),h,o)&&(g=!0)}return g}function K1(a,r,o,u,h,g){const y=g.patternDependencies;for(const _ of r){const S=_.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let C=S.evaluate({zoom:u},o,{},g.availableImages);C=C&&C.name?C.name:C;const P=wC(C,y,h);if(!P)continue;const{primary:R,secondary:D}=P;R&&(o.patterns[_.id]=[R,D].filter(Boolean))}}return o}class SC{constructor(){this.polygons=new Map}add(r,...o){this.polygons.has(r)?this.polygons.get(r).push(...o):this.polygons.set(r,o)}merge(r){for(const[o,u]of r.polygons)this.add(o,...u)}}class eh{constructor(){this.portals=[]}static evaluate(r){if(r.length===0)return new eh;let o=[];for(const C of r)o.push(...C.portals);if(o.length===0)return new eh;const u=(C,P)=>C<=0&&P<=0||C>=Ut&&P>=Ut;for(const C of o){const P=C.va,R=C.vb;(u(P.x,R.x)||u(P.y,R.y))&&(C.type="border")}const h=o.filter(C=>C.type!=="unevaluated"),g=o.filter(C=>C.type==="unevaluated");if(g.length===0)return new eh;g.sort((C,P)=>C.hash===P.hash?C.isTunnel===P.isTunnel?0:C.isTunnel?-1:1:C.hash<P.hash?1:-1),o=h.concat(g);let y=h.length,_=y,S=y;do if(_++,_===o.length||o[y].hash!==o[_].hash){if(_-y==2){S<y&&(o[S]=o[y],o[y]=null);const C=o[S],P=o[_-1];C.type=C.isTunnel!==P.isTunnel?"tunnel":"polygon",C.connection={a:C.connection.a,b:P.connection.a},S++}y=_}while(y!==o.length);return o.splice(S),o.sort((C,P)=>C.hash<P.hash?1:-1),{portals:o}}}tn(eh,"ElevationPortalGraph"),tn(SC,"ElevationPolygons");class bR{constructor(r,o,u){this.outPositions=r,this.outNormals=o,this.outIndices=u,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(r,o,u){let h=r[2];u!=null&&(h*=u);const g=this.getVec3Bits(r)<<96n|this.getVec3Bits(o),y=this.vertexLookup.get(g);if(y!=null)return y;const _=this.outPositions.length;this.vertexLookup.set(g,_);const S=Math.trunc(16384*o[0]),C=Math.trunc(16384*o[1]),P=Math.trunc(16384*o[2]);return this.outPositions.emplaceBack(r[0],r[1],h),this.outNormals.emplaceBack(S,C,P),_}addVertices(r,o,...u){const h=[];for(const g of u){const y=this.addVertex(g,r,o);h.push(y)}return h}addTriangles(r,o,u){if(o&&u){const h=u.length===1,g=Qe(0,0,0);for(let y=0;y<r.length;y+=3){const _=o[r[y+0]],S=o[r[y+1]],C=o[r[y+2]],P=h?u[0]:u[r[y+1]],R=h?u[0]:u[r[y+2]],D=this.addVertex(Qe(_.x,_.y,h?u[0]:u[r[y+0]]),g),B=this.addVertex(Qe(S.x,S.y,P),g),$=this.addVertex(Qe(C.x,C.y,R),g);this.outIndices.emplaceBack(D,B,$)}}else for(let h=0;h<r.length;h+=3)this.outIndices.emplaceBack(r[h+0],r[h+1],r[h+2])}addQuad(r,o){const u=this.addVertices(o,void 0,...r.map(S=>Qe(S.coord.x,S.coord.y,S.height))),[h,g,y,_]=u;this.addTriangles([h,g,y,y,_,h])}getVertexCount(){return this.outPositions.length}clearVertexLookup(){this.vertexLookup.clear()}getBits(r){return this.view.setFloat32(0,r),BigInt(this.view.getUint32(0))}getVec3Bits(r){return this.getBits(r[0])<<64n|this.getBits(r[1])<<32n|this.getBits(r[2])}}class qs{constructor(r,o,u,h){this.unevaluatedPortals=new eh,this.portalPolygons=new SC,this.bridgeFeatureSections=[],this.tunnelFeatureSections=[],this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new Em,this.vertexNormals=new wp,this.indexArray=new Io,this.tileToMeters=st(r),this.bridgeProgramConfigurations=new p(o,{zoom:u,lut:h},g=>g!=="fill-tunnel-structure-color"),this.tunnelProgramConfigurations=new p(o,{zoom:u,lut:h},g=>g!=="fill-bridge-guard-rail-color")}addVertices(r,o){const u=this.unevalVertices.length;for(let h=0;h<r.length;h++)this.unevalVertices.push(r[h]),this.unevalHeights.push(o[h]);return u}addTriangles(r,o,u){const h=u?this.unevalTunnelTriangles:this.unevalTriangles;for(const g of r)h.push(g+o)}addRenderableRing(r,o,u,h,g,y){const _=[new Vt(g.min.x,g.min.y),new Vt(g.max.x,g.min.y),new Vt(g.max.x,g.max.y),new Vt(g.min.x,g.max.y)];for(let S=0;S<u-1;S++){const C=o+S,P=C+1,R=this.unevalVertices[C],D=this.unevalVertices[P];if(!(R.x>=g.min.x&&R.x<=g.max.x&&R.y>=g.min.y&&R.y<=g.max.y||D.x>=g.min.x&&D.x<=g.max.x&&D.y>=g.min.y&&D.y<=g.max.y||xc(R,D,_))||this.isOnBorder(R.x,D.x)||this.isOnBorder(R.y,D.y))continue;const B=qs.computeEdgeHash(this.unevalVertices[C],this.unevalVertices[P]);let $,q=this.vertexHashLookup.get(qs.computePosHash(R));q!=null?$=q.next:(q=this.vertexHashLookup.get(qs.computePosHash(D)),$=q!=null?q.prev:B),this.unevalEdges.push({polygonIdx:r,a:C,b:P,hash:B,portalHash:$,isTunnel:h,type:"unevaluated",featureInfo:y})}}addPortalCandidates(r,o,u,h,g){if(o.length===0)return;this.portalPolygons.add(r,{geometry:o,zLevel:g});const y=o[0];this.vertexHashLookup.clear();let _=qs.computeEdgeHash(y[y.length-2],y[y.length-1]);for(let S=0;S<y.length-1;S++){const C=y[S+0],P=y[S+1],R=ao(P.x-C.x,P.y-C.y),D=ko(R);if(D===0)continue;let B="unevaluated";const $=h.pointElevation(C),q=h.pointElevation(P);Math.abs($)<.01&&Math.abs(q)<.01?B="entrance":(this.isOnBorder(C.x,P.x)||this.isOnBorder(C.y,P.y))&&(B="border");const W=qs.computeEdgeHash(C,P);this.unevaluatedPortals.portals.push({connection:{a:r,b:void 0},va:C,vb:P,vab:R,length:D,hash:W,isTunnel:u,type:B});const J=qs.computePosHash(C);this.vertexHashLookup.set(J,{prev:_,next:W}),_=W}}construct(r){if(this.unevalVertices.length===0)return;const o=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),u=D=>{D.primitiveLength=this.indexArray.length-D.primitiveOffset},h=new bR(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(r.portals,this.unevalEdges);const g=o(),y=o(),_=o(),S=(D,B)=>{D.sort((q,W)=>q.type===B&&W.type!==B?-1:q.type!==B&&W.type===B?1:0);const $=D.findIndex(q=>q.type!==B);return $>=0?$:D.length};let C=0;this.unevalEdges.length>0&&(C=S(this.unevalEdges,"none"),this.constructBridgeStructures(h,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:C},this.tileToMeters)),u(_);const P=o(),R=o();if(this.unevalEdges.length>0){const D=this.unevalEdges.splice(C),B=S(D,"tunnel")+C;this.unevalEdges.push(...D),this.constructTunnelStructures(h,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:C},{min:C,max:B})}u(P),h.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),u(R),h.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),u(y),h.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),u(g),this.maskSegments=zi.simpleSegment(0,R.primitiveOffset,0,R.primitiveLength),this.depthSegments=zi.simpleSegment(0,y.primitiveOffset,0,y.primitiveLength),this.renderableBridgeSegments=zi.simpleSegment(0,_.primitiveOffset,0,_.primitiveLength),this.renderableTunnelSegments=zi.simpleSegment(0,P.primitiveOffset,0,P.primitiveLength),this.shadowCasterSegments=zi.simpleSegment(0,g.primitiveOffset,0,g.primitiveLength)}update(r,o,u,h,g,y,_,S){this.bridgeProgramConfigurations.updatePaintArrays(r,o,g,u,h,y,_,S),this.tunnelProgramConfigurations.updatePaintArrays(r,o,g,u,h,y,_,S)}upload(r){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=r.createVertexBuffer(this.vertexPositions,aR.members),this.vertexBufferNormal=r.createVertexBuffer(this.vertexNormals,lR.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.bridgeProgramConfigurations.upload(r),this.tunnelProgramConfigurations.upload(r))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableBridgeSegments.destroy(),this.renderableTunnelSegments.destroy(),this.shadowCasterSegments.destroy()),this.bridgeProgramConfigurations.destroy(),this.tunnelProgramConfigurations.destroy()}populatePaintArrays(r,o,u,h,g){const y=(_,S)=>{for(let C=0;C<S.length-1;C++){const P=S[C].featureIndex,R=S[C+1].vertexStart,D=r.feature(P);_.populatePaintArrays(R,D,P,{},u,o,h,void 0,g)}};y(this.bridgeProgramConfigurations,this.bridgeFeatureSections),y(this.tunnelProgramConfigurations,this.tunnelFeatureSections)}computeVertexConnections(r,o,u,h,g){const y=new Map;for(let _=h;_<g;_++){const S=u[_],C=S.a,P=S.b,R=qs.computePosHash(r[C]),D=qs.computePosHash(r[P]);y.has(R)||y.set(R,{}),y.has(D)||y.set(D,{});const B=y.get(R),$=y.get(D);o[C]<=0&&o[P]<=0||(B.to=P,$.from=C)}return y}constructBridgeStructures(r,o,u,h,g,y){r.clearVertexLookup();const _=this.computeVertexConnections(o,u,h,g.min,g.max),S=1/y,C=.5*S,P=B=>Qe(o[B].x,o[B].y,u[B]*S),R=B=>{const $=_.get(qs.computePosHash(o[B])),q=$.from,W=$.to;if(!q||!W)return;const J=P(q),ce=P(B),ue=P(W),H=Qe(0,0,0);if(!He(J,ce)){const de=qe(Je(),ce,J);Qt(H,H,pn(de,de))}if(!He(ue,ce)){const de=qe(Je(),ue,ce);Qt(H,H,pn(de,de))}const se=Xt(H);return se>0?In(H,H,1/se):void 0};let D=Number.POSITIVE_INFINITY;this.sortSubarray(h,g.min,g.max,(B,$)=>B.featureInfo.featureIndex-$.featureInfo.featureIndex);for(let B=g.min;B<g.max;B++){const $=h[B];if(!$.featureInfo.guardRailEnabled)continue;const q=this.prepareEdgePoints(o,u,$,(Vn,ln)=>Vn>ln);if(q==null)continue;const W=q[0],J=q[1],ce=Qe(W.coord.x,W.coord.y,S*W.height),ue=Qe(J.coord.x,J.coord.y,S*J.height);if(He(ce,ue))continue;const H=qe(Je(),ue,ce);pn(H,H);const se=Vn=>pn(Vn,Vn),de=R($.a)||H,be=R($.b)||H,Oe=se(Qe(de[1],-de[0],0)),Re=se(Qe(be[1],-be[0],0)),Be=se($t(Je(),Oe,de)),je=se($t(Je(),Re,be)),at=Je(),At=[Qt(Je(),ce,In(at,qe(at,Oe,Be),C)),Qt(Je(),ce,In(at,Qt(at,Oe,Be),C)),Qt(Je(),ce,In(at,Be,C)),ce],yt=[Qt(Je(),ue,In(at,qe(at,Re,je),C)),Qt(Je(),ue,In(at,Qt(at,Re,je),C)),Qt(Je(),ue,In(at,je,C)),ue];D=this.addFeatureSection($.featureInfo.featureIndex,D,this.bridgeFeatureSections,r);const[Pt,Rt]=r.addVertices(Oe,y,At[0],At[1]),[ct,Tt]=r.addVertices(Re,y,yt[0],yt[1]);r.addTriangles([Pt,Rt,ct,Rt,Tt,ct]);const[ot,lt]=r.addVertices(Be,y,At[1],At[2]),[Lt,zt]=r.addVertices(je,y,yt[1],yt[2]);r.addTriangles([ot,lt,Lt,lt,zt,Lt]);const[Sn,un]=r.addVertices(Un(Oe,Oe),y,At[2],At[3]),[Gt,Dt]=r.addVertices(Un(Re,Re),y,yt[2],yt[3]);r.addTriangles([Sn,un,Gt,un,Dt,Gt])}this.bridgeFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:r.getVertexCount()})}constructTunnelStructures(r,o,u,h,g,y){r.clearVertexLookup();let _=Number.POSITIVE_INFINITY;const S=(P,R)=>P.featureInfo.featureIndex-R.featureInfo.featureIndex;this.sortSubarray(h,g.min,g.max,S),this.sortSubarray(h,y.min,y.max,S);const C=P=>pn(P,P);for(let P=g.min;P<g.max;P++){const R=this.prepareEdgePoints(o,u,h[P],(q,W)=>q<W);if(R==null)continue;const[D,B]=R,$=C(Qe(-(B.coord.y-D.coord.y),B.coord.x-D.coord.x,0));_=this.addFeatureSection(h[P].featureInfo.featureIndex,_,this.tunnelFeatureSections,r),r.addQuad([D,B,{coord:B.coord,height:h[P].isTunnel?-.1:0},{coord:D.coord,height:h[P].isTunnel?-.1:0}],$)}for(let P=y.min;P<y.max;P++){const R=h[P];R.isTunnel&&([R.a,R.b]=[R.b,R.a]);const D=o[R.a],B=o[R.b],$=C(Qe(-(B.y-D.y),B.x-D.x,0));_=this.addFeatureSection(R.featureInfo.featureIndex,_,this.tunnelFeatureSections,r),r.addQuad([{coord:B,height:0},{coord:D,height:0},{coord:D,height:u[R.a]+4},{coord:B,height:u[R.b]+4}],$),r.addQuad([{coord:D,height:0},{coord:B,height:0},{coord:B,height:u[R.b]+4},{coord:D,height:u[R.a]+4}],$)}this.tunnelFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:r.getVertexCount()})}prepareEdgePoints(r,o,u,h){let g=o[u.a],y=o[u.b];const _=h(g,0),S=h(y,0);if(_&&S)return[{coord:r[u.a],height:g},{coord:r[u.b],height:y}];if(!_&&!S)return;const C=r[u.a].clone(),P=r[u.b].clone();if(_){if(!S){const R=y/(y-g);P.x=Mn(P.x,C.x,R),P.y=Mn(P.y,C.y,R),y=Mn(y,g,R)}}else{const R=g/(g-y);C.x=Mn(C.x,P.x,R),C.y=Mn(C.y,P.y,R),g=Mn(g,y,R)}return[{coord:C,height:g},{coord:P,height:y}]}prepareEdges(r,o){if(o.length===0)return;o.sort((_,S)=>_.hash===S.hash?S.polygonIdx-_.polygonIdx:S.hash>_.hash?1:-1);let u=0,h=0,g=0,y=o[u].polygonIdx;do h++,(h===o.length||o[u].hash!==o[h].hash)&&((h-u==1||o[h-1].polygonIdx!==y)&&(g<u&&(o[g]=o[u],o[u]=null),o[g].type="none",g++),u=h,u!==o.length&&(y=o[u].polygonIdx));while(u!==o.length);if(o.splice(g),o.length!==0&&r.length!==0){o.sort((C,P)=>C.portalHash<P.portalHash?1:-1);let _=0,S=0;for(;_!==o.length&&S!==r.length;){const C=o[_],P=r[S];C.portalHash>P.hash?_++:P.hash>C.portalHash?S++:(C.type=P.type,_++)}}}isOnBorder(r,o){return r<=0&&o<=0||r>=Ut&&o>=Ut}addFeatureSection(r,o,u,h){return r!==o&&(o=r,u.push({featureIndex:r,vertexStart:h.getVertexCount()}),h.clearVertexLookup()),o}sortSubarray(r,o,u,h){const g=r.slice(o,u);g.sort(h),r.splice(o,g.length,...g)}static computeEdgeHash(r,o){return(r.y===o.y&&r.x>o.x||r.y>o.y)&&([r,o]=[o,r]),BigInt(qs.computePosHash(r))<<32n|BigInt(qs.computePosHash(o))}static computePosHash(r){return((65535&r.x)<<16|65535&r.y)>>>0}}var CC,kC={exports:{}},TC=(CC||(CC=1,function(a,r){(function(o){function u(ye,_e){return ye>_e?1:ye<_e?-1:0}var h=function(ye,_e){ye===void 0&&(ye=u),_e===void 0&&(_e=!1),this._compare=ye,this._root=null,this._size=0,this._noDuplicates=!!_e},g={size:{configurable:!0}};function y(ye,_e,dt,Ft,Wt){var Ht=Wt-Ft;if(Ht>0){var sn=Ft+Math.floor(Ht/2),Rn={key:_e[sn],data:dt[sn],parent:ye};return Rn.left=y(Rn,_e,dt,Ft,sn),Rn.right=y(Rn,_e,dt,sn+1,Wt),Rn}return null}function _(ye,_e,dt,Ft,Wt){if(!(dt>=Ft)){for(var Ht=ye[dt+Ft>>1],sn=dt-1,Rn=Ft+1;;){do sn++;while(Wt(ye[sn],Ht)<0);do Rn--;while(Wt(ye[Rn],Ht)>0);if(sn>=Rn)break;var dr=ye[sn];ye[sn]=ye[Rn],ye[Rn]=dr,dr=_e[sn],_e[sn]=_e[Rn],_e[Rn]=dr}_(ye,_e,dt,Rn,Wt),_(ye,_e,Rn+1,Ft,Wt)}}h.prototype.rotateLeft=function(ye){var _e=ye.right;_e&&(ye.right=_e.left,_e.left&&(_e.left.parent=ye),_e.parent=ye.parent),ye.parent?ye===ye.parent.left?ye.parent.left=_e:ye.parent.right=_e:this._root=_e,_e&&(_e.left=ye),ye.parent=_e},h.prototype.rotateRight=function(ye){var _e=ye.left;_e&&(ye.left=_e.right,_e.right&&(_e.right.parent=ye),_e.parent=ye.parent),ye.parent?ye===ye.parent.left?ye.parent.left=_e:ye.parent.right=_e:this._root=_e,_e&&(_e.right=ye),ye.parent=_e},h.prototype._splay=function(ye){for(;ye.parent;){var _e=ye.parent;_e.parent?_e.left===ye&&_e.parent.left===_e?(this.rotateRight(_e.parent),this.rotateRight(_e)):_e.right===ye&&_e.parent.right===_e?(this.rotateLeft(_e.parent),this.rotateLeft(_e)):_e.left===ye&&_e.parent.right===_e?(this.rotateRight(_e),this.rotateLeft(_e)):(this.rotateLeft(_e),this.rotateRight(_e)):_e.left===ye?this.rotateRight(_e):this.rotateLeft(_e)}},h.prototype.splay=function(ye){for(var _e,dt,Ft,Wt,Ht;ye.parent;)(dt=(_e=ye.parent).parent)&&dt.parent?((Ft=dt.parent).left===dt?Ft.left=ye:Ft.right=ye,ye.parent=Ft):(ye.parent=null,this._root=ye),Wt=ye.left,Ht=ye.right,ye===_e.left?(dt&&(dt.left===_e?(_e.right?(dt.left=_e.right,dt.left.parent=dt):dt.left=null,_e.right=dt,dt.parent=_e):(Wt?(dt.right=Wt,Wt.parent=dt):dt.right=null,ye.left=dt,dt.parent=ye)),Ht?(_e.left=Ht,Ht.parent=_e):_e.left=null,ye.right=_e,_e.parent=ye):(dt&&(dt.right===_e?(_e.left?(dt.right=_e.left,dt.right.parent=dt):dt.right=null,_e.left=dt,dt.parent=_e):(Ht?(dt.left=Ht,Ht.parent=dt):dt.left=null,ye.right=dt,dt.parent=ye)),Wt?(_e.right=Wt,Wt.parent=_e):_e.right=null,ye.left=_e,_e.parent=ye)},h.prototype.replace=function(ye,_e){ye.parent?ye===ye.parent.left?ye.parent.left=_e:ye.parent.right=_e:this._root=_e,_e&&(_e.parent=ye.parent)},h.prototype.minNode=function(ye){if(ye===void 0&&(ye=this._root),ye)for(;ye.left;)ye=ye.left;return ye},h.prototype.maxNode=function(ye){if(ye===void 0&&(ye=this._root),ye)for(;ye.right;)ye=ye.right;return ye},h.prototype.insert=function(ye,_e){var dt=this._root,Ft=null,Wt=this._compare;if(this._noDuplicates)for(;dt;){if(Ft=dt,Wt(dt.key,ye)===0)return;dt=Wt(dt.key,ye)<0?dt.right:dt.left}else for(;dt;)Ft=dt,dt=Wt(dt.key,ye)<0?dt.right:dt.left;return dt={key:ye,data:_e,left:null,right:null,parent:Ft},Ft?Wt(Ft.key,dt.key)<0?Ft.right=dt:Ft.left=dt:this._root=dt,this.splay(dt),this._size++,dt},h.prototype.find=function(ye){for(var _e=this._root,dt=this._compare;_e;){var Ft=dt(_e.key,ye);if(Ft<0)_e=_e.right;else{if(!(Ft>0))return _e;_e=_e.left}}return null},h.prototype.contains=function(ye){for(var _e=this._root,dt=this._compare;_e;){var Ft=dt(ye,_e.key);if(Ft===0)return!0;_e=Ft<0?_e.left:_e.right}return!1},h.prototype.remove=function(ye){var _e=this.find(ye);if(!_e)return!1;if(this.splay(_e),_e.left)if(_e.right){var dt=this.minNode(_e.right);dt.parent!==_e&&(this.replace(dt,dt.right),dt.right=_e.right,dt.right.parent=dt),this.replace(_e,dt),dt.left=_e.left,dt.left.parent=dt}else this.replace(_e,_e.left);else this.replace(_e,_e.right);return this._size--,!0},h.prototype.removeNode=function(ye){if(!ye)return!1;if(this.splay(ye),ye.left)if(ye.right){var _e=this.minNode(ye.right);_e.parent!==ye&&(this.replace(_e,_e.right),_e.right=ye.right,_e.right.parent=_e),this.replace(ye,_e),_e.left=ye.left,_e.left.parent=_e}else this.replace(ye,ye.left);else this.replace(ye,ye.right);return this._size--,!0},h.prototype.erase=function(ye){var _e=this.find(ye);if(_e){this.splay(_e);var dt=_e.left,Ft=_e.right,Wt=null;dt&&(dt.parent=null,Wt=this.maxNode(dt),this.splay(Wt),this._root=Wt),Ft&&(dt?Wt.right=Ft:this._root=Ft,Ft.parent=Wt),this._size--}},h.prototype.pop=function(){var ye=this._root,_e=null;if(ye){for(;ye.left;)ye=ye.left;_e={key:ye.key,data:ye.data},this.remove(ye.key)}return _e},h.prototype.next=function(ye){var _e=ye;if(_e)if(_e.right)for(_e=_e.right;_e&&_e.left;)_e=_e.left;else for(_e=ye.parent;_e&&_e.right===ye;)ye=_e,_e=_e.parent;return _e},h.prototype.prev=function(ye){var _e=ye;if(_e)if(_e.left)for(_e=_e.left;_e&&_e.right;)_e=_e.right;else for(_e=ye.parent;_e&&_e.left===ye;)ye=_e,_e=_e.parent;return _e},h.prototype.forEach=function(ye){for(var _e=this._root,dt=[],Ft=!1,Wt=0;!Ft;)_e?(dt.push(_e),_e=_e.left):dt.length>0?(ye(_e=dt.pop(),Wt++),_e=_e.right):Ft=!0;return this},h.prototype.range=function(ye,_e,dt,Ft){for(var Wt=[],Ht=this._compare,sn=this._root;Wt.length!==0||sn;)if(sn)Wt.push(sn),sn=sn.left;else{if(Ht((sn=Wt.pop()).key,_e)>0)break;if(Ht(sn.key,ye)>=0&&dt.call(Ft,sn))return this;sn=sn.right}return this},h.prototype.keys=function(){for(var ye=this._root,_e=[],dt=[],Ft=!1;!Ft;)ye?(_e.push(ye),ye=ye.left):_e.length>0?(ye=_e.pop(),dt.push(ye.key),ye=ye.right):Ft=!0;return dt},h.prototype.values=function(){for(var ye=this._root,_e=[],dt=[],Ft=!1;!Ft;)ye?(_e.push(ye),ye=ye.left):_e.length>0?(ye=_e.pop(),dt.push(ye.data),ye=ye.right):Ft=!0;return dt},h.prototype.at=function(ye){for(var _e=this._root,dt=[],Ft=!1,Wt=0;!Ft;)if(_e)dt.push(_e),_e=_e.left;else if(dt.length>0){if(_e=dt.pop(),Wt===ye)return _e;Wt++,_e=_e.right}else Ft=!0;return null},h.prototype.load=function(ye,_e,dt){if(ye===void 0&&(ye=[]),_e===void 0&&(_e=[]),dt===void 0&&(dt=!1),this._size!==0)throw new Error("bulk-load: tree is not empty");var Ft=ye.length;return dt&&_(ye,_e,0,Ft-1,this._compare),this._root=y(null,ye,_e,0,Ft),this._size=Ft,this},h.prototype.min=function(){var ye=this.minNode(this._root);return ye?ye.key:null},h.prototype.max=function(){var ye=this.maxNode(this._root);return ye?ye.key:null},h.prototype.isEmpty=function(){return this._root===null},g.size.get=function(){return this._size},h.createTree=function(ye,_e,dt,Ft,Wt){return new h(dt,Wt).load(ye,_e,Ft)},Object.defineProperties(h.prototype,g);var S=0,C=1,P=2,R=3,D=0,B=1,$=2,q=3;function W(ye,_e,dt){_e===null?(ye.inOut=!1,ye.otherInOut=!0):(ye.isSubject===_e.isSubject?(ye.inOut=!_e.inOut,ye.otherInOut=_e.otherInOut):(ye.inOut=!_e.otherInOut,ye.otherInOut=_e.isVertical()?!_e.inOut:_e.inOut),_e&&(ye.prevInResult=!J(_e,dt)||_e.isVertical()?_e.prevInResult:_e));var Ft=J(ye,dt);ye.resultTransition=Ft?function(Wt,Ht){var sn,Rn=!Wt.inOut,dr=!Wt.otherInOut;switch(Ht){case D:sn=Rn&&dr;break;case B:sn=Rn||dr;break;case q:sn=Rn^dr;break;case $:sn=Wt.isSubject?Rn&&!dr:dr&&!Rn}return sn?1:-1}(ye,dt):0}function J(ye,_e){switch(ye.type){case S:switch(_e){case D:return!ye.otherInOut;case B:return ye.otherInOut;case $:return ye.isSubject&&ye.otherInOut||!ye.isSubject&&!ye.otherInOut;case q:return!0}break;case P:return _e===D||_e===B;case R:return _e===$;case C:return!1}return!1}var ce=function(ye,_e,dt,Ft,Wt){this.left=_e,this.point=ye,this.otherEvent=dt,this.isSubject=Ft,this.type=Wt||S,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},ue={inResult:{configurable:!0}};function H(ye,_e){return ye[0]===_e[0]&&ye[1]===_e[1]}ce.prototype.isBelow=function(ye){var _e=this.point,dt=this.otherEvent.point;return this.left?(_e[0]-ye[0])*(dt[1]-ye[1])-(dt[0]-ye[0])*(_e[1]-ye[1])>0:(dt[0]-ye[0])*(_e[1]-ye[1])-(_e[0]-ye[0])*(dt[1]-ye[1])>0},ce.prototype.isAbove=function(ye){return!this.isBelow(ye)},ce.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},ue.inResult.get=function(){return this.resultTransition!==0},ce.prototype.clone=function(){var ye=new ce(this.point,this.left,this.otherEvent,this.isSubject,this.type);return ye.contourId=this.contourId,ye.resultTransition=this.resultTransition,ye.prevInResult=this.prevInResult,ye.isExteriorRing=this.isExteriorRing,ye.inOut=this.inOut,ye.otherInOut=this.otherInOut,ye},Object.defineProperties(ce.prototype,ue);var se=11102230246251565e-32,de=134217729,be=(3+8*se)*se;function Oe(ye,_e,dt,Ft,Wt){var Ht,sn,Rn,dr,hr=_e[0],er=Ft[0],Fr=0,ni=0;er>hr==er>-hr?(Ht=hr,hr=_e[++Fr]):(Ht=er,er=Ft[++ni]);var pr=0;if(Fr<ye&&ni<dt)for(er>hr==er>-hr?(Rn=Ht-((sn=hr+Ht)-hr),hr=_e[++Fr]):(Rn=Ht-((sn=er+Ht)-er),er=Ft[++ni]),Ht=sn,Rn!==0&&(Wt[pr++]=Rn);Fr<ye&&ni<dt;)er>hr==er>-hr?(Rn=Ht-((sn=Ht+hr)-(dr=sn-Ht))+(hr-dr),hr=_e[++Fr]):(Rn=Ht-((sn=Ht+er)-(dr=sn-Ht))+(er-dr),er=Ft[++ni]),Ht=sn,Rn!==0&&(Wt[pr++]=Rn);for(;Fr<ye;)Rn=Ht-((sn=Ht+hr)-(dr=sn-Ht))+(hr-dr),hr=_e[++Fr],Ht=sn,Rn!==0&&(Wt[pr++]=Rn);for(;ni<dt;)Rn=Ht-((sn=Ht+er)-(dr=sn-Ht))+(er-dr),er=Ft[++ni],Ht=sn,Rn!==0&&(Wt[pr++]=Rn);return Ht===0&&pr!==0||(Wt[pr++]=Ht),pr}function Re(ye){return new Float64Array(ye)}var Be=33306690738754716e-32,je=22204460492503146e-32,at=11093356479670487e-47,At=Re(4),yt=Re(8),Pt=Re(12),Rt=Re(16),ct=Re(4);function Tt(ye,_e,dt){var Ft=function(Wt,Ht,sn,Rn,dr,hr){var er=(Ht-hr)*(sn-dr),Fr=(Wt-dr)*(Rn-hr),ni=er-Fr;if(er===0||Fr===0||er>0!=Fr>0)return ni;var pr=Math.abs(er+Fr);return Math.abs(ni)>=Be*pr?ni:-function(Ii,ai,Lr,ji,hi,ri,li){var Vr,rr,qr,Pi,Pn,br,pi,Fi,bi,no,Kr,Ji,ps,zo,Ao,fs,Dl,ro,co=Ii-hi,Bo=Lr-hi,Qo=ai-ri,Ho=ji-ri;At[0]=(Ao=(Fi=co-(pi=(br=de*co)-(br-co)))*(no=Ho-(bi=(br=de*Ho)-(br-Ho)))-((zo=co*Ho)-pi*bi-Fi*bi-pi*no))-((Kr=Ao-(Dl=(Fi=Qo-(pi=(br=de*Qo)-(br-Qo)))*(no=Bo-(bi=(br=de*Bo)-(br-Bo)))-((fs=Qo*Bo)-pi*bi-Fi*bi-pi*no)))+(Pn=Ao-Kr))+(Pn-Dl),At[1]=(ps=zo-((Ji=zo+Kr)-(Pn=Ji-zo))+(Kr-Pn))-((Kr=ps-fs)+(Pn=ps-Kr))+(Pn-fs),At[2]=Ji-((ro=Ji+Kr)-(Pn=ro-Ji))+(Kr-Pn),At[3]=ro;var Au=function(gue,OT){for(var zT=OT[0],Qx=1;Qx<4;Qx++)zT+=OT[Qx];return zT}(0,At),Sg=je*li;if(Au>=Sg||-Au>=Sg||(Vr=Ii-(co+(Pn=Ii-co))+(Pn-hi),qr=Lr-(Bo+(Pn=Lr-Bo))+(Pn-hi),rr=ai-(Qo+(Pn=ai-Qo))+(Pn-ri),Pi=ji-(Ho+(Pn=ji-Ho))+(Pn-ri),Vr===0&&rr===0&&qr===0&&Pi===0)||(Sg=at*li+be*Math.abs(Au),(Au+=co*Pi+Ho*Vr-(Qo*qr+Bo*rr))>=Sg||-Au>=Sg))return Au;ct[0]=(Ao=(Fi=Vr-(pi=(br=de*Vr)-(br-Vr)))*(no=Ho-(bi=(br=de*Ho)-(br-Ho)))-((zo=Vr*Ho)-pi*bi-Fi*bi-pi*no))-((Kr=Ao-(Dl=(Fi=rr-(pi=(br=de*rr)-(br-rr)))*(no=Bo-(bi=(br=de*Bo)-(br-Bo)))-((fs=rr*Bo)-pi*bi-Fi*bi-pi*no)))+(Pn=Ao-Kr))+(Pn-Dl),ct[1]=(ps=zo-((Ji=zo+Kr)-(Pn=Ji-zo))+(Kr-Pn))-((Kr=ps-fs)+(Pn=ps-Kr))+(Pn-fs),ct[2]=Ji-((ro=Ji+Kr)-(Pn=ro-Ji))+(Kr-Pn),ct[3]=ro;var aD=Oe(4,At,4,ct,yt);ct[0]=(Ao=(Fi=co-(pi=(br=de*co)-(br-co)))*(no=Pi-(bi=(br=de*Pi)-(br-Pi)))-((zo=co*Pi)-pi*bi-Fi*bi-pi*no))-((Kr=Ao-(Dl=(Fi=Qo-(pi=(br=de*Qo)-(br-Qo)))*(no=qr-(bi=(br=de*qr)-(br-qr)))-((fs=Qo*qr)-pi*bi-Fi*bi-pi*no)))+(Pn=Ao-Kr))+(Pn-Dl),ct[1]=(ps=zo-((Ji=zo+Kr)-(Pn=Ji-zo))+(Kr-Pn))-((Kr=ps-fs)+(Pn=ps-Kr))+(Pn-fs),ct[2]=Ji-((ro=Ji+Kr)-(Pn=ro-Ji))+(Kr-Pn),ct[3]=ro;var lD=Oe(aD,yt,4,ct,Pt);ct[0]=(Ao=(Fi=Vr-(pi=(br=de*Vr)-(br-Vr)))*(no=Pi-(bi=(br=de*Pi)-(br-Pi)))-((zo=Vr*Pi)-pi*bi-Fi*bi-pi*no))-((Kr=Ao-(Dl=(Fi=rr-(pi=(br=de*rr)-(br-rr)))*(no=qr-(bi=(br=de*qr)-(br-qr)))-((fs=rr*qr)-pi*bi-Fi*bi-pi*no)))+(Pn=Ao-Kr))+(Pn-Dl),ct[1]=(ps=zo-((Ji=zo+Kr)-(Pn=Ji-zo))+(Kr-Pn))-((Kr=ps-fs)+(Pn=ps-Kr))+(Pn-fs),ct[2]=Ji-((ro=Ji+Kr)-(Pn=ro-Ji))+(Kr-Pn),ct[3]=ro;var cD=Oe(lD,Pt,4,ct,Rt);return Rt[cD-1]}(Wt,Ht,sn,Rn,dr,hr,pr)}(ye[0],ye[1],_e[0],_e[1],dt[0],dt[1]);return Ft>0?-1:Ft<0?1:0}function ot(ye,_e){var dt=ye.point,Ft=_e.point;return dt[0]>Ft[0]?1:dt[0]<Ft[0]?-1:dt[1]!==Ft[1]?dt[1]>Ft[1]?1:-1:function(Wt,Ht,sn,Rn){return Wt.left!==Ht.left?Wt.left?1:-1:Tt(sn,Wt.otherEvent.point,Ht.otherEvent.point)!==0?Wt.isBelow(Ht.otherEvent.point)?-1:1:!Wt.isSubject&&Ht.isSubject?1:-1}(ye,_e,dt)}function lt(ye,_e,dt){var Ft=new ce(_e,!1,ye,ye.isSubject),Wt=new ce(_e,!0,ye.otherEvent,ye.isSubject);return H(ye.point,ye.otherEvent.point)&&console.warn("what is that, a collapsed segment?",ye),Ft.contourId=Wt.contourId=ye.contourId,ot(Wt,ye.otherEvent)>0&&(ye.otherEvent.left=!0,Wt.left=!1),ye.otherEvent.otherEvent=Wt,ye.otherEvent=Ft,dt.push(Wt),dt.push(Ft),dt}function Lt(ye,_e){return ye[0]*_e[1]-ye[1]*_e[0]}function zt(ye,_e){return ye[0]*_e[0]+ye[1]*_e[1]}function Sn(ye,_e,dt){var Ft=function(dr,hr,er,Fr,ni){var pr=[hr[0]-dr[0],hr[1]-dr[1]],Ii=[Fr[0]-er[0],Fr[1]-er[1]];function ai(br,pi,Fi){return[br[0]+pi*Fi[0],br[1]+pi*Fi[1]]}var Lr=[er[0]-dr[0],er[1]-dr[1]],ji=Lt(pr,Ii),hi=ji*ji,ri=zt(pr,pr);if(hi>0){var li=Lt(Lr,Ii)/ji;if(li<0||li>1)return null;var Vr=Lt(Lr,pr)/ji;return Vr<0||Vr>1?null:li===0||li===1?[ai(dr,li,pr)]:Vr===0||Vr===1?[ai(er,Vr,Ii)]:[ai(dr,li,pr)]}if((hi=(ji=Lt(Lr,pr))*ji)>0)return null;var rr=zt(pr,Lr)/ri,qr=rr+zt(pr,Ii)/ri,Pi=Math.min(rr,qr),Pn=Math.max(rr,qr);return Pi<=1&&Pn>=0?Pi===1?[ai(dr,Pi>0?Pi:0,pr)]:Pn===0?[ai(dr,Pn<1?Pn:1,pr)]:[ai(dr,Pi>0?Pi:0,pr),ai(dr,Pn<1?Pn:1,pr)]:null}(ye.point,ye.otherEvent.point,_e.point,_e.otherEvent.point),Wt=Ft?Ft.length:0;if(Wt===0||Wt===1&&(H(ye.point,_e.point)||H(ye.otherEvent.point,_e.otherEvent.point))||Wt===2&&ye.isSubject===_e.isSubject)return 0;if(Wt===1)return H(ye.point,Ft[0])||H(ye.otherEvent.point,Ft[0])||lt(ye,Ft[0],dt),H(_e.point,Ft[0])||H(_e.otherEvent.point,Ft[0])||lt(_e,Ft[0],dt),1;var Ht=[],sn=!1,Rn=!1;return H(ye.point,_e.point)?sn=!0:ot(ye,_e)===1?Ht.push(_e,ye):Ht.push(ye,_e),H(ye.otherEvent.point,_e.otherEvent.point)?Rn=!0:ot(ye.otherEvent,_e.otherEvent)===1?Ht.push(_e.otherEvent,ye.otherEvent):Ht.push(ye.otherEvent,_e.otherEvent),sn&&Rn||sn?(_e.type=C,ye.type=_e.inOut===ye.inOut?P:R,sn&&!Rn&&lt(Ht[1].otherEvent,Ht[0].point,dt),2):Rn?(lt(Ht[0],Ht[1].point,dt),3):Ht[0]!==Ht[3].otherEvent?(lt(Ht[0],Ht[1].point,dt),lt(Ht[1],Ht[2].point,dt),3):(lt(Ht[0],Ht[1].point,dt),lt(Ht[3].otherEvent,Ht[2].point,dt),3)}function un(ye,_e){if(ye===_e)return 0;if(Tt(ye.point,ye.otherEvent.point,_e.point)!==0||Tt(ye.point,ye.otherEvent.point,_e.otherEvent.point)!==0)return H(ye.point,_e.point)?ye.isBelow(_e.otherEvent.point)?-1:1:ye.point[0]===_e.point[0]?ye.point[1]<_e.point[1]?-1:1:ot(ye,_e)===1?_e.isAbove(ye.point)?-1:1:ye.isBelow(_e.point)?-1:1;if(ye.isSubject!==_e.isSubject)return ye.isSubject?-1:1;var dt=ye.point,Ft=_e.point;return dt[0]===Ft[0]&&dt[1]===Ft[1]?(dt=ye.otherEvent.point)[0]===(Ft=_e.otherEvent.point)[0]&&dt[1]===Ft[1]?0:ye.contourId>_e.contourId?1:-1:ot(ye,_e)===1?1:-1}var Gt=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function Dt(ye,_e,dt,Ft){var Wt,Ht=ye+1,sn=_e[ye].point,Rn=_e.length;for(Ht<Rn&&(Wt=_e[Ht].point);Ht<Rn&&Wt[0]===sn[0]&&Wt[1]===sn[1];){if(!dt[Ht])return Ht;++Ht<Rn&&(Wt=_e[Ht].point)}for(Ht=ye-1;dt[Ht]&&Ht>Ft;)Ht--;return Ht}Gt.prototype.isExterior=function(){return this.holeOf==null};var Vn=hn,ln=hn;function hn(ye,_e){if(!(this instanceof hn))return new hn(ye,_e);if(this.data=ye||[],this.length=this.data.length,this.compare=_e||Dn,this.length>0)for(var dt=(this.length>>1)-1;dt>=0;dt--)this._down(dt)}function Dn(ye,_e){return ye<_e?-1:ye>_e?1:0}hn.prototype={push:function(ye){this.data.push(ye),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var ye=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),ye}},peek:function(){return this.data[0]},_up:function(ye){for(var _e=this.data,dt=this.compare,Ft=_e[ye];ye>0;){var Wt=ye-1>>1,Ht=_e[Wt];if(dt(Ft,Ht)>=0)break;_e[ye]=Ht,ye=Wt}_e[ye]=Ft},_down:function(ye){for(var _e=this.data,dt=this.compare,Ft=this.length>>1,Wt=_e[ye];ye<Ft;){var Ht=1+(ye<<1),sn=Ht+1,Rn=_e[Ht];if(sn<this.length&&dt(_e[sn],Rn)<0&&(Ht=sn,Rn=_e[sn]),dt(Rn,Wt)>=0)break;_e[ye]=Rn,ye=Ht}_e[ye]=Wt}},Vn.default=ln;var Kn=Math.max,Wn=Math.min,sr=0;function Qn(ye,_e,dt,Ft,Wt,Ht){var sn,Rn,dr,hr,er,Fr;for(sn=0,Rn=ye.length-1;sn<Rn;sn++)if(hr=ye[sn+1],er=new ce(dr=ye[sn],!1,void 0,_e),Fr=new ce(hr,!1,er,_e),er.otherEvent=Fr,dr[0]!==hr[0]||dr[1]!==hr[1]){er.contourId=Fr.contourId=dt,Ht||(er.isExteriorRing=!1,Fr.isExteriorRing=!1),ot(er,Fr)>0?Fr.left=!0:er.left=!0;var ni=dr[0],pr=dr[1];Wt[0]=Wn(Wt[0],ni),Wt[1]=Wn(Wt[1],pr),Wt[2]=Kn(Wt[2],ni),Wt[3]=Kn(Wt[3],pr),Ft.push(er),Ft.push(Fr)}}var ar=[];function Dr(ye,_e,dt){typeof ye[0][0][0]=="number"&&(ye=[ye]),typeof _e[0][0][0]=="number"&&(_e=[_e]);var Ft=function(pr,Ii,ai){var Lr=null;return pr.length*Ii.length==0&&(ai===D?Lr=ar:ai===$?Lr=pr:ai!==B&&ai!==q||(Lr=pr.length===0?Ii:pr)),Lr}(ye,_e,dt);if(Ft)return Ft===ar?null:Ft;var Wt=[1/0,1/0,-1/0,-1/0],Ht=[1/0,1/0,-1/0,-1/0],sn=function(pr,Ii,ai,Lr,ji){var hi,ri,li,Vr,rr,qr,Pi=new Vn(null,ot);for(li=0,Vr=pr.length;li<Vr;li++)for(rr=0,qr=(hi=pr[li]).length;rr<qr;rr++)(ri=rr===0)&&sr++,Qn(hi[rr],!0,sr,Pi,ai,ri);for(li=0,Vr=Ii.length;li<Vr;li++)for(rr=0,qr=(hi=Ii[li]).length;rr<qr;rr++)ri=rr===0,ji===$&&(ri=!1),ri&&sr++,Qn(hi[rr],!1,sr,Pi,Lr,ri);return Pi}(ye,_e,Wt,Ht,dt);if(Ft=function(pr,Ii,ai,Lr,ji){var hi=null;return(ai[0]>Lr[2]||Lr[0]>ai[2]||ai[1]>Lr[3]||Lr[1]>ai[3])&&(ji===D?hi=ar:ji===$?hi=pr:ji!==B&&ji!==q||(hi=pr.concat(Ii))),hi}(ye,_e,Wt,Ht,dt))return Ft===ar?null:Ft;for(var Rn=function(pr){var Ii,ai,Lr=function(li){var Vr,rr,qr,Pi,Pn=[];for(rr=0,qr=li.length;rr<qr;rr++)((Vr=li[rr]).left&&Vr.inResult||!Vr.left&&Vr.otherEvent.inResult)&&Pn.push(Vr);for(var br=!1;!br;)for(br=!0,rr=0,qr=Pn.length;rr<qr;rr++)rr+1<qr&&ot(Pn[rr],Pn[rr+1])===1&&(Pi=Pn[rr],Pn[rr]=Pn[rr+1],Pn[rr+1]=Pi,br=!1);for(rr=0,qr=Pn.length;rr<qr;rr++)(Vr=Pn[rr]).otherPos=rr;for(rr=0,qr=Pn.length;rr<qr;rr++)(Vr=Pn[rr]).left||(Pi=Vr.otherPos,Vr.otherPos=Vr.otherEvent.otherPos,Vr.otherEvent.otherPos=Pi);return Pn}(pr),ji={},hi=[],ri=function(){if(!ji[Ii]){var li=hi.length,Vr=function(Pn,br,pi){var Fi=new Gt;if(Pn.prevInResult!=null){var bi=Pn.prevInResult,no=bi.outputContourId;if(bi.resultTransition>0){var Kr=br[no];if(Kr.holeOf!=null){var Ji=Kr.holeOf;br[Ji].holeIds.push(pi),Fi.holeOf=Ji,Fi.depth=br[no].depth}else br[no].holeIds.push(pi),Fi.holeOf=no,Fi.depth=br[no].depth+1}else Fi.holeOf=null,Fi.depth=br[no].depth}else Fi.holeOf=null,Fi.depth=0;return Fi}(Lr[Ii],hi,li),rr=function(Pn){ji[Pn]=!0,Pn<Lr.length&&Lr[Pn]&&(Lr[Pn].outputContourId=li)},qr=Ii,Pi=Ii;for(Vr.points.push(Lr[Ii].point);rr(qr),rr(qr=Lr[qr].otherPos),Vr.points.push(Lr[qr].point),!((qr=Dt(qr,Lr,ji,Pi))==Pi||qr>=Lr.length)&&Lr[qr];);hi.push(Vr)}};for(Ii=0,ai=Lr.length;Ii<ai;Ii++)ri();return hi}(function(pr,Ii,ai,Lr,ji,hi){for(var ri,li,Vr,rr=new h(un),qr=[],Pi=Math.min(Lr[2],ji[2]);pr.length!==0;){var Pn=pr.pop();if(qr.push(Pn),hi===D&&Pn.point[0]>Pi||hi===$&&Pn.point[0]>Lr[2])break;if(Pn.left){li=ri=rr.insert(Pn),ri=ri!==(Vr=rr.minNode())?rr.prev(ri):null,li=rr.next(li);var br=ri?ri.key:null;if(W(Pn,br,hi),li&&Sn(Pn,li.key,pr)===2&&(W(Pn,br,hi),W(li.key,Pn,hi)),ri&&Sn(ri.key,Pn,pr)===2){var pi=ri;W(br,(pi=pi!==Vr?rr.prev(pi):null)?pi.key:null,hi),W(Pn,br,hi)}}else li=ri=rr.find(Pn=Pn.otherEvent),ri&&li&&(ri=ri!==Vr?rr.prev(ri):null,li=rr.next(li),rr.remove(Pn),li&&ri&&Sn(ri.key,li.key,pr))}return qr}(sn,0,0,Wt,Ht,dt)),dr=[],hr=0;hr<Rn.length;hr++){var er=Rn[hr];if(er.isExterior()){for(var Fr=[er.points],ni=0;ni<er.holeIds.length;ni++)Fr.push(Rn[er.holeIds[ni]].points);dr.push(Fr)}}return dr}var si={UNION:B,DIFFERENCE:$,INTERSECTION:D,XOR:q};o.diff=function(ye,_e){return Dr(ye,_e,$)},o.intersection=function(ye,_e){return Dr(ye,_e,D)},o.operations=si,o.union=function(ye,_e){return Dr(ye,_e,B)},o.xor=function(ye,_e){return Dr(ye,_e,q)},Object.defineProperty(o,"__esModule",{value:!0})})(r)}(0,kC.exports)),kC.exports);/**
 * martinez v0.7.4
 * Martinez polygon clipping algorithm, does boolean operation on polygons (multipolygons, polygons with holes etc): intersection, union, difference, xor
 *
 * @author Alex Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */function xv(a,r,o,u){const h=[],g=u===0?(y,_,S,C,P,R)=>{y.push(new Vt(R,S+(R-_)/(C-_)*(P-S)))}:(y,_,S,C,P,R)=>{y.push(new Vt(_+(R-S)/(P-S)*(C-_),R))};for(const y of a){const _=[];for(const S of y){if(S.length<=2)continue;const C=[];for(let D=0;D<S.length-1;D++){const B=S[D].x,$=S[D].y,q=S[D+1].x,W=S[D+1].y,J=u===0?B:$,ce=u===0?q:W;J<r?ce>r&&g(C,B,$,q,W,r):J>o?ce<o&&g(C,B,$,q,W,o):C.push(S[D]),ce<r&&J>=r&&g(C,B,$,q,W,r),ce>o&&J<=o&&g(C,B,$,q,W,o)}let P=S[S.length-1];const R=u===0?P.x:P.y;R>=r&&R<=o&&C.push(P),C.length&&(P=C[C.length-1],C[0].x===P.x&&C[0].y===P.y||C.push(C[0]),_.push(C))}_.length&&h.push(_)}return h}function _R(a,r){const o=Z1(a),u=Z1([r]),h=TC.intersection(o,u);return h==null?[]:EC(h)}function xR(a,r){let u=Z1(a,65536);for(;r.valid();r.next()){const[h,g]=r.get(),y=h.x*65536,_=h.y*65536,S=g.x*65536,C=g.y*65536,P=S-y,R=C-_,D=Math.hypot(P,R),B=Math.trunc(R/D*3),$=-Math.trunc(P/D*3);u=TC.diff(u,[[[y,_],[S,C],[S+B,C+$],[y+B,_+$],[y,_]]])}return EC(u,1/65536)}function Z1(a,r=1){return[a.map(o=>o.map(u=>[u.x*r,u.y*r]))]}function EC(a,r=1){return a.map(o=>o.map((u,h)=>{const g=u.map(y=>new Vt(y[0]*r,y[1]*r).round());return h>0&&g.reverse(),g}))}class X1{constructor(r,o){this.layoutVertexArray=new Ha,this.indexArray=new Io,this.lineIndexArray=new kl,this.triangleSegments=new zi,this.lineSegments=new zi,this.programConfigurations=new p(r.layers,{zoom:r.zoom,lut:r.lut}),this.uploaded=!1,o&&(this.elevatedLayoutVertexArray=new Sl)}update(r,o,u,h,g,y,_,S){this.programConfigurations.updatePaintArrays(r,o,g,u,h,y,_,S)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,oR.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.lineIndexBuffer=r.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=r.createVertexBuffer(this.elevatedLayoutVertexArray,sR.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(r,o,u,h,g,y,_){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,o,u,h,g,y,void 0,_)}}class Y1{constructor(r){this.zoom=r.zoom,this.pixelRatio=r.pixelRatio,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.fqid),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lut=r.lut,this.bufferData=new X1(r,!1),this.elevationBufferData=new X1(r,!0),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.projection=r.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference"),this.sourceLayerIndex=r.sourceLayerIndex,this.worldview=r.worldview}updateFootprints(r,o){}populate(r,o,u,h){this.hasPattern=W1("fill",this.layers,this.pixelRatio,o);const g=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:_,id:S,index:C,sourceLayerIndex:P}of r){const R=this.layers[0]._featureFilter.needGeometry,D=Yt(_,R);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom,{worldview:this.worldview}),D,u))continue;const B=g?g.evaluate(D,{},u,o.availableImages):void 0,$={id:S,properties:_.properties,type:_.type,sourceLayerIndex:P,index:C,geometry:R?D.geometry:rn(_,u,h),patterns:{},sortKey:B};y.push($)}g&&y.sort((_,S)=>_.sortKey-S.sortKey);for(const _ of y){const{geometry:S,index:C,sourceLayerIndex:P}=_;if(this.hasPattern){const R=K1("fill",this.layers,_,this.zoom,this.pixelRatio,o);this.patternFeatures.push(R)}else this.addFeature(_,S,C,u,{},o.availableImages,o.brightness,o.elevationFeatures);o.featureIndex.insert(r[C].feature,S,C,P,this.index)}}update(r,o,u,h,g,y,_){this.bufferData.update(r,o,u,h,g,y,_,this.worldview),this.elevationBufferData.update(r,o,u,h,g,y,_,this.worldview),this.elevatedStructures&&this.elevatedStructures.update(r,o,u,h,g,y,_,this.worldview)}addFeatures(r,o,u,h,g,y){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,o,u,h,y,r.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(r){this.bufferData.upload(r),this.elevationBufferData.upload(r),this.elevatedStructures&&this.elevatedStructures.upload(r)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(r,o,u,h,g,y=[],_,S){const C=_v(o,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(r,C,h,u,S):this.addGeometry(C,this.bufferData),this.bufferData.populatePaintArrays(r,u,g,y,h,_,this.worldview),this.elevationBufferData.populatePaintArrays(r,u,g,y,h,_,this.worldview)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(r,o,u,h,g){this.elevatedStructures&&(this.elevatedStructures.construct(r),this.elevatedStructures.populatePaintArrays(o,u,h,g,this.worldview))}addElevatedRoadFeature(r,o,u,h,g){const y=new Array,_=Es.getElevationFeature(r,g);if(!_)return void this.addGeometry(o,this.bufferData);{const C=this.clipPolygonsToTile(o,1);C.length>0&&y.push({polygons:C,elevationFeature:_,elevationTileID:u})}const S={guardRailEnabled:this.layers[0].layout.get("fill-construct-bridge-guard-rail").evaluate(r,{},u),featureIndex:h};for(const C of y)if(C.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new qs(C.elevationTileID,this.layers,this.zoom,this.lut));const R=C.elevationFeature.isTunnel();let D=0;r.properties.hasOwnProperty(ci)&&(D=+r.properties[ci]);for(const B of C.polygons)this.elevatedStructures.addPortalCandidates(C.elevationFeature.id,B,R,C.elevationFeature,D)}C.elevationFeature.constantHeight==null&&(C.polygons=this.prepareElevatedPolygons(C.polygons,C.elevationFeature,C.elevationTileID));const P=new ia(u,C.elevationTileID);this.addElevatedGeometry(C.polygons,P,C.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,h,S)}}addElevatedGeometry(r,o,u,h,g,y){const _={elevation:u,elevationSampler:o,bias:h,index:g,featureInfo:y},[S,C]=this.addGeometry(r,this.elevationBufferData,_);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:S,max:C}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,S),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,C))}addGeometry(r,o,u){let h=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,y=null;u&&(y=u.elevationSampler.constantElevation(u.elevation,u.bias),y!=null&&(h=y,g=y));const _=(S,C,P)=>{if(u!=null)if(C.push(S),y!=null)o.elevatedLayoutVertexArray.emplaceBack(y),P.push(y);else{const R=u.elevationSampler.pointElevation(S,u.elevation,u.bias);o.elevatedLayoutVertexArray.emplaceBack(R),P.push(R),h=Math.min(h,R),g=Math.max(g,R)}};for(const S of r){let C=0;for(const ue of S)C+=ue.length;const P=o.triangleSegments.prepareSegment(C,o.layoutVertexArray,o.indexArray),R=P.vertexLength,D=[],B=[],$=[],q=[],W=[],J=o.layoutVertexArray.length;for(const ue of S){if(ue.length===0)continue;ue!==S[0]&&B.push(D.length/2);const H=o.lineSegments.prepareSegment(ue.length,o.layoutVertexArray,o.lineIndexArray),se=H.vertexLength;u&&W.push(o.layoutVertexArray.length-J),_(ue[0],$,q),o.layoutVertexArray.emplaceBack(ue[0].x,ue[0].y),o.lineIndexArray.emplaceBack(se+ue.length-1,se),D.push(ue[0].x),D.push(ue[0].y);for(let de=1;de<ue.length;de++)_(ue[de],$,q),o.layoutVertexArray.emplaceBack(ue[de].x,ue[de].y),o.lineIndexArray.emplaceBack(se+de-1,se+de),D.push(ue[de].x),D.push(ue[de].y);H.vertexLength+=ue.length,H.primitiveLength+=ue.length}const ce=Hm(D,B);for(let ue=0;ue<ce.length;ue+=3)o.indexArray.emplaceBack(R+ce[ue],R+ce[ue+1],R+ce[ue+2]);if(ce.length>0&&u&&this.elevationMode==="hd-road-base"){const ue=u.elevation.isTunnel(),H=u.elevation.safeArea,se=this.elevatedStructures.addVertices($,q);this.elevatedStructures.addTriangles(ce,se,ue);const de=W.length;if(de>0){for(let be=0;be<de-1;be++)this.elevatedStructures.addRenderableRing(u.index,W[be]+se,W[be+1]-W[be],ue,H,u.featureInfo);this.elevatedStructures.addRenderableRing(u.index,W[de-1]+se,$.length-W[de-1],ue,H,u.featureInfo)}}P.vertexLength+=C,P.primitiveLength+=ce.length/3}return[h,g]}prepareElevatedPolygons(r,o,u){const h=1/st(u),g=[];for(const y of r){const _=xR(y,new hs(o,h));g.push(..._)}return g}clipPolygonsToTile(r,o){const u=-o,h=-o,g=Ut+o,y=Ut+o;let _=0;const S=[],C=[];for(;_<r.length;_++){const D=r[_],B=Wf(D);(B.min.x>=u&&B.max.x<=g&&B.min.y>=h&&B.max.y<=y?S:C).push(D)}if(S.length===r.length)return r;const P=[new Vt(u,h),new Vt(g,h),new Vt(g,y),new Vt(u,y),new Vt(u,h)],R=S;for(const D of C)R.push(..._R(D,P));return R}}let IC,PC,AC,RC;tn(Y1,"FillBucket",{omit:["layers","patternFeatures"]}),tn(X1,"FillBufferData"),tn(qs,"ElevatedStructures");class J1{constructor(r,o,u,h){if(this.triangleCount=o.length/3,this.min=new Vt(0,0),this.max=new Vt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||r.length===0)return;const[g,y]=[r[0].clone(),r[0].clone()];for(let R=1;R<r.length;++R){const D=r[R];g.x=Math.min(g.x,D.x),g.y=Math.min(g.y,D.y),y.x=Math.max(y.x,D.x),y.y=Math.max(y.y,D.y)}if(h){const R=Math.ceil(Math.max(y.x-g.x,y.y-g.y)/h);u=Math.max(u,R)}if(u===0)return;this.min=g,this.max=y;const _=this.max.sub(this.min);_.x=Math.max(_.x,1),_.y=Math.max(_.y,1);const S=Math.max(_.x,_.y)/u;this.cellsX=Math.max(1,Math.ceil(_.x/S)),this.cellsY=Math.max(1,Math.ceil(_.y/S)),this.xScale=1/S,this.yScale=1/S;const C=[];for(let R=0;R<this.triangleCount;R++){const D=r[o[3*R+0]].sub(this.min),B=r[o[3*R+1]].sub(this.min),$=r[o[3*R+2]].sub(this.min),q=Rl(Math.floor(Math.min(D.x,B.x,$.x)),this.xScale,this.cellsX),W=Rl(Math.floor(Math.max(D.x,B.x,$.x)),this.xScale,this.cellsX),J=Rl(Math.floor(Math.min(D.y,B.y,$.y)),this.yScale,this.cellsY),ce=Rl(Math.floor(Math.max(D.y,B.y,$.y)),this.yScale,this.cellsY),ue=new Vt(0,0),H=new Vt(0,0),se=new Vt(0,0),de=new Vt(0,0);for(let be=J;be<=ce;++be){ue.y=H.y=be*S,se.y=de.y=(be+1)*S;for(let Oe=q;Oe<=W;++Oe)ue.x=se.x=Oe*S,H.x=de.x=(Oe+1)*S,(F1(D,B,$,ue,H,de)||F1(D,B,$,ue,de,se))&&C.push({cellIdx:be*this.cellsX+Oe,triIdx:R})}}if(C.length===0)return;C.sort((R,D)=>R.cellIdx-D.cellIdx||R.triIdx-D.triIdx);let P=0;for(;P<C.length;){const R=C[P].cellIdx,D={start:this.payload.length,len:0};for(;P<C.length&&C[P].cellIdx===R;)++D.len,this.payload.push(C[P++].triIdx);this.cells[R]=D}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(r,o){if(this.triangleCount===0||this.cells.length===0||r.x>this.max.x||this.min.x>r.x||r.y>this.max.y||this.min.y>r.y)return;const u=Rl(r.x-this.min.x,this.xScale,this.cellsX),h=Rl(r.y-this.min.y,this.yScale,this.cellsY),g=this.cells[h*this.cellsX+u];if(g){this._lazyInitLookup();for(let y=0;y<g.len;y++){const _=this.payload[g.start+y],S=Math.floor(_/8),C=1<<_%8;if(!(this.lookup[S]&C)&&(this.lookup[S]|=C,o.push(_),o.length===this.triangleCount))return}}}query(r,o,u){if(this.triangleCount===0||this.cells.length===0||r.x>this.max.x||this.min.x>o.x||r.y>this.max.y||this.min.y>o.y)return;this._lazyInitLookup();const h=Rl(r.x-this.min.x,this.xScale,this.cellsX),g=Rl(o.x-this.min.x,this.xScale,this.cellsX),y=Rl(r.y-this.min.y,this.yScale,this.cellsY),_=Rl(o.y-this.min.y,this.yScale,this.cellsY);for(let S=y;S<=_;S++)for(let C=h;C<=g;C++){const P=this.cells[S*this.cellsX+C];if(P)for(let R=0;R<P.len;R++){const D=this.payload[P.start+R],B=Math.floor(D/8),$=1<<D%8;if(!(this.lookup[B]&$)&&(this.lookup[B]|=$,u.push(D),u.length===this.triangleCount))return}}}}function Rl(a,r,o){return Math.max(0,Math.min(o-1,Math.floor(a*r)))}tn(J1,"TriangleGridIndex");class MC{constructor(r){this.zoom=r.zoom,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.fqid),this.index=r.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.footprints=[],this.worldview=r.worldview}updateFootprints(r,o){for(const u of this.footprints)o.push({footprint:u,id:r})}populate(r,o,u,h){const g=[];for(const{feature:y,id:_,index:S,sourceLayerIndex:C}of r){const P=this.layers[0]._featureFilter.needGeometry,R=Yt(y,P);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom,{worldview:this.worldview}),R,u))continue;const D={id:_,properties:y.properties,type:y.type,sourceLayerIndex:C,index:S,geometry:P?R.geometry:rn(y,u,h),patterns:{}};g.push(D)}for(const y of g){const{geometry:_,index:S,sourceLayerIndex:C}=y;this.addFeature(y,_,S,u,{},o.availableImages,o.brightness),o.featureIndex.insert(r[S].feature,_,S,C,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(r){}update(r,o,u,h,g,y,_){}destroy(){}addFeature(r,o,u,h,g,y=[],_){for(const S of _v(o,2)){const C=[],P=[],R=[],D=new Vt(1/0,1/0),B=new Vt(-1/0,-1/0);for(const W of S)if(W.length!==0){W!==S[0]&&R.push(P.length/2);for(let J=0;J<W.length;J++)P.push(W[J].x),P.push(W[J].y),C.push(W[J]),D.x=Math.min(D.x,W[J].x),D.y=Math.min(D.y,W[J].y),B.x=Math.max(B.x,W[J].x),B.y=Math.max(B.y,W[J].y)}const $=Hm(P,R),q=new J1(C,$,8,256);this.footprints.push({vertices:C,indices:$,grid:q,min:D,max:B})}}}tn(MC,"ClipBucket",{omit:["layers"]});const wR=Sr([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),SR=Sr([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),CR=Sr([{name:"a_centroid_pos",components:2,type:"Uint16"}]),kR=Sr([{name:"a_join_normal_inside",components:3,type:"Int16"}]),TR=Sr([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),ER=Sr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:IR}=wR,wv=Number.MAX_SAFE_INTEGER;function DC(a,r,o,u){return a.order<r||a.order===wv||!(a.clipMask&o)||function(h,g){return g.length!==0&&g.find(y=>y===h)===void 0}(u,a.clipScope)}function Sv(a,r){return a.x-r.x||a.y-r.y}function LC(a,r){return Sv(a.min,r.min)===0&&Sv(a.max,r.max)===0}function Q1(a,r){return!(a.min.x>r.max.x||a.max.x<r.min.x||a.min.y>r.max.y||a.max.y<r.min.y)}function ex(a,r){if(a.length!==r.length)return!1;for(let o=0;o<a.length;o++)if(a[o].sourceId!==r[o].sourceId||!LC(a[o],r[o])||a[o].order!==r[o].order||a[o].clipMask!==r[o].clipMask||!Da(a[o].clipScope,r[o].clipScope))return!1;return!0}function OC(a,r,o){const u=1/Ut,h=1/(1<<o.canonical.z),g=(r.x*u+o.canonical.x)*h+o.wrap,y=(r.y*u+o.canonical.y)*h;return{min:new Vt((a.x*u+o.canonical.x)*h+o.wrap,(a.y*u+o.canonical.y)*h),max:new Vt(g,y)}}function PR(a,r,o){const u=1<<o.canonical.z,h=((r.x-o.wrap)*u-o.canonical.x)*Ut,g=(r.y*u-o.canonical.y)*Ut;return{min:new Vt(((a.x-o.wrap)*u-o.canonical.x)*Ut,(a.y*u-o.canonical.y)*Ut),max:new Vt(h,g)}}function zC(a,r,o,u,h,g,y){const _=a.indices,S=a.vertices,C=[];for(let P=u;P<u+h;P+=3){const R=r[o[P+0]+g],D=r[o[P+1]+g],B=r[o[P+2]+g],$=Math.min(R.x,D.x,B.x),q=Math.max(R.x,D.x,B.x),W=Math.min(R.y,D.y,B.y),J=Math.max(R.y,D.y,B.y);C.length=0,a.grid.query(new Vt($,W),new Vt(q,J),C);for(let ce=0;ce<C.length;ce++){const ue=C[ce];if(F1(S[_[3*ue+0]],S[_[3*ue+1]],S[_[3*ue+2]],R,D,B,y))return!0}}return!1}function BC(a,r,o,u){if(!a||!o)return!1;let h=a.vertices;if(!r.canonical.equals(u.canonical)||r.wrap!==u.wrap){if(o.vertices.length<a.vertices.length)return BC(o,u,a,r);const g=r.canonical,y=u.canonical,_=Math.pow(2,y.z-g.z);h=a.vertices.map(S=>new Vt((S.x+g.x*Ut)*_-y.x*Ut,(S.y+g.y*Ut)*_-y.y*Ut))}return zC(o,h,a.indices,0,a.indices.length,0,0)}function FC(a,r,o,u){const h=Math.pow(2,u.z-o.z);return new Vt((a+o.x*Ut)*h-u.x*Ut,(r+o.y*Ut)*h-u.y*Ut)}function $C(a,r){const o=[];r.grid.queryPoint(a,o);const u=r.indices,h=r.vertices;for(let g=0;g<o.length;g++){const y=o[g];if(ba([h[u[3*y+0]],h[u[3*y+1]],h[u[3*y+2]]],a))return!0}return!1}const tx=[new Vt(0,0),new Vt(Ut,0),new Vt(Ut,Ut),new Vt(0,Ut)];function NC(a,r){const o=[];let u=[];if(!r||a.length<2)return[a];if(a.length===2)return xc(a[0],a[1],tx)?[a]:[];for(let h=0;h<a.length+2;h++){const g=a[h%a.length],y=a[(h+1)%a.length],_=xc(h===0?a[a.length-1]:a[(h-1)%a.length],g,tx),S=xc(g,y,tx),C=_||S;C&&u.push(g),C&&S||u.length>0&&(u.length>1&&o.push(u),u=[])}return u.length>1&&o.push(u),o}const nx=nr.VectorTileFeature.types,AR=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],RR=["fill-extrusion-flood-light-ground-radius"],MR=Math.pow(2,13),DR=Math.pow(2,15)-1,VC=new Vt(0,1),ku=2147483648;function Xm(a,r,o,u,h,g,y,_){a.emplaceBack((r<<1)+y,(o<<1)+g,(Math.floor(u*MR)<<1)+h,Math.round(_))}function Ym(a,r,o){a.emplaceBack(r.x*Ut,r.y*Ut,o?1:0)}function Cv(a,r,o,u,h,g){a.emplaceBack(r.x,r.y,(o.x<<1)+u,(o.y<<1)+h,g)}function Jm(a,r,o){a.emplaceBack(r.x,r.y,r.z,o[0]*16384,o[1]*16384,o[2]*16384)}class jC{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class UC{constructor(){this.centroidXY=new Vt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Vt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Vt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Vt(this.max.x-this.min.x,this.max.y-this.min.y)}}class qC{constructor(){this.acc=new Vt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(r,o){r.min.x===Number.MAX_VALUE&&(r.min.x=r.max.x=o.x,r.min.y=r.max.y=o.y)}appendEdge(r,o,u){this.accCount++,this.acc._add(o);let h=!!this.borders;o.x<r.min.x?(r.min.x=o.x,h=!0):o.x>r.max.x&&(r.max.x=o.x,h=!0),o.y<r.min.y?(r.min.y=o.y,h=!0):o.y>r.max.y&&(r.max.y=o.y,h=!0),((o.x===0||o.x===Ut)&&o.x===u.x)!=((o.y===0||o.y===Ut)&&o.y===u.y)&&this.processBorderOverlap(o,u),h&&this.checkBorderIntersection(o,u)}checkBorderIntersection(r,o){o.x<0!=r.x<0&&this.addBorderIntersection(0,Mn(o.y,r.y,(0-o.x)/(r.x-o.x))),o.x>Ut!=r.x>Ut&&this.addBorderIntersection(1,Mn(o.y,r.y,(Ut-o.x)/(r.x-o.x))),o.y<0!=r.y<0&&this.addBorderIntersection(2,Mn(o.x,r.x,(0-o.y)/(r.y-o.y))),o.y>Ut!=r.y>Ut&&this.addBorderIntersection(3,Mn(o.x,r.x,(Ut-o.y)/(r.y-o.y)))}addBorderIntersection(r,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[r];o<u[0]&&(u[0]=o),o>u[1]&&(u[1]=o)}processBorderOverlap(r,o){if(r.x===o.x){if(r.y===o.y)return;const u=r.x===0?0:1;this.addBorderIntersection(u,o.y),this.addBorderIntersection(u,r.y)}else{const u=r.y===0?2:3;this.addBorderIntersection(u,o.x),this.addBorderIntersection(u,r.x)}}centroid(){return this.accCount===0?new Vt(0,0):new Vt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((r,o)=>r+ +(o[0]!==Number.MAX_VALUE),0):0}}function HC(a,r){const o=a.add(r)._unit(),u=Te(a.x*o.x+a.y*o.y,-1,1);var h,g,y;return h=Math.acos(u),Math.min(4,Math.max(-4,Math.tan(h)))/4*DR*((g=a).x*(y=r).y-g.y*y.x<0?-1:1)}const LR=[a=>a.x<0,a=>a.x>Ut,a=>a.y<0,a=>a.y>Ut];function OR(a,r,o,u){const h=[4];if(u===0)return h;o._mult(u);const g=a.sub(o),y=r.sub(o),_=[a,r,g,y];for(let S=0;S<4;S++)for(const C of _)if(LR[S](C)){h.push(S);break}return h}class GC{constructor(r){this.vertexArray=new pu,this.indexArray=new Io,this.programConfigurations=new p(r.layers,{zoom:r.zoom,lut:r.lut},o=>RR.includes(o)),this._segments=new zi,this.hiddenByLandmarkVertexArray=new Tp,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new zi}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(r,o,u,h=!1){const g=r.length;if(g>2){let y=Math.max(0,this._segments.get().length-1);const _=this._segments._prepareSegment(4*g,this.vertexArray.length,2*this._segmentToGroundQuads[y].length);let S;y!==this._segments.get().length-1&&(y++,this._segmentToGroundQuads[y]=[],this._segmentToRegionTriCounts[y]=[0,0,0,0,0]);{const C=r[0],P=r[1];S=HC(C.sub(r[g-1])._perp()._unit(),P.sub(C)._perp()._unit())}for(let C=0;C<g;C++){const P=C===g-1?0:C+1,R=r[C],D=r[P],B=r[P===g-1?0:P+1],$=D.sub(R)._perp()._unit(),q=HC($,B.sub(D)._perp()._unit()),W=S,J=q;if(rx(R,D,o)||h&&ZC(R,o)&&ZC(D,o)){S=q;continue}const ce=_.vertexLength;Cv(this.vertexArray,R,D,1,1,W),Cv(this.vertexArray,R,D,1,0,W),Cv(this.vertexArray,R,D,0,1,J),Cv(this.vertexArray,R,D,0,0,J),_.vertexLength+=4;const ue=OR(R,D,$,u);for(const H of ue)this._segmentToGroundQuads[y].push({id:ce,region:H}),this._segmentToRegionTriCounts[y][H]+=2,_.primitiveLength+=2;S=q}}}prepareBorderSegments(){if(!this.hasData())return;const r=this._segments.get(),o=r.length;for(let u=0;u<o;u++)this._segmentToGroundQuads[u].sort((h,g)=>h.region-g.region);for(let u=0;u<o;u++){const h=this._segmentToGroundQuads[u],g=r[u],y=this._segmentToRegionTriCounts[u];y.reduce((S,C)=>S+C,0);let _=0;for(let S=0;S<=4;S++){const C=y[S];if(C!==0){let P=this.regionSegments[S];P||(P=this.regionSegments[S]=new zi);const R={vertexOffset:g.vertexOffset,primitiveOffset:g.primitiveOffset+_,vertexLength:g.vertexLength,primitiveLength:C};P.get().push(R)}_+=C}for(let S=0;S<h.length;S++){const C=h[S].id;this.indexArray.emplaceBack(C,C+1,C+3),this.indexArray.emplaceBack(C,C+3,C+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(r,o,u,h,g,y,_){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,r,o,u,h,g,y,void 0,_)}upload(r){this.hasData()&&(this.vertexBuffer=r.createVertexBuffer(this.vertexArray,SR.members),this.indexBuffer=r.createIndexBuffer(this.indexArray))}uploadPaintProperties(r){this.hasData()&&this.programConfigurations.upload(r)}update(r,o,u,h,g,y,_,S){this.hasData()&&this.programConfigurations.updatePaintArrays(r,o,u,h,g,y,_,S)}updateHiddenByLandmark(r){if(!this.hasData())return;const o=r.groundVertexCount+r.groundVertexArrayOffset;if(r.groundVertexCount===0)return;const u=r.flags&ku?1:0;for(let h=r.groundVertexArrayOffset;h<o;++h)this.hiddenByLandmarkVertexArray.emplace(h,u);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(r){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=r.createVertexBuffer(this.hiddenByLandmarkVertexArray,TR.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let r=0;r<=4;r++){const o=this.regionSegments[r];o&&o.destroy()}}}}class kv{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.overscaling=r.overscaling,this.layers=r.layers,this.pixelRatio=r.pixelRatio,this.layerIds=this.layers.map(o=>o.fqid),this.index=r.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=r.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Io,this.footprintVertices=new Ha,this.footprintSegments=[],this.layoutVertexArray=new hu,this.centroidVertexArray=new sv,this.wallVertexArray=new lv,this.indexArray=new Io,this.programConfigurations=new p(r.layers,{zoom:r.zoom,lut:r.lut},o=>AR.includes(o)),this.segments=new zi,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.groundEffect=new GC(r),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[],this.worldview=r.worldview}updateFootprints(r,o){}populate(r,o,u,h){this.features=[],this.hasPattern=W1("fill-extrusion",this.layers,this.pixelRatio,o),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=st(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:g,id:y,index:_,sourceLayerIndex:S}of r){const C=this.layers[0]._featureFilter.needGeometry,P=Yt(g,C);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom,{worldview:this.worldview}),P,u))continue;const R={id:y,sourceLayerIndex:S,index:_,geometry:C?P.geometry:rn(g,u,h),properties:g.properties,type:g.type,patterns:{}},D=this.layoutVertexArray.length,B=nx[R.type]==="Polygon";if(this.hasPattern)this.features.push(K1("fill-extrusion",this.layers,R,this.zoom,this.pixelRatio,o));else if(this.wallMode)for(const $ of R.geometry)for(const q of NC($,B))this.addFeature(R,[q],_,u,{},o.availableImages,h,o.brightness);else this.addFeature(R,R.geometry,_,u,{},o.availableImages,h,o.brightness);o.featureIndex.insert(g,R.geometry,_,S,this.index,D)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(r,o,u,h,g,y){for(const _ of this.features){const S=nx[_.type]==="Polygon",{geometry:C}=_;if(this.wallMode)for(const P of C)for(const R of NC(P,S))this.addFeature(_,[R],_.index,o,u,h,g,y);else this.addFeature(_,C,_.index,o,u,h,g,y)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(r,o,u,h,g,y,_){this.programConfigurations.updatePaintArrays(r,o,g,u,h,y,_,this.worldview),this.groundEffect.update(r,o,g,u,h,y,_,this.worldview)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,IR),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.wallVertexBuffer=r.createVertexBuffer(this.wallVertexArray,kR.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=r.createVertexBuffer(this.layoutVertexExtArray,ER.members,!0)),this.groundEffect.upload(r)),this.groundEffect.uploadPaintProperties(r),this.programConfigurations.upload(r),this.uploaded=!0}uploadCentroid(r){this.groundEffect.uploadHiddenByLandmark(r),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,CR.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,o,u,h,g,y,_,S){const C=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(r,{})/this.tileToMeter,P=[new Vt(0,0),new Vt(Ut,Ut)],R=_.projection,D=R.name==="globe",B=this.wallMode||nx[r.type]==="Polygon",$=new qC;$.centroidDataIndex=this.centroidData.length;const q=new UC,W=this.layers[0].paint.get("fill-extrusion-base").evaluate(r,{},h)<=0,J=this.layers[0].paint.get("fill-extrusion-height").evaluate(r,{},h);let ce;if(q.height=J,q.vertexArrayOffset=this.layoutVertexArray.length,q.groundVertexArrayOffset=this.groundEffect.vertexArray.length,D&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Sp),this.wallMode){if(D)return void Zn("Non zero fill-extrusion-line-width is not yet supported on globe.");if(o.length!==1)return;ce=function(Be){const je=Be[0].x===Be[Be.length-1].x&&Be[0].y===Be[Be.length-1].y;(function(Gt){let Dt=0;const Vn=Gt.length;for(let ln=0;ln<Vn;ln++)Dt+=(Gt[(ln+1)%Vn].x-Gt[ln].x)*(Gt[(ln+1)%Vn].y+Gt[ln].y);return Dt>=0})(Be)||(Be=Be.reverse());const At={geometry:[],joinNormals:[],indices:[]},yt=[],Pt=[],Rt=[];let ct=Be.length;for(;ct>=2&&Be[ct-1].equals(Be[ct-2]);)ct--;if(ct<(je?3:2))return At;let Tt,ot,lt,Lt,zt,Sn=0;for(;Sn<ct-1&&Be[Sn].equals(Be[Sn+1]);)Sn++;je&&(Tt=Be[ct-2],zt=Be[Sn].sub(Tt)._unit()._perp());for(let Gt=Sn;Gt<ct;Gt++){if(lt=Gt===ct-1?je?Be[Sn+1]:void 0:Be[Gt+1],lt&&Be[Gt].equals(lt))continue;zt&&(Lt=zt),Tt&&(ot=Tt),Tt=Be[Gt],zt=lt?lt.sub(Tt)._unit()._perp():Lt,Lt=Lt||zt;let Dt=Lt.add(zt);Dt.x===0&&Dt.y===0||Dt._unit();const Vn=Dt.x*zt.x+Dt.y*zt.y,ln=Vn!==0?1/Vn:1/0,hn=Lt.x*zt.y-Lt.y*zt.x>0;let Dn="miter";const Kn=2;Dn==="miter"&&ln>Kn&&(Dn="bevel"),Dn==="bevel"&&(ln>100&&(Dn="flipbevel"),ln<Kn&&(Dn="miter"));const Wn=(sr,Qn,ar,Dr)=>{const si=new Vt(sr.x,sr.y),ye=new Vt(sr.x,sr.y);si.x+=Qn.x*Dr,si.y+=Qn.y*Dr,ye.x-=Qn.x*Math.max(ar,1),ye.y-=Qn.y*Math.max(ar,1),Rt.push(Qn),yt.push(si),Pt.push(ye)};if(Dn==="miter")Dt._mult(ln),Wn(Tt,Dt,0,0);else if(Dn==="flipbevel")Dt=zt.mult(-1),Wn(Tt,Dt,0,0),Wn(Tt,Dt.mult(-1),0,0);else{const sr=-Math.sqrt(ln*ln-1),Qn=hn?sr:0,ar=hn?0:sr;ot&&Wn(Tt,Lt,Qn,ar),lt&&Wn(Tt,zt,Qn,ar)}}At.geometry=[...yt,...Pt.reverse(),yt[0]],At.joinNormals=[...Rt,...Rt.reverse(),Rt[Rt.length-1]];const un=At.geometry.length-1;for(let Gt=0;Gt<un/2;Gt++)if(Gt+1<un/2){let Dt=Gt,Vn=Gt+1,ln=un-1-Gt,hn=un-2-Gt;Dt=Dt===0?un-1:Dt-1,Vn=Vn===0?un-1:Vn-1,ln=ln===0?un-1:ln-1,hn=hn===0?un-1:hn-1,At.indices.push(ln),At.indices.push(Vn),At.indices.push(Dt),At.indices.push(ln),At.indices.push(hn),At.indices.push(Vn)}return At}(o[0]),o=[ce.geometry]}const ue=(Be,je)=>Be<(je.length-1)/2||Be===je.length-1,H=this.wallMode?[o]:_v(o,500);for(let Be=H.length-1;Be>=0;Be--){const je=H[Be];(je.length===0||(se=je[0]).every(at=>at.x<=0)||se.every(at=>at.x>=Ut)||se.every(at=>at.y<=0)||se.every(at=>at.y>=Ut))&&H.splice(Be,1)}var se;let de;if(D)de=QC(H,P,h);else{de=[];for(const Be of H)de.push({polygon:Be,bounds:P})}const be=B?this.edgeRadius:0,Oe=be>0&&this.zoom<17,Re=(Be,je)=>{if(Be.length===0)return!1;const at=Be[Be.length-1];return je.x===at.x&&je.y===at.y};for(const{polygon:Be,bounds:je}of de){let at=0,At=0;for(const ct of Be)B&&!ct[0].equals(ct[ct.length-1])&&ct.push(ct[0]),At+=B?ct.length-1:ct.length;const yt=this.segments.prepareSegment((B?5:4)*At,this.layoutVertexArray,this.indexArray);q.footprintSegIdx<0&&(q.footprintSegIdx=this.footprintSegments.length),q.polygonSegIdx<0&&(q.polygonSegIdx=this.polygonSegments.length);const Pt={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Rt=new jC;if(Rt.vertexOffset=this.footprintVertices.length,Rt.indexOffset=3*this.footprintIndices.length,Rt.ringIndices=[],B){const ct=[],Tt=[];at=yt.vertexLength;for(let lt=0;lt<Be.length;lt++){const Lt=Be[lt];Lt.length&&lt!==0&&Tt.push(ct.length/2);const zt=[];let Sn,un;Sn=Lt[1].sub(Lt[0])._perp()._unit(),Rt.ringIndices.push(Lt.length-1);for(let Gt=1;Gt<Lt.length;Gt++){const Dt=Lt[Gt],Vn=Lt[Gt===Lt.length-1?1:Gt+1],ln=Dt.clone();if(be){un=Vn.sub(Dt)._perp()._unit();const hn=Sn.add(un)._unit(),Dn=be*Math.min(4,1/(Sn.x*hn.x+Sn.y*hn.y));ln.x+=Dn*hn.x,ln.y+=Dn*hn.y,ln.x=Math.round(ln.x),ln.y=Math.round(ln.y),Sn=un}if(!W||be!==0&&!Oe||Re(zt,ln)||zt.push(ln),Xm(this.layoutVertexArray,ln.x,ln.y,0,0,1,1,0),this.wallMode){const hn=ue(Gt,Lt);Ym(this.wallVertexArray,ce.joinNormals[Gt],!hn)}yt.vertexLength++,this.footprintVertices.emplaceBack(Dt.x,Dt.y),ct.push(Dt.x,Dt.y),D&&Jm(this.layoutVertexExtArray,R.projectTilePoint(ln.x,ln.y,h),R.upVector(h,ln.x,ln.y))}W&&(be===0||Oe)&&(zt.length!==0&&Re(zt,zt[0])&&zt.pop(),this.groundEffect.addData(zt,je,C))}const ot=this.wallMode?ce.indices:Hm(ct,Tt);for(let lt=0;lt<ot.length;lt+=3)this.footprintIndices.emplaceBack(Rt.vertexOffset+ot[lt+0],Rt.vertexOffset+ot[lt+1],Rt.vertexOffset+ot[lt+2]),this.indexArray.emplaceBack(at+ot[lt],at+ot[lt+2],at+ot[lt+1]),yt.primitiveLength++;Rt.indexCount+=ot.length,Rt.vertexCount+=this.footprintVertices.length-Rt.vertexOffset}for(let ct=0;ct<Be.length;ct++){const Tt=Be[ct];$.startRing(q,Tt[0]);let ot=Tt.length>4&&XC(Tt[Tt.length-2],Tt[0],Tt[1]),lt=be?zR(Tt[Tt.length-2],Tt[0],Tt[1],be):0;const Lt=[];let zt,Sn,un;Sn=Tt[1].sub(Tt[0])._perp()._unit();let Gt=!0;for(let Dt=1,Vn=0;Dt<Tt.length;Dt++){let ln=Tt[Dt-1],hn=Tt[Dt];const Dn=Tt[Dt===Tt.length-1?1:Dt+1];if($.appendEdge(q,hn,ln),rx(hn,ln,je)){be&&(Sn=Dn.sub(hn)._perp()._unit(),Gt=!Gt);continue}const Kn=hn.sub(ln)._perp(),Wn=Kn.x/(Math.abs(Kn.x)+Math.abs(Kn.y)),sr=Kn.y>0?1:0,Qn=ln.dist(hn);if(Vn+Qn>32768&&(Vn=0),be){un=Dn.sub(hn)._perp()._unit();let ye=KC(ln,hn,Dn,WC(Sn,un),be);isNaN(ye)&&(ye=0);const _e=hn.sub(ln)._unit();ln=ln.add(_e.mult(lt))._round(),hn=hn.add(_e.mult(-ye))._round(),lt=ye,Sn=un,W&&this.zoom>=17&&(Re(Lt,ln)||Lt.push(ln),Re(Lt,hn)||Lt.push(hn))}const ar=yt.vertexLength,Dr=Tt.length>4&&XC(ln,hn,Dn);let si=YC(Vn,ot,Gt);if(Xm(this.layoutVertexArray,ln.x,ln.y,Wn,sr,0,0,si),Xm(this.layoutVertexArray,ln.x,ln.y,Wn,sr,0,1,si),this.wallMode){const ye=ue(Dt-1,Tt),_e=ce.joinNormals[Dt-1];Ym(this.wallVertexArray,_e,ye),Ym(this.wallVertexArray,_e,ye)}if(Vn+=Qn,si=YC(Vn,Dr,!Gt),ot=Dr,Xm(this.layoutVertexArray,hn.x,hn.y,Wn,sr,0,0,si),Xm(this.layoutVertexArray,hn.x,hn.y,Wn,sr,0,1,si),this.wallMode){const ye=ue(Dt,Tt),_e=ce.joinNormals[Dt];Ym(this.wallVertexArray,_e,ye),Ym(this.wallVertexArray,_e,ye)}if(yt.vertexLength+=4,this.indexArray.emplaceBack(ar+0,ar+1,ar+2),this.indexArray.emplaceBack(ar+1,ar+3,ar+2),yt.primitiveLength+=2,be){const ye=at+(Dt===1?Tt.length-2:Dt-2),_e=Dt===1?at:ye+1;if(this.indexArray.emplaceBack(ar+1,ye,ar+3),this.indexArray.emplaceBack(ye,_e,ar+3),yt.primitiveLength+=2,zt===void 0&&(zt=ar),!rx(Dn,Tt[Dt],je)){const dt=Dt===Tt.length-1?zt:yt.vertexLength;this.indexArray.emplaceBack(ar+2,ar+3,dt),this.indexArray.emplaceBack(ar+3,dt+1,dt),this.indexArray.emplaceBack(ar+3,_e,dt+1),yt.primitiveLength+=3}Gt=!Gt}if(D){const ye=this.layoutVertexExtArray,_e=R.projectTilePoint(ln.x,ln.y,h),dt=R.projectTilePoint(hn.x,hn.y,h),Ft=R.upVector(h,ln.x,ln.y),Wt=R.upVector(h,hn.x,hn.y);Jm(ye,_e,Ft),Jm(ye,_e,Ft),Jm(ye,dt,Wt),Jm(ye,dt,Wt)}}B&&(at+=Tt.length-1),W&&be&&this.zoom>=17&&(Lt.length!==0&&Re(Lt,Lt[0])&&Lt.pop(),this.groundEffect.addData(Lt,je,C,be>0))}this.footprintSegments.push(Rt),Pt.triangleCount=this.indexArray.length-Pt.triangleArrayOffset,this.polygonSegments.push(Pt),++q.footprintSegLen,++q.polygonSegLen}if(q.vertexCount=this.layoutVertexArray.length-q.vertexArrayOffset,q.groundVertexCount=this.groundEffect.vertexArray.length-q.groundVertexArrayOffset,q.vertexCount!==0){if(q.centroidXY=$.borders?VC:this.encodeCentroid($,q),this.centroidData.push(q),$.borders){this.featuresOnBorder.push($);const Be=this.featuresOnBorder.length-1;for(let je=0;je<$.borders.length;je++)$.borders[je][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[je].push(Be)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,g,y,h,S,void 0,this.worldview),this.groundEffect.addPaintPropertiesData(r,u,g,y,h,S,this.worldview),this.maxHeight=Math.max(this.maxHeight,J)}}sortBorders(){for(let r=0;r<this.borderFeatureIndices.length;r++)this.borderFeatureIndices[r].sort((o,u)=>this.featuresOnBorder[o].borders[r][0]-this.featuresOnBorder[u].borders[r][0])}splitToSubtiles(){const r=[];for(let _=0;_<this.centroidData.length;_++){const S=this.centroidData[_],C=+(S.min.y+S.max.y>Ut),P=2*C+(+(S.min.x+S.max.x>Ut)^C);for(let R=0;R<S.polygonSegLen;R++){const D=S.polygonSegIdx+R;r.push({centroidIdx:_,subtile:P,polygonSegmentIdx:D,triangleSegmentIdx:this.polygonSegments[D].triangleSegIdx})}}const o=new Io;r.sort((_,S)=>_.triangleSegmentIdx===S.triangleSegmentIdx?_.subtile-S.subtile:_.triangleSegmentIdx-S.triangleSegmentIdx);let u=0,h=0,g=0;for(const _ of r){if(_.triangleSegmentIdx!==u)break;g++}const y=r.length;for(;h!==r.length;){u=r[h].triangleSegmentIdx;let _=0,S=h,C=h;for(let P=S;P<g&&r[P].subtile===_;P++)C++;for(;S!==g;){const P=r[S];_=P.subtile;const R=this.centroidData[P.centroidIdx].min.clone(),D=this.centroidData[P.centroidIdx].max.clone(),B={vertexOffset:this.segments.segments[u].vertexOffset,primitiveOffset:o.length,vertexLength:this.segments.segments[u].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let $=S;$<C;$++){const q=r[$],W=this.polygonSegments[q.polygonSegmentIdx],J=this.centroidData[q.centroidIdx].min,ce=this.centroidData[q.centroidIdx].max,ue=this.indexArray.uint16;for(let H=W.triangleArrayOffset;H<W.triangleArrayOffset+W.triangleCount;H++)o.emplaceBack(ue[3*H],ue[3*H+1],ue[3*H+2]);B.primitiveLength+=W.triangleCount,R.x=Math.min(R.x,J.x),R.y=Math.min(R.y,J.y),D.x=Math.max(D.x,ce.x),D.y=Math.max(D.y,ce.y)}B.primitiveLength>0&&this.triangleSubSegments.push({segment:B,min:R,max:D}),S=C;for(let $=S;$<g&&r[$].subtile===r[S].subtile;$++)C++}h=g;for(let P=h;P<y&&r[P].triangleSegmentIdx===r[h].triangleSegmentIdx;P++)g++}o._trim(),this.indexArray=o}getVisibleSegments(r,o,u){const h=new zi;if(this.wallMode){for(const q of this.triangleSubSegments)h.segments.push(q.segment);return h}let g=0,y=0;const _=1<<r.canonical.z;if(o){const q=o.getMinMaxForTile(r);q&&(g=q.min,y=q.max)}y+=this.maxHeight;const S=r.toUnwrapped();let C;const P=[S.canonical.x/_+S.wrap,S.canonical.y/_],R=[(S.canonical.x+1)/_+S.wrap,(S.canonical.y+1)/_],D=(q,W,J)=>[q[0]*(1-J[0])+W[0]*J[0],q[1]*(1-J[1])+W[1]*J[1]],B=[],$=[];for(const q of this.triangleSubSegments){B[0]=q.min.x/Ut,B[1]=q.min.y/Ut,$[0]=q.max.x/Ut,$[1]=q.max.y/Ut;const W=D(P,R,B),J=D(P,R,$);if(new kr([W[0],W[1],g],[J[0],J[1],y]).intersectsPrecise(u)===0){C&&(h.segments.push(C),C=void 0);continue}const ce=q.segment;C&&C.vertexOffset!==ce.vertexOffset&&(h.segments.push(C),C=void 0),C?(C.vertexLength+=ce.vertexLength,C.primitiveLength+=ce.primitiveLength):C={vertexOffset:ce.vertexOffset,primitiveLength:ce.primitiveLength,vertexLength:ce.vertexLength,primitiveOffset:ce.primitiveOffset,sortKey:void 0,vaos:{}}}return C&&h.segments.push(C),h}encodeCentroid(r,o){const u=r.centroid(),h=o.span(),g=Math.min(7,Math.round(h.x*this.tileToMeter/10)),y=Math.min(7,Math.round(h.y*this.tileToMeter/10));return new Vt(Te(u.x,1,Ut-1)<<3|g,Te(u.y,1,Ut-1)<<3|y)}encodeBorderCentroid(r){if(!r.borders)return new Vt(0,0);const o=r.borders,u=Number.MAX_VALUE;if(o[0][0]!==u||o[1][0]!==u){const h=o[0][0]!==u?0:1;return new Vt(6|(o[0][0]!==u?0:65528),(o[h][0]+o[h][1])/2<<3|6)}{const h=o[2][0]!==u?2:3;return new Vt((o[h][0]+o[h][1])/2<<3|6,6|(o[2][0]!==u?0:65528))}}showCentroid(r){const o=this.centroidData[r.centroidDataIndex];o.flags&=ku,o.centroidXY.x=0,o.centroidXY.y=0,this.writeCentroidToBuffer(o)}writeCentroidToBuffer(r){this.groundEffect.updateHiddenByLandmark(r);const o=r.vertexArrayOffset,u=r.vertexCount+r.vertexArrayOffset,h=r.flags&ku?VC:r.centroidXY,g=this.centroidVertexArray.geta_centroid_pos0(o);if(this.centroidVertexArray.geta_centroid_pos1(o)!==h.y||g!==h.x){for(let y=o;y<u;++y)this.centroidVertexArray.emplace(y,h.x,h.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const r of this.centroidData)this.writeCentroidToBuffer(r)}updateReplacement(r,o,u){if(o.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=o.updateTime;const h=o.getReplacementRegionsForTile(r.toUnwrapped());if(ex(this.activeReplacements,h))return;if(this.activeReplacements=h,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const y of this.centroidData)y.flags&=2147483647;const g=[];for(const y of this.activeReplacements){if(y.order<u)continue;const _=Math.max(1,Math.pow(2,y.footprintTileId.canonical.z-r.canonical.z));for(const S of this.centroidData)if(!(S.flags&ku||y.min.x>S.max.x||S.min.x>y.max.x||y.min.y>S.max.y||S.min.y>y.max.y))for(let C=0;C<S.footprintSegLen;C++){const P=this.footprintSegments[S.footprintSegIdx+C];if(g.length=0,BR(this.footprintVertices,P.vertexOffset,P.vertexCount,y.footprintTileId.canonical,r.canonical,g),zC(y.footprint,g,this.footprintIndices.uint16,P.indexOffset,P.indexCount,-P.vertexOffset,-_)){S.flags|=ku;break}}}for(const y of this.centroidData)this.writeCentroidToBuffer(y);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(r,o,u){let h=!1;for(let g=0;g<u.footprintSegLen;g++){const y=this.footprintSegments[u.footprintSegIdx+g];let _=0;for(const S of y.ringIndices){for(let C=_,P=S+_-1;C<S+_;P=C++){const R=this.footprintVertices.int16[2*(C+y.vertexOffset)+0],D=this.footprintVertices.int16[2*(C+y.vertexOffset)+1],B=this.footprintVertices.int16[2*(P+y.vertexOffset)+1];D>o!=B>o&&r<(this.footprintVertices.int16[2*(P+y.vertexOffset)+0]-R)*(o-D)/(B-D)+R&&(h=!h)}_=S}}return h}getHeightAtTileCoord(r,o){let u=Number.NEGATIVE_INFINITY,h=!0;const g=4*(r+Ut)*Ut+(o+Ut);if(this.partLookup.hasOwnProperty(g)){const y=this.partLookup[g];return y?{height:y.height,hidden:!!(y.flags&ku)}:void 0}for(const y of this.centroidData)r>y.max.x||y.min.x>r||o>y.max.y||y.min.y>o||this.footprintContainsPoint(r,o,y)&&y&&y.height>u&&(u=y.height,this.partLookup[g]=y,h=!!(y.flags&ku));if(u!==Number.NEGATIVE_INFINITY)return{height:u,hidden:h};this.partLookup[g]=void 0}}function WC(a,r){const o=a.add(r)._unit();return a.x*o.x+a.y*o.y}function zR(a,r,o,u){const h=r.sub(a)._perp()._unit(),g=o.sub(r)._perp()._unit();return KC(a,r,o,WC(h,g),u)}function KC(a,r,o,u,h){const g=Math.sqrt(1-u*u);return Math.min(a.dist(r)/3,r.dist(o)/3,h*g/u)}function rx(a,r,o){return a.x<o[0].x&&r.x<o[0].x||a.x>o[1].x&&r.x>o[1].x||a.y<o[0].y&&r.y<o[0].y||a.y>o[1].y&&r.y>o[1].y}function ZC(a,r){return a.x<r[0].x||a.x>r[1].x||a.y<r[0].y||a.y>r[1].y}function XC(a,r,o){if(a.x<0||a.x>=Ut||r.x<0||r.x>=Ut||o.x<0||o.x>=Ut)return!1;const u=o.sub(r),h=u.perp(),g=a.sub(r);return(u.x*g.x+u.y*g.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(g.x*g.x+g.y*g.y))>-.866&&h.x*g.x+h.y*g.y<0}function YC(a,r,o){const u=r?2|a:-3&a;return o?1|u:-2&u}function JC(){const a=Math.PI/32,r=Math.tan(a),o=Y;return o*Math.sqrt(1+2*r*r)-o}function QC(a,r,o){const u=1<<o.z,h=De(o.x/u),g=De((o.x+1)/u),y=Ze(o.y/u),_=Ze((o.y+1)/u);return function(S,C,P,R,D=0,B){const $=[];if(!S.length||!P||!R)return $;const q=(de,be)=>{for(const Oe of de)$.push({polygon:Oe,bounds:be})},W=Math.ceil(Math.log2(P)),J=Math.ceil(Math.log2(R)),ce=W-J,ue=[];for(let de=0;de<Math.abs(ce);de++)ue.push(ce>0?0:1);for(let de=0;de<Math.min(W,J);de++)ue.push(0),ue.push(1);let H=S;if(H=xv(H,C[0].y-D,C[1].y+D,1),H=xv(H,C[0].x-D,C[1].x+D,0),!H.length)return $;const se=[];for(ue.length?se.push({polygons:H,bounds:C,depth:0}):q(H,C);se.length;){const de=se.pop(),be=de.depth,Oe=ue[be],Re=de.bounds[0],Be=de.bounds[1],je=Oe===0?Re.x:Re.y,at=Oe===0?Be.x:Be.y,At=B?B(Oe,je,at):.5*(je+at),yt=xv(de.polygons,je-D,At+D,Oe),Pt=xv(de.polygons,At-D,at+D,Oe);if(yt.length){const Rt=[Re,new Vt(Oe===0?At:Be.x,Oe===1?At:Be.y)];ue.length>be+1?se.push({polygons:yt,bounds:Rt,depth:be+1}):q(yt,Rt)}if(Pt.length){const Rt=[new Vt(Oe===0?At:Re.x,Oe===1?At:Re.y),Be];ue.length>be+1?se.push({polygons:Pt,bounds:Rt,depth:be+1}):q(Pt,Rt)}}return $}(a,r,Math.ceil((g-h)/11.25),Math.ceil((y-_)/11.25),1,(S,C,P)=>{if(S===0)return .5*(C+P);{const R=Ze((o.y+C/Ut)/u);return(Se(.5*(Ze((o.y+P/Ut)/u)+R))*u-o.y)*Ut}})}function BR(a,r,o,u,h,g){const y=Math.pow(2,u.z-h.z);for(let _=0;_<o;_++){let S=a.int16[2*(_+r)+0],C=a.int16[2*(_+r)+1];S=(S+h.x*Ut)*y-u.x*Ut,C=(C+h.y*Ut)*y-u.y*Ut,g.push(new Vt(S,C))}}let e3,t3;tn(kv,"FillExtrusionBucket",{omit:["layers","features"]}),tn(UC,"PartData"),tn(jC,"FootprintSegment"),tn(qC,"BorderCentroidData"),tn(GC,"GroundEffect");class th extends Vt{constructor(r,o,u){super(r,o),this.z=u}}class n3 extends th{constructor(r,o,u,h){super(r,o,u),this.w=h}}function r3(a,r,o,u){const h=o==="x"?"y":"x",g=(u-a[o])/(r[o]-a[o]);a[h]=Math.round(a[h]+(r[h]-a[h])*g),a[o]=u,a.hasOwnProperty("z")&&(a.z=Mn(a.z,r.z,g)),a.hasOwnProperty("w")&&(a.w=Mn(a.w,r.w,g))}function i3(a,r,o,u){const h=o,g=u;for(const y of["x","y"]){let _=a,S=r;_[y]>=S[y]&&(_=r,S=a),_[y]<h&&S[y]>h&&r3(_,S,y,h),_[y]<g&&S[y]>g&&r3(S,_,y,g)}}function Tv(a,r,o,u,h,g){const y=[];for(let _=0;_<a.length;_++){const S=a[_];let C;const P=y.length;let R=0;for(let D=0;D<S.length-1;D++){let B=S[D],$=S[D+1],q=0;const W=R;let J,ce;g&&(q=Math.hypot($.x-B.x,$.y-B.y),R+=q,J=B,ce=$),B.x<r&&$.x<r||(B.x<r?B=new Vt(r,B.y+(r-B.x)/($.x-B.x)*($.y-B.y))._round():$.x<r&&($=new Vt(r,B.y+(r-B.x)/($.x-B.x)*($.y-B.y))._round()),B.y<o&&$.y<o||(B.y<o?B=new Vt(B.x+(o-B.y)/($.y-B.y)*($.x-B.x),o)._round():$.y<o&&($=new Vt(B.x+(o-B.y)/($.y-B.y)*($.x-B.x),o)._round()),B.x>=u&&$.x>=u||(B.x>=u?B=new Vt(u,B.y+(u-B.x)/($.x-B.x)*($.y-B.y))._round():$.x>=u&&($=new Vt(u,B.y+(u-B.x)/($.x-B.x)*($.y-B.y))._round()),B.y>=h&&$.y>=h||(B.y>=h?B=new Vt(B.x+(h-B.y)/($.y-B.y)*($.x-B.x),h)._round():$.y>=h&&($=new Vt(B.x+(h-B.y)/($.y-B.y)*($.x-B.x),h)._round()),C&&B.equals(C[C.length-1])||(C=[B],y.push(C),g&&g.push({progress:{min:W+o3(J,ce,B)*q,max:1},parentIndex:_,prevPoint:J,nextPoint:ce})),C.push($),g&&(g[g.length-1].progress.max=W+o3(J,ce,$)*q,g[g.length-1].nextPoint=ce)))))}if(g&&R>0)for(let D=P;D<y.length;D++)g[D].progress.min/=R,g[D].progress.max/=R}return y}function FR(a,r,o,u,h){if(a.length<2)return void u.push(a);const g=[];for(;r.valid();){const[C,P]=r.get();for(let R=0;R<a.length-1;R++){const D=a[R],B=a[R+1],$=jm(D,B,C,P);if($){const[q]=$,W=new Vt(Mn(D.x,B.x,q),Mn(D.y,B.y,q));g.push({t:R+q,distance:0,point:W})}}r.next()}if(g.length===0)return void u.push(a);g.sort((C,P)=>C.t-P.t);let y=0,_=0,S=[];for(u.push(S);y!==a.length;){if(_===g.length){for(;y!==a.length;)S.length!==0&&S[S.length-1].equals(a[y])||S.push(a[y]),y++;break}g[_].t<=y?(S.length!==0&&S[S.length-1].equals(g[_].point)||S.push(g[_].point),Math.trunc(g[_].t),_++):(S.length!==0&&S[S.length-1].equals(a[y])||S.push(a[y]),y++)}}function o3(a,r,o){return a.x!==r.x?(o.x-a.x)/(r.x-a.x):a.y!==r.y?(o.y-a.y)/(r.y-a.y):0}function Qm(a,r){return a.x*r.x+a.y*r.y}function s3(a,r){if(a.length===1){let o=0;const u=r[o++];let h;for(;!h||u.equals(h);)if(h=r[o++],!h)return 1/0;for(;o<r.length;o++){const g=r[o],y=a[0],_=h.sub(u),S=g.sub(u),C=y.sub(u),P=Qm(_,_),R=Qm(_,S),D=Qm(S,S),B=Qm(C,_),$=Qm(C,S),q=P*D-R*R,W=(D*B-R*$)/q,J=(P*$-R*B)/q,ce=u.z*(1-W-J)+h.z*W+g.z*J;if(isFinite(ce))return ce}return 1/0}{let o=1/0;for(const u of r)o=Math.min(o,u.z);return o}}function a3(a,r,o,u,h,g,y,_){const S=y*h.getElevationAt(a,r,!0,!0),C=g[0]!==0,P=C?g[1]===0?y*(g[0]/7-450):y*function(R,D,B){const $=Math.floor(D[0]/8),q=Math.floor(D[1]/8),W=10*(D[0]-8*$),J=10*(D[1]-8*q),ce=R.getElevationAt($,q,!0,!0),ue=R.getMeterToDEM(B),H=Math.floor(.5*(W*ue-1)),se=Math.floor(.5*(J*ue-1)),de=R.tileCoordToPixel($,q),be=2*H+1,Oe=2*se+1,Re=function(Pt,Rt,ct,Tt,ot){return[Pt.getElevationAtPixel(Rt,ct,!0),Pt.getElevationAtPixel(Rt+ot,ct,!0),Pt.getElevationAtPixel(Rt,ct+ot,!0),Pt.getElevationAtPixel(Rt+Tt,ct+ot,!0)]}(R,de.x-H,de.y-se,be,Oe),Be=Math.abs(Re[0]-Re[1]),je=Math.abs(Re[2]-Re[3]),at=Math.abs(Re[0]-Re[2])+Math.abs(Re[1]-Re[3]),At=Math.min(.25,.5*ue*(Be+je)/be),yt=Math.min(.25,.5*ue*at/Oe);return ce+Math.max(At*W,yt*J)}(h,g,_):S;return{base:S+(o===0?-1:o),top:C?Math.max(P+u,S+o+2):S+u}}class $R{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class NR{constructor(){this.tasks={},this.taskQueue=[],dn(["process"],this),this.invoker=new $R(this.process),this.nextId=0}add(r,o){const u=this.nextId++,h=function({type:g,isSymbolTile:y,zoom:_}){return _=_||0,g==="message"?0:g!=="maybePrepare"||y?g!=="parseTile"||y?g==="parseTile"&&y?300-_:g==="maybePrepare"&&y?400-_:500:200-_:100-_}(o);if(h===0){try{r()}finally{}return null}return this.tasks[u]={fn:r,metadata:o,priority:h,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const r=this.pick();if(r===null)return;const o=this.tasks[r];if(delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let r=null,o=1/0;for(let h=0;h<this.taskQueue.length;h++){const g=this.tasks[this.taskQueue[h]];g.priority<o&&(o=g.priority,r=h)}if(r===null)return null;const u=this.taskQueue[r];return this.taskQueue.splice(r,1),u}remove(){this.invoker.remove()}}class l3{constructor(r,o,u){this.target=r,this.parent=o,this.mapId=u,this.callbacks={},this.cancelCallbacks={},dn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new NR}send(r,o,u,h,g=!1,y){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=y,this.callbacks[_]=u);const S=new Set;return this.target.postMessage({id:_,type:r,hasCallback:!!u,targetMapId:h,mustQueue:g,sourceMapId:this.mapId,data:bl(o,S)},S),{cancel:()=>{u&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(r){const o=r.data;if(!o)return;const u=o.id;if(u&&(!o.targetMapId||this.mapId===o.targetMapId))if(o.type==="<cancel>"){const h=this.cancelCallbacks[u];delete this.cancelCallbacks[u],h&&h.cancel()}else if(o.mustQueue||zr(self)){const h=this.callbacks[u],g=this.scheduler.add(()=>this.processTask(u,o),h&&h.metadata||{type:"message"});g&&(this.cancelCallbacks[u]=g)}else this.processTask(u,o)}processTask(r,o){if(delete this.cancelCallbacks[r],o.type==="<response>"){const u=this.callbacks[r];delete this.callbacks[r],u&&(o.error?u(_l(o.error)):u(null,_l(o.data)))}else{const u=new Set,h=o.hasCallback?(y,_)=>{this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:y?bl(y):null,data:bl(_,u)},u)}:()=>{},g=_l(o.data);if(this.parent[o.type])this.parent[o.type](o.sourceMapId,g,h);else if(this.parent.getWorkerSource){const y=o.type.split("."),{source:_,scope:S}=g;this.parent.getWorkerSource(o.sourceMapId,y[0],_,S)[y[1]](g,h)}else h(new Error(`Could not find function ${o.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var eg={workerUrl:"",workerClass:null,workerParams:void 0};const ix="mapboxgl_preloaded_worker_pool";class nh{constructor(){this.active={}}acquire(r,o=nh.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<o;)this.workers.push(eg.workerClass!=null?new eg.workerClass:new self.Worker(eg.workerUrl,eg.workerParams));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.workers&&this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ix]}numActive(){return Object.keys(this.active).length}}nh.workerCount=2;class Fp{constructor(r,o,u="Worker",h=nh.workerCount){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=it();const g=this.workerPool.acquire(this.id,h);for(let y=0;y<g.length;y++){const _=new Fp.Actor(g[y],o,this.id);_.name=`${u} ${y}`,this.actors.push(_)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(r,o,u){Ve(this.actors,(h,g)=>{h.send(r,o,g)},u=u||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(r=>{r.remove()}),this.actors=[],this.workerPool.release(this.id)}}let tg,ox;function Ev(){return tg||(tg=new nh),tg}Fp.Actor=l3;class VR{constructor(r){this.module=r}createIntArray(r){const o=new Int32Array(r),u=this.module.malloc(o.length*o.BYTES_PER_ELEMENT);return this.module.heap32.set(o,u/o.BYTES_PER_ELEMENT),u}createFloatArray(r){const o=new Float32Array(r),u=this.module.malloc(o.length*o.BYTES_PER_ELEMENT);return this.module.heapF32.set(o,u/o.BYTES_PER_ELEMENT),u}createStringBuffer(r){const o=this.module.malloc(r.length+1);for(let u=0;u<r.length;++u)this.module.heapU8[o+u]=r.charCodeAt(u);return this.module.heapU8[o+r.length]=0,o}readStringBuffer(r){let o="";for(;this.module.heapU8[r]!==0;)o+=String.fromCharCode(this.module.heapU8[r]),++r;return o}setStyle(r){const o=r.entranceColorRgb,u=r.facadeGlazingColorRgb,h=r.roofColorRgb,g=r.wallColorRgb,y=r.normalScale;this.module.setStyle(o[0],o[1],o[2],u[0],u[1],u[2],h[0],h[1],h[2],g[0],g[1],g[2],y[0],y[1],y[2],r.tileToMeters)}setAOOptions(r,o){this.module.setAOOptions(r?1:0,o)}setMetricOptions(r,o){this.module.setMetricOptions(r?1:0,o)}setFacadeOptions(r,o,u){this.module.setFacadeOptions(r,o,u)}generateMesh(r,o){for(const _ of r){const S=this.createStringBuffer(_.roofType),C=[0],P=[];for(const B of _.coordinates)if(Array.isArray(B)){for(const $ of B)P.push($.x),P.push($.y);C.push(P.length)}const R=this.createIntArray(C),D=this.createFloatArray(P);this.module.addFeature(_.id,_.sourceId,_.minHeight,_.height,S,_.roofType.length,D,R,C.length-1),this.module.free(S),this.module.free(R),this.module.free(D)}for(const _ of o){let S;S=_.entrances?JSON.parse(_.entrances):[];const C=this.createFloatArray(S),P=[];for(const D of _.coordinates)P.push(D.x),P.push(D.y);const R=this.createFloatArray(P);this.module.addFacade(_.sourceId,_.crossPerc,_.distanceToRoad,C,S.length,R,P.length),this.module.free(C),this.module.free(R)}if(!this.module.generateMesh()){const _=this.module.getLastError();return this.readStringBuffer(_)}const u=this.module.getMeshCount(),h=new Array(u);for(let _=0;_<u;_++){const S=this.module.getPositionsPtr(_),C=this.module.getPositionsLength(_),P=new Float32Array(this.module.heapF32.buffer,S,C),R=this.module.getNormalsPtr(_),D=this.module.getNormalsLength(_),B=new Float32Array(this.module.heapF32.buffer,R,D),$=this.module.getColorsPtr(_),q=this.module.getColorsLength(_),W=new Uint8Array(this.module.heapU8.buffer,$,q),J=this.module.getAOPtr(_),ce=this.module.getAOLength(_),ue=new Float32Array(this.module.heapF32.buffer,J,ce),H=this.module.getIndicesPtr(_),se=this.module.getIndicesLength(_),de=new Int32Array(this.module.heap32.buffer,H,se),be=this.module.getBuildingPart(_),Oe=this.readStringBuffer(be);h[_]={positions:P,normals:B,colors:W,ao:ue,indices:de,buildingPart:Oe}}const g=this.module.getRingCount(),y=[];for(let _=0;_<g;_++){const S=this.module.getRingPtr(_),C=this.module.getRingLength(_),P=new Float32Array(this.module.heapF32.buffer,S,C);y.push(P)}return{meshes:h,modifiedPolygonRings:y}}}let ng,sx,Ka,$p,ax,Np=null,Vp=null,c3=null,lx=null;function u3(){return zr(self)&&self.worker.dracoUrl?self.worker.dracoUrl:sx||To.DRACO_URL}function d3(){if(zr(self)&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if($p)return $p;const a=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return $p=WebAssembly.validate(a)?To.MESHOPT_SIMD_URL:To.MESHOPT_URL,$p}const Iv={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},jR={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},rg={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function h3(a,r,o){const u=o.json.bufferViews.length,h=o.buffers.length;r.bufferView=u,o.json.bufferViews[u]={buffer:h,byteLength:a.byteLength},o.buffers[h]=a}const cx="KHR_draco_mesh_compression";function UR(a,r){const o=a.extensions&&a.extensions[cx];if(!o)return;const u=new Ka.Decoder,h=g3(r,o.bufferView),g=new Ka.Mesh;if(!u.DecodeArrayToMesh(h,h.byteLength,g))throw new Error("Failed to decode Draco mesh");const y=r.json.accessors[a.indices],_=Iv[y.componentType],S=y.count*_.BYTES_PER_ELEMENT,C=Ka._malloc(S);_===Uint16Array?u.GetTrianglesUInt16Array(g,S,C):u.GetTrianglesUInt32Array(g,S,C),h3(Ka.memory.buffer.slice(C,C+S),y,r),Ka._free(C);for(const P of Object.keys(o.attributes)){const R=u.GetAttributeByUniqueId(g,o.attributes[P]),D=r.json.accessors[a.attributes[P]],B=jR[D.componentType],$=D.count*rg[D.type]*Iv[D.componentType].BYTES_PER_ELEMENT,q=Ka._malloc($);u.GetAttributeDataArrayForAllPoints(g,R,Ka[B],$,q),h3(Ka.memory.buffer.slice(q,q+$),D,r),Ka._free(q)}u.destroy(),g.destroy(),delete a.extensions[cx]}const Pv="EXT_meshopt_compression";function qR(a,r){if(!a.extensions||!a.extensions[Pv])return;const o=a.extensions[Pv],u=new Uint8Array(r.buffers[o.buffer],o.byteOffset||0,o.byteLength||0),h=new Uint8Array(o.count*o.byteStride);ax.decodeGltfBuffer(h,o.count,o.byteStride,u,o.mode,o.filter),a.buffer=r.buffers.length,a.byteOffset=0,r.buffers[a.buffer]=h.buffer,delete a.extensions[Pv]}const p3=1179937895,f3=new TextDecoder("utf8");function m3(a,r){return new URL(a,r).href}function HR(a,r,o,u){return fetch(m3(a.uri,u)).then(h=>h.arrayBuffer()).then(h=>{r.buffers[o]=h})}function g3(a,r){const o=a.json.bufferViews[r];return new Uint8Array(a.buffers[o.buffer],o.byteOffset||0,o.byteLength)}function GR(a,r,o,u){if(a.uri){const h=m3(a.uri,u);return fetch(h).then(g=>g.blob()).then(g=>createImageBitmap(g)).then(g=>{r.images[o]=g})}if(a.bufferView!==void 0){const h=g3(r,a.bufferView),g=new Blob([h],{type:a.mimeType});return createImageBitmap(g).then(y=>{r.images[o]=y})}}function y3(a,r=0,o){const u={json:null,images:[],buffers:[]};if(new Uint32Array(a,r,1)[0]===p3){const P=new Uint32Array(a,r);let R=2;const D=(P[R++]>>2)-3,B=P[R++]>>2;if(R++,u.json=JSON.parse(f3.decode(P.subarray(R,R+B))),R+=B,R<D){const $=P[R++];R++;const q=r+(R<<2);u.buffers[0]=a.slice(q,q+$)}}else u.json=JSON.parse(f3.decode(new Uint8Array(a,r)));const{buffers:h,images:g,meshes:y,extensionsUsed:_,bufferViews:S}=u.json;let C=Promise.resolve();if(h){const P=[];for(let R=0;R<h.length;R++){const D=h[R];D.uri?P.push(HR(D,u,R,o)):u.buffers[R]||(u.buffers[R]=null)}C=Promise.all(P)}return C.then(()=>{const P=[],R=_&&_.includes(cx),D=_&&_.includes(Pv);if(R&&P.push(function(){if(!Ka)return ng??(ng=function(B){let $,q=null;function W(){$=new Uint8Array(q.buffer)}function J(){throw new Error("Unexpected Draco error.")}const ce={a:{a:J,d:function(ue,H,se){return $.copyWithin(ue,H,H+se)},c:function(ue){const H=$.length,se=Math.max(ue>>>0,Math.ceil(1.2*H)),de=Math.ceil((se-H)/65536);try{return q.grow(de),W(),!0}catch{return!1}},b:J}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(B,ce):B.then(ue=>ue.arrayBuffer()).then(ue=>WebAssembly.instantiate(ue,ce))).then(ue=>{const{Rb:H,Qb:se,P:de,T:be,X:Oe,Ja:Re,La:Be,Qa:je,Va:at,Wa:At,eb:yt,jb:Pt,f:Rt,e:ct,yb:Tt,zb:ot,Ab:lt,Bb:Lt,Db:zt,Gb:Sn}=ue.instance.exports;q=ct;const un=(()=>{let Gt=0,Dt=0,Vn=0,ln=0;return hn=>{Vn&&(H(ln),H(Gt),Dt+=Vn,Vn=Gt=0),Gt||(Dt+=128,Gt=se(Dt));const Dn=hn.length+7&-8;let Kn=Gt;Dn>=Dt&&(Vn=Dn,Kn=ln=se(Dn));for(let Wn=0;Wn<hn.length;Wn++)$[Kn+Wn]=hn[Wn];return Kn}})();return W(),Rt(),{memory:ct,_free:H,_malloc:se,Mesh:class{constructor(){this.ptr=de()}destroy(){be(this.ptr)}},Decoder:class{constructor(){this.ptr=Re()}destroy(){Pt(this.ptr)}DecodeArrayToMesh(Gt,Dt,Vn){const ln=un(Gt),hn=Be(this.ptr,ln,Dt,Vn.ptr);return!!Oe(hn)}GetAttributeByUniqueId(Gt,Dt){return{ptr:je(this.ptr,Gt.ptr,Dt)}}GetTrianglesUInt16Array(Gt,Dt,Vn){at(this.ptr,Gt.ptr,Dt,Vn)}GetTrianglesUInt32Array(Gt,Dt,Vn){At(this.ptr,Gt.ptr,Dt,Vn)}GetAttributeDataArrayForAllPoints(Gt,Dt,Vn,ln,hn){yt(this.ptr,Gt.ptr,Dt.ptr,Vn,ln,hn)}},DT_INT8:Tt(),DT_UINT8:ot(),DT_INT16:lt(),DT_UINT16:Lt(),DT_UINT32:zt(),DT_FLOAT32:Sn()}})}(fetch(u3())),ng.then(B=>{Ka=B,ng=void 0}))}()),D&&P.push(function(){if(ax)return;const B=function($){let q;const W=WebAssembly.instantiateStreaming($,{}).then(ue=>{q=ue.instance,q.exports.__wasm_call_ctors()}),J={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ce={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:W,supported:!0,decodeGltfBuffer(ue,H,se,de,be,Oe){(function(Re,Be,je,at,At,yt,Pt){const Rt=Re.exports.sbrk,ct=at+3&-4,Tt=Rt(ct*At),ot=Rt(yt.length),lt=new Uint8Array(Re.exports.memory.buffer);lt.set(yt,ot);const Lt=Be(Tt,at,At,ot,yt.length);if(Lt===0&&Pt&&Pt(Tt,ct,At),je.set(lt.subarray(Tt,Tt+at*At)),Rt(Tt-Rt(0)),Lt!==0)throw new Error(`Malformed buffer data: ${Lt}`)})(q,q.exports[ce[be]],ue,H,se,de,q.exports[J[Oe]])}}}(fetch(d3()));return B.ready.then(()=>{ax=B})}()),g)for(let B=0;B<g.length;B++)P.push(GR(g[B],u,B,o));return(P.length?Promise.all(P):Promise.resolve()).then(()=>{if(R&&y)for(const{primitives:B}of y)for(const $ of B)UR($,u);if(D&&y&&S)for(const B of S)qR(B,u);return u})})}class v3{constructor(r){this.layers=r.layers,this.layerIds=this.layers.map(o=>o.fqid),this.hasPattern=!1,this.worldview=r.worldview}updateFootprints(r,o){}prepare(){return function(){if(lx!=null||c3!=null)return null;if(Vp!=null)return Vp;const r=fetch(To.BUILDING_GEN_URL);return Vp=function(o){let u,h,g,y;function _(){u=new Uint8Array(y.buffer),h=new Int32Array(y.buffer),g=new Float32Array(y.buffer)}function S(){throw new Error("Unexpected BuildingGen error.")}const C=()=>{},P={a:{a:S,f:function(R){const D=u.length,B=Math.max(R>>>0,Math.ceil(1.2*D)),$=Math.ceil((B-D)/65536);try{return y.grow($),_(),!0}catch{return!1}},g:S,b:C,c:C,d:C,e:C}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(o,P):o.then(R=>R.arrayBuffer()).then(R=>WebAssembly.instantiate(R,P))).then(R=>{const D=R.instance.exports;return(0,D.g)(),y=D.f,_(),new VR({setStyle:D.h,setAOOptions:D.i,setMetricOptions:D.j,setFacadeOptions:D.k,addFeature:D.l,addFacade:D.m,generateMesh:D.n,getLastError:D.o,getMeshCount:D.p,getPositionsPtr:D.q,getPositionsLength:D.r,getNormalsPtr:D.s,getNormalsLength:D.t,getColorsPtr:D.u,getColorsLength:D.v,getAOPtr:D.w,getAOLength:D.x,getIndicesPtr:D.y,getIndicesLength:D.z,getBuildingPart:D.A,getRingCount:D.B,getRingPtr:D.C,getRingLength:D.D,free:D.E,malloc:D.F,heapU8:u,heap32:h,heapF32:g})})}(r).then(o=>(Vp=null,lx=o,lx)).catch(o=>{Zn("Could not load building-gen"),Vp=null,c3=o}),Vp}()}populate(r,o,u,h){}update(r,o,u,h,g,y,_){}isEmpty(){return!1}uploadPending(){return!1}upload(r){}destroy(){}getHeightAtTileCoord(r,o){return{height:Number.NEGATIVE_INFINITY,hidden:!0}}}let b3,_3;tn(v3,"BuildingBucket",{omit:["layers"]});const WR=Sr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),KR=Sr([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:ZR}=WR,XR=Sr([{name:"a_packed",components:3,type:"Float32"}]),{members:YR}=XR,JR=Sr([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:QR}=JR;class x3{constructor(r,o){this.width=r,this.height=o,this.nextRow=0,this.image=new Cu({width:r,height:o}),this.positions={},this.uploaded=!1}getDash(r,o){const u=this.getKey(r,o);return this.positions[u]}trim(){const r=this.width,o=this.height=Nt(this.nextRow);this.image.resize({width:r,height:o})}getKey(r,o){return r.join(",")+o}getDashRanges(r,o,u){const h=[];let g=r.length%2==1?-r[r.length-1]*u:0,y=r[0]*u,_=!0;h.push({left:g,right:y,isDash:_,zeroLength:r[0]===0});let S=r[0];for(let C=1;C<r.length;C++){_=!_;const P=r[C];g=S*u,S+=P,y=S*u,h.push({left:g,right:y,isDash:_,zeroLength:P===0})}return h}addRoundDash(r,o,u){const h=o/2;for(let g=-u;g<=u;g++){const y=this.width*(this.nextRow+u+g);let _=0,S=r[_];for(let C=0;C<this.width;C++){C/S.right>1&&(S=r[++_]);const P=Math.abs(C-S.left),R=Math.abs(C-S.right),D=Math.min(P,R);let B;const $=g/u*(h+1);if(S.isDash){const q=h-Math.abs($);B=Math.sqrt(D*D+q*q)}else B=h-Math.sqrt(D*D+$*$);this.image.data[y+C]=Math.max(0,Math.min(255,B+128))}}}addRegularDash(r,o){for(let S=r.length-1;S>=0;--S){const C=r[S],P=r[S+1];C.zeroLength?r.splice(S,1):P&&P.isDash===C.isDash&&(P.left=C.left,r.splice(S,1))}const u=r[0],h=r[r.length-1];u.isDash===h.isDash&&(u.left=h.left-this.width,h.right=u.right+this.width);const g=this.width*this.nextRow;let y=0,_=r[y];for(let S=0;S<this.width;S++){S/_.right>1&&(_=r[++y]);const C=Math.abs(S-_.left),P=Math.abs(S-_.right),R=Math.min(C,P);this.image.data[g+S]=Math.max(0,Math.min(255,(_.isDash?R:-R)+o+128))}}addDash(r,o){const u=this.getKey(r,o);if(this.positions[u])return this.positions[u];const h=o==="round",g=h?7:0,y=2*g+1;if(this.nextRow+y>this.height)return Zn("LineAtlas out of space"),null;r.length===0&&r.push(1);let _=0;for(let P=0;P<r.length;P++)r[P]<0&&(Zn("Negative value is found in line dasharray, replacing values with 0"),r[P]=0),_+=r[P];if(_!==0){const P=this.width/_,R=this.getDashRanges(r,this.width,P);h?this.addRoundDash(R,P,g):this.addRegularDash(R,o==="square"?.5*P:0)}const S=this.nextRow+g;this.nextRow+=y;const C={tl:[S,g],br:[_,0]};return this.positions[u]=C,C}}tn(x3,"LineAtlas");const eM=nr.VectorTileFeature.types,tM=Math.cos(Math.PI/180*37.5),nM=Math.cos(Math.PI/180*5);class ux{constructor(r){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.elevationType="none",this.zoom=r.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=r.overscaling,this.pixelRatio=r.pixelRatio,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.fqid),this.index=r.index,this.projection=r.projection,this.hasPattern=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Im,this.layoutVertexArray2=new ga,this.patternVertexArray=new ga,this.indexArray=new Io,this.programConfigurations=new p(r.layers,{zoom:r.zoom,lut:r.lut}),this.segments=new zi,this.maxLineLength=0,this.zOffsetVertexArray=new ga,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.tessellationStep=r.tessellationStep?r.tessellationStep:Ut/64,this.worldview=r.worldview}updateFootprints(r,o){}populate(r,o,u,h){this.hasPattern=W1("line",this.layers,this.pixelRatio,o);const g=this.layers[0].layout.get("line-sort-key");this.tileToMeter=st(u);const y=this.layers[0].layout.get("line-elevation-reference");if(y==="hd-road-markup")this.elevationType="road";else{const D=this.layers[0].layout.get("line-z-offset"),B=D.isConstant()&&!D.constantOr(0);this.elevationType=y!=="sea"&&y!=="ground"&&B?"none":"offset",this.elevationType==="offset"&&y==="none"&&Zn(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`)}const _=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.elevationType==="offset"&&_!==void 0;const S=[];for(const{feature:D,id:B,index:$,sourceLayerIndex:q}of r){const W=this.layers[0]._featureFilter.needGeometry,J=Yt(D,W);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom,{worldview:this.worldview}),J,u))continue;const ce=g?g.evaluate(J,{},u):void 0,ue={id:B,properties:D.properties,type:D.type,sourceLayerIndex:q,index:$,geometry:W?J.geometry:rn(D,u,h),patterns:{},sortKey:ce};S.push(ue)}g&&S.sort((D,B)=>D.sortKey-B.sortKey);const{lineAtlas:C,featureIndex:P}=o,R=this.addConstantDashes(C);for(const D of S){const{geometry:B,index:$,sourceLayerIndex:q}=D;if(R&&this.addFeatureDashes(D,C),this.hasPattern){const W=K1("line",this.layers,D,this.zoom,this.pixelRatio,o);this.patternFeatures.push(W)}else this.addFeature(D,B,$,u,C.positions,o.availableImages,o.brightness,o.elevationFeatures);P.insert(r[$].feature,B,$,q,this.index)}}addConstantDashes(r){let o=!1;for(const u of this.layers){const h=u.paint.get("line-dasharray").value,g=u.layout.get("line-cap").value;if(h.kind!=="constant"||g.kind!=="constant")o=!0;else{const y=g.value,_=h.value;if(!_)continue;r.addDash(_,y)}}return o}addFeatureDashes(r,o){const u=this.zoom;for(const h of this.layers){const g=h.paint.get("line-dasharray").value,y=h.layout.get("line-cap").value;if(g.kind==="constant"&&y.kind==="constant")continue;let _,S;if(g.kind==="constant"){if(_=g.value,!_)continue}else _=g.evaluate({zoom:u},r);S=y.kind==="constant"?y.value:y.evaluate({zoom:u},r),o.addDash(_,S),r.patterns[h.id]=[o.getKey(_,S)]}}update(r,o,u,h,g,y,_,S){this.programConfigurations.updatePaintArrays(r,o,g,u,h,y,_,S)}addFeatures(r,o,u,h,g,y){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,o,u,h,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,YR)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=r.createVertexBuffer(this.patternVertexArray,QR)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=r.createVertexBuffer(this.zOffsetVertexArray,KR.members,!0)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ZR),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,o,u,h,g,y,_,S){const C=this.layers[0].layout,P=C.get("line-join").evaluate(r,{}),R=C.get("line-cap").evaluate(r,{}),D=C.get("line-miter-limit"),B=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(r),this.lineFeature=r,this.zOffsetValue=C.get("line-z-offset").value;const $=this.layers[0].paint.get("line-width").value;if($.kind!=="constant"&&$.isLineProgressConstant===!1&&(this.variableWidthValue=$),this.elevationType==="road"){const q=this.layoutVertexArray.length;if(!this.addElevatedRoadFeature(r,o,h,S,P,R,D,B)){const[W,J]=this.clipRuntimeLinesToTile(o,1);for(let ce=0;ce<W.length;ce++){const ue=W[ce],H=J[ce],se={progress:{min:H.progress.min,max:H.progress.max},nextDir:this.computeSegNextDir(H,ue),prevDir:this.computeSegPrevDir(H,ue)};this.addLine(ue,r,h,P,R,D,B,se)}this.fillNonElevatedRoadSegment(q)}}else for(const q of o)this.addLine(q,r,h,P,R,D,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,g,y,h,_,void 0,this.worldview)}computeSegNextDir(r,o){return r.nextPoint.sub(o.at(-2)).unit()}computeSegPrevDir(r,o){return o[1].sub(r.prevPoint).unit()}clipLinesToTile(r,o){return Tv(r,-o,-o,Ut+o,Ut+o)}clipRuntimeLinesToTile(r,o){const u=[];return[Tv(r,-o,-o,Ut+o,Ut+o,u),u]}addElevatedRoadFeature(r,o,u,h,g,y,_,S){const C=[],P=Es.getElevationFeature(r,h);if(P){const R=this.clipLinesToTile(o,1),D=this.prepareElevatedLines(R,P,u);for(const B of D)C.push({geometry:B,elevation:P,elevationTileID:u,segment:{progress:{min:0,max:1},nextDir:void 0,prevDir:void 0}})}if(C.length===0)return!1;for(const R of C){const D=this.layoutVertexArray.length;this.addLine(R.geometry,r,u,g,y,_,S);const B=new ia(u,R.elevationTileID);if(R.elevation)for(let $=D;$<this.layoutVertexArray.length;$++){const q=new Vt(this.layoutVertexArray.int16[6*$]>>1,this.layoutVertexArray.int16[6*$+1]>>1),W=B.pointElevation(q,R.elevation,.05);this.updateHeightRange(W),this.zOffsetVertexArray.emplaceBack(W,0,0)}else this.fillNonElevatedRoadSegment(D)}return!0}prepareElevatedLines(r,o,u){if(o.constantHeight!=null)return r;const h=[],g=1/st(u);for(const y of r)FR(y,new hs(o,g),0,h);return h}fillNonElevatedRoadSegment(r){for(let o=r;o<this.layoutVertexArray.length;o++)this.zOffsetVertexArray.emplaceBack(0,0,0)}updateHeightRange(r){this.heightRange?(this.heightRange.min=Math.min(this.heightRange.min,r),this.heightRange.max=Math.max(this.heightRange.max,r)):this.heightRange={min:r,max:r}}addLine(r,o,u,h,g,y,_,S){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const C=h==="none";this.patternJoinNone=this.hasPattern&&C,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[];const P=S&&S.progress.min>0,R=S&&S.progress.max<1;if(this.lineClips){let Oe={min:this.lineClips.start,max:this.lineClips.end},Re=1;if(S){const at=this.lineClips.end-this.lineClips.start;Oe=function(At,yt,Pt){return{min:rd(At.min,yt,Pt),max:rd(At.max,yt,Pt)}}(S.progress,{min:0,max:1},Oe),at>0&&(Re=(Oe.max-Oe.min)/at)}const Be=+o.properties.mapbox_clip_feature_len,je=+o.properties.mapbox_clip_seg_len;if(Number.isNaN(Be)||Number.isNaN(je)){for(let At=0;At<r.length-1;At++)this.totalDistance+=r[At].dist(r[At+1]);const at=this.totalDistance/(Oe.max-Oe.min);this.totalFeatureLength=Number.isFinite(at)?at:0,this.lineClips.start=Oe.min,this.lineClips.end=Oe.max,this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}else this.totalFeatureLength=Be,this.distance=je*Re,this.lineClips.start=Oe.min,this.lineClips.end=Oe.max,this.maxLineLength=Math.max(this.maxLineLength,this.distance);this.lineClipsArray.push(this.lineClips),this.updateScaledDistance()}const D=eM[o.type]==="Polygon";let B=r.length;for(;B>=2&&r[B-1].equals(r[B-2]);)B--;let $=0;for(;$<B-1&&r[$].equals(r[$+1]);)$++;if(B<(D?3:2))return;h==="bevel"&&(y=1.05);const q=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let W,J,ce,ue,H,se,de,be;S&&S.prevDir&&(se=S.prevDir.perp()),S&&S.nextDir&&(de=S.nextDir.perp()),this.e1=this.e2=-1,D&&(W=r[B-2],H=r[$].sub(W)._unit()._perp());for(let Oe=$;Oe<B;Oe++){if(ce=Oe===B-1?D?r[$+1]:void 0:r[Oe+1],ce&&r[Oe].equals(ce))continue;H&&(ue=H),W&&(J=W),W=r[Oe],be=this.evaluateLineProgressFeatures(J?J.dist(W):0),H=ce?ce.sub(W)._unit()._perp():ue,ue=ue||H;const Re=J&&ce;let Be=Re?h:D||C?"butt":g;const je=ue.x*H.x+ue.y*H.y;if(C){const ot=function(lt){if(lt.patternJoinNone){const Lt=lt.segmentPoints.length/2,zt=lt.lineSoFar-lt.segmentStart;for(let Sn=0;Sn<Lt;++Sn){const un=lt.segmentPoints[2*Sn+1],Gt=Math.round(lt.segmentPoints[2*Sn])+.5+.25*un;lt.patternVertexArray.emplaceBack(Gt,zt,lt.segmentStart),lt.patternVertexArray.emplaceBack(Gt,zt,lt.segmentStart)}lt.segmentPoints.length=0}lt.e1=lt.e2=-1};if(Re&&je<nM){this.updateDistance(J,W),this.addCurrentVertex(W,ue,1,1,q,be),ot(this),this.addCurrentVertex(W,H,-1,-1,q,be);continue}if(J){if(!ce){this.updateDistance(J,W),this.addCurrentVertex(W,ue,1,1,q,be),ot(this);continue}Be="miter"}}let at=ue.add(H);at.x===0&&at.y===0||at._unit();const At=at.x*H.x+at.y*H.y,yt=At!==0?1/At:1/0,Pt=2*Math.sqrt(2-2*At),Rt=At<tM&&J&&ce,ct=ue.x*H.y-ue.y*H.x>0,Tt=this.overscaling<=16?15*Ut/(512*this.overscaling):0;if(Re&&Be==="round"){if(yt<_)Be="miter";else if(yt<=2){const ot=dx(W,-10,Ut+10);Be=this.elevationType==="offset"&&(ot||this.hasCrossSlope)?"miter":"fakeround"}}if(Be==="miter"&&yt>y&&(Be="bevel"),Be==="bevel"&&(yt>2&&(Be="flipbevel"),yt<y&&(Be="miter")),J&&!(Be==="miter"&&Rt)&&this.updateDistance(J,W),Be==="miter")if(Rt){const ot=W.dist(J);if(ot>2*Tt){const Lt=W.sub(W.sub(J)._mult(Tt/ot)._round());this.updateDistance(J,Lt),this.addCurrentVertex(Lt,ue,0,0,q,be),J=Lt}this.updateDistance(J,W),at._mult(yt),this.addCurrentVertex(W,at,0,0,q,be);const lt=W.dist(ce);if(lt>2*Tt){const Lt=W.add(ce.sub(W)._mult(Tt/lt)._round());this.updateDistance(W,Lt),this.addCurrentVertex(Lt,H,0,0,q,be),W=Lt}}else at._mult(yt),this.addCurrentVertex(W,at,0,0,q,be);else if(Be==="flipbevel"){if(yt>100)at=H.mult(-1);else{const ot=yt*ue.add(H).mag()/ue.sub(H).mag();at._perp()._mult(ot*(ct?-1:1))}this.addCurrentVertex(W,at,0,0,q,be),this.addCurrentVertex(W,at.mult(-1),0,0,q,be)}else if(Be==="bevel"||Be==="fakeround"){be!=null&&J&&this.addCurrentVertex(W,de||ue,-1,-1,q,be);const ot=W.dist(J)<=2*Tt&&Be!=="bevel",lt=at.mult(ct?1:-1);lt._mult(yt);const Lt=H.mult(ct?-1:1),zt=ue.mult(ct?-1:1),Sn=this.evaluateLineProgressFeatures(this.distance);if(be==null&&(this.addHalfVertex(W,lt.x,lt.y,!1,!ct,0,q,Sn),ot||this.addHalfVertex(W,lt.x+2*zt.x,lt.y+2*zt.y,!1,ct,0,q,Sn)),Be==="fakeround"){const un=Math.round(180*Pt/Math.PI/20);this.addHalfVertex(W,zt.x,zt.y,!1,ct,0,q,Sn);for(let Gt=0;Gt<un;Gt++){let Dt=Gt/un;if(Dt!==.5){const ln=Dt-.5;Dt+=Dt*ln*(Dt-1)*((1.0904+je*(je*(3.55645-1.43519*je)-3.2452))*ln*ln+(.848013+je*(.215638*je-1.06021)))}const Vn=Lt.sub(zt)._mult(Dt)._add(zt)._unit();this.addHalfVertex(W,Vn.x,Vn.y,!1,ct,0,q,Sn)}this.addHalfVertex(W,Lt.x,Lt.y,!1,ct,0,q,Sn)}ot||be!=null||this.addHalfVertex(W,lt.x+2*Lt.x,lt.y+2*Lt.y,!1,ct,0,q,Sn),be!=null&&ce&&this.addCurrentVertex(W,se||H,1,1,q,be)}else if(Be==="butt")this.addCurrentVertex(W,at,0,0,q,be);else if(Be==="square"){if(!J){const ot=P?0:-1;this.addCurrentVertex(W,at,ot,ot,q,be)}if(this.addCurrentVertex(W,at,0,0,q,be),J){const ot=R?0:1;this.addCurrentVertex(W,at,ot,ot,q,be)}}else if(Be==="round"){if(J){const ot=!Re&&de?de:ue;this.addCurrentVertex(W,ot,0,0,q,be),!Re&&R||this.addCurrentVertex(W,ot,1,1,q,be,!0)}if(ce){const ot=!Re&&se?se:H;!Re&&P||this.addCurrentVertex(W,ot,-1,-1,q,be,!0),this.addCurrentVertex(W,ot,0,0,q,be)}}}}addVerticesTo(r,o,u,h,g,y,_,S,C,P){const R=(o.w-r.w)/this.tessellationStep|0;let D=0;const B=this.scaledDistance;if(R>1){this.lineSoFar=r.w;const q=(o.x-r.x)/R,W=(o.y-r.y)/R,J=(o.z-r.z)/R,ce=(o.w-r.w)/R;for(let ue=1;ue<R;++ue){r.x+=q,r.y+=W,r.z+=J,this.lineSoFar+=ce,D+=ce;const H=this.evaluateLineProgressFeatures(this.prevDistance+D);this.scaledDistance=(this.prevDistance+D)/this.totalDistance,this.addHalfVertex(r,u,h,P,!1,_,C,H),this.addHalfVertex(r,g,y,P,!0,-S,C,H)}}this.lineSoFar=o.w,this.scaledDistance=B;const $=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(o,u,h,P,!1,_,C,$),this.addHalfVertex(o,g,y,P,!0,-S,C,$)}evaluateLineProgressFeatures(r){if(!this.variableWidthValue&&this.elevationType!=="offset")return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+r)/this.totalFeatureLength):Zn(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let o=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(o=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.elevationType!=="offset"?{zOffset:0,variableWidth:o}:this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:o}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:o}}addCurrentVertex(r,o,u,h,g,y,_=!1){const S=o.x+o.y*u,C=o.y-o.x*u,P=o.y*h-o.x,R=-o.y-o.x*h;if(y!=null){const D=this.elevationType==="offset",B=-10,$=Ut+10,q=y.zOffset,W=new n3(r.x,r.y,q,this.lineSoFar),J=!!D&&dx(r,B,$),ce=this.lineSoFar,ue=this.distance;if(this.currentVertex)if(J){const H=this.currentVertexIsOutside,se=this.currentVertex,de=new n3(r.x,r.y,q,this.lineSoFar);if(i3(se,de,B,$),!dx(de,B,$)){if(H){this.e1=this.e2=-1,this.distance-=se.dist(W),this.lineSoFar=se.w;const be=this.evaluateLineProgressFeatures(se.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(se,S,C,_,!1,u,g,be),this.addHalfVertex(se,P,R,_,!0,-h,g,be),this.prevDistance=this.distance}this.distance=this.prevDistance+se.dist(de),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(se,de,S,C,P,R,u,h,g,_),this.distance=ue,this.scaledDistance=this.distance/this.totalDistance}}else{const H=this.currentVertex;if(this.currentVertexIsOutside){i3(H,W,B,$),this.e1=this.e2=-1,this.distance-=H.dist(W),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=H.w;const se=this.evaluateLineProgressFeatures(H.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(H,S,C,_,!1,u,g,se),this.addHalfVertex(H,P,R,_,!0,-h,g,se),this.prevDistance=this.distance,this.distance=ue,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(H,W,S,C,P,R,u,h,g,_)}else J||(this.addHalfVertex(r,S,C,_,!1,u,g,y),this.addHalfVertex(r,P,R,_,!0,-h,g,y));this.currentVertex=W,this.currentVertexIsOutside=J,this.lineSoFar=ce}else this.addHalfVertex(r,S,C,_,!1,u,g,y),this.addHalfVertex(r,P,R,_,!0,-h,g,y)}addHalfVertex({x:r,y:o},u,h,g,y,_,S,C){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),y||this.segmentPoints.push(this.lineSoFar-this.segmentStart,_)),this.layoutVertexArray.emplaceBack((r<<1)+(g?1:0),(o<<1)+(y?1:0),Math.round(63*u)+128,Math.round(63*h)+128,1+(_===0?0:_<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const R=Mn(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,R)}const P=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),S.primitiveLength++),y?this.e2=P:this.e1=P,C!=null&&this.zOffsetVertexArray.emplaceBack(C.zOffset,C.variableWidth,C.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(r,o){this.prevDistance=this.distance,this.distance+=r.dist(o),this.updateScaledDistance()}}function dx(a,r,o){return a.x<r||a.x>o||a.y<r||a.y>o}let w3,S3;function C3(a,r,o){return r*(Ut/(a.tileSize*Math.pow(2,o-a.tileID.overscaledZ)))}tn(ux,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const k3=(a,r,o)=>(1-o)*a+o*r;function T3(a,r){return 1/C3(a,1,r.tileZoom)}function E3(a,r,o,u){return a.translatePosMatrix(u||r.tileID.projMatrix,r,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const I3=a=>{const r=[];P3(a)&&r.push("RENDER_LINE_DASH"),a.paint.get("line-gradient")&&r.push("RENDER_LINE_GRADIENT");const o=a.paint.get("line-trim-offset");o[0]===0&&o[1]===0||r.push("RENDER_LINE_TRIM_OFFSET"),a.paint.get("line-border-width").constantOr(1)!==0&&r.push("RENDER_LINE_BORDER");const u=a.layout.get("line-join").constantOr("miter")==="none",h=!!a.paint.get("line-pattern").constantOr(1);return u&&h&&r.push("LINE_JOIN_NONE"),r};function P3(a){const r=a.paint.get("line-dasharray").value;return r.value||r.kind!=="constant"}let hx;const A3=()=>hx||(hx={layout:w3||(w3=new Mi({"line-cap":new Zt(We.layout_line["line-cap"]),"line-join":new Zt(We.layout_line["line-join"]),"line-miter-limit":new Mt(We.layout_line["line-miter-limit"]),"line-round-limit":new Mt(We.layout_line["line-round-limit"]),"line-sort-key":new Zt(We.layout_line["line-sort-key"]),"line-z-offset":new Zt(We.layout_line["line-z-offset"]),"line-elevation-reference":new Mt(We.layout_line["line-elevation-reference"]),"line-cross-slope":new Mt(We.layout_line["line-cross-slope"]),visibility:new Mt(We.layout_line.visibility),"line-width-unit":new Mt(We.layout_line["line-width-unit"])})),paint:S3||(S3=new Mi({"line-opacity":new Zt(We.paint_line["line-opacity"]),"line-color":new Zt(We.paint_line["line-color"]),"line-translate":new Mt(We.paint_line["line-translate"]),"line-translate-anchor":new Mt(We.paint_line["line-translate-anchor"]),"line-width":new Zt(We.paint_line["line-width"]),"line-gap-width":new Zt(We.paint_line["line-gap-width"]),"line-offset":new Zt(We.paint_line["line-offset"]),"line-blur":new Zt(We.paint_line["line-blur"]),"line-dasharray":new Zt(We.paint_line["line-dasharray"]),"line-pattern":new Zt(We.paint_line["line-pattern"]),"line-pattern-cross-fade":new Mt(We.paint_line["line-pattern-cross-fade"]),"line-gradient":new vc(We.paint_line["line-gradient"]),"line-trim-offset":new Mt(We.paint_line["line-trim-offset"]),"line-trim-fade-range":new Mt(We.paint_line["line-trim-fade-range"]),"line-trim-color":new Mt(We.paint_line["line-trim-color"]),"line-emissive-strength":new Mt(We.paint_line["line-emissive-strength"]),"line-border-width":new Zt(We.paint_line["line-border-width"]),"line-border-color":new Zt(We.paint_line["line-border-color"]),"line-occlusion-opacity":new Mt(We.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},hx);class rM extends Zt{possiblyEvaluate(r,o){return o=new Ur(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition,worldview:o.worldview}),super.possiblyEvaluate(r,o)}evaluate(r,o,u,h){return o=tt({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(r,o,u,h)}}let ig;function R3(a,r){return r>0?r+2*a:a}const iM=Sr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),oM=Sr([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),sM=Sr([{name:"a_projected_pos",components:4,type:"Float32"}],4);Sr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const aM=Sr([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),lM=Sr([{name:"a_x_axis",components:3,type:"Float32"},{name:"a_y_axis",components:3,type:"Float32"}]),cM=Sr([{name:"a_texb",components:2,type:"Uint16"}]),uM=Sr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),dM=Sr([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Sr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const M3=Sr([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),hM=Sr([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Sr([{name:"triangle",components:3,type:"Uint16"}]),Sr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Sr([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),Sr([{type:"Float32",name:"offsetX"}]),Sr([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var wo=24;function pM(a,r,o){return a.sections.forEach(u=>{u.text=function(h,g,y){const _=g.layout.get("text-transform").evaluate(y,{});return _==="uppercase"?h=h.toLocaleUpperCase():_==="lowercase"&&(h=h.toLocaleLowerCase()),qa.applyArabicShaping&&(h=qa.applyArabicShaping(h)),h}(u.text,r,o)}),a}const og={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function fM(a){return a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""}function mM(a){return a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""}var D3,px,L3,fx={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function gM(){return D3||(D3=1,fx.read=function(a,r,o,u,h){var g,y,_=8*h-u-1,S=(1<<_)-1,C=S>>1,P=-7,R=o?h-1:0,D=o?-1:1,B=a[r+R];for(R+=D,g=B&(1<<-P)-1,B>>=-P,P+=_;P>0;g=256*g+a[r+R],R+=D,P-=8);for(y=g&(1<<-P)-1,g>>=-P,P+=u;P>0;y=256*y+a[r+R],R+=D,P-=8);if(g===0)g=1-C;else{if(g===S)return y?NaN:1/0*(B?-1:1);y+=Math.pow(2,u),g-=C}return(B?-1:1)*y*Math.pow(2,g-u)},fx.write=function(a,r,o,u,h,g){var y,_,S,C=8*g-h-1,P=(1<<C)-1,R=P>>1,D=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=u?0:g-1,$=u?1:-1,q=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(_=isNaN(r)?1:0,y=P):(y=Math.floor(Math.log(r)/Math.LN2),r*(S=Math.pow(2,-y))<1&&(y--,S*=2),(r+=y+R>=1?D/S:D*Math.pow(2,1-R))*S>=2&&(y++,S/=2),y+R>=P?(_=0,y=P):y+R>=1?(_=(r*S-1)*Math.pow(2,h),y+=R):(_=r*Math.pow(2,R-1)*Math.pow(2,h),y=0));h>=8;a[o+B]=255&_,B+=$,_/=256,h-=8);for(y=y<<h|_,C+=h;C>0;a[o+B]=255&y,B+=$,y/=256,C-=8);a[o+B-$]|=128*q}),fx}function O3(){if(L3)return px;L3=1,px=r;var a=gM();function r(H){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(H)?H:new Uint8Array(H||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var o=4294967296,u=1/o,h=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function g(H){return H.type===r.Bytes?H.readVarint()+H.pos:H.pos+1}function y(H,se,de){return de?4294967296*se+(H>>>0):4294967296*(se>>>0)+(H>>>0)}function _(H,se,de){var be=se<=16383?1:se<=2097151?2:se<=268435455?3:Math.floor(Math.log(se)/(7*Math.LN2));de.realloc(be);for(var Oe=de.pos-1;Oe>=H;Oe--)de.buf[Oe+be]=de.buf[Oe]}function S(H,se){for(var de=0;de<H.length;de++)se.writeVarint(H[de])}function C(H,se){for(var de=0;de<H.length;de++)se.writeSVarint(H[de])}function P(H,se){for(var de=0;de<H.length;de++)se.writeFloat(H[de])}function R(H,se){for(var de=0;de<H.length;de++)se.writeDouble(H[de])}function D(H,se){for(var de=0;de<H.length;de++)se.writeBoolean(H[de])}function B(H,se){for(var de=0;de<H.length;de++)se.writeFixed32(H[de])}function $(H,se){for(var de=0;de<H.length;de++)se.writeSFixed32(H[de])}function q(H,se){for(var de=0;de<H.length;de++)se.writeFixed64(H[de])}function W(H,se){for(var de=0;de<H.length;de++)se.writeSFixed64(H[de])}function J(H,se){return(H[se]|H[se+1]<<8|H[se+2]<<16)+16777216*H[se+3]}function ce(H,se,de){H[de]=se,H[de+1]=se>>>8,H[de+2]=se>>>16,H[de+3]=se>>>24}function ue(H,se){return(H[se]|H[se+1]<<8|H[se+2]<<16)+(H[se+3]<<24)}return r.prototype={destroy:function(){this.buf=null},readFields:function(H,se,de){for(de=de||this.length;this.pos<de;){var be=this.readVarint(),Oe=be>>3,Re=this.pos;this.type=7&be,H(Oe,se,this),this.pos===Re&&this.skip(be)}return se},readMessage:function(H,se){return this.readFields(H,se,this.readVarint()+this.pos)},readFixed32:function(){var H=J(this.buf,this.pos);return this.pos+=4,H},readSFixed32:function(){var H=ue(this.buf,this.pos);return this.pos+=4,H},readFixed64:function(){var H=J(this.buf,this.pos)+J(this.buf,this.pos+4)*o;return this.pos+=8,H},readSFixed64:function(){var H=J(this.buf,this.pos)+ue(this.buf,this.pos+4)*o;return this.pos+=8,H},readFloat:function(){var H=a.read(this.buf,this.pos,!0,23,4);return this.pos+=4,H},readDouble:function(){var H=a.read(this.buf,this.pos,!0,52,8);return this.pos+=8,H},readVarint:function(H){var se,de,be=this.buf;return se=127&(de=be[this.pos++]),de<128?se:(se|=(127&(de=be[this.pos++]))<<7,de<128?se:(se|=(127&(de=be[this.pos++]))<<14,de<128?se:(se|=(127&(de=be[this.pos++]))<<21,de<128?se:function(Oe,Re,Be){var je,at,At=Be.buf;if(je=(112&(at=At[Be.pos++]))>>4,at<128||(je|=(127&(at=At[Be.pos++]))<<3,at<128)||(je|=(127&(at=At[Be.pos++]))<<10,at<128)||(je|=(127&(at=At[Be.pos++]))<<17,at<128)||(je|=(127&(at=At[Be.pos++]))<<24,at<128)||(je|=(1&(at=At[Be.pos++]))<<31,at<128))return y(Oe,je,Re);throw new Error("Expected varint not more than 10 bytes")}(se|=(15&(de=be[this.pos]))<<28,H,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var H=this.readVarint();return H%2==1?(H+1)/-2:H/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var H=this.readVarint()+this.pos,se=this.pos;return this.pos=H,H-se>=12&&h?function(de,be,Oe){return h.decode(de.subarray(be,Oe))}(this.buf,se,H):function(de,be,Oe){for(var Re="",Be=be;Be<Oe;){var je,at,At,yt=de[Be],Pt=null,Rt=yt>239?4:yt>223?3:yt>191?2:1;if(Be+Rt>Oe)break;Rt===1?yt<128&&(Pt=yt):Rt===2?(192&(je=de[Be+1]))==128&&(Pt=(31&yt)<<6|63&je)<=127&&(Pt=null):Rt===3?(at=de[Be+2],(192&(je=de[Be+1]))==128&&(192&at)==128&&((Pt=(15&yt)<<12|(63&je)<<6|63&at)<=2047||Pt>=55296&&Pt<=57343)&&(Pt=null)):Rt===4&&(at=de[Be+2],At=de[Be+3],(192&(je=de[Be+1]))==128&&(192&at)==128&&(192&At)==128&&((Pt=(15&yt)<<18|(63&je)<<12|(63&at)<<6|63&At)<=65535||Pt>=1114112)&&(Pt=null)),Pt===null?(Pt=65533,Rt=1):Pt>65535&&(Pt-=65536,Re+=String.fromCharCode(Pt>>>10&1023|55296),Pt=56320|1023&Pt),Re+=String.fromCharCode(Pt),Be+=Rt}return Re}(this.buf,se,H)},readBytes:function(){var H=this.readVarint()+this.pos,se=this.buf.subarray(this.pos,H);return this.pos=H,se},readPackedVarint:function(H,se){if(this.type!==r.Bytes)return H.push(this.readVarint(se));var de=g(this);for(H=H||[];this.pos<de;)H.push(this.readVarint(se));return H},readPackedSVarint:function(H){if(this.type!==r.Bytes)return H.push(this.readSVarint());var se=g(this);for(H=H||[];this.pos<se;)H.push(this.readSVarint());return H},readPackedBoolean:function(H){if(this.type!==r.Bytes)return H.push(this.readBoolean());var se=g(this);for(H=H||[];this.pos<se;)H.push(this.readBoolean());return H},readPackedFloat:function(H){if(this.type!==r.Bytes)return H.push(this.readFloat());var se=g(this);for(H=H||[];this.pos<se;)H.push(this.readFloat());return H},readPackedDouble:function(H){if(this.type!==r.Bytes)return H.push(this.readDouble());var se=g(this);for(H=H||[];this.pos<se;)H.push(this.readDouble());return H},readPackedFixed32:function(H){if(this.type!==r.Bytes)return H.push(this.readFixed32());var se=g(this);for(H=H||[];this.pos<se;)H.push(this.readFixed32());return H},readPackedSFixed32:function(H){if(this.type!==r.Bytes)return H.push(this.readSFixed32());var se=g(this);for(H=H||[];this.pos<se;)H.push(this.readSFixed32());return H},readPackedFixed64:function(H){if(this.type!==r.Bytes)return H.push(this.readFixed64());var se=g(this);for(H=H||[];this.pos<se;)H.push(this.readFixed64());return H},readPackedSFixed64:function(H){if(this.type!==r.Bytes)return H.push(this.readSFixed64());var se=g(this);for(H=H||[];this.pos<se;)H.push(this.readSFixed64());return H},skip:function(H){var se=7&H;if(se===r.Varint)for(;this.buf[this.pos++]>127;);else if(se===r.Bytes)this.pos=this.readVarint()+this.pos;else if(se===r.Fixed32)this.pos+=4;else{if(se!==r.Fixed64)throw new Error("Unimplemented type: "+se);this.pos+=8}},writeTag:function(H,se){this.writeVarint(H<<3|se)},realloc:function(H){for(var se=this.length||16;se<this.pos+H;)se*=2;if(se!==this.length){var de=new Uint8Array(se);de.set(this.buf),this.buf=de,this.length=se}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(H){this.realloc(4),ce(this.buf,H,this.pos),this.pos+=4},writeSFixed32:function(H){this.realloc(4),ce(this.buf,H,this.pos),this.pos+=4},writeFixed64:function(H){this.realloc(8),ce(this.buf,-1&H,this.pos),ce(this.buf,Math.floor(H*u),this.pos+4),this.pos+=8},writeSFixed64:function(H){this.realloc(8),ce(this.buf,-1&H,this.pos),ce(this.buf,Math.floor(H*u),this.pos+4),this.pos+=8},writeVarint:function(H){(H=+H||0)>268435455||H<0?function(se,de){var be,Oe;if(se>=0?(be=se%4294967296|0,Oe=se/4294967296|0):(Oe=~(-se/4294967296),4294967295^(be=~(-se%4294967296))?be=be+1|0:(be=0,Oe=Oe+1|0)),se>=18446744073709552e3||se<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");de.realloc(10),function(Re,Be,je){je.buf[je.pos++]=127&Re|128,Re>>>=7,je.buf[je.pos++]=127&Re|128,Re>>>=7,je.buf[je.pos++]=127&Re|128,Re>>>=7,je.buf[je.pos++]=127&Re|128,je.buf[je.pos]=127&(Re>>>=7)}(be,0,de),function(Re,Be){var je=(7&Re)<<4;Be.buf[Be.pos++]|=je|((Re>>>=3)?128:0),Re&&(Be.buf[Be.pos++]=127&Re|((Re>>>=7)?128:0),Re&&(Be.buf[Be.pos++]=127&Re|((Re>>>=7)?128:0),Re&&(Be.buf[Be.pos++]=127&Re|((Re>>>=7)?128:0),Re&&(Be.buf[Be.pos++]=127&Re|((Re>>>=7)?128:0),Re&&(Be.buf[Be.pos++]=127&Re)))))}(Oe,de)}(H,this):(this.realloc(4),this.buf[this.pos++]=127&H|(H>127?128:0),H<=127||(this.buf[this.pos++]=127&(H>>>=7)|(H>127?128:0),H<=127||(this.buf[this.pos++]=127&(H>>>=7)|(H>127?128:0),H<=127||(this.buf[this.pos++]=H>>>7&127))))},writeSVarint:function(H){this.writeVarint(H<0?2*-H-1:2*H)},writeBoolean:function(H){this.writeVarint(!!H)},writeString:function(H){H=String(H),this.realloc(4*H.length),this.pos++;var se=this.pos;this.pos=function(be,Oe,Re){for(var Be,je,at=0;at<Oe.length;at++){if((Be=Oe.charCodeAt(at))>55295&&Be<57344){if(!je){Be>56319||at+1===Oe.length?(be[Re++]=239,be[Re++]=191,be[Re++]=189):je=Be;continue}if(Be<56320){be[Re++]=239,be[Re++]=191,be[Re++]=189,je=Be;continue}Be=je-55296<<10|Be-56320|65536,je=null}else je&&(be[Re++]=239,be[Re++]=191,be[Re++]=189,je=null);Be<128?be[Re++]=Be:(Be<2048?be[Re++]=Be>>6|192:(Be<65536?be[Re++]=Be>>12|224:(be[Re++]=Be>>18|240,be[Re++]=Be>>12&63|128),be[Re++]=Be>>6&63|128),be[Re++]=63&Be|128)}return Re}(this.buf,H,this.pos);var de=this.pos-se;de>=128&&_(se,de,this),this.pos=se-1,this.writeVarint(de),this.pos+=de},writeFloat:function(H){this.realloc(4),a.write(this.buf,H,this.pos,!0,23,4),this.pos+=4},writeDouble:function(H){this.realloc(8),a.write(this.buf,H,this.pos,!0,52,8),this.pos+=8},writeBytes:function(H){var se=H.length;this.writeVarint(se),this.realloc(se);for(var de=0;de<se;de++)this.buf[this.pos++]=H[de]},writeRawMessage:function(H,se){this.pos++;var de=this.pos;H(se,this);var be=this.pos-de;be>=128&&_(de,be,this),this.pos=de-1,this.writeVarint(be),this.pos+=be},writeMessage:function(H,se,de){this.writeTag(H,r.Bytes),this.writeRawMessage(se,de)},writePackedVarint:function(H,se){se.length&&this.writeMessage(H,S,se)},writePackedSVarint:function(H,se){se.length&&this.writeMessage(H,C,se)},writePackedBoolean:function(H,se){se.length&&this.writeMessage(H,D,se)},writePackedFloat:function(H,se){se.length&&this.writeMessage(H,P,se)},writePackedDouble:function(H,se){se.length&&this.writeMessage(H,R,se)},writePackedFixed32:function(H,se){se.length&&this.writeMessage(H,B,se)},writePackedSFixed32:function(H,se){se.length&&this.writeMessage(H,$,se)},writePackedFixed64:function(H,se){se.length&&this.writeMessage(H,q,se)},writePackedSFixed64:function(H,se){se.length&&this.writeMessage(H,W,se)},writeBytesField:function(H,se){this.writeTag(H,r.Bytes),this.writeBytes(se)},writeFixed32Field:function(H,se){this.writeTag(H,r.Fixed32),this.writeFixed32(se)},writeSFixed32Field:function(H,se){this.writeTag(H,r.Fixed32),this.writeSFixed32(se)},writeFixed64Field:function(H,se){this.writeTag(H,r.Fixed64),this.writeFixed64(se)},writeSFixed64Field:function(H,se){this.writeTag(H,r.Fixed64),this.writeSFixed64(se)},writeVarintField:function(H,se){this.writeTag(H,r.Varint),this.writeVarint(se)},writeSVarintField:function(H,se){this.writeTag(H,r.Varint),this.writeSVarint(se)},writeStringField:function(H,se){this.writeTag(H,r.Bytes),this.writeString(se)},writeFloatField:function(H,se){this.writeTag(H,r.Fixed32),this.writeFloat(se)},writeDoubleField:function(H,se){this.writeTag(H,r.Fixed64),this.writeDouble(se)},writeBooleanField:function(H,se){this.writeVarintField(H,!!se)}},px}var Av=cl(O3());const mx=3;function yM(a,r,o){r.glyphs=[],a===1&&o.readMessage(vM,r)}function vM(a,r,o){if(a===3){const{id:u,bitmap:h,width:g,height:y,left:_,top:S,advance:C}=o.readMessage(bM,{});r.glyphs.push({id:u,bitmap:new Cu({width:g+2*mx,height:y+2*mx},h),metrics:{width:g,height:y,left:_,top:S,advance:C}})}else a===4?r.ascender=o.readSVarint():a===5&&(r.descender=o.readSVarint())}function bM(a,r,o){a===1?r.id=o.readVarint():a===2?r.bitmap=o.readBytes():a===3?r.width=o.readVarint():a===4?r.height=o.readVarint():a===5?r.left=o.readSVarint():a===6?r.top=o.readSVarint():a===7&&(r.advance=o.readVarint())}const _M=mx,Is={horizontal:1,vertical:2,horizontalOnly:3};class sg{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(r,o){const u=new sg;return u.scale=r||1,u.fontStack=o,u}static forImage(r){const o=new sg;return o.image=r,o}}class jp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,o,u){const h=new jp;for(let g=0;g<r.sections.length;g++){const y=r.sections[g];y.image?h.addImageSection(y,u):h.addTextSection(y,o)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSections(){return this.sections}getSectionIndex(r){return this.sectionIndex[r]}getCodePoint(r){return this.text.codePointAt(r)}verticalizePunctuation(r){this.text=function(o,u){let h="";for(let g=0;g<o.length;g++){const y=o.charCodeAt(g+1)||null,_=o.charCodeAt(g-1)||null;h+=!u&&(y&&j0(y)&&!og[o[g+1]]||_&&j0(_)&&!og[o[g-1]])||!og[o[g]]?o[g]:og[o[g]]}return h}(this.text,r)}trim(){let r=0;for(let u=0;u<this.text.length&&Rv[this.text.charCodeAt(u)];u++)r++;let o=this.text.length;for(let u=this.text.length-1;u>=0&&u>=r&&Rv[this.text.charCodeAt(u)];u--)o--;this.text=this.text.substring(r,o),this.sectionIndex=this.sectionIndex.slice(r,o)}substring(r,o){const u=new jp;return u.text=this.text.substring(r,o),u.sectionIndex=this.sectionIndex.slice(r,o),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,o)=>Math.max(r,this.sections[o].scale),0)}addTextSection(r,o){this.text+=r.text,this.sections.push(sg.forText(r.scale,r.fontStack||o));const u=this.sections.length-1;for(let h=0;h<r.text.length;++h)this.sectionIndex.push(u)}addImageSection(r,o){const u=r.image?r.image.getPrimary():null;if(!u)return void Zn("Can't add FormattedSection with an empty image.");u.scaleSelf(o);const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCodePoint(h),this.sections.push(sg.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Zn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function gx(a,r,o,u,h,g,y,_,S,C,P,R,D,B,$,q=1){const W=jp.fromFeature(a,h,q);R===Is.vertical&&W.verticalizePunctuation(D);let J=[];const ce=function(be,Oe,Re,Be,je,at){if(!be)return[];const At=[],yt=function(Tt,ot,lt,Lt,zt,Sn){let un=0;for(let Gt=0;Gt<Tt.length();Gt++){const Dt=Tt.getSection(Gt);un+=z3(Tt.getCodePoint(Gt),Dt,Lt,zt,ot,Sn)}return un/Math.max(1,Math.ceil(un/lt))}(be,Oe,Re,Be,je,at),Pt=be.text.indexOf("")>=0;let Rt=0;for(let Tt=0;Tt<be.length();Tt++){const ot=be.getSection(Tt),lt=be.getCodePoint(Tt);if(Rv[lt]||(Rt+=z3(lt,ot,Be,je,Oe,at)),Tt<be.length()-1){const Lt=!((ct=lt)<11904||!(En["Bopomofo Extended"](ct)||En.Bopomofo(ct)||En["CJK Compatibility Forms"](ct)||En["CJK Compatibility Ideographs"](ct)||En["CJK Compatibility"](ct)||En["CJK Radicals Supplement"](ct)||En["CJK Strokes"](ct)||En["CJK Symbols and Punctuation"](ct)||En["CJK Unified Ideographs Extension A"](ct)||En["CJK Unified Ideographs"](ct)||En["Enclosed CJK Letters and Months"](ct)||En["Halfwidth and Fullwidth Forms"](ct)||En.Hiragana(ct)||En["Ideographic Description Characters"](ct)||En["Kangxi Radicals"](ct)||En["Katakana Phonetic Extensions"](ct)||En.Katakana(ct)||En["Vertical Forms"](ct)||En["Yi Radicals"](ct)||En["Yi Syllables"](ct)));(xM[lt]||Lt||ot.image)&&At.push(F3(Tt+1,Rt,yt,At,wM(lt,be.getCodePoint(Tt+1),Lt&&Pt),!1))}}var ct;return $3(F3(be.length(),Rt,yt,At,0,!0))}(W,C,g,r,u,B),{processBidirectionalText:ue,processStyledBidirectionalText:H}=qa;if(ue&&W.sections.length===1){const be=ue(W.toString(),ce);for(const Oe of be){const Re=new jp;Re.text=Oe,Re.sections=W.sections;for(let Be=0;Be<Oe.length;Be++)Re.sectionIndex.push(0);J.push(Re)}}else if(H){const be=H(W.text,W.sectionIndex,ce);for(const Oe of be){const Re=new jp;Re.text=Oe[0],Re.sectionIndex=Oe[1],Re.sections=W.sections,J.push(Re)}}else J=function(be,Oe){const Re=[],Be=be.text;let je=0;for(const at of Oe)Re.push(be.substring(je,at)),je=at;return je<Be.length&&Re.push(be.substring(je,Be.length)),Re}(W,ce);const se=[],de={positionedLines:se,text:W.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:R,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(be,Oe,Re,Be,je,at,At,yt,Pt,Rt,ct,Tt){let ot=0,lt=0,Lt=0;const zt=yt==="right"?1:yt==="left"?0:.5;let Sn=!1;for(const hn of je){const Dn=hn.getSections();for(const Kn of Dn){if(Kn.image)continue;const Wn=Oe[Kn.fontStack];if(Wn&&(Sn=Wn.ascender!==void 0&&Wn.descender!==void 0,!Sn))break}if(!Sn)break}let un=0;for(const hn of je){hn.trim();const Dn=hn.getMaxScale(),Kn=(Dn-1)*wo,Wn={positionedGlyphs:[],lineOffset:0};be.positionedLines[un]=Wn;const sr=Wn.positionedGlyphs;let Qn=0;if(!hn.length()){lt+=at,++un;continue}let ar=0,Dr=0;for(let ye=0;ye<hn.length();ye++){const _e=hn.getSection(ye),dt=hn.getSectionIndex(ye),Ft=hn.getCodePoint(ye);let Wt=_e.scale,Ht=null,sn=null,Rn=null,dr=wo,hr=0;Pt===Is.vertical&&((Gt=Ft)===12312||Gt===12313||Gt===12316||Gt===12540||Gt===12448)&&(Pt=Is.horizontal);const er=!(Pt===Is.horizontal||!ct&&!_m(Ft)||ct&&(Rv[Ft]||I1(Ft)));if(_e.image){const Fr=Be.get(_e.image.toString());if(!Fr)continue;Rn=_e.image,be.iconsInText=be.iconsInText||!0,sn=Fr.paddedRect;const ni=Fr.displaySize;Wt=Wt*wo/Tt,Ht={width:ni[0],height:ni[1],left:0,top:-3,advance:er?ni[1]:ni[0],localGlyph:!1},hr=Sn?-Ht.height*Wt:Dn*wo-17-ni[1]*Wt,dr=Ht.advance;const pr=(er?ni[0]:ni[1])*Wt-wo*Dn;pr>0&&pr>Qn&&(Qn=pr)}else{const Fr=Re[_e.fontStack];if(!Fr)continue;Fr[Ft]&&(sn=Fr[Ft]);const ni=Oe[_e.fontStack];if(!ni)continue;const pr=ni.glyphs[Ft];if(!pr)continue;if(Ht=pr.metrics,dr=Ft!==8203?wo:0,Sn){const Ii=ni.ascender!==void 0?Math.abs(ni.ascender):0,ai=ni.descender!==void 0?Math.abs(ni.descender):0,Lr=(Ii+ai)*Wt;ar<Lr&&(ar=Lr,Dr=(Ii-ai)/2*Wt),hr=-Ii*Wt}else hr=(Dn-Wt)*wo-17}er?(be.verticalizable=!0,sr.push({glyph:Ft,image:Rn,x:ot,y:lt+hr,vertical:er,scale:Wt,localGlyph:Ht.localGlyph,fontStack:_e.fontStack,sectionIndex:dt,metrics:Ht,rect:sn}),ot+=dr*Wt+Rt):(sr.push({glyph:Ft,image:Rn,x:ot,y:lt+hr,vertical:er,scale:Wt,localGlyph:Ht.localGlyph,fontStack:_e.fontStack,sectionIndex:dt,metrics:Ht,rect:sn}),ot+=Ht.advance*Wt+Rt)}sr.length!==0&&(Lt=Math.max(ot-Rt,Lt),Sn?N3(sr,zt,Qn,Dr,at*Dn/2):N3(sr,zt,Qn,0,at/2)),ot=0;const si=at*Dn+Qn;Wn.lineOffset=Math.max(Qn,Kn),lt+=si,++un}var Gt;const Dt=lt,{horizontalAlign:Vn,verticalAlign:ln}=yx(At);(function(hn,Dn,Kn,Wn,sr,Qn){const ar=(Dn-Kn)*sr,Dr=-Qn*Wn;for(const si of hn)for(const ye of si.positionedGlyphs)ye.x+=ar,ye.y+=Dr})(be.positionedLines,zt,Vn,ln,Lt,Dt),be.top+=-ln*Dt,be.bottom=be.top+Dt,be.left+=-Vn*Lt,be.right=be.left+Lt,be.hasBaseline=Sn}(de,r,o,u,J,y,_,S,R,C,D,$),!function(be){for(const Oe of be)if(Oe.positionedGlyphs.length!==0)return!1;return!0}(se))return de}const Rv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},xM={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function z3(a,r,o,u,h,g){if(r.image){const y=u.get(r.image.toString());return y?y.displaySize[0]*r.scale*wo/g+h:0}{const y=o[r.fontStack],_=y&&y.glyphs[a];return _?_.metrics.advance*r.scale+h:0}}function B3(a,r,o,u){const h=Math.pow(a-r,2);return u?a<r?h/2:2*h:h+Math.abs(o)*o}function wM(a,r,o){let u=0;return a===10&&(u-=1e4),o&&(u+=150),a!==40&&a!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function F3(a,r,o,u,h,g){let y=null,_=B3(r,o,h,g);for(const S of u){const C=B3(r-S.x,o,h,g)+S.badness;C<=_&&(y=S,_=C)}return{index:a,x:r,priorBreak:y,badness:_}}function $3(a){return a?$3(a.priorBreak).concat(a.index):[]}function yx(a){let r=.5,o=.5;switch(a){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:r,verticalAlign:o}}function N3(a,r,o,u,h){if(!(r||o||u||h))return;const g=a.length-1,y=a[g],_=(y.x+y.metrics.advance*y.scale)*r;for(let S=0;S<=g;S++)a[S].x-=_,a[S].y+=o+u+h}function V3(a){return a.imagePrimary!==void 0&&a.top!==void 0&&a.bottom!==void 0&&a.left!==void 0&&a.right!==void 0}function SM(a,r,o,u){const{horizontalAlign:h,verticalAlign:g}=yx(u),y=o[0]-a.displaySize[0]*h,_=o[1]-a.displaySize[1]*g;return{imagePrimary:a,imageSecondary:r,top:_,bottom:_+a.displaySize[1],left:y,right:y+a.displaySize[0]}}function j3(a,r,o,u,h,g){const y=a.imagePrimary;let _;if(y.content){const W=y.content,J=y.pixelRatio||1;_=[W[0]/J,W[1]/J,y.displaySize[0]-W[2]/J,y.displaySize[1]-W[3]/J]}const S=r.left*g,C=r.right*g;let P,R,D,B;o==="width"||o==="both"?(B=h[0]+S-u[3],R=h[0]+C+u[1]):(B=h[0]+(S+C-y.displaySize[0])/2,R=B+y.displaySize[0]);const $=r.top*g,q=r.bottom*g;return o==="height"||o==="both"?(P=h[1]+$-u[0],D=h[1]+q+u[2]):(P=h[1]+($+q-y.displaySize[1])/2,D=P+y.displaySize[1]),{imagePrimary:y,imageSecondary:void 0,top:P,right:R,bottom:D,left:B,collisionPadding:_}}function U3(a){return!a.imagePrimary.stretchX}function q3(a){return!a.imagePrimary.stretchY}function H3(a){return{width:a.right-a.left,height:a.bottom-a.top}}const Ml=128;function G3(a,r,o){const{expression:u}=r;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Ur(a+1,{worldview:o}))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=u;let y=0;for(;y<h.length&&h[y]<=a;)y++;y=Math.max(0,y-1);let _=y;for(;_<h.length&&h[_]<a+1;)_++;_=Math.min(h.length-1,_);const S=h[y],C=h[_];return u.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:C,interpolationType:g}:{kind:"camera",minZoom:S,maxZoom:C,minSize:u.evaluate(new Ur(S,{worldview:o})),maxSize:u.evaluate(new Ur(C,{worldview:o})),interpolationType:g}}}function vx(a,{uSize:r,uSizeT:o},{lowerSize:u,upperSize:h}){return a.kind==="source"?u/Ml:a.kind==="composite"?Mn(u/Ml,h/Ml,o):r}function ag(a,r,o=1){let u=0,h=0;if(a.kind==="constant")h=a.layoutSize*o;else if(a.kind!=="source"){const{interpolationType:g,minZoom:y,maxZoom:_}=a,S=g?Te(Ts.interpolationFactor(g,r,y,_),0,1):0;a.kind==="camera"?h=Mn(a.minSize,a.maxSize,S)*o:u=S*o}return{uSizeT:u,uSize:h}}class Sc extends Vt{constructor(r,o,u,h,g){super(r,o),this.angle=h,this.z=u,g!==void 0&&(this.segment=g)}clone(){return new Sc(this.x,this.y,this.z,this.angle,this.segment)}}function W3(a,r,o,u,h){if(r.segment===void 0)return!0;let g=r,y=r.segment+1,_=0;for(;_>-o/2;){if(y--,y<0)return!1;_-=a[y].dist(g),g=a[y]}_+=a[y].dist(a[y+1]),y++;const S=[];let C=0;for(;_<o/2;){const P=a[y],R=a[y+1];if(!R)return!1;let D=a[y-1].angleTo(P)-P.angleTo(R);for(D=Math.abs((D+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:_,angleDelta:D}),C+=D;_-S[0].distance>u;)C-=S.shift().angleDelta;if(C>h)return!1;y++,_+=P.dist(R)}return!0}function K3(a){let r=0;for(let o=0;o<a.length-1;o++)r+=a[o].dist(a[o+1]);return r}function Z3(a,r,o){return a?.6*r*o:0}function X3(a,r){return Math.max(a?a.right-a.left:0,r?r.right-r.left:0)}function CM(a,r,o,u,h,g){const y=Z3(o,h,g),_=X3(o,u)*g;let S=0;const C=K3(a)/2;for(let P=0;P<a.length-1;P++){const R=a[P],D=a[P+1],B=R.dist(D);if(S+B>C){const $=(C-S)/B,q=Mn(R.x,D.x,$),W=Mn(R.y,D.y,$),J=new Sc(q,W,0,D.angleTo(R),P);return!y||W3(a,J,_,y,r)?J:void 0}S+=B}}function kM(a,r,o,u,h,g,y,_,S){const C=Z3(u,g,y),P=X3(u,h),R=P*y,D=a[0].x===0||a[0].x===S||a[0].y===0||a[0].y===S;return r-R<r/4&&(r=R+r/4),Y3(a,D?r/2*_%r:(P/2+2*g)*y*_%r,r,C,o,R,D,!1,S)}function Y3(a,r,o,u,h,g,y,_,S){const C=g/2,P=K3(a);let R=0,D=r-o,B=[];for(let $=0;$<a.length-1;$++){const q=a[$],W=a[$+1],J=q.dist(W),ce=W.angleTo(q);for(;D+o<R+J;){D+=o;const ue=(D-R)/J,H=Mn(q.x,W.x,ue),se=Mn(q.y,W.y,ue);if(H>=0&&H<S&&se>=0&&se<S&&D-C>=0&&D+C<=P){const de=new Sc(H,se,0,ce,$);u&&!W3(a,de,g,u,h)||B.push(de)}}R+=J}return _||B.length||y||(B=Y3(a,R/2,o,u,h,g,y,!0,S)),B}function J3(a){let r=0,o=0;for(const y of a)r+=y.w*y.h,o=Math.max(o,y.w);a.sort((y,_)=>_.h-y.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),o),h:1/0}];let h=0,g=0;for(const y of a)for(let _=u.length-1;_>=0;_--){const S=u[_];if(!(y.w>S.w||y.h>S.h)){if(y.x=S.x,y.y=S.y,g=Math.max(g,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===S.w&&y.h===S.h){const C=u.pop();_<u.length&&(u[_]=C)}else y.h===S.h?(S.x+=y.w,S.w-=y.w):y.w===S.w?(S.y+=y.h,S.h-=y.h):(u.push({x:S.x+y.w,y:S.y,w:S.w-y.w,h:y.h}),S.y+=y.h,S.h-=y.h);break}}return{w:h,h:g,fill:r/(h*g)||0}}tn(Sc,"Anchor");const rh=1;class lg{static getImagePositionScale(r,o,u){if(o&&r&&r.options&&r.options.transform){const h=r.options.transform;return{x:h.a,y:h.d}}return{x:u,y:u}}constructor(r,o,u,h){this.paddedRect=r;const{pixelRatio:g,version:y,stretchX:_,stretchY:S,content:C,sdf:P,usvg:R}=o;this.pixelRatio=g,this.stretchX=_,this.stretchY=S,this.content=C,this.version=y,this.padding=u,this.sdf=P,this.usvg=R,this.scale=lg.getImagePositionScale(h,R,g)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function bx(a,r,o){const u=Fa.parse(a),h=function(g,y,_=[1,1]){return{x:0,y:0,w:(g.data?g.data.width:g.width*_[0])+2*y,h:(g.data?g.data.height:g.height*_[1])+2*y}}(r,o,[u.options.transform.a,u.options.transform.d]);return{bin:h,imagePosition:new lg(h,r,o,u),imageVariant:u}}class Q3{constructor(r,o,u){const h=new Map,g=new Map;this.haveRenderCallbacks=[];const y=[];this.addImages(r,h,rh,y),this.addImages(o,g,2,y);const{w:_,h:S}=J3(y),C=new Oo({width:_||1,height:S||1});for(const[P,R]of r.entries()){const D=h.get(P).paddedRect;Oo.copy(R.data,C,{x:0,y:0},{x:D.x+rh,y:D.y+rh},R.data,u,R.sdf)}for(const[P,R]of o.entries()){const D=g.get(P),B=D.paddedRect;let $=D.padding;const q=B.x+$,W=B.y+$,J=R.data.width,ce=R.data.height;$=$>1?$-1:$,Oo.copy(R.data,C,{x:0,y:0},{x:q,y:W},R.data,u),Oo.copy(R.data,C,{x:0,y:ce-$},{x:q,y:W-$},{width:J,height:$},u),Oo.copy(R.data,C,{x:0,y:0},{x:q,y:W+ce},{width:J,height:$},u),Oo.copy(R.data,C,{x:J-$,y:0},{x:q-$,y:W},{width:$,height:ce},u),Oo.copy(R.data,C,{x:0,y:0},{x:q+J,y:W},{width:$,height:ce},u),Oo.copy(R.data,C,{x:J-$,y:ce-$},{x:q-$,y:W-$},{width:$,height:$},u),Oo.copy(R.data,C,{x:0,y:ce-$},{x:q+J,y:W-$},{width:$,height:$},u),Oo.copy(R.data,C,{x:0,y:0},{x:q+J,y:W+ce},{width:$,height:$},u),Oo.copy(R.data,C,{x:J-$,y:0},{x:q-$,y:W+ce},{width:$,height:$},u)}this.lut=u,this.image=C,this.iconPositions=h,this.patternPositions=g}addImages(r,o,u,h){for(const[g,y]of r.entries()){const{bin:_,imagePosition:S,imageVariant:C}=bx(g,y,u);o.set(g,S),h.push(_),y.hasRenderCallback&&this.haveRenderCallbacks.push(C.id)}}patchUpdatedImages(r,o,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(h=>r.hasImage(h,u)),r.dispatchRenderCallbacks(this.haveRenderCallbacks,u);for(const h of r.getUpdatedImages(u)){for(const g of this.iconPositions.keys()){const y=Fa.parse(g);if(cs.isEqual(y.id,h)){const _=r.getImage(h,u);this.patchUpdatedImage(this.iconPositions.get(g),_,o)}}for(const g of this.patternPositions.keys()){const y=Fa.parse(g);if(cs.isEqual(y.id,h)){const _=r.getImage(h,u);this.patchUpdatedImage(this.patternPositions.get(g),_,o)}}}}patchUpdatedImage(r,o,u){if(!r||!o||r.version===o.version)return;r.version=o.version;const[h,g]=r.tl,y=r.sdf;if(this.lut||y){const _={width:o.data.width,height:o.data.height},S=new Oo(_);Oo.copy(o.data,S,{x:0,y:0},{x:0,y:0},_,this.lut,y),u.update(S,{position:{x:h,y:g}})}else u.update(o.data,{position:{x:h,y:g}})}}tn(lg,"ImagePosition"),tn(Q3,"ImageAtlas");const Mv=1e20;function ek(a,r,o,u,h,g,y,_,S){for(let C=r;C<r+u;C++)tk(a,o*g+C,g,h,y,_,S);for(let C=o;C<o+h;C++)tk(a,C*g+r,1,u,y,_,S)}function tk(a,r,o,u,h,g,y){g[0]=0,y[0]=-1e20,y[1]=Mv,h[0]=a[r];for(let _=1,S=0,C=0;_<u;_++){h[_]=a[r+_*o];const P=_*_;do{const R=g[S];C=(h[_]-h[R]+P-R*R)/(_-R)/2}while(C<=y[S]&&--S>-1);S++,g[S]=_,y[S]=C,y[S+1]=Mv}for(let _=0,S=0;_<u;_++){for(;y[S+1]<_;)S++;const C=g[S],P=_-C;a[r+_*o]=h[C]+P*P}}const Za=2,_x={none:0,ideographs:1,all:2};class Up{constructor(r,o,u){this.requestManager=r,this.localGlyphMode=o,this.localFontFamily=u,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(r,o){this.urls[o]=r}getGlyphs(r,o,u){const h=[],g=this.urls[o]||To.GLYPHS_URL;for(const y in r)for(const _ of r[y])h.push({stack:y,id:_});Ve(h,({stack:y,id:_},S)=>{let C=this.entries[y];C||(C=this.entries[y]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let P=C.glyphs[_];if(P!==void 0)return void S(null,{stack:y,id:_,glyph:P});if(P=this._tinySDF(C,y,_),P)return C.glyphs[_]=P,void S(null,{stack:y,id:_,glyph:P});const R=Math.floor(_/256);if(256*R>65535)return Zn("glyphs > 65535 not supported"),void S(null,{stack:y,id:_,glyph:P});if(C.ranges[R])return void S(null,{stack:y,id:_,glyph:P});let D=C.requests[R];D||(D=C.requests[R]=[],Up.loadGlyphRange(y,R,g,this.requestManager,(B,$)=>{if($){C.ascender=$.ascender,C.descender=$.descender;for(const q in $.glyphs)this._doesCharSupportLocalGlyph(+q)||(C.glyphs[+q]=$.glyphs[+q]);C.ranges[R]=!0}for(const q of D)q(B,$);delete C.requests[R]})),D.push((B,$)=>{B?S(B):$&&S(null,{stack:y,id:_,glyph:$.glyphs[_]||null})})},(y,_)=>{if(y)u(y);else if(_){const S={};for(const{stack:C,id:P,glyph:R}of _)S[C]===void 0&&(S[C]={}),S[C].glyphs===void 0&&(S[C].glyphs={}),S[C].glyphs[P]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics},S[C].ascender=this.entries[C].ascender,S[C].descender=this.entries[C].descender;u(null,S)}})}_doesCharSupportLocalGlyph(r){return this.localGlyphMode!==_x.none&&(this.localGlyphMode===_x.all?!!this.localFontFamily:!!this.localFontFamily&&(En["CJK Unified Ideographs"](r)||En["Hangul Syllables"](r)||En.Hiragana(r)||En.Katakana(r)||En["CJK Symbols and Punctuation"](r)||En["CJK Unified Ideographs Extension A"](r)||En["CJK Unified Ideographs Extension B"](r)||En.Osage(r)))}_tinySDF(r,o,u){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(u))return;let g=r.tinySDF;if(!g){let q="400";/bold/i.test(o)?q="900":/medium/i.test(o)?q="500":/light/i.test(o)&&(q="200"),g=r.tinySDF=new Up.TinySDF({fontFamily:h,fontWeight:q,fontSize:24*Za,buffer:3*Za,radius:8*Za}),g.fontWeight=q}if(this.localGlyphs[g.fontWeight][u])return this.localGlyphs[g.fontWeight][u];const y=String.fromCodePoint(u),{data:_,width:S,height:C,glyphWidth:P,glyphHeight:R,glyphLeft:D,glyphTop:B,glyphAdvance:$}=g.draw(y);return this.localGlyphs[g.fontWeight][u]={id:u,bitmap:new Cu({width:S,height:C},_),metrics:{width:P/Za,height:R/Za,left:D/Za,top:B/Za-27,advance:$/Za,localGlyph:!0}}}}Up.loadGlyphRange=function(a,r,o,u,h){const g=256*r,y=g+255,_=u.transformRequest(u.normalizeGlyphsURL(o).replace("{fontstack}",a).replace("{range}",`${g}-${y}`),ud.Glyphs);dd(_,(S,C)=>{if(S)h(S);else if(C){const P={},R=function(D){return new Av(D).readFields(yM,{})}(C);for(const D of R.glyphs)P[D.id]=D;h(null,{glyphs:P,ascender:R.ascender,descender:R.descender})}})},Up.TinySDF=class{constructor({fontSize:a=24,buffer:r=3,radius:o=8,cutoff:u=.25,fontFamily:h="sans-serif",fontWeight:g="normal",fontStyle:y="normal"}={}){this.buffer=r,this.cutoff=u,this.radius=o;const _=this.size=a+4*r,S=this._createCanvas(_),C=this.ctx=S.getContext("2d",{willReadFrequently:!0});C.font=`${y} ${g} ${a}px ${h}`,C.textBaseline="alphabetic",C.textAlign="left",C.fillStyle="black",this.gridOuter=new Float64Array(_*_),this.gridInner=new Float64Array(_*_),this.f=new Float64Array(_),this.z=new Float64Array(_+1),this.v=new Uint16Array(_)}_createCanvas(a){const r=document.createElement("canvas");return r.width=r.height=a,r}draw(a){const{width:r,actualBoundingBoxAscent:o,actualBoundingBoxDescent:u,actualBoundingBoxLeft:h,actualBoundingBoxRight:g}=this.ctx.measureText(a),y=Math.ceil(o),_=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-h))),S=Math.min(this.size-this.buffer,y+Math.ceil(u)),C=_+2*this.buffer,P=S+2*this.buffer,R=Math.max(C*P,0),D=new Uint8ClampedArray(R),B={data:D,width:C,height:P,glyphWidth:_,glyphHeight:S,glyphTop:y,glyphLeft:0,glyphAdvance:r};if(_===0||S===0)return B;const{ctx:$,buffer:q,gridInner:W,gridOuter:J}=this;$.clearRect(q,q,_,S),$.fillText(a,q,q+y);const ce=$.getImageData(q,q,_,S);J.fill(Mv,0,R),W.fill(0,0,R);for(let ue=0;ue<S;ue++)for(let H=0;H<_;H++){const se=ce.data[4*(ue*_+H)+3]/255;if(se===0)continue;const de=(ue+q)*C+H+q;if(se===1)J[de]=0,W[de]=Mv;else{const be=.5-se;J[de]=be>0?be*be:0,W[de]=be<0?be*be:0}}ek(J,0,0,C,P,C,this.f,this.v,this.z),ek(W,q,q,_,S,C,this.f,this.v,this.z);for(let ue=0;ue<R;ue++){const H=Math.sqrt(J[ue])-Math.sqrt(W[ue]);D[ue]=Math.round(255-255*(H/this.radius+this.cutoff))}return B}};const ih=rh;function nk(a,r){return a+r[1]-r[0]}function rk(a,r,o,u,h=1){const g=[],y=a.imagePrimary,_=y.pixelRatio,S=y.paddedRect.w-2*ih,C=y.paddedRect.h-2*ih,P=(a.right-a.left)*h,R=(a.bottom-a.top)*h,D=y.stretchX||[[0,S]],B=y.stretchY||[[0,C]],$=D.reduce(nk,0),q=B.reduce(nk,0),W=S-$,J=C-q;let ce=0,ue=$,H=0,se=q,de=0,be=W,Oe=0,Re=J;if(y.content&&u){const je=y.content;ce=Dv(D,0,je[0]),H=Dv(B,0,je[1]),ue=Dv(D,je[0],je[2]),se=Dv(B,je[1],je[3]),de=je[0]-ce,Oe=je[1]-H,be=je[2]-je[0]-ue,Re=je[3]-je[1]-se}const Be=(je,at,At,yt)=>{const Pt=Lv(je.stretch-ce,ue,P,a.left*h),Rt=Ov(je.fixed-de,be,je.stretch,$),ct=Lv(at.stretch-H,se,R,a.top*h),Tt=Ov(at.fixed-Oe,Re,at.stretch,q),ot=Lv(At.stretch-ce,ue,P,a.left*h),lt=Ov(At.fixed-de,be,At.stretch,$),Lt=Lv(yt.stretch-H,se,R,a.top*h),zt=Ov(yt.fixed-Oe,Re,yt.stretch,q),Sn=new Vt(Pt,ct),un=new Vt(ot,ct),Gt=new Vt(ot,Lt),Dt=new Vt(Pt,Lt),Vn=new Vt(Rt/_,Tt/_),ln=new Vt(lt/_,zt/_),hn=r*Math.PI/180;if(hn){const ar=Math.sin(hn),Dr=Math.cos(hn),si=[Dr,-ar,ar,Dr];Sn._matMult(si),un._matMult(si),Dt._matMult(si),Gt._matMult(si)}const Dn=je.stretch+je.fixed,Kn=At.stretch+At.fixed,Wn=at.stretch+at.fixed,sr=yt.stretch+yt.fixed,Qn=a.imageSecondary;return{tl:Sn,tr:un,bl:Dt,br:Gt,texPrimary:{x:y.paddedRect.x+ih+Dn,y:y.paddedRect.y+ih+Wn,w:Kn-Dn,h:sr-Wn},texSecondary:Qn?{x:Qn.paddedRect.x+ih+Dn,y:Qn.paddedRect.y+ih+Wn,w:Kn-Dn,h:sr-Wn}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Vn,pixelOffsetBR:ln,minFontScaleX:be/_/P,minFontScaleY:Re/_/R,isSDF:o}};if(u&&(y.stretchX||y.stretchY)){const je=ik(D,W,$),at=ik(B,J,q);for(let At=0;At<je.length-1;At++){const yt=je[At],Pt=je[At+1];for(let Rt=0;Rt<at.length-1;Rt++)g.push(Be(yt,at[Rt],Pt,at[Rt+1]))}}else g.push(Be({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:C+1}));return g}function Dv(a,r,o){let u=0;for(const h of a)u+=Math.max(r,Math.min(o,h[1]))-Math.max(r,Math.min(o,h[0]));return u}function ik(a,r,o){const u=[{fixed:-1,stretch:0}];for(const[h,g]of a){const y=u[u.length-1];u.push({fixed:h-y.stretch,stretch:y.stretch}),u.push({fixed:h-y.stretch,stretch:y.stretch+(g-h)})}return u.push({fixed:r+ih,stretch:o}),u}function Lv(a,r,o,u){return a/r*o+u}function Ov(a,r,o,u){return a-r*o/u}function TM(a,r,o,u){const h=r+a.positionedLines[u].lineOffset;return u===0?o+h/2:o+(h+(r+a.positionedLines[u-1].lineOffset))/2}function EM(a,r=1,o=!1){let u=1/0,h=1/0,g=-1/0,y=-1/0;const _=a[0];for(let B=0;B<_.length;B++){const $=_[B];(!B||$.x<u)&&(u=$.x),(!B||$.y<h)&&(h=$.y),(!B||$.x>g)&&(g=$.x),(!B||$.y>y)&&(y=$.y)}const S=Math.min(g-u,y-h);let C=S/2;const P=new Xh([],IM);if(S===0)return new Vt(u,h);for(let B=u;B<g;B+=S)for(let $=h;$<y;$+=S)P.push(new qp(B+C,$+C,C,a));let R=function(B){let $=0,q=0,W=0;const J=B[0];for(let ce=0,ue=J.length,H=ue-1;ce<ue;H=ce++){const se=J[ce],de=J[H],be=se.x*de.y-de.x*se.y;q+=(se.x+de.x)*be,W+=(se.y+de.y)*be,$+=3*be}return new qp(q/$,W/$,0,B)}(a),D=P.length;for(;P.length;){const B=P.pop();(B.d>R.d||!R.d)&&(R=B,o&&console.log("found best %d after %d probes",Math.round(1e4*B.d)/1e4,D)),B.max-R.d<=r||(C=B.h/2,P.push(new qp(B.p.x-C,B.p.y-C,C,a)),P.push(new qp(B.p.x+C,B.p.y-C,C,a)),P.push(new qp(B.p.x-C,B.p.y+C,C,a)),P.push(new qp(B.p.x+C,B.p.y+C,C,a)),D+=4)}return o&&(console.log(`num probes: ${D}`),console.log(`best distance: ${R.d}`)),R.p}function IM(a,r){return r.max-a.max}class qp{constructor(r,o,u,h){this.p=new Vt(r,o),this.h=u,this.d=function(g,y){let _=!1,S=1/0;for(let C=0;C<y.length;C++){const P=y[C];for(let R=0,D=P.length,B=D-1;R<D;B=R++){const $=P[R],q=P[B];$.y>g.y!=q.y>g.y&&g.x<(q.x-$.x)*(g.y-$.y)/(q.y-$.y)+$.x&&(_=!_),S=Math.min(S,Dp(g,$,q))}}return(_?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}}const PM=Object.keys,xx=Number.POSITIVE_INFINITY,AM=Math.sqrt(2);function ok(a,[r,o]){let u=0,h=0;if(o===xx){r<0&&(r=0);const g=r/AM;switch(a){case"top-right":case"top-left":h=g-7;break;case"bottom-right":case"bottom-left":h=7-g;break;case"bottom":h=7-r;break;case"top":h=r-7}switch(a){case"top-right":case"bottom-right":u=-g;break;case"top-left":case"bottom-left":u=g;break;case"left":u=r;break;case"right":u=-r}}else{switch(r=Math.abs(r),o=Math.abs(o),a){case"top-right":case"top-left":case"top":h=o-7;break;case"bottom-right":case"bottom-left":case"bottom":h=7-o}switch(a){case"top-right":case"bottom-right":case"right":u=-r;break;case"top-left":case"bottom-left":case"left":u=r}}return[u,h]}function zv(a,r,o,u,h,g,y,_,S){if(!r||!r.usvg)return;const C=H3(u),P=H3(h),R=g!=="both"&&g!=="width"||!U3(u)?1:P.width/C.width,D=g!=="both"&&g!=="height"||!q3(u)?1:P.height/C.height;o.scaleSelf(R,D);const B=o.toString();y.set(B,o),_.set(B,r);const{imagePosition:$}=bx(B,r,rh);S.set(B,$)}function sk(a,r,o,u,h,g,y,_,S){if(!a)return;const C=function(P,R,D,B,$,q){if(P.kind==="camera")return P.maxSize;if(P.kind==="composite"){const W=R.possiblyEvaluate(new Ur(P.maxZoom,{worldview:q}),D).evaluate($,{},D),J=R.possiblyEvaluate(new Ur(P.minZoom,{worldview:q}),D).evaluate($,{},D);return Math.max(W,J)}return R.possiblyEvaluate(new Ur(B,{worldview:q})).evaluate($,{},D)}(r,o,u,h,g,S);return a.scaleSelf(C*_*y)}function ak(a,r,o,u,h,g,y,_,S){return{iconPrimary:sk(a.getPrimary(),r,o,u,h,g,y,_,S),iconSecondary:sk(a.getSecondary(),r,o,u,h,g,y,_,S)}}function RM(a,r,o){if(!r)return;const u=o.get(a.toString()),h=o.get(r.toString());h&&(u.paddedRect.w===h.paddedRect.w&&u.paddedRect.h===h.paddedRect.h||Zn(`Mismatch in icon variant sizes: ${a.toString()} and ${r.toString()}`),u.usvg!==h.usvg&&Zn(`Mismatch in icon variant image types: ${a.id} and ${r.id}`))}function lk(a,r,o,u){if(!a)return;const h=r.get(o.toString());if(a.imagePrimary=h,u){const g=r.get(u.toString());a.imageSecondary=g}}function MM(a,r){for(const o in a.horizontal)ck(a.horizontal[o],r);ck(a.vertical,r)}function ck(a,r){if(a){for(const o of a.positionedLines)for(const u of o.positionedGlyphs)if(u.image!==null){const h=u.image.toString();u.rect=r.get(h).paddedRect}}}function wx(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function DM(a,r,o,u,h,g,y,_,S){const C=Sx(g.horizontal)||g.vertical,P=o.get("icon-text-fit-padding").evaluate(u,{},h);let R,D=r;return r&&S!=="none"&&(a.allowVerticalPlacement&&g.vertical&&(R=j3(r,g.vertical,S,P,_,y)),C&&(D=j3(r,C,S,P,_,y))),{defaultShapedIcon:D,verticallyShapedIcon:R}}function LM(a,r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W,J,ce,ue){let H=y.textMaxSize.evaluate(r,{},D);H===void 0?H=_*y.textScaleFactor:H*=y.textScaleFactor;const se=a.layers[0].layout,de=Sx(o.horizontal)||o.vertical,be=B.name==="globe",Oe=wo,Re=a.tilePixelRatio*H/Oe,Be=(Rt=a.overscaling,a.zoom>18&&Rt>2&&(Rt>>=1),Math.max(Ut/(512*Rt),1)*se.get("symbol-spacing")),je=se.get("text-padding")*a.tilePixelRatio,at=se.get("icon-padding")*a.tilePixelRatio,At=Cr(se.get("text-max-angle")),yt=se.get("icon-rotation-alignment")==="map"&&ue!=="point",Pt=Be/2;var Rt;a.hasAnyIconTextFit===!1&&W!=="none"&&(a.hasAnyIconTextFit=!0);const ct=r.properties?+r.properties[ur]:null,Tt=ct&&a.elevationFeatureIdToIndex?a.elevationFeatureIdToIndex.get(ct):65535,ot=(lt,Lt,zt)=>{if(Lt.x<0||Lt.x>=Ut||Lt.y<0||Lt.y>=Ut)return;let Sn=null;if(be){const{x:un,y:Gt,z:Dt}=B.projectTilePoint(Lt.x,Lt.y,zt);Sn={anchor:new Sc(un,Gt,Dt,0,void 0),up:B.upVector(zt,Lt.x,Lt.y)}}(function(un,Gt,Dt,Vn,ln,hn,Dn,Kn,Wn,sr,Qn,ar,Dr,si,ye,_e,dt,Ft,Wt,Ht,sn,Rn,dr,hr,er,Fr,ni,pr,Ii){const ai=un.addToLineVertexArray(Gt,Vn);let Lr,ji,hi,ri,li,Vr,rr,qr=0,Pi=0,Pn=0,br=0,pi=-1,Fi=-1;const bi={};let no=pd("");const Kr=Dt?Dt.anchor:Gt,Ji=pr!=="none";let ps=0,zo=0;if(Wn._unevaluatedLayout.getValue("text-radial-offset")===void 0){const ro=Wn.layout.get("text-offset").evaluate(sn,{},er);ps=ro[0]*wo,zo=ro[1]*wo}else ps=Wn.layout.get("text-radial-offset").evaluate(sn,{},er)*wo,zo=xx;if(un.allowVerticalPlacement&&ln.vertical){const ro=ln.vertical;if(ye)Vr=Cx(ro),Kn&&(rr=Cx(Kn));else{const co=Wn.layout.get("text-rotate").evaluate(sn,{},er)+90;hi=Bv(sr,Kr,Gt,Qn,ar,Dr,ro,si,co,_e),Kn&&(ri=Bv(sr,Kr,Gt,Qn,ar,Dr,Kn,Ft,co))}}if(hn){const ro=un.iconSizeData,co=Wn.layout.get("icon-rotate").evaluate(sn,{},er),Bo=rk(hn,co,dr,Ji,Rn.iconScaleFactor),Qo=Kn?rk(Kn,co,dr,Ji,Rn.iconScaleFactor):void 0;ji=Bv(sr,Kr,Gt,Qn,ar,Dr,hn,Ft,co,null),qr=4*Bo.length;let Ho=null;ro.kind==="source"?(Ho=[Ml*Wn.layout.get("icon-size").evaluate(sn,{},er)*Rn.iconScaleFactor],Ho[0]>Tu&&Zn(`${un.layerIds[0]}: Value for "icon-size" is >= ${cg}. Reduce your "icon-size".`)):ro.kind==="composite"&&(Ho=[Ml*Rn.compositeIconSizes[0].evaluate(sn,{},er)*Rn.iconScaleFactor,Ml*Rn.compositeIconSizes[1].evaluate(sn,{},er)*Rn.iconScaleFactor],(Ho[0]>Tu||Ho[1]>Tu)&&Zn(`${un.layerIds[0]}: Value for "icon-size" is >= ${cg}. Reduce your "icon-size".`)),un.addSymbols(un.icon,Bo,Ho,Ht,Wt,sn,void 0,Dt,Gt,ai.lineStartIndex,ai.lineLength,-1,hr,er,Fr,ni),pi=un.icon.placedSymbolArray.length-1,Qo&&(Pi=4*Qo.length,un.addSymbols(un.icon,Qo,Ho,Ht,Wt,sn,Is.vertical,Dt,Gt,ai.lineStartIndex,ai.lineLength,-1,hr,er,Fr,ni),Fi=un.icon.placedSymbolArray.length-1)}for(const ro in ln.horizontal){const co=ro,Bo=ln.horizontal[co];Lr||(no=pd(Bo.text),ye?li=Cx(Bo):Lr=Bv(sr,Kr,Gt,Qn,ar,Dr,Bo,si,Wn.layout.get("text-rotate").evaluate(sn,{},er),_e));const Qo=Bo.positionedLines.length===1;if(Pn+=uk(un,Dt,Gt,Bo,Dn,Wn,ye,sn,_e,ai,ln.vertical?Is.horizontal:Is.horizontalOnly,Qo?PM(ln.horizontal):[co],bi,pi,Rn,hr,er,Fr),Qo)break}ln.vertical&&(br+=uk(un,Dt,Gt,ln.vertical,Dn,Wn,ye,sn,_e,ai,Is.vertical,["vertical"],bi,Fi,Rn,hr,er,Fr));let Ao=-1;const fs=(ro,co)=>ro?Math.max(ro,co):co;Ao=fs(li,Ao),Ao=fs(Vr,Ao),Ao=fs(rr,Ao);const Dl=Ao>-1?1:0;un.glyphOffsetArray.length>=65535&&Zn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),sn.sortKey!==void 0&&un.addToSortKeyRanges(un.symbolInstances.length,sn.sortKey),un.symbolInstances.emplaceBack(Gt.x,Gt.y,Kr.x,Kr.y,Kr.z,bi.right>=0?bi.right:-1,bi.center>=0?bi.center:-1,bi.left>=0?bi.left:-1,bi.vertical>=0?bi.vertical:-1,pi,Fi,no,Lr!==void 0?Lr:un.collisionBoxArray.length,Lr!==void 0?Lr+1:un.collisionBoxArray.length,hi!==void 0?hi:un.collisionBoxArray.length,hi!==void 0?hi+1:un.collisionBoxArray.length,ji!==void 0?ji:un.collisionBoxArray.length,ji!==void 0?ji+1:un.collisionBoxArray.length,ri||un.collisionBoxArray.length,ri?ri+1:un.collisionBoxArray.length,Qn,Pn,br,qr,Pi,Dl,0,ps,zo,Ao,0,Ji?1:0,Ii)})(a,Lt,Sn,lt,o,u,g,h,a.layers[0],a.collisionBoxArray,r.index,r.sourceLayerIndex,a.index,je,ce,C,0,at,yt,J,r,y,P,R,D,$,q,W,Tt)};if(ue==="line")for(const lt of Tv(r.geometry,0,0,Ut,Ut)){const Lt=kM(lt,Be,At,o.vertical||de,u,Oe,Re,a.overscaling,Ut);for(const zt of Lt)de&&OM(a,de.text,Pt,zt)||ot(lt,zt,D)}else if(ue==="line-center"){for(const lt of r.geometry)if(lt.length>1){const Lt=CM(lt,At,o.vertical||de,u,Oe,Re);Lt&&ot(lt,Lt,D)}}else if(r.type==="Polygon")for(const lt of _v(r.geometry,0)){const Lt=EM(lt,16);ot(lt[0],new Sc(Lt.x,Lt.y,0,0,void 0),D)}else if(r.type==="LineString")for(const lt of r.geometry)ot(lt,new Sc(lt[0].x,lt[0].y,0,0,void 0),D);else if(r.type==="Point")for(const lt of r.geometry)for(const Lt of lt)ot([Lt],new Sc(Lt.x,Lt.y,0,0,void 0),D)}const cg=255,Tu=cg*Ml;function uk(a,r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W,J){const ce=function(se,de,be,Oe,Re,Be,je,at){const At=[];if(de.positionedLines.length===0)return At;const yt=Oe.layout.get("text-rotate").evaluate(Be,{})*Math.PI/180,Pt=function(lt){const Lt=lt[0],zt=lt[1],Sn=Lt*zt;return Sn>0?[Lt,-zt]:Sn<0?[-Lt,zt]:Lt===0?[zt,Lt]:[zt,-Lt]}(be);let Rt=Math.abs(de.top-de.bottom);for(const lt of de.positionedLines)Rt-=lt.lineOffset;const ct=de.positionedLines.length,Tt=Rt/ct;let ot=de.top-be[1];for(let lt=0;lt<ct;++lt){const Lt=de.positionedLines[lt];ot=TM(de,Tt,ot,lt);for(const zt of Lt.positionedGlyphs){if(!zt.rect)continue;const Sn=zt.rect||{};let un=_M+1,Gt=!0,Dt=1,Vn=0;if(zt.image){const sn=je.get(zt.image.toString());if(!sn)continue;if(sn.sdf){Zn("SDF images are not supported in formatted text and will be ignored.");continue}Gt=!1,Dt=sn.pixelRatio,un=rh/Dt}const ln=(Re||at)&&zt.vertical,hn=zt.metrics.advance*zt.scale/2,Dn=zt.metrics,Kn=zt.rect;if(Kn===null)continue;at&&de.verticalizable&&(Vn=zt.image?hn-zt.metrics.width*zt.scale/2:0);const Wn=Re?[zt.x+hn,zt.y]:[0,0];let sr=[0,0],Qn=[0,0],ar=!1;Re||(ln?(Qn=[zt.x+hn+Pt[0],zt.y+Pt[1]-Vn],ar=!0):sr=[zt.x+hn+be[0],zt.y+be[1]-Vn]);const Dr=Kn.w*zt.scale/(Dt*(zt.localGlyph?Za:1)),si=Kn.h*zt.scale/(Dt*(zt.localGlyph?Za:1));let ye,_e,dt,Ft;if(ln){const sn=zt.y-ot,Rn=new Vt(-hn,hn-sn),dr=-Math.PI/2,hr=new Vt(...Qn);ye=new Vt(-hn+sr[0],sr[1]),ye._rotateAround(dr,Rn)._add(hr),ye.x+=-sn+hn,ye.y-=(Dn.left-un)*zt.scale;const er=zt.image?Dn.advance*zt.scale:wo*zt.scale,Fr=String.fromCodePoint(zt.glyph);fM(Fr)?ye.x+=(1-un)*zt.scale:mM(Fr)?ye.x+=er-Dn.height*zt.scale+(-un-1)*zt.scale:ye.x+=zt.image||Dn.width+2*un===Kn.w&&Dn.height+2*un===Kn.h?(er-si)/2:(er-(Dn.height+2*un)*zt.scale)/2,_e=new Vt(ye.x,ye.y-Dr),dt=new Vt(ye.x+si,ye.y),Ft=new Vt(ye.x+si,ye.y-Dr)}else{const sn=(Dn.left-un)*zt.scale-hn+sr[0],Rn=(-Dn.top-un)*zt.scale+sr[1],dr=sn+Dr,hr=Rn+si;ye=new Vt(sn,Rn),_e=new Vt(dr,Rn),dt=new Vt(sn,hr),Ft=new Vt(dr,hr)}if(yt){let sn;sn=Re?new Vt(0,0):ar?new Vt(Pt[0],Pt[1]):new Vt(be[0],be[1]),ye._rotateAround(yt,sn),_e._rotateAround(yt,sn),dt._rotateAround(yt,sn),Ft._rotateAround(yt,sn)}const Wt=new Vt(0,0),Ht=new Vt(0,0);At.push({tl:ye,tr:_e,bl:dt,br:Ft,texPrimary:Sn,texSecondary:void 0,writingMode:de.writingMode,glyphOffset:Wn,sectionIndex:zt.sectionIndex,isSDF:Gt,pixelOffsetTL:Wt,pixelOffsetBR:Ht,minFontScaleX:0,minFontScaleY:0})}}return At}(0,u,S,g,y,_,h,a.allowVerticalPlacement),ue=a.textSizeData;let H=null;ue.kind==="source"?(H=[Ml*g.layout.get("text-size").evaluate(_,{},W)*$.textScaleFactor],H[0]>Tu&&Zn(`${a.layerIds[0]}: Value for "text-size" is >= ${cg}. Reduce your "text-size".`)):ue.kind==="composite"&&(H=[Ml*$.compositeTextSizes[0].evaluate(_,{},W)*$.textScaleFactor,Ml*$.compositeTextSizes[1].evaluate(_,{},W)*$.textScaleFactor],(H[0]>Tu||H[1]>Tu)&&Zn(`${a.layerIds[0]}: Value for "text-size" is >= ${cg}. Reduce your "text-size".`)),a.addSymbols(a.text,ce,H,S,y,_,P,r,o,C.lineStartIndex,C.lineLength,B,q,W,J,!1);for(const se of R)D[se]=a.text.placedSymbolArray.length-1;return 4*ce.length}function Sx(a){for(const r in a)return a[r];return null}function Bv(a,r,o,u,h,g,y,_,S,C){let P=y.top,R=y.bottom,D=y.left,B=y.right;if(V3(y)&&y.collisionPadding){const $=y.collisionPadding;D-=$[0],P-=$[1],B+=$[2],R+=$[3]}if(S){const $=new Vt(D,P),q=new Vt(B,P),W=new Vt(D,R),J=new Vt(B,R),ce=Cr(S);let ue=new Vt(0,0);C&&(ue=new Vt(C[0],C[1])),$._rotateAround(ce,ue),q._rotateAround(ce,ue),W._rotateAround(ce,ue),J._rotateAround(ce,ue),D=Math.min($.x,q.x,W.x,J.x),B=Math.max($.x,q.x,W.x,J.x),P=Math.min($.y,q.y,W.y,J.y),R=Math.max($.y,q.y,W.y,J.y)}return a.emplaceBack(r.x,r.y,r.z,o.x,o.y,D,P,B,R,_,u,h,g),a.length-1}function Cx(a){V3(a)&&a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const r=a.bottom-a.top;return r>0?Math.max(10,r):null}function OM(a,r,o,u){const h=a.compareText;if(r in h){const g=h[r];for(let y=g.length-1;y>=0;y--)if(u.dist(g[y])<o)return!0}else h[r]=[];return h[r].push(u),!1}function dk(a,r){const o=a.fovAboveCenter,u=a.elevation?a.elevation.getMinElevationBelowMSL()*r:0,h=(a._camera.position[2]*a.worldSize-u)/Math.cos(a._pitch),g=Math.sin(o)*h/Math.sin(Math.max(Math.PI/2-a._pitch-o,.01));let y=Math.sin(a._pitch)*g+h;const _=h*(1/a._horizonShift);if(!a.elevation||a.elevation.exaggeration()===0){let S=Math.max(a.zoom-17,0);a.isOrthographic&&(S/=10),y*=1+S}return Math.min(1.01*y,_)}function ug(a,r){if(!r.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:r};const o=Math.pow(2,-a.z),u=a.x*o,h=(a.x+1)*o,g=a.y*o,y=(a.y+1)*o,_=De(u),S=De(h),C=Ze(g),P=Ze(y),R=r.project(_,C),D=r.project(S,C),B=r.project(S,P),$=r.project(_,P);let q=Math.min(R.x,D.x,B.x,$.x),W=Math.min(R.y,D.y,B.y,$.y),J=Math.max(R.x,D.x,B.x,$.x),ce=Math.max(R.y,D.y,B.y,$.y);const ue=o/16;function H(de,be,Oe,Re,Be,je){const at=(Oe+Be)/2,At=(Re+je)/2,yt=r.project(De(at),Ze(At)),Pt=Math.max(0,q-yt.x,W-yt.y,yt.x-J,yt.y-ce);q=Math.min(q,yt.x),J=Math.max(J,yt.x),W=Math.min(W,yt.y),ce=Math.max(ce,yt.y),Pt>ue&&(H(de,yt,Oe,Re,at,At),H(yt,be,at,At,Be,je))}H(R,D,u,g,h,g),H(D,B,h,g,h,y),H(B,$,h,y,u,y),H($,R,u,y,u,g),q-=ue,W-=ue,J+=ue,ce+=ue;const se=1/Math.max(J-q,ce-W);return{scale:se,x:q*se,y:W*se,x2:J*se,y2:ce*se,projection:r}}function hk(a,{x:r,y:o},u=0){return new Vt(((r-u)*a.scale-a.x)*Ut,(o*a.scale-a.y)*Ut)}const zM=oe(new Float32Array(16));class Eu{constructor(r){this.spec=r,this.name=r.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(r,o){return{x:0,y:0,z:0}}unproject(r,o){return new ae(0,0)}projectTilePoint(r,o,u){return{x:r,y:o,z:0}}locationPoint(r,o,u,h=!0){return r._coordinatePoint(r.locationCoordinate(o,u),h)}pixelsPerMeter(r,o){return Ae(1,r)*o}pixelSpaceConversion(r,o,u){return 1}farthestPixelDistance(r){return dk(r,r.pixelsPerMeter)}pointCoordinate(r,o,u,h){const g=r.horizonLineFromTop(!1),y=new Vt(o,Math.max(g,u));return r.rayIntersectionCoordinate(r.pointRayIntersection(y,h))}pointCoordinate3D(r,o,u){const h=new Vt(o,u);if(r.elevation)return r.elevation.pointCoordinate(h);{const g=this.pointCoordinate(r,h.x,h.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(r,o){if(r.elevation&&r.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(r,o.x,o.y);const u=r.horizonLineFromTop();return o.y<u}createInversionMatrix(r,o){return zM}createTileMatrix(r,o,u){let h,g,y;const _=u.canonical,S=oe(new Float64Array(16));if(this.isReprojectedInTileSpace){const C=ug(_,this);h=1,g=C.x+u.wrap*C.scale,y=C.y,te(S,S,[h/C.scale,h/C.scale,r.pixelsPerMeter/o])}else h=o/r.zoomScale(_.z),g=(_.x+Math.pow(2,_.z)*u.wrap)*h,y=_.y*h;return ne(S,S,[g,y,0]),te(S,S,[h/Ut,h/Ut,1]),S}upVector(r,o,u){return[0,0,1]}upVectorScale(r,o,u){return{metersToTile:1}}}class BM extends Eu{constructor(r){super(r),this.range=[4,7],this.center=r.center||[-96,37.5];const[o,u]=this.parallels=r.parallels||[29.5,45.5],h=Math.sin(Cr(o));this.n=(h+Math.sin(Cr(u)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(r,o){const{n:u,c:h,r0:g}=this,y=Cr(r-this.center[0]),_=Cr(o),S=Math.sqrt(h-2*u*Math.sin(_))/u;return{x:S*Math.sin(y*u),y:S*Math.cos(y*u)-g,z:0}}unproject(r,o){const{n:u,c:h,r0:g}=this,y=g+o;let _=Math.atan2(r,Math.abs(y))*Math.sign(y);y*u<0&&(_-=Math.PI*Math.sign(r)*Math.sign(y));const S=Cr(this.center[0])*u;_=et(_,-Math.PI-S,Math.PI-S);const C=Te(rt(_/u)+this.center[0],-180,180),P=Math.asin(Te((h-(r*r+y*y)*u*u)/(2*u),-1,1)),R=Te(rt(P),-85.051129,ht);return new ae(C,R)}}const dg=1.340264,hg=-.081106,pg=893e-6,fg=.003796,Fv=Math.sqrt(3)/2;class FM extends Eu{project(r,o){o=o/180*Math.PI,r=r/180*Math.PI;const u=Math.asin(Fv*Math.sin(o)),h=u*u,g=h*h*h;return{x:.5*(r*Math.cos(u)/(Fv*(dg+3*hg*h+g*(7*pg+9*fg*h)))/Math.PI+.5),y:1-.5*(u*(dg+hg*h+g*(pg+fg*h))/Math.PI+1),z:0}}unproject(r,o){r=(2*r-.5)*Math.PI;let u=o=(2*(1-o)-1)*Math.PI,h=u*u,g=h*h*h;for(let P,R,D,B=0;B<12&&(R=u*(dg+hg*h+g*(pg+fg*h))-o,D=dg+3*hg*h+g*(7*pg+9*fg*h),P=R/D,u=Te(u-P,-Math.PI/3,Math.PI/3),h=u*u,g=h*h*h,!(Math.abs(P)<1e-12));++B);const y=Fv*r*(dg+3*hg*h+g*(7*pg+9*fg*h))/Math.cos(u),_=Math.asin(Math.sin(u)/Fv),S=Te(180*y/Math.PI,-180,180),C=Te(180*_/Math.PI,-85.051129,ht);return new ae(S,C)}}class $M extends Eu{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0}project(r,o){return{x:.5+r/360,y:.5-o/360,z:0}}unproject(r,o){const u=360*(r-.5),h=Te(360*(.5-o),-85.051129,ht);return new ae(u,h)}}const Hp=Math.PI/2;function $v(a){return Math.tan((Hp+a)/2)}class NM extends Eu{constructor(r){super(r),this.center=r.center||[0,30];const[o,u]=this.parallels=r.parallels||[30,30];let h=Cr(o),g=Cr(u);this.southernCenter=h+g<0,this.southernCenter&&(h=-h,g=-g);const y=Math.cos(h),_=$v(h);this.n=h===g?Math.sin(h):Math.log(y/Math.cos(g))/Math.log($v(g)/_),this.f=y*Math.pow($v(h),this.n)/this.n}project(r,o){o=Cr(o),this.southernCenter&&(o=-o),r=Cr(r-this.center[0]);const u=1e-6,{n:h,f:g}=this;g>0?o<-Hp+u&&(o=-Hp+u):o>Hp-u&&(o=Hp-u);const y=g/Math.pow($v(o),h);let _=y*Math.sin(h*r),S=g-y*Math.cos(h*r);return _=.5*(_/Math.PI+.5),S=.5*(S/Math.PI+.5),{x:_,y:this.southernCenter?S:1-S,z:0}}unproject(r,o){r=(2*r-.5)*Math.PI,this.southernCenter&&(o=1-o),o=(2*(1-o)-.5)*Math.PI;const{n:u,f:h}=this,g=h-o,y=Math.sign(g),_=Math.sign(u)*Math.sqrt(r*r+g*g);let S=Math.atan2(r,Math.abs(g))*y;g*u<0&&(S-=Math.PI*Math.sign(r)*y);const C=Te(rt(S/u)+this.center[0],-180,180),P=Te(rt(2*Math.atan(Math.pow(h/_,1/u))-Hp),-85.051129,ht);return new ae(C,this.southernCenter?-P:P)}}class pk extends Eu{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(r,o){return{x:ke(r),y:Se(o),z:0}}unproject(r,o){const u=De(r),h=Ze(o);return new ae(u,h)}}const fk=Cr(ht);class VM extends Eu{project(r,o){const u=(o=Cr(o))*o,h=u*u;return{x:.5*((r=Cr(r))*(.8707-.131979*u+h*(h*(.003971*u-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(o*(1.007226+u*(.015085+h*(.028874*u-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(r,o){r=(2*r-.5)*Math.PI;let u=o=(2*(1-o)-1)*Math.PI,h=25,g=0,y=u*u;do{y=u*u;const C=y*y;g=(u*(1.007226+y*(.015085+C*(.028874*y-.044475-.005916*C)))-o)/(1.007226+y*(.045255+C*(.259866*y-.311325-.005916*11*C))),u=Te(u-g,-fk,fk)}while(Math.abs(g)>1e-6&&--h>0);y=u*u;const _=Te(rt(r/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),S=rt(u);return new ae(_,S)}}const mk=Cr(ht);class jM extends Eu{project(r,o){o=Cr(o),r=Cr(r);const u=Math.cos(o),h=2/Math.PI,g=Math.acos(u*Math.cos(r/2)),y=Math.sin(g)/g,_=.5*(r*h+2*u*Math.sin(r/2)/y)||0,S=.5*(o+Math.sin(o)/y)||0;return{x:.5*(_/Math.PI+.5),y:1-.5*(S/Math.PI+1),z:0}}unproject(r,o){let u=r=(2*r-.5)*Math.PI,h=o=(2*(1-o)-1)*Math.PI,g=25;const y=1e-6;let _=0,S=0;do{const C=Math.cos(h),P=Math.sin(h),R=2*P*C,D=P*P,B=C*C,$=Math.cos(u/2),q=Math.sin(u/2),W=2*$*q,J=q*q,ce=1-B*$*$,ue=ce?1/ce:0,H=ce?Math.acos(C*$)*Math.sqrt(1/ce):0,se=.5*(2*H*C*q+2*u/Math.PI)-r,de=.5*(H*P+h)-o,be=.5*ue*(B*J+H*C*$*D)+1/Math.PI,Oe=ue*(W*R/4-H*P*q),Re=.125*ue*(R*q-H*P*B*W),Be=.5*ue*(D*$+H*J*C)+.5,je=Oe*Re-Be*be;_=(de*Oe-se*Be)/je,S=(se*Re-de*be)/je,u=Te(u-_,-Math.PI,Math.PI),h=Te(h-S,-mk,mk)}while((Math.abs(_)>y||Math.abs(S)>y)&&--g>0);return new ae(rt(u),rt(h))}}class gk extends Eu{constructor(r){super(r),this.center=r.center||[0,0],this.parallels=r.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Cr(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(r,o){const{scale:u,cosPhi:h}=this;return{x:Cr(r)*h*u+.5,y:-Math.sin(Cr(o))/h*u+.5,z:0}}unproject(r,o){const{scale:u,cosPhi:h}=this,g=-(o-.5)/u,y=Te(rt((r-.5)/u)/h,-180,180),_=Math.asin(Te(g*h,-1,1)),S=Te(rt(_),-85.051129,ht);return new ae(y,S)}}class UM extends pk{constructor(r){super(r),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(r,o,u){const h=Um(r,o,u);return cn(h,h,yv(Al(u))),{x:h[0],y:h[1],z:h[2]}}locationPoint(r,o,u){const h=G(o.lat,o.lng),g=pn([],h),y=u?r._centerAltitude+u:r.elevation?r.elevation.getAtPointOrZero(r.locationCoordinate(o),r._centerAltitude):r._centerAltitude;ir(h,h,g,Ae(1,0)*Ut*y);const _=oe(new Float64Array(16));return me(_,r.pixelMatrix,r.globeMatrix),cn(h,h,_),new Vt(h[0],h[1])}pixelsPerMeter(r,o){return Ae(1,0)*o}pixelSpaceConversion(r,o,u){const h=Ae(1,r)*o,g=Mn(Ae(1,45)*o,h,u);return this.pixelsPerMeter(r,o)/g}createTileMatrix(r,o,u){const h=V1(Al(u.canonical));return me(new Float64Array(16),r.globeMatrix,h)}createInversionMatrix(r,o){const{center:u}=r,h=yv(Al(o));return ze(h,h,Cr(u.lng)),re(h,h,Cr(u.lat)),te(h,h,[r._pixelsPerMercatorPixel,r._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(r,o,u,h){return JS(r,o,u,!0)||new Fe(0,0)}pointCoordinate3D(r,o,u){const h=this.pointCoordinate(r,o,u,0);return[h.x,h.y,h.z]}isPointAboveHorizon(r,o){return!JS(r,o.x,o.y,!1)}farthestPixelDistance(r){const o=function(h,g){const y=h.cameraToCenterDistance,_=h._centerAltitude*g,S=h._camera,C=h._camera.forward(),P=Qt([],In([],C,-y),[0,0,_]),R=h.worldSize/(2*Math.PI),D=[0,0,-R],B=h.width/h.height,$=Math.tan(h.fovAboveCenter),q=In([],S.up(),$),W=In([],S.right(),$*B),J=pn([],Qt([],Qt([],C,q),W)),ce=[];let ue;if(new ui(P,J).closestPointOnSphere(D,R,ce)){const H=Qt([],ce,D),se=qe([],H,P);ue=Math.cos(h.fovAboveCenter)*ut(se)}else{const H=qe([],P,D),se=qe([],D,P);pn(se,se);const de=ut(H)-R;ue=Math.sqrt(de*(de+2*R));const be=Math.acos(ue/(R+de))-Math.acos(kn(C,se));ue*=Math.cos(be)}return 1.01*ue}(r,this.pixelsPerMeter(r.center.lat,r.worldSize)),u=Su(r.zoom);if(u>0){const h=dk(r,Ae(1,r.center.lat)*r.worldSize),g=r.worldSize/(2*Math.PI),y=Math.max(r.width,r.height)/r.worldSize*Math.PI;return Mn(o,h+g*(1-Math.cos(y)),Math.pow(u,10))}return o}upVector(r,o,u){return Um(o,u,r,1)}upVectorScale(r){return{metersToTile:fv(gv(Al(r)))}}}function yk(a){const r=a.parallels,o=!!r&&Math.abs(r[0]+r[1])<.01;switch(a.name){case"mercator":return new pk(a);case"equirectangular":return new $M(a);case"naturalEarth":return new VM(a);case"equalEarth":return new FM(a);case"winkelTripel":return new jM(a);case"albers":return o?new gk(a):new BM(a);case"lambertConformalConic":return o?new gk(a):new NM(a);case"globe":return new UM(a)}throw new Error(`Invalid projection name: ${a.name}`)}const qM=nr.VectorTileFeature.types,HM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Nv(a,r,o,u,h,g,y,_,S,C,P,R,D){const B=_?Math.min(Tu,Math.round(_[0])):0,$=_?Math.min(Tu,Math.round(_[1])):0;a.emplaceBack(r,o,Math.round(32*u),Math.round(32*h),g,y,(B<<1)+(S?1:0),$,16*C,16*P,256*R,256*D)}function Vv(a,r,o){a.emplaceBack(r,o)}function jv(a,r,o,u,h,g,y){a.emplaceBack(r,o,u,h,g,y)}const Uv=(a,r,o,u)=>{for(let h=0;h<r;h++)a.emplaceBack(o[0],o[1],o[2],u[0],u[1],u[2])};function qv(a,r,o,u,h){a.emplaceBack(r,o,u,h),a.emplaceBack(r,o,u,h),a.emplaceBack(r,o,u,h),a.emplaceBack(r,o,u,h)}function GM(a){for(const r of a.sections)if(A1(r.text))return!0;return!1}class kx{constructor(r){this.layoutVertexArray=new fu,this.indexArray=new Io,this.programConfigurations=r,this.segments=new zi,this.dynamicLayoutVertexArray=new Eo,this.opacityVertexArray=new gu,this.placedSymbolArray=new ev,this.iconTransitioningVertexArray=new kl,this.globeExtVertexArray=new mu,this.zOffsetVertexArray=new Sl,this.orientationVertexArray=new Mm}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(r,o,u,h,g){this.isEmpty()||(u&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,iM.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,sM.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,HM,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=r.createVertexBuffer(this.iconTransitioningVertexArray,cM.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,oM.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||g)&&(this.zOffsetVertexBuffer=r.createVertexBuffer(this.zOffsetVertexArray,aM.members,!0)),!this.orientationVertexBuffer&&this.orientationVertexArray&&this.orientationVertexArray.length>0&&(this.orientationVertexBuffer=r.createVertexBuffer(this.orientationVertexArray,lM.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||h)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.orientationVertexBuffer&&this.orientationVertexBuffer.destroy())}}tn(kx,"SymbolBuffers");class Tx{constructor(r,o,u){this.layoutVertexArray=new r,this.layoutAttributes=o,this.indexArray=new u,this.segments=new zi,this.collisionVertexArray=new Nd,this.collisionVertexArrayExt=new Eo}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,uM.members,!0),this.collisionVertexBufferExt=r.createVertexBuffer(this.collisionVertexArrayExt,dM.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}tn(Tx,"CollisionBuffers");class Hv{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.lut=r.lut,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(y=>y.fqid),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=oe([]),this.placementViewportMatrix=oe([]);const o=this.layers[0]._unevaluatedLayout._values;this.worldview=r.worldview,this.textSizeData=G3(this.zoom,o["text-size"],this.worldview),this.iconSizeData=G3(this.zoom,o["icon-size"],this.worldview);const u=this.layers[0].layout,h=u.get("symbol-sort-key"),g=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(y=>Is[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=r.sourceID,this.projection=r.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new kx(new p(this.layers,{zoom:this.zoom,lut:this.lut},r=>r.startsWith("text")||r.startsWith("symbol"))),this.icon=new kx(new p(this.layers,{zoom:this.zoom,lut:this.lut},r=>r.startsWith("icon")||r.startsWith("symbol"))),this.glyphOffsetArray=new zm,this.lineVertexArray=new rv,this.symbolInstances=new nv}calculateGlyphDependencies(r,o,u,h,g){for(const y of r){const _=y.codePointAt(0);if(_===void 0)break;if(o[_]=!0,h&&g&&_<=65535){const S=og[y];S&&(o[S.charCodeAt(0)]=!0)}}}updateFootprints(r,o){}updateReplacement(r,o){if(o.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=o.updateTime;const u=o.getReplacementRegionsForTile(r.toUnwrapped(),!0);return!ex(this.activeReplacements,u)&&(this.activeReplacements=u,!0)}populate(r,o,u,h){const g=this.layers[0],y=g.layout,_=this.projection.name==="globe",S=y.get("text-font"),C=y.get("text-field"),P=y.get("icon-image"),[R,D]=y.get("icon-size-scale-range"),B=Te(o.scaleFactor||1,R,D),$=(C.value.kind!=="constant"||C.value.value instanceof Zo&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),q=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,W=y.get("symbol-sort-key");if(this.features=[],!$&&!q)return;const J=o.iconDependencies,ce=o.glyphDependencies,ue=o.availableImages,H=new Ur(this.zoom,{worldview:this.worldview});for(const{feature:se,id:de,index:be,sourceLayerIndex:Oe}of r){const Re=g._featureFilter.needGeometry,Be=Yt(se,Re);if(!g._featureFilter.filter(H,Be,u))continue;if(Re||(Be.geometry=rn(se,u,h)),_&&se.type!==1&&u.z<=5){const Pt=Be.geometry,Rt=.98078528056,ct=(Tt,ot)=>kn(Um(Tt.x,Tt.y,u,1),Um(ot.x,ot.y,u,1))<Rt;for(let Tt=0;Tt<Pt.length;Tt++)Pt[Tt]=Bt(Pt[Tt],ct)}let je,at;if($){const Pt=g.getValueAndResolveTokens("text-field",Be,u,ue),Rt=Zo.factory(Pt);GM(Rt)&&(this.hasRTLText=!0),(!this.hasRTLText||cu()==="unavailable"||this.hasRTLText&&qa.isParsed())&&(je=pM(Rt,g,Be))}if(q){const Pt=g.getValueAndResolveTokens("icon-image",Be,u,ue);at=typeof Pt=="string"?os.build(Pt):Pt}if(!je&&!at)continue;const At=this.sortFeaturesByKey?W.evaluate(Be,{},u):void 0,yt={id:de,text:je,icon:at,index:be,sourceLayerIndex:Oe,geometry:Be.geometry,properties:se.properties,type:qM[se.type],sortKey:At};if(this.features.push(yt),at){const Pt=this.layers[0]._unevaluatedLayout._values,{iconPrimary:Rt,iconSecondary:ct}=ak(at,this.iconSizeData,Pt["icon-size"],u,this.zoom,yt,this.pixelRatio,B,this.worldview),Tt=Rt.id.toString();if(J.has(Tt)?J.get(Tt).push(Rt):J.set(Tt,[Rt]),ct){const ot=ct.id.toString();J.has(ot)?J.get(ot).push(ct):J.set(ot,[ct])}}if(je){const Pt=S.evaluate(Be,{},u).join(","),Rt=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Is.vertical)>=0;for(const ct of je.sections)if(ct.image){const Tt=ct.image.getPrimary().scaleSelf(this.pixelRatio),ot=Tt.id.toString(),lt=J.get(ot)||[];lt.push(Tt),J.set(ot,lt)}else{const Tt=Ld(je.toString()),ot=ct.fontStack||Pt,lt=ce[ot]=ce[ot]||{};this.calculateGlyphDependencies(ct.text,lt,Rt,this.allowVerticalPlacement,Tt)}}}if(y.get("symbol-placement")==="line"&&(this.features=function(se){const de={},be={},Oe=[];let Re=0;function Be(yt){Oe.push(se[yt]),Re++}function je(yt,Pt,Rt){const ct=be[yt];return delete be[yt],be[Pt]=ct,Oe[ct].geometry[0].pop(),Oe[ct].geometry[0]=Oe[ct].geometry[0].concat(Rt[0]),ct}function at(yt,Pt,Rt){const ct=de[Pt];return delete de[Pt],de[yt]=ct,Oe[ct].geometry[0].shift(),Oe[ct].geometry[0]=Rt[0].concat(Oe[ct].geometry[0]),ct}function At(yt,Pt,Rt){const ct=Rt?Pt[0][Pt[0].length-1]:Pt[0][0];return`${yt}:${ct.x}:${ct.y}`}for(let yt=0;yt<se.length;yt++){const Pt=se[yt],Rt=Pt.geometry,ct=Pt.text?Pt.text.toString():null;if(!ct){Be(yt);continue}const Tt=At(ct,Rt),ot=At(ct,Rt,!0);if(Tt in be&&ot in de&&be[Tt]!==de[ot]){const lt=at(Tt,ot,Rt),Lt=je(Tt,ot,Oe[lt].geometry);delete de[Tt],delete be[ot],be[At(ct,Oe[Lt].geometry,!0)]=Lt,Oe[lt].geometry=null}else Tt in be?je(Tt,ot,Rt):ot in de?at(Tt,ot,Rt):(Be(yt),de[Tt]=Re-1,be[ot]=Re-1)}return Oe.filter(yt=>yt.geometry)}(this.features)),y.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",o.elevationFeatures){!this.elevationFeatures&&o.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const se of o.elevationFeatures)this.elevationFeatureIdToIndex.set(se.id,this.elevationFeatures.length),this.elevationFeatures.push(se)}}else y.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((se,de)=>se.sortKey-de.sortKey)}update(r,o,u,h,g,y,_){this.text.programConfigurations.updatePaintArrays(r,o,g,u,h,y,_,this.worldview),this.icon.programConfigurations.updatePaintArrays(r,o,g,u,h,y,_,this.worldview)}updateRoadElevation(r){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let o=!1;const u=st(r),h=1/u;let g=!1,y=!1;for(let _=0;_<this.symbolInstances.length;_++){const S=this.symbolInstances.get(_),C=Qe(1,0,0),P=Qe(0,1,0),{numHorizontalGlyphVertices:R,numVerticalGlyphVertices:D,numIconVertices:B,numVerticalIconVertices:$}=S,q=R>0||D>0,W=B>0,J=this.elevationFeatures[S.elevationFeatureIndex];if(J){const ce=new Vt(S.tileAnchorX,S.tileAnchorY),ue=.075+J.pointElevation(ce);S.zOffset!==ue&&(o=!0,S.zOffset=ue);const H=J.computeSlopeNormal(ce,h),se=fo(xn(),Qe(0,0,1),H);ei(C,C,se),ei(P,P,se),C[2]*=u,P[2]*=u,C[0]===1&&C[1]===0&&C[2]===0&&P[0]===0&&P[1]===1&&P[2]===0||(g=g||q,y=y||W)}if(q&&(Uv(this.text.orientationVertexArray,R,C,P),Uv(this.text.orientationVertexArray,D,C,P)),W){const{placedIconSymbolIndex:ce,verticalPlacedIconSymbolIndex:ue}=S;ce>=0&&Uv(this.icon.orientationVertexArray,B,C,P),ue>=0&&Uv(this.icon.orientationVertexArray,$,C,P)}}g||(this.text.orientationVertexArray=void 0),y||(this.icon.orientationVertexArray=void 0),o&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const r=(g,y,_)=>{u+=y,u>g.length&&g.resize(u);for(let S=-y;S<0;S++)g.emplace(S+u,_)},o=(g,y,_)=>{h+=y,h>g.length&&g.resize(h);for(let S=-y;S<0;S++)g.emplace(S+h,_)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let u=0,h=0;for(let g=0;g<this.symbolInstances.length;g++){const y=this.symbolInstances.get(g),{numHorizontalGlyphVertices:_,numVerticalGlyphVertices:S,numIconVertices:C}=y,P=y.zOffset,R=C>0;if((_>0||S>0)&&(r(this.text.zOffsetVertexArray,_,P),r(this.text.zOffsetVertexArray,S,P)),R){const{placedIconSymbolIndex:D,verticalPlacedIconSymbolIndex:B}=y;D>=0&&o(this.icon.zOffsetVertexArray,C,P),B>=0&&o(this.icon.zOffsetVertexArray,y.numVerticalIconVertices,P)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=yk(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,o){const u=this.lineVertexArray.length;if(r.segment!==void 0)for(const{x:h,y:g}of o)this.lineVertexArray.emplaceBack(h,g);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(r,o,u,h,g,y,_,S,C,P,R,D,B,$,q,W){const J=r.indexArray,ce=r.layoutVertexArray,ue=r.globeExtVertexArray,H=r.segments.prepareSegment(4*o.length,ce,J,this.canOverlap?y.sortKey:void 0),se=this.glyphOffsetArray.length,de=H.vertexLength,be=this.allowVerticalPlacement&&_===Is.vertical?Math.PI/2:0,Oe=y.text&&y.text.sections;for(let Be=0;Be<o.length;Be++){const{tl:je,tr:at,bl:At,br:yt,texPrimary:Pt,texSecondary:Rt,pixelOffsetTL:ct,pixelOffsetBR:Tt,minFontScaleX:ot,minFontScaleY:lt,glyphOffset:Lt,isSDF:zt,sectionIndex:Sn}=o[Be],un=H.vertexLength,Gt=Lt[1];if(Nv(ce,C.x,C.y,je.x,Gt+je.y,Pt.x,Pt.y,u,zt,ct.x,ct.y,ot,lt),Nv(ce,C.x,C.y,at.x,Gt+at.y,Pt.x+Pt.w,Pt.y,u,zt,Tt.x,ct.y,ot,lt),Nv(ce,C.x,C.y,At.x,Gt+At.y,Pt.x,Pt.y+Pt.h,u,zt,ct.x,Tt.y,ot,lt),Nv(ce,C.x,C.y,yt.x,Gt+yt.y,Pt.x+Pt.w,Pt.y+Pt.h,u,zt,Tt.x,Tt.y,ot,lt),S){const{x:Dt,y:Vn,z:ln}=S.anchor,[hn,Dn,Kn]=S.up;jv(ue,Dt,Vn,ln,hn,Dn,Kn),jv(ue,Dt,Vn,ln,hn,Dn,Kn),jv(ue,Dt,Vn,ln,hn,Dn,Kn),jv(ue,Dt,Vn,ln,hn,Dn,Kn),qv(r.dynamicLayoutVertexArray,Dt,Vn,ln,be)}else qv(r.dynamicLayoutVertexArray,C.x,C.y,C.z,be);if(W){const Dt=Rt||Pt;Vv(r.iconTransitioningVertexArray,Dt.x,Dt.y),Vv(r.iconTransitioningVertexArray,Dt.x+Dt.w,Dt.y),Vv(r.iconTransitioningVertexArray,Dt.x,Dt.y+Dt.h),Vv(r.iconTransitioningVertexArray,Dt.x+Dt.w,Dt.y+Dt.h)}J.emplaceBack(un,un+1,un+2),J.emplaceBack(un+1,un+2,un+3),H.vertexLength+=4,H.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lt[0]),Be!==o.length-1&&Sn===o[Be+1].sectionIndex||r.programConfigurations.populatePaintArrays(ce.length,y,y.index,{},B,$,q,Oe&&Oe[Sn],this.worldview)}const Re=S?S.anchor:C;r.placedSymbolArray.emplaceBack(Re.x,Re.y,Re.z,C.x,C.y,se,this.glyphOffsetArray.length-se,de,P,R,C.segment,u?u[0]:0,u?u[1]:0,h[0],h[1],_,0,0,0,D,0)}_commitLayoutVertex(r,o,u,h,g,y,_){r.emplaceBack(o,u,h,g,y,Math.round(_.x),Math.round(_.y))}_addCollisionDebugVertices(r,o,u,h,g,y,_){const S=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),C=S.vertexLength,P=_.tileAnchorX,R=_.tileAnchorY;for(let B=0;B<4;B++)u.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(u.collisionVertexArrayExt,o,r.padding,_.zOffset),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,P,R,new Vt(r.x1,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,P,R,new Vt(r.x2,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,P,R,new Vt(r.x2,r.y2)),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,P,R,new Vt(r.x1,r.y2)),S.vertexLength+=4;const D=u.indexArray;D.emplaceBack(C,C+1),D.emplaceBack(C+1,C+2),D.emplaceBack(C+2,C+3),D.emplaceBack(C+3,C),S.primitiveLength+=4}_addTextDebugCollisionBoxes(r,o,u,h,g,y){for(let _=h;_<g;_++){const S=u.get(_),C=this.getSymbolInstanceTextSize(r,y,o,_);this._addCollisionDebugVertices(S,C,this.textCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(r,o,u,h,g,y){for(let _=h;_<g;_++){const S=u.get(_),C=this.getSymbolInstanceIconSize(r,o,y.placedIconSymbolIndex);this._addCollisionDebugVertices(S,C,this.iconCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,y)}}generateCollisionDebugBuffers(r,o,u){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Tx(Cp,M3.members,kl),this.iconCollisionBox=new Tx(Cp,M3.members,kl);const h=ag(this.iconSizeData,r),g=ag(this.textSizeData,r,u);for(let y=0;y<this.symbolInstances.length;y++){const _=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(g,r,o,_.textBoxStartIndex,_.textBoxEndIndex,_),this._addTextDebugCollisionBoxes(g,r,o,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._addIconDebugCollisionBoxes(h,r,o,_.iconBoxStartIndex,_.iconBoxEndIndex,_),this._addIconDebugCollisionBoxes(h,r,o,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_)}}getSymbolInstanceTextSize(r,o,u,h){const g=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:h),y=vx(this.textSizeData,r,g)/wo;return this.tilePixelRatio*y}getSymbolInstanceIconSize(r,o,u){const h=this.icon.placedSymbolArray.get(u),g=vx(this.iconSizeData,r,h);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(r,o,u,h){r.emplaceBack(o,-u,-u,h),r.emplaceBack(o,u,-u,h),r.emplaceBack(o,u,u,h),r.emplaceBack(o,-u,u,h)}_updateTextDebugCollisionBoxes(r,o,u,h,g,y,_){for(let S=h;S<g;S++){const C=u.get(S),P=this.getSymbolInstanceTextSize(r,y,o,S);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,P,C.padding,y.zOffset)}}_updateIconDebugCollisionBoxes(r,o,u,h,g,y,_){for(let S=h;S<g;S++){const C=u.get(S),P=this.getSymbolInstanceIconSize(r,o,y.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,P,C.padding,y.zOffset)}}updateCollisionDebugBuffers(r,o,u,h){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const g=ag(this.iconSizeData,r,h),y=ag(this.textSizeData,r,u);for(let _=0;_<this.symbolInstances.length;_++){const S=this.symbolInstances.get(_);this._updateTextDebugCollisionBoxes(y,r,o,S.textBoxStartIndex,S.textBoxEndIndex,S,u),this._updateTextDebugCollisionBoxes(y,r,o,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S,u),this._updateIconDebugCollisionBoxes(g,r,o,S.iconBoxStartIndex,S.iconBoxEndIndex,S,h),this._updateIconDebugCollisionBoxes(g,r,o,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex,S,h)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(r,o,u,h,g,y,_,S,C){const P={};if(o<u){const{x1:R,y1:D,x2:B,y2:$,padding:q,projectedAnchorX:W,projectedAnchorY:J,projectedAnchorZ:ce,tileAnchorX:ue,tileAnchorY:H,featureIndex:se}=r.get(o);P.textBox={x1:R,y1:D,x2:B,y2:$,padding:q,projectedAnchorX:W,projectedAnchorY:J,projectedAnchorZ:ce,tileAnchorX:ue,tileAnchorY:H},P.textFeatureIndex=se}if(h<g){const{x1:R,y1:D,x2:B,y2:$,padding:q,projectedAnchorX:W,projectedAnchorY:J,projectedAnchorZ:ce,tileAnchorX:ue,tileAnchorY:H,featureIndex:se}=r.get(h);P.verticalTextBox={x1:R,y1:D,x2:B,y2:$,padding:q,projectedAnchorX:W,projectedAnchorY:J,projectedAnchorZ:ce,tileAnchorX:ue,tileAnchorY:H},P.verticalTextFeatureIndex=se}if(y<_){const{x1:R,y1:D,x2:B,y2:$,padding:q,projectedAnchorX:W,projectedAnchorY:J,projectedAnchorZ:ce,tileAnchorX:ue,tileAnchorY:H,featureIndex:se}=r.get(y);P.iconBox={x1:R,y1:D,x2:B,y2:$,padding:q,projectedAnchorX:W,projectedAnchorY:J,projectedAnchorZ:ce,tileAnchorX:ue,tileAnchorY:H},P.iconFeatureIndex=se}if(S<C){const{x1:R,y1:D,x2:B,y2:$,padding:q,projectedAnchorX:W,projectedAnchorY:J,projectedAnchorZ:ce,tileAnchorX:ue,tileAnchorY:H,featureIndex:se}=r.get(S);P.verticalIconBox={x1:R,y1:D,x2:B,y2:$,padding:q,projectedAnchorX:W,projectedAnchorY:J,projectedAnchorZ:ce,tileAnchorX:ue,tileAnchorY:H},P.verticalIconFeatureIndex=se}return P}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const u=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(r,o){const u=r.placedSymbolArray.get(o),h=u.vertexStartIndex+4*u.numGlyphs;for(let g=u.vertexStartIndex;g<h;g+=4)r.indexArray.emplaceBack(g,g+1,g+2),r.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(r),u=Math.cos(r),h=[],g=[],y=[];for(let _=0;_<this.symbolInstances.length;++_){y.push(_);const S=this.symbolInstances.get(_);h.push(0|Math.round(o*S.tileAnchorX+u*S.tileAnchorY)),g.push(S.featureIndex)}return y.sort((_,S)=>h[_]-h[S]||g[S]-g[_]),y}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let r=0;r<this.symbolInstances.length;++r)this.symbolInstanceIndexesSortedZOffset.push(r)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((r,o)=>this.symbolInstances.get(o).zOffset-this.symbolInstances.get(r).zOffset)}addToSortKeyRanges(r,o){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===o?u.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const u=this.symbolInstances.get(o);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:h,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:y,verticalPlacedTextSymbolIndex:_,placedIconSymbolIndex:S,verticalPlacedIconSymbolIndex:C}=u;h>=0&&this.addIndicesForPlacedSymbol(this.text,h),g>=0&&g!==h&&this.addIndicesForPlacedSymbol(this.text,g),y>=0&&y!==g&&y!==h&&this.addIndicesForPlacedSymbol(this.text,y),_>=0&&this.addIndicesForPlacedSymbol(this.text,_),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S),C>=0&&this.addIndicesForPlacedSymbol(this.icon,C)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let vk,bk,Ex;tn(Hv,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Hv.addDynamicAttributes=qv;class _k{constructor(r){this.type=r.property.overrides?r.property.overrides.runtimeType:Hc,this.defaultValue=r}evaluate(r){if(r.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(r.formattedSection))return o.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}tn(_k,"FormatSectionOverride",{omit:["defaultValue"]});const Ix=()=>Ex||(Ex={layout:vk||(vk=new Mi({"symbol-placement":new Mt(We.layout_symbol["symbol-placement"]),"symbol-spacing":new Mt(We.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Mt(We.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Zt(We.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Mt(We.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Mt(We.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Mt(We.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Mt(We.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Mt(We.layout_symbol["icon-ignore-placement"]),"icon-optional":new Mt(We.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Mt(We.layout_symbol["icon-rotation-alignment"]),"icon-size":new Zt(We.layout_symbol["icon-size"]),"icon-size-scale-range":new Mt(We.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Zt(We.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zt(We.layout_symbol["icon-text-fit-padding"]),"icon-image":new Zt(We.layout_symbol["icon-image"]),"icon-rotate":new Zt(We.layout_symbol["icon-rotate"]),"icon-padding":new Mt(We.layout_symbol["icon-padding"]),"icon-keep-upright":new Mt(We.layout_symbol["icon-keep-upright"]),"icon-offset":new Zt(We.layout_symbol["icon-offset"]),"icon-anchor":new Zt(We.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Mt(We.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Mt(We.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Mt(We.layout_symbol["text-rotation-alignment"]),"text-field":new Zt(We.layout_symbol["text-field"]),"text-font":new Zt(We.layout_symbol["text-font"]),"text-size":new Zt(We.layout_symbol["text-size"]),"text-size-scale-range":new Mt(We.layout_symbol["text-size-scale-range"]),"text-max-width":new Zt(We.layout_symbol["text-max-width"]),"text-line-height":new Zt(We.layout_symbol["text-line-height"]),"text-letter-spacing":new Zt(We.layout_symbol["text-letter-spacing"]),"text-justify":new Zt(We.layout_symbol["text-justify"]),"text-radial-offset":new Zt(We.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Mt(We.layout_symbol["text-variable-anchor"]),"text-anchor":new Zt(We.layout_symbol["text-anchor"]),"text-max-angle":new Mt(We.layout_symbol["text-max-angle"]),"text-writing-mode":new Mt(We.layout_symbol["text-writing-mode"]),"text-rotate":new Zt(We.layout_symbol["text-rotate"]),"text-padding":new Mt(We.layout_symbol["text-padding"]),"text-keep-upright":new Mt(We.layout_symbol["text-keep-upright"]),"text-transform":new Zt(We.layout_symbol["text-transform"]),"text-offset":new Zt(We.layout_symbol["text-offset"]),"text-allow-overlap":new Mt(We.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Mt(We.layout_symbol["text-ignore-placement"]),"text-optional":new Mt(We.layout_symbol["text-optional"]),visibility:new Mt(We.layout_symbol.visibility)})),paint:bk||(bk=new Mi({"icon-opacity":new Zt(We.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Zt(We.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Zt(We.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Zt(We.paint_symbol["text-emissive-strength"]),"icon-color":new Zt(We.paint_symbol["icon-color"]),"icon-halo-color":new Zt(We.paint_symbol["icon-halo-color"]),"icon-halo-width":new Zt(We.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Zt(We.paint_symbol["icon-halo-blur"]),"icon-translate":new Mt(We.paint_symbol["icon-translate"]),"icon-translate-anchor":new Mt(We.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Mt(We.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Zt(We.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Zt(We.paint_symbol["text-occlusion-opacity"]),"text-color":new Zt(We.paint_symbol["text-color"],{runtimeType:us,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Zt(We.paint_symbol["text-halo-color"]),"text-halo-width":new Zt(We.paint_symbol["text-halo-width"]),"text-halo-blur":new Zt(We.paint_symbol["text-halo-blur"]),"text-translate":new Mt(We.paint_symbol["text-translate"]),"text-translate-anchor":new Mt(We.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Mt(We.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Mt(We.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Mt(We.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Mt(We.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Zt(We.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},Ex);class Gv extends qo{constructor(r,o,u,h){super(r,Ix(),o,u,h),this._colorAdjustmentMatrix=oe([]),this.hasInitialOcclusionOpacityProperties=r.paint!==void 0&&("icon-occlusion-opacity"in r.paint||"text-occlusion-opacity"in r.paint)}recalculate(r,o){super.recalculate(r,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const h=[];for(const g of u)h.indexOf(g)<0&&h.push(g);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(r,o,u,h){return this._saturation===r&&this._contrast===o&&this._brightnessMin===u&&this._brightnessMax===h||(this._colorAdjustmentMatrix=function(g,y,_,S){g=Vo(g),y=rs(y);const C=K(),P=g/3,R=1-2*P,D=[R,P,P,0,P,R,P,0,P,P,R,0,0,0,0,1],B=.5-.5*y,$=S-_;return me(C,[$,0,0,0,0,$,0,0,0,0,$,0,_,_,_,1],[y,0,0,0,0,y,0,0,0,0,y,0,B,B,B,1]),me(C,C,D),C}(r,o,u,h),this._saturation=r,this._contrast=o,this._brightnessMin=u,this._brightnessMax=h),this._colorAdjustmentMatrix}getValueAndResolveTokens(r,o,u,h){const g=this.layout.get(r).evaluate(o,{},u,h),y=this._unevaluatedLayout._values[r];return y.isDataDriven()||fp(y.value)||!g?g:function(_,S){return S.replace(/{([^{}]+)}/g,(C,P)=>P in _?String(_[P]):"")}(o.properties,g)}createBucket(r){return new Hv(r)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const r of Ix().paint.overridableProperties){if(!Gv.hasPaintOverride(this.layout,r))continue;const o=this.paint.get(r),u=new _k(o),h=new su(u,o.property.specification,this.scope,this.options);let g=null;g=o.value.kind==="constant"||o.value.kind==="source"?new Md("source",h):new Dd("composite",h,o.value.zoomStops,o.value.interpolationType),this.paint._values[r]=new uu(o.property,g,o.parameters)}}_handleOverridablePaintPropertyUpdate(r,o,u){return!(!this.layout||o.isDataDriven()||u.isDataDriven())&&Gv.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,o){const u=r.get("text-field"),h=Ix().paint.properties[o];let g=!1;const y=_=>{for(const S of _)if(h.overrides&&h.overrides.hasOverride(S))return void(g=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Zo)y(u.value.value.sections);else if(u.value.kind==="source"){const _=C=>{g||(C instanceof $n&&en(C.value)===md?y(C.value.sections):C instanceof Wc?y(C.sections):C.eachChild(_))},S=u.value;S._styleExpression&&_(S._styleExpression.expression)}return g}getProgramIds(){return["symbol"]}getDefaultProgramParams(r,o,u){return{config:new _u(this,{zoom:o,lut:u}),overrideFog:!1}}hasElevation(){return this.layout&&this.layout.get("symbol-elevation-reference")==="hd-road-markup"}}let xk,wk,Sk,Ck;var Px=Sr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function Ax(a){switch(a){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function Rx(a){switch(a){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class Mx{constructor(r,o,u,h){this.context=r,this.format=u,this.useMipmap=h&&h.useMipmap,this.texture=r.gl.createTexture(),this.update(o,{premultiply:h&&h.premultiply})}update(r,o){const u=r&&r instanceof HTMLVideoElement&&r.width===0?r.videoWidth:r.width,h=r&&r instanceof HTMLVideoElement&&r.height===0?r.videoHeight:r.height,{context:g}=this,{gl:y}=g,{x:_,y:S}=o&&o.position?o.position:{x:0,y:0},C=_+u,P=S+h;!this.size||this.size[0]===C&&this.size[1]===P||(y.bindTexture(y.TEXTURE_2D,null),y.deleteTexture(this.texture),this.texture=y.createTexture(),this.size=null),y.bindTexture(y.TEXTURE_2D,this.texture),g.pixelStoreUnpackFlipY.set(!1),g.pixelStoreUnpack.set(1),g.pixelStoreUnpackPremultiplyAlpha.set(this.format===y.RGBA8&&(!o||o.premultiply!==!1));const R=r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||ImageBitmap&&r instanceof ImageBitmap;if(!this.size&&C>0&&P>0){const D=this.useMipmap?Math.floor(Math.log2(Math.max(C,P)))+1:1;y.texStorage2D(y.TEXTURE_2D,D,this.format,C,P),this.size=[C,P]}if(this.size)if(R)y.texSubImage2D(y.TEXTURE_2D,0,_,S,Ax(this.format),Rx(this.format),r);else{const D=r.data;D&&y.texSubImage2D(y.TEXTURE_2D,0,_,S,u,h,Ax(this.format),Rx(this.format),D)}this.useMipmap&&y.generateMipmap(y.TEXTURE_2D)}bind(r,o,u=!1){const{context:h}=this,{gl:g}=h;g.bindTexture(g.TEXTURE_2D,this.texture),r!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,r),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap&&!u?r===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_LINEAR:r),this.minFilter=r),o!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,o),this.wrapS=o)}bindExtraParam(r,o,u,h,g){const{context:y}=this,{gl:_}=y;_.bindTexture(_.TEXTURE_2D,this.texture),o!==this.magFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,o),this.magFilter=o),r!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,this.useMipmap?r===_.NEAREST?_.NEAREST_MIPMAP_NEAREST:_.LINEAR_MIPMAP_LINEAR:r),this.minFilter=r),u!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),this.wrapS=u),h!==this.wrapT&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,h),this.wrapT=h),g!==this.compareMode&&(g?(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_COMPARE_MODE,_.COMPARE_REF_TO_TEXTURE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_COMPARE_FUNC,g)):_.texParameteri(_.TEXTURE_2D,_.TEXTURE_COMPARE_MODE,_.NONE),this.compareMode=g)}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class Wv{constructor(r,o){this.context=r,this.texture=o}bind(r,o){const{context:u}=this,{gl:h}=u;h.bindTexture(h.TEXTURE_2D,this.texture),r!==this.minFilter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,r),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,r),this.minFilter=r),o!==this.wrapS&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,o),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,o),this.wrapS=o)}}function Kv(a,r,o,u,h,g,y,_){const S=[a,r,1,o,u,1,h,g,1],C=[y,_,1],P=j([],S),[R,D,B]=Yn(C,C,P);return U(S,S,[R,0,0,0,D,0,0,0,B])}function kk(a,r,o,u,h,g,y,_){const S=function(C,P,R,D,B,$,q,W){const J=Kv(0,0,1,0,1,1,0,1),ce=Kv(C,P,R,D,B,$,q,W);return U(ce,ce,j([],J))}(a,r,o,u,h,g,y,_);return[S[2]/S[8]/Ut,S[5]/S[8]/Ut]}function Zv(a){return[a[0],Math.min(Math.max(a[1],-85.051129),ht)]}class Tk extends ic{constructor(r,o,u,h){super(),this.id=r,this.dispatcher=u,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(h),this.options=o,this._dirty=!1}load(r,o){if(this._loaded=o||!1,this.fire(new rc("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return r&&(this.coordinates=r),this._loaded=!0,void this._finishLoading();this._imageRequest=Nf(this.map._requestManager.transformRequest(this.url,ud.Image),(u,h)=>{this._imageRequest=null,this._loaded=!0,u?this.fire(new Vh(u)):h&&(this.image=h instanceof HTMLImageElement?Js.getImageData(h):h,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,r&&(this.coordinates=r),this._finishLoading())})}loaded(){return this._loaded}updateImage(r){return r.url?(this._imageRequest&&r.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=r.url,this.load(r.coordinates,this._loaded),this):this}setTexture(r){if(!(r.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new Wv(this.map.painter.context,r.handle),this.width=r.dimensions[0],this.height=r.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new rc("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(r){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof Wv||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(r){if(this.coordinates=r,this._boundsArray=void 0,this._unsupportedCoords=!1,!r.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let o=r[0][1],u=r[0][1];for(const g of r)g[1]>u&&(u=g[1]),g[1]<o&&(o=g[1]);const h=(u+o)/2;if(h>ht?this.onNorthPole=!0:h<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const g=r.map(Fe.fromLngLat);this.tileID=function(y){let _=1/0,S=1/0,C=-1/0,P=-1/0;for(const q of y)_=Math.min(_,q.x),S=Math.min(S,q.y),C=Math.max(C,q.x),P=Math.max(P,q.y);const R=Math.max(C-_,P-S),D=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),B=Math.pow(2,D);let $=Math.floor((_+C)/2*B);return $>1&&($-=1),new Jd(D,$,Math.floor((S+P)/2*B))}(g),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new rc("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(r){for(const J in this.tiles){const ce=this.tiles[J];ce.state!=="loaded"&&(ce.state="loaded",ce.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const o=ug(new Jd(0,0,0),this.map.transform.projection),u=[o.projection.project(this.coordinates[0][0],this.coordinates[0][1]),o.projection.project(this.coordinates[1][0],this.coordinates[1][1]),o.projection.project(this.coordinates[2][0],this.coordinates[2][1]),o.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(J){const ce=J[1].x-J[0].x,ue=J[1].y-J[0].y,H=J[2].x-J[1].x,se=J[2].y-J[1].y,de=J[3].x-J[2].x,be=J[3].y-J[2].y,Oe=J[0].x-J[3].x,Re=J[0].y-J[3].y,Be=ce*se-H*ue,je=H*be-de*se,at=de*Re-Oe*be,At=Oe*ue-ce*Re;return Be>0&&je>0&&at>0&&At>0||Be<0&&je<0&&at<0&&At<0}(u))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const h=ug(this.tileID,this.map.transform.projection),[g,y,_,S]=this.coordinates.map(J=>{const ce=h.projection.project(J[0],J[1]);return hk(h,ce)._round()});this.perspectiveTransform=kk(g.x,g.y,y.x,y.y,_.x,_.y,S.x,S.y);const C=this._boundsArray=new hu;C.emplaceBack(g.x,g.y,0,0),C.emplaceBack(y.x,y.y,Ut,0),C.emplaceBack(S.x,S.y,0,Ut),C.emplaceBack(_.x,_.y,Ut,Ut),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=r.createVertexBuffer(C,Px.members),this.boundsSegments=zi.simpleSegment(0,0,4,2);const P=[],R=[Zv((D=this.coordinates)[0]),Zv(D[1]),Zv(D[2]),Zv(D[3])];var D;const[B,$,q,W]=function(J){let ce=J[0][0],ue=ce,H=J[0][1],se=H;for(let de=1;de<J.length;de++)J[de][0]<ce?ce=J[de][0]:J[de][0]>ue&&(ue=J[de][0]),J[de][1]<H?H=J[de][1]:J[de][1]>se&&(se=J[de][1]);return[ce,H,ue-ce,se-H]}(R);{const J=new hu,[ce,ue,H,se]=function(ct){let Tt=ct[0].x,ot=Tt,lt=ct[0].y,Lt=lt;for(let zt=1;zt<ct.length;zt++)ct[zt].x<Tt?Tt=ct[zt].x:ct[zt].x>ot&&(ot=ct[zt].x),ct[zt].y<lt?lt=ct[zt].y:ct[zt].y>Lt&&(Lt=ct[zt].y);return[Tt,lt,ot-Tt,Lt-lt]}(u),de=ct=>[(ct.x-ce)/H,(ct.y-ue)/se],[be,Oe,Re,Be]=u.map(de),je=function(ct,Tt,ot,lt,Lt,zt,Sn,un){const Gt=Kv(0,0,1,0,1,1,0,1);return U(Gt,Gt,j([],Kv(ct,Tt,ot,lt,Lt,zt,Sn,un)))}(be[0],be[1],Oe[0],Oe[1],Re[0],Re[1],Be[0],Be[1]);this.elevatedGlobePerspectiveTransform=kk(be[0],be[1],Oe[0],Oe[1],Re[0],Re[1],Be[0],Be[1]);const at=(ct,Tt)=>{P.push(ct.lng);const ot=Math.round((ct.lng-B)/q*Ut),lt=Math.round((ct.lat-$)/W*Ut),Lt=de(Tt),zt=Yn([],[Lt[0],Lt[1],1],je),Sn=Math.round(zt[0]/zt[2]*Ut),un=Math.round(zt[1]/zt[2]*Ut);J.emplaceBack(ot,lt,Sn,un)},At=u[3].x-u[0].x,yt=u[3].y-u[0].y,Pt=u[2].x-u[1].x,Rt=u[2].y-u[1].y;for(let ct=0;ct<65;ct++){const Tt=ct/64,ot=[u[0].x+Tt*At,u[0].y+Tt*yt],lt=[u[1].x+Tt*Pt,u[1].y+Tt*Rt],Lt=lt[0]-ot[0],zt=lt[1]-ot[1];for(let Sn=0;Sn<65;Sn++){const un=Sn/64,Gt={x:ot[0]+Lt*un,y:ot[1]+zt*un};at(o.projection.unproject(Gt.x,Gt.y),Gt)}}this.elevatedGlobeVertexBuffer=r.createVertexBuffer(J,Px.members)}{this.maxLongitudeTriangleSize=0;let J=[],ce=new Io;const ue=(H,se,de)=>{ce.emplaceBack(H,se,de);const be=P[H],Oe=P[se],Re=P[de],Be=Math.min(Math.min(be,Oe),Re),je=Math.max(Math.max(be,Oe),Re)-Be;je>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=je),J.push(Be+je/2)};for(let H=0;H<64;H++)for(let se=0;se<64;se++){const de=65*H+se,be=de+1,Oe=de+65,Re=Oe+1;ue(de,Oe,be),ue(be,Oe,Re)}[J,ce]=function(H,se){const de=Array.from({length:H.length},(Re,Be)=>Be);de.sort((Re,Be)=>H[Re]-H[Be]);const be=[],Oe=new Io;for(let Re=0;Re<de.length;Re++){const Be=de[Re];be.push(H[Be]);const je=3*Be,at=je+1;Oe.emplaceBack(se.uint16[je],se.uint16[at],se.uint16[at+1])}return[be,Oe]}(J,ce),this.elevatedGlobeTrianglesCenterLongitudes=J,this.elevatedGlobeIndexBuffer=r.createIndexBuffer(ce)}this.elevatedGlobeSegments=zi.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,q/Ut,0,W/Ut,0,0,$,B,0])}prepare(){const r=Object.keys(this.tiles).length!==0;if(this.tileID&&!r)return;const o=this.map.painter.context,u=o.gl;!this._dirty||this.texture instanceof Wv||(this.texture?this.texture.update(this.image):(this.texture=new Mx(o,this.image,u.RGBA8),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this._dirty=!1),r&&this._prepareData(o)}loadTile(r,o){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},o(null)):(r.state="errored",o(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(r){const o=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!o)return null;const u=this.elevatedGlobeTrianglesCenterLongitudes;let h=(g=r+180)+360*Math.round((u[0]-g)/360);var g;const y=new zi,_=(R,D)=>{y.segments.push({vertexOffset:0,primitiveOffset:R,vertexLength:o.segments[0].vertexLength,primitiveLength:D,sortKey:void 0,vaos:{}})},S=.51*this.maxLongitudeTriangleSize;if(Math.abs(u[0]-h)<=S){const R=_o(u,0,u.length,h+S);return R===u.length||_(R,Ti(u,R+1,u.length,h+360-S)-R),y}h<u[0]&&(h+=360);const C=Ti(u,0,u.length,h-S);if(C===u.length)return _(0,u.length),y;_(0,C-0);const P=_o(u,C+1,u.length,h+S);return P!==u.length&&_(P,u.length-P),y}}const WM=(Math.pow(256,2)-1)/16907520;class Ek extends qo{constructor(r,o,u,h){super(r,{layout:Sk||(Sk=new Mi({visibility:new Mt(We.layout_raster.visibility)})),paint:Ck||(Ck=new Mi({"raster-opacity":new Mt(We.paint_raster["raster-opacity"]),"raster-color":new vc(We.paint_raster["raster-color"]),"raster-color-mix":new Mt(We.paint_raster["raster-color-mix"]),"raster-color-range":new Mt(We.paint_raster["raster-color-range"]),"raster-hue-rotate":new Mt(We.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Mt(We.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Mt(We.paint_raster["raster-brightness-max"]),"raster-saturation":new Mt(We.paint_raster["raster-saturation"]),"raster-contrast":new Mt(We.paint_raster["raster-contrast"]),"raster-resampling":new Mt(We.paint_raster["raster-resampling"]),"raster-fade-duration":new Mt(We.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Mt(We.paint_raster["raster-emissive-strength"]),"raster-array-band":new Mt(We.paint_raster["raster-array-band"]),"raster-elevation":new Mt(We.paint_raster["raster-elevation"]),"raster-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(r){return!(r&&r._source instanceof Tk&&(r._source.onNorthPole||r._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(r){r!=="raster-color"&&r!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(r){if(!this.hasColorMap()||!this._curRampRange)return;const o=this._transitionablePaint._values["raster-color"].value.expression,[u,h]=r||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(u)&&isNaN(h)||u===this._curRampRange[0]&&h===this._curRampRange[1]||(this.colorRamp=qm({expression:o,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:u,end:h}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[u,h])}}let Ik,Pk,Ak,Rk,Mk;class Dk extends qo{constructor(r,o,u,h){super(r,{layout:Ik||(Ik=new Mi({visibility:new Mt(We["layout_raster-particle"].visibility)})),paint:Pk||(Pk=new Mi({"raster-particle-array-band":new Mt(We["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Mt(We["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new vc(We["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Mt(We["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Mt(We["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Mt(We["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Mt(We["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Mt(We["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this._updateColorRamp(),this.lastInvalidatedAt=Js.now()}onRemove(r){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(r){return!1}_handleSpecialPaintPropertyUpdate(r){r!=="raster-particle-color"&&r!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),r==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const r=this._transitionablePaint._values["raster-particle-color"].value.expression,o=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=qm({expression:r,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:o}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Js.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class KM extends qo{constructor(r,o){super(r,{},o,null),this.implementation=r,r.slot&&(this.slot=r.slot)}is3D(r){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(r){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)}onRemove(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)}}function Dx(a,r,o){const u=[0,0,1],h=gn([]);return zn(h,h,o?-Cr(a)+Math.PI:Cr(a)),cr(h,h,-Cr(r)),ei(u,u,h),pn(u,u)}function Lk(a,r){const o=Xv(a.projection,a.zoom,a.width,a.height),u=function(g,y,_,S,C){const P=new ae(_.lng-180*Iu,_.lat),R=new ae(_.lng+180*Iu,_.lat),D=g.project(P.lng,P.lat),B=g.project(R.lng,R.lat),$=-Math.atan2(B.y-D.y,B.x-D.x),q=Fe.fromLngLat(_);q.y=Te(q.y,-1+Iu,1-Iu);const W=q.toLngLat(),J=g.project(W.lng,W.lat),ce=Fe.fromLngLat(W);ce.x+=Iu;const ue=ce.toLngLat(),H=g.project(ue.lng,ue.lat),se=zk(H.x-J.x,H.y-J.y,$),de=Fe.fromLngLat(W);de.y+=Iu;const be=de.toLngLat(),Oe=g.project(be.lng,be.lat),Re=zk(Oe.x-J.x,Oe.y-J.y,$),Be=Math.abs(se.x)/Math.abs(Re.y),je=oe([]);_t(je,je,-$*(1-(C?0:S)));const at=oe([]);return te(at,at,[1,1-(1-Be)*S,1]),at[4]=-Re.x/Re.y*S,_t(at,at,$),me(at,je,at),at}(a.projection,0,a.center,o,r),h=Ok(a);return te(u,u,[h,h,1]),u}function Ok(a){const r=a.projection,o=Xv(a.projection,a.zoom,a.width,a.height),u=Lx(r,a.center),h=Lx(r,ae.convert(r.center));return Math.pow(2,u*o+(1-o)*h)}function Xv(a,r,o,u,h=1/0){const g=a.range;if(!g)return 0;const y=Math.min(h,Math.max(o,u)),_=Math.log(y/1024)/Math.LN2;return Ne(g[0]+_,g[1]+_,r)}const Iu=1/4e4;function Lx(a,r){const o=Te(r.lat,-85.051129,ht),u=new ae(r.lng-180*Iu,o),h=new ae(r.lng+180*Iu,o),g=a.project(u.lng,o),y=a.project(h.lng,o),_=Fe.fromLngLat(u),S=Fe.fromLngLat(h),C=y.x-g.x,P=y.y-g.y,R=S.x-_.x,D=S.y-_.y,B=Math.sqrt((R*R+D*D)/(C*C+P*P));return Math.log(B)/Math.LN2}function zk(a,r,o){const u=Math.cos(o),h=Math.sin(o);return{x:a*u-r*h,y:a*h+r*u}}function Bk(a,r,o){oe(a),_t(a,a,Cr(r[2])),re(a,a,Cr(r[0])),ze(a,a,Cr(r[1])),te(a,a,o),me(a,a,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function Yv(a,r,o,u,h,g,y,_){const S=[o[0]-r[0],o[1]-r[1],0],C=[u[0]-r[0],u[1]-r[1],0];if(ut(S)<1e-12||ut(C)<1e-12)return gn(a);const P=$t([],S,C);pn(P,P),kt(C,u,r),S[2]=(g-h)*_,C[2]=(y-h)*_;const R=S;return $t(R,S,C),pn(R,R),fo(a,P,R)}function Ox(a,r,o=!1){const u=Su(r.zoom),h=function(g,y,_){const S=y.worldSize,C=[g[12],g[13],g[14]],P=Ze(C[1]/S),R=De(C[0]/S),D=oe([]),B=Ae(1,P)*S,$=Ae(1,0)*S*It(P,y.zoom),q=1/j1(S);let W=$*q;if(_){const H=Xv(y.projection,y.zoom,y.width,y.height,1024);W=q*y.projection.pixelSpaceConversion(y.center.lat,S,H)}const J=G(P,R);Qt(J,J,In([],pn([],J),B*W*C[2]));const ce=function(H){const se=[H[0],H[1],H[2]];let de=[0,1,0];const be=$t([],de,se);return $t(de,se,be),oo(de)===0&&(de=[0,1,0],$t(be,se,de)),pn(be,be),pn(de,de),pn(se,se),[be[0],be[1],be[2],0,de[0],de[1],de[2],0,se[0],se[1],se[2],0,H[0],H[1],H[2],1]}(J);te(D,D,[W,W,W*B]),ne(D,D,[-C[0],-C[1],-C[2]]);const ue=me([],y.globeMatrix,ce);return me(ue,ue,D),me(ue,ue,g),ue}(a,r,o);if(u>0){const g=function(y,_){const S=_.worldSize,C=Ae(1,0)*S*It(_.center.lat,_.zoom)/j1(S),P=Ae(1,_.center.lat)*S,R=oe([]);return ze(R,R,Cr(_.center.lng)),re(R,R,Cr(_.center.lat)),ne(R,R,[0,0,w]),te(R,R,[C,C,C*P]),ne(R,R,[_.point.x-.5*S,_.point.y-.5*S,0]),me(R,R,y),me(R,_.globeMatrix,R)}(a,r);return function(y,_,S){const C=($,q,W)=>{const J=ut($),ce=ut(q),ue=wc($,q,W);return In(ue,ue,1/ut(ue)*Mn(J,ce,W))},P=C([y[0],y[1],y[2]],[_[0],_[1],_[2]],S),R=C([y[4],y[5],y[6]],[_[4],_[5],_[6]],S),D=C([y[8],y[9],y[10]],[_[8],_[9],_[10]],S),B=wc([y[12],y[13],y[14]],[_[12],_[13],_[14]],S);return[P[0],P[1],P[2],0,R[0],R[1],R[2],0,D[0],D[1],D[2],0,B[0],B[1],B[2],1]}(h,g,u)}return h}function Fk(a,r,o,u){const h=kr.projectAabbCorners(u,o);let g=Number.MAX_VALUE,y=-1;for(let C=0;C<h.length;++C){const P=h[C];P[0]=(.5*P[0]+.5)*r.width,P[1]=(.5-.5*P[1])*r.height,P[2]<g&&(y=C,g=P[2])}const _=C=>new Vt(h[C][0],h[C][1]);let S;switch(y){case 0:case 6:S=[_(1),_(5),_(4),_(7),_(3),_(2),_(1)];break;case 1:case 7:S=[_(0),_(4),_(5),_(6),_(2),_(3),_(0)];break;case 3:case 5:S=[_(1),_(0),_(4),_(7),_(6),_(2),_(1)];break;default:S=[_(1),_(5),_(6),_(7),_(3),_(0),_(1)]}if(as(a,S))return g}const ZM=Sr([{name:"a_pos_3f",components:3,type:"Float32"}]),XM=Sr([{name:"a_color_3f",components:3,type:"Float32"}]),YM=Sr([{name:"a_color_4f",components:4,type:"Float32"}]),JM=Sr([{name:"a_uv_2f",components:2,type:"Float32"}]),QM=Sr([{name:"a_normal_3f",components:3,type:"Float32"}]),e8=Sr([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),t8=Sr([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),$k={None:0,Model:1,Symbol:2,FillExtrusion:4};class Jv{constructor(r,o,u,h){this.message=(r?`${r}: `:"")+u,h&&(this.identifier=h),o!=null&&o.__line__&&(this.line=o.__line__)}}function zx(a,r){const o=a.indexOf("://")===-1;try{return new URL(a,o&&r?"http://example.com":void 0),!0}catch{return!1}}class Nk{constructor(r,o){this.feature=r,this.instancedDataOffset=o,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class Vk{constructor(){this.instancedDataArray=new yu,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class Bx{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.fqid),this.projection=r.projection,this.index=r.index,this.worldview=r.worldview,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.styleDefinedModelURLs=r.styleDefinedModelURLs}updateFootprints(r,o){}populate(r,o,u,h){this.tileToMeter=st(u);const g=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:y,id:_,index:S,sourceLayerIndex:C}of r){const P=_??(y.properties&&y.properties.hasOwnProperty("id")?y.properties.id:void 0),R=Yt(y,g);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom,{worldview:this.worldview}),R,u))continue;const D={id:P,sourceLayerIndex:C,index:S,geometry:g?R.geometry:rn(y,u,h),properties:y.properties,type:y.type,patterns:{}},B=this.addFeature(D,D.geometry,R);B&&o.featureIndex.insert(y,D.geometry,S,C,this.index,this.instancesPerModel[B].instancedDataArray.length,Ut/32)}this.lookup=null}update(r,o,u,h){for(const g in this.instancesPerModel){const y=this.instancesPerModel[g];for(const _ in r)y.idToFeaturesIndex.hasOwnProperty(_)&&(this.evaluate(y.features[y.idToFeaturesIndex[_]],r[_],y,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let r=!1;for(const o in this.instancesPerModel){const u=this.instancesPerModel[o];for(const h of u.features){const g=this.layers[0],y=h.feature,_=this.canonical,S=g.paint.get("model-rotation").evaluate(y,{},_),C=g.paint.get("model-scale").evaluate(y,{},_),P=g.paint.get("model-translation").evaluate(y,{},_);He(h.rotation,S)&&He(h.scale,C)&&He(h.translation,P)||(this.evaluate(h,h.featureStates,u,!0),r=!0)}}return r}updateReplacement(r,o,u,h){if(o.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=o.updateTime;const g=o.getReplacementRegionsForTile(r.toUnwrapped(),!0);if(ex(this.activeReplacements,g))return!1;this.activeReplacements=g;let y=!1;for(const _ in this.instancesPerModel){const S=this.instancesPerModel[_],C=S.instancedDataArray;for(const P of S.features){const R=P.instancedDataOffset,D=P.instancedDataCount;for(let B=0;B<D;B++){const $=16*(B+R);let q=C.float32[$+0];const W=q>Ut;q=W?q-Ut:q;const J=Math.floor(q),ce=C.float32[$+1];let ue=!1;for(const H of this.activeReplacements)if(!DC(H,u,$k.Model,h)&&!(H.min.x>J||J>H.max.x||H.min.y>ce||ce>H.max.y)&&(ue=$C(FC(J,ce,r.canonical,H.footprintTileId.canonical),H.footprint),ue))break;C.float32[$]=ue?q+Ut:q,y=y||ue!==W}}}return y}isEmpty(){for(const r in this.instancesPerModel)if(this.instancesPerModel[r].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(r){if(!this.uploaded)for(const o in this.instancesPerModel){const u=this.instancesPerModel[o];u.instancedDataArray.length<0||u.instancedDataArray.length===0||(u.instancedDataBuffer?u.instancedDataBuffer.updateData(u.instancedDataArray):u.instancedDataBuffer=r.createVertexBuffer(u.instancedDataArray,e8.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const o in this.instancesPerModel){const u=this.instancesPerModel[o];u.instancedDataArray.length!==0&&u.instancedDataBuffer&&u.instancedDataBuffer.destroy()}const r=this.layers[0].modelManager;if(r&&this.modelUris&&this.modelsRequested)for(const o of this.modelUris)r.removeModel(o,"",!0)}addFeature(r,o,u){const h=this.layers[0],g=h.layout.get("model-id").evaluate(u,{},this.canonical);if(!g)return Zn(`modelId is not evaluated for layer ${h.id} and it is not going to get rendered.`),g;(zx(g,!1)||this.styleDefinedModelURLs[g]!==void 0)&&(this.modelUris.includes(g)||this.modelUris.push(g)),this.instancesPerModel[g]||(this.instancesPerModel[g]=new Vk);const y=this.instancesPerModel[g],_=y.instancedDataArray,S=new Nk(u,_.length);for(const C of o)for(const P of C){if(P.x<0||P.x>=Ut||P.y<0||P.y>=Ut)continue;const R=(this.lookupDim-1)/Ut,D=this.lookupDim*(P.y*R|0)+P.x*R|0;if(this.lookup){if(this.lookup[D]!==0)continue;this.lookup[D]=1}this.instanceCount++;const B=_.length;_.resize(B+1),y.instancesEvaluatedElevation.push(0),_.float32[16*B]=P.x,_.float32[16*B+1]=P.y}return S.instancedDataCount=y.instancedDataArray.length-S.instancedDataOffset,S.instancedDataCount>0&&(r.id&&(y.idToFeaturesIndex[r.id]=y.features.length),y.features.push(S),this.evaluate(S,{},y,!1)),g}getModelUris(){return this.modelUris}evaluate(r,o,u,h){const g=this.layers[0],y=r.feature,_=this.canonical,S=r.rotation=g.paint.get("model-rotation").evaluate(y,o,_),C=r.scale=g.paint.get("model-scale").evaluate(y,o,_),P=r.translation=g.paint.get("model-translation").evaluate(y,o,_),R=g.paint.get("model-color").evaluate(y,o,_);R.a=g.paint.get("model-color-mix-intensity").evaluate(y,o,_);const D=[];this.maxVerticalOffset<P[2]&&(this.maxVerticalOffset=P[2]),this.maxScale=Math.max(Math.max(this.maxScale,C[0]),Math.max(C[1],C[2])),Bk(D,S,C);const B=Math.round(100*R.a)+R.b/1.05;for(let $=0;$<r.instancedDataCount;++$){const q=r.instancedDataOffset+$,W=16*q,J=u.instancedDataArray.float32;let ce=0;h&&(ce=J[W+6]-u.instancesEvaluatedElevation[q]);const ue=0|J[W+1];J[W]=(0|J[W])+R.r/1.05,J[W+1]=ue+R.g/1.05,J[W+2]=B,J[W+3]=1/(_.z>10?this.tileToMeter:st(_,ue)),J[W+4]=P[0],J[W+5]=P[1],J[W+6]=P[2]+ce,J[W+7]=D[0],J[W+8]=D[1],J[W+9]=D[2],J[W+10]=D[4],J[W+11]=D[5],J[W+12]=D[6],J[W+13]=D[8],J[W+14]=D[9],J[W+15]=D[10],u.instancesEvaluatedElevation[q]=P[2]}}}let jk,Uk;tn(Bx,"ModelBucket",{omit:["layers"]}),tn(Vk,"PerModelAttributes"),tn(Nk,"ModelFeature");const oh=64,Gp={CoordinateSpaceTile:1,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function qk(a,r,o,u,h,g,y,_,S,C=!1){const P=o.zoom,R=o.project(u),D=It(u.lat,P),B=1/D;oe(a),ne(a,a,[R.x+y[0]*B,R.y+y[1]*B,y[2]]);let $=1,q=1;const W=o.worldSize;if(C){if(o.projection.name==="mercator"){let H=0;o.elevation&&(H=o.elevation.getAtPointOrZero(new Fe(R.x/W,R.y/W),0));const se=_n([],[R.x,R.y,H,1],o.projMatrix)[3]/o.cameraToCenterDistance;$=se,q=se*It(o.center.lat,P)}else if(o.projection.name==="globe"){const H=Ox(a,o),se=[0,0,0,1];_n(se,se,me([],o.projMatrix,H));const de=se[3]/o.cameraToCenterDistance,be=Su(P),Oe=o.projection.pixelsPerMeter(u.lat,W)*It(u.lat,P),Re=o.projection.pixelsPerMeter(o.center.lat,W)*It(o.center.lat,P);$=de/Mn(Oe,pt(o.center.lat),be),q=de*D/Oe,$*=Re,q*=Re}}else $=B;te(a,a,[$,$,q]);const J=[...a],ce=r.orientation,ue=[];if(Bk(ue,[ce[0]+h[0],ce[1]+h[1],ce[2]+h[2]],g),me(a,J,ue),_&&o.elevation){let H=0;const se=[];if(S&&o.elevation){H=function(be,Oe,Re,Be,je){const at=Oe.elevation;if(!at)return 0;const At=kr.projectAabbCorners(Re,Be),yt=Ae(1,je.lat)*Oe.worldSize,Pt=function(Dt,Vn){const ln=[0,0,1],hn=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Dn of hn){const Kn=Dt[Dn.corners[0]],Wn=Dt[Dn.corners[1]],sr=Dt[Dn.corners[2]],Qn=[Wn[0]-Kn[0],Wn[1]-Kn[1],Vn*(Wn[2]-Kn[2])],ar=$t(Qn,Qn,[sr[0]-Kn[0],sr[1]-Kn[1],Vn*(sr[2]-Kn[2])]);pn(ar,ar),Dn.dotProductWithUp=kn(ar,ln)}return hn.sort((Dn,Kn)=>Dn.dotProductWithUp-Kn.dotProductWithUp),hn[0].corners}(At,yt),Rt=At[Pt[0]],ct=At[Pt[1]],Tt=At[Pt[2]],ot=At[Pt[3]],lt=at.getAtPointOrZero(new Fe(Rt[0]/Oe.worldSize,Rt[1]/Oe.worldSize),0),Lt=at.getAtPointOrZero(new Fe(ct[0]/Oe.worldSize,ct[1]/Oe.worldSize),0),zt=at.getAtPointOrZero(new Fe(Tt[0]/Oe.worldSize,Tt[1]/Oe.worldSize),0),Sn=at.getAtPointOrZero(new Fe(ot[0]/Oe.worldSize,ot[1]/Oe.worldSize),0),un=(lt+Sn)/2,Gt=(Lt+zt)/2;return un>Gt?Lt<zt?Yv(be,ct,ot,Rt,Lt,Sn,lt,yt):Yv(be,Tt,Rt,ot,zt,lt,Sn,yt):lt<Sn?Yv(be,Rt,ct,Tt,lt,Lt,zt,yt):Yv(be,ot,Tt,ct,Sn,zt,Lt,yt),Math.max(un,Gt)}(se,o,r.aabb,a,u);const de=me([],Ce([],se),ue);me(a,J,de)}else H=o.elevation.getAtPointOrZero(new Fe(R.x/W,R.y/W),0);H!==0&&(a[14]+=H)}}function mg(a,r,o=!1){a.uploaded||(a.gfxTexture=new Mx(r,a.image,o?r.gl.R8:r.gl.RGBA8,{useMipmap:a.sampler.minFilter>=r.gl.NEAREST_MIPMAP_NEAREST}),a.uploaded=!0,a.image=null)}function n8(a,r,o){a.indexBuffer=r.createIndexBuffer(a.indexArray,!1,!0),a.vertexBuffer=r.createVertexBuffer(a.vertexArray,ZM.members,!1,!0),a.normalArray&&(a.normalBuffer=r.createVertexBuffer(a.normalArray,QM.members,!1,!0)),a.texcoordArray&&(a.texcoordBuffer=r.createVertexBuffer(a.texcoordArray,JM.members,!1,!0)),a.colorArray&&(a.colorBuffer=r.createVertexBuffer(a.colorArray,(a.colorArray.bytesPerElement===12?XM:YM).members,!1,!0)),a.featureArray&&(a.pbrBuffer=r.createVertexBuffer(a.featureArray,t8.members,!0)),a.segments=zi.simpleSegment(0,0,a.vertexArray.length,a.indexArray.length);const u=a.material;u.pbrMetallicRoughness.baseColorTexture&&mg(u.pbrMetallicRoughness.baseColorTexture,r),u.pbrMetallicRoughness.metallicRoughnessTexture&&mg(u.pbrMetallicRoughness.metallicRoughnessTexture,r),u.normalTexture&&mg(u.normalTexture,r),u.occlusionTexture&&mg(u.occlusionTexture,r,o),u.emissionTexture&&mg(u.emissionTexture,r)}function Fx(a,r,o){if(a.meshes)for(const u of a.meshes)n8(u,r,o);if(a.children)for(const u of a.children)Fx(u,r,o)}function Qv(a){if(a.meshes)for(const r of a.meshes)r.indexArray.destroy(),r.vertexArray.destroy(),r.colorArray&&r.colorArray.destroy(),r.normalArray&&r.normalArray.destroy(),r.texcoordArray&&r.texcoordArray.destroy(),r.featureArray&&r.featureArray.destroy();if(a.children)for(const r of a.children)Qv(r)}function $x(a){if(a.meshes)for(const o of a.meshes)o.vertexBuffer&&(o.vertexBuffer.destroy(),o.indexBuffer.destroy(),o.normalBuffer&&o.normalBuffer.destroy(),o.texcoordBuffer&&o.texcoordBuffer.destroy(),o.colorBuffer&&o.colorBuffer.destroy(),o.pbrBuffer&&o.pbrBuffer.destroy(),o.segments.destroy(),o.material&&((r=o.material).pbrMetallicRoughness.baseColorTexture&&r.pbrMetallicRoughness.baseColorTexture.gfxTexture&&r.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),r.pbrMetallicRoughness.metallicRoughnessTexture&&r.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&r.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),r.normalTexture&&r.normalTexture.gfxTexture&&r.normalTexture.gfxTexture.destroy(),r.emissionTexture&&r.emissionTexture.gfxTexture&&r.emissionTexture.gfxTexture.destroy(),r.occlusionTexture&&r.occlusionTexture.gfxTexture&&r.occlusionTexture.gfxTexture.destroy()));var r;if(a.children)for(const o of a.children)$x(o)}class Wp{constructor(r,o,u){this._demTile=r,this._dem=this._demTile.dem,this._scale=o,this._offset=u}static create(r,o,u){const h=u||r.findDEMTileFor(o);if(!h||!h.dem)return;const g=h.dem,y=h.tileID,_=1<<o.canonical.z-y.canonical.z;return new Wp(h,g.dim/Ut/_,[(o.canonical.x/_-y.canonical.x)*g.dim,(o.canonical.y/_-y.canonical.y)*g.dim])}tileCoordToPixel(r,o){const u=o*this._scale+this._offset[1],h=Math.floor(r*this._scale+this._offset[0]),g=Math.floor(u);return new Vt(h,g)}getElevationAt(r,o,u,h){const g=r*this._scale+this._offset[0],y=o*this._scale+this._offset[1],_=Math.floor(g),S=Math.floor(y),C=this._dem;return h=!!h,u?Mn(Mn(C.get(_,S,h),C.get(_,S+1,h),y-S),Mn(C.get(_+1,S,h),C.get(_+1,S+1,h),y-S),g-_):C.get(_,S,h)}getElevationAtPixel(r,o,u){return this._dem.get(r,o,!!u)}getMeterToDEM(r){return(1<<this._demTile.tileID.canonical.z)*Ae(1,r)*this._dem.stride}}const Nx=new Float32Array(262144),sh=new Uint8Array(262144);function Hk(a){let r=0;if(a.meshes)for(const o of a.meshes)r=Math.max(r,o.aabb.max[2]);if(a.children)for(const o of a.children)r=Math.max(r,Hk(o));return r}function Gk(a,r,o){if(a.meshes)for(const u of a.meshes){if(u.aabb.min[0]===1/0)continue;const h=kr.applyTransform(u.aabb,a.matrix);o.insert(r,h.min[0],h.min[1],h.max[0],h.max[1])}if(a.children)for(const u of a.children)Gk(u,r,o)}const Wk=["","wall","door","roof","window","lamp","logo"];class Kk{constructor(r){this.node=r,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedTranslation=[0,0,0],this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:r.id,geometry:[],properties:{height:Hk(r)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new kr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let r=0;const o=new kr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const u of this.node.meshes)this.node.lightMeshIndex!==r&&(u.transformedAabb=kr.applyTransformFast(u.aabb,this.node.matrix),o.encapsulate(u.transformedAabb)),r++;this.aabb=o}return this.aabb}}class eb{constructor(r,o,u,h,g,y,_,S){this.id=u,this.layers=r,this.layerIds=this.layers.map(C=>C.fqid),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.modelTraits|=Gp.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,h&&(this.modelTraits|=Gp.HasMapboxMeshFeatures),g&&(this.modelTraits|=Gp.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=y,this.worldview=S,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const C of o)this.nodesInfo.push(new Kk(C)),Gk(C,_.featureIndexArray.length,_.grid),_.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,_.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(r,o){for(const u of this.getNodesInfo()){const h=u.node;h.footprint&&o.push({footprint:h.footprint,id:r})}}update(r){const o=Object.keys(r).length!==0;if(o&&!this.stateDependentLayers.length)return;const u=o?this.stateDependentLayers:this.layers;if(!Da(r,this.states))for(const h of u)this.evaluate(h,r);this.states=structuredClone(r)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(r){if(!this.needsUpload)return;const o=this.getNodesInfo();for(const u of o){const h=u.node;this.uploaded?this.updatePbrBuffer(h):Fx(h,r,!0)}for(const u of o)Qv(u.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(r){let o=!1;if(!r.meshes)return o;for(const u of r.meshes)u.pbrBuffer&&(u.pbrBuffer.updateData(u.featureArray),o=!0);return o}needsReEvaluation(r,o,u){const h=r.transform.projectionOptions,g=r.style.getBrightness(),y=this.brightness!==g;if(!this.uploaded||this.dirty||h.name!==this.projection.name||gg(u.paint.get("model-color").value,y)||gg(u.paint.get("model-color-mix-intensity").value,y)||gg(u.paint.get("model-roughness").value,y)||gg(u.paint.get("model-emissive-strength").value,y)||gg(u.paint.get("model-height-based-emissive-strength-multiplier").value,y)){this.projection=h,this.brightness=g;const _=this.getNodesInfo();for(const S of _)S.state=null;return!0}return!1}evaluateTransform(r,o){if(r.transform.zoom===this.zoom)return;this.zoom=r.transform.zoom;const u=this.getNodesInfo(),h=this.id.canonical;for(const g of u){const y=g.feature;g.evaluatedTranslation=o.paint.get("model-translation").evaluate(y,{},h),g.evaluatedScale=o.paint.get("model-scale").evaluate(y,{},h)}}evaluate(r,o){const u=this.getNodesInfo();for(const h of u){if(!h.node.meshes)continue;const g=h.feature,y=o&&o[g.id];if(Da(y,h.state))continue;h.state=structuredClone(y);const _=h.node.meshes&&h.node.meshes[0].featureData,S=h.evaluatedColor[2],C=h.evaluatedRMEA[2],P=this.id.canonical;if(h.hasTranslucentParts=!1,_){for(let R=0;R<Wk.length;R++){const D=Wk[R];D.length&&(g.properties.part=D);const B=r.paint.get("model-color").evaluate(g,y,P).toPremultipliedRenderColor(null),$=r.paint.get("model-color-mix-intensity").evaluate(g,y,P);h.evaluatedColor[R]=[B.r,B.g,B.b,$],h.evaluatedRMEA[R][0]=r.paint.get("model-roughness").evaluate(g,y,P),h.evaluatedRMEA[R][2]=r.paint.get("model-emissive-strength").evaluate(g,y,P),h.evaluatedRMEA[R][3]=B.a,h.emissionHeightBasedParams[R]=r.paint.get("model-height-based-emissive-strength-multiplier").evaluate(g,y,P),!h.hasTranslucentParts&&B.a<1&&(h.hasTranslucentParts=!0)}delete g.properties.part,i8(h,S!==h.evaluatedColor[2]||C!==h.evaluatedRMEA[2],this.modelTraits)}else h.evaluatedRMEA[0][2]=r.paint.get("model-emissive-strength").evaluate(g,y,P);h.evaluatedTranslation=r.paint.get("model-translation").evaluate(g,y,P),h.evaluatedScale=r.paint.get("model-scale").evaluate(g,y,P),this.updatePbrBuffer(h.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(r,o,u,h){const g=r.findDEMTileFor(u);if(g&&(g.tileID.canonical!==this.terrainTile||o!==this.terrainExaggeration)){if(g.dem&&g.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=g.tileID.overscaledZ;const y=Wp.create(r,u,g);if(!y)return;this.modelTraits&Gp.HasMapboxMeshFeatures&&this.updateDEM(r,y,u,h);for(const _ of this.getNodesInfo()){const S=_.node;if(!S.footprint||!S.footprint.vertices||!S.footprint.vertices.length)continue;const C=S.footprint.vertices;let P=y.getElevationAt(C[0].x,C[0].y,!0,!0);for(let R=1;R<C.length;R++)P=Math.min(P,y.getElevationAt(C[R].x,C[R].y,!0,!0));S.elevation=P}}this.terrainTile=g.tileID.canonical,this.terrainExaggeration=o}}updateDEM(r,o,u,h){let g=o._dem._modifiedForSources[h];if(g===void 0&&(o._dem._modifiedForSources[h]=[],g=o._dem._modifiedForSources[h]),g.includes(u.canonical))return;const y=o._dem.dim;g.push(u.canonical);let _=!1;for(const S of this.getNodesInfo()){const C=S.node;if(!C.footprint||!C.footprint.grid)continue;const P=C.footprint.grid,R=o.tileCoordToPixel(P.min.x,P.min.y),D=o.tileCoordToPixel(P.max.x,P.max.y),B=Math.min(Math.min(y-D.y,R.x),Math.min(R.y,y-D.x));if(B<0)continue;const $=Te(B,2,5);let q=Math.max(0,R.x-$),W=Math.max(0,R.y-$),J=Math.min(D.x+$,y-1),ce=Math.min(D.y+$,y-1);for(let de=W;de<=ce;++de)for(let be=q;be<=J;++be)sh[de*y+be]=255;let ue=0,H=0;for(let de=0;de<P.cellsY;++de)for(let be=0;be<P.cellsX;++be){if(!P.cells[de*P.cellsX+be])continue;const Oe=o.tileCoordToPixel(P.min.x+be/P.xScale,P.min.y+de/P.yScale),Re=o.tileCoordToPixel(P.min.x+(be+1)/P.xScale,P.min.y+(de+1)/P.yScale);for(let Be=Oe.y;Be<=Math.min(Re.y+1,y-1);++Be)for(let je=Oe.x;je<=Math.min(Re.x+1,y-1);++je)sh[Be*y+je]===255&&(sh[Be*y+je]=0,ue+=o.getElevationAtPixel(je,Be),H++)}const se=ue/H;q=Math.max(1,R.x-$),W=Math.max(1,R.y-$),J=Math.min(D.x+$,y-2),ce=Math.min(D.y+$,y-2),_=!0;for(let de=W;de<=ce;++de)for(let be=q;be<=J;++be)sh[de*y+be]===0&&(Nx[de*y+be]=o._dem.set(be,de,se));for(let de=1;de<$;++de){q=Math.max(1,R.x-de),W=Math.max(1,R.y-de),J=Math.min(D.x+de,y-2),ce=Math.min(D.y+de,y-2);for(let be=W;be<=ce;++be)for(let Oe=q;Oe<=J;++Oe){const Re=be*y+Oe;if(sh[Re]===255){let Be=0,je=0,at=-1,At=-1;for(let yt=-1;yt<=1;++yt)for(let Pt=-1;Pt<=1;++Pt){const Rt=(be+yt)*y+Oe+Pt;if(sh[Rt]>=de)continue;const ct=Nx[Rt],Tt=Math.abs(ct);Tt>je&&(Be=ct,je=Tt,at=Pt,At=yt)}if(je>.1){const yt=1-(de+.5*Math.abs(at*At))/$;let Pt=o._dem.get(Oe,be)+Be*yt;const Rt=o._dem.get(Oe+at,be+At),ct=o._dem.get(Oe-at,be-At,!0);(Pt-Rt)*(Pt-ct)>0&&(Pt=(Rt+ct)/2),Nx[Re]=o._dem.set(Oe,be,Pt),sh[Re]=de}}}}}_&&(o._demTile.needsDEMTextureUpload=!0,o._dem._timestamp=Js.now())}setFilter(r){this.filter=r?wm(r):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(r=>this.filter.filter(new Ur(this.id.overscaledZ,{worldview:this.worldview}),r.feature,this.id.canonical)):this.nodesInfo}destroy(){const r=this.getNodesInfo();for(const o of r)Qv(o.node),$x(o.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(r,o){if(o.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=o.updateTime;const u=o.getReplacementRegionsForTile(r.toUnwrapped());for(const h of this.getNodesInfo()){const g=h.node.footprint;h.hiddenByReplacement=!!g&&!u.find(y=>y.footprint===g)}}getHeightAtTileCoord(r,o){const u=[],h=[0,0,0],g=oe([]);for(const y of this.getNodesInfo()){const _=y.node.meshes[0],S=_.transformedAabb;if(r<S.min[0]||o<S.min[1]||r>S.max[0]||o>S.max[1])continue;if(y.node.hidden===!0)return{height:1/0,maxHeight:y.feature.properties.height,hidden:!1,verticalScale:y.evaluatedScale[2]};fe(g,y.node.matrix),h[0]=r,h[1]=o,cn(h,h,g);const C=(h[0]-_.aabb.min[0])/(_.aabb.max[0]-_.aabb.min[0])*oh|0,P=Math.min(63,(h[1]-_.aabb.min[1])/(_.aabb.max[1]-_.aabb.min[1])*oh|0)*oh+Math.min(63,C),R=_.heightmap[P];if(!(R<0&&y.node.footprint))return y.hiddenByReplacement?void 0:{height:R,maxHeight:y.feature.properties.height,hidden:!1,verticalScale:y.evaluatedScale[2]};if(y.node.footprint.grid.query(new Vt(r,o),new Vt(r,o),u),u.length>0)return{height:void 0,maxHeight:y.feature.properties.height,hidden:y.hiddenByReplacement,verticalScale:y.evaluatedScale[2]}}}}function gg(a,r){return a instanceof Md&&!a.isLightConstant&&r}function r8(a,r,o,u,h,g,y,_){let S=(61440&r|(61440&r)>>4)>>8,C=(3840&r|(3840&r)>>4)>>4,P=240&r|(240&r)>>4;o[3]>0&&(S=Mn(S,255*o[0],o[3]),C=Mn(C,255*o[1],o[3]),P=Mn(P,255*o[2],o[3]));const R=S<<8|C,D=P<<8|Math.floor(255*u[3]),B=function(de){const be=Te(de,0,2);return Math.min(Math.round(.5*be*255),255)}(u[2])<<8|15*u[0]<<4|15*u[1],$=Te(h[0],0,1),q=Te(h[1],0,1),W=Te(h[2],0,1),J=Te(h[3],0,1);let ce,ue,H,se;if($!==q&&y!==g&&q!==$){const de=y-g;ue=1/(de*(q-$)),H=-(g+de*$)/(de*(q-$));const be=Te(h[4],-1,1);se=Math.pow(10,be),ce=255*W<<8|255*J}else ce=65535,ue=0,H=1,se=1;if(a.emplaceBack(R,D,B,ce,ue,H,se),_){const de=_.length;_.clear();for(let be=0;be<de;be++)_.emplaceBack(R,D,B,ce,ue,H,se)}}function i8(a,r,o){const u=a.node;let h=0;const g=o&Gp.HasMeshoptCompression;for(const y of u.meshes){if(u.lights&&u.lightMeshIndex===h||!y.featureData)continue;y.featureArray=new qd,y.featureArray.reserve(y.featureData.length);let _=r;for(const S of y.featureData){const C=g?65535&S:S>>16&65535,P=g?S>>16&65535:65535&S,R=(15&P)<8?15&P:0,D=a.evaluatedRMEA[R],B=a.evaluatedColor[R],$=a.emissionHeightBasedParams[R];let q;if(_&&R===2&&u.lights&&(q=new qd,q.resize(10*u.lights.length)),r8(y.featureArray,C,B,D,$,y.aabb.min[2],y.aabb.max[2],q),q&&_){_=!1;const W=u.meshes[u.lightMeshIndex];W.featureArray=q,W.featureArray._trim()}}y.featureArray._trim(),h++}}function Zk(a,r,o,u){const h=1<<a.z;r.lat=Ze((u/Ut+a.y)/h),r.lng=De((o/Ut+a.x)/h)}function o8(a,r,o,u){const h=a.getNodesInfo()[r];if(!h||h.hiddenByReplacement||!h.node.meshes)return;let g=Number.MAX_VALUE;const y=h.node,_=o.tile,S=u.calculatePosMatrix(_.tileID.toUnwrapped(),u.worldSize),C=h.evaluatedScale;let P=0;u.elevation&&y.elevation&&(P=y.elevation*u.elevation.exaggeration()),ne(S,S,[(y.anchor?y.anchor[0]:0)*(C[0]-1),(y.anchor?y.anchor[1]:0)*(C[1]-1),P]),te(S,S,C);const R=o.queryGeometry,D=R.isPointQuery()?R.screenBounds:R.screenGeometry,B=function(q){const W=me([],S,q.matrix);me(W,u.expandedFarZProjMatrix,W);for(let J=0;J<q.meshes.length;++J){const ce=q.meshes[J];if(J===q.lightMeshIndex)continue;const ue=Fk(D,u,W,ce.aabb);ue!=null&&(g=Math.min(ue,g))}if(q.children)for(const J of q.children)B(J)};if(B(y),g===Number.MAX_VALUE)return;const $=new ae(0,0);return Zk(_.tileID.canonical,$,h.node.anchor[0],h.node.anchor[1]),{intersectionZ:g,position:$,feature:h.feature}}tn(eb,"Tiled3dModelBucket",{omit:["layers"]}),tn(Kk,"Tiled3dModelFeature");const s8={circle:class extends qo{constructor(a,r,o,u){super(a,{layout:WS||(WS=new Mi({"circle-sort-key":new Zt(We.layout_circle["circle-sort-key"]),"circle-elevation-reference":new Mt(We.layout_circle["circle-elevation-reference"]),visibility:new Mt(We.layout_circle.visibility)})),paint:KS||(KS=new Mi({"circle-radius":new Zt(We.paint_circle["circle-radius"]),"circle-color":new Zt(We.paint_circle["circle-color"]),"circle-blur":new Zt(We.paint_circle["circle-blur"]),"circle-opacity":new Zt(We.paint_circle["circle-opacity"]),"circle-translate":new Mt(We.paint_circle["circle-translate"]),"circle-translate-anchor":new Mt(We.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Mt(We.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Mt(We.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Zt(We.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Zt(We.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Zt(We.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Mt(We.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},r,o,u)}createBucket(a){return new Us(a)}queryRadius(a){const r=a;return Op("circle-radius",this,r)+Op("circle-stroke-width",this,r)+hv(this.paint.get("circle-translate"))}queryIntersectsFeature(a,r,o,u,h,g,y,_){const S=GS(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),C=this.paint.get("circle-radius").evaluate(r,o)+this.paint.get("circle-stroke-width").evaluate(r,o);return aC(a,u,g,y,_,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",S,C)}getProgramIds(){return["circle"]}getDefaultProgramParams(a,r,o){const u=sC(this);return{config:new _u(this,{zoom:r,lut:o}),defines:u,overrideFog:!1}}is3D(a){return!a&&!!this.layout&&this.layout.get("circle-elevation-reference")!=="none"}hasElevation(){return this.layout&&this.layout.get("circle-elevation-reference")!=="none"}},heatmap:class extends qo{createBucket(a){return new cC(a)}constructor(a,r,o,u){super(a,{layout:uC||(uC=new Mi({visibility:new Mt(We.layout_heatmap.visibility)})),paint:dC||(dC=new Mi({"heatmap-radius":new Zt(We.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Zt(We.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Mt(We.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vc(We.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Mt(We.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},r,o,u),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=qm({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return Op("heatmap-radius",this,a)}queryIntersectsFeature(a,r,o,u,h,g,y,_){const S=this.paint.get("heatmap-radius").evaluate(r,o);return aC(a,u,g,y,_,!0,!0,new Vt(0,0),S)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(a,r,o){return a==="heatmap"?{config:new _u(this,{zoom:r,lut:o}),overrideFog:!1}:{}}},hillshade:class extends qo{constructor(a,r,o,u){super(a,{layout:hC||(hC=new Mi({visibility:new Mt(We.layout_hillshade.visibility)})),paint:pC||(pC=new Mi({"hillshade-illumination-direction":new Mt(We.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Mt(We.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Mt(We.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Mt(We.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Mt(We.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Mt(We.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Mt(We.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},r,o,u)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(a,r,o){return{overrideFog:!1}}},fill:class extends qo{constructor(a,r,o,u){super(a,{layout:IC||(IC=new Mi({"fill-sort-key":new Zt(We.layout_fill["fill-sort-key"]),visibility:new Mt(We.layout_fill.visibility),"fill-elevation-reference":new Mt(We.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Zt(We.layout_fill["fill-construct-bridge-guard-rail"])})),paint:PC||(PC=new Mi({"fill-antialias":new Mt(We.paint_fill["fill-antialias"]),"fill-opacity":new Zt(We.paint_fill["fill-opacity"]),"fill-color":new Zt(We.paint_fill["fill-color"]),"fill-outline-color":new Zt(We.paint_fill["fill-outline-color"]),"fill-translate":new Mt(We.paint_fill["fill-translate"]),"fill-translate-anchor":new Mt(We.paint_fill["fill-translate-anchor"]),"fill-pattern":new Zt(We.paint_fill["fill-pattern"]),"fill-pattern-cross-fade":new Mt(We.paint_fill["fill-pattern-cross-fade"]),"fill-emissive-strength":new Mt(We.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Zt(We.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Zt(We.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Zt(We.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},r,o,u)}getProgramIds(){const a=this.paint.get("fill-pattern"),r=a&&a.constantOr(1),o=[r?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(r&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getDefaultProgramParams(a,r,o){return{config:new _u(this,{zoom:r,lut:o}),overrideFog:!1}}recalculate(a,r){super.recalculate(a,r);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Y1(a)}queryRadius(){return hv(this.paint.get("fill-translate"))}queryIntersectsFeature(a,r,o,u,h,g){return!a.queryGeometry.isAboveHorizon&&oa(HS(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),u)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(a){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const r=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return a!=null?r&&!a:r}hasElevation(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}hasShadowPass(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}},"fill-extrusion":class extends qo{constructor(a,r,o,u){super(a,{layout:e3||(e3=new Mi({visibility:new Mt(We["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Mt(We["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:t3||(t3=new Mi({"fill-extrusion-opacity":new Mt(We["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Zt(We["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Mt(We["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Mt(We["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Zt(We["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-pattern-cross-fade":new Mt(We["paint_fill-extrusion"]["fill-extrusion-pattern-cross-fade"]),"fill-extrusion-height":new Zt(We["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Zt(We["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Mt(We["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Mt(We["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Mt(We["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Mt(We["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Mt(We["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Mt(We["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Mt(We["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Mt(We["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Mt(We["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Mt(We["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Zt(We["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Zt(We["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Mt(We["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Mt(We["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Mt(We["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Mt(We["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Zt(We["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Zt(We["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Mt(We["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},r,o,u),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(a){return new kv(a)}queryRadius(){return hv(this.paint.get("fill-extrusion-translate"))}is3D(a){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(a,r,o,u,h,g,y,_,S){const C=GS(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),P=this.paint.get("fill-extrusion-height").evaluate(r,o),R=this.paint.get("fill-extrusion-base").evaluate(r,o),D=[0,0],B=_&&g.elevation,$=g.elevation?g.elevation.exaggeration():1,q=a.tile.getBucket(this);if(B&&q instanceof kv){const H=q.centroidVertexArray,se=S+1;se<H.length&&(D[0]=H.geta_centroid_pos0(se),D[1]=H.geta_centroid_pos1(se))}if(D[0]===0&&D[1]===1)return!1;g.projection.name==="globe"&&(u=QC([u],[new Vt(0,0),new Vt(Ut,Ut)],a.tileID.canonical).map(H=>H.polygon).flat());const W=B?_:null,[J,ce]=function(H,se,de,be,Oe,Re,Be,je,at,At,yt){return H.projection.name==="globe"?function(Pt,Rt,ct,Tt,ot,lt,Lt,zt,Sn,un,Gt){const Dt=[],Vn=[],ln=Pt.projection.upVectorScale(Gt,Pt.center.lat,Pt.worldSize).metersToTile,hn=[0,0,0,1],Dn=[0,0,0,1],Kn=(sr,Qn,ar,Dr)=>{sr[0]=Qn,sr[1]=ar,sr[2]=Dr,sr[3]=1},Wn=JC();ct>0&&(ct+=Wn),Tt+=Wn;for(const sr of Rt){const Qn=[],ar=[];for(const Dr of sr){const si=Dr.x+ot.x,ye=Dr.y+ot.y,_e=Pt.projection.projectTilePoint(si,ye,Gt),dt=Pt.projection.upVector(Gt,Dr.x,Dr.y);let Ft=ct,Wt=Tt;if(Lt){const Ht=a3(si,ye,ct,Tt,Lt,zt,Sn,un);Ft+=Ht.base,Wt+=Ht.top}ct!==0?Kn(hn,_e.x+dt[0]*ln*Ft,_e.y+dt[1]*ln*Ft,_e.z+dt[2]*ln*Ft):Kn(hn,_e.x,_e.y,_e.z),Kn(Dn,_e.x+dt[0]*ln*Wt,_e.y+dt[1]*ln*Wt,_e.z+dt[2]*ln*Wt),cn(hn,hn,lt),cn(Dn,Dn,lt),Qn.push(new th(hn[0],hn[1],hn[2])),ar.push(new th(Dn[0],Dn[1],Dn[2]))}Dt.push(Qn),Vn.push(ar)}return[Dt,Vn]}(H,se,de,be,Oe,Re,Be,je,at,At,yt):Be?function(Pt,Rt,ct,Tt,ot,lt,Lt,zt,Sn){const un=[],Gt=[],Dt=[0,0,0,1];for(const Vn of Pt){const ln=[],hn=[];for(const Dn of Vn){const Kn=Dn.x+Tt.x,Wn=Dn.y+Tt.y,sr=a3(Kn,Wn,Rt,ct,lt,Lt,zt,Sn);Dt[0]=Kn,Dt[1]=Wn,Dt[2]=sr.base,Dt[3]=1,_n(Dt,Dt,ot),Dt[3]=Math.max(Dt[3],1e-5);const Qn=new th(Dt[0]/Dt[3],Dt[1]/Dt[3],Dt[2]/Dt[3]);Dt[0]=Kn,Dt[1]=Wn,Dt[2]=sr.top,Dt[3]=1,_n(Dt,Dt,ot),Dt[3]=Math.max(Dt[3],1e-5);const ar=new th(Dt[0]/Dt[3],Dt[1]/Dt[3],Dt[2]/Dt[3]);ln.push(Qn),hn.push(ar)}un.push(ln),Gt.push(hn)}return[un,Gt]}(se,de,be,Oe,Re,Be,je,at,At):function(Pt,Rt,ct,Tt,ot){const lt=[],Lt=[],zt=ot[8]*Rt,Sn=ot[9]*Rt,un=ot[10]*Rt,Gt=ot[11]*Rt,Dt=ot[8]*ct,Vn=ot[9]*ct,ln=ot[10]*ct,hn=ot[11]*ct;for(const Dn of Pt){const Kn=[],Wn=[];for(const sr of Dn){const Qn=sr.x+Tt.x,ar=sr.y+Tt.y,Dr=ot[0]*Qn+ot[4]*ar+ot[12],si=ot[1]*Qn+ot[5]*ar+ot[13],ye=ot[2]*Qn+ot[6]*ar+ot[14],_e=ot[3]*Qn+ot[7]*ar+ot[15],dt=Dr+zt,Ft=si+Sn,Wt=ye+un,Ht=Math.max(_e+Gt,1e-5),sn=Dr+Dt,Rn=si+Vn,dr=ye+ln,hr=Math.max(_e+hn,1e-5);Kn.push(new th(dt/Ht,Ft/Ht,Wt/Ht)),Wn.push(new th(sn/hr,Rn/hr,dr/hr))}lt.push(Kn),Lt.push(Wn)}return[lt,Lt]}(se,de,be,Oe,Re)}(g,u,R,P,C,y,W,D,$,g.center.lat,a.tileID.canonical),ue=a.queryGeometry;return function(H,se,de){let be=1/0;oa(de,se)&&(be=s3(de,se[0]));for(let Oe=0;Oe<se.length;Oe++){const Re=se[Oe],Be=H[Oe];for(let je=0;je<Re.length-1;je++){const at=Re[je],At=[at,Re[je+1],Be[je+1],Be[je],at];as(de,At)&&(be=Math.min(be,s3(de,At)))}}return be!==1/0&&be}(J,ce,ue.isPointQuery()?ue.screenBounds:ue.screenGeometry)}},building:class extends qo{constructor(a,r,o,u){super(a,{layout:b3||(b3=new Mi({visibility:new Mt(We.layout_building.visibility),"building-roof-shape":new Zt(We.layout_building["building-roof-shape"]),"building-height":new Zt(We.layout_building["building-height"]),"building-base":new Zt(We.layout_building["building-base"])})),paint:_3||(_3=new Mi({"building-opacity":new Mt(We.paint_building["building-opacity"]),"building-ambient-occlusion-wall-intensity":new Mt(We.paint_building["building-ambient-occlusion-wall-intensity"]),"building-ambient-occlusion-ground-intensity":new Mt(We.paint_building["building-ambient-occlusion-ground-intensity"]),"building-ambient-occlusion-ground-radius":new Mt(We.paint_building["building-ambient-occlusion-ground-radius"]),"building-ambient-occlusion-ground-attenuation":new Mt(We.paint_building["building-ambient-occlusion-ground-attenuation"]),"building-vertical-scale":new Mt(We.paint_building["building-vertical-scale"]),"building-cast-shadows":new Mt(We.paint_building["building-cast-shadows"]),"building-color":new Zt(We.paint_building["building-color"]),"building-emissive-strength":new Zt(We.paint_building["building-emissive-strength"]),"building-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},r,o,u),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(a){return new v3(a)}},line:class extends qo{constructor(a,r,o,u){const h=A3();super(a,h,r,o,u),h.layout&&(this.layout=new yc(h.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const r=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=r._styleExpression&&r._styleExpression.expression instanceof kd,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,r){super.recalculate(a,r),this.paint._values["line-floorwidth"]=(()=>{if(ig)return ig;const o=A3();return ig=new rM(o.paint.properties["line-width"].specification),ig.useIntegerZoom=!0,ig})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new ux(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(a,r,o){const u=I3(this);return{config:new _u(this,{zoom:r,lut:o}),defines:u,overrideFog:!1}}queryRadius(a){const r=a,o=R3(Op("line-width",this,r),Op("line-gap-width",this,r)),u=Op("line-offset",this,r);return o/2+Math.abs(u)+hv(this.paint.get("line-translate"))}queryIntersectsFeature(a,r,o,u,h,g){if(a.queryGeometry.isAboveHorizon)return!1;const y=HS(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),_=a.pixelToTileUnitsFactor/2*R3(this.paint.get("line-width").evaluate(r,o),this.paint.get("line-gap-width").evaluate(r,o)),S=this.paint.get("line-offset").evaluate(r,o);return S&&(u=function(C,P){const R=[],D=new Vt(0,0);for(let B=0;B<C.length;B++){const $=C[B],q=[];for(let W=0;W<$.length;W++){const J=$[W],ce=$[W+1],ue=W===0?D:J.sub($[W-1])._unit()._perp(),H=W===$.length-1?D:ce.sub(J)._unit()._perp(),se=ue._add(H)._unit();se._mult(1/(se.x*H.x+se.y*H.y)),q.push(se._mult(P)._add(J))}R.push(q)}return R}(u,S*a.pixelToTileUnitsFactor)),function(C,P,R){for(let D=0;D<P.length;D++){const B=P[D];if(C.length>=3){for(let $=0;$<B.length;$++)if(ba(C,B[$]))return!0}if(Il(C,B,R))return!0}return!1}(y,u,_)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(a){return!this.hasElevatedBuckets}hasElevation(){return this.layout&&this.layout.get("line-elevation-reference")!=="none"}},symbol:Gv,background:class extends qo{constructor(a,r,o,u){super(a,{layout:xk||(xk=new Mi({visibility:new Mt(We.layout_background.visibility)})),paint:wk||(wk=new Mi({"background-pitch-alignment":new Mt(We.paint_background["background-pitch-alignment"]),"background-color":new Mt(We.paint_background["background-color"]),"background-pattern":new Mt(We.paint_background["background-pattern"]),"background-opacity":new Mt(We.paint_background["background-opacity"]),"background-emissive-strength":new Mt(We.paint_background["background-emissive-strength"]),"background-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},r,o,u)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(a,r,o){return{overrideFog:!1}}is3D(a){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:Ek,"raster-particle":Dk,sky:class extends qo{constructor(a,r,o,u){super(a,{layout:Ak||(Ak=new Mi({visibility:new Mt(We.layout_sky.visibility)})),paint:Rk||(Rk=new Mi({"sky-type":new Mt(We.paint_sky["sky-type"]),"sky-atmosphere-sun":new Mt(We.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Mt(We.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Mt(We.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Mt(We.paint_sky["sky-gradient-radius"]),"sky-gradient":new vc(We.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Mt(We.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Mt(We.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Mt(We.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},r,o,u),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=qm({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const r=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==r.azimuthal||this._lightPosition.polar!==r.polar}return!1}getCenter(a,r){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),h=!u,g=a.style.light,y=g.properties.get("position");return h&&g.properties.get("anchor")==="viewport"&&Zn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?Dx(y.azimuthal,90-y.polar,r):Dx(u[0],90-u[1],r)}const o=this.paint.get("sky-gradient-center");return Dx(o[0],90-o[1],r)}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}},slot:class extends qo{constructor(a,r,o,u){super(a,{paint:Mk||(Mk=new Mi({}))},r,null)}},model:class extends qo{constructor(a,r,o,u){super(a,{layout:jk||(jk=new Mi({visibility:new Mt(We.layout_model.visibility),"model-id":new Zt(We.layout_model["model-id"])})),paint:Uk||(Uk=new Mi({"model-opacity":new Zt(We.paint_model["model-opacity"]),"model-rotation":new Zt(We.paint_model["model-rotation"]),"model-scale":new Zt(We.paint_model["model-scale"]),"model-translation":new Zt(We.paint_model["model-translation"]),"model-color":new Zt(We.paint_model["model-color"]),"model-color-mix-intensity":new Zt(We.paint_model["model-color-mix-intensity"]),"model-type":new Mt(We.paint_model["model-type"]),"model-cast-shadows":new Mt(We.paint_model["model-cast-shadows"]),"model-receive-shadows":new Mt(We.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Mt(We.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Zt(We.paint_model["model-emissive-strength"]),"model-roughness":new Zt(We.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Zt(We.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Mt(We.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Mt(We.paint_model["model-front-cutoff"]),"model-color-use-theme":new Zt({type:"string",default:"default","property-type":"data-driven"})}))},r,o,u),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(a){return new Bx(a)}getProgramIds(){return["model"]}is3D(a){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(a){return a instanceof eb?Ut-1:0}queryIntersectsFeature(a,r,o,u,h,g){if(!this.modelManager)return!1;const y=this.modelManager,_=a.tile.getBucket(this);if(!(_&&_ instanceof Bx))return!1;for(const S in _.instancesPerModel){const C=_.instancesPerModel[S],P=r.id!==void 0?r.id:r.properties&&r.properties.hasOwnProperty("id")?r.properties.id:void 0;if(C.idToFeaturesIndex.hasOwnProperty(P)){const R=C.features[C.idToFeaturesIndex[P]],D=y.getModel(S,this.scope);if(!D)return!1;let B=K();const $=new ae(0,0),q=_.canonical;let W=Number.MAX_VALUE;for(let J=0;J<R.instancedDataCount;++J){const ce=16*(R.instancedDataOffset+J),ue=C.instancedDataArray.float32,H=[ue[ce+4],ue[ce+5],ue[ce+6]];Zk(q,$,ue[ce],0|ue[ce+1]),qk(B,D,g,$,R.rotation,R.scale,H,!1,!1,!1),g.projection.name==="globe"&&(B=Ox(B,g));const se=me([],g.projMatrix,B),de=a.queryGeometry,be=Fk(de.isPointQuery()?de.screenBounds:de.screenGeometry,g,se,D.aabb);be!=null&&(W=Math.min(be,W))}return W!==Number.MAX_VALUE&&W}}return!1}_handleOverridablePaintPropertyUpdate(a,r,o){return!(!this.layout||r.isDataDriven()||o.isDataDriven()||a!=="model-color"&&a!=="model-color-mix-intensity"&&a!=="model-rotation"&&a!=="model-scale"&&a!=="model-translation"&&a!=="model-emissive-strength")}_isPropertyZoomDependent(a){const r=this._transitionablePaint._values[a];return r!=null&&r.value!=null&&r.value.expression!=null&&r.value.expression instanceof Dd}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends qo{constructor(a,r,o,u){super(a,{layout:AC||(AC=new Mi({"clip-layer-types":new Mt(We.layout_clip["clip-layer-types"]),"clip-layer-scope":new Mt(We.layout_clip["clip-layer-scope"])})),paint:RC||(RC=new Mi({}))},r,o,u)}recalculate(a,r){super.recalculate(a,r)}createBucket(a){return new MC(a)}is3D(a){return!0}}},Vx=new Ar(0,0,0),jx={PATH_RULE_NON_ZERO:1,PATH_RULE_EVEN_ODD:2},Ux={LINE_CAP_BUTT:1,LINE_CAP_ROUND:2,LINE_CAP_SQUARE:3},tb={LINE_JOIN_MITER:1,LINE_JOIN_MITER_CLIP:2,LINE_JOIN_ROUND:3,LINE_JOIN_BEVEL:4},a8={PAINT_ORDER_FILL_AND_STROKE:1},yg={PATH_COMMAND_MOVE:1,PATH_COMMAND_LINE:2,PATH_COMMAND_QUAD:3,PATH_COMMAND_CUBIC:4,PATH_COMMAND_CLOSE:5},Xk={MASK_TYPE_LUMINANCE:1};function l8(a,r,o){a===1&&r.icons.push(function(u,h){return function(g){if(g.usvg_tree.height||(g.usvg_tree.height=g.usvg_tree.width),!g.metadata)return g;const{metadata:y}=g;if(y.content_area){const{content_area:_}=y;_.top==null&&(_.top=_.left),_.width==null&&(_.width=g.usvg_tree.width),_.height==null&&(_.height=_.width)}return y.stretch_x&&y.stretch_x.length&&Yk(y,"x"),y.stretch_y&&y.stretch_y.length&&Yk(y,"y"),g}(u.readFields(c8,{name:void 0},h))}(o,o.readVarint()+o.pos))}function Yk(a,r){const o=[],u=a[`stretch_${r}`];let h=null;for(let g=0;g<u.length;g++)h===null?h=o.length===0?u[0]:o[o.length-1][1]+u[g]:(o.push([h,h+u[g]]),h=null);a[`stretch_${r}_areas`]=o}function c8(a,r,o){a===1?r.name=o.readString():a===2?r.metadata=function(u,h){return u.readFields(u8,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},h)}(o,o.readVarint()+o.pos):a===3&&(r.usvg_tree=function(u,h){return u.readFields(p8,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},h)}(o,o.readVarint()+o.pos),r.data="usvg_tree")}function u8(a,r,o){a===1?r.stretch_x=o.readPackedVarint():a===2?r.stretch_y=o.readPackedVarint():a===3?r.content_area=function(u,h){return u.readFields(d8,{left:0},h)}(o,o.readVarint()+o.pos):a===4&&r.variables.push(function(u,h){return u.readFields(h8,{name:void 0},h)}(o,o.readVarint()+o.pos))}function d8(a,r,o){a===1?r.left=o.readVarint():a===2?r.width=o.readVarint():a===3?r.top=o.readVarint():a===4&&(r.height=o.readVarint())}function h8(a,r,o){a===1?r.name=o.readString():a===2&&(r.rgb_color=ib(o.readVarint()),r.value="rgb_color")}function p8(a,r,o){a===1?r.width=r.height=o.readVarint():a===2?r.height=o.readVarint():a===3?r.children.push(nb(o,o.readVarint()+o.pos)):a===4?r.linear_gradients.push(function(u,h){return u.readFields(_8,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},h)}(o,o.readVarint()+o.pos)):a===5?r.radial_gradients.push(function(u,h){return u.readFields(w8,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},h)}(o,o.readVarint()+o.pos)):a===7?r.clip_paths.push(function(u,h){return u.readFields(S8,{children:[]},h)}(o,o.readVarint()+o.pos)):a===8&&r.masks.push(function(u,h){const g=u.readFields(C8,{left:0,width:20,mask_type:Xk.MASK_TYPE_LUMINANCE,children:[]},h);return g.height==null&&(g.height=g.width),g.top==null&&(g.top=g.left),g}(o,o.readVarint()+o.pos))}function nb(a,r){return a.readFields(f8,{},r)}function f8(a,r,o){a===1?(r.group=function(u,h){return u.readFields(m8,{opacity:255,children:[]},h)}(o,o.readVarint()+o.pos),r.node="group"):a===2&&(r.path=function(u,h){return u.readFields(y8,{paint_order:1,commands:[],step:1,diffs:[],rule:jx.PATH_RULE_NON_ZERO},h)}(o,o.readVarint()+o.pos),r.node="path")}function m8(a,r,o){a===1?r.transform=rb(o,o.readVarint()+o.pos):a===2?r.opacity=o.readVarint():a===5?r.clip_path_idx=o.readVarint():a===6?r.mask_idx=o.readVarint():a===7&&r.children.push(nb(o,o.readVarint()+o.pos))}function rb(a,r){return a.readFields(g8,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},r)}function g8(a,r,o){a===1?r.sx=o.readFloat():a===2?r.ky=o.readFloat():a===3?r.kx=o.readFloat():a===4?r.sy=o.readFloat():a===5?r.tx=o.readFloat():a===6&&(r.ty=o.readFloat())}function y8(a,r,o){a===1?r.fill=function(u,h){return u.readFields(v8,{rgb_color:Vx,paint:"rgb_color",opacity:255},h)}(o,o.readVarint()+o.pos):a===2?r.stroke=function(u,h){return u.readFields(b8,{rgb_color:Vx,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},h)}(o,o.readVarint()+o.pos):a===3?r.paint_order=o.readVarint():a===5?o.readPackedVarint(r.commands):a===6?r.step=o.readFloat():a===7?o.readPackedSVarint(r.diffs):a===8&&(r.rule=o.readVarint())}function v8(a,r,o){a===1?(r.rgb_color=ib(o.readVarint()),r.paint="rgb_color"):a===2?(r.linear_gradient_idx=o.readVarint(),r.paint="linear_gradient_idx"):a===3?(r.radial_gradient_idx=o.readVarint(),r.paint="radial_gradient_idx"):a===5&&(r.opacity=o.readVarint())}function ib(a){return new Ar((a>>16&255)/255,(a>>8&255)/255,(255&a)/255,1)}function b8(a,r,o){a===1?(r.rgb_color=ib(o.readVarint()),r.paint="rgb_color"):a===2?(r.linear_gradient_idx=o.readVarint(),r.paint="linear_gradient_idx"):a===3?(r.radial_gradient_idx=o.readVarint(),r.paint="radial_gradient_idx"):a===5?o.readPackedFloat(r.dasharray):a===6?r.dashoffset=o.readFloat():a===7?r.miterlimit=o.readFloat():a===8?r.opacity=o.readVarint():a===9?r.width=o.readFloat():a===10?r.linecap=o.readVarint():a===11&&(r.linejoin=o.readVarint())}function _8(a,r,o){a===1?r.transform=rb(o,o.readVarint()+o.pos):a===2?r.spread_method=o.readVarint():a===3?r.stops.push(Jk(o,o.readVarint()+o.pos)):a===4?r.x1=o.readFloat():a===5?r.y1=o.readFloat():a===6?r.x2=o.readFloat():a===7&&(r.y2=o.readFloat())}function Jk(a,r){return a.readFields(x8,{offset:0,opacity:255,rgb_color:Vx},r)}function x8(a,r,o){a===1?r.offset=o.readFloat():a===2?r.opacity=o.readVarint():a===3&&(r.rgb_color=ib(o.readVarint()))}function w8(a,r,o){a===1?r.transform=rb(o,o.readVarint()+o.pos):a===2?r.spread_method=o.readVarint():a===3?r.stops.push(Jk(o,o.readVarint()+o.pos)):a===4?r.cx=o.readFloat():a===5?r.cy=o.readFloat():a===6?r.r=o.readFloat():a===7?r.fx=o.readFloat():a===8?r.fy=o.readFloat():a===9&&(r.fr=o.readFloat())}function S8(a,r,o){a===1?r.transform=rb(o,o.readVarint()+o.pos):a===2?r.clip_path_idx=o.readVarint():a===3&&r.children.push(nb(o,o.readVarint()+o.pos))}function C8(a,r,o){a===1?r.left=r.top=o.readFloat():a===2?r.width=r.height=o.readFloat():a===3?r.top=o.readFloat():a===4?r.height=o.readFloat():a===5?r.mask_type=o.readVarint():a===6?r.mask_idx=o.readVarint():a===7&&r.children.push(nb(o,o.readVarint()+o.pos))}class k8{static calculate(r={},o=[]){const u=new Map,h=new Map;if(Object.keys(r).length===0)return u;o.forEach(g=>{h.set(g.name,g.rgb_color||new Ar(0,0,0))});for(const[g,y]of Object.entries(r))h.has(g)?u.set(h.get(g).toString(),y):console.warn(`Ignoring unknown image variable "${g}"`);return u}}function Kp(a,r=255,o){const u=r/255,h=a.toString(),g=o.has(h)?o.get(h).clone():a.clone();return g.a*=u,g.toString()}function vg(a,r){if(!Bh()){const o=document.createElement("canvas");return o.width=a,o.height=r,o}return new OffscreenCanvas(a,r)}function T8(a,r){const o=k8.calculate(r.params,a.metadata?a.metadata.variables:[]),u=a.usvg_tree,h=u.width,g=u.height,y=r.transform?r.transform:new DOMMatrix,_=Math.max(1,Math.round(h*y.a)),S=Math.max(1,Math.round(g*y.d)),C=new DOMMatrix([_/h,0,0,S/g,0,0]),P=vg(_,S).getContext("2d");return qx(P,C,u,u,o),P.getImageData(0,0,_,S)}function qx(a,r,o,u,h){for(const g of u.children)Qk(a,r,o,g,h)}function Qk(a,r,o,u,h){u.group?(a.save(),function(g,y,_,S,C){const P=S.mask_idx!=null?_.masks[S.mask_idx]:null,R=S.clip_path_idx!=null?_.clip_paths[S.clip_path_idx]:null;if(S.transform&&(y=Zp(S.transform).preMultiplySelf(y)),!function($,q,W){return $.opacity!==255||q||W}(S,R!=null,P!=null))return void qx(g,y,_,S,C);const D=vg(g.canvas.width,g.canvas.height),B=D.getContext("2d");qx(B,y,_,S,C),R&&sT(B,y,_,R),P&&aT(B,y,_,P,C),g.globalAlpha=S.opacity/255,g.drawImage(D,0,0)}(a,r,o,u.group,h),a.restore()):u.path&&(a.save(),function(g,y,_,S,C){g.setTransform(y),S.paint_order===a8.PAINT_ORDER_FILL_AND_STROKE?(eT(g,_,S,C),nT(g,_,S,C)):(nT(g,_,S,C),eT(g,_,S,C))}(a,r,o,u.path,h),a.restore())}function eT(a,r,o,u){const h=o.fill;if(!h)return;const g=h.opacity/255;switch(a.save(),a.beginPath(),lT(o,a),h.paint){case"rgb_color":a.fillStyle=Kp(h.rgb_color,h.opacity,u);break;case"linear_gradient_idx":{const y=r.linear_gradients[h.linear_gradient_idx];y.transform&&a.setTransform(Zp(y.transform).preMultiplySelf(a.getTransform())),a.fillStyle=rT(a,y,g,u);break}case"radial_gradient_idx":{const y=r.radial_gradients[h.radial_gradient_idx];y.transform&&a.setTransform(Zp(y.transform).preMultiplySelf(a.getTransform())),a.fillStyle=iT(a,y,g,u)}}a.fill(tT(o)),a.restore()}function tT(a){return a.rule===jx.PATH_RULE_NON_ZERO?"nonzero":a.rule===jx.PATH_RULE_EVEN_ODD?"evenodd":void 0}function nT(a,r,o,u){const h=o.stroke;if(!h)return;const g=cT(o);a.lineWidth=h.width,a.miterLimit=h.miterlimit,a.setLineDash(h.dasharray),a.lineDashOffset=h.dashoffset;const y=h.opacity/255;switch(h.paint){case"rgb_color":a.strokeStyle=Kp(h.rgb_color,h.opacity,u);break;case"linear_gradient_idx":a.strokeStyle=rT(a,r.linear_gradients[h.linear_gradient_idx],y,u,!0);break;case"radial_gradient_idx":a.strokeStyle=iT(a,r.radial_gradients[h.radial_gradient_idx],y,u,!0)}switch(h.linejoin){case tb.LINE_JOIN_MITER_CLIP:case tb.LINE_JOIN_MITER:a.lineJoin="miter";break;case tb.LINE_JOIN_ROUND:a.lineJoin="round";break;case tb.LINE_JOIN_BEVEL:a.lineJoin="bevel"}switch(h.linecap){case Ux.LINE_CAP_BUTT:a.lineCap="butt";break;case Ux.LINE_CAP_ROUND:a.lineCap="round";break;case Ux.LINE_CAP_SQUARE:a.lineCap="square"}a.stroke(g)}function rT(a,r,o,u,h=!1){if(r.stops.length===1){const D=r.stops[0];return Kp(D.rgb_color,D.opacity*o,u)}const{x1:g,y1:y,x2:_,y2:S}=r;let C=new DOMPoint(g,y),P=new DOMPoint(_,S);if(h){const D=Zp(r.transform);C=D.transformPoint(C),P=D.transformPoint(P)}const R=a.createLinearGradient(C.x,C.y,P.x,P.y);for(const D of r.stops)R.addColorStop(D.offset,Kp(D.rgb_color,D.opacity*o,u));return R}function iT(a,r,o,u,h=!1){if(r.stops.length===1){const J=r.stops[0];return Kp(J.rgb_color,J.opacity*o,u)}const g=Zp(r.transform),{fx:y,fy:_,fr:S,cx:C,cy:P,r:R}=r;let D=new DOMPoint(y,_),B=new DOMPoint(C,P),$=S,q=R;if(h){D=g.transformPoint(D),B=g.transformPoint(B);const J=(g.a+g.d)/2;$=S*J,q=r.r*J}const W=a.createRadialGradient(D.x,D.y,$,B.x,B.y,q);for(const J of r.stops)W.addColorStop(J.offset,Kp(J.rgb_color,J.opacity*o,u));return W}function oT(a,r,o,u){const h=u.transform?Zp(u.transform).preMultiplySelf(r):r,g=vg(a.canvas.width,a.canvas.height),y=g.getContext("2d");for(const S of u.children)if(S.group)oT(y,h,o,S.group);else if(S.path){const C=S.path,P=new Path2D;P.addPath(cT(C),h),y.fill(P,tT(C))}const _=u.clip_path_idx!=null?o.clip_paths[u.clip_path_idx]:null;_&&sT(y,h,o,_),a.globalCompositeOperation="source-over",a.drawImage(g,0,0)}function sT(a,r,o,u){const h=vg(a.canvas.width,a.canvas.height);oT(h.getContext("2d"),r,o,u),a.globalCompositeOperation="destination-in",a.drawImage(h,0,0)}function aT(a,r,o,u,h){if(u.children.length===0)return;const g=u.mask_idx!=null?o.masks[u.mask_idx]:null;g&&aT(a,r,o,g,h);const y=a.canvas.width,_=a.canvas.height,S=vg(y,_),C=S.getContext("2d"),P=u.width,R=u.height,D=u.left,B=u.top,$=new Path2D,q=new Path2D;q.rect(D,B,P,R),$.addPath(q,r),C.clip($);for(const ce of u.children)Qk(C,r,o,ce,h);const W=C.getImageData(0,0,y,_),J=W.data;if(u.mask_type===Xk.MASK_TYPE_LUMINANCE)for(let ce=0;ce<J.length;ce+=4)J[ce+3]=J[ce+3]/255*(.2126*J[ce]+.7152*J[ce+1]+.0722*J[ce+2]);C.putImageData(W,0,0),a.globalCompositeOperation="destination-in",a.drawImage(S,0,0)}function Zp(a){return a?new DOMMatrix([a.sx,a.ky,a.kx,a.sy,a.tx,a.ty]):new DOMMatrix}function lT(a,r){const o=a.step;let u=a.diffs[0]*o,h=a.diffs[1]*o;r.moveTo(u,h);for(let g=0,y=2;g<a.commands.length;g++)switch(a.commands[g]){case yg.PATH_COMMAND_MOVE:u+=a.diffs[y++]*o,h+=a.diffs[y++]*o,r.moveTo(u,h);break;case yg.PATH_COMMAND_LINE:u+=a.diffs[y++]*o,h+=a.diffs[y++]*o,r.lineTo(u,h);break;case yg.PATH_COMMAND_QUAD:{const _=u+a.diffs[y++]*o,S=h+a.diffs[y++]*o;u=_+a.diffs[y++]*o,h=S+a.diffs[y++]*o,r.quadraticCurveTo(_,S,u,h);break}case yg.PATH_COMMAND_CUBIC:{const _=u+a.diffs[y++]*o,S=h+a.diffs[y++]*o,C=_+a.diffs[y++]*o,P=S+a.diffs[y++]*o;u=C+a.diffs[y++]*o,h=P+a.diffs[y++]*o,r.bezierCurveTo(_,S,C,P,u,h);break}case yg.PATH_COMMAND_CLOSE:r.closePath()}return r}function cT(a){return lT(a,new Path2D)}class ob{constructor(r){this.capacity=r,this.cache=new Map}get(r){if(!this.cache.has(r))return;const o=this.cache.get(r);return this.cache.delete(r),this.cache.set(r,o),o}put(r,o){this.cache.has(r)?this.cache.delete(r):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(r,o)}delete(r){this.cache.delete(r)}}tn(ob,"LRUCache");class Hx{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(r){return new Oo(r,r.data)}getFromCache(r,o,u){return this.cacheMap.has(u)||this.cacheMap.set(u,new ob(150)),this.cacheMap.get(u).get(bc(r.toString(),o))}setInCache(r,o,u,h){this.cacheDependenciesMap.has(h)||this.cacheDependenciesMap.set(h,new Map),this.cacheMap.has(h)||this.cacheMap.set(h,new ob(150));const g=this.cacheDependenciesMap.get(h),y=bc(r.id.toString(),u);g.get(y)||g.set(y,new Set);const _=this.cacheMap.get(h),S=r.toString();g.get(y).add(S),_.put(bc(r.toString(),u),o)}removeImagesFromCacheByIds(r,o,u=0){if(!this.cacheMap.has(u)||!this.cacheDependenciesMap.has(u))return;const h=this.cacheMap.get(u),g=this.cacheDependenciesMap.get(u);for(const y of r){const _=bc(y.toString(),o);if(g.has(_)){for(const S of g.get(_))h.delete(S);g.delete(_)}}}rasterize(r,o,u,h,g=T8){const y=this.getFromCache(r,u,h);if(y)return y.clone();const _=g(o.icon,r.options),S=Hx._getImage(_);return this.setInCache(r,S,u,h),S.clone()}}class uT{constructor(r){this.size=r,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(r,o){const u=this.toIdx(r,o);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(r,o){return this.leaves[this.toIdx(r,o)]}toIdx(r,o){return o*this.size+r}}function dT(a,r,o,u){let h=0,g=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(u[y])<1e-15){if(o[y]<a[y]||o[y]>r[y])return null}else{const _=1/u[y];let S=(a[y]-o[y])*_,C=(r[y]-o[y])*_;if(S>C){const P=S;S=C,C=P}if(S>h&&(h=S),C<g&&(g=C),h>g)return null}return h}function hT(a,r,o,u,h,g,y,_,S,C,P){const R=u-a,D=h-r,B=g-o,$=y-a,q=_-r,W=S-o,J=P[1]*W-P[2]*q,ce=P[2]*$-P[0]*W,ue=P[0]*q-P[1]*$,H=R*J+D*ce+B*ue;if(Math.abs(H)<1e-15)return null;const se=1/H,de=C[0]-a,be=C[1]-r,Oe=C[2]-o,Re=(de*J+be*ce+Oe*ue)*se;if(Re<0||Re>1)return null;const Be=be*B-Oe*D,je=Oe*R-de*B,at=de*D-be*R,At=(P[0]*Be+P[1]*je+P[2]*at)*se;return At<0||Re+At>1?null:($*Be+q*je+W*at)*se}function pT(a,r,o){return(a-r)/(o-r)}function fT(a,r,o,u,h,g,y,_,S){const C=1<<o,P=g-u,R=y-h,D=(a+1)/C*P+u,B=(r+0)/C*R+h,$=(r+1)/C*R+h;_[0]=(a+0)/C*P+u,_[1]=B,S[0]=D,S[1]=$}class mT{constructor(r){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=r,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(g){const y=Math.ceil(Math.log2(g.dim/8)),_=[];let S=Math.ceil(Math.pow(2,y));const C=1/S,P=(B,$,q,W,J)=>{const ce=W?1:0,ue=(B+1)*q-ce,H=$*q,se=($+1)*q-ce;J[0]=B*q,J[1]=H,J[2]=ue,J[3]=se};let R=new uT(S);const D=[];for(let B=0;B<S*S;B++){P(B%S,Math.floor(B/S),C,!1,D);const $=Pu(D[0],D[1],g),q=Pu(D[2],D[1],g),W=Pu(D[2],D[3],g),J=Pu(D[0],D[3],g);R.minimums.push(Math.min($,q,W,J)),R.maximums.push(Math.max($,q,W,J)),R.leaves.push(1)}for(_.push(R),S/=2;S>=1;S/=2){const B=_[_.length-1];R=new uT(S);for(let $=0;$<S*S;$++){P($%S,Math.floor($/S),2,!0,D);const q=B.getElevation(D[0],D[1]),W=B.getElevation(D[2],D[1]),J=B.getElevation(D[2],D[3]),ce=B.getElevation(D[0],D[3]),ue=B.isLeaf(D[0],D[1]),H=B.isLeaf(D[2],D[1]),se=B.isLeaf(D[2],D[3]),de=B.isLeaf(D[0],D[3]),be=Math.min(q.min,W.min,J.min,ce.min),Oe=Math.max(q.max,W.max,J.max,ce.max),Re=ue&&H&&se&&de;R.maximums.push(Oe),R.minimums.push(be),R.leaves.push(Oe-be<=5&&Re?1:0)}_.push(R)}return _}(this.dem),u=o.length-1,h=o[u];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(o,0,0,u,0)}raycastRoot(r,o,u,h,g,y,_=1){return dT([r,o,-100],[u,h,this.maximums[0]*_],g,y)}raycast(r,o,u,h,g,y,_=1){if(!this.nodeCount)return null;const S=this.raycastRoot(r,o,u,h,g,y,_);if(S==null)return null;const C=[],P=[],R=[],D=[],B=[{idx:0,t:S,nodex:0,nodey:0,depth:0}];for(;B.length>0;){const{idx:$,t:q,nodex:W,nodey:J,depth:ce}=B.pop();if(this.leaves[$]){fT(W,J,ce,r,o,u,h,R,D);const H=1<<ce,se=(W+0)/H,de=(W+1)/H,be=(J+0)/H,Oe=(J+1)/H,Re=Pu(se,be,this.dem)*_,Be=Pu(de,be,this.dem)*_,je=Pu(de,Oe,this.dem)*_,at=Pu(se,Oe,this.dem)*_,At=hT(R[0],R[1],Re,D[0],R[1],Be,D[0],D[1],je,g,y),yt=hT(D[0],D[1],je,R[0],D[1],at,R[0],R[1],Re,g,y),Pt=Math.min(At!==null?At:Number.MAX_VALUE,yt!==null?yt:Number.MAX_VALUE);if(Pt!==Number.MAX_VALUE)return Pt;{const Rt=ir([],g,y,q);if(gT(Re,Be,at,je,pT(Rt[0],R[0],D[0]),pT(Rt[1],R[1],D[1]))>=Rt[2])return q}continue}let ue=0;for(let H=0;H<this._siblingOffset.length;H++){fT((W<<1)+this._siblingOffset[H][0],(J<<1)+this._siblingOffset[H][1],ce+1,r,o,u,h,R,D),R[2]=-100,D[2]=this.maximums[this.childOffsets[$]+H]*_;const se=dT(R,D,g,y);if(se!=null){const de=se;C[H]=de;let be=!1;for(let Oe=0;Oe<ue&&!be;Oe++)de>=C[P[Oe]]&&(P.splice(Oe,0,H),be=!0);be||(P[ue]=H),ue++}}for(let H=0;H<ue;H++){const se=P[H];B.push({idx:this.childOffsets[$]+se,t:C[se],nodex:(W<<1)+this._siblingOffset[se][0],nodey:(J<<1)+this._siblingOffset[se][1],depth:ce+1})}}return null}_addNode(r,o,u){return this.minimums.push(r),this.maximums.push(o),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(r,o,u,h,g){if(r[h].isLeaf(o,u)===1)return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const y=h-1,_=r[y];let S=0,C=0;for(let P=0;P<this._siblingOffset.length;P++){const R=2*o+this._siblingOffset[P][0],D=2*u+this._siblingOffset[P][1],B=_.getElevation(R,D),$=_.isLeaf(R,D),q=this._addNode(B.min,B.max,$);$&&(S|=1<<P),C||(C=q)}for(let P=0;P<this._siblingOffset.length;P++)S&1<<P||this._construct(r,2*o+this._siblingOffset[P][0],2*u+this._siblingOffset[P][1],y,C+P)}}function gT(a,r,o,u,h,g){return Mn(Mn(a,o,g),Mn(r,u,g),h)}function Pu(a,r,o){const u=o.dim,h=Te(a*u-.5,0,u-1),g=Te(r*u-.5,0,u-1),y=Math.floor(h),_=Math.floor(g),S=Math.min(y+1,u-1),C=Math.min(_+1,u-1);return gT(o.get(y,_),o.get(S,_),o.get(y,C),o.get(S,C),h-y,g-_)}const E8={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function I8(a,r,o){return(256*a*256+256*r+o)/10-1e4}function P8(a,r,o){return 256*a+r+o/256-32768}class sb{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(r,o,u,h=!1){if(this.uid=r,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return void Zn(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const g=this.dim=o.height-2,y=new Uint32Array(o.data.buffer);if(this.pixels=new Uint8Array(o.data.buffer),this.floatView=new Float32Array(o.data.buffer),this.borderReady=h,this._modifiedForSources={},!h){for(let S=0;S<g;S++)y[this._idx(-1,S)]=y[this._idx(0,S)],y[this._idx(g,S)]=y[this._idx(g-1,S)],y[this._idx(S,-1)]=y[this._idx(S,0)],y[this._idx(S,g)]=y[this._idx(S,g-1)];y[this._idx(-1,-1)]=y[this._idx(0,0)],y[this._idx(g,-1)]=y[this._idx(g-1,0)],y[this._idx(-1,g)]=y[this._idx(0,g-1)],y[this._idx(g,g)]=y[this._idx(g-1,g-1)]}const _=u==="terrarium"?P8:I8;for(let S=0;S<y.length;++S){const C=4*S;this.floatView[S]=_(this.pixels[C],this.pixels[C+1],this.pixels[C+2])}this._timestamp=Js.now()}_buildQuadTree(){this._tree=new mT(this)}get(r,o,u=!1){u&&(r=Te(r,-1,this.dim),o=Te(o,-1,this.dim));const h=this._idx(r,o);return this.floatView[h]}set(r,o,u){const h=this._idx(r,o),g=this.floatView[h];return this.floatView[h]=u,u-g}static getUnpackVector(r){return E8[r]}_idx(r,o){if(r<-1||r>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(r+1)}static pack(r,o){const u=[0,0,0,0],h=sb.getUnpackVector(o);let g=Math.floor((r+h[3])/h[2]);return u[2]=g%256,g=Math.floor(g/256),u[1]=g%256,g=Math.floor(g/256),u[0]=g,u}getPixels(){return new gC({width:this.stride,height:this.stride},this.pixels)}backfillBorder(r,o,u){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let h=o*this.dim,g=o*this.dim+this.dim,y=u*this.dim,_=u*this.dim+this.dim;switch(o){case-1:h=g-1;break;case 1:g=h+1}switch(u){case-1:y=_-1;break;case 1:_=y+1}const S=-o*this.dim,C=-u*this.dim;for(let P=y;P<_;P++)for(let R=h;R<g;R++){const D=4*this._idx(R,P),B=4*this._idx(R+S,P+C);this.pixels[D+0]=r.pixels[B+0],this.pixels[D+1]=r.pixels[B+1],this.pixels[D+2]=r.pixels[B+2],this.pixels[D+3]=r.pixels[B+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function A8(a,r,o){a===1?r.headerLength=o.readFixed32():a===2?r.x=o.readVarint():a===3?r.y=o.readVarint():a===4?r.z=o.readVarint():a===5&&r.layers.push(function(u,h){return u.readFields(O8,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},h)}(o,o.readVarint()+o.pos))}function R8(a,r,o){a===1?(r.delta_filter=function(u,h){return u.readFields(M8,{blockSize:0},h)}(o,o.readVarint()+o.pos),r.filter="delta_filter"):a===2?(o.readVarint(),r.filter="zigzag_filter"):a===3?(o.readVarint(),r.filter="bitshuffle_filter"):a===4&&(o.readVarint(),r.filter="byteshuffle_filter")}function M8(a,r,o){a===1&&(r.blockSize=o.readVarint())}function D8(a,r,o){a===1?(o.readVarint(),r.codec="gzip_data"):a===2?(o.readVarint(),r.codec="jpeg_image"):a===3?(o.readVarint(),r.codec="webp_image"):a===4&&(o.readVarint(),r.codec="png_image")}function L8(a,r,o){let u=0,h=0;a===1?r.firstByte=o.readFixed64():a===2?r.lastByte=o.readFixed64():a===3?r.filters.push(function(g,y){return g.readFields(R8,{},y)}(o,o.readVarint()+o.pos)):a===4?r.codec=function(g,y){return g.readFields(D8,{},y)}(o,o.readVarint()+o.pos):a===5?h=o.readFloat():a===6?u=o.readFloat():a===7?r.bands.push(o.readString()):a===8?r.offset=o.readDouble():a===9&&(r.scale=o.readDouble()),r.offset===0&&(r.offset=h),r.scale===0&&(r.scale=u)}function O8(a,r,o){a===1?r.version=o.readVarint():a===2?r.name=o.readString():a===3?r.units=o.readString():a===4?r.tileSize=o.readVarint():a===5?r.buffer=o.readVarint():a===6?r.pixelFormat=o.readVarint():a===7&&r.dataIndex.push(function(u,h){return u.readFields(L8,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},h)}(o,o.readVarint()+o.pos))}function z8(a,r,o){if(a===2)(function(u,h,g){u.readFields(B8,g,h)})(o,o.readVarint()+o.pos,r);else if(a===3)throw new Error("Not implemented")}function B8(a,r,o){if(a===1){let u=0;const h=o.readVarint()+o.pos;for(;o.pos<h;)r[u++]=o.readVarint()}}function F8(a,r){if(r.length!==4)throw new Error(`Expected data of dimension 4 but got ${r.length}.`);let o=r[3];for(let u=2;u>=1;u--){const h=u===1?1:0,g=u===2?1:0;for(let y=0;y<r[0];y++){const _=r[1]*y;for(let S=h;S<r[1];S++){const C=r[2]*(S+_);for(let P=g;P<r[2];P++){const R=r[3]*(P+C);for(let D=0;D<r[3];D++){const B=R+D;a[B]+=a[B-o]}}}}o*=r[u]}return a}function $8(a){for(let r=0,o=a.length;r<o;r++)a[r]=a[r]>>>1^-(1&a[r]);return a}function N8(a,r){switch(r){case"uint32":return a;case"uint16":for(let o=0;o<a.length;o+=2){const u=a[o],h=a[o+1];a[o]=(240&u)>>4|(61440&u)>>8|(240&h)<<4|61440&h,a[o+1]=15&u|(3840&u)>>4|(15&h)<<8|(3840&h)<<4}return a;case"uint8":for(let o=0;o<a.length;o+=4){const u=a[o],h=a[o+1],g=a[o+2],y=a[o+3];a[o+0]=(192&u)>>6|(192&h)>>4|(192&g)>>2|192&y,a[o+1]=(48&u)>>4|(48&h)>>2|48&g|(48&y)<<2,a[o+2]=(12&u)>>2|12&h|(12&g)<<2|(12&y)<<4,a[o+3]=3&u|(3&h)<<2|(3&g)<<4|(3&y)<<6}return a;default:throw new Error(`Invalid pixel format, "${r}"`)}}tn(sb,"DEMData"),tn(mT,"DemMinMaxQuadTree",{omit:["dem"]});var sa=Uint8Array,bg=Uint16Array,V8=Int32Array,yT=new sa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),vT=new sa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),j8=new sa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bT=function(a,r){for(var o=new bg(31),u=0;u<31;++u)o[u]=r+=1<<a[u-1];var h=new V8(o[30]);for(u=1;u<30;++u)for(var g=o[u];g<o[u+1];++g)h[g]=g-o[u]<<5|u;return{b:o,r:h}},_T=bT(yT,2),xT=_T.b,U8=_T.r;xT[28]=258,U8[258]=28;for(var q8=bT(vT,0).b,wT=new bg(32768),lo=0;lo<32768;++lo){var Xp=(43690&lo)>>1|(21845&lo)<<1;wT[lo]=((65280&(Xp=(61680&(Xp=(52428&Xp)>>2|(13107&Xp)<<2))>>4|(3855&Xp)<<4))>>8|(255&Xp)<<8)>>1}var _g=function(a,r,o){for(var u=a.length,h=0,g=new bg(r);h<u;++h)a[h]&&++g[a[h]-1];var y,_=new bg(r);for(h=1;h<r;++h)_[h]=_[h-1]+g[h-1]<<1;y=new bg(1<<r);var S=15-r;for(h=0;h<u;++h)if(a[h])for(var C=h<<4|a[h],P=r-a[h],R=_[a[h]-1]++<<P,D=R|(1<<P)-1;R<=D;++R)y[wT[R]>>S]=C;return y},xg=new sa(288);for(lo=0;lo<144;++lo)xg[lo]=8;for(lo=144;lo<256;++lo)xg[lo]=9;for(lo=256;lo<280;++lo)xg[lo]=7;for(lo=280;lo<288;++lo)xg[lo]=8;var ST=new sa(32);for(lo=0;lo<32;++lo)ST[lo]=5;var H8=_g(xg,9),G8=_g(ST,5),Gx=function(a){for(var r=a[0],o=1;o<a.length;++o)a[o]>r&&(r=a[o]);return r},Xa=function(a,r,o){var u=r/8|0;return(a[u]|a[u+1]<<8)>>(7&r)&o},Wx=function(a,r){var o=r/8|0;return(a[o]|a[o+1]<<8|a[o+2]<<16)>>(7&r)},W8=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ya=function(a,r,o){var u=new Error(r||W8[a]);if(u.code=a,Error.captureStackTrace&&Error.captureStackTrace(u,Ya),!o)throw u;return u},K8=new sa(0),Z8=typeof TextDecoder<"u"&&new TextDecoder;try{Z8.decode(K8,{stream:!0})}catch{}const X8={gzip_data:"gzip"};class _a extends Error{constructor(r){super(r),this.name="MRTError"}}const Y8={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},CT={uint32:1,uint16:2,uint8:4},J8={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let Kx;class ab{constructor(r=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=r}getLayer(r){const o=this.layers[r];if(!o)throw new _a(`Layer '${r}' not found`);return o}getHeaderLength(r){const o=new Uint8Array(r),u=new DataView(r);if(o[0]!==13)throw new _a("File is not a valid MRT.");return u.getUint32(1,!0)}parseHeader(r){const o=new Uint8Array(r),u=this.getHeaderLength(r);if(o.length<u)throw new _a(`Expected header with length >= ${u} but got buffer of length ${o.length}`);const h=function(g,y){return g.readFields(A8,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new Kx(o.subarray(0,u)));if(!isNaN(this.x)&&(this.x!==h.x||this.y!==h.y||this.z!==h.z))throw new _a(`Invalid attempt to parse header ${h.z}/${h.x}/${h.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=h.x,this.y=h.y,this.z=h.z;for(const g of h.layers)this.layers[g.name]=new kT(g,{cacheSize:this._cacheSize});return this}createDecodingTask(r){const o=[],u=this.getLayer(r.layerName);for(let h of r.blockIndices){const g=u.dataIndex[h],y=g.firstByte-r.firstByte,_=g.lastByte-r.firstByte;if(u._blocksInProgress.has(h))continue;const S={layerName:u.name,firstByte:y,lastByte:_,pixelFormat:u.pixelFormat,blockIndex:h,blockShape:[g.bands.length].concat(u.bandShape),buffer:u.buffer,codec:g.codec.codec,filters:g.filters.map(C=>C.filter)};u._blocksInProgress.add(h),o.push(S)}return new TT(o,()=>{o.forEach(h=>u._blocksInProgress.delete(h.blockIndex))},(h,g)=>{if(o.forEach(y=>u._blocksInProgress.delete(y.blockIndex)),h)throw h;g.forEach(y=>{this.getLayer(y.layerName).processDecodedData(y)})})}}class kT{constructor({version:r,name:o,units:u,tileSize:h,pixelFormat:g,buffer:y,dataIndex:_},S){if(this.version=r,this.version!==1)throw new _a(`Cannot parse raster layer encoded with MRT version ${r}`);this.name=o,this.units=u,this.tileSize=h,this.buffer=y,this.pixelFormat=Y8[g],this.dataIndex=_,this.bandShape=[h+2*y,h+2*y,CT[this.pixelFormat]],this._decodedBlocks=new ob(S?S.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return CT[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:r})=>r).flat()}processDecodedData(r){const o=r.blockIndex.toString();this._decodedBlocks.get(o)||this._decodedBlocks.put(o,r.data)}getBlockForBand(r){let o=0;switch(typeof r){case"string":for(const[u,h]of this.dataIndex.entries()){for(const[g,y]of h.bands.entries())if(y===r)return{bandIndex:o+g,blockIndex:u,blockBandIndex:g};o+=h.bands.length}break;case"number":for(const[u,h]of this.dataIndex.entries()){if(r>=o&&r<o+h.bands.length)return{bandIndex:r,blockIndex:u,blockBandIndex:r-o};o+=h.bands.length}break;default:throw new _a(`Invalid band \`${JSON.stringify(r)}\`. Expected string or integer.`)}return{blockIndex:-1,blockBandIndex:-1}}getDataRange(r){let o=1/0,u=-1/0;const h=[],g=new Set;for(const y of r){const{blockIndex:_}=this.getBlockForBand(y);if(_<0)throw new _a(`Invalid band: ${JSON.stringify(y)}`);const S=this.dataIndex[_];h.includes(_)||h.push(_),g.add(_),o=Math.min(o,S.firstByte),u=Math.max(u,S.lastByte)}if(g.size>this.cacheSize)throw new _a(`Number of blocks to decode (${g.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:o,lastByte:u,blockIndices:h}}hasBand(r){const{blockIndex:o}=this.getBlockForBand(r);return o>=0}hasDataForBand(r){const{blockIndex:o}=this.getBlockForBand(r);return o>=0&&!!this._decodedBlocks.get(o.toString())}getBandView(r){const{blockIndex:o,blockBandIndex:u}=this.getBlockForBand(r);if(o<0)throw new _a(`Band not found: ${JSON.stringify(r)}`);const h=this._decodedBlocks.get(o.toString());if(!h)throw new _a(`Data for band ${JSON.stringify(r)} of layer "${this.name}" not decoded.`);const g=this.dataIndex[o],y=this.bandShape.reduce((C,P)=>C*P,1),_=u*y,S=h.subarray(_,_+y);return{data:S,bytes:new Uint8Array(S.buffer).subarray(S.byteOffset,S.byteOffset+S.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:g.offset,scale:g.scale}}}ab.setPbf=function(a){Kx=a};class TT{constructor(r,o,u){this.tasks=r,this._onCancel=o,this._onComplete=u,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(r,o){this._finalized||(this._onComplete(r,o),this._finalized=!0)}}function ah(a,r){const o=a.json.bufferViews[r.bufferView],u=Iv[r.componentType];return new u(a.buffers[o.buffer],(r.byteOffset||0)+(o.byteOffset||0),r.count*(o.byteStride&&o.byteStride!==rg[r.type]*u.BYTES_PER_ELEMENT?o.byteStride/u.BYTES_PER_ELEMENT:rg[r.type]))}function Zx(a,r,o,u){const h=Iv[r.componentType],g=function(P){switch(P){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(h),y=a.json.bufferViews[r.bufferView],_=y.byteStride?y.byteStride/h.BYTES_PER_ELEMENT:rg[r.type],S=o.float32,C=S.length/o.capacity;for(let P=0,R=0;P<r.count*_;P+=_,R+=C)for(let D=0;D<C;D++)S[R+D]=u[P+D]*g;o._trim()}function Q8(a,r,o){const u=a.indices,h=a.attributes,g={};g.indexArray=new Io;const y=r.json.accessors[u],_=y.count/3;g.indexArray.reserve(_);const S=ah(r,y);for(let D=0;D<_;D++)g.indexArray.emplaceBack(S[3*D],S[3*D+1],S[3*D+2]);g.indexArray._trim(),g.vertexArray=new ga;const C=r.json.accessors[h.POSITION];g.vertexArray.reserve(C.count);const P=ah(r,C);for(let D=0;D<C.count;D++)g.vertexArray.emplaceBack(P[3*D],P[3*D+1],P[3*D+2]);if(g.vertexArray._trim(),g.aabb=new kr(C.min,C.max),g.centroid=function(D,B){const $=[0,0,0],q=D.length;if(q>0){for(let W=0;W<q;W++){const J=3*D[W];$[0]+=B[J],$[1]+=B[J+1],$[2]+=B[J+2]}$[0]/=q,$[1]/=q,$[2]/=q}return $}(S,P),h.COLOR_0!==void 0){const D=r.json.accessors[h.COLOR_0],B=rg[D.type],$=ah(r,D);g.colorArray=B===3?new ga:new Eo,g.colorArray.resize(D.count),Zx(r,D,g.colorArray,$)}if(h.NORMAL!==void 0){g.normalArray=new ga;const D=r.json.accessors[h.NORMAL];g.normalArray.resize(D.count);const B=ah(r,D);Zx(r,D,g.normalArray,B)}if(h.TEXCOORD_0!==void 0&&o.length>0){g.texcoordArray=new _c;const D=r.json.accessors[h.TEXCOORD_0];g.texcoordArray.resize(D.count);const B=ah(r,D);Zx(r,D,g.texcoordArray,B)}if(h._FEATURE_ID_RGBA4444!==void 0){const D=r.json.accessors[h._FEATURE_ID_RGBA4444];r.json.extensionsUsed&&r.json.extensionsUsed.includes("EXT_meshopt_compression")&&(g.featureData=ah(r,D))}h._FEATURE_RGBA4444!==void 0&&(g.featureData=new Uint32Array(ah(r,r.json.accessors[h._FEATURE_RGBA4444]).buffer));const R=a.material;return g.material=function(D,B){const{emissiveFactor:$=[0,0,0],alphaMode:q="OPAQUE",alphaCutoff:W=.5,normalTexture:J,occlusionTexture:ce,emissiveTexture:ue,doubleSided:H}=D,{baseColorFactor:se=[1,1,1,1],metallicFactor:de=1,roughnessFactor:be=1,baseColorTexture:Oe,metallicRoughnessTexture:Re}=D.pbrMetallicRoughness||{},Be=ce?B[ce.index]:void 0;if(ce&&ce.extensions&&ce.extensions.KHR_texture_transform&&Be){const je=ce.extensions.KHR_texture_transform;Be.offsetScale=[je.offset[0],je.offset[1],je.scale[0],je.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new Ar(...se),metallicFactor:de,roughnessFactor:be,baseColorTexture:Oe?B[Oe.index]:void 0,metallicRoughnessTexture:Re?B[Re.index]:void 0},doubleSided:H,emissiveFactor:new Ar(...$),alphaMode:q,alphaCutoff:W,normalTexture:J?B[J.index]:void 0,occlusionTexture:Be,emissionTexture:ue?B[ue.index]:void 0,defined:D.defined===void 0}}(R!==void 0?r.json.materials[R]:{defined:!1},o),g}function ET(a,r,o){const{matrix:u,rotation:h,translation:g,scale:y,mesh:_,extras:S,children:C}=a,P={};if(P.matrix=u||function(R,D,B,$){var q=D[0],W=D[1],J=D[2],ce=D[3],ue=q+q,H=W+W,se=J+J,de=q*ue,be=q*H,Oe=q*se,Re=W*H,Be=W*se,je=J*se,at=ce*ue,At=ce*H,yt=ce*se,Pt=$[0],Rt=$[1],ct=$[2];return R[0]=(1-(Re+je))*Pt,R[1]=(be+yt)*Pt,R[2]=(Oe-At)*Pt,R[3]=0,R[4]=(be-yt)*Rt,R[5]=(1-(de+je))*Rt,R[6]=(Be+at)*Rt,R[7]=0,R[8]=(Oe+At)*ct,R[9]=(Be-at)*ct,R[10]=(1-(de+Re))*ct,R[11]=0,R[12]=B[0],R[13]=B[1],R[14]=B[2],R[15]=1,R}([],h||[0,0,0,1],g||[0,0,0],y||[1,1,1]),_!==void 0){P.meshes=o[_];const R=P.anchor=[0,0];for(const D of P.meshes){const{min:B,max:$}=D.aabb;R[0]+=B[0]+$[0],R[1]+=B[1]+$[1]}R[0]=Math.floor(R[0]/P.meshes.length/2),R[1]=Math.floor(R[1]/P.meshes.length/2)}if(S&&(S.id&&(P.id=S.id),S.lights&&(P.lights=function(R){if(!R.length)return[];const D=function(J){const ce=atob(J),ue=new Uint8Array(ce.length);for(let H=0;H<ce.length;H++)ue[H]=ce.codePointAt(H);return ue}(R),B=[],$=D.length/24,q=new Uint16Array(D.buffer),W=new Float32Array(D.buffer);for(let J=0;J<$;J++){const ce=q[2*J*6]/30,ue=q[2*J*6+1]/30,H=q[2*J*6+10]/100,se=W[6*J+1],de=W[6*J+2],be=W[6*J+3],Oe=W[6*J+4],Re=be-se,Be=Oe-de,je=Math.hypot(Re,Be);B.push({pos:[se+.5*Re,de+.5*Be,ue],normal:[Be/je,-Re/je,0],width:je,height:ce,depth:H,points:[se,de,be,Oe]})}return B}(S.lights))),C){const R=[];for(const D of C)R.push(ET(r.json.nodes[D],r,o));P.children=R}return P}function eD(a){if(a.vertices.length===0||a.indices.length===0)return null;const r=new J1(a.vertices,a.indices,8,256),[o,u]=[r.min.clone(),r.max.clone()];return{vertices:a.vertices,indices:a.indices,grid:r,min:o,max:u}}function tD(a){if(!a.extras||!a.extras.ground)return null;const r=a.extras.ground;if(!r||!Array.isArray(r)||r.length===0)return null;const o=r[0];if(!o||!Array.isArray(o)||o.length===0)return null;const u=[];for(const y of o){if(!Array.isArray(y)||y.length!==2)continue;const _=y[0],S=y[1];typeof _=="number"&&typeof S=="number"&&u.push(new Vt(_,S))}if(u.length<3)return null;u.length>1&&u[u.length-1].equals(u[0])&&u.pop();let h=0;for(let y=0;y<u.length;y++){const _=u[y],S=u[(y+1)%u.length],C=u[(y+2)%u.length];h+=(_.x-S.x)*(C.y-S.y)-(C.x-S.x)*(_.y-S.y)}h>0&&u.reverse();const g=Hm(u.flatMap(y=>[y.x,y.y]),[]);return g.length===0?null:{vertices:u,indices:g}}function nD(a,r){const o=[],u=[];let h=0;const g=[];for(const y of a){h=o.length;const _=y.vertexArray.float32,S=y.indexArray.uint16;for(let C=0;C<y.vertexArray.length;C++)g[0]=_[3*C+0],g[1]=_[3*C+1],g[2]=_[3*C+2],cn(g,g,r),o.push(new Vt(g[0],g[1]));for(let C=0;C<3*y.indexArray.length;C++)u.push(S[C]+h)}if(u.length%3!=0)return null;for(let y=0;y<u.length;y+=3){const _=o[u[y+0]],S=o[u[y+1]],C=o[u[y+2]];(_.x-S.x)*(C.y-S.y)-(C.x-S.x)*(_.y-S.y)>0&&([u[y+1],u[y+2]]=[u[y+2],u[y+1]])}return{vertices:o,indices:u}}function IT(a){const r=function(S,C){const P=[],R=WebGL2RenderingContext;if(S.json.textures)for(const D of S.json.textures){const B={magFilter:R.LINEAR,minFilter:R.NEAREST,wrapS:R.REPEAT,wrapT:R.REPEAT};D.sampler!==void 0&&Object.assign(B,S.json.samplers[D.sampler]),P.push({image:C[D.source],sampler:B,uploaded:!1})}return P}(a,a.images),o=function(S,C){const P=[];for(const R of S.json.meshes){const D=[];for(const B of R.primitives)D.push(Q8(B,S,C));P.push(D)}return P}(a,r),{scenes:u,scene:h,nodes:g}=a.json,y=u?u[h||0].nodes:g,_=[];for(const S of y)_.push(ET(g[S],a,o));return function(S,C,P){const R={},D=new Set;for(let B=0;B<S.length;B++){const $=P[C[B]];if(!$.extras)continue;const q=$.extras["mapbox:footprint:version"],W=$.extras["mapbox:footprint:id"];(q||W)&&D.add(B),q==="1.0.0"&&W&&(R[W]=B)}for(let B=0;B<S.length;B++){if(D.has(B))continue;const $=S[B],q=P[C[B]];if(!q.extras)continue;let W=null;$.id in R&&(W=nD(S[R[$.id]].meshes,$.matrix)),W||(W=tD(q)),W&&($.footprint=eD(W))}if(D.size>0){const B=Array.from(D.values()).sort(($,q)=>$-q);for(let $=B.length-1;$>=0;$--)S.splice(B[$],1)}}(_,y,a.json.nodes),_}function rD(a){a.heightmap=new Float32Array(4096),a.heightmap.fill(-1);const r=a.vertexArray.float32,o=a.aabb.min[0]-1,u=a.aabb.min[1]-1,h=oh/(a.aabb.max[0]-o+2),g=oh/(a.aabb.max[1]-u+2);for(let y=0;y<r.length;y+=3){const _=r[y+2],S=(r[y+0]-o)*h|0,C=(r[y+1]-u)*g|0;_>a.heightmap[C*oh+S]&&(a.heightmap[C*oh+S]=_)}}function iD(a,r){const o={};o.indexArray=new Io,o.indexArray.reserve(4*a.length),o.vertexArray=new ga,o.vertexArray.reserve(10*a.length),o.colorArray=new Eo,o.vertexArray.reserve(10*a.length);let u=0;for(const y of a){const _=Math.min(10,Math.max(4,1.3*y.height))*r,S=[-y.normal[1],y.normal[0],0],C=Math.min(.29,.1*y.width/y.depth),P=y.width-2*y.depth*r*(C+.01),R=ir([],y.pos,S,P/2),D=ir([],y.pos,S,-P/2),B=[R[0],R[1],R[2]+y.height],$=[D[0],D[1],D[2]+y.height],q=ir([],y.normal,S,C);In(q,q,_);const W=ir([],y.normal,S,-C);In(W,W,_),Qt(q,R,q),Qt(W,D,W),R[2]+=.1,D[2]+=.1,o.vertexArray.emplaceBack(q[0],q[1],q[2]),o.vertexArray.emplaceBack(W[0],W[1],W[2]),o.vertexArray.emplaceBack(R[0],R[1],R[2]),o.vertexArray.emplaceBack(D[0],D[1],D[2]),o.vertexArray.emplaceBack(B[0],B[1],B[2]),o.vertexArray.emplaceBack($[0],$[1],$[2]),o.vertexArray.emplaceBack(R[0],R[1],R[2]),o.vertexArray.emplaceBack(D[0],D[1],D[2]),o.vertexArray.emplaceBack(q[0],q[1],q[2]),o.vertexArray.emplaceBack(W[0],W[1],W[2]);const J=P/_/2;o.colorArray.emplaceBack(-J-C,-1,J,.8),o.colorArray.emplaceBack(J+C,-1,J,.8),o.colorArray.emplaceBack(-J,0,J,1.3),o.colorArray.emplaceBack(J,0,J,1.3),o.colorArray.emplaceBack(J+C,-.8,J,.7),o.colorArray.emplaceBack(J+C,-.8,J,.7),o.colorArray.emplaceBack(0,0,J,1.3),o.colorArray.emplaceBack(0,0,J,1.3),o.colorArray.emplaceBack(J+C,-1.2,J,.8),o.colorArray.emplaceBack(J+C,-1.2,J,.8),o.indexArray.emplaceBack(6+u,4+u,8+u),o.indexArray.emplaceBack(7+u,9+u,5+u),o.indexArray.emplaceBack(0+u,1+u,2+u),o.indexArray.emplaceBack(1+u,3+u,2+u),u+=10}const h={defined:!0};h.emissiveFactor=Ar.black;const g={};return g.baseColorFactor=Ar.white,h.pbrMetallicRoughness=g,o.material=h,o.aabb=new kr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),o}ab.performDecoding=function(a,r){const o=new Uint8Array(a);return Promise.all(r.tasks.map(u=>{const{layerName:h,firstByte:g,lastByte:y,pixelFormat:_,blockShape:S,blockIndex:C,filters:P,codec:R}=u,D=o.subarray(g,y+1),B=new Uint32Array(S[0]*S[1]*S[2]);let $;if(R!=="gzip_data")throw new _a(`Unhandled codec: ${R}`);return $=function(q,W){if(!globalThis.DecompressionStream&&W==="gzip_data")return Promise.resolve(((H=function(be){be[0]==31&&be[1]==139&&be[2]==8||Ya(6,"invalid gzip data");var Oe=be[3],Re=10;4&Oe&&(Re+=2+(be[10]|be[11]<<8));for(var Be=(Oe>>3&1)+(Oe>>4&1);Be>0;Be-=!be[Re++]);return Re+(2&Oe)}(ue=q))+8>ue.length&&Ya(6,"invalid gzip data"),function(be,Oe,Re,Be){var je=be.length;if(!je||Oe.f&&!Oe.l)return Re||new sa(0);var at=!Re,At=at||Oe.i!=2,yt=Oe.i;at&&(Re=new sa(3*je));var Pt,Rt,ct=function(ji){var hi=Re.length;if(ji>hi){var ri=new sa(Math.max(2*hi,ji));ri.set(Re),Re=ri}},Tt=Oe.f||0,ot=Oe.p||0,lt=Oe.b||0,Lt=Oe.l,zt=Oe.d,Sn=Oe.m,un=Oe.n,Gt=8*je;do{if(!Lt){Tt=Xa(be,ot,1);var Dt=Xa(be,ot+1,3);if(ot+=3,!Dt){var Vn=be[(ye=4+((ot+7)/8|0))-4]|be[ye-3]<<8,ln=ye+Vn;if(ln>je){yt&&Ya(0);break}At&&ct(lt+Vn),Re.set(be.subarray(ye,ln),lt),Oe.b=lt+=Vn,Oe.p=ot=8*ln,Oe.f=Tt;continue}if(Dt==1)Lt=H8,zt=G8,Sn=9,un=5;else if(Dt==2){var hn=Xa(be,ot,31)+257,Dn=Xa(be,ot+10,15)+4,Kn=hn+Xa(be,ot+5,31)+1;ot+=14;for(var Wn=new sa(Kn),sr=new sa(19),Qn=0;Qn<Dn;++Qn)sr[j8[Qn]]=Xa(be,ot+3*Qn,7);ot+=3*Dn;var ar=Gx(sr),Dr=(1<<ar)-1,si=_g(sr,ar);for(Qn=0;Qn<Kn;){var ye,_e=si[Xa(be,ot,Dr)];if(ot+=15&_e,(ye=_e>>4)<16)Wn[Qn++]=ye;else{var dt=0,Ft=0;for(ye==16?(Ft=3+Xa(be,ot,3),ot+=2,dt=Wn[Qn-1]):ye==17?(Ft=3+Xa(be,ot,7),ot+=3):ye==18&&(Ft=11+Xa(be,ot,127),ot+=7);Ft--;)Wn[Qn++]=dt}}var Wt=Wn.subarray(0,hn),Ht=Wn.subarray(hn);Sn=Gx(Wt),un=Gx(Ht),Lt=_g(Wt,Sn),zt=_g(Ht,un)}else Ya(1);if(ot>Gt){yt&&Ya(0);break}}At&&ct(lt+131072);for(var sn=(1<<Sn)-1,Rn=(1<<un)-1,dr=ot;;dr=ot){var hr=(dt=Lt[Wx(be,ot)&sn])>>4;if((ot+=15&dt)>Gt){yt&&Ya(0);break}if(dt||Ya(2),hr<256)Re[lt++]=hr;else{if(hr==256){dr=ot,Lt=null;break}var er=hr-254;hr>264&&(er=Xa(be,ot,(1<<(pr=yT[Qn=hr-257]))-1)+xT[Qn],ot+=pr);var Fr=zt[Wx(be,ot)&Rn],ni=Fr>>4;if(Fr||Ya(3),ot+=15&Fr,Ht=q8[ni],ni>3){var pr=vT[ni];Ht+=Wx(be,ot)&(1<<pr)-1,ot+=pr}if(ot>Gt){yt&&Ya(0);break}At&&ct(lt+131072);var Ii=lt+er;if(lt<Ht){var ai=0-Ht,Lr=Math.min(Ht,Ii);for(ai+lt<0&&Ya(3);lt<Lr;++lt)Re[lt]=(void 0)[ai+lt]}for(;lt<Ii;++lt)Re[lt]=Re[lt-Ht]}}Oe.l=Lt,Oe.p=dr,Oe.b=lt,Oe.f=Tt,Lt&&(Tt=1,Oe.m=Sn,Oe.d=zt,Oe.n=un)}while(!Tt);return lt!=Re.length&&at?(Pt=Re,((Rt=lt)==null||Rt>Pt.length)&&(Rt=Pt.length),new sa(Pt.subarray(0,Rt))):Re.subarray(0,lt)}(ue.subarray(H,-8),{i:2},new sa(((J=ue)[(ce=J.length)-4]|J[ce-3]<<8|J[ce-2]<<16|J[ce-1]<<24)>>>0))));var J,ce,ue,H;const se=X8[W];if(!se)throw new Error(`Unhandled codec: ${W}`);const de=new globalThis.DecompressionStream(se);return new Response(new Blob([q]).stream().pipeThrough(de)).arrayBuffer().then(be=>new Uint8Array(be))}(D,R).then(q=>(function(W,J){W.readFields(z8,J)}(new Kx(q),B),new J8[_](B.buffer))),$.then(q=>{for(let W=P.length-1;W>=0;W--)switch(P[W]){case"delta_filter":F8(q,S);break;case"zigzag_filter":$8(q);break;case"bitshuffle_filter":N8(q,_);break;default:throw new _a(`Unhandled filter "${P[W]}"`)}return{layerName:h,blockIndex:C,data:q}}).catch(q=>{throw q})}))},tn(TT,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),tn(ab,"MapboxRasterTile"),tn(kT,"MapboxRasterLayer",{omit:["_blocksInProgress"]});class PT{constructor(r){this._stringToNumber={},this._numberToString=[];for(let o=0;o<r.length;o++){const u=r[o];this._stringToNumber[u]=o,this._numberToString[o]=u}}encode(r){return this._stringToNumber[r]}decode(r){return this._numberToString[r]}}const oD=["id","tile","layer","source","sourceLayer","state"];class Yp{constructor(r,o,u,h,g){this.type="Feature",this._vectorTileFeature=r,this._z=o,this._x=u,this._y=h,this.properties=r.properties,this.id=g}clone(){const r=new Yp(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(r.state=Object.assign({},this.state)),this.layer&&(r.layer=Object.assign({},this.layer)),this.source&&(r.source=this.source),this.sourceLayer&&(r.sourceLayer=this.sourceLayer),r}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const o of oD)this[o]!==void 0&&(r[o]=this[o]);return r}}class AT{constructor(r,o){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Va(Ut,16,0),this.featureIndexArray=new ov,this.promoteId=o,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(r,o,u,h,g,y=0,_=0){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,h,g,y);const C=this.grid;for(let P=0;P<o.length;P++){const R=o[P],D=[1/0,1/0,-1/0,-1/0];for(let B=0;B<R.length;B++){const $=R[B];D[0]=Math.min(D[0],$.x),D[1]=Math.min(D[1],$.y),D[2]=Math.max(D[2],$.x),D[3]=Math.max(D[3],$.y)}_!==0&&(D[0]-=_,D[1]-=_,D[2]+=_,D[3]+=_),D[0]<Ut&&D[1]<Ut&&D[2]>=0&&D[3]>=0&&C.insert(S,D[0],D[1],D[2],D[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new nr.VectorTile(new Av(this.rawTileData)).layers,this.sourceLayerCoder=new PT(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const r in this.vtLayers)this.vtFeatures[r]=[]}return this.vtLayers}query(r,o){const{tilespaceGeometry:u,transform:h,tileTransform:g,pixelPosMatrix:y,availableImages:_,worldview:S}=o;this.loadVTLayers(),this.serializedLayersCache.clear();const C=u.bufferedTilespaceBounds,P=this.grid.query(C.min.x,C.min.y,C.max.x,C.max.y,($,q,W,J)=>wu(u.bufferedTilespaceGeometry,$,q,W,J));P.sort(sD);let R=null;h.elevation&&P.length>0&&(R=Wp.create(h.elevation,this.tileID));const D={};let B;for(let $=0;$<P.length;$++){const q=P[$];if(q===B)continue;B=q;const W=this.featureIndexArray.get(q);let J=null;this.is3DTile?this.loadMatchingModelFeature(D,W,r,u,h,S):this.loadMatchingFeature(D,W,r,_,S,(ce,ue,H,se=0)=>(J||(J=rn(ce,this.tileID.canonical,g)),ue.queryIntersectsFeature(u,ce,H,J,this.z,h,y,R,se)))}return D}loadMatchingFeature(r,o,u,h,g,y){const{featureIndex:_,bucketIndex:S,sourceLayerIndex:C,layoutVertexArrayOffset:P}=o,R=this.bucketLayerIDs[S],D=u.layers,B=Object.keys(D);if(B.length&&!qn(B,R))return;const $=u.sourceCache,q=this.sourceLayerCoder.decode(C),W=this.vtLayers[q].feature(_),J=this.getId(W,q);for(let ce=0;ce<R.length;ce++){const ue=R[ce];if(!D[ue])continue;const{styleLayer:H,targets:se}=D[ue];let de={};J!==void 0&&(de=$.getFeatureState(H.sourceLayer,J));const be=!y||y(W,H,de,P);if(!be)continue;const Oe=new Yp(W,this.z,this.x,this.y,J);Oe.tile=this.tileID.canonical,Oe.state=de;let Re=this.serializedLayersCache.get(ue);Re||(Re=H.serialize(),Re.id=ue,this.serializedLayersCache.set(ue,Re)),Oe.source=Re.source,Oe.sourceLayer=Re["source-layer"],Oe.layer=tt({},Re),Oe.layer.paint=RT(Re.paint,H.paint,W,de,h),Oe.layer.layout=RT(Re.layout,H.layout,W,de,h);let Be=!1;for(const je of se){this.updateFeatureProperties(Oe,je);const{filter:at}=je;if(at){if(W.properties=Oe.properties,at.needGeometry){const At=Yt(W,!0);if(!at.filter(new Ur(this.tileID.overscaledZ,{worldview:g}),At,this.tileID.canonical))continue}else if(!at.filter(new Ur(this.tileID.overscaledZ,{worldview:g}),W))continue}Be=!0,je.targetId&&this.addFeatureVariant(Oe,je)}Be&&this.appendToResult(r,ue,_,Oe,be)}}loadMatchingModelFeature(r,o,u,h,g,y){const{featureIndex:_,bucketIndex:S}=o,C=this.bucketLayerIDs[S],P=u.layers,R=Object.keys(P);if(!R.length||qn(R,C))for(let D=0;D<C.length;D++){const B=C[D],{styleLayer:$,targets:q}=P[B];if($.type!=="model")continue;const W=h.tile,J=W.getBucket($);if(!(J&&J instanceof eb))continue;const ce=o8(J,_,h,g);if(!ce)continue;const{z:ue,x:H,y:se}=W.tileID.canonical,{feature:de,intersectionZ:be,position:Oe}=ce;let Re={};de.id!==void 0&&(Re=u.sourceCache.getFeatureState($.sourceLayer,de.id));const Be=new Yp({},ue,H,se,de.id);Be.tile=this.tileID.canonical,Be.state=Re,Be.properties=de.properties,Be.geometry={type:"Point",coordinates:[Oe.lng,Oe.lat]};let je=this.serializedLayersCache.get(B);je||(je=$.serialize(),je.id=B,this.serializedLayersCache.set(B,je)),Be.source=je.source,Be.sourceLayer=je["source-layer"],Be.layer=tt({},je);let at=!1;for(const At of q){this.updateFeatureProperties(Be,At);const{filter:yt}=At;if(yt){if(de.properties=Be.properties,yt.needGeometry){if(!yt.filter(new Ur(this.tileID.overscaledZ,{worldview:y}),de,this.tileID.canonical))continue}else if(!yt.filter(new Ur(this.tileID.overscaledZ,{worldview:y}),de))continue}at=!0,At.targetId&&this.addFeatureVariant(Be,At)}at&&this.appendToResult(r,B,_,Be,be)}}updateFeatureProperties(r,o,u){if(o.properties){const h={};for(const g in o.properties){const y=o.properties[g].evaluate({zoom:this.z},r._vectorTileFeature,r.state,r.tile,u);y!=null&&(h[g]=y)}r.properties=h}}addFeatureVariant(r,o,u){const h={target:o.target,namespace:o.namespace,uniqueFeatureID:o.uniqueFeatureID};o.properties&&(h.properties=r.properties),r.variants=r.variants||{},r.variants[o.targetId]=r.variants[o.targetId]||[],r.variants[o.targetId].push(h)}appendToResult(r,o,u,h,g){let y=r[o];y===void 0&&(y=r[o]=[]),y.push({featureIndex:u,feature:h,intersectionZ:g})}lookupSymbolFeatures(r,o,u,h,g,y){const _={};this.loadVTLayers();for(const S of r)this.loadMatchingFeature(_,{bucketIndex:o,sourceLayerIndex:u,featureIndex:S,layoutVertexArrayOffset:0},h,g,y);return _}loadFeature(r){const{featureIndex:o,sourceLayerIndex:u}=r;this.loadVTLayers();const h=this.sourceLayerCoder.decode(u),g=this.vtFeatures[h];if(g[o])return g[o];const y=this.vtLayers[h].feature(o);return g[o]=y,y}hasLayer(r){for(const o of this.bucketLayerIDs)for(const u of o)if(r===u)return!0;return!1}getId(r,o){let u=r.id;if(this.promoteId){const h=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[o];if(h!=null)if(Array.isArray(h)){if(!this.promoteIdExpression){const g=Na(h);if(g.result!=="success"){const y=g.value.map(_=>`${_.key}: ${_.message}`).join(", ");return void Zn(`Failed to create expression for promoteId: ${y}`)}this.promoteIdExpression=g.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new _d),u=this.promoteIdExpression.evaluate({zoom:0},r)}else u=r.properties[h];typeof u=="boolean"&&(u=Number(u))}return u}}function RT(a,r,o,u,h){return fn(a,(g,y)=>{const _=r instanceof yc?r.get(y):null;return _&&_.evaluate?_.evaluate(o,u,void 0,h):_})}function sD(a,r){return r-a}tn(AT,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const MT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Xx{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,u]=new Uint8Array(r,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const h=u>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);const g=MT[15&u];if(!g)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(r,2,1),[_]=new Uint32Array(r,4,1);return new Xx(_,y,g,r)}constructor(r,o=64,u=Float64Array,h){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=u,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const g=MT.indexOf(this.ArrayType),y=2*r*this.ArrayType.BYTES_PER_ELEMENT,_=r*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-_%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${u}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+_+S,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+y+_+S),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+_+S,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=r)}add(r,o){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=r,this.coords[this._pos++]=o,u}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Yx(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,o,u,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:y,nodeSize:_}=this,S=[0,g.length-1,0],C=[];for(;S.length;){const P=S.pop()||0,R=S.pop()||0,D=S.pop()||0;if(R-D<=_){for(let W=D;W<=R;W++){const J=y[2*W],ce=y[2*W+1];J>=r&&J<=u&&ce>=o&&ce<=h&&C.push(g[W])}continue}const B=D+R>>1,$=y[2*B],q=y[2*B+1];$>=r&&$<=u&&q>=o&&q<=h&&C.push(g[B]),(P===0?r<=$:o<=q)&&(S.push(D),S.push(B-1),S.push(1-P)),(P===0?u>=$:h>=q)&&(S.push(B+1),S.push(R),S.push(1-P))}return C}within(r,o,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:g,nodeSize:y}=this,_=[0,h.length-1,0],S=[],C=u*u;for(;_.length;){const P=_.pop()||0,R=_.pop()||0,D=_.pop()||0;if(R-D<=y){for(let W=D;W<=R;W++)LT(g[2*W],g[2*W+1],r,o)<=C&&S.push(h[W]);continue}const B=D+R>>1,$=g[2*B],q=g[2*B+1];LT($,q,r,o)<=C&&S.push(h[B]),(P===0?r-u<=$:o-u<=q)&&(_.push(D),_.push(B-1),_.push(1-P)),(P===0?r+u>=$:o+u>=q)&&(_.push(B+1),_.push(R),_.push(1-P))}return S}}function Yx(a,r,o,u,h,g){if(h-u<=o)return;const y=u+h>>1;DT(a,r,y,u,h,g),Yx(a,r,o,u,y-1,1-g),Yx(a,r,o,y+1,h,1-g)}function DT(a,r,o,u,h,g){for(;h>u;){if(h-u>600){const C=h-u+1,P=o-u+1,R=Math.log(C),D=.5*Math.exp(2*R/3),B=.5*Math.sqrt(R*D*(C-D)/C)*(P-C/2<0?-1:1);DT(a,r,o,Math.max(u,Math.floor(o-P*D/C+B)),Math.min(h,Math.floor(o+(C-P)*D/C+B)),g)}const y=r[2*o+g];let _=u,S=h;for(wg(a,r,u,o),r[2*h+g]>y&&wg(a,r,u,h);_<S;){for(wg(a,r,_,S),_++,S--;r[2*_+g]<y;)_++;for(;r[2*S+g]>y;)S--}r[2*u+g]===y?wg(a,r,u,S):(S++,wg(a,r,S,h)),S<=o&&(u=S+1),o<=S&&(h=S-1)}}function wg(a,r,o,u){Jx(a,o,u),Jx(r,2*o,2*u),Jx(r,2*o+1,2*u+1)}function Jx(a,r,o){const u=a[r];a[r]=a[o],a[o]=u}function LT(a,r,o,u){const h=a-o,g=r-u;return h*h+g*g}s.$=xo,s.A=rc,s.B=Fa,s.C=bc,s.D=Fp,s.E=ic,s.F=2,s.G=lg,s.H=J3,s.I=cs,s.J=pl,s.K=class extends Jv{},s.L=sc,s.M=na,s.N=Ad,s.O=Pd,s.P=Vt,s.Q=gm,s.R=ud,s.S=fp,s.T=Mx,s.U=vp,s.V=Jv,s.W=$0,s.X=Na,s.Y=tp,s.Z=ru,s._=nu,s.a=function(a){return To.API_CDN_URL_REGEX.test(a)},s.a$=it,s.a0=oc,s.a1=bp,s.a2=Rd,s.a3=mm,s.a4=function(a){const r=a.value;let o=[];if(!r)return o;const u=pl(r);return u!=="string"?(o=o.concat([new Jv(a.key,r,`string expected, "${u}" found`)]),o):(zx(r,!0)||(o=o.concat([new Jv(a.key,r,`invalid url "${r}"`)])),o)},s.a5=We,s.a6=H0,s.a7=Mi,s.a8=Mt,s.a9=class{constructor(a){this.specification=a}possiblyEvaluate(a,r){return gi(a.expression.evaluate(r))}interpolate(a,r,o){return{x:Mn(a.x,r.x,o),y:Mn(a.y,r.y,o),z:Mn(a.z,r.z,o),azimuthal:Mn(a.azimuthal,r.azimuthal,o),polar:Mn(a.polar,r.polar,o)}}},s.aA=_n,s.aB=w,s.aC=ba,s.aD=ke,s.aE=nt,s.aF=function(a,r){const o={};for(let u=0;u<r.length;u++){const h=r[u];h in a&&(o[h]=a[h])}return o},s.aG=ve,s.aH=Se,s.aI=class{constructor(a){this.entries={},this.scheduler=a}request(a,r,o,u){const h=this.entries[a]=this.entries[a]||{callbacks:[]};if(h.result){const[g,y]=h.result;return this.scheduler?this.scheduler.add(()=>{u(g,y)},r):u(g,y),()=>{}}return h.callbacks.push(u),h.cancel||(h.cancel=o((g,y)=>{h.result=[g,y];for(const _ of h.callbacks)this.scheduler?this.scheduler.add(()=>{_(g,y)},r):_(g,y);setTimeout(()=>delete this.entries[a],3e3)})),()=>{h.result||(h.callbacks=h.callbacks.filter(g=>g!==u),h.callbacks.length||(h.cancel(),delete this.entries[a]))}}},s.aJ=function(a,r,o){const u=JSON.stringify(a.request);return a.data&&(this.deduped.entries[u]={result:[null,a.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},h=>{const g=dd(a.request,(y,_,S,C)=>{y?h(y):_&&h(null,{vectorTile:o?void 0:new nr.VectorTile(new Av(_)),rawData:_,cacheControl:S,expires:C})});return()=>{g.cancel(),h()}},r)},s.aK=function(a){Ff++,Ff>Oa&&(a.getActor().send("enforceCacheSizeLimit",Qs),Ff=0)},s.aL=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},s.aM=Jo,s.aN=Ek,s.aO=Dk,s.aP=Tk,s.aQ=function(a,r){const o=document.createElement("video");o.muted=!0,o.onloadstart=function(){r(null,o)};for(let u=0;u<a.length;u++){const h=document.createElement("source");e1(a[u])||(o.crossOrigin="Anonymous"),h.src=a[u],o.appendChild(h)}return{cancel:()=>{}}},s.aR=Wv,s.aS=function(a){return fetch(a).then(r=>r.arrayBuffer()).then(r=>y3(r,0,a))},s.aT=IT,s.aU=class{constructor(a,r,o,u){this.id=a,this.position=r!=null?new ae(r[0],r[1]):new ae(0,0),this.orientation=o??[0,0,0],this.nodes=u,this.uploaded=!1,this.aabb=new kr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(a,r){if(me(a.matrix,r,a.matrix),a.meshes)for(const o of a.meshes){const u=kr.applyTransformFast(o.aabb,a.matrix);this.aabb.encapsulate(u)}if(a.children)for(const o of a.children)this._applyTransformations(o,a.matrix)}computeBoundsAndApplyParent(){const a=oe([]);for(const r of this.nodes)this._applyTransformations(r,a)}computeModelMatrix(a,r,o,u,h,g,y=!1){qk(this.matrix,this,a.transform,this.position,r,o,u,h,g,y)}upload(a){if(!this.uploaded){for(const r of this.nodes)Fx(r,a);for(const r of this.nodes)Qv(r);this.uploaded=!0}}destroy(){for(const a of this.nodes)$x(a)}},s.aV=dn,s.aW=ug,s.aX=De,s.aY=Ze,s.aZ=hu,s.a_=Io,s.aa=Ur,s.ab=Dd,s.ac=Fe,s.ad=cn,s.ae=ut,s.af=Ne,s.ag=yc,s.ah=Su,s.ai=Mn,s.aj=Ut,s.ak=Uh,s.al=Cr,s.am=Ar,s.an=class{constructor(a){this.specification=a}possiblyEvaluate(a,r){return function([o,u]){const h=gi([1,o,u]);return{x:h.x,y:h.y,z:h.z}}(a.expression.evaluate(r))}interpolate(a,r,o){return{x:Mn(a.x,r.x,o),y:Mn(a.y,r.y,o),z:Mn(a.z,r.z,o)}}},s.ao=function(a,r,o=0,u=!0){const h=new Vt(o,o),g=a.sub(h),y=r.add(h),_=[g,new Vt(y.x,g.y),y,new Vt(g.x,y.y)];return u&&_.push(g.clone()),_},s.ap=function(a,r){const o=[];for(let u=0;u<a.length;u++){const h=et(u-1,-1,a.length-1),g=et(u+1,-1,a.length-1),y=a[u],_=a[g],S=a[h].sub(y).unit(),C=_.sub(y).unit(),P=C.angleWithSep(S.x,S.y),R=S.add(C).unit().mult(-1*r/Math.sin(P/2));o.push(y.add(R))}return o},s.aq=hk,s.ar=wu,s.as=function(a,r,o=0){return Qe(((r.x-o)*a.scale-a.x)*Ut,(r.y*a.scale-a.y)*Ut,Ye(r.z,r.y))},s.at=qe,s.au=pn,s.av=ui,s.aw=C3,s.ax=function(a){let r=1/0,o=1/0,u=-1/0,h=-1/0;for(const g of a)r=Math.min(r,g.x),o=Math.min(o,g.y),u=Math.max(u,g.x),h=Math.max(h,g.y);return{min:new Vt(r,o),max:new Vt(u,h)}},s.ay=Te,s.az=me,s.b=function(a){return To.API_FONTS_REGEX.test(a)},s.b$=function(a,r,o){o*=.5;var u=r[0],h=r[1],g=r[2],y=r[3],_=Math.sin(o),S=Math.cos(o);return a[0]=u*S+h*_,a[1]=h*S-u*_,a[2]=g*S+y*_,a[3]=y*S-g*_,a},s.b0=Ep,s.b1=Hv,s.b2=function(){qa.isLoading()||qa.isLoaded()||cu()!=="deferred"||q0()},s.b3=wm,s.b4=Yt,s.b5=Yp,s.b6=Tr,s.b7=ux,s.b8=Y1,s.b9=rn,s.bA=function(a,r){const{x:o,y:u}=a.point,h=rC(o,u,a.worldSize/a._pixelsPerMercatorPixel,0,0);return me(h,h,V1(Al(r)))},s.bB=A,s.bC=function(a){return a[0]=0,a[1]=0,a[2]=0,a},s.bD=function(a,r){return Math.hypot(r[0]-a[0],r[1]-a[1],r[2]-a[2])},s.bE=ir,s.bF=$t,s.bG=kn,s.bH=ag,s.bI=Is,s.bJ=vx,s.bK=function(a,r,o,u,h){const g=5*r+2;a.float32[g+0]=o,a.float32[g+1]=u,a.float32[g+2]=h},s.bL=qv,s.bM=Tv,s.bN=as,s.bO=wo,s.bP=DC,s.bQ=$k,s.bR=FC,s.bS=$C,s.bT=yx,s.bU=ok,s.bV=wx,s.bW=Xx,s.bX=et,s.bY=In,s.bZ=Xt,s.b_=gn,s.ba=Ha,s.bb=Ud,s.bc=YS,s.bd=zi,s.be=Hm,s.bf=Px,s.bg=function(a,r){const o=Su(r.zoom);if(o===0)return Al(a);const u=mv(a),h=N1(u),g=ke(u.getWest())*r.worldSize,y=ke(u.getEast())*r.worldSize,_=Se(u.getNorth())*r.worldSize,S=Se(u.getSouth())*r.worldSize,C=[g,_,0],P=[y,_,0],R=[g,S,0],D=[y,S,0],B=fe([],r.globeMatrix);return cn(C,C,B),cn(P,P,B),cn(R,R,B),cn(D,D,B),h[0]=wc(h[0],R,o),h[1]=wc(h[1],D,o),h[2]=wc(h[2],P,o),h[3]=wc(h[3],C,o),kr.fromPoints(h)},s.bh=yv,s.bi=fe,s.bj=Um,s.bk=wc,s.bl=Fd,s.bm=XA,s.bn=Me,s.bo=ne,s.bp=ab,s.bq=Av,s.br=dd,s.bs=function(a,r){const o=[];for(const u in a)u in r||o.push(u);return o},s.bt=Ve,s.bu=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.bv=Da,s.bw=function(a){var r=new E(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r},s.bx=oe,s.by=_t,s.bz=K,s.c=Lh,s.c$=Ev,s.c0=cr,s.c1=Ri,s.c2=function(a,r){return a[0]=-r[0],a[1]=-r[1],a[2]=-r[2],a[3]=r[3],a},s.c3=Ce,s.c4=function(a,r,o,u,h){var g,y=1/Math.tan(r/2);return a[0]=y/o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=y,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,h!=null&&h!==1/0?(a[10]=(h+u)*(g=1/(u-h)),a[14]=2*h*u*g):(a[10]=-1,a[14]=-2*u),a},s.c5=function(a,r,o,u,h,g,y){var _=1/(r-o),S=1/(u-h),C=1/(g-y);return a[0]=-2*_,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*S,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*C,a[11]=0,a[12]=(r+o)*_,a[13]=(h+u)*S,a[14]=(y+g)*C,a[15]=1,a},s.c6=Ae,s.c7=function(a,r,o){a[4*r+0]=o[0],a[4*r+1]=o[1],a[4*r+2]=o[2],a[4*r+3]=o[3]},s.c8=Rp,s.c9=Wd,s.cA=Xv,s.cB=$e,s.cC=Lk,s.cD=function(a){const r=Lk(a,!0);return A([],[r[0],r[1],r[4],r[5]])},s.cE=te,s.cF=ti,s.cG=re,s.cH=function(a){const{x:r,y:o}=a.point,{lng:u,lat:h}=a._center;return rC(r,o,a.worldSize,u,h)},s.cI=wt,s.cJ=rt,s.cK=zp,s.cL=k,s.cM=function(a,r,o){let u=0;for(let h=0;h<2;++h)a[h]>0&&(u+=(a[h]-0)*(a[h]-0)),r[h]<0&&(u+=(0-r[h])*(0-r[h]));return u},s.cN=function(a){return a*a*a*a*a},s.cO=Ee,s.cP=45,s.cQ=Mp,s.cR=function(a,r,o){const u=Math.sqrt(a*a+r*r+o*o),h=u>0?Math.acos(o/u)*nd:0;let g=a!==0||r!==0?Math.atan2(-r,-a)*nd+90:0;return g<0&&(g+=360),[u,g,h]},s.cS=Qe,s.cT=gi,s.cU=st,s.cV=Qt,s.cW=kr,s.cX=kt,s.cY=function(a){return[Math.pow(a[0],1/2.2),Math.pow(a[1],1/2.2),Math.pow(a[2],1/2.2)]},s.cZ=zx,s.c_=function(a,r){return a.readFields(l8,{icons:[]},r)},s.ca=Wi,s.cb=ya,s.cc=vu,s.cd=ae,s.ce=yk,s.cf=function(){var a=new E(4);return E!=Float32Array&&(a[1]=0,a[2]=0),a[0]=1,a[3]=1,a},s.cg=function(a,r,o){var u=r[0],h=r[1],g=r[2],y=r[3],_=Math.sin(o),S=Math.cos(o);return a[0]=u*S+g*_,a[1]=h*S+y*_,a[2]=u*-_+g*S,a[3]=h*-_+y*S,a},s.ch=function(a,r){return a[0]===r[0]&&a[1]===r[1]&&a[2]===r[2]&&a[3]===r[3]},s.ci=He,s.cj=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},s.ck=so,s.cl=ei,s.cm=XS,s.cn=vi,s.co=Ok,s.cp=Jd,s.cq=eC,s.cr=function(a,r,o,u,h,g,y,_,S){if(S.name==="globe")return eC(a,r,new Jd(o,u,h),!1);const C=ug({z:o,x:u,y:h},S);return new kr([(g+C.x/C.scale)*r,r*(C.y/C.scale),y],[(g+C.x2/C.scale)*r,r*(C.y2/C.scale),_])},s.cs=function(a,r,o){return a[0]=Math.min(r[0],o[0]),a[1]=Math.min(r[1],o[1]),a[2]=Math.min(r[2],o[2]),a[3]=Math.min(r[3],o[3]),a},s.ct=function(a,r,o){return a[0]=Math.max(r[0],o[0]),a[1]=Math.max(r[1],o[1]),a[2]=Math.max(r[2],o[2]),a[3]=Math.max(r[3],o[3]),a},s.cu=function(a){const r=Math.round((a+45+360)%360/90)%4;return Q[r]},s.cv=ht,s.cw=Jt,s.cx=I,s.cy=function(a){const r=oe(new Float64Array(16));me(r,a.pixelMatrix,a.globeMatrix);const o=[0,F,0],u=[0,V,0];return cn(o,o,r),cn(u,u,r),[o[0]>0&&o[0]<=a.width&&o[1]>0&&o[1]<=a.height&&!U1(a,new ae(a.center.lat,90)),u[0]>0&&u[0]<=a.width&&u[1]>0&&u[1]<=a.height&&!U1(a,new ae(a.center.lat,-90))]},s.cz=function(a,r){const{scale:o}=a.tileTransform,u=o*Ut/(a.tileSize*Math.pow(2,r.zoom-a.tileID.overscaledZ+a.tileID.canonical.z));return function(h,g,y){var _=g[1],S=g[2],C=g[3],P=y[0],R=y[1];return h[0]=g[0]*P,h[1]=_*P,h[2]=S*R,h[3]=C*R,h}(new Float32Array(4),r.inverseAdjustmentMatrix,[u,u])},s.d=function(a){return To.API_TILEJSON_REGEX.test(a)},s.d$=Om,s.d0=Up,s.d1=_x,s.d2=Fh,s.d3=gc,s.d4=Bs,s.d5=pd,s.d6=Nn,s.d7=function(a){const r=a.indexOf(zd);return r>=0?a.slice(0,r):a},s.d8=function(a){return a.indexOf(zd)>=0},s.d9=function(a){const r=a.lastIndexOf(zd);return r>=0?a.slice(r+1):""},s.dA=nC,s.dB=rs,s.dC=Vo,s.dD=256,s.dE=function(a,r){const o=[0,0,0];return cn(o,o,yv(Al(r.canonical))),cn(o,o,a),o},s.dF=a=>({u_matrix:new vu(a),u_texsize:new ya(a),u_pixels_to_tile_units:new Kd(a),u_device_pixel_ratio:new Wi(a),u_width_scale:new Wi(a),u_floor_width_scale:new Wi(a),u_image:new Rp(a),u_units_to_pixels:new ya(a),u_tile_units_to_pixels:new Wi(a),u_alpha_discard_threshold:new Wi(a),u_trim_offset:new ya(a),u_trim_fade_range:new ya(a),u_trim_color:new Mp(a),u_emissive_strength:new Wi(a),u_zbias_factor:new Wi(a),u_tile_to_meter:new Wi(a),u_ground_shadow_factor:new Wd(a),u_pattern_transition:new Wi(a)}),s.dG=a=>({u_matrix:new vu(a),u_pixels_to_tile_units:new Kd(a),u_device_pixel_ratio:new Wi(a),u_width_scale:new Wi(a),u_floor_width_scale:new Wi(a),u_units_to_pixels:new ya(a),u_dash_image:new Rp(a),u_gradient_image:new Rp(a),u_image_height:new Wi(a),u_texsize:new ya(a),u_tile_units_to_pixels:new Wi(a),u_alpha_discard_threshold:new Wi(a),u_trim_offset:new ya(a),u_trim_fade_range:new ya(a),u_trim_color:new Mp(a),u_emissive_strength:new Wi(a),u_zbias_factor:new Wi(a),u_tile_to_meter:new Wi(a),u_ground_shadow_factor:new Wd(a)}),s.dH=a=>({u_camera_to_center_distance:new Wi(a),u_extrude_scale:new Kd(a),u_device_pixel_ratio:new Wi(a),u_matrix:new vu(a),u_inv_rot_matrix:new vu(a),u_merc_center:new ya(a),u_tile_id:new Wd(a),u_zoom_transition:new Wi(a),u_up_dir:new Wd(a),u_emissive_strength:new Wi(a)}),s.dI=Am,s.dJ=hM,s.dK=sC,s.dL=(a,r,o,u,h,g)=>{const y=a.transform,_=y.projection.name==="globe";let S;if(g.paint.get("circle-pitch-alignment")==="map")if(_){const P=nC(y.zoom,r.canonical)*y._pixelsPerMercatorPixel;S=Float32Array.from([P,0,0,P])}else S=y.calculatePixelsToTileUnitsMatrix(o);else S=new Float32Array([y.pixelsToGLUnits[0],0,0,y.pixelsToGLUnits[1]]);const C={u_camera_to_center_distance:a.transform.getCameraToCenterDistance(y.projection),u_matrix:a.translatePosMatrix(r.projMatrix,o,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Js.devicePixelRatio,u_extrude_scale:S,u_inv_rot_matrix:tR,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:g.paint.get("circle-emissive-strength")};if(_){C.u_inv_rot_matrix=u,C.u_merc_center=h,C.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],C.u_zoom_transition=Su(y.zoom);const P=h[0]*Ut,R=h[1]*Ut;C.u_up_dir=y.projection.upVector(new Jd(0,0,0),P,R)}return C},s.dM=I3,s.dN=os,s.dO=(a,r,o,u,h,g,y,_,S,C)=>{const P=a.transform,R=P.pitch<15?k3(.07,.7,Te((14-P.zoom)/5,0,1)):.07,D=o.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:E3(a,r,o,u),u_texsize:r.imageAtlasTexture?r.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:P.calculatePixelsToTileUnitsMatrix(r),u_device_pixel_ratio:h,u_width_scale:g,u_floor_width_scale:y,u_image:0,u_tile_units_to_pixels:T3(r,P),u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:_,u_trim_fade_range:o.paint.get("line-trim-fade-range"),u_trim_color:o.paint.get("line-trim-color").toPremultipliedRenderColor(D?null:o.lut).toArray01(),u_emissive_strength:o.paint.get("line-emissive-strength"),u_zbias_factor:R,u_tile_to_meter:st(r.tileID.canonical,0),u_ground_shadow_factor:S,u_pattern_transition:C}},s.dP=(a,r,o,u,h,g,y,_,S,C)=>{const P=a.transform,R=P.calculatePixelsToTileUnitsMatrix(r),D=o.paint.get("line-trim-color-use-theme").constantOr("default")==="none",B=P.pitch<15?k3(.07,.7,Te((14-P.zoom)/5,0,1)):.07;return{u_matrix:E3(a,r,o,u),u_pixels_to_tile_units:R,u_device_pixel_ratio:g,u_width_scale:y,u_floor_width_scale:_,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:h,u_texsize:P3(o)&&r.lineAtlasTexture?r.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:T3(r,a.transform),u_alpha_discard_threshold:0,u_trim_offset:S,u_trim_fade_range:o.paint.get("line-trim-fade-range"),u_trim_color:o.paint.get("line-trim-color").toPremultipliedRenderColor(D?null:o.lut).toArray01(),u_emissive_strength:o.paint.get("line-emissive-strength"),u_zbias_factor:B,u_tile_to_meter:st(r.tileID.canonical,0),u_ground_shadow_factor:C}},s.dQ=Nt,s.dR=qm,s.dS=Ye,s.dT=KA,s.dU=kv,s.dV=JC,s.dW=ku,s.dX=450,s.dY=7,s.dZ=WM,s.d_=Sr,s.da=function(a){const r=[],o=a.id;return o===void 0&&r.push({message:`layers.${o}: missing required property "id"`}),a.render===void 0&&r.push({message:`layers.${o}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&r.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),r},s.db=function(a,r,o,u){return a.type==="custom"?new KM(a,r):new s8[a.type](a,r,o,u)},s.dc=Fn,s.dd=function(a){const r=a.indexOf(zd);return r>=0?a.slice(r+1):""},s.de=class extends Yp{constructor(a,r){super(a._vectorTileFeature,a._z,a._x,a._y,a.id),a.state&&(this.state=Object.assign({},a.state)),this.target=r.target,this.namespace=r.namespace,r.properties&&(this.properties=r.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=a.source,this.sourceLayer=a.sourceLayer,this.layer=a.layer)}toJSON(){const a=super.toJSON();return a.target=this.target,a.namespace=this.namespace,a}},s.df=yp,s.dg=Uc,s.dh=function(a){return a({pluginStatus:Yo,pluginURL:Ua}),yp.on("pluginStateChange",a),a},s.di=dv,s.dj=class extends Ga{constructor(a){super(a),this.current=$m}set(a,r,o){if(this.fetchUniformLocation(a,r)){for(let u=0;u<9;u++)if(o[u]!==this.current[u]){this.current=o,this.gl.uniformMatrix3fv(this.location,!1,o);break}}}},s.dk=le,s.dl=function(a,r,o){const u=Su(o.zoom),h=a.style.map._antialias,g=a.terrain&&a.terrain.exaggeration()>0;return u===0&&!h&&!g},s.dm=function(a){const r=a.pixelsPerMeter,o=r/Ae(1,a.center.lat),u=oe(new Float64Array(16));return ne(u,u,[a.point.x,a.point.y,0]),te(u,u,[o,o,r]),Float32Array.from(u)},s.dn=mv,s.dp=function(a){const r=ht-5;a=Te(a,-80.051129,r)/r*90;const o=Math.pow(Math.abs(Math.sin(Cr(a))),3);return Math.round(o*(N.length-1))},s.dq=function(a,r,o,u){const h=r.getNorth(),g=r.getSouth(),y=r.getWest(),_=r.getEast(),S=1<<a.z,C=_-y,P=h-g,R=C/O,D=-P/N[o],B=[0,R,0,D,0,0,h,y,0];if(a.z>0){const $=180/u;U(B,B,[$/C+1,0,0,0,$/P+1,0,-.5*$/R,.5*$/D,1])}return B[2]=S,B[5]=a.x,B[8]=a.y,B},s.dr=Al,s.ds=function(a,r,o){const u=oe(new Float64Array(16)),h=(r/(1<<a)-.5)*Math.PI*2;return ze(u,o.globeMatrix,h),Float32Array.from(u)},s.dt=class{isDataAvailableAtPoint(a){const r=this._source();if(this.isUsingMockSource()||!r||a.y<0||a.y>1)return!1;const o=r.getSource().maxzoom,u=1<<o,h=Math.floor(a.x),g=Math.floor((a.x-h)*u),y=Math.floor(a.y*u),_=this.findDEMTileFor(new Jo(o,h,o,g,y));return!(!_||!_.dem)}getAtPointOrZero(a,r=0){return this.getAtPoint(a,r)||0}getAtPoint(a,r,o=!0){if(this.isUsingMockSource())return null;r==null&&(r=null);const u=this._source();if(!u||a.y<0||a.y>1)return r;const h=u.getSource().maxzoom,g=1<<h,y=Math.floor(a.x),_=a.x-y,S=new Jo(h,y,h,Math.floor(_*g),Math.floor(a.y*g)),C=this.findDEMTileFor(S);if(!C||!C.dem)return r;const P=C.dem,R=1<<C.tileID.canonical.z,D=(_*R-C.tileID.canonical.x)*P.dim,B=(a.y*R-C.tileID.canonical.y)*P.dim,$=Math.floor(D),q=Math.floor(B);return(o?this.exaggeration():1)*Mn(Mn(P.get($,q),P.get($,q+1),B-q),Mn(P.get($+1,q),P.get($+1,q+1),B-q),D-$)}getAtTileOffset(a,r,o){const u=1<<a.canonical.z;return this.getAtPointOrZero(new Fe(a.wrap+(a.canonical.x+r/Ut)/u,(a.canonical.y+o/Ut)/u))}getAtTileOffsetFunc(a,r,o,u){return h=>{const g=this.getAtTileOffset(a,h.x,h.y),y=u.upVector(a.canonical,h.x,h.y);return In(y,y,g*u.upVectorScale(a.canonical,r,o).metersToTile),y}}getForTilePoints(a,r,o,u){if(this.isUsingMockSource())return!1;const h=Wp.create(this,a,u);return!!h&&(r.forEach(g=>{g[2]=this.exaggeration()*h.getElevationAt(g[0],g[1],o)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const r=this.findDEMTileFor(a);if(!r||!r.dem)return null;const o=r.dem.tree,u=r.tileID,h=1<<a.canonical.z-u.canonical.z;let g=a.canonical.x/h-u.canonical.x,y=a.canonical.y/h-u.canonical.y,_=0;for(let S=0;S<a.canonical.z-u.canonical.z&&!o.leaves[_];S++){g*=2,y*=2;const C=2*Math.floor(y)+Math.floor(g);_=o.childOffsets[_]+C,g%=1,y%=1}return{min:this.exaggeration()*o.minimums[_],max:this.exaggeration()*o.maximums[_]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,r,o){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const a=this.visibleDemTiles;if(a.length===0)return null;let r=!1,o=Number.MAX_VALUE,u=Number.MIN_VALUE;for(const h of a){const g=this.getMinMaxForTile(h.tileID);g&&(o=Math.min(o,g.min),u=Math.max(u,g.max),r=!0)}return r?{min:o,max:u}:null}},s.du=gC,s.dv=fv,s.dw=function(a,r){return[Math.pow(a[0],2.2)*r,Math.pow(a[1],2.2)*r,Math.pow(a[2],2.2)*r]},s.dx=z,s.dy=function(a,r){var o=Math.sin(r),u=Math.cos(r);return a[0]=u,a[1]=o,a[2]=0,a[3]=-o,a[4]=u,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},s.dz=Yn,s.e=To,s.e$=PT,s.e0=256,s.e1=V1,s.e2=ga,s.e3=ze,s.e4=function(a,r){return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[4],a[4]=r[5],a[5]=r[6],a[6]=r[8],a[7]=r[9],a[8]=r[10],a},s.e5=Tl,s.e6=jd,s.e7=L0,s.e8=function(a,r,o,u,h){return Te((a-r)/(o-r)*(h-u)+u,u,h)},s.e9=zn,s.eA=function(a,r,o){return a[0]=r[0]/o[0],a[1]=r[1]/o[1],a[2]=r[2]/o[2],a},s.eB=xt,s.eC=G,s.eD=oo,s.eE=function(a,r,o,u){return a[0]=r,a[1]=o,a[2]=u,a},s.eF=function([a,r,o]){const u=Math.hypot(a,r,o),h=Math.atan2(a,o),g=.5*Math.PI-Math.acos(-r/u);return new ae(rt(h),rt(g))},s.eG=On,s.eH=Lx,s.eI=function(a){const r=a.navigator?a.navigator.userAgent:null;return!!function(o){if(Ni==null){const u=o.navigator?o.navigator.userAgent:null;Ni=!!o.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Ni}(a)&&!(!r||!(r.match("Version/15.4")||r.match("Version/15.5")||r.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/)))},s.eJ=function(a,r){Qs=a,Oa=r},s.eK=U1,s.eL=iC,s.eM=function(a){const r=[0,0,0],o=oe(new Float64Array(16));return me(o,a.pixelMatrix,a.globeMatrix),cn(r,r,o),new Vt(r[0],r[1])},s.eN=function(){const a=tg;a&&(a.isPreloaded()&&a.numActive()===1?(a.release(ix),tg=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.eO=function(){Ev().acquire(ix)},s.eP=cu,s.eQ=function(a,r,o=!1){if(Yo===ds.deferred||Yo===ds.loading||Yo===ds.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ua=Js.resolveURL(a),Yo=ds.deferred,xm=r,gp(),o||q0()},s.eR=function(a){$p=Js.resolveURL(a),Np||(Np=new Fp(Ev(),new ic)),Np.broadcast("setMeshoptUrl",$p)},s.eS=d3,s.eT=function(a){sx=Js.resolveURL(a),Np||(Np=new Fp(Ev(),new ic)),Np.broadcast("setDracoUrl",sx)},s.eU=u3,s.eV=eg,s.eW=function(a){const r=Ql();if(!r)return;const o=r.delete(La);a&&o.then(()=>a()).catch(a)},s.eX=nh,s.eY=tn,s.eZ=Cu,s.e_=Za,s.ea=function(a,r){var o=r[0],u=r[1],h=r[2],g=r[3],y=r[4],_=r[5],S=r[6],C=r[7],P=r[8],R=P*y-_*C,D=-P*g+_*S,B=C*g-y*S,$=o*R+u*D+h*B;return $?(a[0]=R*($=1/$),a[1]=(-P*u+h*C)*$,a[2]=(_*u-h*y)*$,a[3]=D*$,a[4]=(P*o-h*S)*$,a[5]=(-_*o+h*g)*$,a[6]=B*$,a[7]=(-C*o+u*S)*$,a[8]=(y*o-u*g)*$,a):null},s.eb=Un,s.ec=It,s.ed=Ox,s.ee=function(a,r){if(a===r){var o=r[1],u=r[2],h=r[3],g=r[6],y=r[7],_=r[11];a[1]=r[4],a[2]=r[8],a[3]=r[12],a[4]=o,a[6]=r[9],a[7]=r[13],a[8]=u,a[9]=g,a[11]=r[14],a[12]=h,a[13]=y,a[14]=_}else a[0]=r[0],a[1]=r[4],a[2]=r[8],a[3]=r[12],a[4]=r[1],a[5]=r[5],a[6]=r[9],a[7]=r[13],a[8]=r[2],a[9]=r[6],a[10]=r[10],a[11]=r[14],a[12]=r[3],a[13]=r[7],a[14]=r[11],a[15]=r[15];return a},s.ef=Je,s.eg=[1,1,1],s.eh=class{constructor(a,r,o,u){this.context=a,this.format=u,this.size=o,this.texture=a.gl.createTexture();const[h,g,y]=this.size,{gl:_}=a;_.bindTexture(_.TEXTURE_3D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),_.texImage3D(_.TEXTURE_3D,0,this.format,h,g,y,0,Ax(this.format),Rx(this.format),r.data)}bind(a,r){const{context:o}=this,{gl:u}=o;u.bindTexture(u.TEXTURE_3D,this.texture),a!==this.minFilter&&(u.texParameteri(u.TEXTURE_3D,u.TEXTURE_MAG_FILTER,a),u.texParameteri(u.TEXTURE_3D,u.TEXTURE_MIN_FILTER,a),this.minFilter=a),r!==this.wrapS&&(u.texParameteri(u.TEXTURE_3D,u.TEXTURE_WRAP_S,r),u.texParameteri(u.TEXTURE_3D,u.TEXTURE_WRAP_T,r),this.wrapS=r)}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}},s.ei=Wp,s.ej=function(a,r,o,u){var h=new E(4);return h[0]=a,h[1]=r,h[2]=o,h[3]=u,h},s.ek=Kt,s.el=function(a,r,o,u){var h=r[0],g=r[1],y=r[2],_=r[3];return a[0]=h+u*(o[0]-h),a[1]=g+u*(o[1]-g),a[2]=y+u*(o[2]-y),a[3]=_+u*(o[3]-_),a},s.em=Gp,s.en=kl,s.eo=_c,s.ep=function(a,r,o,u,h,g,y,_,S,C,P,R,D,B,$,q){var W=new E(16);return W[0]=a,W[1]=r,W[2]=o,W[3]=u,W[4]=h,W[5]=g,W[6]=y,W[7]=_,W[8]=S,W[9]=C,W[10]=P,W[11]=R,W[12]=D,W[13]=B,W[14]=$,W[15]=q,W},s.eq=Y,s.er=kp,s.es=Dm,s.et=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Vt(1/0,1/0),max:new Vt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(a,r=!1){const o=OC(new Vt(0,0),new Vt(Ut,Ut),a),u=[];if(r&&!Q1(o,this._globalClipBounds))return u;for(const h of this._activeRegions){if(h.hiddenByOverlap||!Q1(o,h))continue;const g=PR(h.min,h.max,a);u.push({min:g.min,max:g.max,sourceId:this._sourceIds[h.priority],footprint:h.footprint,footprintTileId:h.tileId,order:h.order,clipMask:h.clipMask,clipScope:h.clipScope})}return u}setSources(a){this._setSources(a.map(r=>({getSourceId:()=>r.cache.id,getFootprints:()=>{const o=[];for(const u of r.cache.getVisibleCoordinates()){const h=r.cache.getTile(u).buckets[r.layer];h&&h.updateFootprints(u.toUnwrapped(),o)}return o},getOrder:()=>r.order,getClipMask:()=>r.clipMask,getClipScope:()=>r.clipScope})))}_addSource(a){const r=a.getFootprints();if(r.length===0)return;const o=a.getOrder(),u=a.getClipMask(),h=a.getClipScope();for(const g of r){if(!g.footprint)continue;const y=OC(g.footprint.min,g.footprint.max,g.id);this._activeRegions.push({min:y.min,max:y.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:g.id,footprint:g.footprint,order:o,clipMask:u,clipScope:h})}this._sourceIds.push(a.getSourceId())}_computeReplacement(){this._activeRegions.sort((r,o)=>r.priority-o.priority||Sv(r.min,o.min)||Sv(r.max,o.max)||r.order-o.order||r.clipMask-o.clipMask||function(u,h){const g=(y,_)=>y+_;return u.length-h.length||u.reduce(g,"").localeCompare(h.reduce(g,""))}(r.clipScope,o.clipScope));let a=this._activeRegions.length!==this._prevRegions.length;if(!a){let r=0;for(;!a&&r!==this._activeRegions.length;){const o=this._activeRegions[r],u=this._prevRegions[r];a=o.priority!==u.priority||!LC(o,u)||o.order!==u.order||o.clipMask!==u.clipMask||!Da(o.clipScope,u.clipScope),++r}}if(a){++this._updateTime;for(const o of this._activeRegions)o.order!==wv&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,o.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,o.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,o.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,o.max.y));const r=o=>{const u=this._activeRegions;if(o>=u.length)return o;const h=u[o].priority;for(;o<u.length&&u[o].priority===h;)++o;return o};if(this._sourceIds.length>1){let o=0,u=r(o);for(;o!==u;){let h=o;const g=o;for(;h!==u;){const y=this._activeRegions[h];y.hiddenByOverlap=!1;for(let _=0;_<g;_++){const S=this._activeRegions[_];if(!S.hiddenByOverlap&&y.order===wv&&Q1(y,S)&&(y.hiddenByOverlap=BC(y.footprint,y.tileId,S.footprint,S.tileId),y.hiddenByOverlap))break}++h}o=u,u=r(o)}}}}_setSources(a){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let r=a.length-1;r>=0;r--)this._addSource(a[r]);this._computeReplacement()}},s.eu=wv,s.ev=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy()}_fillGridMeshWithLods(a,r){const o=new Ha,u=new Io,h=[],g=a+1+2,y=r[0]+1,_=r[0]+1+(1+r.length),S=(C,P,R)=>{let D=C===g-1?C-2:C===0?C:C-1;return D+=R?24575:0,[D,P]};for(let C=0;C<g;++C)o.emplaceBack(...S(C,0,!0));for(let C=0;C<y;++C)for(let P=0;P<g;++P)o.emplaceBack(...S(P,C,(P===0||P===g-1)&&!0));for(let C=0;C<r.length;++C){const P=r[C];for(let R=0;R<g;++R)o.emplaceBack(...S(R,P,!0))}for(let C=0;C<r.length;++C){const P=u.length,R=r[C]+1+2,D=new Io;for(let q=0;q<R-1;q++){const W=q===R-2,J=W?g*(_-r.length+C-q):g;for(let ce=0;ce<g-1;ce++){const ue=q*g+ce;q===0||W||ce===0||ce===g-2?(D.emplaceBack(ue+1,ue,ue+J),D.emplaceBack(ue+J,ue+J+1,ue+1)):(u.emplaceBack(ue+1,ue,ue+J),u.emplaceBack(ue+J,ue+J+1,ue+1))}}const B=zi.simpleSegment(0,P,o.length,u.length-P);for(let q=0;q<D.uint16.length;q+=3)u.emplaceBack(D.uint16[q],D.uint16[q+1],D.uint16[q+2]);const $=zi.simpleSegment(0,P,o.length,u.length-P);h.push({withoutSkirts:B,withSkirts:$})}return{vertices:o,indices:u,segments:h}}_createGrid(a){const r=this._fillGridMeshWithLods(O,N);this._gridSegments=r.segments,this._gridBuffer=a.createVertexBuffer(r.vertices,YS.members),this._gridIndexBuffer=a.createIndexBuffer(r.indices,!0)}_createPoles(a){const r=new Io;for(let y=0;y<=O;y++)r.emplaceBack(0,y+1,y+2);this._poleIndexBuffer=a.createIndexBuffer(r,!0);const o=new Tl,u=new Tl,h=new Tl,g=new Tl;this._poleSegments=[];for(let y=0,_=0;y<k;y++){const S=360/(1<<y);o.emplaceBack(0,-w,0,.5,0),u.emplaceBack(0,-w,0,.5,1),h.emplaceBack(0,-w,0,.5,.5),g.emplaceBack(0,-w,0,.5,.5);for(let C=0;C<=O;C++){let P=C/O,R=0;const D=Mn(0,S,P),[B,$,q]=Z(QA,eR,D,w);o.emplaceBack(B,$,q,P,R),u.emplaceBack(B,$,q,P,1-R);const W=Cr(D);P=.5+.5*Math.sin(W),R=.5+.5*Math.cos(W),h.emplaceBack(B,$,q,P,R),g.emplaceBack(B,$,q,P,1-R)}this._poleSegments.push(zi.simpleSegment(_,0,66,64)),_+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(o,pv,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(u,pv,!1),this._texturedPoleNorthVertexBuffer=a.createVertexBuffer(h,pv,!1),this._texturedPoleSouthVertexBuffer=a.createVertexBuffer(g,pv,!1)}getGridBuffers(a,r){return[this._gridBuffer,this._gridIndexBuffer,r?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a,r){return[r?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,r?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}},s.ew=xe,s.ex=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},s.ey=Le,s.ez=Ge,s.f=function(a){return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,(r,o)=>String.fromCharCode(+("0x"+o))))},s.f0=AT,s.f1=x3,s.f2=ur,s.f3="hd_road_elevation",s.f4=Es,s.f5=fn,s.f6=eh,s.f7=bx,s.f8=rh,s.f9=function(a,r,o,u,h,g,y,_=1,S,C,P){a.createArrays(),a.tilePixelRatio=Ut/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const R=a.layers[0].layout,D=a.layers[0]._unevaluatedLayout._values,B={};B.scaleFactor=_,B.textSizeScaleRange=R.get("text-size-scale-range"),B.iconSizeScaleRange=R.get("icon-size-scale-range");const[$,q]=B.textSizeScaleRange,[W,J]=B.iconSizeScaleRange;B.textScaleFactor=Te(B.scaleFactor,$,q),B.iconScaleFactor=Te(B.scaleFactor,W,J);const ce=D["text-size"],ue=D["icon-size"];if(a.textSizeData.kind==="composite"){const{minZoom:Re,maxZoom:Be}=a.textSizeData;B.compositeTextSizes=[ce.possiblyEvaluate(new Ur(Re,{worldview:P}),g),ce.possiblyEvaluate(new Ur(Be,{worldview:P}),g)]}if(a.iconSizeData.kind==="composite"){const{minZoom:Re,maxZoom:Be}=a.iconSizeData;B.compositeIconSizes=[ue.possiblyEvaluate(new Ur(Re,{worldview:P}),g),ue.possiblyEvaluate(new Ur(Be,{worldview:P}),g)]}B.layoutTextSize=ce.possiblyEvaluate(new Ur(y+1,{worldview:P}),g),B.layoutIconSize=ue.possiblyEvaluate(new Ur(y+1,{worldview:P}),g),B.textMaxSize=ce.possiblyEvaluate(new Ur(18,{worldview:P}),g);const H=R.get("symbol-placement"),se=R.get("text-rotation-alignment")==="map"&&H!=="point",de=R.get("text-size");let be=!1;const Oe=[];for(const Re of a.features){const Be=R.get("text-font").evaluate(Re,{},g).join(","),je=de.evaluate(Re,{},g)*B.textScaleFactor,at=B.layoutTextSize.evaluate(Re,{},g)*B.textScaleFactor,At=B.layoutIconSize.evaluate(Re,{},g)*B.iconScaleFactor,yt={horizontal:{},vertical:void 0},Pt=Re.text;let Rt,ct=[0,0];if(Pt){const Dn=Pt.toString(),Kn=R.get("text-letter-spacing").evaluate(Re,{},g)*wo,Wn=R.get("text-line-height").evaluate(Re,{},g)*wo,sr=T1(Dn)?Kn:0,Qn=R.get("text-anchor").evaluate(Re,{},g),ar=R.get("text-variable-anchor");if(!ar){const dt=R.get("text-radial-offset").evaluate(Re,{},g);if(dt)ct=ok(Qn,[dt*wo,xx]);else{const Ft=R.get("text-offset").evaluate(Re,{},g);ct=[Ft[0]*wo,Ft[1]*wo]}}let Dr=se?"center":R.get("text-justify").evaluate(Re,{},g);const si=H==="point",ye=si?R.get("text-max-width").evaluate(Re,{},g)*wo:1/0,_e=dt=>{a.allowVerticalPlacement&&Ld(Dn)&&(yt.vertical=gx(Pt,r,o,h,Be,ye,Wn,Qn,dt,sr,ct,Is.vertical,!0,at,je,S))};if(!se&&ar){const dt=Dr==="auto"?ar.map(Wt=>wx(Wt)):[Dr];let Ft=!1;for(let Wt=0;Wt<dt.length;Wt++){const Ht=dt[Wt];if(!yt.horizontal[Ht])if(Ft)yt.horizontal[Ht]=yt.horizontal[0];else{const sn=gx(Pt,r,o,h,Be,ye,Wn,"center",Ht,sr,ct,Is.horizontal,!1,at,je,S);sn&&(yt.horizontal[Ht]=sn,Ft=sn.positionedLines.length===1)}}_e("left")}else{if(Dr==="auto"&&(Dr=wx(Qn)),si||R.get("text-writing-mode").indexOf("horizontal")>=0||!Ld(Dn)){const dt=gx(Pt,r,o,h,Be,ye,Wn,Qn,Dr,sr,ct,Is.horizontal,!1,at,je,S);dt&&(yt.horizontal[Dr]=dt)}_e(si?"left":Dr)}}let Tt,ot,lt,Lt,zt,Sn,un=!1;const Gt=R.get("icon-text-fit").evaluate(Re,{},g);if(Re.icon&&Re.icon.hasPrimary()){const Dn=ak(Re.icon,a.iconSizeData,D["icon-size"],g,a.zoom,Re,S,B.iconScaleFactor,P);Tt=Dn.iconPrimary,lt=Dn.iconSecondary;const Kn=Tt.toString();if(ot=u.get(Kn),ot&&(zt=R.get("icon-offset").evaluate(Re,{},g),Sn=R.get("icon-anchor").evaluate(Re,{},g),Rt=SM(h.get(Kn),lt?h.get(lt.toString()):void 0,zt,Sn),un=ot.sdf,a.sdfIcons===void 0?a.sdfIcons=ot.sdf:a.sdfIcons!==ot.sdf&&Zn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ot.pixelRatio!==a.pixelRatio||R.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0)),lt){const Wn=lt.toString();Lt=u.get(Wn)}}be=be||!(!Re.icon||!Re.icon.hasSecondary());const Dt=Sx(yt.horizontal)||yt.vertical;a.iconsInText||(a.iconsInText=!!Dt&&Dt.iconsInText);const Vn=at*B.textScaleFactor/wo,{defaultShapedIcon:ln,verticallyShapedIcon:hn}=DM(a,Rt,R,Re,g,yt,Vn,zt,Gt);Gt!=="none"&&Rt&&(U3(Rt)||q3(Rt))&&(zv(0,ot,Tt,Rt,ln,Gt,C,u,h),zv(0,Lt,lt,Rt,ln,Gt,C,u,h),hn&&(zv(0,ot,Tt,Rt,hn,Gt,C,u,h),zv(0,Lt,lt,Rt,hn,Gt,C,u,h))),Rt=ln,Oe.push({feature:Re,shapedTextOrientations:yt,shapedText:Dt,shapedIcon:Rt,iconPrimary:Tt,iconSecondary:lt,iconOffset:zt,iconAnchor:Sn,verticallyShapedIcon:hn,layoutTextSize:at,layoutIconSize:At,textOffset:ct,isSDFIcon:un,iconTextFit:Gt})}return{featureData:Oe,sizes:B,hasAnySecondaryIcon:be,textAlongLine:se,symbolPlacement:H}},s.fa=Q3,s.fb=function(a,r,o,u,h,g,y,_,S,C){const{featureData:P,hasAnySecondaryIcon:R,sizes:D,textAlongLine:B,symbolPlacement:$}=r;for(const q of P){const{shapedIcon:W,verticallyShapedIcon:J,feature:ce,shapedTextOrientations:ue,shapedText:H,layoutTextSize:se,textOffset:de,isSDFIcon:be,iconPrimary:Oe,iconSecondary:Re,iconTextFit:Be,iconOffset:je}=q;lk(W,C.iconPositions,Oe,Re),lk(J,C.iconPositions,Oe,Re),MM(ue,C.iconPositions),RM(Oe,Re,C.iconPositions),(H||W)&&LM(a,ce,ue,W,J,S,D,se,0,de,be,u,h,y,_,R,Be,je,B,$)}o&&a.generateCollisionDebugBuffers(g,a.collisionBoxArray,D.textScaleFactor)},s.fc=nr,s.fd=sb,s.fe=Yl,s.ff=Gn,s.fg=O3,s.fh=cl,s.fi=function(a){let r=0;if(new Uint32Array(a,0,1)[0]!==p3){const o=new Uint32Array(a,0,7),[,,u,h,g,y]=o;r=o.byteLength+h+g+y+g,(u!==a.byteLength||r>=a.byteLength)&&Zn("Invalid b3dm header information.")}return y3(a,r)},s.fj=function(a,r){const o=IT(a);for(const u of o){for(const h of u.meshes)rD(h);u.lights&&(u.lightMeshIndex=u.meshes.length,u.meshes.push(iD(u.lights,r)))}return o},s.fk=eb,s.fl=zr,s.fm=l3,s.fn=qa,s.fo=ds,s.fp=function(a){Vc(),pa!=null&&pa.then(r=>{r.keys().then(o=>{for(let u=0;u<o.length-a;u++)r.delete(o[u]).catch(h=>Zn(h.message))}).catch(o=>Zn(o.message))}).catch(r=>Zn(r.message))},s.g=function(a,r){return Uc(tt(a,{method:"GET"}),r)},s.h=tt,s.i=function(a){return To.API_STYLE_REGEX.test(a)&&!Lh(a)},s.j=function(a){return a.indexOf("mapbox:")===0},s.k=ul,s.l=$f,s.m=function(a){return decodeURIComponent(atob(a).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""))},s.n=function(a,r){return Uc(tt(a,{type:"json"}),r)},s.o=Nf,s.p=function(a,r){return Uc(tt(a,{method:"POST"}),r)},s.q=Js,s.r=Oo,s.s=function(a){try{const r=self[a];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}},s.t=Bh,s.u=function(){return function a(r){return r?(r^Math.random()*(16>>r/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()},s.v=function(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)},s.w=Zn,s.x=function(){return ox||(ox=new nh),ox},s.y=Hx,s.z=Vh}),d(["./shared"],function(s){function T(rt){const Q=rt?rt.url.toString():void 0;return Q?performance.getEntriesByName(Q):[]}function E(rt){if(typeof rt=="number"||typeof rt=="boolean"||typeof rt=="string"||rt==null)return JSON.stringify(rt);if(Array.isArray(rt)){let le="[";for(const xe of rt)le+=`${E(xe)},`;return`${le}]`}let Q="{";for(const le of Object.keys(rt).sort())Q+=`${le}:${E(rt[le])},`;return`${Q}}`}function A(rt){let Q="";for(const le of s.bu)Q+=`/${E(rt[le])}`;return Q}class z{constructor(Q){this.keyCache={},this._layers={},this._layerConfigs={},Q&&this.replace(Q)}replace(Q,le){this._layerConfigs={},this._layers={},this.update(Q,[],le)}update(Q,le,xe){this._options=xe;for(const Te of Q)this._layerConfigs[Te.id]=Te,(this._layers[Te.id]=s.db(Te,this.scope,null,this._options)).compileFilter(xe),this.keyCache[Te.id]&&delete this.keyCache[Te.id];for(const Te of le)delete this.keyCache[Te],delete this._layerConfigs[Te],delete this._layers[Te];this.familiesBySource={};const Le=function(Te,Ne){const et={};for(let tt=0;tt<Te.length;tt++){const vt=Te[tt];let it=Ne&&Ne[vt.id];it||(vt.type==="symbol"?it=vt.id:(it=A(vt),vt.type==="line"&&vt.paint&&function dn(fn){return typeof fn=="string"&&fn==="line-progress"||(Array.isArray(fn)?fn.some(dn):!(!fn||typeof fn!="object")&&Object.values(fn).some(dn))}(vt.paint["line-width"])&&(it+=`/${E(vt.paint["line-width"])}`))),Ne&&(Ne[vt.id]=it);let Nt=et[it];Nt||(Nt=et[it]=[]),Nt.push(vt)}const Ve=[];for(const tt in et)Ve.push(et[tt]);return Ve}(Object.values(this._layerConfigs),this.keyCache);for(const Te of Le){const Ne=Te.map(Nt=>this._layers[Nt.id]),et=Ne[0];if(et.visibility==="none")continue;const Ve=et.source||"";let tt=this.familiesBySource[Ve];tt||(tt=this.familiesBySource[Ve]={});const vt=et.sourceLayer||"_geojsonTileLayer";let it=tt[vt];it||(it=tt[vt]=[]),it.push(Ne)}}}const j=1*s.e_;class U{constructor(Q){const le={},xe=[];for(const et in Q){const Ve=Q[et],tt=le[et]={};for(const vt in Ve.glyphs){const it=Ve.glyphs[+vt];if(!it||it.bitmap.width===0||it.bitmap.height===0)continue;const Nt=it.metrics.localGlyph?j:1,dn={x:0,y:0,w:it.bitmap.width+2*Nt,h:it.bitmap.height+2*Nt};xe.push(dn),tt[vt]=dn}}const{w:Le,h:Te}=s.H(xe),Ne=new s.eZ({width:Le||1,height:Te||1});for(const et in Q){const Ve=Q[et];for(const tt in Ve.glyphs){const vt=Ve.glyphs[+tt];if(!vt||vt.bitmap.width===0||vt.bitmap.height===0)continue;const it=le[et][tt],Nt=vt.metrics.localGlyph?j:1;s.eZ.copy(vt.bitmap,Ne,{x:0,y:0},{x:it.x+Nt,y:it.y+Nt},vt.bitmap)}}this.image=Ne,this.positions=le}}s.eY(U,"GlyphAtlas");class K{constructor(Q){this.tileID=new s.aM(Q.tileID.overscaledZ,Q.tileID.wrap,Q.tileID.canonical.z,Q.tileID.canonical.x,Q.tileID.canonical.y),this.tileZoom=Q.tileZoom,this.uid=Q.uid,this.zoom=Q.zoom,this.lut=Q.lut,this.canonical=Q.tileID.canonical,this.pixelRatio=Q.pixelRatio,this.tileSize=Q.tileSize,this.source=Q.source,this.scope=Q.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Q.showCollisionBoxes,this.collectResourceTiming=!!Q.request&&Q.request.collectResourceTiming,this.promoteId=Q.promoteId,this.isSymbolTile=Q.isSymbolTile,this.tileTransform=s.aW(Q.tileID.canonical,Q.projection),this.projection=Q.projection,this.worldview=Q.worldview,this.localizableLayerIds=Q.localizableLayerIds,this.brightness=Q.brightness,this.extraShadowCaster=!!Q.extraShadowCaster,this.tessellationStep=Q.tessellationStep,this.scaleFactor=Q.scaleFactor,this.worldview=Q.worldview}parse(Q,le,xe,Le,Te,Ne){this.status="parsing",this.data=Q,this.collisionBoxArray=new s.b0;const et=new s.e$(Object.keys(Q.layers).sort()),Ve=new s.f0(this.tileID,this.promoteId);Ve.bucketLayerIDs=[];const tt={},vt=new s.f1(256,256),it={featureIndex:Ve,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:vt,availableImages:xe,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},Nt=[],dn=le.familiesBySource[this.source];for(const Fn in dn){const Nn=Q.layers[Fn];if(!Nn)continue;let qn=!1,lr=!1,Zn=!1;for(const zr of dn[Fn])zr[0].type==="symbol"?qn=!0:lr=!0,zr[0].is3D()&&zr[0].type!=="model"&&(Zn=!0);if(this.extraShadowCaster&&!Zn||this.isSymbolTile===!0&&!qn||this.isSymbolTile===!1&&!lr)continue;Nn.version===1&&s.w(`Vector tile source "${this.source}" layer "${Fn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Yr=et.encode(Fn),mi=[];let gi=!1;for(let zr=0,Tr=0;zr<Nn.length;zr++){const Ni=Nn.feature(zr),Ri=Ve.getId(Ni,Fn);if(this.localizableLayerIds&&this.localizableLayerIds.has(Fn)){const Ti=Ni.properties?Ni.properties.worldview:null;if(this.worldview&&typeof Ti=="string")if(Ti==="all")Ni.properties.$localized=!0;else{if(!Ti.split(",").includes(this.worldview))continue;Ni.properties.$localized=!0,Ni.properties.worldview=this.worldview}}!gi&&Ni.properties&&Ni.properties.hasOwnProperty(s.f2)&&(gi=!0),mi.push({feature:Ni,id:Ri,index:Tr,sourceLayerIndex:Yr}),Tr++}gi&&!it.elevationFeatures&&Q.layers.hasOwnProperty(s.f3)&&(it.elevationFeatures=s.f4.parseFrom(Q.layers[s.f3],this.canonical));for(const zr of dn[Fn]){const Tr=zr[0];if(this.extraShadowCaster&&(!Tr.is3D()||Tr.type==="model")||this.isSymbolTile!==void 0&&Tr.type==="symbol"!==this.isSymbolTile||Tr.minzoom&&this.zoom<Math.floor(Tr.minzoom)||Tr.maxzoom&&this.zoom>=Tr.maxzoom||Tr.visibility==="none")continue;oe(zr,this.zoom,it.brightness,xe,this.worldview);const Ni=tt[Tr.id]=Tr.createBucket({index:Ve.bucketLayerIDs.length,layers:zr,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yr,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep,styleDefinedModelURLs:Le,worldview:this.worldview});Ve.bucketLayerIDs.push(zr.map(Ti=>s.C(Ti.id,Ti.scope)));let Ri=Ni.prepare?Ni.prepare():null;Ri!=null?(Ri=Ri.then(()=>Ni.populate(mi,it,this.tileID.canonical,this.tileTransform)),Nt.push(Ri)):Ni.populate(mi,it,this.tileID.canonical,this.tileTransform)}}const fn=()=>{let Fn,Nn,qn,lr,Zn,Yr;vt.trim();const mi={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},gi=()=>{if(Fn)return this.status="done",Ne(Fn);if(this.extraShadowCaster)this.status="done",Ne(null,{buckets:Object.values(tt).filter(Tr=>!Tr.isEmpty()),featureIndex:Ve,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:it.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Nn&&qn&&lr){const Tr=new U(Nn),Ni=new Map;for(const[_o,rs]of qn.entries()){const{imagePosition:Vo}=s.f7(_o,rs,s.f8);Ni.set(_o,Vo)}const Ri={};for(const _o in tt){const rs=tt[_o];rs instanceof s.b1&&(oe(rs.layers,this.zoom,it.brightness,xe,this.worldview),Ri[_o]=s.f9(rs,Nn,Tr.positions,qn,Ni,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio,Zn,this.worldview))}const Ti={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(Te,qn,Zn,()=>{Ti.iconsPending=!1,zr(Ri,Tr,Ti)}),this.rasterizeIfNeeded(Te,lr,Yr,()=>{Ti.patternsPending=!1,zr(Ri,Tr,Ti)})}},zr=(Tr,Ni,Ri,Ti)=>{if(Ri.iconsPending||Ri.patternsPending)return;const _o=new s.fa(qn,lr,this.lut);for(const rs in tt){const Vo=tt[rs];if(rs in Tr)s.fb(Vo,Tr[rs],this.showCollisionBoxes,xe,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,qn,_o);else if(Vo.hasPattern&&(Vo instanceof s.b7||Vo instanceof s.b8||Vo instanceof s.dU)){oe(Vo.layers,this.zoom,it.brightness,xe,this.worldview);const rd=Object.fromEntries(_o.patternPositions);Vo.addFeatures(it,this.tileID.canonical,rd,xe,this.tileTransform,this.brightness)}}this.status="done",Ne(null,{buckets:Object.values(tt).filter(rs=>!rs.isEmpty()),featureIndex:Ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ni.image,lineAtlas:vt,imageAtlas:_o,brightness:it.brightness})};if(!this.extraShadowCaster){const Tr=s.f5(it.glyphDependencies,Ti=>Object.keys(Ti).map(Number));Object.keys(Tr).length?Te.send("getGlyphs",{uid:this.uid,stacks:Tr,scope:this.scope},(Ti,_o)=>{Fn||(Fn=Ti,Nn=_o,gi())},void 0,!1,mi):Nn={};const Ni=Array.from(it.iconDependencies.keys()).map(Ti=>s.I.parse(Ti));Ni.length?Te.send("getImages",{images:Ni,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Ti,_o)=>{Fn||(Fn=Ti,qn=new Map,Zn=this.updateImageMapAndGetImageTaskQueue(qn,_o,it.iconDependencies),gi())},void 0,!1,mi):(qn=new Map,Zn=new Map);const Ri=Array.from(it.patternDependencies.keys()).map(Ti=>s.I.parse(Ti));Ri.length?Te.send("getImages",{images:Ri,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Ti,_o)=>{Fn||(Fn=Ti,lr=new Map,Yr=this.updateImageMapAndGetImageTaskQueue(lr,_o,it.patternDependencies),gi())},void 0,!1,mi):(lr=new Map,Yr=new Map)}if(it.elevationFeatures&&it.elevationFeatures.length>0){const Tr=[];for(const Ri of Object.values(tt))if(Ri instanceof s.b8){const Ti=Ri.getUnevaluatedPortalGraph();Ti&&Tr.push(Ti)}const Ni=s.f6.evaluate(Tr);for(const Ri of Object.values(tt))if(Ri instanceof s.b8){const Ti=Q.layers[et.decode(Ri.sourceLayerIndex)];Ri.setEvaluatedPortalGraph(Ni,Ti,this.tileID.canonical,it.availableImages,it.brightness)}}gi()};Nt.length>0?Promise.allSettled(Nt).then(fn).catch(Ne):fn()}rasterizeIfNeeded(Q,le,xe,Le){Array.from(le.values()).some(Te=>Te.usvg)?this.rasterize(Q,le,xe,Le):Le()}updateImageMapAndGetImageTaskQueue(Q,le,xe){const Le=new Map;for(const Te of le.keys()){const Ne=xe.get(Te)||[];for(const et of Ne){const Ve=et.toString(),tt=le.get(et.id.toString());tt.usvg?Le.has(Ve)||(Le.set(Ve,et),Q.set(Ve,Object.assign({},tt))):Q.set(Ve,tt)}}return Le}rasterize(Q,le,xe,Le){this.rasterizeTask=Q.send("rasterizeImages",{scope:this.scope,tasks:xe},(Te,Ne)=>{if(!Te)for(const[et,Ve]of Ne.entries()){const tt=Object.assign(le.get(et),{data:Ve});le.set(et,tt)}Le()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function oe(rt,Q,le,xe,Le){const Te=new s.aa(Q,{brightness:le,worldview:Le});for(const Ne of rt)Ne.recalculate(Te,xe)}class fe extends s.E{constructor(Q,le,xe,Le,Te,Ne,et){super(),this.actor=Q,this.layerIndex=le,this.availableImages=xe,this.availableModels=Le,this.loadVectorData=Ne||s.aJ,this.loading={},this.loaded={},this.deduped=new s.aI(Q.scheduler),this.isSpriteLoaded=Te,this.scheduler=Q.scheduler,this.brightness=et}loadTile(Q,le){const xe=Q.uid,Le=Q&&Q.request,Te=Le&&Le.collectResourceTiming,Ne=this.loading[xe]=new K(Q);Ne.abort=this.loadVectorData(Q,(et,Ve)=>{const tt=!this.loading[xe];if(delete this.loading[xe],Ne.cancelRasterize(),tt||et||!Ve)return Ne.status="done",tt||(this.loaded[xe]=Ne),le(et);const vt=Ve.rawData,it={};Ve.expires&&(it.expires=Ve.expires),Ve.cacheControl&&(it.cacheControl=Ve.cacheControl),Ne.vectorTile=Ve.vectorTile||new s.fc.VectorTile(new s.bq(vt));const Nt=()=>{Ne.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,(dn,fn)=>{if(dn||!fn)return le(dn);const Fn={};if(Te){const Nn=T(Le);Nn.length>0&&(Fn.resourceTiming=JSON.parse(JSON.stringify(Nn)))}le(null,s.h({rawTileData:vt.slice(0)},fn,it,Fn))})};this.isSpriteLoaded?Nt():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Nt,{type:"parseTile",isSymbolTile:Q.isSymbolTile,zoom:Q.tileZoom}):Nt()}),this.loaded=this.loaded||{},this.loaded[xe]=Ne})}reloadTile(Q,le){const xe=this.loaded,Le=Q.uid;if(xe&&xe[Le]){const Te=xe[Le];Te.scaleFactor=Q.scaleFactor,Te.showCollisionBoxes=Q.showCollisionBoxes,Te.projection=Q.projection,Te.brightness=Q.brightness,Te.tileTransform=s.aW(Q.tileID.canonical,Q.projection),Te.extraShadowCaster=Q.extraShadowCaster,Te.lut=Q.lut,Te.worldview=Q.worldview;const Ne=(et,Ve)=>{const tt=Te.reloadCallback;tt&&(delete Te.reloadCallback,Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,tt)),le(et,Ve)};Te.status==="parsing"?Te.reloadCallback=Ne:Te.status==="done"&&(Te.vectorTile?Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,Ne):Ne())}else le(null,void 0)}abortTile(Q,le){const xe=Q.uid,Le=this.loading[xe];Le&&(Le.abort&&Le.abort(),delete this.loading[xe]),le()}removeTile(Q,le){const xe=this.loaded,Le=Q.uid;xe&&xe[Le]&&delete xe[Le],le()}}class me{loadTile(Q,le){const{uid:xe,encoding:Le,rawImageData:Te,padding:Ne}=Q,et=ImageBitmap&&Te instanceof ImageBitmap?this.getImageData(Te,Ne):Te;le(null,new s.fd(xe,et,Le,Ne<1))}reloadTile(Q,le){le(null,null)}abortTile(Q,le){le()}removeTile(Q,le){le()}getImageData(Q,le){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Q.width,Q.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Q.width,this.offscreenCanvas.height=Q.height,this.offscreenCanvasContext.drawImage(Q,0,0,Q.width,Q.height);const xe=this.offscreenCanvasContext.getImageData(-le,-le,Q.width+2*le,Q.height+2*le);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),xe}}s.bp.setPbf(s.bq);class ne{constructor(Q){this._mrt=new s.bp(Q.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=Q.uid,this.tileID=Q.tileID,this.source=Q.source}parse(Q,le){const xe=this._mrt;this.status="parsing",this._entireBuffer=Q;try{xe.parseHeader(Q),this._isHeaderLoaded=!0;const Le=[];for(const Te in xe.layers){const Ne=xe.getLayer(Te),et=Ne.getDataRange(Ne.getBandList()),Ve=xe.createDecodingTask(et),tt=Q.slice(et.firstByte,et.lastByte+1),vt=s.bp.performDecoding(tt,Ve).then(it=>Ve.complete(null,it)).catch(it=>Ve.complete(it,null));Le.push(vt)}Promise.allSettled(Le).then(()=>le(null,xe)).catch(Te=>le(Te))}catch(Le){le(Le)}}}class te{constructor(Q){this.actor=Q,this.loading={},this.loaded={}}loadTile(Q,le){const xe=Q.uid,Le=Q.request,Te=this.loading[xe]=new ne(Q),{cancel:Ne}=s.br(Le,(et,Ve,tt,vt)=>{const it=!this.loading[xe];if(delete this.loading[xe],it||et||!Ve)return Te.status="done",it||(this.loaded[xe]=Te),le(et);Te.parse(Ve,(Nt,dn)=>{if(Nt||!dn)return le(Nt);le(null,dn,tt,vt)}),this.loaded[xe]=Te});Te.abort=Ne}reloadTile(Q,le){le(null,void 0)}abortTile(Q,le){const xe=Q.uid,Le=this.loading[xe];Le&&(Le.abort&&Le.abort(),delete this.loading[xe]),le()}removeTile(Q,le){const xe=Q.uid;this.loaded[xe]&&delete this.loaded[xe],le()}decodeRasterArray(Q,le){s.bp.performDecoding(Q.buffer,Q.task).then(xe=>le(null,xe)).catch(xe=>le(xe))}}const re=s.fc.VectorTileFeature.prototype.toGeoJSON;class ze{constructor(Q){this._feature=Q,this.extent=s.aj,this.type=Q.type,this.properties=Q.tags,"id"in Q&&!isNaN(Q.id)&&(this.id=parseInt(Q.id,10))}loadGeometry(){if(this._feature.type===1){const Q=[];for(const le of this._feature.geometry)Q.push([new s.P(le[0],le[1])]);return Q}{const Q=[];for(const le of this._feature.geometry){const xe=[];for(const Le of le)xe.push(new s.P(Le[0],Le[1]));Q.push(xe)}return Q}}toGeoJSON(Q,le,xe){return re.call(this,Q,le,xe)}}class _t{constructor(Q){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.aj,this.length=Q.length,this._features=Q}feature(Q){return new ze(this._features[Q])}}class Me{constructor(Q,le){this.name=Q,this.extent=s.aj,this.length=le.length,this._features=le}feature(Q){return new ze(this._features[Q])}}class he extends _t{constructor(Q){super([]),this.layers={};for(const le in Q)this.layers[le]=new Me(le,Q[le])}}const Ce=64/4096,$e=128;class Je{constructor(){this.features=new Map}clear(){this.features.clear()}load(Q=[],le){for(const xe of Q){const Le=xe.id;if(Le==null)continue;let Te=this.features.get(Le);Te&&this.updateCache(Te,le),xe.geometry?(Te=ut(xe),this.updateCache(Te,le),this.features.set(Le,Te)):this.features.delete(Le),this.updateCache(Te,le)}}updateCache(Q,le){for(const{canonical:xe,uid:Le}of Object.values(le)){const{z:Te,x:Ne,y:et}=xe;ft(Q,Math.pow(2,Te),Ne,et)&&delete le[Le]}}getTile(Q,le,xe){const Le=Math.pow(2,Q),Te=[];for(const Ne of this.features.values())ft(Ne,Le,le,xe)&&Te.push(wt(Ne,Le,le,xe));return{features:Te}}getFeatures(){return[...this.features.values()]}}function ft({minX:rt,minY:Q,maxX:le,maxY:xe},Le,Te,Ne){return rt<(Te+1+Ce)/Le&&Q<(Ne+1+Ce)/Le&&le>(Te-Ce)/Le&&xe>(Ne-Ce)/Le}function ut(rt){const{id:Q,geometry:le,properties:xe}=rt;if(!le)return;if(le.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Le,coordinates:Te}=le,Ne={id:Q,type:1,geometry:[],tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},et=Ne.geometry;if(Le==="Point")Qe(Te,et,Ne);else if(Le==="MultiPoint")for(const Ve of Te)Qe(Ve,et,Ne);else if(Le==="LineString")Ne.type=2,Qt(Te,et,Ne);else if(Le==="MultiLineString")Ne.type=2,kt(Te,et,Ne);else if(Le==="Polygon")Ne.type=3,kt(Te,et,Ne,!0);else{if(Le!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Ne.type=3;for(const Ve of Te)kt(Ve,et,Ne,!0)}return Ne}function Qe([rt,Q],le,xe){const Le=s.aD(rt);let Te=s.aH(Q);Te=Te<0?0:Te>1?1:Te,le.push(Le,Te),xe.minX=Math.min(xe.minX,Le),xe.minY=Math.min(xe.minY,Te),xe.maxX=Math.max(xe.maxX,Le),xe.maxY=Math.max(xe.maxY,Te)}function Qt(rt,Q,le,xe=!1,Le=!1){const Te=[];for(const Ne of rt)Qe(Ne,Te,le);Q.push(Te),xe&&function(Ne,et){let Ve=0;for(let tt=0,vt=Ne.length,it=vt-2;tt<vt;it=tt,tt+=2)Ve+=(Ne[tt]-Ne[it])*(Ne[tt+1]+Ne[it+1]);if(Ve>0===et)for(let tt=0,vt=Ne.length;tt<vt/2;tt+=2){const it=Ne[tt],Nt=Ne[tt+1];Ne[tt]=Ne[vt-2-tt],Ne[tt+1]=Ne[vt-1-tt],Ne[vt-2-tt]=it,Ne[vt-1-tt]=Nt}}(Te,Le)}function kt(rt,Q,le,xe=!1){for(let Le=0;Le<rt.length;Le++)Qt(rt[Le],Q,le,xe,Le===0)}function wt(rt,Q,le,xe){const{id:Le,type:Te,geometry:Ne,tags:et}=rt,Ve=[];if(Te===1)(function(tt,vt,it,Nt,dn){for(let fn=0;fn<tt.length;fn+=2){const Fn=Math.round(s.aj*(tt[fn+0]*vt-it)),Nn=Math.round(s.aj*(tt[fn+1]*vt-Nt));dn.push([Fn,Nn])}})(Ne,Q,le,xe,Ve);else for(const tt of Ne)Et(tt,Q,le,xe,Ve);return{id:Le,type:Te,geometry:Ve,tags:et}}function Et(rt,Q,le,xe,Le){const Ne=s.aj+$e;let et;for(let Ve=0;Ve<rt.length-2;Ve+=2){let tt=Math.round(s.aj*(rt[Ve+0]*Q-le)),vt=Math.round(s.aj*(rt[Ve+1]*Q-xe)),it=Math.round(s.aj*(rt[Ve+2]*Q-le)),Nt=Math.round(s.aj*(rt[Ve+3]*Q-xe));const dn=it-tt,fn=Nt-vt;tt<-128&&it<-128||(tt<-128?(vt+=Math.round(fn*((-128-tt)/dn)),tt=-128):it<-128&&(Nt=vt+Math.round(fn*((-128-tt)/dn)),it=-128),vt<-128&&Nt<-128||(vt<-128?(tt+=Math.round(dn*((-128-vt)/fn)),vt=-128):Nt<-128&&(it=tt+Math.round(dn*((-128-vt)/fn)),Nt=-128),tt>=Ne&&it>=Ne||(tt>=Ne?(vt+=Math.round(fn*((Ne-tt)/dn)),tt=Ne):it>=Ne&&(Nt=vt+Math.round(fn*((Ne-tt)/dn)),it=Ne),vt>=Ne&&Nt>=Ne||(vt>=Ne?(tt+=Math.round(dn*((Ne-vt)/fn)),vt=Ne):Nt>=Ne&&(it=tt+Math.round(dn*((Ne-vt)/fn)),Nt=Ne),et&&tt===et[et.length-1][0]&&vt===et[et.length-1][1]||(et=[[tt,vt]],Le.push(et)),et.push([it,Nt])))))}}var on,In,ir,Or={exports:{}},oo=function(){if(ir)return Or.exports;ir=1;var rt=s.fg(),Q=function(){if(In)return on;In=1;var vt=s.fe(),it=s.ff().VectorTileFeature;function Nt(fn,Fn){this.options=Fn||{},this.features=fn,this.length=fn.length}function dn(fn,Fn){this.id=typeof fn.id=="number"?fn.id:void 0,this.type=fn.type,this.rawGeometry=fn.type===1?[fn.geometry]:fn.geometry,this.properties=fn.tags,this.extent=Fn||4096}return on=Nt,Nt.prototype.feature=function(fn){return new dn(this.features[fn],this.options.extent)},dn.prototype.loadGeometry=function(){var fn=this.rawGeometry;this.geometry=[];for(var Fn=0;Fn<fn.length;Fn++){for(var Nn=fn[Fn],qn=[],lr=0;lr<Nn.length;lr++)qn.push(new vt(Nn[lr][0],Nn[lr][1]));this.geometry.push(qn)}return this.geometry},dn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var fn=this.geometry,Fn=1/0,Nn=-1/0,qn=1/0,lr=-1/0,Zn=0;Zn<fn.length;Zn++)for(var Yr=fn[Zn],mi=0;mi<Yr.length;mi++){var gi=Yr[mi];Fn=Math.min(Fn,gi.x),Nn=Math.max(Nn,gi.x),qn=Math.min(qn,gi.y),lr=Math.max(lr,gi.y)}return[Fn,qn,Nn,lr]},dn.prototype.toGeoJSON=it.prototype.toGeoJSON,on}();function le(vt){var it=new rt;return function(Nt,dn){for(var fn in Nt.layers)dn.writeMessage(3,xe,Nt.layers[fn])}(vt,it),it.finish()}function xe(vt,it){var Nt;it.writeVarintField(15,vt.version||1),it.writeStringField(1,vt.name||""),it.writeVarintField(5,vt.extent||4096);var dn={keys:[],values:[],keycache:{},valuecache:{}};for(Nt=0;Nt<vt.length;Nt++)dn.feature=vt.feature(Nt),it.writeMessage(2,Le,dn);var fn=dn.keys;for(Nt=0;Nt<fn.length;Nt++)it.writeStringField(3,fn[Nt]);var Fn=dn.values;for(Nt=0;Nt<Fn.length;Nt++)it.writeMessage(4,tt,Fn[Nt])}function Le(vt,it){var Nt=vt.feature;Nt.id!==void 0&&it.writeVarintField(1,Nt.id),it.writeMessage(2,Te,vt),it.writeVarintField(3,Nt.type),it.writeMessage(4,Ve,Nt)}function Te(vt,it){var Nt=vt.feature,dn=vt.keys,fn=vt.values,Fn=vt.keycache,Nn=vt.valuecache;for(var qn in Nt.properties){var lr=Nt.properties[qn],Zn=Fn[qn];if(lr!==null){Zn===void 0&&(dn.push(qn),Fn[qn]=Zn=dn.length-1),it.writeVarint(Zn);var Yr=typeof lr;Yr!=="string"&&Yr!=="boolean"&&Yr!=="number"&&(lr=JSON.stringify(lr));var mi=Yr+":"+lr,gi=Nn[mi];gi===void 0&&(fn.push(lr),Nn[mi]=gi=fn.length-1),it.writeVarint(gi)}}}function Ne(vt,it){return(it<<3)+(7&vt)}function et(vt){return vt<<1^vt>>31}function Ve(vt,it){for(var Nt=vt.loadGeometry(),dn=vt.type,fn=0,Fn=0,Nn=Nt.length,qn=0;qn<Nn;qn++){var lr=Nt[qn],Zn=1;dn===1&&(Zn=lr.length),it.writeVarint(Ne(1,Zn));for(var Yr=dn===3?lr.length-1:lr.length,mi=0;mi<Yr;mi++){mi===1&&dn!==1&&it.writeVarint(Ne(2,Yr-1));var gi=lr[mi].x-fn,zr=lr[mi].y-Fn;it.writeVarint(et(gi)),it.writeVarint(et(zr)),fn+=gi,Fn+=zr}dn===3&&it.writeVarint(Ne(7,1))}}function tt(vt,it){var Nt=typeof vt;Nt==="string"?it.writeStringField(1,vt):Nt==="boolean"?it.writeBooleanField(7,vt):Nt==="number"&&(vt%1!=0?it.writeDoubleField(3,vt):vt<0?it.writeSVarintField(6,vt):it.writeVarintField(5,vt))}return Or.exports=le,Or.exports.fromVectorTileJs=le,Or.exports.fromGeojsonVt=function(vt,it){it=it||{};var Nt={};for(var dn in vt)Nt[dn]=new Q(vt[dn].features,it),Nt[dn].name=dn,Nt[dn].version=it.version,Nt[dn].extent=it.extent;return le({layers:Nt})},Or.exports.GeoJSONWrapper=Q,Or.exports}(),Un=s.fh(oo);const pn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:rt=>rt},kn=Math.fround||($t=new Float32Array(1),rt=>($t[0]=+rt,$t[0]));var $t;const Ln=3,cn=5,Yn=6;class ei{constructor(Q){this.options=Object.assign(Object.create(pn),Q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Q){const{log:le,minZoom:xe,maxZoom:Le}=this.options;le&&console.time("total time");const Te=`prepare ${Q.length} points`;le&&console.time(Te),this.points=Q;const Ne=[];for(let Ve=0;Ve<Q.length;Ve++){const tt=Q[Ve];if(!tt.geometry)continue;const[vt,it]=tt.geometry.coordinates,Nt=kn(xt(vt)),dn=kn(Xt(it));Ne.push(Nt,dn,1/0,Ve,-1,1),this.options.reduce&&Ne.push(0)}let et=this.trees[Le+1]=this._createTree(Ne);le&&console.timeEnd(Te);for(let Ve=Le;Ve>=xe;Ve--){const tt=+Date.now();et=this.trees[Ve]=this._createTree(this._cluster(et,Ve)),le&&console.log("z%d: %d clusters in %dms",Ve,et.numItems,+Date.now()-tt)}return le&&console.timeEnd("total time"),this}getClusters(Q,le){let xe=((Q[0]+180)%360+360)%360-180;const Le=Math.max(-90,Math.min(90,Q[1]));let Te=Q[2]===180?180:((Q[2]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,Q[3]));if(Q[2]-Q[0]>=360)xe=-180,Te=180;else if(xe>Te){const it=this.getClusters([xe,Le,180,Ne],le),Nt=this.getClusters([-180,Le,Te,Ne],le);return it.concat(Nt)}const et=this.trees[this._limitZoom(le)],Ve=et.range(xt(xe),Xt(Ne),xt(Te),Xt(Le)),tt=et.data,vt=[];for(const it of Ve){const Nt=this.stride*it;vt.push(tt[Nt+cn]>1?He(tt,Nt,this.clusterProps):this.points[tt[Nt+Ln]])}return vt}getChildren(Q){const le=this._getOriginId(Q),xe=this._getOriginZoom(Q),Le="No cluster with the specified id.",Te=this.trees[xe];if(!Te)throw new Error(Le);const Ne=Te.data;if(le*this.stride>=Ne.length)throw new Error(Le);const et=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),Ve=Te.within(Ne[le*this.stride],Ne[le*this.stride+1],et),tt=[];for(const vt of Ve){const it=vt*this.stride;Ne[it+4]===Q&&tt.push(Ne[it+cn]>1?He(Ne,it,this.clusterProps):this.points[Ne[it+Ln]])}if(tt.length===0)throw new Error(Le);return tt}getLeaves(Q,le,xe){const Le=[];return this._appendLeaves(Le,Q,le=le||10,xe=xe||0,0),Le}getTile(Q,le,xe){const Le=this.trees[this._limitZoom(Q)],Te=Math.pow(2,Q),{extent:Ne,radius:et}=this.options,Ve=et/Ne,tt=(xe-Ve)/Te,vt=(xe+1+Ve)/Te,it={features:[]};return this._addTileFeatures(Le.range((le-Ve)/Te,tt,(le+1+Ve)/Te,vt),Le.data,le,xe,Te,it),le===0&&this._addTileFeatures(Le.range(1-Ve/Te,tt,1,vt),Le.data,Te,xe,Te,it),le===Te-1&&this._addTileFeatures(Le.range(0,tt,Ve/Te,vt),Le.data,-1,xe,Te,it),it.features.length?it:null}getClusterExpansionZoom(Q){let le=this._getOriginZoom(Q)-1;for(;le<=this.options.maxZoom;){const xe=this.getChildren(Q);if(le++,xe.length!==1)break;Q=xe[0].properties.cluster_id}return le}_appendLeaves(Q,le,xe,Le,Te){const Ne=this.getChildren(le);for(const et of Ne){const Ve=et.properties;if(Ve&&Ve.cluster?Te+Ve.point_count<=Le?Te+=Ve.point_count:Te=this._appendLeaves(Q,Ve.cluster_id,xe,Le,Te):Te<Le?Te++:Q.push(et),Q.length===xe)break}return Te}_createTree(Q){const le=new s.bW(Q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<Q.length;xe+=this.stride)le.add(Q[xe],Q[xe+1]);return le.finish(),le.data=Q,le}_addTileFeatures(Q,le,xe,Le,Te,Ne){for(const et of Q){const Ve=et*this.stride,tt=le[Ve+cn]>1;let vt,it,Nt;if(tt)vt=qe(le,Ve,this.clusterProps),it=le[Ve],Nt=le[Ve+1];else{const Fn=this.points[le[Ve+Ln]];vt=Fn.properties;const[Nn,qn]=Fn.geometry.coordinates;it=xt(Nn),Nt=Xt(qn)}const dn={type:1,geometry:[[Math.round(this.options.extent*(it*Te-xe)),Math.round(this.options.extent*(Nt*Te-Le))]],tags:vt};let fn;fn=tt||this.options.generateId?le[Ve+Ln]:this.points[le[Ve+Ln]].id,fn!==void 0&&(dn.id=fn),Ne.features.push(dn)}}_limitZoom(Q){return Math.max(this.options.minZoom,Math.min(Math.floor(+Q),this.options.maxZoom+1))}_cluster(Q,le){const{radius:xe,extent:Le,reduce:Te,minPoints:Ne}=this.options,et=xe/(Le*Math.pow(2,le)),Ve=Q.data,tt=[],vt=this.stride;for(let it=0;it<Ve.length;it+=vt){if(Ve[it+2]<=le)continue;Ve[it+2]=le;const Nt=Ve[it],dn=Ve[it+1],fn=Q.within(Ve[it],Ve[it+1],et),Fn=Ve[it+cn];let Nn=Fn;for(const qn of fn){const lr=qn*vt;Ve[lr+2]>le&&(Nn+=Ve[lr+cn])}if(Nn>Fn&&Nn>=Ne){let qn,lr=Nt*Fn,Zn=dn*Fn,Yr=-1;const mi=(it/vt<<5)+(le+1)+this.points.length;for(const gi of fn){const zr=gi*vt;if(Ve[zr+2]<=le)continue;Ve[zr+2]=le;const Tr=Ve[zr+cn];lr+=Ve[zr]*Tr,Zn+=Ve[zr+1]*Tr,Ve[zr+4]=mi,Te&&(qn||(qn=this._map(Ve,it,!0),Yr=this.clusterProps.length,this.clusterProps.push(qn)),Te(qn,this._map(Ve,zr)))}Ve[it+4]=mi,tt.push(lr/Nn,Zn/Nn,1/0,mi,-1,Nn),Te&&tt.push(Yr)}else{for(let qn=0;qn<vt;qn++)tt.push(Ve[it+qn]);if(Nn>1)for(const qn of fn){const lr=qn*vt;if(!(Ve[lr+2]<=le)){Ve[lr+2]=le;for(let Zn=0;Zn<vt;Zn++)tt.push(Ve[lr+Zn])}}}}return tt}_getOriginId(Q){return Q-this.points.length>>5}_getOriginZoom(Q){return(Q-this.points.length)%32}_map(Q,le,xe){if(Q[le+cn]>1){const Ne=this.clusterProps[Q[le+Yn]];return xe?Object.assign({},Ne):Ne}const Le=this.points[Q[le+Ln]].properties,Te=this.options.map(Le);return xe&&Te===Le?Object.assign({},Te):Te}}function He(rt,Q,le){return{type:"Feature",id:rt[Q+Ln],properties:qe(rt,Q,le),geometry:{type:"Point",coordinates:[(xe=rt[Q],360*(xe-.5)),Kt(rt[Q+1])]}};var xe}function qe(rt,Q,le){const xe=rt[Q+cn],Le=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,Te=rt[Q+Yn],Ne=Te===-1?{}:Object.assign({},le[Te]);return Object.assign(Ne,{cluster:!0,cluster_id:rt[Q+Ln],point_count:xe,point_count_abbreviated:Le})}function xt(rt){return rt/360+.5}function Xt(rt){const Q=Math.sin(rt*Math.PI/180),le=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return le<0?0:le>1?1:le}function Kt(rt){const Q=(180-360*rt)*Math.PI/180;return 360*Math.atan(Math.exp(Q))/Math.PI-90}function Jt(rt,Q,le,xe){let Le=xe;const Te=Q+(le-Q>>1);let Ne,et=le-Q;const Ve=rt[Q],tt=rt[Q+1],vt=rt[le],it=rt[le+1];for(let Nt=Q+3;Nt<le;Nt+=3){const dn=On(rt[Nt],rt[Nt+1],Ve,tt,vt,it);if(dn>Le)Ne=Nt,Le=dn;else if(dn===Le){const fn=Math.abs(Nt-Te);fn<et&&(Ne=Nt,et=fn)}}Le>xe&&(Ne-Q>3&&Jt(rt,Q,Ne,xe),rt[Ne+2]=Le,le-Ne>3&&Jt(rt,Ne,le,xe))}function On(rt,Q,le,xe,Le,Te){let Ne=Le-le,et=Te-xe;if(Ne!==0||et!==0){const Ve=((rt-le)*Ne+(Q-xe)*et)/(Ne*Ne+et*et);Ve>1?(le=Le,xe=Te):Ve>0&&(le+=Ne*Ve,xe+=et*Ve)}return Ne=rt-le,et=Q-xe,Ne*Ne+et*et}function _n(rt,Q,le,xe){const Le={id:rt??null,type:Q,geometry:le,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Q==="Point"||Q==="MultiPoint"||Q==="LineString")xn(Le,le);else if(Q==="Polygon")xn(Le,le[0]);else if(Q==="MultiLineString")for(const Te of le)xn(Le,Te);else if(Q==="MultiPolygon")for(const Te of le)xn(Le,Te[0]);return Le}function xn(rt,Q){for(let le=0;le<Q.length;le+=3)rt.minX=Math.min(rt.minX,Q[le]),rt.minY=Math.min(rt.minY,Q[le+1]),rt.maxX=Math.max(rt.maxX,Q[le]),rt.maxY=Math.max(rt.maxY,Q[le+1])}function gn(rt,Q,le,xe){if(!Q.geometry)return;const Le=Q.geometry.coordinates;if(Le&&Le.length===0)return;const Te=Q.geometry.type,Ne=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2);let et=[],Ve=Q.id;if(le.promoteId?Ve=Q.properties[le.promoteId]:le.generateId&&(Ve=xe||0),Te==="Point")cr(Le,et);else if(Te==="MultiPoint")for(const tt of Le)cr(tt,et);else if(Te==="LineString")zn(Le,et,Ne,!1);else if(Te==="MultiLineString"){if(le.lineMetrics){for(const tt of Le)et=[],zn(tt,et,Ne,!1),rt.push(_n(Ve,"LineString",et,Q.properties));return}Hn(Le,et,Ne,!1)}else if(Te==="Polygon")Hn(Le,et,Ne,!0);else{if(Te!=="MultiPolygon"){if(Te==="GeometryCollection"){for(const tt of Q.geometry.geometries)gn(rt,{id:Ve,geometry:tt,properties:Q.properties},le,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const tt of Le){const vt=[];Hn(tt,vt,Ne,!0),et.push(vt)}}rt.push(_n(Ve,Te,et,Q.properties))}function cr(rt,Q){Q.push(yr(rt[0]),Gr(rt[1]),0)}function zn(rt,Q,le,xe){let Le,Te,Ne=0;for(let Ve=0;Ve<rt.length;Ve++){const tt=yr(rt[Ve][0]),vt=Gr(rt[Ve][1]);Q.push(tt,vt,0),Ve>0&&(Ne+=xe?(Le*vt-tt*Te)/2:Math.sqrt(Math.pow(tt-Le,2)+Math.pow(vt-Te,2))),Le=tt,Te=vt}const et=Q.length-3;Q[2]=1,Jt(Q,0,et,le),Q[et+2]=1,Q.size=Math.abs(Ne),Q.start=0,Q.end=Q.size}function Hn(rt,Q,le,xe){for(let Le=0;Le<rt.length;Le++){const Te=[];zn(rt[Le],Te,le,xe),Q.push(Te)}}function yr(rt){return rt/360+.5}function Gr(rt){const Q=Math.sin(rt*Math.PI/180),le=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return le<0?0:le>1?1:le}function Wr(rt,Q,le,xe,Le,Te,Ne,et){if(xe/=Q,Te>=(le/=Q)&&Ne<xe)return rt;if(Ne<le||Te>=xe)return null;const Ve=[];for(const tt of rt){const vt=tt.geometry;let it=tt.type;const Nt=Le===0?tt.minX:tt.minY,dn=Le===0?tt.maxX:tt.maxY;if(Nt>=le&&dn<xe){Ve.push(tt);continue}if(dn<le||Nt>=xe)continue;let fn=[];if(it==="Point"||it==="MultiPoint")_i(vt,fn,le,xe,Le);else if(it==="LineString")so(vt,fn,le,xe,Le,!1,et.lineMetrics);else if(it==="MultiLineString")Ui(vt,fn,le,xe,Le,!1);else if(it==="Polygon")Ui(vt,fn,le,xe,Le,!0);else if(it==="MultiPolygon")for(const Fn of vt){const Nn=[];Ui(Fn,Nn,le,xe,Le,!0),Nn.length&&fn.push(Nn)}if(fn.length){if(et.lineMetrics&&it==="LineString"){for(const Fn of fn)Ve.push(_n(tt.id,it,Fn,tt.tags));continue}it!=="LineString"&&it!=="MultiLineString"||(fn.length===1?(it="LineString",fn=fn[0]):it="MultiLineString"),it!=="Point"&&it!=="MultiPoint"||(it=fn.length===3?"Point":"MultiPoint"),Ve.push(_n(tt.id,it,fn,tt.tags))}}return Ve.length?Ve:null}function _i(rt,Q,le,xe,Le){for(let Te=0;Te<rt.length;Te+=3){const Ne=rt[Te+Le];Ne>=le&&Ne<=xe&&ao(Q,rt[Te],rt[Te+1],rt[Te+2])}}function so(rt,Q,le,xe,Le,Te,Ne){let et=fo(rt);const Ve=Le===0?ws:Ys;let tt,vt,it=rt.start;for(let Nn=0;Nn<rt.length-3;Nn+=3){const qn=rt[Nn],lr=rt[Nn+1],Zn=rt[Nn+2],Yr=rt[Nn+3],mi=rt[Nn+4],gi=Le===0?qn:lr,zr=Le===0?Yr:mi;let Tr=!1;Ne&&(tt=Math.sqrt(Math.pow(qn-Yr,2)+Math.pow(lr-mi,2))),gi<le?zr>le&&(vt=Ve(et,qn,lr,Yr,mi,le),Ne&&(et.start=it+tt*vt)):gi>xe?zr<xe&&(vt=Ve(et,qn,lr,Yr,mi,xe),Ne&&(et.start=it+tt*vt)):ao(et,qn,lr,Zn),zr<le&&gi>=le&&(vt=Ve(et,qn,lr,Yr,mi,le),Tr=!0),zr>xe&&gi<=xe&&(vt=Ve(et,qn,lr,Yr,mi,xe),Tr=!0),!Te&&Tr&&(Ne&&(et.end=it+tt*vt),Q.push(et),et=fo(rt)),Ne&&(it+=tt)}let Nt=rt.length-3;const dn=rt[Nt],fn=rt[Nt+1],Fn=Le===0?dn:fn;Fn>=le&&Fn<=xe&&ao(et,dn,fn,rt[Nt+2]),Nt=et.length-3,Te&&Nt>=3&&(et[Nt]!==et[0]||et[Nt+1]!==et[1])&&ao(et,et[0],et[1],et[2]),et.length&&Q.push(et)}function fo(rt){const Q=[];return Q.size=rt.size,Q.start=rt.start,Q.end=rt.end,Q}function Ui(rt,Q,le,xe,Le,Te){for(const Ne of rt)so(Ne,Q,le,xe,Le,Te,!1)}function ao(rt,Q,le,xe){rt.push(Q,le,xe)}function ws(rt,Q,le,xe,Le,Te){const Ne=(Te-Q)/(xe-Q);return ao(rt,Te,le+(Le-le)*Ne,1),Ne}function Ys(rt,Q,le,xe,Le,Te){const Ne=(Te-le)/(Le-le);return ao(rt,Q+(xe-Q)*Ne,Te,1),Ne}function mo(rt,Q){const le=[];for(let xe=0;xe<rt.length;xe++){const Le=rt[xe],Te=Le.type;let Ne;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")Ne=ko(Le.geometry,Q);else if(Te==="MultiLineString"||Te==="Polygon"){Ne=[];for(const et of Le.geometry)Ne.push(ko(et,Q))}else if(Te==="MultiPolygon"){Ne=[];for(const et of Le.geometry){const Ve=[];for(const tt of et)Ve.push(ko(tt,Q));Ne.push(Ve)}}le.push(_n(Le.id,Te,Ne,Le.tags))}return le}function ko(rt,Q){const le=[];le.size=rt.size,rt.start!==void 0&&(le.start=rt.start,le.end=rt.end);for(let xe=0;xe<rt.length;xe+=3)le.push(rt[xe]+Q,rt[xe+1],rt[xe+2]);return le}function Ma(rt,Q){if(rt.transformed)return rt;const le=1<<rt.z,xe=rt.x,Le=rt.y;for(const Te of rt.features){const Ne=Te.geometry,et=Te.type;if(Te.geometry=[],et===1)for(let Ve=0;Ve<Ne.length;Ve+=2)Te.geometry.push(xi(Ne[Ve],Ne[Ve+1],Q,le,xe,Le));else for(let Ve=0;Ve<Ne.length;Ve++){const tt=[];for(let vt=0;vt<Ne[Ve].length;vt+=2)tt.push(xi(Ne[Ve][vt],Ne[Ve][vt+1],Q,le,xe,Le));Te.geometry.push(tt)}}return rt.transformed=!0,rt}function xi(rt,Q,le,xe,Le,Te){return[Math.round(le*(rt*xe-Le)),Math.round(le*(Q*xe-Te))]}function cl(rt,Q,le,xe,Le){const Te=Q===Le.maxZoom?0:Le.tolerance/((1<<Q)*Le.extent),Ne={features:[],numPoints:0,numSimplified:0,numFeatures:rt.length,source:null,x:le,y:xe,z:Q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const et of rt)Nc(Ne,et,Te,Le);return Ne}function Nc(rt,Q,le,xe){const Le=Q.geometry,Te=Q.type,Ne=[];if(rt.minX=Math.min(rt.minX,Q.minX),rt.minY=Math.min(rt.minY,Q.minY),rt.maxX=Math.max(rt.maxX,Q.maxX),rt.maxY=Math.max(rt.maxY,Q.maxY),Te==="Point"||Te==="MultiPoint")for(let et=0;et<Le.length;et+=3)Ne.push(Le[et],Le[et+1]),rt.numPoints++,rt.numSimplified++;else if(Te==="LineString")ls(Ne,Le,rt,le,!1,!1);else if(Te==="MultiLineString"||Te==="Polygon")for(let et=0;et<Le.length;et++)ls(Ne,Le[et],rt,le,Te==="Polygon",et===0);else if(Te==="MultiPolygon")for(let et=0;et<Le.length;et++){const Ve=Le[et];for(let tt=0;tt<Ve.length;tt++)ls(Ne,Ve[tt],rt,le,!0,tt===0)}if(Ne.length){let et=Q.tags||null;if(Te==="LineString"&&xe.lineMetrics){et={};for(const tt in Q.tags)et[tt]=Q.tags[tt];et.mapbox_clip_start=Le.start/Le.size,et.mapbox_clip_end=Le.end/Le.size}const Ve={geometry:Ne,type:Te==="Polygon"||Te==="MultiPolygon"?3:Te==="LineString"||Te==="MultiLineString"?2:1,tags:et};Q.id!==null&&(Ve.id=Q.id),rt.features.push(Ve)}}function ls(rt,Q,le,xe,Le,Te){const Ne=xe*xe;if(xe>0&&Q.size<(Le?Ne:xe))return void(le.numPoints+=Q.length/3);const et=[];for(let Ve=0;Ve<Q.length;Ve+=3)(xe===0||Q[Ve+2]>Ne)&&(le.numSimplified++,et.push(Q[Ve],Q[Ve+1])),le.numPoints++;Le&&function(Ve,tt){let vt=0;for(let it=0,Nt=Ve.length,dn=Nt-2;it<Nt;dn=it,it+=2)vt+=(Ve[it]-Ve[dn])*(Ve[it+1]+Ve[dn+1]);if(vt>0===tt)for(let it=0,Nt=Ve.length;it<Nt/2;it+=2){const dn=Ve[it],fn=Ve[it+1];Ve[it]=Ve[Nt-2-it],Ve[it+1]=Ve[Nt-1-it],Ve[Nt-2-it]=dn,Ve[Nt-1-it]=fn}}(et,Te),rt.push(et)}const zf={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Dh{constructor(Q,le){const xe=(le=this.options=function(Te,Ne){for(const et in Ne)Te[et]=Ne[et];return Te}(Object.create(zf),le)).debug;if(xe&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");let Le=function(Te,Ne){const et=[];if(Te.type==="FeatureCollection")for(let Ve=0;Ve<Te.features.length;Ve++)gn(et,Te.features[Ve],Ne,Ve);else gn(et,Te.type==="Feature"?Te:{geometry:Te},Ne);return et}(Q,le);this.tiles={},this.tileCoords=[],xe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Le=function(Te,Ne){const et=Ne.buffer/Ne.extent;let Ve=Te;const tt=Wr(Te,1,-1-et,et,0,-1,2,Ne),vt=Wr(Te,1,1-et,2+et,0,-1,2,Ne);return(tt||vt)&&(Ve=Wr(Te,1,-et,1+et,0,-1,2,Ne)||[],tt&&(Ve=mo(tt,1).concat(Ve)),vt&&(Ve=Ve.concat(mo(vt,-1)))),Ve}(Le,le),Le.length&&this.splitTile(Le,0,0,0),xe&&(Le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Q,le,xe,Le,Te,Ne,et){const Ve=[Q,le,xe,Le],tt=this.options,vt=tt.debug;for(;Ve.length;){Le=Ve.pop(),xe=Ve.pop(),le=Ve.pop(),Q=Ve.pop();const it=1<<le,Nt=Yl(le,xe,Le);let dn=this.tiles[Nt];if(!dn&&(vt>1&&console.time("creation"),dn=this.tiles[Nt]=cl(Q,le,xe,Le,tt),this.tileCoords.push({z:le,x:xe,y:Le}),vt)){vt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,xe,Le,dn.numFeatures,dn.numPoints,dn.numSimplified),console.timeEnd("creation"));const Tr=`z${le}`;this.stats[Tr]=(this.stats[Tr]||0)+1,this.total++}if(dn.source=Q,Te==null){if(le===tt.indexMaxZoom||dn.numPoints<=tt.indexMaxPoints)continue}else{if(le===tt.maxZoom||le===Te)continue;if(Te!=null){const Tr=Te-le;if(xe!==Ne>>Tr||Le!==et>>Tr)continue}}if(dn.source=null,Q.length===0)continue;vt>1&&console.time("clipping");const fn=.5*tt.buffer/tt.extent,Fn=.5-fn,Nn=.5+fn,qn=1+fn;let lr=null,Zn=null,Yr=null,mi=null,gi=Wr(Q,it,xe-fn,xe+Nn,0,dn.minX,dn.maxX,tt),zr=Wr(Q,it,xe+Fn,xe+qn,0,dn.minX,dn.maxX,tt);Q=null,gi&&(lr=Wr(gi,it,Le-fn,Le+Nn,1,dn.minY,dn.maxY,tt),Zn=Wr(gi,it,Le+Fn,Le+qn,1,dn.minY,dn.maxY,tt),gi=null),zr&&(Yr=Wr(zr,it,Le-fn,Le+Nn,1,dn.minY,dn.maxY,tt),mi=Wr(zr,it,Le+Fn,Le+qn,1,dn.minY,dn.maxY,tt),zr=null),vt>1&&console.timeEnd("clipping"),Ve.push(lr||[],le+1,2*xe,2*Le),Ve.push(Zn||[],le+1,2*xe,2*Le+1),Ve.push(Yr||[],le+1,2*xe+1,2*Le),Ve.push(mi||[],le+1,2*xe+1,2*Le+1)}}getTile(Q,le,xe){Q=+Q,le=+le,xe=+xe;const Le=this.options,{extent:Te,debug:Ne}=Le;if(Q<0||Q>24)return null;const et=1<<Q,Ve=Yl(Q,le=le+et&et-1,xe);if(this.tiles[Ve])return Ma(this.tiles[Ve],Te);Ne>1&&console.log("drilling down to z%d-%d-%d",Q,le,xe);let tt,vt=Q,it=le,Nt=xe;for(;!tt&&vt>0;)vt--,it>>=1,Nt>>=1,tt=this.tiles[Yl(vt,it,Nt)];return tt&&tt.source?(Ne>1&&(console.log("found parent tile z%d-%d-%d",vt,it,Nt),console.time("drilling down")),this.splitTile(tt.source,vt,it,Nt,Q,le,xe),Ne>1&&console.timeEnd("drilling down"),this.tiles[Ve]?Ma(this.tiles[Ve],Te):null):null}}function Yl(rt,Q,le){return 32*((1<<rt)*le+Q)+rt}function Vt(rt,Q){const le=rt.tileID.canonical;if(!this._geoJSONIndex)return void Q(null,null);const xe=this._geoJSONIndex.getTile(le.z,le.x,le.y);if(!xe)return void Q(null,null);const Le=Ve=>Ve.tags&&"3d_elevation_id"in Ve.tags&&"source"in Ve.tags&&Ve.tags.source==="elevation",Te=xe.features.filter(Ve=>Le(Ve));let Ne;if(Te.length>0){const Ve=xe.features.filter(tt=>!Le(tt));Ne=new he({_geojsonTileLayer:Ve,hd_road_elevation:Te})}else Ne=new _t(xe.features);let et=Un(Ne);et.byteOffset===0&&et.byteLength===et.buffer.byteLength||(et=new Uint8Array(et)),Q(null,{vectorTile:Ne,rawData:et.buffer})}class Da extends fe{constructor(Q,le,xe,Le,Te,Ne,et){super(Q,le,xe,Le,Te,Vt,et),Ne&&(this.loadGeoJSON=Ne),this._dynamicIndex=new Je}loadData(Q,le){const xe=Q&&Q.request,Le=xe&&xe.collectResourceTiming;this.loadGeoJSON(Q,(Te,Ne)=>{if(Te||!Ne)return le(Te);if(typeof Ne!="object")return le(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`));{try{if(Q.filter){const Ve=s.X(Q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ve.result==="error")throw new Error(Ve.value.map(tt=>`${tt.key}: ${tt.message}`).join(", "));Ne.features=Ne.features.filter(tt=>Ve.value.evaluate({zoom:0},tt))}Q.dynamic?(Ne.type==="Feature"&&(Ne={type:"FeatureCollection",features:[Ne]}),Q.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Ne.features,this.loaded),Q.cluster&&(Ne.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=Q.cluster?new ei(function({superclusterOptions:Ve,clusterProperties:tt}){if(!tt||!Ve)return Ve;const vt={},it={},Nt={accumulated:null,zoom:0},dn={properties:null},fn=Object.keys(tt);for(const Fn of fn){const[Nn,qn]=tt[Fn],lr=s.X(qn),Zn=s.X(typeof Nn=="string"?[Nn,["accumulated"],["get",Fn]]:Nn);vt[Fn]=lr.value,it[Fn]=Zn.value}return Ve.map=Fn=>{dn.properties=Fn;const Nn={};for(const qn of fn)Nn[qn]=vt[qn].evaluate(Nt,dn);return Nn},Ve.reduce=(Fn,Nn)=>{dn.properties=Nn;for(const qn of fn)Nt.accumulated=Fn[qn],Fn[qn]=it[qn].evaluate(Nt,dn)},Ve}(Q)).load(Ne.features):Q.dynamic?this._dynamicIndex:function(Ve,tt){return new Dh(Ve,tt)}(Ne,Q.geojsonVtOptions)}catch(Ve){return le(Ve)}const et={};if(Le){const Ve=T(xe);Ve&&(et.resourceTiming={},et.resourceTiming[Q.source]=JSON.parse(JSON.stringify(Ve)))}le(null,et)}})}reloadTile(Q,le){const xe=this.loaded;return xe&&xe[Q.uid]?Q.partial?le(null,void 0):super.reloadTile(Q,le):this.loadTile(Q,le)}loadGeoJSON(Q,le){if(Q.request)s.n(Q.request,le);else{if(typeof Q.data!="string")return le(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`));try{return le(null,JSON.parse(Q.data))}catch{return le(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Q,le){try{le(null,this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId))}catch(xe){le(xe)}}getClusterChildren(Q,le){try{le(null,this._geoJSONIndex.getChildren(Q.clusterId))}catch(xe){le(xe)}}getClusterLeaves(Q,le){try{le(null,this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset))}catch(xe){le(xe)}}}class Bf{constructor(Q,le,xe){this.tileID=new s.aM(Q.tileID.overscaledZ,Q.tileID.wrap,Q.tileID.canonical.z,Q.tileID.canonical.x,Q.tileID.canonical.y),this.tileZoom=Q.tileZoom,this.uid=Q.uid,this.zoom=Q.zoom,this.canonical=Q.tileID.canonical,this.pixelRatio=Q.pixelRatio,this.tileSize=Q.tileSize,this.source=Q.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=Q.projection,this.brightness=le,this.worldview=xe}parse(Q,le,xe,Le){this.status="parsing";const Te=new s.aM(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),Ne=[],et=le.familiesBySource[xe.source],Ve=new s.f0(Te,xe.promoteId);Ve.bucketLayerIDs=[],Ve.is3DTile=!0,s.fi(Q).then(tt=>{if(!tt)return Le(new Error("Could not parse tile"));const vt=tt.json.extensionsUsed&&tt.json.extensionsUsed.includes("MAPBOX_mesh_features")||tt.json.asset.extras&&tt.json.asset.extras.MAPBOX_mesh_features,it=tt.json.extensionsUsed&&tt.json.extensionsUsed.includes("EXT_meshopt_compression"),Nt=new s.aa(this.zoom,{brightness:this.brightness,worldview:this.worldview});for(const dn in et)for(const fn of et[dn]){const Fn=fn[0];Ve.bucketLayerIDs.push(fn.map(lr=>s.C(lr.id,lr.scope))),Fn.recalculate(Nt,[]);const Nn=s.fj(tt,1/s.cU(xe.tileID.canonical)),qn=new s.fk(fn,Nn,Te,vt,it,this.brightness,Ve,this.worldview);vt||(qn.needsUpload=!0),Ne.push(qn),qn.evaluate(Fn)}this.status="done",Le(null,{buckets:Ne,featureIndex:Ve,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(tt=>Le(new Error(tt.message)))}}class nd{constructor(Q,le,xe,Le,Te,Ne,et,Ve){this.actor=Q,this.layerIndex=le,this.availableImages=xe,this.availableModels=Le,this.brightness=et,this.loading={},this.loaded={},this.worldview=Ve}loadTile(Q,le){const xe=Q.uid,Le=this.loading[xe]=new Bf(Q,this.brightness,this.worldview);s.br(Q.request,(Te,Ne)=>{const et=!this.loading[xe];return delete this.loading[xe],et||Te?(Le.status="done",et||(this.loaded[xe]=Le),le(Te)):Ne&&Ne.byteLength!==0?void Le.parse(Ne,this.layerIndex,Q,(Ve,tt)=>{Le.status="done",this.loaded=this.loaded||{},this.loaded[xe]=Le,Ve||!tt?le(Ve):le(null,tt)}):(Le.status="done",this.loaded[xe]=Le,le())})}reloadTile(Q,le){const xe=this.loaded,Le=Q.uid;if(xe&&xe[Le]){const Te=xe[Le];Te.projection=Q.projection,Te.brightness=Q.brightness;const Ne=(et,Ve)=>{Te.reloadCallback&&(delete Te.reloadCallback,this.loadTile(Q,le)),le(et,Ve)};Te.status==="parsing"?Te.reloadCallback=Ne:Te.status==="done"&&this.loadTile(Q,le)}}abortTile(Q,le){const xe=Q.uid;this.loading[xe]&&delete this.loading[xe],le()}removeTile(Q,le){const xe=this.loaded,Le=Q.uid;xe&&xe[Le]&&delete xe[Le],le()}}class Cr{constructor(Q){this.self=Q,this.actor=new s.fm(Q,this),this.layerIndexes={},this.availableImages={},this.availableModels={},this.isSpriteLoaded={},this.imageRasterizer=new s.y,this.rtlPluginParsingListeners=[],this.projections={},this.defaultProjection=s.ce({name:"mercator"}),this.workerSourceTypes={vector:fe,geojson:Da,"raster-dem":me,"raster-array":te,"batched-model":nd},this.workerSources={},this.self.registerWorkerSource=(le,xe)=>{if(this.workerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.workerSourceTypes[le]=xe},this.self.registerRTLTextPlugin=le=>{if(s.fn.isParsed())throw new Error("RTL text plugin already registered.");s.fn.setState({pluginStatus:s.fo.parsed,pluginURL:s.fn.getPluginURL()}),s.fn.applyArabicShaping=le.applyArabicShaping,s.fn.processBidirectionalText=le.processBidirectionalText,s.fn.processStyledBidirectionalText=le.processStyledBidirectionalText;for(const xe of this.rtlPluginParsingListeners)xe(null,!0);this.rtlPluginParsingListeners=[]}}clearCaches(Q,le,xe){delete this.layerIndexes[Q],delete this.availableImages[Q],delete this.availableModels[Q],delete this.workerSources[Q],xe()}checkIfReady(Q,le,xe){xe()}setReferrer(Q,le){this.referrer=le}spriteLoaded(Q,le){this.isSpriteLoaded[Q]||(this.isSpriteLoaded[Q]={});const{scope:xe,isLoaded:Le}=le;if(this.isSpriteLoaded[Q][xe]=Le,this.workerSources[Q]&&this.workerSources[Q][xe])for(const Te in this.workerSources[Q][xe]){const Ne=this.workerSources[Q][xe][Te];for(const et in Ne){const Ve=Ne[et];Ve instanceof fe&&(Ve.isSpriteLoaded=Le,Ve.fire(new s.A("isSpriteLoaded")))}}}setImages(Q,le,xe){this.availableImages[Q]||(this.availableImages[Q]={});const{scope:Le,images:Te}=le;if(this.availableImages[Q][Le]=Te,this.workerSources[Q]&&this.workerSources[Q][Le]){for(const Ne in this.workerSources[Q][Le]){const et=this.workerSources[Q][Le][Ne];for(const Ve in et)et[Ve].availableImages=Te}xe()}else xe()}setModels(Q,{scope:le,models:xe},Le){if(this.availableModels[Q]||(this.availableModels[Q]={}),this.availableModels[Q][le]=xe,this.workerSources[Q]&&this.workerSources[Q][le]){for(const Te in this.workerSources[Q][le]){const Ne=this.workerSources[Q][le][Te];for(const et in Ne)Ne[et].availableModels=xe}Le()}else Le()}setProjection(Q,le){this.projections[Q]=s.ce(le)}setBrightness(Q,le,xe){this.brightness=le,xe()}setWorldview(Q,le,xe){this.worldview=le,xe()}setLayers(Q,le,xe){this.getLayerIndex(Q,le.scope).replace(le.layers,le.options),xe()}updateLayers(Q,le,xe){this.getLayerIndex(Q,le.scope).update(le.layers,le.removedIds,le.options),xe()}loadTile(Q,le,xe){le.projection=this.projections[Q]||this.defaultProjection,this.getWorkerSource(Q,le.type,le.source,le.scope).loadTile(le,xe)}decodeRasterArray(Q,le,xe){this.getWorkerSource(Q,le.type,le.source,le.scope).decodeRasterArray(le,xe)}reloadTile(Q,le,xe){le.projection=this.projections[Q]||this.defaultProjection,this.getWorkerSource(Q,le.type,le.source,le.scope).reloadTile(le,xe)}abortTile(Q,le,xe){this.getWorkerSource(Q,le.type,le.source,le.scope).abortTile(le,xe)}removeTile(Q,le,xe){this.getWorkerSource(Q,le.type,le.source,le.scope).removeTile(le,xe)}removeSource(Q,le,xe){if(!(this.workerSources[Q]&&this.workerSources[Q][le.scope]&&this.workerSources[Q][le.scope][le.type]&&this.workerSources[Q][le.scope][le.type][le.source]))return;const Le=this.workerSources[Q][le.scope][le.type][le.source];delete this.workerSources[Q][le.scope][le.type][le.source],Le.removeSource!==void 0?Le.removeSource(le,xe):xe()}loadWorkerSource(Q,le,xe){try{this.self.importScripts(le.url),xe()}catch(Le){xe(Le.toString())}}syncRTLPluginState(Q,le,xe){if(s.fn.isParsed())xe(null,!0);else if(s.fn.isParsing())this.rtlPluginParsingListeners.push(xe);else try{s.fn.setState(le);const Le=s.fn.getPluginURL();!s.fn.isLoaded()||s.fn.isParsed()||s.fn.isParsing()||Le==null||(s.fn.setState({pluginStatus:s.fo.parsing,pluginURL:s.fn.getPluginURL()}),this.self.importScripts(Le),s.fn.isParsed()?xe(null,!0):this.rtlPluginParsingListeners.push(xe))}catch(Le){xe(Le.toString())}}setDracoUrl(Q,le){this.dracoUrl=le}getAvailableImages(Q,le){this.availableImages[Q]||(this.availableImages[Q]={});let xe=this.availableImages[Q][le];return xe||(xe=[]),xe}getAvailableModels(Q,le){this.availableModels[Q]||(this.availableModels[Q]={});let xe=this.availableModels[Q][le];return xe||(xe={}),xe}getLayerIndex(Q,le){this.layerIndexes[Q]||(this.layerIndexes[Q]={});let xe=this.layerIndexes[Q][le];return xe||(xe=this.layerIndexes[Q][le]=new z,xe.scope=le),xe}getWorkerSource(Q,le,xe,Le){const Te=this.workerSources;return Te[Q]||(Te[Q]={}),Te[Q][Le]||(Te[Q][Le]={}),Te[Q][Le][le]||(Te[Q][Le][le]={}),this.isSpriteLoaded[Q]||(this.isSpriteLoaded[Q]={}),Te[Q][Le][le][xe]||(Te[Q][Le][le][xe]=new this.workerSourceTypes[le]({send:(Ne,et,Ve,tt,vt,it)=>this.actor.send(Ne,et,Ve,Q,vt,it),scheduler:this.actor.scheduler},this.getLayerIndex(Q,Le),this.getAvailableImages(Q,Le),this.getAvailableModels(Q,Le),this.isSpriteLoaded[Q][Le],void 0,this.brightness,this.worldview)),Te[Q][Le][le][xe]}rasterizeImagesWorker(Q,le,xe){const Le=new Map;for(const[Te,{image:Ne,imageVariant:et}]of le.tasks.entries()){const Ve=this.imageRasterizer.rasterize(et,Ne,le.scope,Q);Le.set(Te,Ve)}xe(void 0,Le)}removeRasterizedImages(Q,le,xe){this.imageRasterizer.removeImagesFromCacheByIds(le.imageIds,le.scope,Q),xe()}enforceCacheSizeLimit(Q,le){s.fp(le)}getWorkerPerformanceMetrics(Q,le,xe){xe(void 0,void 0)}}return s.fl(self)&&(self.worker=new Cr(self)),Cr}),d(["./shared"],function(s){var T="3.13.0";const E={create:"create",load:"load",fullLoad:"fullLoad"},A={mark(p){performance.mark(p)},measure(p,i,c){performance.measure(p,i,c)}};function z(p){const i=p.name.split("?")[0];return s.a(i)&&i.includes("mapbox-gl.js")?"javascript":s.a(i)&&i.includes("mapbox-gl.css")?"css":s.b(i)?"fontRange":s.c(i)?"sprite":s.i(i)?"style":s.d(i)?"tilejson":"other"}var j,U={},K=function(){if(j)return U;function p(f){return!i(f)}function i(f){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,w,k=new Blob([""],{type:"text/javascript"}),I=URL.createObjectURL(k);try{w=new Worker(I),b=!0}catch{b=!1}return w&&w.terminate(),URL.revokeObjectURL(I),b}()?function(){var b=document.createElement("canvas");b.width=b.height=1;var w=b.getContext("2d");if(!w)return!1;var k=w.getImageData(0,0,1,1);return k&&k.width===b.width}()?(c[v=f&&f.failIfMajorPerformanceCaveat]===void 0&&(c[v]=function(b){var w,k=function(I){var L=document.createElement("canvas"),O=Object.create(p.webGLContextAttributes);return O.failIfMajorPerformanceCaveat=I,L.getContext("webgl2",O)}(b);if(!k)return!1;try{w=k.createShader(k.VERTEX_SHADER)}catch{return!1}return!(!w||k.isContextLost())&&(k.shaderSource(w,"void main() {}"),k.compileShader(w),k.getShaderParameter(w,k.COMPILE_STATUS)===!0)}(v)),c[v]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var v}j=1,U.supported=p,U.notSupportedReason=i;var c={};return p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},U}();function oe(p,i,c){const f=document.createElement(p);return i!=null&&(f.className=i),c&&c.appendChild(f),f}function fe(p,i,c){const f=document.createElementNS("http://www.w3.org/2000/svg",p);for(const v of Object.keys(i))f.setAttributeNS(null,v,String(i[v]));return c&&c.appendChild(f),f}const me=typeof document<"u"?document.documentElement&&document.documentElement.style:null,ne=me&&me.userSelect!==void 0?"userSelect":"WebkitUserSelect";let te;function re(){me&&ne&&(te=me[ne],me[ne]="none")}function ze(){me&&ne&&(me[ne]=te)}function _t(p){p.preventDefault(),p.stopPropagation(),window.removeEventListener("click",_t,!0)}function Me(){window.addEventListener("click",_t,!0),window.setTimeout(()=>{window.removeEventListener("click",_t,!0)},0)}function he(p,i){const c=p.getBoundingClientRect();return Je(p,c,i)}function Ce(p,i){const c=p.getBoundingClientRect(),f=[];for(let v=0;v<i.length;v++)f.push(Je(p,c,i[v]));return f}function $e(p){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&p.button===2&&p.ctrlKey?0:p.button}function Je(p,i,c){const f=p.offsetWidth===i.width?1:p.offsetWidth/i.width;return new s.P((c.clientX-i.left)*f,(c.clientY-i.top)*f)}const ft="01",ut="NO_ACCESS_TOKEN";class Qe{constructor(i,c,f){this._transformRequestFn=i,this._customAccessToken=c,this._silenceAuthErrors=!!f,this._createSkuToken()}_createSkuToken(){const i=function(){let c="";for(let f=0;f<10;f++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ft,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeStyleURL(i,c){if(!s.j(i))return i;const f=kt(i);return f.params.push(`sdk=js-${T}`),f.path=`/styles/v1${f.path}`,this._makeAPIURL(f,this._customAccessToken||c)}normalizeGlyphsURL(i,c){if(!s.j(i))return i;const f=kt(i);return f.path=`/fonts/v1${f.path}`,this._makeAPIURL(f,this._customAccessToken||c)}normalizeModelURL(i,c){if(!s.j(i))return i;const f=kt(i);return f.path=`/models/v1${f.path}`,this._makeAPIURL(f,this._customAccessToken||c)}normalizeSourceURL(i,c,f,v){if(!s.j(i))return i;const b=kt(i);return b.path=`/v4/${b.authority}.json`,b.params.push("secure"),f&&b.params.push(`language=${f}`),v&&b.params.push(`worldview=${v}`),this._makeAPIURL(b,this._customAccessToken||c)}normalizeIconsetURL(i,c){const f=kt(i);return s.j(i)?(f.path=`/styles/v1${f.path}/iconset.pbf`,this._makeAPIURL(f,this._customAccessToken||c)):wt(f)}normalizeSpriteURL(i,c,f,v){const b=kt(i);return s.j(i)?(b.path=`/styles/v1${b.path}/sprite${c}${f}`,this._makeAPIURL(b,this._customAccessToken||v)):(b.path+=`${c}${f}`,wt(b))}normalizeTileURL(i,c,f){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!s.j(i))return i;const v=kt(i);v.path=v.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${c||f&&v.authority!=="raster"&&f===512?"@2x":""}${s.l.supported?".webp":"$1"}`),v.authority==="raster"?v.path=`/${s.e.RASTER_URL_PREFIX}${v.path}`:v.authority==="rasterarrays"?v.path=`/${s.e.RASTERARRAYS_URL_PREFIX}${v.path}`:v.authority==="3dtiles"?v.path=`/${s.e.TILES3D_URL_PREFIX}${v.path}`:(v.path=v.path.replace(/^.+\/v4\//,"/"),v.path=`/${s.e.TILE_URL_VERSION}${v.path}`);const b=this._customAccessToken||function(w){for(const k of w){const I=k.match(/^access_token=(.*)$/);if(I)return I[1]}return null}(v.params)||s.e.ACCESS_TOKEN;return s.e.REQUIRE_ACCESS_TOKEN&&b&&this._skuToken&&v.params.push(`sku=${this._skuToken}`),this._makeAPIURL(v,b)}canonicalizeTileURL(i,c){const f=kt(i);if(!f.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!f.path.match(/\.[\w]+$/))return i;let v="mapbox://";f.path.match(/^\/raster\/v1\//)?v+=`raster/${f.path.replace(`/${s.e.RASTER_URL_PREFIX}/`,"")}`:f.path.match(/^\/rasterarrays\/v1\//)?v+=`rasterarrays/${f.path.replace(`/${s.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:v+=`tiles/${f.path.replace(`/${s.e.TILE_URL_VERSION}/`,"")}`;let b=f.params;return c&&(b=b.filter(w=>!w.match(/^access_token=/))),b.length&&(v+=`?${b.join("&")}`),v}canonicalizeTileset(i,c){const f=!!c&&s.j(c),v=[];for(const b of i.tiles||[])s.k(b)?v.push(this.canonicalizeTileURL(b,f)):v.push(b);return v}_makeAPIURL(i,c){const f="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",v=kt(s.e.API_URL);if(i.protocol=v.protocol,i.authority=v.authority,i.protocol==="http"){const b=i.params.indexOf("secure");b>=0&&i.params.splice(b,1)}if(v.path!=="/"&&(i.path=`${v.path}${i.path}`),!s.e.REQUIRE_ACCESS_TOKEN)return wt(i);if(c=c||s.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!c)throw new Error(`An API access token is required to use Mapbox GL. ${f}`);if(c[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${f}`)}return i.params=i.params.filter(b=>b.indexOf("access_token")===-1),i.params.push(`access_token=${c||""}`),wt(i)}}const Qt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function kt(p){const i=p.match(Qt);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function wt(p){const i=p.params.length?`?${p.params.join("&")}`:"";return`${p.protocol}://${p.authority}${p.path}${i}`}const Et="mapbox.eventData";function on(p){if(!p)return null;const i=p.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(s.m(i[1]))}catch{return null}}class In{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const c=on(s.e.ACCESS_TOKEN);let f="";return f=c&&c.u?s.f(c.u):s.e.ACCESS_TOKEN||"",i?`${Et}.${i}:${f}`:`${Et}:${f}`}fetchEventData(){const i=s.s("localStorage"),c=this.getStorageKey(),f=this.getStorageKey("uuid");if(i)try{const v=localStorage.getItem(c);v&&(this.eventData=JSON.parse(v));const b=localStorage.getItem(f);b&&(this.anonId=b)}catch{s.w("Unable to read from LocalStorage")}}saveEventData(){const i=s.s("localStorage"),c=this.getStorageKey(),f=this.getStorageKey("uuid"),v=this.anonId;if(i&&v)try{localStorage.setItem(f,v),Object.keys(this.eventData).length>=1&&localStorage.setItem(c,JSON.stringify(this.eventData))}catch{s.w("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,c,f,v){if(!s.e.EVENTS_URL)return;const b=kt(s.e.EVENTS_URL);b.params.push(`access_token=${v||s.e.ACCESS_TOKEN||""}`);const w={event:this.type,created:new Date(i).toISOString()},k=c?s.h(w,c):w,I={url:wt(b),headers:{"Content-Type":"text/plain"},body:JSON.stringify([k])};this.pendingRequest=s.p(I,L=>{this.pendingRequest=null,f(L),this.saveEventData(),this.processRequests(v)})}queueRequest(i,c){this.queue.push(i),this.processRequests(c)}}const ir=new class extends In{constructor(p){super("appUserTurnstile"),this._customAccessToken=p}postTurnstileEvent(p,i){s.e.EVENTS_URL&&s.e.ACCESS_TOKEN&&Array.isArray(p)&&p.some(c=>s.j(c)||s.k(c))&&this.queueRequest(Date.now(),i)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=on(s.e.ACCESS_TOKEN),c=i?i.u:s.e.ACCESS_TOKEN;let f=c!==this.eventData.tokenU;s.v(this.anonId)||(this.anonId=s.u(),f=!0);const v=this.queue.shift();if(this.eventData.lastSuccess){const b=new Date(this.eventData.lastSuccess),w=new Date(v),k=(v-this.eventData.lastSuccess)/864e5;f=f||k>=1||k<-1||b.getDate()!==w.getDate()}else f=!0;f?this.postEvent(v,{sdkIdentifier:"mapbox-gl-js",sdkVersion:T,skuId:ft,"enabled.telemetry":!1,userId:this.anonId},b=>{b||(this.eventData.lastSuccess=v,this.eventData.tokenU=c)},p):this.processRequests()}},Or=ir.postTurnstileEvent.bind(ir),oo=new class extends In{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(p,i,c,f){this.skuToken=i,this.errorCb=f,s.e.EVENTS_URL&&(c||s.e.ACCESS_TOKEN?this.queueRequest({id:p,timestamp:Date.now()},c):this.errorCb(new Error(ut)))}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:c}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),s.v(this.anonId)||(this.anonId=s.u()),this.postEvent(c,{sdkIdentifier:"mapbox-gl-js",sdkVersion:T,skuId:ft,skuToken:this.skuToken,userId:this.anonId},f=>{f?this.errorCb(f):i&&(this.success[i]=!0)},p))}remove(){this.errorCb=null}},Un=oo.postMapLoadEvent.bind(oo),pn=new class extends In{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(p){let i=this.mapInstanceIdMap.get(p);return i||(i=s.u(),this.mapInstanceIdMap.set(p,i)),i}getEventId(p){const i=this.eventIdPerMapInstanceMap.get(p)||0;return this.eventIdPerMapInstanceMap.set(p,i+1),i}postStyleLoadEvent(p,i){const{map:c,style:f,importedStyles:v}=i;if(!s.e.EVENTS_URL||!p&&!s.e.ACCESS_TOKEN)return;const b=this.getMapInstanceId(c),w={mapInstanceId:b,eventId:this.getEventId(b),style:f};v.length&&(w.importedStyles=v),this.queueRequest({timestamp:Date.now(),payload:w},p)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,payload:c}=this.queue.shift();this.postEvent(i,c,()=>{},p)}},kn=pn.postStyleLoadEvent.bind(pn),$t=new class extends In{constructor(){super("gljs.performance")}postPerformanceEvent(p,i){s.e.EVENTS_URL&&(p||s.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},p)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:c}=this.queue.shift(),f=function(v){const b=performance.getEntriesByType("resource"),w=performance.getEntriesByType("mark"),k=function(V){const Z={};if(V){for(const G in V)if(G!=="other")for(const Y of V[G]){const ee=`${G}ResolveRangeMin`,ae=`${G}ResolveRangeMax`,ve=`${G}RequestCount`,we=`${G}RequestCachedCount`;Z[ee]=Math.min(Z[ee]||1/0,Y.startTime),Z[ae]=Math.max(Z[ae]||-1/0,Y.responseEnd);const Pe=Ee=>{Z[Ee]===void 0&&(Z[Ee]=0),++Z[Ee]};Y.transferSize!==void 0&&Y.transferSize===0&&Pe(we),Pe(ve)}}return Z}(function(V,Z){const G={};if(V)for(const Y of V){const ee=Z(Y);G[ee]===void 0&&(G[ee]=[]),G[ee].push(Y)}return G}(b,z)),I=window.devicePixelRatio,L=navigator.connection||navigator.mozConnection||navigator.webkitConnection,O=L?L.effectiveType:void 0,N={counters:[],metadata:[],attributes:[]},F=(V,Z,G)=>{G!=null&&V.push({name:Z,value:G.toString()})};for(const V in k)F(N.counters,V,k[V]);if(v.interactionRange[0]!==1/0&&v.interactionRange[1]!==-1/0&&(F(N.counters,"interactionRangeMin",v.interactionRange[0]),F(N.counters,"interactionRangeMax",v.interactionRange[1])),w)for(const V of Object.keys(E)){const Z=E[V],G=w.find(Y=>Y.name===Z);G&&F(N.counters,Z,G.startTime)}return F(N.counters,"visibilityHidden",v.visibilityHidden),F(N.attributes,"style",function(V){if(V)for(const Z of V){const G=Z.name.split("?")[0];if(s.i(G)){const Y=G.split("/").slice(-2);if(Y.length===2)return`mapbox://styles/${Y[0]}/${Y[1]}`}}}(b)),F(N.attributes,"terrainEnabled",v.terrainEnabled?"true":"false"),F(N.attributes,"fogEnabled",v.fogEnabled?"true":"false"),F(N.attributes,"projection",v.projection),F(N.attributes,"zoom",v.zoom),F(N.metadata,"devicePixelRatio",I),F(N.metadata,"connectionEffectiveType",O),F(N.metadata,"navigatorUserAgent",navigator.userAgent),F(N.metadata,"screenWidth",window.screen.width),F(N.metadata,"screenHeight",window.screen.height),F(N.metadata,"windowWidth",window.innerWidth),F(N.metadata,"windowHeight",window.innerHeight),F(N.metadata,"mapWidth",v.width/I),F(N.metadata,"mapHeight",v.height/I),F(N.metadata,"webglRenderer",v.renderer),F(N.metadata,"webglVendor",v.vendor),F(N.metadata,"sdkVersion",T),F(N.metadata,"sdkIdentifier","mapbox-gl-js"),N}(c);for(const v of f.metadata);for(const v of f.counters);for(const v of f.attributes);this.postEvent(i,f,()=>{},p)}},Ln=$t.postPerformanceEvent.bind($t),cn=new class extends In{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(p,i,c,f){if(!s.e.API_URL||!s.e.SESSION_PATH)return;const v=kt(s.e.API_URL+s.e.SESSION_PATH);v.params.push(`sku=${i||""}`),v.params.push(`access_token=${f||s.e.ACCESS_TOKEN||""}`);const b={url:wt(v),headers:{"Content-Type":"text/plain"}};this.pendingRequest=s.g(b,w=>{this.pendingRequest=null,c(w),this.saveEventData(),this.processRequests(f)})}getSessionAPI(p,i,c,f){this.skuToken=i,this.errorCb=f,s.e.SESSION_PATH&&s.e.API_URL&&(c||s.e.ACCESS_TOKEN?this.queueRequest({id:p,timestamp:Date.now()},c):this.errorCb(new Error(ut)))}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:c}=this.queue.shift();i&&this.success[i]||this.getSession(c,this.skuToken,f=>{f?this.errorCb(f):i&&(this.success[i]=!0)},p)}remove(){this.errorCb=null}},Yn=cn.getSessionAPI.bind(cn),ei=new Set;function He(p,i){i?ei.add(p):ei.delete(p)}class qe{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages={}}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(i,c){this._updatedSourceCaches[i]=c,this.setDirty()}discardSourceCacheUpdate(i){delete this._updatedSourceCaches[i]}updateLayer(i){const c=i.scope;this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._updatedLayers[c].add(i.id),this.setDirty()}removeLayer(i){const c=i.scope;this._removedLayers[c]=this._removedLayers[c]||{},this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._removedLayers[c][i.id]=i,this._updatedLayers[c].delete(i.id),this._updatedPaintProps.delete(i.fqid),this.setDirty()}getRemovedLayer(i){return this._removedLayers[i.scope]?this._removedLayers[i.scope][i.id]:null}discardLayerRemoval(i){this._removedLayers[i.scope]&&delete this._removedLayers[i.scope][i.id]}getLayerUpdatesByScope(){const i={};for(const c in this._updatedLayers)i[c]=i[c]||{},i[c].updatedIds=Array.from(this._updatedLayers[c].values());for(const c in this._removedLayers)i[c]=i[c]||{},i[c].removedIds=Object.keys(this._removedLayers[c]);return i}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(i){this._updatedPaintProps.add(i.fqid),this.setDirty()}getUpdatedImages(i){return this._updatedImages[i]?Array.from(this._updatedImages[i].values()):[]}updateImage(i,c){this._updatedImages[c]=this._updatedImages[c]||new Set,this._updatedImages[c].add(s.I.toString(i)),this.setDirty()}resetUpdatedImages(i){this._updatedImages[i]&&this._updatedImages[i].clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages={}}}function xt(p){const{userImage:i}=p;return!!(i&&i.render&&i.render())&&(p.data.replace(new Uint8Array(i.data.buffer)),!0)}class Xt extends s.E{constructor(i){super(),this.imageProviders=new Map,this.images=new Map,this.updatedImages=new Map,this.callbackDispatchedThisFrame=new Map,this.loaded=new Map,this.requestors=[],this.patterns=new Map,this.patternsInFlight=new Set,this.atlasImage=new Map,this.atlasTexture=new Map,this.dirty=!0,this.spriteFormat=i,i!=="raster"&&s.t()&&(this.imageRasterizerDispatcher=new s.D(s.x(),this,"Image Rasterizer Worker",1))}addScope(i){this.loaded.set(i,!1),this.imageProviders.set(i,new Map),this.images.set(i,new Map),this.updatedImages.set(i,new Set),this.callbackDispatchedThisFrame.set(i,new Set),this.patterns.set(i,new Map),this.atlasImage.set(i,new s.r({width:1,height:1}))}removeScope(i){this.loaded.delete(i),this.imageProviders.delete(i),this.images.delete(i),this.updatedImages.delete(i),this.callbackDispatchedThisFrame.delete(i),this.patterns.delete(i),this.atlasImage.delete(i);const c=this.atlasTexture.get(i);c&&(c.destroy(),this.atlasTexture.delete(i))}addImageProvider(i,c){this.imageProviders.has(c)||this.imageProviders.set(c,new Map),this.imageProviders.get(c).set(i.id,i)}removeImageProvider(i,c){this.imageProviders.has(c)&&this.imageProviders.get(c).delete(i)}getPendingImageProviders(){const i=[];for(const c of this.imageProviders.values())for(const f of c.values())f.hasPendingRequests()&&i.push(f);return i}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new s.y),this._imageRasterizer}isLoaded(){for(const i of this.loaded.keys())if(!this.loaded.get(i))return!1;return!0}setLoaded(i,c){if(this.loaded.get(c)!==i&&(this.loaded.set(c,i),i)){for(const{ids:f,callback:v}of this.requestors)this._notify(f,c,v);this.requestors=[]}}hasImage(i,c){return!!this.getImage(i,c)}getImage(i,c){return this.images.get(c).get(i.toString())}addImage(i,c,f){this._validate(i,f)&&this.images.get(c).set(i.toString(),f)}_validate(i,c){let f=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new s.z(new Error(`Image "${i.name}" has invalid "stretchX" value`))),f=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new s.z(new Error(`Image "${i.name}" has invalid "stretchY" value`))),f=!1),this._validateContent(c.content,c)||(this.fire(new s.z(new Error(`Image "${i.name}" has invalid "content" value`))),f=!1),f}_validateStretch(i,c){if(!i)return!0;let f=0;for(const v of i){if(v[0]<f||v[1]<v[0]||c<v[1])return!1;f=v[1]}return!0}_validateContent(i,c){return i?i.length!==4||!c.usvg&&(i[0]<0||c.data.width<i[0]||i[1]<0||c.data.height<i[1]||i[2]<0||c.data.width<i[2]||i[3]<0||c.data.height<i[3])?!1:!(i[2]<i[0]||i[3]<i[1]):!0}updateImage(i,c,f){const v=this.images.get(c).get(i.toString());f.version=v.version+1,this.images.get(c).set(i.toString(),f),this.updatedImages.get(c).add(i),this.removeFromImageRasterizerCache(i,c)}clearUpdatedImages(i){this.updatedImages.get(i).clear()}removeFromImageRasterizerCache(i,c){this.spriteFormat!=="raster"&&(s.t()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[i],scope:c}):this.imageRasterizer.removeImagesFromCacheByIds([i],c))}removeImage(i,c){const f=this.images.get(c),v=f.get(i.toString());f.delete(i.toString()),this.patterns.get(c).delete(i.toString()),this.removeFromImageRasterizerCache(i,c),v.userImage&&v.userImage.onRemove&&v.userImage.onRemove()}listImages(i){return Array.from(this.images.get(i).keys()).map(c=>s.I.from(c))}getImages(i,c,f){const v=[],b=[],w=this.imageProviders.get(c);for(const O of i){if(!O.iconsetId){v.push(O);continue}const N=w.get(O.iconsetId);N&&(this.getImage(O,c)?b.push(O):N.addPendingRequest(O))}if(v.length===0)return void this._notify(b,c,f);let k=!0;const I=!!this.loaded.get(c),L=this.images.get(c);if(!I)for(const O of v)L.has(O.toString())||(k=!1);I||k?this._notify(v,c,f):this.requestors.push({ids:v,scope:c,callback:f})}rasterizeImages(i,c){const f=new Map,{tasks:v,scope:b}=i;for(const[w,k]of v.entries()){const I=this.getImage(k.id,b);I&&f.set(w,{image:I,imageVariant:k})}this._rasterizeImages(b,f,c)}_rasterizeImages(i,c,f){if(s.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImagesWorker",{tasks:c,scope:i},f);else{const v=new Map;for(const[b,{image:w,imageVariant:k}]of c.entries())v.set(b,this.imageRasterizer.rasterize(k,w,i,0));f(void 0,v)}}getUpdatedImages(i){return this.updatedImages.get(i)||new Set}_notify(i,c,f){const v=this.images.get(c),b=new Map;for(const w of i){if(!v.get(w.toString())){if(w.iconsetId)continue;this.fire(new s.A("styleimagemissing",{id:w.name}))}const k=v.get(w.toString());if(!k){s.w(`Image "${w.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`);continue}const I={data:k.usvg?null:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,usvg:k.usvg,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,hasRenderCallback:!!(k.userImage&&k.userImage.render)};k.usvg&&Object.assign(I,{width:k.icon.usvg_tree.width,height:k.icon.usvg_tree.height}),b.set(s.I.toString(w),I)}f(null,b)}getPixelSize(i){const{width:c,height:f}=this.atlasImage.get(i);return{width:c,height:f}}getPattern(i,c,f){const v=i.toString(),b=this.patterns.get(c),w=b.get(v),k=this.getImage(i,c);if(!k)return null;if(w){if(w.position.version===k.version)return w.position;w.position.version=k.version}else{if(k.usvg&&!k.data){const I=this.getPatternInFlightId(v,c);if(this.patternsInFlight.has(I))return null;this.patternsInFlight.add(I);const L=new s.B(i).scaleSelf(s.q.devicePixelRatio),O=new Map([[L.toString(),{image:k,imageVariant:L}]]);return this._rasterizeImages(c,O,(N,F)=>this.storePatternImage(L,c,k,f,F)),null}this.storePattern(i,c,k)}return this._updatePatternAtlas(c,f),b.get(v).position}getPatternInFlightId(i,c){return s.C(i,c)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(i,c,f,v,b){const w=i.toString(),k=b?b.get(w):void 0;k&&(f.data=k,this.storePattern(i.id,c,f),this._updatePatternAtlas(c,v),this.patternsInFlight.delete(this.getPatternInFlightId(i.id.toString(),c)))}storePattern(i,c,f){const v={w:f.data.width+2*s.F,h:f.data.height+2*s.F,x:0,y:0},b=new s.G(v,f,s.F);this.patterns.get(c).set(i.toString(),{bin:v,position:b})}bind(i,c){const f=i.gl;let v=this.atlasTexture.get(c);v?this.dirty&&(v.update(this.atlasImage.get(c)),this.dirty=!1):(v=new s.T(i,this.atlasImage.get(c),f.RGBA8),this.atlasTexture.set(c,v)),v.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(i,c){const f=this.patterns.get(i),v=Array.from(f.values()).map(({bin:L})=>L),{w:b,h:w}=s.H(v),k=this.atlasImage.get(i);k.resize({width:b||1,height:w||1});const I=this.images.get(i);for(const[L,{bin:O,position:N}]of f.entries()){let F=N.padding;const V=O.x+F,Z=O.y+F,G=I.get(L).data,Y=G.width,ee=G.height;F=F>1?F-1:F,s.r.copy(G,k,{x:0,y:0},{x:V,y:Z},{width:Y,height:ee},c),s.r.copy(G,k,{x:0,y:ee-F},{x:V,y:Z-F},{width:Y,height:F},c),s.r.copy(G,k,{x:0,y:0},{x:V,y:Z+ee},{width:Y,height:F},c),s.r.copy(G,k,{x:Y-F,y:0},{x:V-F,y:Z},{width:F,height:ee},c),s.r.copy(G,k,{x:0,y:0},{x:V+Y,y:Z},{width:F,height:ee},c),s.r.copy(G,k,{x:Y-F,y:ee-F},{x:V-F,y:Z-F},{width:F,height:F},c),s.r.copy(G,k,{x:0,y:ee-F},{x:V+Y,y:Z-F},{width:F,height:F},c),s.r.copy(G,k,{x:0,y:0},{x:V+Y,y:Z+ee},{width:F,height:F},c),s.r.copy(G,k,{x:Y-F,y:0},{x:V-F,y:Z+ee},{width:F,height:F},c)}this.dirty=!0}beginFrame(){for(const i of this.images.keys())this.callbackDispatchedThisFrame.set(i,new Set)}dispatchRenderCallbacks(i,c){const f=this.images.get(c);for(const v of i){if(this.callbackDispatchedThisFrame.get(c).has(v.toString()))continue;this.callbackDispatchedThisFrame.get(c).add(v.toString());const b=f.get(v.toString());xt(b)&&this.updateImage(v,c,b)}}}function Kt(p){const i=p.key,c=p.value,f=p.valueSpec||{},v=p.objectElementValidators||{},b=p.style,w=p.styleSpec;let k=[];const I=s.J(c);if(I!=="object")return[new s.V(i,c,`object expected, ${I} found`)];for(const L in c){const O=L.split(".")[0];let N;v[O]?N=v[O]:f[O]?N=xi:v["*"]?N=v["*"]:f["*"]&&(N=xi),N?k=k.concat(N({key:(i&&`${i}.`)+L,value:c[L],valueSpec:f[O]||f["*"],style:b,styleSpec:w,object:c,objectKey:L},c)):k.push(new s.K(i,c[L],`unknown property "${L}"`))}for(const L in f)v[L]||f[L].required&&f[L].default===void 0&&c[L]===void 0&&k.push(new s.V(i,c,`missing required property "${L}"`));return k}function Jt(p){const i=p.value,c=p.valueSpec,f=p.style,v=p.styleSpec,b=p.key,w=p.arrayElementValidator||xi;if(s.J(i)!=="array")return[new s.V(b,i,`array expected, ${s.J(i)} found`)];if(c.length&&i.length!==c.length)return[new s.V(b,i,`array length ${c.length} expected, length ${i.length} found`)];if(c["min-length"]&&i.length<c["min-length"])return[new s.V(b,i,`array length at least ${c["min-length"]} expected, length ${i.length} found`)];let k={type:c.value,values:c.values,minimum:c.minimum,maximum:c.maximum,function:void 0};v.$version<7&&(k.function=c.function),s.J(c.value)==="object"&&(k=c.value);let I=[];for(let L=0;L<i.length;L++)I=I.concat(w({array:i,arrayIndex:L,value:i[L],valueSpec:k,style:f,styleSpec:v,key:`${b}[${L}]`},!0));return I}function On(p){const i=p.key,c=p.value,f=p.valueSpec;let v=s.J(c);if(v==="number"&&c!=c&&(v="NaN"),v!=="number")return[new s.V(i,c,`number expected, ${v} found`)];if("minimum"in f){let b=f.minimum;if(s.J(f.minimum)==="array"&&(b=f.minimum[p.arrayIndex]),c<b)return[new s.V(i,c,`${c} is less than the minimum value ${b}`)]}if("maximum"in f){let b=f.maximum;if(s.J(f.maximum)==="array"&&(b=f.maximum[p.arrayIndex]),c>b)return[new s.V(i,c,`${c} is greater than the maximum value ${b}`)]}return[]}function _n(p){const i=p.valueSpec,c=s.M(p.value.type);let f,v,b,w={};const k=c!=="categorical"&&p.value.property===void 0,I=!k,L=s.J(p.value.stops)==="array"&&s.J(p.value.stops[0])==="array"&&s.J(p.value.stops[0][0])==="object",O=Kt({key:p.key,value:p.value,valueSpec:p.styleSpec.function,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{stops:function(V){if(c==="identity")return[new s.V(V.key,V.value,'identity function may not have a "stops" property')];let Z=[];const G=V.value;return Z=Z.concat(Jt({key:V.key,value:G,valueSpec:V.valueSpec,style:V.style,styleSpec:V.styleSpec,arrayElementValidator:N})),s.J(G)==="array"&&G.length===0&&Z.push(new s.V(V.key,G,"array must have at least one stop")),Z},default:function(V){return xi({key:V.key,value:V.value,valueSpec:i,style:V.style,styleSpec:V.styleSpec})}}});return c==="identity"&&k&&O.push(new s.V(p.key,p.value,'missing required property "property"')),c==="identity"||p.value.stops||O.push(new s.V(p.key,p.value,'missing required property "stops"')),c==="exponential"&&p.valueSpec.expression&&!s.N(p.valueSpec)&&O.push(new s.V(p.key,p.value,"exponential functions not supported")),p.styleSpec.$version>=8&&(I&&!s.O(p.valueSpec)?O.push(new s.V(p.key,p.value,"property functions not supported")):k&&!s.Q(p.valueSpec)&&O.push(new s.V(p.key,p.value,"zoom functions not supported"))),c!=="categorical"&&!L||p.value.property!==void 0||O.push(new s.V(p.key,p.value,'"property" property is required')),O;function N(V){let Z=[];const G=V.value,Y=V.key;if(s.J(G)!=="array")return[new s.V(Y,G,`array expected, ${s.J(G)} found`)];if(G.length!==2)return[new s.V(Y,G,`array length 2 expected, length ${G.length} found`)];if(L){if(s.J(G[0])!=="object")return[new s.V(Y,G,`object expected, ${s.J(G[0])} found`)];if(G[0].zoom===void 0)return[new s.V(Y,G,"object stop key must have zoom")];if(G[0].value===void 0)return[new s.V(Y,G,"object stop key must have value")];const ee=s.M(G[0].zoom);if(typeof ee!="number")return[new s.V(Y,G[0].zoom,"stop zoom values must be numbers")];if(b&&b>ee)return[new s.V(Y,G[0].zoom,"stop zoom values must appear in ascending order")];ee!==b&&(b=ee,v=void 0,w={}),Z=Z.concat(Kt({key:`${Y}[0]`,value:G[0],valueSpec:{zoom:{}},style:V.style,styleSpec:V.styleSpec,objectElementValidators:{zoom:On,value:F}}))}else Z=Z.concat(F({key:`${Y}[0]`,value:G[0],style:V.style,styleSpec:V.styleSpec},G));return s.S(s.U(G[1]))?Z.concat([new s.V(`${Y}[1]`,G[1],"expressions are not allowed in function stops.")]):Z.concat(xi({key:`${Y}[1]`,value:G[1],valueSpec:i,style:V.style,styleSpec:V.styleSpec}))}function F(V,Z){const G=s.J(V.value),Y=s.M(V.value),ee=V.value!==null?V.value:Z;if(f){if(G!==f)return[new s.V(V.key,ee,`${G} stop domain type must match previous stop domain type ${f}`)]}else f=G;if(G!=="number"&&G!=="string"&&G!=="boolean"&&typeof Y!="number"&&typeof Y!="string"&&typeof Y!="boolean")return[new s.V(V.key,ee,"stop domain value must be a number, string, or boolean")];if(G!=="number"&&c!=="categorical"){let ae=`number expected, ${G} found`;return s.O(i)&&c===void 0&&(ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new s.V(V.key,ee,ae)]}return c!=="categorical"||G!=="number"||typeof Y=="number"&&isFinite(Y)&&Math.floor(Y)===Y?c!=="categorical"&&G==="number"&&typeof Y=="number"&&typeof v=="number"&&v!==void 0&&Y<v?[new s.V(V.key,ee,"stop domain values must appear in ascending order")]:(v=Y,c==="categorical"&&Y in w?[new s.V(V.key,ee,"stop domain values must be unique")]:(w[Y]=!0,[])):[new s.V(V.key,ee,`integer expected, found ${String(Y)}`)]}}function xn(p){const i=(p.expressionContext==="property"?s.W:s.X)(s.U(p.value),p.valueSpec);if(i.result==="error")return i.value.map(f=>new s.V(`${p.key}${f.key}`,p.value,f.message));const c=i.value.expression||i.value._styleExpression.expression;if(p.expressionContext==="property"&&p.propertyKey==="text-font"&&!c.outputDefined())return[new s.V(p.key,p.value,`Invalid data expression for "${p.propertyKey}". Output values must be contained as literals within the expression.`)];if(p.expressionContext==="property"&&p.propertyType==="layout"&&!s.Y(c))return[new s.V(p.key,p.value,'"feature-state" data expressions are not supported with layout properties.')];if(p.expressionContext==="filter")return gn(c,p);if(p.expressionContext&&p.expressionContext.indexOf("cluster")===0){if(!s.Z(c,["zoom","feature-state"]))return[new s.V(p.key,p.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(p.expressionContext==="cluster-initial"&&!s._(c))return[new s.V(p.key,p.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gn(p,i){const c=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const v of i.valueSpec.expression.parameters)c.delete(v);if(c.size===0)return[];const f=[];return p instanceof s.$&&c.has(p.name)?[new s.V(i.key,i.value,`["${p.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(p.eachChild(v=>{f.push(...gn(v,i))}),f)}function cr(p){const i=p.key,c=p.value,f=p.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(s.M(c))===-1&&v.push(new s.V(i,c,`expected one of [${f.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(f.values).indexOf(s.M(c))===-1&&v.push(new s.V(i,c,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(c)} found`)),v}function zn(p){return s.a1(s.U(p.value))?xn(s.L({},p,{expressionContext:"filter",valueSpec:p.styleSpec[`filter_${p.layerType||"fill"}`]})):Hn(p)}function Hn(p){const i=p.value,c=p.key;if(s.J(i)!=="array")return[new s.V(c,i,`array expected, ${s.J(i)} found`)];const f=p.styleSpec;let v,b=[];if(i.length<1)return[new s.V(c,i,"filter array must have at least 1 element")];switch(b=b.concat(cr({key:`${c}[0]`,value:i[0],valueSpec:f.filter_operator,style:p.style,styleSpec:p.styleSpec})),s.M(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&s.M(i[1])==="$type"&&b.push(new s.V(c,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&b.push(new s.V(c,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(v=s.J(i[1]),v!=="string"&&b.push(new s.V(`${c}[1]`,i[1],`string expected, ${v} found`)));for(let w=2;w<i.length;w++)v=s.J(i[w]),s.M(i[1])==="$type"?b=b.concat(cr({key:`${c}[${w}]`,value:i[w],valueSpec:f.geometry_type,style:p.style,styleSpec:p.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&b.push(new s.V(`${c}[${w}]`,i[w],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let w=1;w<i.length;w++)b=b.concat(Hn({key:`${c}[${w}]`,value:i[w],style:p.style,styleSpec:p.styleSpec}));break;case"has":case"!has":v=s.J(i[1]),i.length!==2?b.push(new s.V(c,i,`filter array for "${i[0]}" operator must have 2 elements`)):v!=="string"&&b.push(new s.V(`${c}[1]`,i[1],`string expected, ${v} found`))}return b}function yr(p,i){const c=p.key,f=p.style,v=p.layer,b=p.styleSpec,w=p.value,k=p.objectKey,I=b[`${i}_${p.layerType}`];if(!I)return[];const L=k.match(/^(.*)-use-theme$/);if(i==="paint"&&L&&I[L[1]])return s.S(w)?[].concat(xi({key:p.key,value:w,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:f,styleSpec:b,expressionContext:"property",propertyType:i,propertyKey:k})):xi({key:c,value:w,valueSpec:{type:"string"},style:f,styleSpec:b});const O=k.match(/^(.*)-transition$/);if(i==="paint"&&O&&I[O[1]]&&I[O[1]].transition)return xi({key:c,value:w,valueSpec:b.transition,style:f,styleSpec:b});const N=p.valueSpec||I[k];if(!N)return[new s.K(c,w,`unknown property "${k}"`)];let F;if(s.J(w)==="string"&&s.O(N)&&!N.tokens&&(F=/^{([^}]+)}$/.exec(w))){const Z=`\`{ "type": "identity", "property": ${F?JSON.stringify(F[1]):'"_"'} }\``;return[new s.V(c,w,`"${k}" does not support interpolation syntax
Use an identity property function instead: ${Z}.`)]}const V=[];if(p.layerType==="symbol")k!=="text-field"||!f||f.glyphs||f.imports||V.push(new s.V(c,w,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&s.a2(s.U(w))&&s.M(w.type)==="identity"&&V.push(new s.V(c,w,'"text-font" does not support identity functions'));else if(p.layerType==="model"&&i==="paint"&&v&&v.layout&&v.layout.hasOwnProperty("model-id")&&s.O(N)&&(s.a3(N)||s.Q(N))){const Z=s.W(s.U(w),N),G=Z.value.expression||Z.value._styleExpression.expression;G&&!s.Z(G,["measure-light"])&&(k==="model-emissive-strength"&&s._(G)&&s.Y(G)||V.push(new s.V(c,w,`${k} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return V.concat(xi({key:p.key,value:w,valueSpec:N,style:f,styleSpec:b,expressionContext:"property",propertyType:i,propertyKey:k}))}function Gr(p){return yr(p,"paint")}function Wr(p){return yr(p,"layout")}function _i(p){let i=[];const c=p.value,f=p.key,v=p.style,b=p.styleSpec;c.type||c.ref||i.push(new s.V(f,c,'either "type" or "ref" is required'));let w=s.M(c.type);const k=s.M(c.ref);if(c.id){const I=s.M(c.id);for(let L=0;L<p.arrayIndex;L++){const O=v.layers[L];s.M(O.id)===I&&i.push(new s.V(f,c.id,`duplicate layer id "${c.id}", previously used at line ${O.id.__line__}`))}}if("ref"in c){let I;["type","source","source-layer","filter","layout"].forEach(L=>{L in c&&i.push(new s.V(f,c[L],`"${L}" is prohibited for ref layers`))}),v.layers.forEach(L=>{s.M(L.id)===k&&(I=L)}),I?I.ref?i.push(new s.V(f,c.ref,"ref cannot reference another ref layer")):w=s.M(I.type):typeof k=="string"&&i.push(new s.V(f,c.ref,`ref layer "${k}" not found`))}else if(w!=="background"&&w!=="sky"&&w!=="slot")if(c.source){const I=v.sources&&v.sources[c.source],L=I&&s.M(I.type);I?L==="vector"&&w==="raster"?i.push(new s.V(f,c.source,`layer "${c.id}" requires a raster source`)):L==="raster"&&w!=="raster"?i.push(new s.V(f,c.source,`layer "${c.id}" requires a vector source`)):L!=="vector"||c["source-layer"]?L==="raster-dem"&&w!=="hillshade"?i.push(new s.V(f,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):L!=="raster-array"||["raster","raster-particle"].includes(w)?w==="line"&&c.paint&&(c.paint["line-gradient"]||c.paint["line-trim-offset"])&&L==="geojson"&&!I.lineMetrics?i.push(new s.V(f,c,`layer "${c.id}" specifies a line-gradient, which requires the GeoJSON source to have \`lineMetrics\` enabled.`)):w==="raster-particle"&&L!=="raster-array"&&i.push(new s.V(f,c.source,`layer "${c.id}" requires a 'raster-array' source.`)):i.push(new s.V(f,c.source,"raster-array source can only be used with layer type 'raster'.")):i.push(new s.V(f,c,`layer "${c.id}" must specify a "source-layer"`)):i.push(new s.V(f,c.source,`source "${c.source}" not found`))}else i.push(new s.V(f,c,'missing required property "source"'));return i=i.concat(Kt({key:f,value:c,valueSpec:b.layer,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{"*":()=>[],type:()=>xi({key:`${f}.type`,value:c.type,valueSpec:b.layer.type,style:p.style,styleSpec:p.styleSpec,object:c,objectKey:"type"}),filter:I=>zn(s.L({layerType:w},I)),layout:I=>Kt({layer:c,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":L=>Wr(s.L({layerType:w},L))}}),paint:I=>Kt({layer:c,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":L=>Gr(s.L({layerType:w,layer:c},L))}})}})),i}function so(p){const i=p.value,c=p.key,f=s.J(i);return f!=="string"?[new s.V(c,i,`string expected, ${f} found`)]:[]}const fo={promoteId:function p({key:i,value:c}){if(s.J(c)==="string")return so({key:i,value:c});if(Array.isArray(c)){const f=[],v=s.U(c),b=s.X(v);return b.result==="error"&&b.value.forEach(w=>{f.push(new s.V(`${i}${w.key}`,null,`${w.message}`))}),s.Z(b.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||f.push(new s.V(`${i}`,null,"promoteId expression should be only feature dependent")),f}{const f=[];for(const v in c)f.push(...p({key:`${i}.${v}`,value:c[v]}));return f}}};function Ui(p){const i=p.value,c=p.key,f=p.styleSpec,v=p.style;if(!i.type)return[new s.V(c,i,'"type" is required')];const b=s.M(i.type);let w=[];switch(["vector","raster","raster-dem","raster-array"].includes(b)&&(i.url||i.tiles||w.push(new s.K(c,i,'Either "url" or "tiles" is required.'))),b){case"vector":case"raster":case"raster-dem":case"raster-array":return w=w.concat(Kt({key:c,value:i,valueSpec:f[`source_${b.replace("-","_")}`],style:p.style,styleSpec:f,objectElementValidators:fo})),w;case"geojson":if(w=Kt({key:c,value:i,valueSpec:f.source_geojson,style:v,styleSpec:f,objectElementValidators:fo}),i.cluster)for(const k in i.clusterProperties){const[I,L]=i.clusterProperties[k],O=typeof I=="string"?[I,["accumulated"],["get",k]]:I;w.push(...xn({key:`${c}.${k}.map`,value:L,expressionContext:"cluster-map"})),w.push(...xn({key:`${c}.${k}.reduce`,value:O,expressionContext:"cluster-reduce"}))}return w;case"video":return Kt({key:c,value:i,valueSpec:f.source_video,style:v,styleSpec:f});case"image":return Kt({key:c,value:i,valueSpec:f.source_image,style:v,styleSpec:f});case"canvas":return[new s.V(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return cr({key:`${c}.type`,value:i.type,valueSpec:{values:ao(f)}})}}function ao(p){return p.source.reduce((i,c)=>{const f=p[c];return f.type.type==="enum"&&(i=i.concat(Object.keys(f.type.values))),i},[])}function ws(p){const i=p.value,c=p.styleSpec,f=c.light,v=p.style;let b=[];const w=s.J(i);if(i===void 0)return b;if(w!=="object")return b=b.concat([new s.V("light",i,`object expected, ${w} found`)]),b;for(const k in i){const I=k.match(/^(.*)-transition$/),L=k.match(/^(.*)-use-theme$/);b=b.concat(L&&f[L[1]]?xi({key:k,value:i[k],valueSpec:{type:"string"},style:v,styleSpec:c}):I&&f[I[1]]&&f[I[1]].transition?xi({key:k,value:i[k],valueSpec:c.transition,style:v,styleSpec:c}):f[k]?xi({key:k,value:i[k],valueSpec:f[k],style:v,styleSpec:c}):[new s.V(k,i[k],`unknown property "${k}"`)])}return b}function Ys(p){const i=p.value;let c=[];if(!i)return c;const f=s.J(i);if(f!=="object")return c=c.concat([new s.V("light-3d",i,`object expected, ${f} found`)]),c;const v=p.styleSpec,b=v["light-3d"],w=p.key,k=p.style,I=p.style.lights;for(const N of["type","id"])if(!(N in i))return c=c.concat([new s.V("light-3d",i,`missing property ${N} on light`)]),c;if(i.type&&I)for(let N=0;N<p.arrayIndex;N++){const F=s.M(i.type),V=I[N];s.M(V.type)===F&&c.push(new s.V(w,i.id,`duplicate light type "${i.type}", previously defined at line ${V.id.__line__}`))}const L=`properties_light_${i.type}`;if(!(L in v))return c=c.concat([new s.V("light-3d",i,`Invalid light type ${i.type}`)]),c;const O=v[L];for(const N in i)if(N==="properties"){const F=i[N],V=s.J(F);if(V!=="object")return c=c.concat([new s.V("properties",F,`object expected, ${V} found`)]),c;for(const Z in F){const G=Z.match(/^(.*)-transition$/),Y=Z.match(/^(.*)-use-theme$/);c=c.concat(Y&&O[Y[1]]?xi({key:N,value:F[Z],valueSpec:{type:"string"},style:k,styleSpec:v}):G&&O[G[1]]&&O[G[1]].transition?xi({key:N,value:i[N],valueSpec:v.transition,style:k,styleSpec:v}):O[Z]?xi({key:Z,value:F[Z],valueSpec:O[Z],style:k,styleSpec:v}):[new s.K(p.key,F[Z],`unknown property "${Z}"`)])}}else c=c.concat(b[N]?xi({key:N,value:i[N],valueSpec:b[N],style:k,styleSpec:v}):[new s.K(N,i[N],`unknown property "${N}"`)]);return c}function mo(p){const i=p.value,c=p.key,f=p.style,v=p.styleSpec,b=v.terrain;let w=[];const k=s.J(i);if(i===void 0||k==="null")return w;if(k!=="object")return w=w.concat([new s.V("terrain",i,`object expected, ${k} found`)]),w;for(const I in i){const L=I.match(/^(.*)-transition$/),O=I.match(/^(.*)-use-theme$/);w=w.concat(O&&b[O[1]]?xi({key:I,value:i[I],valueSpec:{type:"string"},style:f,styleSpec:v}):L&&b[L[1]]&&b[L[1]].transition?xi({key:I,value:i[I],valueSpec:v.transition,style:f,styleSpec:v}):b[I]?xi({key:I,value:i[I],valueSpec:b[I],style:f,styleSpec:v}):[new s.K(I,i[I],`unknown property "${I}"`)])}if(i.source){const I=f.sources&&f.sources[i.source],L=I&&s.M(I.type);I?L!=="raster-dem"&&w.push(new s.V(c,i.source,`terrain cannot be used with a source of type ${String(L)}, it only be used with a "raster-dem" source type`)):w.push(new s.V(c,i.source,`source "${i.source}" not found`))}else w.push(new s.V(c,i,'terrain is missing required property "source"'));return w}function ko(p){const i=p.value,c=p.style,f=p.styleSpec,v=f.fog;let b=[];const w=s.J(i);if(i===void 0)return b;if(w!=="object")return b=b.concat([new s.V("fog",i,`object expected, ${w} found`)]),b;for(const k in i){const I=k.match(/^(.*)-transition$/),L=k.match(/^(.*)-use-theme$/);b=b.concat(L&&v[L[1]]?xi({key:k,value:i[k],valueSpec:{type:"string"},style:c,styleSpec:f}):I&&v[I[1]]&&v[I[1]].transition?xi({key:k,value:i[k],valueSpec:f.transition,style:c,styleSpec:f}):v[k]?xi({key:k,value:i[k],valueSpec:v[k],style:c,styleSpec:f}):[new s.K(k,i[k],`unknown property "${k}"`)])}return b}const Ma={"*":()=>[],array:Jt,boolean:function(p){const i=p.value,c=p.key,f=s.J(i);return f!=="boolean"?[new s.V(c,i,`boolean expected, ${f} found`)]:[]},number:On,color:function(p){const i=p.key,c=p.value,f=s.J(c);return f!=="string"?[new s.V(i,c,`color expected, ${f} found`)]:s.a0.parseCSSColor(c)===null?[new s.V(i,c,`color expected, "${c}" found`)]:[]},enum:cr,filter:zn,function:_n,layer:_i,object:Kt,source:Ui,model:s.a4,light:ws,"light-3d":Ys,terrain:mo,fog:ko,string:so,formatted:function(p){return so(p).length===0?[]:xn(p)},resolvedImage:function(p){return so(p).length===0?[]:xn(p)},projection:function(p){const i=p.value,c=p.styleSpec,f=c.projection,v=p.style;let b=[];const w=s.J(i);if(w==="object")for(const k in i)b=b.concat(xi({key:k,value:i[k],valueSpec:f[k],style:v,styleSpec:c}));else w!=="string"&&(b=b.concat([new s.V("projection",i,`object or string expected, ${w} found`)]));return b},import:function(p){const{value:i,styleSpec:c}=p,{data:f,...v}=i;Object.defineProperty(v,"__line__",{value:i.__line__,enumerable:!1});let b=Kt(s.L({},p,{value:v,valueSpec:c.import}));return s.M(v.id)===""&&b.push(new s.V(`${p.key}.id`,v,"import id can't be an empty string")),f&&(b=b.concat(Nc(f,c,{key:`${p.key}.data`}))),b},iconset:function(p){const i=p.value,c=p.key,f=p.styleSpec,v=p.style;if(!i.type)return[new s.V(c,i,'"type" is required')];const b=s.M(i.type);let w=[];if(w=w.concat(Kt({key:c,value:i,valueSpec:f[`iconset_${b}`],style:v,styleSpec:f})),b==="source"&&i.source){const k=v.sources&&v.sources[i.source],I=k&&s.M(k.type);k?I!=="raster-array"&&w.push(new s.V(c,i.source,`iconset cannot be used with a source of type ${String(I)}, it only be used with a "raster-array" source type`)):w.push(new s.V(c,i.source,`source "${i.source}" not found`))}return w}};function xi(p,i=!1){const c=p.value,f=p.valueSpec,v=p.styleSpec;if(f.expression&&s.a2(s.M(c)))return _n(p);if(f.expression&&s.S(s.U(c)))return xn(p);if(f.type&&Ma[f.type]){const b=Ma[f.type](p);return i===!0&&b.length>0&&s.J(p.value)==="array"?xn(p):b}return Kt(s.L({},p,{valueSpec:f.type?v[f.type]:f}))}function cl(p){const i=p.value,c=p.key,f=so(p);return f.length||(i.indexOf("{fontstack}")===-1&&f.push(new s.V(c,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&f.push(new s.V(c,i,'"glyphs" url must include a "{range}" token'))),f}function Nc(p,i=s.a5,c={}){return xi({key:c.key||"",value:p,valueSpec:i.$root,styleSpec:i,style:p,objectElementValidators:{glyphs:cl,"*":()=>[]}})}function ls(p,i=s.a5){return Le(Nc(p,i))}const zf=p=>Le(Ui(p)),Dh=p=>Le(ws(p)),Yl=p=>Le(Ys(p)),Vt=p=>Le(mo(p)),Da=p=>Le(ko(p)),Bf=p=>Le(function(i){const c=i.value,f=i.style,v=i.styleSpec,b=v.snow;let w=[];const k=s.J(c);if(c===void 0)return w;if(k!=="object")return w=w.concat([new s.V("snow",c,`object expected, ${k} found`)]),w;for(const I in c){const L=I.match(/^(.*)-transition$/);w=w.concat(L&&b[L[1]]&&b[L[1]].transition?xi({key:I,value:c[I],valueSpec:v.transition,style:f,styleSpec:v}):b[I]?xi({key:I,value:c[I],valueSpec:b[I],style:f,styleSpec:v}):[new s.K(I,c[I],`unknown property "${I}"`)])}return w}(p)),nd=p=>Le(function(i){const c=i.value,f=i.style,v=i.styleSpec,b=v.rain;let w=[];const k=s.J(c);if(c===void 0)return w;if(k!=="object")return w=w.concat([new s.V("rain",c,`object expected, ${k} found`)]),w;for(const I in c){const L=I.match(/^(.*)-transition$/);w=w.concat(L&&b[L[1]]&&b[L[1]].transition?xi({key:I,value:c[I],valueSpec:v.transition,style:f,styleSpec:v}):b[I]?xi({key:I,value:c[I],valueSpec:b[I],style:f,styleSpec:v}):[new s.K(I,c[I],`unknown property "${I}"`)])}return w}(p)),Cr=p=>Le(_i(p)),rt=p=>Le(zn(p)),Q=p=>Le(Gr(p)),le=p=>Le(Wr(p)),xe=p=>Le(s.a4(p));function Le(p){return p.slice().sort((i,c)=>i.line&&c.line?i.line-c.line:0)}function Te(p,i){let c=!1;if(i&&i.length)for(const f of i)f instanceof s.K?s.w(f.message):(p.fire(new s.z(new Error(f.message))),c=!0);return c}let Ne;class et extends s.E{constructor(i,c="flat"){super(),this._transitionable=new s.a6(Ne||(Ne=new s.a7({anchor:new s.a8(s.a5.light.anchor),position:new s.a9(s.a5.light.position),color:new s.a8(s.a5.light.color),intensity:new s.a8(s.a5.light.intensity)}))),this.setLight(i,c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c,f={}){this._validate(Dh,i,f)||(this._transitionable.setTransitionOrValue(i),this.id=c)}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,f){return(!f||f.validate!==!1)&&Te(this,i.call(ls,s.h({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.a5})))}}let Ve=class extends s.E{constructor(p,i,c,f,v){super(),this.scope=c,this._transitionable=new s.a6(new s.a7({source:new s.a8(s.a5.terrain.source),exaggeration:new s.a8(s.a5.terrain.exaggeration)}),c,f),this._transitionable.setTransitionOrValue(p,f),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i,this.worldview=v}get(){return this._transitionable.serialize()}set(p,i){this._transitionable.setTransitionOrValue(p,i)}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}getExaggeration(p){return this._transitioning.possiblyEvaluate(new s.aa(p,{worldview:this.worldview})).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const p=this._transitionable._values.exaggeration;if(!p)return null;const i=p.value.expression;if(!i)return null;let c=-1,f=-1,v=1;for(const b of i.zoomStops)v=i.evaluate(new s.aa(b,{worldview:this.worldview})),v>.01?(c=b,f=-1):f=b;return v<.01&&c>0&&f>c?[c,f]:null}isZoomDependent(){const p=this._transitionable._values.exaggeration;return p!=null&&p.value!=null&&p.value.expression!=null&&p.value.expression instanceof s.ab}};const tt=45,vt=65,it=.05;function Nt(p,i,c,f){const v=s.af(tt,vt,c),[b,w]=dn(p,f);let k=1-Math.min(1,Math.exp((i-b)/(w-b)*-6));return k*=k*k,k=Math.min(1,1.00747*k),k*v*p.alpha}function dn(p,i){const c=.5/Math.tan(.5*i);return[p.range[0]+c,p.range[1]+c]}function fn(p,i,c,f,v){const b=s.ad([],[i,c,f],v.mercatorFogMatrix);return Nt(p,s.ae(b),v.pitch,v._fov)}function Fn(p,i,c,f,v,b,w){const k=[[c,f,0],[v,f,0],[v,b,0],[c,b,0]];let I=Number.MAX_VALUE,L=-Number.MAX_VALUE;for(const O of k){const N=s.ad([],O,i),F=s.ae(N);I=Math.min(I,F),L=Math.max(L,F)}return[Nt(p,I,w.pitch,w._fov),Nt(p,L,w.pitch,w._fov)]}class Nn extends s.E{constructor(i,c,f,v){super();const b=new s.a7({range:new s.a8(s.a5.fog.range),color:new s.a8(s.a5.fog.color),"color-use-theme":new s.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new s.a8(s.a5.fog["high-color"]),"high-color-use-theme":new s.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new s.a8(s.a5.fog["space-color"]),"space-color-use-theme":new s.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new s.a8(s.a5.fog["horizon-blend"]),"star-intensity":new s.a8(s.a5.fog["star-intensity"]),"vertical-range":new s.a8(s.a5.fog["vertical-range"])});this._transitionable=new s.a6(b,f,new Map(v)),this.set(i,v),this._transitioning=this._transitionable.untransitioned(),this._transform=c,this.properties=new s.ag(b),this.scope=f}get state(){const i=this._transform,c=i.projection.name==="globe",f=s.ah(i.zoom),v=this.properties.get("range"),b=[.5,3];return{range:c?[s.ai(b[0],v[0],f),s.ai(b[1],v[1],f)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,c,f={}){if(this._validate(Da,i,f))return;const v=s.h({},i);for(const b of Object.keys(s.a5.fog))v[b]===void 0&&(v[b]=s.a5.fog[b].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,c)}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.af(tt,vt,i))*c.a}getOpacityAtLatLng(i,c){return this._transform.projection.supportsFog?function(f,v,b){const w=s.ac.fromLngLat(v),k=b.elevation?b.elevation.getAtPointOrZero(w):0;return fn(f,w.x,w.y,k,b)}(this.state,i,c):0}getOpacityForTile(i){if(!this._transform.projection.supportsFog)return[1,1];const c=this._transform.calculateFogTileMatrix(i.toUnwrapped());return Fn(this.state,c,0,0,s.aj,s.aj,this._transform)}getOpacityForBounds(i,c,f,v,b){return this._transform.projection.supportsFog?Fn(this.state,i,c,f,v,b,this._transform):[1,1]}getFovAdjustedRange(i){return this._transform.projection.supportsFog?dn(this.state,i):[0,1]}isVisibleOnFrustum(i){if(!this._transform.projection.supportsFog)return!1;const c=[4,5,6,7];for(const f of c){const v=i.points[f];let b;if(v[2]>=0)b=v;else{const w=i.points[f-4];b=s.ak(w,v,w[2]/(w[2]-v[2]))}if(fn(this.state,b[0],b[1],0,this._transform)>=it)return!0}return!1}updateConfig(i){this._transitionable.setTransitionOrValue(this._options,new Map(i))}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,f){return(!f||f.validate!==!1)&&Te(this,i.call(ls,s.h({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.a5})))}}let qn,lr,Zn,Yr,mi=class extends s.E{constructor(p,i,c,f){super();const v=qn||(qn=new s.a7({density:new s.a8(s.a5.snow.density),intensity:new s.a8(s.a5.snow.intensity),color:new s.a8(s.a5.snow.color),opacity:new s.a8(s.a5.snow.opacity),vignette:new s.a8(s.a5.snow.vignette),"vignette-color":new s.a8(s.a5.snow["vignette-color"]),"center-thinning":new s.a8(s.a5.snow["center-thinning"]),direction:new s.a8(s.a5.snow.direction),"flake-size":new s.a8(s.a5.snow["flake-size"])}));this._transitionable=new s.a6(v,c,new Map(f)),this.set(p,f),this._transitioning=this._transitionable.untransitioned(),this.properties=new s.ag(v),this.scope=c}get state(){const p=this.properties.get("opacity"),i=this.properties.get("color"),c=this.properties.get("direction"),f=s.al(c[0]),v=-Math.max(s.al(c[1]),.01),b=[Math.cos(f)*Math.cos(v),Math.sin(f)*Math.cos(v),Math.sin(v)],w=this.properties.get("vignette"),k=this.properties.get("vignette-color");return k.a=w,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new s.am(i.r,i.g,i.b,i.a*p),direction:b,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:k}}get(){return this._transitionable.serialize()}set(p,i,c={}){if(this._validate(Bf,p,c))return;const f=s.h({},p);for(const v of Object.keys(s.a5.snow))f[v]===void 0&&(f[v]=s.a5.snow[v].default);this._options=f,this._transitionable.setTransitionOrValue(this._options,i)}updateConfig(p){this._transitionable.setTransitionOrValue(this._options,new Map(p))}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}_validate(p,i,c){return(!c||c.validate!==!1)&&Te(this,p.call(ls,s.h({value:i,style:{glyphs:!0,sprite:!0},styleSpec:s.a5})))}},gi=class extends s.E{constructor(p,i,c,f){super();const v=lr||(lr=new s.a7({density:new s.a8(s.a5.rain.density),intensity:new s.a8(s.a5.rain.intensity),color:new s.a8(s.a5.rain.color),opacity:new s.a8(s.a5.rain.opacity),vignette:new s.a8(s.a5.rain.vignette),"vignette-color":new s.a8(s.a5.rain["vignette-color"]),"center-thinning":new s.a8(s.a5.rain["center-thinning"]),direction:new s.a8(s.a5.rain.direction),"droplet-size":new s.a8(s.a5.rain["droplet-size"]),"distortion-strength":new s.a8(s.a5.rain["distortion-strength"])}));this._transitionable=new s.a6(v,c,new Map(f)),this.set(p,f),this._transitioning=this._transitionable.untransitioned(),this.properties=new s.ag(v),this.scope=c}get state(){const p=this.properties.get("opacity"),i=this.properties.get("color"),c=this.properties.get("direction"),f=s.al(c[0]),v=-Math.max(s.al(c[1]),.01),b=[Math.cos(f)*Math.cos(v),Math.sin(f)*Math.cos(v),Math.sin(v)],w=this.properties.get("vignette-color");return w.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new s.am(i.r,i.g,i.b,i.a*p),direction:b,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:w}}get(){return this._transitionable.serialize()}set(p,i,c={}){if(this._validate(nd,p,c))return;const f=s.h({},p);for(const v of Object.keys(s.a5.rain))f[v]===void 0&&(f[v]=s.a5.rain[v].default);this._options=f,this._transitionable.setTransitionOrValue(this._options,i)}updateConfig(p){this._transitionable.setTransitionOrValue(this._options,new Map(p))}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}_validate(p,i,c){return(!c||c.validate!==!1)&&Te(this,p.call(ls,s.h({value:i,style:{glyphs:!0,sprite:!0},styleSpec:s.a5})))}};class zr extends s.E{constructor(i,c,f,v){super(),this.scope=f,this._options=i,this.properties=new s.ag(c),this._transitionable=new s.a6(c,f,new Map(v)),this._transitionable.setTransitionOrValue(i.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(i){this._transitionable.setTransitionOrValue(this._options.properties,new Map(i))}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(i,c){this._options=i,this._transitionable.setTransitionOrValue(i.properties,c)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class Tr{constructor(i,c,f,v){this.screenBounds=i,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=f,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(i,c){let f,v;if(i instanceof s.P||typeof i[0]=="number"){const b=s.P.convert(i);f=[b],v=c.isPointAboveHorizon(b)}else{const b=s.P.convert(i[0]),w=s.P.convert(i[1]),k=b.add(w)._div(2);f=[b,w],v=s.ao(b,w).every(I=>c.isPointAboveHorizon(I))&&c.isPointAboveHorizon(k)}return new Tr(f,c.getCameraPoint(),v,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(i){return s.ao(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const c=this.screenBounds[0],f=this.screenBounds.length===1?this.screenBounds[0].add(new s.P(1,1)):this.screenBounds[1],v=s.ao(c,f,0,!1);return this.cameraPoint.y>f.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<f.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=f.x?v[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(v[3]=this.cameraPoint)),s.ap(v,i)}bufferedCameraGeometryGlobe(i){const c=this.screenBounds[0],f=this.screenBounds.length===1?this.screenBounds[0].add(new s.P(1,1)):this.screenBounds[1],v=s.ao(c,f,i),b=this.cameraPoint.clone();switch(3*((b.y>c.y)+(b.y>f.y))+((b.x>c.x)+(b.x>f.x))){case 0:v[0]=b,v[4]=b.clone();break;case 1:v.splice(1,0,b);break;case 2:v[1]=b;break;case 3:v.splice(4,0,b);break;case 5:v.splice(2,0,b);break;case 6:v[3]=b;break;case 7:v.splice(3,0,b);break;case 8:v[2]=b}return v}containsTile(i,c,f,v=0){const b=i.queryPadding/c._pixelsPerMercatorPixel+1,w=f?this._bufferedCameraMercator(b,c):this._bufferedScreenMercator(b,c);let k=i.tileID.wrap+(w.unwrapped?v:0);const I=w.polygon.map(Y=>s.aq(i.tileTransform,Y,k));if(!s.ar(I,0,0,s.aj,s.aj))return;k=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const L=this.screenGeometryMercator.polygon.map(Y=>s.as(i.tileTransform,Y,k)),O=L.map(Y=>new s.P(Y[0],Y[1])),N=c.getFreeCameraOptions().position||new s.ac(0,0,0),F=s.as(i.tileTransform,N,k),V=L.map(Y=>{const ee=s.at(Y,Y,F);return s.au(ee,ee),new s.av(F,ee)}),Z=s.aw(i,1,c.zoom)*c._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:O,tilespaceRays:V,bufferedTilespaceGeometry:I,bufferedTilespaceBounds:(G=s.ax(I),G.min.x=s.ay(G.min.x,0,s.aj),G.min.y=s.ay(G.min.y,0,s.aj),G.max.x=s.ay(G.max.x,0,s.aj),G.max.y=s.ay(G.max.y,0,s.aj),G),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:Z};var G}_bufferedScreenMercator(i,c){const f=Ti(i);if(this._screenRaycastCache[f])return this._screenRaycastCache[f];{let v;return v=c.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(i),c):{polygon:this.bufferedScreenGeometry(i).map(b=>c.pointCoordinate3D(b)),unwrapped:!0},this._screenRaycastCache[f]=v,v}}_bufferedCameraMercator(i,c){const f=Ti(i);if(this._cameraRaycastCache[f])return this._cameraRaycastCache[f];{let v;return v=c.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(i),c):{polygon:this.bufferedCameraGeometry(i).map(b=>c.pointCoordinate3D(b)),unwrapped:!0},this._cameraRaycastCache[f]=v,v}}_projectAndResample(i,c){const f=function(b,w){const k=s.az([],w.pixelMatrix,w.globeMatrix),I=[0,-s.aB,0,1],L=[0,s.aB,0,1],O=[0,0,0,1];s.aA(I,I,k),s.aA(L,L,k),s.aA(O,O,k);const N=new s.P(I[0]/I[3],I[1]/I[3]),F=new s.P(L[0]/L[3],L[1]/L[3]),V=s.aC(b,N)&&I[3]<O[3],Z=s.aC(b,F)&&L[3]<O[3];if(!V&&!Z)return null;const G=function(ke,Se,Ae){for(let De=1;De<ke.length;De++){const Ze=Ri(Se.pointCoordinate3D(ke[De-1]).x),Ye=Ri(Se.pointCoordinate3D(ke[De]).x);if(Ae<0){if(Ze<Ye)return{idx:De,t:-Ze/(Ye-1-Ze)}}else if(Ye<Ze)return{idx:De,t:(1-Ze)/(Ye+1-Ze)}}return null}(b,w,V?-1:1);if(!G)return null;const{idx:Y,t:ee}=G;let ae=Y>1?Ni(b.slice(0,Y),w):[],ve=Y<b.length?Ni(b.slice(Y),w):[];ae=ae.map(ke=>new s.P(Ri(ke.x),ke.y)),ve=ve.map(ke=>new s.P(Ri(ke.x),ke.y));const we=[...ae];we.length===0&&we.push(ve[ve.length-1]);const Pe=s.ai(we[we.length-1].y,(ve.length===0?ae[0]:ve[0]).y,ee);let Ee;return Ee=V?[new s.P(0,Pe),new s.P(0,0),new s.P(1,0),new s.P(1,Pe)]:[new s.P(1,Pe),new s.P(1,1),new s.P(0,1),new s.P(0,Pe)],we.push(...Ee),ve.length===0?we.push(ae[0]):we.push(...ve),{polygon:we.map(ke=>new s.ac(ke.x,ke.y)),unwrapped:!1}}(i,c);if(f)return f;const v=function(b,w){let k=!1,I=-1/0,L=0;for(let N=0;N<b.length-1;N++)b[N].x>I&&(I=b[N].x,L=N);for(let N=0;N<b.length-1;N++){const F=(L+N)%(b.length-1),V=b[F],Z=b[F+1];Math.abs(V.x-Z.x)>.5&&(V.x<Z.x?(V.x+=1,F===0&&(b[b.length-1].x+=1)):(Z.x+=1,F+1===b.length-1&&(b[0].x+=1)),k=!0)}const O=s.aD(w.center.lng);return k&&O<Math.abs(O-1)&&b.forEach(N=>{N.x-=1}),{polygon:b,unwrapped:k}}(Ni(i,c).map(b=>new s.P(Ri(b.x),b.y)),c);return{polygon:v.polygon.map(b=>new s.ac(b.x,b.y)),unwrapped:v.unwrapped}}}function Ni(p,i){return s.aE(p,c=>{const f=i.pointCoordinate3D(c);c.x=f.x,c.y=f.y},1/256)}function Ri(p){return p<0?1+p%1:p%1}function Ti(p){return 100*p|0}function _o(p,i,c,f,v){const b=function(k,I){if(k)return v(k);if(I){if(p.url&&I.tiles&&p.tiles&&delete p.tiles,I.variants){if(!Array.isArray(I.variants))return v(new Error("variants must be an array"));for(const O of I.variants){if(O==null||typeof O!="object"||O.constructor!==Object)return v(new Error("variant must be an object"));if(!Array.isArray(O.capabilities))return v(new Error("capabilities must be an array"));if(O.capabilities.length===1&&O.capabilities[0]==="meshopt"){I=s.h(I,O);break}}}const L=s.aF(s.h({},I,p),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","extra_bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);L.tiles=i.canonicalizeTileset(L,p.url),v(null,L)}},w=function(k,I,L){if(!k)return null;if(!I&&!L)return k;L=L||k.worldview_default;const O=Object.values(k.language||{});if(O.length===0)return null;const N=Object.values(k.worldview||{});if(N.length===0)return null;const F=O.every(Z=>Z===I),V=N.every(Z=>Z===L);return F&&V?k:I in(k.language_options||{})||L in(k.worldview_options||{})?null:k.language_options&&k.worldview_options?k:null}(p.data,c,f);return w?s.q.frame(()=>b(null,w)):p.url?s.n(i.transformRequest(i.normalizeSourceURL(p.url,null,c,f),s.R.Source),b):s.q.frame(()=>{const{data:k,...I}=p;b(null,I)})}function rs(p,i){const c=Math.pow(2,i.z),f=Math.floor(s.aD(p.getWest())*c),v=Math.floor(s.aH(p.getNorth())*c),b=Math.ceil(s.aD(p.getEast())*c),w=Math.ceil(s.aH(p.getSouth())*c);return i.x>=f&&i.x<b&&i.y>=v&&i.y<w}class Vo{constructor(i,c,f){this.bounds=i?s.aG.convert(this.validateBounds(i)):null,this.minzoom=c||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}addExtraBounds(i){if(i){this.extraBounds||(this.extraBounds=[]);for(const c of i)this.extraBounds.push(s.aG.convert(this.validateBounds(c)))}}contains(i){if(i.z>this.maxzoom||i.z<this.minzoom||this.bounds&&!rs(this.bounds,i))return!1;if(!this.extraBounds)return!0;for(const c of this.extraBounds)if(rs(c,i))return!0;return!1}static fromTileJSON(i){if(!i.bounds&&!i.extra_bounds)return null;const c=new Vo(i.bounds,i.minzoom,i.maxzoom);return c.addExtraBounds(i.extra_bounds),c}}class rd extends s.E{constructor(i,c,f,v){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.h(this,s.aF(c,["url","scheme","tileSize","promoteId"])),this._options=s.h({type:"vector"},c),this._collectResourceTiming=!!c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new s.aI}load(i){this._loaded=!1,this.fire(new s.A("dataloading",{dataType:"source"}));const c=Array.isArray(this.map._language)?this.map._language.join():this.map._language,f=this.map.getWorldview();this._tileJSONRequest=_o(this._options,this.map._requestManager,c,f,(v,b)=>{if(this._tileJSONRequest=null,this._loaded=!0,v)c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${c}`),f&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${f}`),this.fire(new s.z(v));else if(b){if(s.h(this,b),this.hasWorldviews=!!b.worldview_options,b.worldview_default&&(this.worldviewDefault=b.worldview_default),b.vector_layers){this.vectorLayers=b.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const w of b.vector_layers)this.vectorLayerIds.push(w.id),b.worldview&&b.worldview[w.source]&&this.localizableLayerIds.add(w.id)}this.tileBounds=Vo.fromTileJSON(b),Or(b.tiles,this.map._requestManager._customAccessToken),this.fire(new s.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.A("data",{dataType:"source",sourceDataType:"content"}))}i&&i(v)})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest();const i=s.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(i){this.cancelTileJSONRequest()}serialize(){return s.h({},this._options)}loadTile(i,c){const f=i.tileID.canonical.url(this.tiles,this.scheme),v=this.map._requestManager.normalizeTileURL(f),b=this.map._requestManager.transformRequest(v,s.R.Tile),w=this.map.style?this.map.style.getLut(this.scope):null,k=w?{image:w.image.clone()}:null,I={request:b,data:void 0,uid:i.uid,tileID:i.tileID,tileZoom:i.tileZoom,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,lut:k,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:s.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:i.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:i.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor(),worldview:this.map.getWorldview()||this.worldviewDefault};if(this.hasWorldviews&&s.j(f)&&(I.localizableLayerIds=this.localizableLayerIds),I.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired")i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",I,L.bind(this));else if(i.actor=this._tileWorkers[v]=this._tileWorkers[v]||this.dispatcher.getActor(),this.dispatcher.ready)i.request=i.actor.send("loadTile",I,L.bind(this),void 0,!0);else{const O=s.aJ.call({deduped:this._deduped},I,(N,F)=>{N||!F?L.call(this,N):(I.data={cacheControl:F.cacheControl,expires:F.expires,rawData:F.rawData.slice(0)},i.actor&&i.actor.send("loadTile",I,L.bind(this),void 0,!0))},!0);i.request={cancel:O}}function L(O,N){return delete i.request,i.aborted?c(null):O&&O.status!==404?c(O):(N&&N.resourceTiming&&(i.resourceTiming=N.resourceTiming),this.map._refreshExpiredTiles&&N&&i.setExpiryData(N),i.loadVectorData(N,this.map.painter),s.aK(this.dispatcher),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(i,c){i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope}),i.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class To extends s.E{constructor(i,c,f,v){super(),this.id=i,this.dispatcher=f,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.h({type:"raster"},c),s.h(this,s.aF(c,["url","scheme","tileSize"]))}load(i){this._loaded=!1,this.fire(new s.A("dataloading",{dataType:"source"}));const c=this.map.getWorldview();this._tileJSONRequest=_o(this._options,this.map._requestManager,null,c,(f,v)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new s.z(f)):v&&(s.h(this,v),v.raster_layers&&(this.rasterLayers=v.raster_layers,this.rasterLayerIds=this.rasterLayers.map(b=>b.id)),this.tileBounds=Vo.fromTileJSON(v),Or(v.tiles),this.fire(new s.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.A("data",{dataType:"source",sourceDataType:"content"}))),i&&i(f)})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest();const i=s.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(i){this.cancelTileJSONRequest()}serialize(){return s.h({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const f=s.q.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),f,this.tileSize);i.request=s.o(this.map._requestManager.transformRequest(v,s.R.Tile),(b,w,k,I)=>(delete i.request,i.aborted?(i.state="unloaded",c(null)):b?(i.state="errored",c(b)):w?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:k,expires:I}),i.setTexture(w,this.map.painter),i.state="loaded",s.aK(this.dispatcher),void c(null)):c(null)))}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c&&c()}unloadTile(i,c){i.texture&&i.texture instanceof s.T?(i.destroy(!0),i.texture&&i.texture instanceof s.T&&this.map.painter.saveTileTexture(i.texture)):i.destroy(),c&&c()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class ul extends To{constructor(i,c,f,v){super(i,c,f,v),this.type="raster-array",this.maxzoom=22,this.partial=!0,this._options=s.h({type:"raster-array"},c)}triggerRepaint(i){const c=this.map.painter._terrain,f=this.map.style.getSourceCache(this.id);c&&c.enabled&&f&&c._clearRenderCacheForTile(f.id,i.tileID),this.map.triggerRepaint()}loadTile(i,c){const f=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),v=this.map._requestManager.transformRequest(f,s.R.Tile),b={request:v,uid:i.uid,tileID:i.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};i.source=this.id,i.scope=this.scope,i.requestParams=v,i.actor||(i.actor=this.dispatcher.getActor());const w=(k,I,L,O)=>{if(delete i.request,i.aborted)return i.state="unloaded",c(null);if(k)return k.name==="AbortError"?void 0:(i.state="errored",c(k));if(this.map._refreshExpiredTiles&&I&&i.setExpiryData({cacheControl:L,expires:O}),this.partial)i.state="empty";else{if(!I)return c(null);i.state="loaded",i._isHeaderLoaded=!0,i._mrt=I}c(null)};i.request=this.partial?i.fetchHeader(void 0,w.bind(this)):i.actor.send("loadTile",b,w.bind(this),void 0,!0)}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(i,c){const f=i.texture;f&&f instanceof s.T?(i.destroy(!0),this.map.painter.saveTileTexture(f)):(i.destroy(),i.flushQueues(),i._isHeaderLoaded=!1,delete i._mrt,delete i.textureDescriptor),i.fbo&&(i.fbo.destroy(),delete i.fbo),delete i.request,delete i.requestParams,delete i.neighboringTiles,i.state="unloaded"}prepareTile(i,c,f){i._isHeaderLoaded&&(i.state!=="empty"&&(i.state="reloading"),i.fetchBand(c,f,(v,b)=>{if(v)return i.state="errored",this.fire(new s.z(v)),void this.triggerRepaint(i);b&&(i._isHeaderLoaded=!0,i.setTexture(b,this.map.painter),i.state="loaded",this.triggerRepaint(i))}))}getInitialBand(i){if(!this.rasterLayers)return 0;const c=this.rasterLayers.find(({id:b})=>b===i),f=c&&c.fields,v=f&&f.bands&&f.bands;return v?v[0]:0}getTextureDescriptor(i,c,f){if(!i)return;const v=c.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!v)return;let b=null;c instanceof s.aN?b=c.paint.get("raster-array-band"):c instanceof s.aO&&(b=c.paint.get("raster-particle-array-band"));const w=b||this.getInitialBand(v);if(w!=null)if(i.textureDescriptor){if(!i.updateNeeded(v,w)||f)return Object.assign({},i.textureDescriptor,{texture:i.texture})}else this.prepareTile(i,v,w)}getImages(i,c){const f=new Map;for(const v of i)for(const b of c){const[w,k]=b.split("/"),I=v.getLayer(w);if(!I||!I.hasBand(k)||!I.hasDataForBand(k))continue;const{bytes:L,tileSize:O,buffer:N}=I.getBandView(k),F=O+2*N,V={data:new s.r({width:F,height:F},L),pixelRatio:2,sdf:!1,usvg:!1,version:0};f.set(b,V)}return f}}const Lh={vector:rd,raster:To,"raster-dem":class extends To{constructor(p,i,c,f){super(p,i,c,f),this.type="raster-dem",this.maxzoom=22,this._options=s.h({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(p,i){const c=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function f(v,b){v&&(p.state="errored",i(v)),b&&(p.dem=b,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",i(null))}p.request=s.o(this.map._requestManager.transformRequest(c,s.R.Tile),(function(v,b,w,k){if(delete p.request,p.aborted)p.state="unloaded",i(null);else if(v)p.state="errored",i(v);else if(b){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:w,expires:k});const I=ImageBitmap&&b instanceof ImageBitmap&&s.t(),L=1-(b.width-s.aL(b.width))/2;L<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const O=I?b:s.q.getImageData(b,L),N={uid:p.uid,tileID:p.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:O,encoding:this.encoding,padding:L};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadTile",N,f.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(p){const i=p.canonical,c=Math.pow(2,i.z),f=(i.x-1+c)%c,v=i.x===0?p.wrap-1:p.wrap,b=(i.x+1+c)%c,w=i.x+1===c?p.wrap+1:p.wrap,k={};return k[new s.aM(p.overscaledZ,v,i.z,f,i.y).key]={backfilled:!1},k[new s.aM(p.overscaledZ,w,i.z,b,i.y).key]={backfilled:!1},i.y>0&&(k[new s.aM(p.overscaledZ,v,i.z,f,i.y-1).key]={backfilled:!1},k[new s.aM(p.overscaledZ,p.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},k[new s.aM(p.overscaledZ,w,i.z,b,i.y-1).key]={backfilled:!1}),i.y+1<c&&(k[new s.aM(p.overscaledZ,v,i.z,f,i.y+1).key]={backfilled:!1},k[new s.aM(p.overscaledZ,p.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},k[new s.aM(p.overscaledZ,w,i.z,b,i.y+1).key]={backfilled:!1}),k}},"raster-array":ul,geojson:class extends s.E{constructor(p,i,c,f){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(f),this._data=i.data,this._options=s.h({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.minzoom!==void 0&&(this.minzoom=i.minzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const v=s.aj/this.tileSize;this.workerOptions=s.h({source:this.id,scope:this.scope,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(i.buffer!==void 0?i.buffer:128)*v,tolerance:(i.tolerance!==void 0?i.tolerance:.375)*v,extent:s.aj,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:s.aj,radius:(i.clusterRadius!==void 0?i.clusterRadius:50)*v,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter,dynamic:i.dynamic},i.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}updateData(p){if(!this._options.dynamic)return this.fire(new s.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof p!="string"&&(p.type==="Feature"&&(p={type:"FeatureCollection",features:[p]}),p.type!=="FeatureCollection"))return this.fire(new s.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof p!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const i=new Map;for(const c of this._data.features)i.set(c.id,c);for(const c of p.features)i.set(c.id,c);this._data.features=[...i.values()]}else this._data=p;return this._updateWorkerData(!0),this}getClusterExpansionZoom(p,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id,scope:this.scope},i),this}getClusterChildren(p,i){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id,scope:this.scope},i),this}getClusterLeaves(p,i,c,f){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:p,limit:i,offset:c},f),this}_updateWorkerData(p=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.A("dataloading",{dataType:"source"})),this._loaded=!1;const i=s.h({append:p},this.workerOptions);i.scope=this.scope;const c=this._data;typeof c=="string"?(i.request=this.map._requestManager.transformRequest(s.q.resolveURL(c),s.R.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,i,(f,v)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new s.z(f));else{const b={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&v&&v.resourceTiming&&v.resourceTiming[this.id]&&(b.resourceTiming=v.resourceTiming[this.id]),p&&(this._partialReload=!0),this.fire(new s.A("data",b)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(p),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const p=s.C(this.id,this.scope);this.map.style.clearSource(p),this._updateWorkerData()}loadTile(p,i){const c=p.actor?"reloadTile":"loadTile";p.actor=this.actor;const f=this.map.style?this.map.style.getLut(this.scope):null,v=f?{image:f.image.clone()}:null,b=this._partialReload,w={type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:v,scope:this.scope,pixelRatio:s.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:p.isExtraShadowCaster,scaleFactor:this.map.getScaleFactor(),partial:b,worldview:this.map.getWorldview()};p.request=this.actor.send(c,w,(k,I)=>b&&!I?(p.state="loaded",i(null)):(delete p.request,p.destroy(),p.aborted?i(null):k?i(k):(p.loadVectorData(I,this.map.painter,c==="reloadTile"),i(null))),void 0,c==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p,i){this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id,scope:this.scope}),p.destroy()}onRemove(p){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.h({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends s.aP{constructor(p,i,c,f){super(p,i,c,f),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const i of p.urls)this.urls.push(this.map._requestManager.transformRequest(i,s.R.Source).url);s.aQ(this.urls,(i,c)=>{this._loaded=!0,i?this.fire(new s.z(i)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const i=this.video.seekable;p<i.start(0)||p>i.end(0)?this.fire(new s.z(new s.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,i=p.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(p,this.video,i.RGBA8),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:s.aP,model:class extends s.E{constructor(p,i,c,f){super(),this.id=p,this.type="model",this.models=[],this._loaded=!1,this._options=i}load(){const p=[];for(const i in this._options.models){const c=this._options.models[i],f=s.aS(this.map._requestManager.transformRequest(c.uri,s.R.Model).url).then(v=>{if(!v)return;const b=s.aT(v),w=new s.aU(i,c.position,c.orientation,b);w.computeBoundsAndApplyParent(),this.models.push(w)}).catch(v=>{this.fire(new s.z(new Error(`Could not load model ${i} from ${c.uri}: ${v.message}`)))});p.push(f)}Promise.allSettled(p).then(()=>{this._loaded=!0,this.fire(new s.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(i=>{this._loaded=!0,this.fire(new s.z(new Error(`Could not load models: ${i.message}`)))})}onAdd(p){this.map=p,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(p,i){}serialize(){return this._options}},"batched-model":class extends s.E{constructor(p,i,c,f){super(),this.type="batched-model",this.id=p,this.tileSize=512,this._options=i,this.tiles=this._options.tiles,this.maxzoom=i.maxzoom||19,this.minzoom=i.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=c,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(f)}onAdd(p){this.map=p,this.load()}reload(){this.cancelTileJSONRequest();const p=s.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(p))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(p){this._loaded=!1,this.fire(new s.A("dataloading",{dataType:"source"}));const i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,c=this.map.getWorldview();this._tileJSONRequest=_o(this._options,this.map._requestManager,i,c,(f,v)=>{this._tileJSONRequest=null,this._loaded=!0,f?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${i}`),c&&c.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${c}`),this.fire(new s.z(f))):v&&(s.h(this,v),v.bounds&&(this.tileBounds=new Vo(v.bounds,this.minzoom,this.maxzoom)),Or(v.tiles,this.map._requestManager._customAccessToken),this.fire(new s.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.A("data",{dataType:"source",sourceDataType:"content"}))),p&&p(f)})}hasTransition(){return!1}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}loaded(){return this._loaded}loadTile(p,i){const c=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),f={request:this.map._requestManager.transformRequest(c,s.R.Tile),data:void 0,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:p.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:s.q.devicePixelRatio,promoteId:this.promoteId};if(p.actor&&p.state!=="expired")if(p.state==="loading")p.reloadCallback=i;else{if(p.buckets){const b=Object.values(p.buckets);for(const w of b)w.dirty=!0;return void(p.state="loaded")}p.request=p.actor.send("reloadTile",f,v.bind(this))}else p.actor=this.dispatcher.getActor(),p.request=p.actor.send("loadTile",f,v.bind(this),void 0,!0);function v(b,w){return p.aborted?i(null):b&&b.status!==404?i(b):(this.map._refreshExpiredTiles&&w&&p.setExpiryData(w),p.loadModelData(w,this.map.painter),p.state="loaded",void i(null))}}serialize(){return s.h({},this._options)}},canvas:class extends s.aP{constructor(p,i,c,f){super(p,i,c,f),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(b=>typeof b!="number"))||this.fire(new s.z(new s.V(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.z(new s.V(`sources.${p}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new s.z(new s.V(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof HTMLCanvasElement||this.fire(new s.z(new s.V(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.z(new s.V(`sources.${p}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(p){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const i=this.map.painter.context;this.texture?!p&&!this._playing||this.texture instanceof s.aR||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.T(i,this.canvas,i.gl.RGBA8,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends s.E{constructor(p,i,c,f){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=i,this.setEventedParent(f),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Vo(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),s.h(this,s.aF(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.aF(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this.map=p,this._loaded=!1,this.fire(new s.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:i,y:c,z:f}=p.canonical;return this._implementation.hasTile({x:i,y:c,z:f})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,i){const{x:c,y:f,z:v}=p.tileID.canonical,b=new AbortController;p.request=Promise.resolve(this._implementation.loadTile({x:c,y:f,z:v},{signal:b.signal})).then((function(w){return delete p.request,p.aborted?(p.state="unloaded",i(null)):w===void 0?(p.state="errored",i(null)):w===null?(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",i(null)):function(k){return k instanceof ImageData||k instanceof HTMLCanvasElement||k instanceof ImageBitmap||k instanceof HTMLImageElement}(w)?(this.loadTileData(p,w),p.state="loaded",void i(null)):(p.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(w=>{w.name!=="AbortError"&&(p.state="errored",i(w))}),p.request.cancel=()=>b.abort()}loadTileData(p,i){p.setTexture(i,this.map.painter)}unloadTile(p,i){if(p.texture&&p.texture instanceof s.T?(p.destroy(!0),p.texture&&p.texture instanceof s.T&&this.map.painter.saveTileTexture(p.texture)):p.destroy(),this._implementation.unloadTile){const{x:c,y:f,z:v}=p.tileID.canonical;this._implementation.unloadTile({x:c,y:f,z:v})}i&&i()}abortTile(p,i){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),i&&i()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_clearTiles(){const p=s.C(this.id,this.scope);this.map.style.clearSource(p)}_update(){this.fire(new s.A("data",{dataType:"source",sourceDataType:"content"}))}}},id=function(p,i,c,f){const v=new Lh[i.type](p,i,c,f);if(v.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${v.id}`);return s.aV(["load","abort","unload","serialize","prepare"],v),v};function od(p,i,c=""){return`${c}:${i.id||""}:${i.layer.id}:${function(f){if("layerId"in f)return`layer:${f.layerId}`;{const{featuresetId:v,importId:b}=f;return`featureset:${v}${b?`:import:${b}`:""}`}}(p.target)}`}function Oh(p,i,c,f=""){if(p.uniqueFeatureID){const v=od(p,i,f);if(c.has(v))return!0;c.add(v)}return!1}function zh(p,i,c,f,v=!1){const b=i.sourceCache.transform,w=i.sourceCache.tilesIn(p,i.has3DLayers,v);w.sort(Bh);const k=[];for(const I of w){const L=I.tile.queryRenderedFeatures(i,I,c,f,b,v);Object.keys(L).length&&k.push({wrappedTileID:I.tile.tileID.wrapped().key,queryResults:L})}return k.length===0?{}:function(I){const L={},O={};for(const N of I){const F=N.queryResults,V=N.wrappedTileID,Z=O[V]=O[V]||{};for(const G in F){const Y=F[G],ee=Z[G]=Z[G]||{},ae=L[G]=L[G]||[];for(const ve of Y)ee[ve.featureIndex]||(ee[ve.featureIndex]=!0,ae.push(ve))}}return L}(k)}function Jl(p,i,c,f,v,b){const w={},k=f.queryRenderedSymbols(p),I=[];for(const L of Object.keys(k).map(Number))I.push(v[L]);I.sort(Bh);for(const L of I){const O=L.featureIndex.lookupSymbolFeatures(k[L.bucketInstanceId],L.bucketIndex,L.sourceLayerIndex,i,c,b);for(const N in O){const F=w[N]=w[N]||[],V=O[N];V.sort((Z,G)=>{const Y=L.featureSortOrder;if(Y){const ee=Y.indexOf(Z.featureIndex);return Y.indexOf(G.featureIndex)-ee}return G.featureIndex-Z.featureIndex});for(const Z of V)F.push(Z)}}return w}function sd(p,i){const c=p.getRenderableIds().map(b=>p.getTileByID(b)),f=[],v={};for(let b=0;b<c.length;b++){const w=c[b],k=w.tileID.canonical.key;v[k]||(v[k]=!0,w.querySourceFeatures(f,i))}return f}function Bh(p,i){const c=p.tileID,f=i.tileID;return c.overscaledZ-f.overscaledZ||c.canonical.y-f.canonical.y||c.wrap-f.wrap||c.canonical.x-f.canonical.x}function Js(p,i){const c={};if(!i)return c;for(const f of p){const v=f.layerIds.map(b=>i.getLayer(b)).filter(Boolean);if(v.length!==0){f.layers=v,f.stateDependentLayerIds&&(f.stateDependentLayers=f.stateDependentLayerIds.map(b=>v.filter(w=>w.id===b)[0]));for(const b of v)c[b.fqid]=f}}return c}const Ss=32,Bs=33,La=new Uint16Array(8184);for(let p=0;p<2046;p++){let i=p+2,c=0,f=0,v=0,b=0,w=0,k=0;for(1&i?v=b=w=Ss:c=f=k=Ss;(i>>=1)>1;){const L=c+v>>1,O=f+b>>1;1&i?(v=c,b=f,c=w,f=k):(c=v,f=b,v=w,b=k),w=L,k=O}const I=4*p;La[I+0]=c,La[I+1]=f,La[I+2]=v,La[I+3]=b}const Qs=new Uint16Array(2178),Oa=new Uint8Array(1089),ad=new Uint16Array(1089);function pa(p){return p===0?-.03125:p===32?.03125:0}const ld={type:2,extent:s.aj,loadGeometry:()=>[[new s.P(0,0),new s.P(s.aj+1,0),new s.P(s.aj+1,s.aj+1),new s.P(0,s.aj+1),new s.P(0,0)]]};class Ql{constructor(i,c,f,v,b,w){this.tileID=i,this.uid=s.a$(),this.uses=0,this.tileSize=c,this.tileZoom=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=b,v&&v.style&&(this._lastUpdatedBrightness=v.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",v&&v.transform&&(this.projection=v.transform.projection),this.worldview=w}registerFadeDuration(i){const c=i+this.timeAdded;c<s.q.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=s.aW(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,c,f){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=Js(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const b=this.buckets[v];if(b instanceof s.b1){if(this.hasSymbolBuckets=!0,!f)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const b=this.buckets[v];if(b instanceof s.b1&&b.hasRTLText){this.hasRTLText=!0,s.b2();break}}this.queryPadding=0;for(const v in this.buckets){const b=this.buckets[v],w=c.style.getOwnLayer(v);if(!w)continue;const k=w.queryRadius(b);this.queryPadding=Math.max(this.queryPadding,k)}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas),this._lastUpdatedBrightness=i.brightness}else this.collisionBoxArray=new s.b0}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(i,c,f){i&&(i.resourceTiming&&(this.resourceTiming=i.resourceTiming),this.buckets=Object.assign({},this.buckets,Js(i.buckets,c.style)),i.featureIndex&&(this.latestFeatureIndex=i.featureIndex))}getBucket(i){return this.buckets[i.fqid]}upload(i){for(const v in this.buckets){const b=this.buckets[v];b.uploadPending()&&b.upload(i)}const c=i.gl,f=this.imageAtlas;f&&!f.uploaded&&(this.imageAtlasTexture=new s.T(i,f.image,c.RGBA8,{useMipmap:!!f.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(i,this.glyphAtlasImage,c.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new s.T(i,this.lineAtlas.image,c.R8),this.lineAtlas.uploaded=!0)}prepare(i,c,f){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture,f),!c||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const v=c.style.getBrightness();(this._lastUpdatedBrightness||v)&&(this._lastUpdatedBrightness&&v&&Math.abs(this._lastUpdatedBrightness-v)<.001||(this.updateBuckets(c,this._lastUpdatedBrightness!==v),this._lastUpdatedBrightness=v))}queryRenderedFeatures(i,c,f,v,b,w){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const k=function(I,L){const O=s.bn([],[.5*I.width,.5*-I.height,1]);return s.bo(O,O,[1,-1,0]),s.az(O,O,I.calculateProjMatrix(L.toUnwrapped())),Float32Array.from(O)}(b,this.tileID);return this.latestFeatureIndex.query(i,{tilespaceGeometry:c,pixelPosMatrix:k,transform:v,availableImages:f,tileTransform:this.tileTransform,worldview:this.worldview})}querySourceFeatures(i,c){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const v=f.loadVTLayers(),b=c?c.sourceLayer:"",w=v._geojsonTileLayer||v[b];if(!w)return;const k=s.b3(c&&c.filter),{z:I,x:L,y:O}=this.tileID.canonical,N={z:I,x:L,y:O};for(let F=0;F<w.length;F++){const V=w.feature(F);if(k.needGeometry){const Y=s.b4(V,!0);if(!k.filter(new s.aa(this.tileID.overscaledZ,{worldview:this.worldview}),Y,this.tileID.canonical))continue}else if(!k.filter(new s.aa(this.tileID.overscaledZ,{worldview:this.worldview}),V))continue;const Z=f.getId(V,b),G=new s.b5(V,I,L,O,Z);G.tile=N,i.push(G)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const f=s.b6(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let v=!1;if(this.expirationTime>f)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const b=this.expirationTime-c;b?this.expirationTime=f+Math.max(b,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(i){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&i&&this.updateBuckets(i)}updateBuckets(i,c){if(!this.latestFeatureIndex||!i.style)return;const f=this.latestFeatureIndex.loadVTLayers(),v=i.style.listImages(),b=i.style.getBrightness();for(const w in this.buckets){if(!i.style.hasLayer(w))continue;const k=this.buckets[w],I=k.layers[0],L=I.sourceLayer||"_geojsonTileLayer",O=f[L],N=i.style.getLayerSourceCache(I);let F={};N&&(F=N._state.getState(L,void 0));const V=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},Z=Object.keys(F).length>0&&!c;Z&&!k.stateDependentLayers.length&&!c||k.update(F,O,v,V,Z?k.stateDependentLayers:k.layers,c,b),(k instanceof s.b7||k instanceof s.b8)&&i._terrain&&i._terrain.enabled&&N&&k.uploadPending()&&i._terrain._clearRenderCacheForTile(N.id,this.tileID);const G=i&&i.style&&i.style.getOwnLayer(w);G&&(this.queryPadding=Math.max(this.queryPadding,G.queryRadius(k)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=s.q.now()+i}setTexture(i,c){const f=c.context,v=f.gl;this.texture=this.texture||c.getTileTexture(i.width),this.texture&&this.texture instanceof s.T?this.texture.update(i):(this.texture=new s.T(f,i,v.RGBA8,{useMipmap:!0}),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE))}setDependencies(i,c){const f={};for(const v of c)f[v]=!0;this.dependencies[i]=f}hasDependency(i,c){for(const f of i){const v=this.dependencies[f];if(v){for(const b of c)if(v[b])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,c){if(!c||c.name==="mercator"||this._tileDebugBuffer)return;const f=s.b9(ld,this.tileID.canonical,this.tileTransform)[0],v=new s.ba,b=new s.bb;for(let w=0;w<f.length;w++){const{x:k,y:I}=f[w];v.emplaceBack(k,I),b.emplaceBack(w)}b.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(b),this._tileDebugBuffer=i.createVertexBuffer(v,s.bc.members),this._tileDebugSegments=s.bd.simpleSegment(0,0,v.length,b.length)}_makeTileBoundsBuffers(i,c){if(this._tileBoundsBuffer||!c||c.name==="mercator")return;const f=s.b9(ld,this.tileID.canonical,this.tileTransform)[0];let v,b;if(this.isRaster){const w=function(k,I){const L=s.aW(k,I),O=Math.pow(2,k.z);for(let Y=0;Y<Bs;Y++)for(let ee=0;ee<Bs;ee++){const ae=s.aX((k.x+(ee+pa(ee))/Ss)/O),ve=s.aY((k.y+(Y+pa(Y))/Ss)/O),we=I.project(ae,ve),Pe=Y*Bs+ee;Qs[2*Pe+0]=Math.round((we.x*L.scale-L.x)*s.aj),Qs[2*Pe+1]=Math.round((we.y*L.scale-L.y)*s.aj)}Oa.fill(0),ad.fill(0);for(let Y=2045;Y>=0;Y--){const ee=4*Y,ae=La[ee+0],ve=La[ee+1],we=La[ee+2],Pe=La[ee+3],Ee=ae+we>>1,ke=ve+Pe>>1,Se=Ee+ke-ve,Ae=ke+ae-Ee,De=ve*Bs+ae,Ze=Pe*Bs+we,Ye=ke*Bs+Ee,ht=Math.hypot((Qs[2*De+0]+Qs[2*Ze+0])/2-Qs[2*Ye+0],(Qs[2*De+1]+Qs[2*Ze+1])/2-Qs[2*Ye+1])>=16;Oa[Ye]=Oa[Ye]||(ht?1:0),Y<1022&&(Oa[Ye]=Oa[Ye]||Oa[(ve+Ae>>1)*Bs+(ae+Se>>1)]||Oa[(Pe+Ae>>1)*Bs+(we+Se>>1)])}const N=new s.aZ,F=new s.a_;let V=0;function Z(Y,ee){const ae=ee*Bs+Y;return ad[ae]===0&&(N.emplaceBack(Qs[2*ae+0],Qs[2*ae+1],Y*s.aj/Ss,ee*s.aj/Ss),ad[ae]=++V),ad[ae]-1}function G(Y,ee,ae,ve,we,Pe){const Ee=Y+ae>>1,ke=ee+ve>>1;if(Math.abs(Y-we)+Math.abs(ee-Pe)>1&&Oa[ke*Bs+Ee])G(we,Pe,Y,ee,Ee,ke),G(ae,ve,we,Pe,Ee,ke);else{const Se=Z(Y,ee),Ae=Z(ae,ve),De=Z(we,Pe);F.emplaceBack(Se,Ae,De)}}return G(0,0,Ss,Ss,Ss,0),G(Ss,Ss,0,0,0,Ss),{vertices:N,indices:F}}(this.tileID.canonical,c);v=w.vertices,b=w.indices}else{v=new s.aZ,b=new s.a_;for(const{x:k,y:I}of f)v.emplaceBack(k,I,0,0);const w=s.be(v.int16.subarray(0,4*v.length),void 0,4);for(let k=0;k<w.length;k+=3)b.emplaceBack(w[k],w[k+1],w[k+2])}this._tileBoundsBuffer=i.createVertexBuffer(v,s.bf.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(b),this._tileBoundsSegments=s.bd.simpleSegment(0,0,v.length,b.length)}_makeGlobeTileDebugBuffers(i,c){const f=c.projection;if(!f||f.name!=="globe"||c.freezeTileCoverage)return;const v=this.tileID.canonical,b=s.bg(v,c),w=s.bh(b),k=s.ah(c.zoom);let I;k>0&&(I=s.bi(new Float64Array(16),c.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,v,c,w,I,k),this._makeGlobeTileDebugTextBuffer(i,v,c,w,I,k)}_globePoint(i,c,f,v,b,w,k){let I=s.bj(i,c,f);if(w){const L=1<<f.z,O=s.aD(v.center.lng),N=s.aH(v.center.lat),F=(f.x+.5)/L-O;let V=0;F>.5?V=-1:F<-.5&&(V=1);let Z=(i/s.aj+f.x)/L+V,G=(c/s.aj+f.y)/L;Z=(Z-O)*v._pixelsPerMercatorPixel+O,G=(G-N)*v._pixelsPerMercatorPixel+N;const Y=[Z*v.worldSize,G*v.worldSize,0];s.ad(Y,Y,w),I=s.bk(I,Y,k)}return s.ad(I,I,b)}_makeGlobeTileDebugBorderBuffer(i,c,f,v,b,w){const k=new s.ba,I=new s.bb,L=new s.bl,O=(F,V,Z,G,Y)=>{const ee=(Z-F)/(Y-1),ae=(G-V)/(Y-1),ve=k.length;for(let we=0;we<Y;we++){const Pe=F+we*ee,Ee=V+we*ae;k.emplaceBack(Pe,Ee);const ke=this._globePoint(Pe,Ee,c,f,v,b,w);L.emplaceBack(ke[0],ke[1],ke[2]),I.emplaceBack(ve+we)}},N=s.aj;O(0,0,N,0,16),O(N,0,N,N,16),O(N,N,0,N,16),O(0,N,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(I),this._tileDebugBuffer=i.createVertexBuffer(k,s.bc.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(L,s.bm.members),this._tileDebugSegments=s.bd.simpleSegment(0,0,k.length,I.length)}_makeGlobeTileDebugTextBuffer(i,c,f,v,b,w){const k=s.aj/4,I=new s.ba,L=new s.a_,O=new s.bl,N=25;L.reserve(32),I.reserve(N),O.reserve(N);const F=(V,Z)=>N*V+Z;for(let V=0;V<N;V++){const Z=V*k;for(let G=0;G<N;G++){const Y=G*k;I.emplaceBack(Y,Z);const ee=this._globePoint(Y,Z,c,f,v,b,w);O.emplaceBack(ee[0],ee[1],ee[2])}}for(let V=0;V<4;V++)for(let Z=0;Z<4;Z++){const G=F(V,Z),Y=F(V,Z+1),ee=F(V+1,Z),ae=F(V+1,Z+1);L.emplaceBack(G,Y,ee),L.emplaceBack(ee,Y,ae)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(L),this._tileDebugTextBuffer=i.createVertexBuffer(I,s.bc.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(O,s.bm.members),this._tileDebugTextSegments=s.bd.simpleSegment(0,0,N,32)}destroy(i=!1){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!i&&this.texture&&this.texture instanceof s.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}s.bp.setPbf(s.bq);class Vc extends Ql{constructor(i,c,f,v,b){super(i,c,f,v,b),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(i){return this._mrt&&this._mrt.getLayer(i)}setTexture(i,c){const f=c.context,v=f.gl;this.texture=this.texture||c.getTileTexture(i.width),this.texture&&this.texture instanceof s.T?this.texture.update(i,{premultiply:!1}):this.texture=new s.T(f,i,v.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(i=16384,c){const f=this._mrt=new s.bp(30),v=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(i-1)}});return this.entireBuffer=null,this.request=s.br(v,(b,w,k,I)=>{if(b)c(b);else try{const L=f.getHeaderLength(w);if(L>i)return void(this.request=this.fetchHeader(L,c));f.parseHeader(w),this._isHeaderLoaded=!0;let O=0;for(const N of Object.values(f.layers))O=Math.max(O,N.dataIndex[N.dataIndex.length-1].lastByte);w.byteLength>=O&&(this.entireBuffer=w),c(null,this.entireBuffer||w,k,I)}catch(L){c(L)}}),this.request}fetchBand(i,c,f){const v=this._mrt;if(!this._isHeaderLoaded||!v)return void f(new Error("Tile header is not ready"));const b=this.actor;if(!b)return void f(new Error("Can't fetch tile band without an actor"));let w;const k=(N,F)=>{w.complete(N,F),N?f(N):(this.updateTextureDescriptor(i,c),f(null,this.textureDescriptor&&this.textureDescriptor.img))},I=(N,F)=>{if(N)return f(N);const V=b.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:F,task:w},k,void 0,!0);this._workQueue.push(()=>{V&&V.cancel(),w.cancel()})},L=v.getLayer(i);if(!L)return void f(new Error(`Unknown sourceLayer "${i}"`));if(L.hasDataForBand(c))return this.updateTextureDescriptor(i,c),void f(null,this.textureDescriptor?this.textureDescriptor.img:null);const O=L.getDataRange([c]);if(w=v.createDecodingTask(O),!w||w.tasks.length)if(this.flushQueues(),this.entireBuffer)I(null,this.entireBuffer.slice(O.firstByte,O.lastByte+1));else{const N=Object.assign({},this.requestParams,{headers:{Range:`bytes=${O.firstByte}-${O.lastByte}`}}),F=s.br(N,I);this._fetchQueue.push(()=>{F.cancel(),w.cancel()})}else f(null)}updateNeeded(i,c){return(!this.textureDescriptor||this.textureDescriptor.band!==c||this.textureDescriptor.layer!==i)&&this.state!=="errored"}updateTextureDescriptor(i,c){if(!this._mrt)return;const f=this._mrt.getLayer(i);if(!f||!f.hasBand(c)||!f.hasDataForBand(c))return;const{bytes:v,tileSize:b,buffer:w,offset:k,scale:I}=f.getBandView(c),L=b+2*w,O=new s.r({width:L,height:L},v),N=this.texture;N&&N instanceof s.T&&N.update(O,{premultiply:!1}),this.textureDescriptor={layer:i,band:c,img:O,buffer:w,offset:k,tileSize:b,format:f.pixelFormat,mix:[I,256*I,65536*I,16777216*I]}}}class Ff{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,f){const v=i.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const b={value:c,timeout:void 0};if(f!==void 0&&(b.timeout=setTimeout(()=>{this.remove(i,b)},f)),this.data[v].push(b),this.order.push(v),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const f=i.wrapped().key,v=c===void 0?0:this.data[f].indexOf(c),b=this.data[f][v];return this.data[f].splice(v,1),b.timeout&&clearTimeout(b.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(b.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const f in this.data)for(const v of this.data[f])i(v.value)||c.push(v);for(const f of c)this.remove(f.value.tileID,f)}}class $f{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,f){const v=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][v]=this.stateChanges[i][v]||{},s.h(this.stateChanges[i][v],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const b in this.state[i])b!==v&&(this.deletedStates[i][b]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][v]===null){this.deletedStates[i][v]={};for(const b in this.state[i][v])f[b]||(this.deletedStates[i][v][b]=null)}else for(const b in f)this.deletedStates[i]&&this.deletedStates[i][v]&&this.deletedStates[i][v][b]===null&&delete this.deletedStates[i][v][b]}removeFeatureState(i,c,f){if(this.deletedStates[i]===null)return;const v=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&c!==void 0)this.deletedStates[i][v]!==null&&(this.deletedStates[i][v]=this.deletedStates[i][v]||{},this.deletedStates[i][v][f]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][v])for(f in this.deletedStates[i][v]={},this.stateChanges[i][v])this.deletedStates[i][v][f]=null;else this.deletedStates[i][v]=null;else this.deletedStates[i]=null}getState(i,c){const f=this.state[i]||{},v=this.stateChanges[i]||{},b=this.deletedStates[i];if(b===null)return{};if(c!==void 0){const k=String(c),I=s.h({},f[k],v[k]);if(b){const L=b[c];if(L===null)return{};for(const O in L)delete I[O]}return I}const w=s.h({},f,v);if(b)for(const k in b)delete w[k];return w}initializeTileState(i,c){i.refreshFeatureState(c)}coalesceChanges(i,c){const f={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const b={};for(const w in this.stateChanges[v])this.state[v][w]||(this.state[v][w]={}),s.h(this.state[v][w],this.stateChanges[v][w]),b[w]=this.state[v][w];f[v]=b}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const b={};if(this.deletedStates[v]===null)for(const w in this.state[v])b[w]={},this.state[v][w]={};else for(const w in this.deletedStates[v]){if(this.deletedStates[v][w]===null)this.state[v][w]={};else if(this.state[v][w])for(const k of Object.keys(this.deletedStates[v][w]))delete this.state[v][w][k];b[w]=this.state[v][w]}f[v]=f[v]||{},s.h(f[v],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const v in i)i[v].refreshFeatureState(c)}}class is extends s.E{constructor(i,c,f){super(),this.id=i,this._onlySymbols=f,c.on("data",v=>{v.dataType==="source"&&v.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),c.on("error",()=>{this._sourceErrored=!0}),this._source=c,this._tiles={},this._cache=new Ff(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=c.minTileCacheSize,this._maxTileCacheSize=c.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new $f,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles)if(!this._tiles[i].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,c){return i.isSymbolTile=this._onlySymbols,i.isExtraShadowCaster=this._shadowCasterTiles[i.tileID.key],this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i)}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i)}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const f=this._tiles[c];f.upload(i),f.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(ec).map(i=>i.key)}getRenderableIds(i,c){const f=[];for(const v in this._tiles)this._isIdRenderable(+v,i,c)&&f.push(this._tiles[v]);return i?f.sort((v,b)=>{const w=v.tileID,k=b.tileID,I=new s.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle),L=new s.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return w.overscaledZ-k.overscaledZ||L.y-I.y||L.x-I.x}).map(v=>v.tileID.key):f.map(v=>v.tileID).sort(ec).map(v=>v.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c,f){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())&&(f||!this._shadowCasterTiles[i])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,c){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=c),this._loadTile(f,this._tileLoaded.bind(this,f,i,c)))}_tileLoaded(i,c,f,v){if(v)if(i.state="errored",v.status!==404)this._source.fire(new s.z(v,{tile:i}));else{if(this._source.fire(new s.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:i})),!(i.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const b=this.map.painter.terrain;this.update(this.transform,b.getScaledDemTileSize(),!0),b.resetTileLookupCache(this.id)}else this.update(this.transform)}else i.timeAdded=s.q.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new s.A("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const c=this.getRenderableIds();for(let v=0;v<c.length;v++){const b=c[v];if(i.neighboringTiles&&i.neighboringTiles[b]){const w=this.getTileByID(b);f(i,w),f(w,i)}}function f(v,b){if(!v.dem||v.dem.borderReady)return;v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0;let w=b.tileID.canonical.x-v.tileID.canonical.x;const k=b.tileID.canonical.y-v.tileID.canonical.y,I=Math.pow(2,v.tileID.canonical.z),L=b.tileID.key;w===0&&k===0||Math.abs(k)>1||(Math.abs(w)>1&&(Math.abs(w+I)===1?w+=I:Math.abs(w-I)===1&&(w-=I)),b.dem&&v.dem&&(v.dem.backfillBorder(b.dem,w,k),v.neighboringTiles&&v.neighboringTiles[L]&&(v.neighboringTiles[L].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,f,v){for(const b in this._tiles){let w=this._tiles[b];if(v[b]||!w.hasData()||w.tileID.overscaledZ<=c||w.tileID.overscaledZ>f)continue;let k=w.tileID;for(;w&&w.tileID.overscaledZ>c+1;){const L=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[L.key],w&&w.hasData()&&(k=L)}let I=k;for(;I.overscaledZ>c;)if(I=I.scaledTo(I.overscaledZ-1),i[I.key]){v[k.key]=k;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=c?f:null}for(let f=i.overscaledZ-1;f>=c;f--){const v=i.scaledTo(f),b=this._getLoadedTile(v);if(b)return b}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,c){c=c||this._source.tileSize;const f=Math.ceil(i.width/c)+1,v=Math.ceil(i.height/c)+1,b=Math.floor(f*v*5),w=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,b):b,k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(k)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const f={};for(const v in this._tiles){const b=this._tiles[v];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+c),f[b.tileID.key]=b}this._tiles=f;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(+v,this._tiles[v])}}update(i,c,f,v,b){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!f)return;this.updateCacheSize(i,c),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const w=this._source.type==="batched-model";let k,I=this._source.maxzoom;const L=this.map&&this.map.painter?this.map.painter._terrain:null;if(L&&L.sourceCache===this&&L.attenuationRange()){const F=L.attenuationRange()[0],V=Math.floor(F)-Math.log2(L.getDemUpscale());I>V&&(I=V)}if(this.used||this.usedForTerrain){if(this._source.tileID)k=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new s.aM(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y));else if(this.tileCoverLift!==0){const F=i.clone();F.tileCoverLift=this.tileCoverLift,k=F.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:I,roundZoom:this._source.roundZoom&&!f,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:w}),this._source.minzoom<=1&&i.projection.name==="globe"&&(k.push(new s.aM(1,0,1,0,0)),k.push(new s.aM(1,0,1,1,0)),k.push(new s.aM(1,0,1,0,1)),k.push(new s.aM(1,0,1,1,1)))}else if(k=i.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:I,roundZoom:this._source.roundZoom&&!f,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:w}),this._source.hasTile){const F=this._source.hasTile.bind(this._source);k=k.filter(V=>F(V))}}else k=[];if(k.length>0&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!cd(this._source.type)){const F=i.coveringZoomLevel({tileSize:c||this._source.tileSize,roundZoom:this._source.roundZoom&&!f}),V=Math.min(F,this._source.maxzoom);if(w){const Z=i.extendTileCover(k,V);for(const G of Z)k.push(G)}else if(b){const Z=i.extendTileCover(k,V,this.transform._camera.forward());for(const G of Z)k.push(G)}else if(this.castsShadows&&v){const Z=i.extendTileCover(k,V,v);for(const G of Z)this._shadowCasterTiles[G.key]=!0,k.push(G)}}const O=this._updateRetainedTiles(k);if(cd(this._source.type)&&k.length!==0){const F={},V={},Z=Object.keys(O);for(const Y of Z){const ee=O[Y],ae=this._tiles[Y];if(!ae||ae.fadeEndTime&&ae.fadeEndTime<=s.q.now())continue;const ve=this.findLoadedParent(ee,Math.max(ee.overscaledZ-is.maxOverzooming,this._source.minzoom));ve&&(this._addTile(ve.tileID),F[ve.tileID.key]=ve.tileID),V[Y]=ee}const G=k[k.length-1].overscaledZ;for(const Y in this._tiles){const ee=this._tiles[Y];if(O[Y]||!ee.hasData())continue;let ae=ee.tileID;for(;ae.overscaledZ>G;){ae=ae.scaledTo(ae.overscaledZ-1);const ve=this._tiles[ae.key];if(ve&&ve.hasData()&&V[ae.key]){O[Y]=ee.tileID;break}}}for(const Y in F)O[Y]||(this._coveredTiles[Y]=!0,O[Y]=F[Y])}for(const F in O)this._tiles[F].clearFadeHold();const N=s.bs(this._tiles,O);for(const F of N){const V=this._tiles[F];V.hasSymbolBuckets&&!V.holdingForFade()?V.setHoldDuration(this.map._fadeDuration):V.hasSymbolBuckets&&!V.symbolFadeFinished()||this._removeTile(+F)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const c={};if(i.length===0)return c;const f={},v=i.reduce((L,O)=>Math.min(L,O.overscaledZ),1/0),b=i[0].overscaledZ,w=Math.max(b-is.maxOverzooming,this._source.minzoom),k=Math.max(b+is.maxUnderzooming,this._source.minzoom),I={};for(const L of i){const O=this._addTile(L);c[L.key]=L,O.hasData()||v<this._source.maxzoom&&(I[L.key]=L)}this._retainLoadedChildren(I,v,k,c);for(const L of i){let O=this._tiles[L.key];if(O.hasData())continue;if(L.canonical.z>=this._source.maxzoom){const F=L.children(this._source.maxzoom)[0],V=this.getTile(F);if(V&&V.hasData()){c[F.key]=F;continue}}else{const F=L.children(this._source.maxzoom);if(c[F[0].key]&&c[F[1].key]&&c[F[2].key]&&c[F[3].key])continue}let N=O.wasRequested();for(let F=L.overscaledZ-1;F>=w;--F){const V=L.scaledTo(F);if(f[V.key]||(f[V.key]=!0,O=this.getTile(V),!O&&N&&(O=this._addTile(V)),O&&(c[V.key]=V,N=O.wasRequested(),O.hasData())))break}}return c}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let f,v=this._tiles[i].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){f=this._loadedParentTiles[v.key];break}c.push(v.key);const b=v.scaledTo(v.overscaledZ-1);if(f=this._getLoadedTile(b),f)break;v=b}for(const b of c)this._loadedParentTiles[b]=f}}_addTile(i){let c=this._tiles[i.key];if(c)return c.isExtraShadowCaster!==!0||this._shadowCasterTiles[i.key]||this._reloadTile(i.key,"reloading"),c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const f=!!c;if(!f){const v=this.map?this.map.painter:null,b=this._source.tileSize*i.overscaleFactor();c=this._source.type==="raster-array"?new Vc(i,b,this.transform.tileZoom,v,this._isRaster):new Ql(i,b,this.transform.tileZoom,v,this._isRaster,this._source.worldview),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))}return c.uses++,this._tiles[i.key]=c,f||this._source.fire(new s.A("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=c.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"||c.state==="empty"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,c,f){const v=[],b=this.transform;if(!b)return v;const w=b.projection.name==="globe",k=s.aD(b.center.lng);for(const I in this._tiles){const L=this._tiles[I];if(f&&L.clearQueryDebugViz(),L.holdingForFade())continue;let O;if(w){const N=L.tileID.canonical;if(N.z===0){const F=[Math.abs(s.ay(k,...jc(N,-1))-k),Math.abs(s.ay(k,...jc(N,1))-k)];O=[0,2*F.indexOf(Math.min(...F))-1]}else{const F=[Math.abs(s.ay(k,...jc(N,-1))-k),Math.abs(s.ay(k,...jc(N,0))-k),Math.abs(s.ay(k,...jc(N,1))-k)];O=[F.indexOf(Math.min(...F))-1]}}else O=[0];for(const N of O){const F=i.containsTile(L,b,c,N);F&&v.push(F)}}return v}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(i){return this._getRenderableCoordinates(i)}_getRenderableCoordinates(i,c){const f=this.getRenderableIds(i,c).map(b=>this._tiles[b].tileID),v=this.transform.projection.name==="globe";for(const b of f)b.projMatrix=this.transform.calculateProjMatrix(b.toUnwrapped()),b.expandedProjMatrix=v?this.transform.calculateProjMatrix(b.toUnwrapped(),!1,!0):b.projMatrix;return f}sortCoordinatesByDistance(i){const c=i.slice(),f=this.transform._camera.position,v=this.transform._camera.forward(),b={};for(const w of c){const k=1/(1<<w.canonical.z);b[w.key]=((w.canonical.x+.5)*k+w.wrap-f[0])*v[0]+((w.canonical.y+.5)*k-f[1])*v[1]-f[2]*v[2]}return c.sort((w,k)=>b[w.key]-b[k.key]),c}hasTransition(){if(this._source.hasTransition())return!0;if(cd(this._source.type))for(const i in this._tiles){const c=this._tiles[i];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=s.q.now())return!0}return!1}setFeatureState(i,c,f){this._state.updateState(i=i||"_geojsonTileLayer",c,f)}removeFeatureState(i,c,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,f)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,f){const v=this._tiles[i];v&&v.setDependencies(c,f)}reloadTilesForDependencies(i,c){for(const f in this._tiles)this._tiles[f].hasDependency(i,c)&&this._reloadTile(+f,"reloading");this._cache.filter(f=>!f.hasDependency(i,c))}_preloadTiles(i,c){if(!this._sourceLoaded){const I=()=>{this._sourceLoaded&&(this._source.off("data",I),this._preloadTiles(i,c))};return void this._source.on("data",I)}const f=new Map,v=Array.isArray(i)?i:[i],b=this.map.painter.terrain,w=this.usedForTerrain&&b?b.getScaledDemTileSize():this._source.tileSize;for(const I of v){const L=I.coveringTiles({tileSize:w,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const O of L)f.set(O.key,O);this.usedForTerrain&&I.updateElevation(!1)}const k=Array.from(f.values());s.bt(k,(I,L)=>{const O=new Ql(I,this._source.tileSize*I.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster,this._source.worldview);this._loadTile(O,N=>{this._source.type==="raster-dem"&&O.dem&&this._backfillDEM(O),L(N,O)})},c)}}function ec(p,i){const c=Math.abs(2*p.wrap)-+(p.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return p.overscaledZ-i.overscaledZ||f-c||i.canonical.y-p.canonical.y||i.canonical.x-p.canonical.x}function cd(p){return p==="raster"||p==="image"||p==="video"||p==="custom"}function jc(p,i){const c=1<<p.z;return[p.x/c+i,(p.x+1)/c+i]}is.maxOverzooming=10,is.maxUnderzooming=3;class h0{constructor(i){this.style=i,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const i=!1,c=!1;for(const f in this.style._mergedLayers){const v=this.style._mergedLayers[f];if(v.type==="fill-extrusion"||v.type==="building")this.layers.push({layer:v,visible:i,visibilityChanged:c});else if(v.type==="model"){const b=this.style.getLayerSource(v);b&&b.type==="batched-model"&&this.layers.push({layer:v,visible:i,visibilityChanged:c})}}}onNewFrame(i){this.layersGotHidden=!1;for(const c of this.layers){const f=c.layer;let v=!1;f.type==="fill-extrusion"?v=!f.isHidden(i)&&f.paint.get("fill-extrusion-opacity")>0:f.type==="building"?v=!f.isHidden(i)&&f.paint.get("building-opacity")>0:f.type==="model"&&(v=!f.isHidden(i)&&f.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!v&&c.visible,c.visible=v}}updateZOffset(i,c){this.currentBuildingBuckets=[];for(const v of this.layers){const b=v.layer,w=this.style.getLayerSourceCache(b);let k=1;b.type==="fill-extrusion"?k=v.visible?b.paint.get("fill-extrusion-vertical-scale"):0:b.type==="building"&&(k=v.visible?b.paint.get("building-vertical-scale"):0);let I=w?w.getTile(c):null;if(!I&&w&&c.canonical.z>w.getSource().minzoom){let L=c.scaledTo(Math.min(w.getSource().maxzoom,c.overscaledZ-1));for(;L.overscaledZ>=w.getSource().minzoom&&(I=w.getTile(L),!I&&L.overscaledZ!==0);)L=L.scaledTo(L.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:I?I.getBucket(b):null,tileID:I?I.tileID:c,verticalScale:k})}i.hasAnyZOffset=!1;let f=!1;for(let v=0;v<i.symbolInstances.length;v++){const b=i.symbolInstances.get(v),w=b.zOffset,k=this._getHeightAtTileOffset(c,b.tileAnchorX,b.tileAnchorY);b.zOffset=k!==Number.NEGATIVE_INFINITY?k:w,f||w===b.zOffset||(f=!0),i.hasAnyZOffset||b.zOffset===0||(i.hasAnyZOffset=!0)}f&&(i.zOffsetBuffersNeedUpload=!0,i.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(i,c,f,v){let b=c,w=f;if(i.canonical.z!==v.canonical.z){const k=v.canonical,I=1/(1<<i.canonical.z-k.z);b=(c+i.canonical.x*s.aj)*I-k.x*s.aj|0,w=(f+i.canonical.y*s.aj)*I-k.y*s.aj|0}return{tileX:b,tileY:w}}_getHeightAtTileOffset(i,c,f){let v,b;for(let w=0;w<this.layers.length;++w){const k=this.layers[w].layer;if(k.type!=="fill-extrusion"&&k.type!=="building")continue;const{bucket:I,tileID:L,verticalScale:O}=this.currentBuildingBuckets[w];if(!I)continue;const{tileX:N,tileY:F}=this._mapCoordToOverlappingTile(i,c,f,L),V=I.getHeightAtTileCoord(N,F);V&&V.height!==void 0&&(V.hidden?v=V.height:b=Math.max(V.height*O,b||0))}if(b!==void 0)return b;for(let w=0;w<this.layers.length;++w){const k=this.layers[w];if(k.layer.type!=="model"||!k.visible)continue;const{bucket:I,tileID:L}=this.currentBuildingBuckets[w];if(!I)continue;const{tileX:O,tileY:N}=this._mapCoordToOverlappingTile(i,c,f,L),F=I.getHeightAtTileCoord(O,N);if(F&&!F.hidden)return F.height===void 0&&v!==void 0?Math.min(F.maxHeight,v)*F.verticalScale:F.height?F.height*F.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function p0(p,i){const c={};for(const f in p)f!=="ref"&&(c[f]=p[f]);return s.bu.forEach(f=>{f in i&&(c[f]=i[f])}),c}function ud(p){p=p.slice();const i=Object.create(null);for(let c=0;c<p.length;c++)i[p[c].id]=p[c];for(let c=0;c<p.length;c++)"ref"in p[c]&&(p[c]=p0(p[c],i[p[c].ref]));return p}const wr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport",addIconset:"addIconset",removeIconset:"removeIconset"};function Fh(p,i,c){c.push({command:wr.addSource,args:[p,i[p]]})}function Uc(p,i,c){i.push({command:wr.removeSource,args:[p]}),c[p]=!0}function dd(p,i,c,f){Uc(p,c,f),Fh(p,i,c)}function e1(p,i,c){let f;for(f in p[c])if(p[c].hasOwnProperty(f)&&f!=="data"&&!s.bv(p[c][f],i[c][f]))return!1;for(f in i[c])if(i[c].hasOwnProperty(f)&&f!=="data"&&!s.bv(p[c][f],i[c][f]))return!1;return!0}function hd(p,i,c,f,v,b){let w;for(w in i=i||{},p=p||{})p.hasOwnProperty(w)&&(s.bv(p[w],i[w])||c.push({command:b,args:[f,w,i[w],v]}));for(w in i)i.hasOwnProperty(w)&&!p.hasOwnProperty(w)&&(s.bv(p[w],i[w])||c.push({command:b,args:[f,w,i[w],v]}))}function tc(p){return p.id}function dl(p,i){return p[i.id]=i,p}class Nf{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.ay(i,0,1);let c=1,f=this._distances[c];const v=i*this.paddedLength+this.padding;for(;f<v&&c<this._distances.length;)f=this._distances[++c];const b=c-1,w=this._distances[b],k=f-w,I=k>0?(v-w)/k:0;return this.points[b].mult(1-I).add(this.points[c].mult(I))}}class Vf{constructor(i,c,f){const v=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(c/f);for(let w=0;w<this.xCellCount*this.yCellCount;w++)v.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,f,v,b){this._forEachCell(c,f,v,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(b)}insertCircle(i,c,f,v){this._forEachCell(c-v,f-v,c+v,f+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(f),this.circles.push(v)}_insertBoxCell(i,c,f,v,b,w){this.boxCells[b].push(w)}_insertCircleCell(i,c,f,v,b,w){this.circleCells[b].push(w)}_query(i,c,f,v,b,w){if(f<0||i>this.width||v<0||c>this.height)return!b&&[];const k=[];if(i<=0&&c<=0&&this.width<=f&&this.height<=v){if(b)return!0;for(let I=0;I<this.boxKeys.length;I++)k.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(let I=0;I<this.circleKeys.length;I++){const L=this.circles[3*I],O=this.circles[3*I+1],N=this.circles[3*I+2];k.push({key:this.circleKeys[I],x1:L-N,y1:O-N,x2:L+N,y2:O+N})}return w?k.filter(w):k}return this._forEachCell(i,c,f,v,this._queryCell,k,{hitTest:b,seenUids:{box:{},circle:{}}},w),b?k.length>0:k}_queryCircle(i,c,f,v,b){const w=i-f,k=i+f,I=c-f,L=c+f;if(k<0||w>this.width||L<0||I>this.height)return!v&&[];const O=[];return this._forEachCell(w,I,k,L,this._queryCellCircle,O,{hitTest:v,circle:{x:i,y:c,radius:f},seenUids:{box:{},circle:{}}},b),v?O.length>0:O}query(i,c,f,v,b){return this._query(i,c,f,v,!1,b)}hitTest(i,c,f,v,b){return this._query(i,c,f,v,!0,b)}hitTestCircle(i,c,f,v){return this._queryCircle(i,c,f,!0,v)}_queryCell(i,c,f,v,b,w,k,I){const L=k.seenUids,O=this.boxCells[b];if(O!==null){const F=this.bboxes;for(const V of O)if(!L.box[V]){L.box[V]=!0;const Z=4*V;if(i<=F[Z+2]&&c<=F[Z+3]&&f>=F[Z+0]&&v>=F[Z+1]&&(!I||I(this.boxKeys[V]))){if(k.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[V],x1:F[Z],y1:F[Z+1],x2:F[Z+2],y2:F[Z+3]})}}}const N=this.circleCells[b];if(N!==null){const F=this.circles;for(const V of N)if(!L.circle[V]){L.circle[V]=!0;const Z=3*V;if(this._circleAndRectCollide(F[Z],F[Z+1],F[Z+2],i,c,f,v)&&(!I||I(this.circleKeys[V]))){if(k.hitTest)return w.push(!0),!0;{const G=F[Z],Y=F[Z+1],ee=F[Z+2];w.push({key:this.circleKeys[V],x1:G-ee,y1:Y-ee,x2:G+ee,y2:Y+ee})}}}}}_queryCellCircle(i,c,f,v,b,w,k,I){const L=k.circle,O=k.seenUids,N=this.boxCells[b];if(N!==null){const V=this.bboxes;for(const Z of N)if(!O.box[Z]){O.box[Z]=!0;const G=4*Z;if(this._circleAndRectCollide(L.x,L.y,L.radius,V[G+0],V[G+1],V[G+2],V[G+3])&&(!I||I(this.boxKeys[Z])))return w.push(!0),!0}}const F=this.circleCells[b];if(F!==null){const V=this.circles;for(const Z of F)if(!O.circle[Z]){O.circle[Z]=!0;const G=3*Z;if(this._circlesCollide(V[G],V[G+1],V[G+2],L.x,L.y,L.radius)&&(!I||I(this.circleKeys[Z])))return w.push(!0),!0}}}_forEachCell(i,c,f,v,b,w,k,I){const L=this._convertToXCellCoord(i),O=this._convertToYCellCoord(c),N=this._convertToXCellCoord(f),F=this._convertToYCellCoord(v);for(let V=L;V<=N;V++)for(let Z=O;Z<=F;Z++)if(b.call(this,i,c,f,v,this.xCellCount*Z+V,w,k,I))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,f,v,b,w){const k=v-i,I=b-c,L=f+w;return L*L>k*k+I*I}_circleAndRectCollide(i,c,f,v,b,w,k){const I=(w-v)/2,L=Math.abs(i-(v+I));if(L>I+f)return!1;const O=(k-b)/2,N=Math.abs(c-(b+O));if(N>O+f)return!1;if(L<=I||N<=O)return!0;const F=L-I,V=N-O;return F*F+V*V<=f*f}}const nc={unknown:0,flipRequired:1,flipNotRequired:2},f0=Math.tan(85*Math.PI/180);function za(p,i,c,f,v,b,w){const k=s.bz();if(c)if(b.name==="globe"){const I=s.bA(v,i);s.az(k,k,I)}else{const I=s.bB([],w);k[0]=I[0],k[1]=I[1],k[4]=I[2],k[5]=I[3],f||s.by(k,k,v.angle)}else s.az(k,v.labelPlaneMatrix,p);return k}function $h(p,i,c,f,v,b,w){const k=za(p,i,c,f,v,b,w);return b.name==="globe"&&c||(k[2]=k[6]=k[10]=k[14]=0),k}function Nh(p,i,c,f,v,b,w){if(c){if(b.name==="globe"){const k=za(p,i,c,f,v,b,w);return s.bi(k,k),s.az(k,p,k),k}{const k=s.bw(p),I=s.bx([]);return I[0]=w[0],I[1]=w[1],I[4]=w[2],I[5]=w[3],s.az(k,k,I),f||s.by(k,k,-v.angle),k}}return v.glCoordMatrix}function ea(p,i,c,f){const v=[p,i,c,1];c?s.aA(v,v,f):Ar(v,v,f);const b=v[3];return v[0]/=b,v[1]/=b,v[2]/=b,v}function pd(p,i){return Math.min(.5+p/i*.5,1.5)}function rc(p,i){const c=p[0]/p[3],f=p[1]/p[3];return c>=-i[0]&&c<=i[0]&&f>=-i[1]&&f<=i[1]}function Vh(p,i,c,f,v,b,w,k,I,L){const O=c.transform,N=f?p.textSizeData:p.iconSizeData,F=s.bH(N,c.transform.zoom),V=O.projection.name==="globe",Z=[256/c.width*2+1,256/c.height*2+1],G=f?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;G.clear();let Y=null;V&&(Y=f?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const ee=p.lineVertexArray,ae=f?p.text.placedSymbolArray:p.icon.placedSymbolArray,ve=c.transform.width/c.transform.height;let we,Pe=!1;for(let Ee=0;Ee<ae.length;Ee++){const ke=ae.get(Ee),{numGlyphs:Se,writingMode:Ae}=ke;if(Ae!==s.bI.vertical||Pe||we===s.bI.horizontal||(Pe=!0),we=Ae,(ke.hidden||Ae===s.bI.vertical)&&!Pe){oc(Se,G);continue}Pe=!1;const De=new s.P(ke.tileAnchorX,ke.tileAnchorY);let{x:Ze,y:Ye,z:ht}=O.projection.projectTilePoint(De.x,De.y,L.canonical);if(I){const[nn,rn,Yt]=I(De);Ze+=nn,Ye+=rn,ht+=Yt}const pt=[Ze,Ye,ht,1];if(s.aA(pt,pt,i),!rc(pt,Z)){oc(Se,G);continue}const It=pt[3],Ge=pd(c.transform.getCameraToCenterDistance(O.projection),It),st=s.bJ(N,F,ke),Fe=w?st/Ge:st*Ge,gt=ea(Ze,Ye,ht,v);if(gt[3]<=0){oc(Se,G);continue}let nt={};const St=s.al(p.layers[0].layout.get("text-max-angle")),Bt=Math.cos(St),mt=w?null:I,Ot=ic(ke,Fe,!1,k,i,v,b,p.glyphOffsetArray,ee,G,Y,gt,De,nt,ve,mt,O.projection,L,w,Bt);Pe=Ot.useVertical,mt&&Ot.needsFlipping&&(nt={}),(Ot.notEnoughRoom||Pe||Ot.needsFlipping&&ic(ke,Fe,!0,k,i,v,b,p.glyphOffsetArray,ee,G,Y,gt,De,nt,ve,mt,O.projection,L,w,Bt).notEnoughRoom)&&oc(Se,G)}f?(p.text.dynamicLayoutVertexBuffer.updateData(G),Y&&p.text.globeExtVertexBuffer&&p.text.globeExtVertexBuffer.updateData(Y)):(p.icon.dynamicLayoutVertexBuffer.updateData(G),Y&&p.icon.globeExtVertexBuffer&&p.icon.globeExtVertexBuffer.updateData(Y))}function jf(p,i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G,Y){const{lineStartIndex:ee,glyphStartIndex:ae,segment:ve}=k,we=ae+k.numGlyphs,Pe=ee+k.lineLength,Ee=i.getoffsetX(ae),ke=i.getoffsetX(we-1),Se=qc(p*Ee,c,f,v,b,w,ve,ee,Pe,I,L,O,N,F,!0,V,Z,G,Y);if(!Se)return null;const Ae=qc(p*ke,c,f,v,b,w,ve,ee,Pe,I,L,O,N,F,!0,V,Z,G,Y);return Ae?{first:Se,last:Ae}:null}function jh(p,i,c,f){return p===s.bI.horizontal&&Math.abs(f)>Math.abs(c)?{useVertical:!0}:p===s.bI.vertical?f>0?{needsFlipping:!0}:null:i!==nc.unknown&&function(v,b){return v===0||Math.abs(b/v)>f0}(c,f)?i===nc.flipRequired?{needsFlipping:!0}:null:c<0?{needsFlipping:!0}:null}function ic(p,i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G,Y,ee,ae,ve){const we=i/24,Pe=p.lineOffsetX*we,Ee=p.lineOffsetY*we,{lineStartIndex:ke,glyphStartIndex:Se,numGlyphs:Ae,segment:De,writingMode:Ze,flipState:Ye}=p,ht=ke+p.lineLength,pt=It=>{if(O){const[gt,nt,St]=It.up,Bt=L.length;s.bK(O,Bt+0,gt,nt,St),s.bK(O,Bt+1,gt,nt,St),s.bK(O,Bt+2,gt,nt,St),s.bK(O,Bt+3,gt,nt,St)}const[Ge,st,Fe]=It.point;s.bL(L,Ge,st,Fe,It.angle)};if(Ae>1){const It=jf(we,k,Pe,Ee,c,N,F,p,I,b,V,G,!1,Y,ee,ae,ve);if(!It)return{notEnoughRoom:!0};if(f&&!c){let[Ge,st,Fe]=It.first.point,[gt,nt,St]=It.last.point;[Ge,st]=ea(Ge,st,Fe,w),[gt,nt]=ea(gt,nt,St,w);const Bt=jh(Ze,Ye,(gt-Ge)*Z,nt-st);if(p.flipState=Bt&&Bt.needsFlipping?nc.flipRequired:nc.flipNotRequired,Bt)return Bt}pt(It.first);for(let Ge=Se+1;Ge<Se+Ae-1;Ge++){const st=qc(we*k.getoffsetX(Ge),Pe,Ee,c,N,F,De,ke,ht,I,b,V,G,!1,!1,Y,ee,ae,ve);if(!st)return L.length-=4*(Ge-Se),{notEnoughRoom:!0};pt(st)}pt(It.last)}else{if(f&&!c){const Ge=ea(F.x,F.y,0,v),st=ke+De+1,Fe=new s.P(I.getx(st),I.gety(st)),gt=ea(Fe.x,Fe.y,0,v),nt=gt[3]>0?gt:Uf(F,Fe,Ge,1,v,void 0,Y,ee.canonical),St=jh(Ze,Ye,(nt[0]-Ge[0])*Z,nt[1]-Ge[1]);if(p.flipState=St&&St.needsFlipping?nc.flipRequired:nc.flipNotRequired,St)return St}const It=qc(we*k.getoffsetX(Se),Pe,Ee,c,N,F,De,ke,ht,I,b,V,G,!1,!1,Y,ee,ae,ve);if(!It)return{notEnoughRoom:!0};pt(It)}return{}}function cs(p,i,c,f,v){const{x:b,y:w,z:k}=f.projectTilePoint(p.x,p.y,i);if(!v)return ea(b,w,k,c);const[I,L,O]=v(p);return ea(b+I,w+L,k+O,c)}function Uf(p,i,c,f,v,b,w,k){const I=cs(p.sub(i)._unit()._add(p),k,v,w,b);return s.at(I,c,I),s.au(I,I),s.bE(I,c,I,f)}function qc(p,i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G,Y,ee,ae){const ve=f?p-i:p+i;let we=ve>0?1:-1,Pe=0;f&&(we*=-1,Pe=Math.PI),we<0&&(Pe+=Math.PI);let Ee=k+w+(we>0?0:1)|0,ke=v,Se=v,Ae=0,De=0;const Ze=Math.abs(ve),Ye=[],ht=[];let pt=b,It=pt,Ge=s.bC([]);const st=()=>Uf(It,pt,Se,Ze-Ae+1,O,F,G,Y.canonical);for(;Ae+De<=Ze;){if(Ee+=we,Ee<k||Ee>=I)return null;if(Se=ke,It=pt,Ye.push(Se),V&&ht.push(It),pt=new s.P(L.getx(Ee),L.gety(Ee)),ke=N[Ee],!ke){const Yt=cs(pt,Y.canonical,O,G,F);ke=Yt[3]>0?N[Ee]=Yt:st()}Ae+=De;const nn=s.at([],ke,Se),rn=s.bD(Se,ke);if(c&&rn>0&&De>0&&s.bG(Ge,nn)/(De*rn)<ae)return null;De=rn,Ge=nn}Z&&F&&(N[Ee]&&(ke=st(),De=s.bD(Se,ke),Ge=s.at([],ke,Se)),N[Ee]=ke);const Fe=(Ze-Ae)/De,gt=pt.sub(It)._mult(Fe)._add(It),nt=s.bE([],Se,Ge,Fe);let St=[0,0,1],Bt=Ge[0],mt=Ge[1];if(ee&&(St=G.upVector(Y.canonical,gt.x,gt.y),St[0]!==0||St[1]!==0||St[2]!==1)){const nn=[St[2],0,-St[0]],rn=s.bF([],St,nn);s.au(nn,nn),s.au(rn,rn),Bt=s.bG(Ge,nn),mt=s.bG(Ge,rn)}if(c){const nn=s.bF([],St,Ge);s.au(nn,nn),s.bE(nt,nt,nn,c*we)}const Ot=Pe+Math.atan2(mt,Bt);return Ye.push(nt),V&&ht.push(gt),{point:nt,angle:Ot,path:Ye,tilePath:ht,up:St}}function oc(p,i){const c=i.length,f=c+4*p;i.resize(f),i.float32.fill(-1/0,4*c,4*f)}function Ar(p,i,c){const f=i[0],v=i[1];return p[0]=c[0]*f+c[4]*v+c[12],p[1]=c[1]*f+c[5]*v+c[13],p[3]=c[3]*f+c[7]*v+c[15],p}const ta=100;class t1{constructor(i,c,f=new Vf(i.width+200,i.height+200,25),v=new Vf(i.width+200,i.height+200,25)){this.transform=i,this.grid=f,this.ignoredGrid=v,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+ta,this.screenBottomBoundary=i.height+ta,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=c}placeCollisionBox(i,c,f,v,b,w,k,I){let L=f.projectedAnchorX,O=f.projectedAnchorY,N=f.projectedAnchorZ;const F=f.elevation,V=f.tileID,Z=i.getProjection();if(F&&V){const[Ee,ke,Se]=Z.upVector(V.canonical,f.tileAnchorX,f.tileAnchorY),Ae=Z.upVectorScale(V.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;L+=Ee*F*Ae,O+=ke*F*Ae,N+=Se*F*Ae}const G=this.projectAndGetPerspectiveRatio(k,L,O,N,f.tileID,Z.name==="globe"||!!F||this.transform.pitch>0,Z),Y=w*G.perspectiveRatio,ee=(f.x1*c+v.x-f.padding)*Y+G.point.x,ae=(f.y1*c+v.y-f.padding)*Y+G.point.y,ve=(f.x2*c+v.x+f.padding)*Y+G.point.x,we=(f.y2*c+v.y+f.padding)*Y+G.point.y,Pe=G.perspectiveRatio<=.55||G.occluded;return!this.isInsideGrid(ee,ae,ve,we)||!b&&this.grid.hitTest(ee,ae,ve,we,I)||Pe?{box:[],offscreen:!1,occluded:G.occluded}:{box:[ee,ae,ve,we],offscreen:this.isOffscreen(ee,ae,ve,we),occluded:!1}}placeCollisionCircles(i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G){const Y=[],ee=this.transform.elevation,ae=i.getProjection(),ve=ee?ee.getAtTileOffsetFunc(G,this.transform.center.lat,this.transform.worldSize,ae):null,we=new s.P(f.tileAnchorX,f.tileAnchorY);let{x:Pe,y:Ee,z:ke}=ae.projectTilePoint(we.x,we.y,G.canonical);if(ve){const[St,Bt,mt]=ve(we);Pe+=St,Ee+=Bt,ke+=mt}const Se=ae.name==="globe",Ae=this.projectAndGetPerspectiveRatio(k,Pe,Ee,ke,G,Se||!!ee||this.transform.pitch>0,ae),{perspectiveRatio:De}=Ae,Ze=(N?w/De:w*De)/s.bO,Ye=ea(Pe,Ee,ke,I),ht=f.lineOffsetX*Ze,pt=f.lineOffsetY*Ze,It=s.al(i.layers[0].layout.get("text-max-angle")),Ge=Math.cos(It),st=Ae.signedDistanceFromCamera>0?jf(Ze,b,ht,pt,!1,Ye,we,f,v,I,{},ee&&!N?ve:null,N&&!!ee,ae,G,N,Ge):null;let Fe=!1,gt=!1,nt=!0;if(st&&!Ae.occluded){const St=.5*V*De+Z,Bt=new s.P(-100,-100),mt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Ot=new Nf,{first:nn,last:rn}=st,Yt=nn.path.length;let mn=[];for(let Bn=Yt-1;Bn>=1;Bn--)mn.push(nn.path[Bn]);for(let Bn=1;Bn<rn.path.length;Bn++)mn.push(rn.path[Bn]);const bn=2.5*St;L&&(mn=mn.map(([Bn,Jn,Mr],ii)=>(ve&&!Se&&(Mr=ve(ii<Yt-1?nn.tilePath[Yt-1-ii]:rn.tilePath[ii-Yt+2])[2]),ea(Bn,Jn,Mr,L))),mn.some(Bn=>Bn[3]<=0)&&(mn=[]));let Cn=[];if(mn.length>0){let Bn=1/0,Jn=-1/0,Mr=1/0,ii=-1/0;for(const Br of mn)Bn=Math.min(Bn,Br[0]),Mr=Math.min(Mr,Br[1]),Jn=Math.max(Jn,Br[0]),ii=Math.max(ii,Br[1]);Jn>=Bt.x&&Bn<=mt.x&&ii>=Bt.y&&Mr<=mt.y&&(Cn=[mn.map(Br=>new s.P(Br[0],Br[1]))],(Bn<Bt.x||Jn>mt.x||Mr<Bt.y||ii>mt.y)&&(Cn=s.bM(Cn,Bt.x,Bt.y,mt.x,mt.y)))}for(const Bn of Cn){Ot.reset(Bn,.25*St);let Jn=0;Jn=Ot.length<=.5*St?1:Math.ceil(Ot.paddedLength/bn)+1;for(let Mr=0;Mr<Jn;Mr++){const ii=Mr/Math.max(Jn-1,1),Br=Ot.lerp(ii),Nr=Br.x+ta,Vi=Br.y+ta;Y.push(Nr,Vi,St,0);const Gn=Nr-St,nr=Vi-St,ur=Nr+St,ci=Vi+St;if(nt=nt&&this.isOffscreen(Gn,nr,ur,ci),gt=gt||this.isInsideGrid(Gn,nr,ur,ci),!c&&this.grid.hitTestCircle(Nr,Vi,St,F)&&(Fe=!0,!O))return{circles:[],offscreen:!1,collisionDetected:Fe,occluded:!1}}}}return{circles:!O&&Fe||!gt?[]:Y,offscreen:nt,collisionDetected:Fe,occluded:Ae.occluded}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let f=1/0,v=1/0,b=-1/0,w=-1/0;for(const O of i){const N=new s.P(O.x+ta,O.y+ta);f=Math.min(f,N.x),v=Math.min(v,N.y),b=Math.max(b,N.x),w=Math.max(w,N.y),c.push(N)}const k=this.grid.query(f,v,b,w).concat(this.ignoredGrid.query(f,v,b,w)),I={},L={};for(const O of k){const N=O.key;if(I[N.bucketInstanceId]===void 0&&(I[N.bucketInstanceId]={}),I[N.bucketInstanceId][N.featureIndex])continue;const F=[new s.P(O.x1,O.y1),new s.P(O.x2,O.y1),new s.P(O.x2,O.y2),new s.P(O.x1,O.y2)];s.bN(c,F)&&(I[N.bucketInstanceId][N.featureIndex]=!0,L[N.bucketInstanceId]===void 0&&(L[N.bucketInstanceId]=[]),L[N.bucketInstanceId].push(N.featureIndex))}return L}insertCollisionBox(i,c,f,v,b){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:v,collisionGroupID:b},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,f,v,b){const w=c?this.ignoredGrid:this.grid,k={bucketInstanceId:f,featureIndex:v,collisionGroupID:b};for(let I=0;I<i.length;I+=4)w.insertCircle(k,i[I],i[I+1],i[I+2])}projectAndGetPerspectiveRatio(i,c,f,v,b,w,k){const I=[c,f,v,1];let L=!1;v||this.transform.pitch>0?(s.aA(I,I,i),this.fogState&&b&&k.name!=="globe"&&(L=function(F,V,Z,G,Y,ee){const ae=ee.calculateFogTileMatrix(Y),ve=[V,Z,G];return s.ad(ve,ve,ae),Nt(F,s.ae(ve),ee.pitch,ee._fov)}(this.fogState,c,f,v,b.toUnwrapped(),this.transform)>.9)):Ar(I,I,i);const O=I[3];return{point:new s.P((I[0]/O+1)/2*this.transform.width+ta,(-I[1]/O+1)/2*this.transform.height+ta),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(k)/O*.5,1.5),signedDistanceFromCamera:O,occluded:w&&I[2]>O||L}}isOffscreen(i,c,f,v){return f<ta||i>=this.screenRightBoundary||v<ta||c>this.screenBottomBoundary}isInsideGrid(i,c,f,v){return f>=0&&i<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=s.bx([]);return s.bo(i,i,[-100,-100,0]),i}}function qf(p,i,c){const f=i.createTileMatrix(p,p.worldSize,c.toUnwrapped());return s.az(new Float32Array(16),p.projMatrix,f)}function Mn(p,i,c){if(i.projection.name===c.projection.name)return p.projMatrix;const f=c.clone();return f.setProjection(i.projection),qf(f,i.getProjection(),p)}function Uh(p,i,c){return i.name===c.projection.name?p.projMatrix:qf(c,i,p)}class fd{constructor(i,c,f,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):v&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class sc{constructor(i,c,f,v,b,w=!1){this.text=new fd(i?i.text:null,c,f,b),this.icon=new fd(i?i.icon:null,c,v,b),this.clipped=w}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Cs{constructor(i,c,f,v=!1){this.text=i,this.icon=c,this.skipFade=f,this.clipped=v}}class Hf{constructor(){this.invProjMatrix=s.bz(),this.viewportMatrix=s.bz(),this.circles=[]}}class Hc{constructor(i,c,f,v,b){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=f,this.bucketIndex=v,this.tileID=b}}class yn{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:f=>f.collisionGroupID===c}}return this.collisionGroups[i]}}function $r(p,i,c,f,v){const{horizontalAlign:b,verticalAlign:w}=s.bT(p),k=-(b-.5)*i,I=-(w-.5)*c,L=s.bU(p,f);return new s.P(k+L[0]*v,I+L[1]*v)}function Ir(p,i,c,f,v){const b=new s.P(p,i);return c&&b._rotate(f?v:-v),b}class us{constructor(i,c,f,v,b,w){this.transform=i.clone(),this.projection=i.projection.name,this.collisionIndex=new t1(this.transform,b),this.buildingIndex=w,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new yn(f),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,f,v,b=1){const w=f.getBucket(c),k=f.latestFeatureIndex;if(!w||!k||c.fqid!==w.layerIds[0])return;const I=w.layers[0].layout,L=w.layers[0].paint,O=f.collisionBoxArray,N=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),F=f.tileSize/s.aj,V=f.tileID.toUnwrapped();this.transform.setProjection(w.projection);const Z=(G=f.tileID,Y=w.getProjection(),ee=this.transform,Y.name===this.projection?ee.calculateProjMatrix(G.toUnwrapped()):qf(ee,Y,G));var G,Y,ee;const ae=I.get("text-pitch-alignment")==="map",ve=I.get("text-rotation-alignment")==="map";c.compileFilter(c.options);const we=c.dynamicFilter(),Pe=c.dynamicFilterNeedsFeature(),Ee=this.transform.calculatePixelsToTileUnitsMatrix(f),ke=$h(Z,f.tileID.canonical,ae,ve,this.transform,w.getProjection(),Ee);let Se=null;if(ae){const st=Nh(Z,f.tileID.canonical,ae,ve,this.transform,w.getProjection(),Ee);Se=s.az([],this.transform.labelPlaneMatrix,st)}let Ae=null;we&&f.latestFeatureIndex&&(Ae={unwrappedTileID:V,dynamicFilter:we,dynamicFilterNeedsFeature:Pe}),this.retainedQueryData[w.bucketInstanceId]=new Hc(w.bucketInstanceId,k,w.sourceLayerIndex,w.index,f.tileID);const[De,Ze]=w.layers[0].layout.get("text-size-scale-range"),Ye=s.ay(b,De,Ze),[ht,pt]=I.get("icon-size-scale-range"),It=s.ay(b,ht,pt),Ge={bucket:w,layout:I,paint:L,posMatrix:Z,textLabelPlaneMatrix:ke,labelToScreenMatrix:Se,clippingData:Ae,scale:N,textPixelRatio:F,holdingForFade:f.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:s.bH(w.textSizeData,this.transform.zoom,Ye),partiallyEvaluatedIconSize:s.bH(w.iconSizeData,this.transform.zoom,It),collisionGroup:this.collisionGroups.get(w.sourceID),latestFeatureIndex:f.latestFeatureIndex};if(v)for(const st of w.sortKeyRanges){const{sortKey:Fe,symbolInstanceStart:gt,symbolInstanceEnd:nt}=st;i.push({sortKey:Fe,symbolInstanceStart:gt,symbolInstanceEnd:nt,parameters:Ge})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Ge})}attemptAnchorPlacement(i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G,Y,ee,ae){const{textOffset0:ve,textOffset1:we,crossTileID:Pe}=F,Ee=[ve,we],ke=$r(i,f,v,Ee,b),Se=this.collisionIndex.placeCollisionBox(Z,b,c,Ir(ke.x,ke.y,w,k,this.transform.angle),N,I,L,O.predicate);if(Y){const Ae=Z.getSymbolInstanceIconSize(ae,this.transform.zoom,F.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Z,Ae,Y,Ir(ke.x,ke.y,w,k,this.transform.angle),N,I,L,O.predicate).box.length===0)return}if(Se.box.length>0){let Ae;return this.prevPlacement&&this.prevPlacement.variableOffsets[Pe]&&this.prevPlacement.placements[Pe]&&this.prevPlacement.placements[Pe].text&&(Ae=this.prevPlacement.variableOffsets[Pe].anchor),this.variableOffsets[Pe]={textOffset:Ee,width:f,height:v,anchor:i,textScale:b,prevAnchor:Ae},this.markUsedJustification(Z,i,F,G),Z.allowVerticalPlacement&&(this.markUsedOrientation(Z,G,F),this.placedOrientations[Pe]=G),{shift:ke,placedGlyphBoxes:Se}}}placeLayerBucketPart(i,c,f,v,b=1){const{bucket:w,layout:k,paint:I,posMatrix:L,textLabelPlaneMatrix:O,labelToScreenMatrix:N,clippingData:F,textPixelRatio:V,holdingForFade:Z,collisionBoxArray:G,partiallyEvaluatedTextSize:Y,partiallyEvaluatedIconSize:ee,collisionGroup:ae,latestFeatureIndex:ve}=i.parameters,we=k.get("text-optional"),Pe=k.get("icon-optional"),Ee=k.get("text-allow-overlap"),ke=k.get("icon-allow-overlap"),Se=k.get("text-rotation-alignment")==="map",Ae=k.get("text-pitch-alignment")==="map",De=I.get("symbol-z-offset"),Ze=k.get("symbol-elevation-reference")==="sea",[Ye,ht]=k.get("text-size-scale-range"),[pt,It]=k.get("icon-size-scale-range"),Ge=s.ay(b,Ye,ht),st=s.ay(b,pt,It);this.transform.setProjection(w.projection);let Fe=Ee&&(ke||!w.hasIconData()||Pe),gt=ke&&(Ee||!w.hasTextData()||we);const nt=!De.isConstant();!w.collisionArrays&&G&&w.deserializeCollisionBoxes(G),f&&v&&w.updateCollisionDebugBuffers(this.transform.zoom,G,Ge,st);const St=(mt,Ot,nn)=>{const{crossTileID:rn,numVerticalGlyphVertices:Yt}=mt;let mn=null;if(F&&F.dynamicFilterNeedsFeature||nt){const ti=this.retainedQueryData[w.bucketInstanceId];mn=ve.loadFeature({featureIndex:mt.featureIndex,bucketIndex:ti.bucketIndex,sourceLayerIndex:ti.sourceLayerIndex,layoutVertexArrayOffset:0})}if(F&&!(0,F.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},mn,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new s.P(mt.tileAnchorX,mt.tileAnchorY),this.transform.calculateDistanceTileData(F.unwrappedTileID)))return this.placements[rn]=new Cs(!1,!1,!1,!0),void c.add(rn);const bn=De.evaluate(mn,{});if(c.has(rn))return;if(Z)return void(this.placements[rn]=new Cs(!1,!1,!1));let Cn=!1,Bn=!1,Jn=!0,Mr=!1,ii=!1,Br=null,Nr={box:null,offscreen:null,occluded:null},Vi={box:null},Gn=null,nr=null,ur=null,ci=0,Yi=0,oi=0;nn.textFeatureIndex?ci=nn.textFeatureIndex:mt.useRuntimeCollisionCircles&&(ci=mt.featureIndex),nn.verticalTextFeatureIndex&&(Yi=nn.verticalTextFeatureIndex);const Er=ti=>{ti.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const di=this.transform.elevation;ti.elevation=Ze?bn:bn+(di?di.getAtTileOffset(ti.tileID,ti.tileAnchorX,ti.tileAnchorY):0),ti.elevation+=mt.zOffset},Di=nn.textBox;if(Di){Er(Di);const ti=Pr=>{let Bi=s.bI.horizontal;if(w.allowVerticalPlacement&&!Pr&&this.prevPlacement){const Po=this.prevPlacement.placedOrientations[rn];Po&&(this.placedOrientations[rn]=Po,Bi=Po,this.markUsedOrientation(w,Bi,mt))}return Bi},di=(Pr,Bi)=>{if(w.allowVerticalPlacement&&Yt>0&&nn.verticalTextBox){for(const Po of w.writingModes)if(Po===s.bI.vertical?(Nr=Bi(),Vi=Nr):Nr=Pr(),Nr&&Nr.box&&Nr.box.length)break}else Nr=Pr()};if(k.get("text-variable-anchor")){let Pr=k.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[rn]){const vi=this.prevPlacement.variableOffsets[rn];Pr.indexOf(vi.anchor)>0&&(Pr=Pr.filter(kr=>kr!==vi.anchor),Pr.unshift(vi.anchor))}const Bi=(vi,kr,hs)=>{const ss=w.getSymbolInstanceTextSize(Y,mt,this.transform.zoom,Ot),Es=(vi.x2-vi.x1)*ss+2*vi.padding,ia=(vi.y2-vi.y1)*ss+2*vi.padding,Us=mt.hasIconTextFit&&!ke?kr:null;Us&&Er(Us);let as={box:[],offscreen:!1,occluded:!1};const El=Ee?2*Pr.length:Pr.length;for(let oa=0;oa<El;++oa){const Il=this.attemptAnchorPlacement(Pr[oa%Pr.length],vi,Es,ia,ss,Se,Ae,V,L,ae,oa>=Pr.length,mt,Ot,w,hs,Us,Y,ee);if(Il&&(as=Il.placedGlyphBoxes,as&&as.box&&as.box.length)){Cn=!0,Br=Il.shift;break}}return as};di(()=>Bi(Di,nn.iconBox,s.bI.horizontal),()=>{const vi=nn.verticalTextBox;return vi&&Er(vi),w.allowVerticalPlacement&&!(Nr&&Nr.box&&Nr.box.length)&&Yt>0&&vi?Bi(vi,nn.verticalIconBox,s.bI.vertical):{box:null,offscreen:null,occluded:null}}),Nr&&(Cn=Nr.box,Jn=Nr.offscreen,Mr=Nr.occluded);const Po=ti(!(!Nr||!Nr.box));if(!Cn&&this.prevPlacement){const vi=this.prevPlacement.variableOffsets[rn];vi&&(this.variableOffsets[rn]=vi,this.markUsedJustification(w,vi.anchor,mt,Po))}}else{const Pr=(Bi,Po)=>{const vi=w.getSymbolInstanceTextSize(Y,mt,this.transform.zoom,Ot,b),kr=this.collisionIndex.placeCollisionBox(w,vi,Bi,new s.P(0,0),Ee,V,L,ae.predicate);return kr&&kr.box&&kr.box.length&&(this.markUsedOrientation(w,Po,mt),this.placedOrientations[rn]=Po),kr};di(()=>Pr(Di,s.bI.horizontal),()=>{const Bi=nn.verticalTextBox;return w.allowVerticalPlacement&&Yt>0&&Bi?(Er(Bi),Pr(Bi,s.bI.vertical)):{box:null,offscreen:null,occluded:null}}),ti(!!(Nr&&Nr.box&&Nr.box.length))}}if(Gn=Nr,Cn=Gn&&Gn.box&&Gn.box.length>0,Jn=Gn&&Gn.offscreen,Mr=Gn&&Gn.occluded,mt.useRuntimeCollisionCircles){const ti=w.text.placedSymbolArray.get(mt.centerJustifiedTextSymbolIndex>=0?mt.centerJustifiedTextSymbolIndex:mt.verticalPlacedTextSymbolIndex),di=s.bJ(w.textSizeData,Y,ti),Pr=k.get("text-padding");nr=this.collisionIndex.placeCollisionCircles(w,Ee,ti,w.lineVertexArray,w.glyphOffsetArray,di,L,O,N,f,Ae,ae.predicate,mt.collisionCircleDiameter*di/s.bO,Pr,this.retainedQueryData[w.bucketInstanceId].tileID),Cn=Ee||nr.circles.length>0&&!nr.collisionDetected,Jn=Jn&&nr.offscreen,Mr=nr.occluded}if(nn.iconFeatureIndex&&(oi=nn.iconFeatureIndex),nn.iconBox){const ti=di=>{Er(di);const Pr=mt.hasIconTextFit&&Br?Ir(Br.x,Br.y,Se,Ae,this.transform.angle):new s.P(0,0),Bi=w.getSymbolInstanceIconSize(ee,this.transform.zoom,mt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,Bi,di,Pr,ke,V,L,ae.predicate)};Vi&&Vi.box&&Vi.box.length&&nn.verticalIconBox?(ur=ti(nn.verticalIconBox),Bn=ur.box.length>0):(ur=ti(nn.iconBox),Bn=ur.box.length>0),Jn=Jn&&ur.offscreen,ii=ur.occluded}const vr=we||mt.numHorizontalGlyphVertices===0&&Yt===0,Ki=Pe||mt.numIconVertices===0;if(vr||Ki?Ki?vr||(Bn=Bn&&Cn):Cn=Bn&&Cn:Bn=Cn=Bn&&Cn,Cn&&Gn&&Gn.box&&this.collisionIndex.insertCollisionBox(Gn.box,k.get("text-ignore-placement"),w.bucketInstanceId,Vi&&Vi.box&&Yi?Yi:ci,ae.ID),Bn&&ur&&this.collisionIndex.insertCollisionBox(ur.box,k.get("icon-ignore-placement"),w.bucketInstanceId,oi,ae.ID),nr&&(Cn&&this.collisionIndex.insertCollisionCircles(nr.circles,k.get("text-ignore-placement"),w.bucketInstanceId,ci,ae.ID),f)){const ti=w.bucketInstanceId;let di=this.collisionCircleArrays[ti];di===void 0&&(di=this.collisionCircleArrays[ti]=new Hf);for(let Pr=0;Pr<nr.circles.length;Pr+=4)di.circles.push(nr.circles[Pr+0]),di.circles.push(nr.circles[Pr+1]),di.circles.push(nr.circles[Pr+2]),di.circles.push(nr.collisionDetected?1:0)}const ui=w.projection.name!=="globe";Fe=Fe&&(ui||!Mr),gt=gt&&(ui||!ii),this.placements[rn]=new Cs(Cn||Fe,Bn||gt,Jn||w.justReloaded),c.add(rn)},Bt=this.retainedQueryData[w.bucketInstanceId].tileID;if(w.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(w,Bt),w.elevationType==="road"&&w.updateRoadElevation(Bt.canonical),w.updateZOffset(),w.sortFeaturesByY){const mt=w.getSortedSymbolIndexes(this.transform.angle);for(let Ot=mt.length-1;Ot>=0;--Ot){const nn=mt[Ot];St(w.symbolInstances.get(nn),nn,w.collisionArrays[nn])}w.hasAnyZOffset&&s.w(`${w.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(w.hasAnyZOffset){const mt=w.getSortedIndexesByZOffset();for(let Ot=0;Ot<mt.length;++Ot){const nn=mt[Ot];St(w.symbolInstances.get(nn),nn,w.collisionArrays[nn])}}else for(let mt=i.symbolInstanceStart;mt<i.symbolInstanceEnd;mt++)St(w.symbolInstances.get(mt),mt,w.collisionArrays[mt]);if(f&&w.bucketInstanceId in this.collisionCircleArrays){const mt=this.collisionCircleArrays[w.bucketInstanceId];s.bi(mt.invProjMatrix,L),mt.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(i,c,f,v){const{leftJustifiedTextSymbolIndex:b,centerJustifiedTextSymbolIndex:w,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:I,crossTileID:L}=f,O=s.bV(c),N=v===s.bI.vertical?I:O==="left"?b:O==="center"?w:O==="right"?k:-1;b>=0&&(i.text.placedSymbolArray.get(b).crossTileID=N>=0&&b!==N?0:L),w>=0&&(i.text.placedSymbolArray.get(w).crossTileID=N>=0&&w!==N?0:L),k>=0&&(i.text.placedSymbolArray.get(k).crossTileID=N>=0&&k!==N?0:L),I>=0&&(i.text.placedSymbolArray.get(I).crossTileID=N>=0&&I!==N?0:L)}markUsedOrientation(i,c,f){const v=c===s.bI.horizontal||c===s.bI.horizontalOnly?c:0,b=c===s.bI.vertical?c:0,{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:I,verticalPlacedTextSymbolIndex:L}=f,O=i.text.placedSymbolArray;w>=0&&(O.get(w).placedOrientation=v),k>=0&&(O.get(k).placedOrientation=v),I>=0&&(O.get(I).placedOrientation=v),L>=0&&(O.get(L).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let f=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(i):1,b=c?c.opacities:{},w=c?c.variableOffsets:{},k=c?c.placedOrientations:{};for(const I in this.placements){const L=this.placements[I],O=b[I];O?(this.opacities[I]=new sc(O,v,L.text,L.icon,null,L.clipped),f=f||L.text!==O.text.placed||L.icon!==O.icon.placed):(this.opacities[I]=new sc(null,v,L.text,L.icon,L.skipFade,L.clipped),f=f||L.text||L.icon)}for(const I in b){const L=b[I];if(!this.opacities[I]){const O=new sc(L,v,!1,!1);O.isHidden()||(this.opacities[I]=O,f=f||L.text.placed||L.icon.placed)}}for(const I in w)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=w[I]);for(const I in k)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=k[I]);f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c,f,v){const b=new Set;for(const w of c){const k=w.getBucket(i);k&&w.latestFeatureIndex&&i.fqid===k.layerIds[0]&&(this.updateBucketOpacities(k,b,w,w.collisionBoxArray,f,v,w.tileID,i.scope),k.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(k,w.tileID),k.elevationType==="road"&&k.updateRoadElevation(w.tileID.canonical),k.updateZOffset())}}updateBucketOpacities(i,c,f,v,b,w,k,I){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const L=i.layers[0].layout,O=i.layers[0].paint,N=!!i.layers[0].dynamicFilter(),F=new sc(null,0,!1,!1,!0),V=L.get("text-allow-overlap"),Z=L.get("icon-allow-overlap"),G=L.get("text-variable-anchor"),Y=L.get("text-rotation-alignment")==="map",ee=L.get("text-pitch-alignment")==="map",ae=O.get("symbol-z-offset"),ve=L.get("symbol-elevation-reference")==="sea",we=!ae.isConstant(),Pe=new sc(null,0,V&&(Z||!i.hasIconData()||L.get("icon-optional")),Z&&(V||!i.hasTextData()||L.get("text-optional")),!0);!i.collisionArrays&&v&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(v);const Ee=(Se,Ae,De)=>{for(let Ze=0;Ze<Ae/4;Ze++)Se.opacityVertexArray.emplaceBack(De)};let ke=0;w&&i.updateReplacement(k,w);for(let Se=0;Se<i.symbolInstances.length;Se++){const Ae=i.symbolInstances.get(Se),{numHorizontalGlyphVertices:De,numVerticalGlyphVertices:Ze,crossTileID:Ye,numIconVertices:ht,tileAnchorX:pt,tileAnchorY:It}=Ae;let Ge=null;const st=this.retainedQueryData[i.bucketInstanceId];we&&Ae&&st&&(Ge=f.latestFeatureIndex.loadFeature({featureIndex:Ae.featureIndex,bucketIndex:st.bucketIndex,sourceLayerIndex:st.sourceLayerIndex,layoutVertexArrayOffset:0}));const Fe=ae.evaluate(Ge,{}),gt=c.has(Ye);let nt=this.opacities[Ye];gt?nt=F:nt||(nt=Pe,this.opacities[Ye]=nt),c.add(Ye);const St=De>0||Ze>0,Bt=ht>0,mt=this.placedOrientations[Ye],Ot=mt===s.bI.vertical,nn=mt===s.bI.horizontal||mt===s.bI.horizontalOnly;!St&&!Bt||nt.isHidden()||ke++;let rn=!1;if((St||Bt)&&w)for(const Yt of i.activeReplacements){if(s.bP(Yt,b,s.bQ.Symbol,I)||Yt.min.x>pt||pt>Yt.max.x||Yt.min.y>It||It>Yt.max.y)continue;const mn=s.bR(pt,It,k.canonical,Yt.footprintTileId.canonical);if(rn=s.bS(mn,Yt.footprint),rn)break}if(St){const Yt=rn?hl:Gc(nt.text);Ee(i.text,De,Ot?hl:Yt),Ee(i.text,Ze,nn?hl:Yt);const mn=nt.text.isHidden(),{leftJustifiedTextSymbolIndex:bn,centerJustifiedTextSymbolIndex:Cn,rightJustifiedTextSymbolIndex:Bn,verticalPlacedTextSymbolIndex:Jn}=Ae,Mr=i.text.placedSymbolArray,ii=mn||Ot?1:0;bn>=0&&(Mr.get(bn).hidden=ii),Cn>=0&&(Mr.get(Cn).hidden=ii),Bn>=0&&(Mr.get(Bn).hidden=ii),Jn>=0&&(Mr.get(Jn).hidden=mn||nn?1:0);const Br=this.variableOffsets[Ye];Br&&this.markUsedJustification(i,Br.anchor,Ae,mt);const Nr=this.placedOrientations[Ye];Nr&&(this.markUsedJustification(i,"left",Ae,Nr),this.markUsedOrientation(i,Nr,Ae))}if(Bt){const Yt=rn?hl:Gc(nt.icon),{placedIconSymbolIndex:mn,verticalPlacedIconSymbolIndex:bn}=Ae,Cn=i.icon.placedSymbolArray,Bn=nt.icon.isHidden()?1:0;mn>=0&&(Ee(i.icon,ht,Ot?hl:Yt),Cn.get(mn).hidden=Bn),bn>=0&&(Ee(i.icon,Ae.numVerticalIconVertices,nn?hl:Yt),Cn.get(bn).hidden=Bn)}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Yt=i.collisionArrays[Se];if(Yt){let mn=new s.P(0,0),bn=!0;if(Yt.textBox||Yt.verticalTextBox){if(G){const Bn=this.variableOffsets[Ye];Bn?(mn=$r(Bn.anchor,Bn.width,Bn.height,Bn.textOffset,Bn.textScale),Y&&mn._rotate(ee?this.transform.angle:-this.transform.angle)):bn=!1}N&&(bn=!nt.clipped),Yt.textBox&&Ba(i.textCollisionBox.collisionVertexArray,nt.text.placed,!bn||Ot,Fe,ve,mn.x,mn.y),Yt.verticalTextBox&&Ba(i.textCollisionBox.collisionVertexArray,nt.text.placed,!bn||nn,Fe,ve,mn.x,mn.y)}const Cn=bn&&!!(!nn&&Yt.verticalIconBox);Yt.iconBox&&Ba(i.iconCollisionBox.collisionVertexArray,nt.icon.placed,Cn,Fe,ve,Ae.hasIconTextFit?mn.x:0,Ae.hasIconTextFit?mn.y:0),Yt.verticalIconBox&&Ba(i.iconCollisionBox.collisionVertexArray,nt.icon.placed,!Cn,Fe,ve,Ae.hasIconTextFit?mn.x:0,Ae.hasIconTextFit?mn.y:0)}}}if(i.fullyClipped=ke===0,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Se=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Se.invProjMatrix,i.placementViewportMatrix=Se.viewportMatrix,i.collisionCircleArray=Se.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const f=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function Ba(p,i,c,f,v,b,w){p.emplaceBack(i?1:0,c?1:0,b||0,w||0,f,v?1:0),p.emplaceBack(i?1:0,c?1:0,b||0,w||0,f,v?1:0),p.emplaceBack(i?1:0,c?1:0,b||0,w||0,f,v?1:0),p.emplaceBack(i?1:0,c?1:0,b||0,w||0,f,v?1:0)}const Rr=Math.pow(2,25),qh=Math.pow(2,24),md=Math.pow(2,17),gd=Math.pow(2,16),Ko=Math.pow(2,9),to=Math.pow(2,8),n1=Math.pow(2,1);function Gc(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const i=p.placed?1:0,c=Math.floor(127*p.opacity);return c*Rr+i*qh+c*md+i*gd+c*Ko+i*to+c*n1+i}const hl=0;class yd{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(i,c,f,v,b,w){const k=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(k,v,i[this._currentTileIndex],this._sortAcrossTiles,w),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((I,L)=>I.sortKey-L.sortKey));this._currentPartIndex<k.length;){const I=k[this._currentPartIndex];if(c.placeLayerBucketPart(I,this._seenCrossTileIDs,f,I.symbolInstanceStart===0,w),this._currentPartIndex++,b())return!0}return!1}}class Hh{constructor(i,c,f,v,b,w,k,I,L){this.placement=new us(i,b,w,k,I,L),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,c,f,v,b){const w=s.q.now(),k=()=>{const I=s.q.now()-w;return!this._forceFullPlacement&&I>2};for(;this._currentPlacementIndex>=0;){const I=c[i[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=L)&&(!I.maxzoom||I.maxzoom>L)){const O=I,N=O.layout.get("symbol-z-elevate"),F=O.layout.get("symbol-sort-key").constantOr(1)!==void 0,V=O.layout.get("symbol-z-order"),Z=V==="viewport-y"||V==="auto"&&!(V!=="viewport-y"&&F),G=O.layout.get("text-allow-overlap")||O.layout.get("icon-allow-overlap")||O.layout.get("text-ignore-placement")||O.layout.get("icon-ignore-placement"),Y=Z&&G,ee=this._inProgressLayer=this._inProgressLayer||new yd(O),ae=s.C(I.source,I.scope);if(ee.continuePlacement(N||Y?v[ae]:f[ae],this.placement,this._showCollisionBoxes,I,k,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const vd=512/s.aj/2;class Gh{constructor(i,c,f){this.tileID=i,this.bucketInstanceId=f,this.index=new s.bW(c.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const v=i.canonical.x*s.aj,b=i.canonical.y*s.aj;for(let w=0;w<c.length;w++){const{key:k,crossTileID:I,tileAnchorX:L,tileAnchorY:O}=c.get(w),N=Math.floor((v+L)*vd),F=Math.floor((b+O)*vd);this.index.add(N,F),this.keys.push(k),this.crossTileIDs.push(I)}this.index.finish()}findMatches(i,c,f){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z),b=vd/Math.pow(2,c.canonical.z-this.tileID.canonical.z),w=c.canonical.x*s.aj,k=c.canonical.y*s.aj;for(let I=0;I<i.length;I++){const L=i.get(I);if(L.crossTileID)continue;const{key:O,tileAnchorX:N,tileAnchorY:F}=L,V=Math.floor((w+N)*b),Z=Math.floor((k+F)*b),G=this.index.range(V-v,Z-v,V+v,Z+v).sort((Y,ee)=>Y-ee);for(const Y of G){const ee=this.crossTileIDs[Y];if(this.keys[Y]===O&&!f.has(ee)){f.add(ee),L.crossTileID=ee;break}}}}}class Zo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Fa{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const f in this.indexes){const v=this.indexes[f],b={};for(const w in v){const k=v[w];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),b[k.tileID.key]=k}this.indexes[f]=b}this.lng=i}addBucket(i,c,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]=new Set);const v=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const w=this.indexes[b];if(Number(b)>i.overscaledZ)for(const k in w){const I=w[k];I.tileID.isChildOf(i)&&I.findMatches(c.symbolInstances,i,v)}else{const k=w[i.scaledTo(Number(b)).key];k&&k.findMatches(c.symbolInstances,i,v)}}for(let b=0;b<c.symbolInstances.length;b++){const w=c.symbolInstances.get(b);w.crossTileID||(w.crossTileID=f.generate(),v.add(w.crossTileID))}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Gh(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const f of c.crossTileIDs)this.usedCrossTileIDs[i].delete(f)}removeStaleBuckets(i){let c=!1;for(const f in this.indexes){const v=this.indexes[f];for(const b in v)i[v[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,v[b]),delete v[b],c=!0)}return c}}class os{constructor(){this.layerIndexes={},this.crossTileIDs=new Zo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,f,v){let b=this.layerIndexes[i.fqid];b===void 0&&(b=this.layerIndexes[i.fqid]=new Fa);let w=!1;const k={};v.name!=="globe"&&b.handleWrapJump(f);for(const I of c){const L=I.getBucket(i);L&&i.fqid===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(I.tileID,L,this.crossTileIDs)&&(w=!0),k[L.bucketInstanceId]=!0)}return b.removeStaleBuckets(k)&&(w=!0),w}pruneUnusedLayers(i){const c={};i.forEach(f=>{c[f]=!0});for(const f in this.layerIndexes)c[f]||delete this.layerIndexes[f]}}const ac=771;class or{constructor(i,c,f,v){this.blendFunction=i,this.blendColor=c.toNonPremultipliedRenderColor(null),this.mask=f,this.blendEquation=v}}or.Replace=[1,0,1,0],or.disabled=new or(or.Replace,s.am.transparent,[!1,!1,!1,!1]),or.unblended=new or(or.Replace,s.am.transparent,[!0,!0,!0,!0]),or.alphaBlended=new or([1,ac,1,ac],s.am.transparent,[!0,!0,!0,!0]),or.alphaBlendedNonPremultiplied=new or([770,ac,770,ac],s.am.transparent,[!0,!0,!0,!0]),or.multiply=new or([774,0,774,0],s.am.transparent,[!0,!0,!0,!0]);class en{constructor(i,c,f){this.func=i,this.mask=c,this.range=f}}en.ReadOnly=!1,en.ReadWrite=!0,en.disabled=new en(519,en.ReadOnly,[0,1]);const Fs=7680;class $n{constructor(i,c,f,v,b,w){this.test=i,this.ref=c,this.mask=f,this.fail=v,this.depthFail=b,this.pass=w}}$n.disabled=new $n({func:519,mask:0},0,0,Fs,Fs,Fs);const Xi=1029,bd=2305;class An{constructor(i,c,f){this.enable=i,this.mode=c,this.frontFace=f}}function Wc(p,i){const c=s.c1(p,3);s.c3(p,i),s.c7(p,3,c)}function Kc(p,i){const c=s.b_([]);return s.b$(c,c,-i),s.c0(c,c,-p),c}function pl(p,i){const c=[p[0],p[1],0],f=[i[0],i[1],0];if(s.ae(c)>=1e-15){const w=s.au([],c);s.bY(f,w,s.bG(f,w)),i[0]=f[0],i[1]=f[1]}const v=s.bF([],i,p);if(s.bZ(v)<1e-15)return null;const b=Math.atan2(-v[1],v[0]);return Kc(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),b)}An.disabled=new An(!1,Xi,bd),An.backCCW=new An(!0,Xi,bd),An.backCW=new An(!0,Xi,2304),An.frontCW=new An(!0,1028,2304),An.frontCCW=new An(!0,1028,bd);class m0{constructor(i,c){this.position=i,this.orientation=c}get position(){return this._position}set position(i){if(i){const c=i instanceof s.ac?i:new s.ac(i[0],i[1],i[2]);this._renderWorldCopies&&(c.x=s.bX(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(i,c){if(this.orientation=null,!this.position)return;const f=this.position,v=this._elevation?this._elevation.getAtPointOrZero(s.ac.fromLngLat(i)):0,b=s.ac.fromLngLat(i,v),w=[b.x-f.x,b.y-f.y,b.z-f.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=pl(w,c)}setPitchBearing(i,c){this.orientation=Kc(s.al(i),s.al(-c))}}class $s{constructor(i,c){this._transform=s.bx([]),this.orientation=c,this.position=i}get mercatorPosition(){const i=this.position;return new s.ac(i[0],i[1],i[2])}get position(){const i=s.c1(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var c;i&&s.c7(this._transform,3,[(c=i)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||s.b_([]),i&&Wc(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,c){this._orientation=Kc(i,c),Wc(this._transform,this._orientation)}forward(){const i=s.c1(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=s.c1(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=s.c1(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,c){const f=new Float64Array(16);return s.bi(f,this.getWorldToCamera(i,c)),f}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(i,c,f){const v=this.position;s.bY(v,v,-i);const b=new Float64Array(16);return s.bn(b,[f,f,f]),s.bo(b,b,v),b[10]*=c,b}getWorldToCamera(i,c){const f=new Float64Array(16),v=new Float64Array(4),b=this.position;return s.c2(v,this._orientation),s.bY(b,b,-i),s.c3(f,v),s.bo(f,f,b),f[1]*=-1,f[5]*=-1,f[9]*=-1,f[13]*=-1,f[8]*=c,f[9]*=c,f[10]*=c,f[11]*=c,f}getCameraToClipPerspective(i,c,f,v){const b=new Float64Array(16);return s.c4(b,i,c,f,v),b}getCameraToClipOrthographic(i,c,f,v,b,w){const k=new Float64Array(16);return s.c5(k,i,c,f,v,b,w),k}getDistanceToElevation(i,c=!1){const f=i===0?0:s.c6(i,c?s.aY(this.position[1]):this.position[1]),v=this.forward();return(f-this.position[2])/v[2]}clone(){return new $s([...this.position],[...this.orientation])}}const Xo={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class _d{constructor(i=0,c=0,f=0,v=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(f)||f<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=f,this.right=v}interpolate(i,c,f){return c.top!=null&&i.top!=null&&(this.top=s.ai(i.top,c.top,f)),c.bottom!=null&&i.bottom!=null&&(this.bottom=s.ai(i.bottom,c.bottom,f)),c.left!=null&&i.left!=null&&(this.left=s.ai(i.left,c.left,f)),c.right!=null&&i.right!=null&&(this.right=s.ai(i.right,c.right,f)),this}getCenter(i,c){const f=s.ay((this.left+i-this.right)/2,0,i),v=s.ay((this.top+c-this.bottom)/2,0,c);return new s.P(f,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new _d(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const xo=15;class Gf{constructor(i,c,f,v,b,w,k){this.tileSize=512,this._renderWorldCopies=b===void 0||b,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=f??0,this._maxPitch=v??60,this.setProjection(w),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new s.cd(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new _d,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new $s,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const i=new Gf(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.mercatorFromTransition=this.mercatorFromTransition,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i.frustumCorners=this.frustumCorners,i._allowWorldUnderZoom=this._allowWorldUnderZoom,i}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<xo}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(i,c=!1){const f=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||f)&&this._updateCameraOnTerrain(),(i||f)&&this._constrainCamera(c),this._calcMatrices()}getProjection(){return s.aF(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};const c=this.projection?this.getProjection():void 0;this.projection=s.ce(this.projectionOptions);const f=this.getProjection(),v=!s.bv(c,f);return v&&this._calcMatrices(),this.mercatorFromTransition=!1,v}setOrthographicProjectionAtLowPitch(i){return this._orthographicProjectionAtLowPitch!==i&&(this._orthographicProjectionAtLowPitch=i,this._calcMatrices(),!0)}setMercatorFromTransition(){const i=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.ce({name:"mercator"});const c=i!==this.projection.name;return c&&this._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.c6(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return s.bX(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const c=-i*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=s.cf(),s.cg(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=s.ay(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=s.al(i),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const i=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/i)}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(i){this._tileCoverLift!==i&&(this._tileCoverLift=i)}_updateCameraOnTerrain(){const i=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,c=this.elevation&&i===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||i===Number.NEGATIVE_INFINITY&&(!c||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const f=this._elevation;c||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&f.exaggeration()&&this._centerAltitudeValidForExaggeration!==f.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*f.exaggeration(),this._centerAltitudeValidForExaggeration=f.exaggeration()):(this._centerAltitude=i||0,this._centerAltitudeValidForExaggeration=f.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){if(this._centerAltitudeValidForExaggeration===void 0)return;const i=Math.max(0,(this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize);this._seaLevelZoom=this._zoomFromMercatorZ(i)}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],f=this.horizonLineFromTop();let v=0,b=0;for(let w=0;w<c.length;w++){const k=new s.P(c[w][0]*this.width,f+c[w][1]*(this.height-f)),I=i.pointCoordinate(k);if(!I)continue;const L=1/Math.hypot(I[0]-this._camera.position[0],I[1]-this._camera.position[1]);v+=I[3]*L,b+=L}return b===0?NaN:v/b}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const i=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),f=this.pixelsPerMeter/this.worldSize*c,v=this._mercatorZfromZoom(i),b=this._mercatorZfromZoom(this._maxZoom),w=Math.max(v-f,b);this._setZoom(this._zoomFromMercatorZ(w))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let f;f=i.z<this._camera.position[2]?[c.x,c.y,c.z]:[i.x,i.y,i.z];const v=s.ae(s.at([],this._camera.position,f));return s.ay(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let c=!1;if(i.orientation&&!s.ch(i.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(i.orientation)),i.position){const f=[i.position.x,i.position.y,i.position.z];s.ci(f,this._camera.position)||(this._setCameraPosition(f),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,c=new m0;return c.position=new s.ac(i[0],i[1],i[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(i){if(!s.cj(i))return!1;s.ck(i,i);const c=s.cl([],[0,0,-1],i),f=s.cl([],[0,-1,0],i);if(f[2]<0)return!1;const v=pl(c,f);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(i){const c=this.zoomScale(this.minZoom)*this.tileSize,f=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;i[2]=s.ay(i[2],v/f,v/c),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,f){this._unmodified=!1,this._edgeInsets.interpolate(i,c,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new s.cm(0,i)];if(this.renderWorldCopies){const f=this.pointCoordinate(new s.P(0,0)),v=this.pointCoordinate(new s.P(this.width,0)),b=this.pointCoordinate(new s.P(this.width,this.height)),w=this.pointCoordinate(new s.P(0,this.height)),k=Math.floor(Math.min(f.x,v.x,b.x,w.x)),I=Math.floor(Math.max(f.x,v.x,b.x,w.x)),L=1;for(let O=k-L;O<=I+L;O++)O!==0&&c.push(new s.cm(O,i))}return c}isLODDisabled(i){return(!i||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(i,c,f){let v=[];const b=f!=null,w=!b;if(w&&this.zoom<c||b&&f[0]===0&&f[1]===0)return v;const k=new Set,I=(O,N,F,V,Z)=>{const G=s.cK(N,O,F,V,Z);k.has(G)||(v.push(new s.aM(O,N,F,V,Z)),k.add(G))};for(let O=0;O<i.length;O++){const N=i[O];if(w&&N.canonical.z!==c)continue;const F=N.canonical,V=N.overscaledZ,Z=N.wrap,G=1<<F.z,Y=F.x+1<G,ee=F.x>0,ae=F.y+1<G,ve=F.y>0,we=N.wrap-(ee?0:1),Pe=N.wrap+(Y?0:1),Ee=ee?F.x-1:G-1,ke=Y?F.x+1:0;if(b)f[0]<0?(I(V,Pe,F.z,ke,F.y),f[1]<0&&ae&&(I(V,Z,F.z,F.x,F.y+1),I(V,Pe,F.z,ke,F.y+1)),f[1]>0&&ve&&(I(V,Z,F.z,F.x,F.y-1),I(V,Pe,F.z,ke,F.y-1))):f[0]>0?(I(V,we,F.z,Ee,F.y),f[1]<0&&ae&&(I(V,Z,F.z,F.x,F.y+1),I(V,we,F.z,Ee,F.y+1)),f[1]>0&&ve&&(I(V,Z,F.z,F.x,F.y-1),I(V,we,F.z,Ee,F.y-1))):f[1]<0&&ae?I(V,Z,F.z,F.x,F.y+1):ve&&I(V,Z,F.z,F.x,F.y-1);else{const Se=N.visibleQuadrants;1&Se&&(I(V,we,F.z,Ee,F.y),ve&&(I(V,Z,F.z,F.x,F.y-1),I(V,we,F.z,Ee,F.y-1))),2&Se&&(I(V,Pe,F.z,ke,F.y),ve&&(I(V,Z,F.z,F.x,F.y-1),I(V,Pe,F.z,ke,F.y-1))),4&Se&&(I(V,we,F.z,Ee,F.y),ae&&(I(V,Z,F.z,F.x,F.y+1),I(V,we,F.z,Ee,F.y+1))),8&Se&&(I(V,Pe,F.z,ke,F.y),ae&&(I(V,Z,F.z,F.x,F.y+1),I(V,Pe,F.z,ke,F.y+1)))}}const L=[];for(const O of v)v.some(N=>O.isChildOf(N))||L.push(O);if(v=L.filter(O=>!i.some(N=>!!(O.overscaledZ<c&&N.isChildOf(O))||O.equals(N)||O.isChildOf(N))),w){const O=1<<c,N=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),F=[O*N.x,O*N.y],V=4,Z=V*V;v=v.filter(G=>{const Y=G.canonical.x+.5-F[0],ee=G.canonical.y+.5-F[1];return Y*Y+ee*ee<Z})}return v}coveringTiles(i){let c=this.coveringZoomLevel(i);const f=c,v=this.elevation&&this.elevation.exaggeration(),b=v&&!i.isTerrainDEM,w=this.projection.name==="mercator";if(i.minzoom!==void 0&&c<i.minzoom)return[];i.maxzoom!==void 0&&c>i.maxzoom&&(c=i.maxzoom);const k=this.locationCoordinate(this.center),I=this.center.lat,L=1<<c,O=[L*k.x,L*k.y,0],N=this.projection.name==="globe",F=!N,V=s.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,F),Z=N?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),G=L*s.c6(1,this.center.lat),Y=this._camera.position[2]/s.c6(1,this.center.lat),ee=[L*Z.x,L*Z.y,Y*(F?1:G)],ae=N||v,ve=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),we=this.isLODDisabled(!0)?c:0;let Pe;if(this._elevation&&i.isTerrainDEM)Pe=1e4*this._elevation.exaggeration();else if(this._elevation){const Fe=this._elevation.getMinMaxForVisibleTiles();Pe=Fe?Fe.max:this._centerAltitude}else Pe=this._centerAltitude;const Ee=i.isTerrainDEM?-Pe:this._elevation?this._elevation.getMinElevationBelowMSL():0,ke=this.projection.isReprojectedInTileSpace?s.co(this):1,Se=Fe=>{const nt=new s.ac(Fe.x+25e-6,Fe.y,Fe.z),St=new s.ac(Fe.x,Fe.y+25e-6,Fe.z),Bt=Fe.toLngLat(),mt=nt.toLngLat(),Ot=St.toLngLat(),nn=this.locationCoordinate(Bt),rn=this.locationCoordinate(mt),Yt=this.locationCoordinate(Ot),mn=Math.hypot(rn.x-nn.x,rn.y-nn.y),bn=Math.hypot(Yt.x-nn.x,Yt.y-nn.y);return Math.sqrt(mn*bn)*ke/25e-6},Ae=Fe=>{const gt=Pe,nt=Ee;return{aabb:s.cr(this,L,0,0,0,Fe,nt,gt,this.projection),zoom:0,x:0,y:0,minZ:nt,maxZ:gt,wrap:Fe,fullyVisible:!1}},De=[];let Ze=[];const Ye=c,ht=i.reparseOverscaled?f:c,pt=(Y-this._centerAltitude)*G,It=Fe=>{if(!this._elevation||!Fe.tileID||!w)return;const gt=this._elevation.getMinMaxForTile(Fe.tileID),nt=Fe.aabb;gt?(nt.min[2]=gt.min,nt.max[2]=gt.max,nt.center[2]=(nt.min[2]+nt.max[2])/2):(Fe.shouldSplit=st(Fe),Fe.shouldSplit||(nt.min[2]=nt.max[2]=nt.center[2]=this._centerAltitude))},Ge=(Fe,gt)=>{if(.707*gt<Fe)return 1;const nt=gt/Fe;return nt/(1.4144271570014144+(Math.pow(1.1,nt-1.4144271570014144+1)-1)/(1.1-1)-1)},st=Fe=>{if(Fe.zoom<we)return!0;if(Fe.zoom===Ye)return!1;if(Fe.shouldSplit!=null)return Fe.shouldSplit;const gt=Fe.aabb.distanceX(ee),nt=Fe.aabb.distanceY(ee);let St=pt,Bt=1;if(N){St=Fe.aabb.distanceZ(ee);const bn=Math.pow(2,Fe.zoom),Cn=s.aY((Fe.y+1)/bn),Bn=s.aY(Fe.y/bn),Jn=Math.min(Math.max(I,Cn),Bn),Mr=s.cO(Jn)/s.cO(I);if(Bt=Jn===I?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Mr/this._mercatorScaleRatio),this.zoom<=s.cL&&Fe.zoom===Ye-1&&Mr>=.9)return!0}else if(b&&(St=Fe.aabb.distanceZ(ee)*G),this.projection.isReprojectedInTileSpace&&f<=5){const bn=Math.pow(2,Fe.zoom),Cn=Se(new s.ac((Fe.x+.5)/bn,(Fe.y+.5)/bn));Bt=Cn>.85?1:Cn}if(!w){const bn=Math.sqrt(gt*gt+nt*nt+St*St);let Cn=(1<<Ye-Fe.zoom)*ve*Bt;return Cn*=Ge(Math.max(St,pt),bn),bn<Cn}let mt=Number.MAX_VALUE,Ot=0;const nn=Fe.aabb.getCorners(),rn=[];for(const bn of nn){s.at(rn,bn,ee),N||(b?rn[2]*=G:rn[2]=pt);const Cn=s.bG(rn,this._camera.forward());Cn<mt&&(mt=Cn,Ot=Math.abs(rn[2]))}let Yt=(1<<Ye-Fe.zoom)*ve*Bt;if(Yt*=Ge(Math.max(Ot,pt),mt),mt<Yt)return!0;const mn=Fe.aabb.closestPoint(O);return mn[0]===O[0]&&mn[1]===O[1]};if(this.renderWorldCopies)for(let Fe=1;Fe<=3;Fe++)De.push(Ae(-Fe)),De.push(Ae(Fe));for(De.push(Ae(0));De.length>0;){const Fe=De.pop(),gt=Fe.x,nt=Fe.y;let St=Fe.fullyVisible;const Bt=()=>this.projection.name==="globe"&&(Fe.y===0||Fe.y===(1<<Fe.zoom)-1);if(!St){let mt=ae?Fe.aabb.intersects(V):Fe.aabb.intersectsFlat(V);if(mt===0&&Bt()){const Ot=new s.cp(Fe.zoom,gt,nt);mt=s.cq(this,L,Ot,!0).intersects(V)}if(mt===0)continue;St=mt===2}if(Fe.zoom!==Ye&&st(Fe))for(let mt=0;mt<4;mt++){const Ot=(gt<<1)+mt%2,nn=(nt<<1)+(mt>>1),rn={aabb:w?Fe.aabb.quadrant(mt):s.cr(this,L,Fe.zoom+1,Ot,nn,Fe.wrap,Fe.minZ,Fe.maxZ,this.projection),zoom:Fe.zoom+1,x:Ot,y:nn,wrap:Fe.wrap,fullyVisible:St,tileID:void 0,shouldSplit:void 0,minZ:Fe.minZ,maxZ:Fe.maxZ};b&&!N&&(rn.tileID=new s.aM(Fe.zoom+1===Ye?ht:Fe.zoom+1,Fe.wrap,Fe.zoom+1,Ot,nn),It(rn)),De.push(rn)}else{const mt=Fe.zoom===Ye?ht:Fe.zoom;if(i.minzoom&&i.minzoom>mt)continue;let Ot=0;if(!St){let mn=ae?Fe.aabb.intersectsPrecise(V):Fe.aabb.intersectsPreciseFlat(V);if(mn===0&&Bt()){const bn=new s.cp(Fe.zoom,gt,nt);mn=s.cq(this,L,bn,!0).intersectsPrecise(V)}if(mn===0)continue;if(i.calculateQuadrantVisibility)if(V.containsPoint(Fe.aabb.center))Ot=15;else for(let bn=0;bn<4;bn++)Fe.aabb.quadrant(bn).intersects(V)!==0&&(Ot|=1<<bn)}const nn=O[0]-(.5+gt+(Fe.wrap<<Fe.zoom))*(1<<c-Fe.zoom),rn=O[1]-.5-nt,Yt=Fe.tileID?Fe.tileID:new s.aM(mt,Fe.wrap,Fe.zoom,gt,nt);i.calculateQuadrantVisibility&&(Yt.visibleQuadrants=Ot),Ze.push({tileID:Yt,distanceSq:nn*nn+rn*rn})}}if(this.fogCullDistSq){const Fe=this.fogCullDistSq,gt=this.horizonLineFromTop();Ze=Ze.filter(nt=>{const St=[0,0,0,1],Bt=[s.aj,s.aj,0,1],mt=this.calculateFogTileMatrix(nt.tileID.toUnwrapped());s.aA(St,St,mt),s.aA(Bt,Bt,mt);const Ot=s.cs([],St,Bt),nn=s.ct([],St,Bt),rn=s.cM(Ot,nn);if(rn===0)return!0;let Yt=!1;const mn=this._elevation;if(mn&&rn>Fe&&gt!==0){const bn=this.calculateProjMatrix(nt.tileID.toUnwrapped());let Cn;i.isTerrainDEM||(Cn=mn.getMinMaxForTile(nt.tileID)),Cn||(Cn={min:Ee,max:Pe});const Bn=s.cu(this.rotation),Jn=[Bn[0]*s.aj,Bn[1]*s.aj,Cn.max];s.ad(Jn,Jn,bn),Yt=(1-Jn[1])*this.height*.5<gt}return rn<Fe||Yt})}return Ze.sort((Fe,gt)=>Fe.distanceSq-gt.distanceSq).map(Fe=>Fe.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=s.ay(i.lat,-85.051129,s.cv),f=this.projection.project(i.lng,c);return new s.P(f.x*this.worldSize,f.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.c6(1,this.center.lat)/this.worldSize}setLocationAtPoint(i,c){let f,v;const b=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;f=(c.x-b.x)/k,v=(c.y-b.y)/k}else{const k=this.pointCoordinate(c),I=this.pointCoordinate(b);f=k.x-I.x,v=k.y-I.y}const w=this.locationCoordinate(i);this.setLocation(new s.ac(w.x-f,w.y-v))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i,c){return this.projection.locationPoint(this,i,c)}locationPoint3D(i,c){return this.projection.locationPoint(this,i,c,!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i,c){return this.coordinateLocation(this.pointCoordinate3D(i,c))}locationCoordinate(i,c){const f=c?s.c6(c,i.lat):void 0,v=this.projection.project(i.lng,i.lat);return new s.ac(v.x,v.y,f)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,c){const f=c??this._centerAltitude,v=[i.x,i.y,0,1],b=[i.x,i.y,1,1];s.aA(v,v,this.pixelMatrixInverse),s.aA(b,b,this.pixelMatrixInverse);const w=b[3];s.cw(v,v,1/v[3]),s.cw(b,b,1/w);const k=v[2],I=b[2];return{p0:v,p1:b,t:k===I?0:(f-k)/(I-k)}}screenPointToMercatorRay(i){const c=[i.x,i.y,0,1],f=[i.x,i.y,1,1];return s.aA(c,c,this.pixelMatrixInverse),s.aA(f,f,this.pixelMatrixInverse),s.cw(c,c,1/c[3]),s.cw(f,f,1/f[3]),c[2]=s.c6(c[2],this._center.lat)*this.worldSize,f[2]=s.c6(f[2],this._center.lat)*this.worldSize,s.cw(c,c,1/this.worldSize),s.cw(f,f,1/this.worldSize),new s.av([c[0],c[1],c[2]],s.au([],s.at([],f,c)))}rayIntersectionCoordinate(i){const{p0:c,p1:f,t:v}=i,b=s.c6(c[2],this._center.lat),w=s.c6(f[2],this._center.lat);return new s.ac(s.ai(c[0],f[0],v)/this.worldSize,s.ai(c[1],f[1],v)/this.worldSize,s.ai(b,w,v))}pointCoordinate(i,c=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,c)}pointCoordinate3D(i,c){if(!this.elevation)return this.pointCoordinate(i,c);let f=this.projection.pointCoordinate3D(this,i.x,i.y);if(f)return new s.ac(f[0],f[1],f[2]);let v=0,b=this.horizonLineFromTop();if(i.y>b)return this.pointCoordinate(i,c);const w=.02*b,k=i.clone();for(let I=0;I<10&&b-v>w;I++){k.y=s.ai(v,b,.66);const L=this.projection.pointCoordinate3D(this,k.x,k.y);L?(b=k.y,f=L):v=k.y}return f?new s.ac(f[0],f[1],f[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){return this.projection.isPointAboveHorizon(this,i)}isPointOnSurface(i){if(i.y<0||i.y>this.height||i.x<0||i.x>this.width)return!1;if(this.elevation||this.zoom>=s.cx)return!this.isPointAboveHorizon(i);const c=this.pointCoordinate(i);return c.y>=0&&c.y<=1}_coordinatePoint(i,c){const f=c&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,v=[i.x*this.worldSize,i.y*this.worldSize,f+i.toAltitude(),1];return s.aA(v,v,this.pixelMatrix),v[3]>0?new s.P(v[0]/v[3],v[1]/v[3]):new s.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:i,left:c}=this._edgeInsets,f=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,b=this.pointLocation3D(new s.P(c,i)),w=this.pointLocation3D(new s.P(v,i)),k=this.pointLocation3D(new s.P(v,f)),I=this.pointLocation3D(new s.P(c,f));let L=Math.min(b.lng,w.lng,k.lng,I.lng),O=Math.max(b.lng,w.lng,k.lng,I.lng),N=Math.min(b.lat,w.lat,k.lat,I.lat),F=Math.max(b.lat,w.lat,k.lat,I.lat);const V=Math.pow(2,-this.zoom)/16*270,Z=this.projection.name==="globe"?1:4,G=(Y,ee,ae,ve,we)=>{const Pe=(Y+ae)/2,Ee=(ee+ve)/2,ke=new s.P(Pe,Ee),{lng:Se,lat:Ae}=this.pointLocation3D(ke),De=Math.max(0,L-Se,N-Ae,Se-O,Ae-F);L=Math.min(L,Se),O=Math.max(O,Se),N=Math.min(N,Ae),F=Math.max(F,Ae),(we<Z||De>V)&&(G(Y,ee,Pe,Ee,we+1),G(Pe,Ee,ae,ve,we+1))};if(G(c,i,v,i,1),G(v,i,v,f,1),G(v,f,c,f,1),G(c,f,c,i,1),this.projection.name==="globe"){const[Y,ee]=s.cy(this);Y?(F=90,O=180,L=-180):ee&&(N=-90,O=180,L=-180)}return new s.aG(new s.cd(L,N),new s.cd(O,F))}_getBoundsRectangular(i,c){const{top:f,left:v}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,w=this.width-this._edgeInsets.right,k=new s.P(v,f),I=new s.P(w,f),L=new s.P(w,b),O=new s.P(v,b);let N=this.pointCoordinate(k,i),F=this.pointCoordinate(I,i);const V=this.pointCoordinate(L,c),Z=this.pointCoordinate(O,c),G=(Y,ee)=>(ee.y-Y.y)/(ee.x-Y.x);return N.y>1&&F.y>=0?N=new s.ac((1-Z.y)/G(Z,N)+Z.x,1):N.y<0&&F.y<=1&&(N=new s.ac(-Z.y/G(Z,N)+Z.x,0)),F.y>1&&N.y>=0?F=new s.ac((1-V.y)/G(V,F)+V.x,1):F.y<0&&N.y<=1&&(F=new s.ac(-V.y/G(V,F)+V.x,0)),new s.aG().extend(this.coordinateLocation(N)).extend(this.coordinateLocation(F)).extend(this.coordinateLocation(Z)).extend(this.coordinateLocation(V))}_getBoundsRectangularTerrain(){const i=this.elevation;if(!i.visibleDemTiles.length||i.isUsingMockSource())return this._getBoundsRectangular(0,0);const c=i.visibleDemTiles.reduce((f,v)=>{if(v.dem){const b=v.dem.tree;f.min=Math.min(f.min,b.minimums[0]),f.max=Math.max(f.max,b.maximums[0])}return f},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(c.min*i.exaggeration(),c.max*i.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(i=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,f=this.height/2-c*(1-this._horizonShift);return i?Math.max(0,f):f}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-85.051129,this.maxLat=s.cv,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.aD(this.minLng)*this.tileSize,this.worldMaxX=s.aD(this.maxLng)*this.tileSize,this.worldMinY=s.aH(this.maxLat)*this.tileSize,this.worldMaxY=s.aH(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,c){return this.projection.createTileMatrix(this,c,i)}calculateDistanceTileData(i){const c=i.key,f=this._distanceTileDataCache;if(f[c])return f[c];const v=i.canonical,b=1/this.height,w=this.cameraWorldSize,k=w/this.zoomScale(v.z),I=(v.x+Math.pow(2,v.z)*i.wrap)*k,L=v.y*k,O=this.point;O.x*=w/this.worldSize,O.y*=w/this.worldSize;const N=this.angle,F=Math.sin(-N),V=-Math.cos(-N);return f[c]={bearing:[F,V],center:[(O.x-I)*b,(O.y-L)*b],scale:k/s.aj*b},f[c]}calculateFogTileMatrix(i){const c=i.key,f=this._fogTileMatrixCache;if(f[c])return f[c];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,i);return s.az(v,this.worldToFogMatrix,v),f[c]=new Float32Array(v),f[c]}calculateProjMatrix(i,c=!1,f=!1){const v=i.key;let b;if(b=f?this._expandedProjMatrixCache:c?this._alignedProjMatrixCache:this._projMatrixCache,b[v])return b[v];const w=this.calculatePosMatrix(i,this.worldSize);let k;return k=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.expandedFarZProjMatrix:c?this.alignedProjMatrix:this.projMatrix,s.az(w,k,w),b[v]=new Float32Array(w),b[v]}calculatePixelsToTileUnitsMatrix(i){const c=i.tileID.key,f=this._pixelsToTileUnitsCache;if(f[c])return f[c];const v=s.cz(i,this);return f[c]=v,f[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const i=1/this.worldSize,c=s.bn([],[i,i,i]);return s.az(c,c,this.globeMatrix),c}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const i=this._elevation;this._updateCameraState();const c=s.c6(1,this._center.lat)*this.worldSize,f=this._computeCameraPosition(c),v=this._camera.forward(),b=s.c6(1,this._center.lat);f[2]/=b,v[2]/=b,s.au(v,v);const w=i.raycast(f,v,i.exaggeration());if(w){const k=s.bE([],f,v,w),I=new s.ac(k[0],k[1],s.c6(k[2],s.aY(k[1]))),L=(I.z+s.ae([I.x-f[0],I.y-f[1],I.z-f[2]*b]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(L),this._centerAltitude=I.toAltitude(),this._center=this.coordinateLocation(I),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(i=!1){if(!this._elevation)return;const c=this._elevation,f=s.c6(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(f),b=c.getAtPointOrZero(new s.ac(...v)),w=this.pixelsPerMeter/this.worldSize*b,k=this._minimumHeightOverTerrain(),I=v[2]-w;if(I<=k)if(I<0||i){const L=this.locationCoordinate(this._center,this._centerAltitude),O=[v[0],v[1],L.z-v[2]],N=s.ae(O);O[2]-=(k-I)/this._pixelsPerMercatorPixel;const F=s.ae(O);if(F===0)return;s.bY(O,O,N/F*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],L.z*this._pixelsPerMercatorPixel-O[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||i){const F=this.center;return F.lat=s.ay(F.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!i)&&(F.lng=s.ay(F.lng,this.minLng,this.maxLng)),this.center=F,void(this._constraining=!1)}const c=this._unmodified,{x:f,y:v}=this.point;let b=0,w=f,k=v;const I=this.width/2,L=this.height/2,O=this.worldMinY*this.scale,N=this.worldMaxY*this.scale;if(v-L<O&&(k=O+L),v+L>N&&(k=N-L),N-O<this.height&&(b=Math.max(b,this.height/(N-O)),k=(N+O)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const F=this.worldMinX*this.scale,V=this.worldMaxX*this.scale,Z=this.worldSize/2-(F+V)/2;w=(f+Z+this.worldSize)%this.worldSize-Z,w-I<F&&(w=F+I),w+I>V&&(w=V-I),V-F<this.width&&(b=Math.max(b,this.width/(V-F)),w=(V+F)/2)}w===f&&k===v||this._allowWorldUnderZoom||(this.center=this.unproject(new s.P(w,k))),b&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(b)),this._constrainCamera(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(Math.max(0,this.height)/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.projection.name==="globe",f=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.c6(1,this.center.lat)/s.c6(1,s.cP));const v=s.cA(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,v),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const b=this.projection.zAxisUnit==="meters"?f:1,w=this._camera.getWorldToCamera(this.worldSize,b);let k;const I=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(I[8]=2*-i.x/this.width,I[9]=2*i.y/this.height,this.isOrthographic){let Ae=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),De=Ae*this.aspect,Ze=-De,Ye=-Ae;De-=i.x,Ze-=i.x,Ae+=i.y,Ye+=i.y,k=this._camera.getCameraToClipOrthographic(Ze,De,Ye,Ae,this._nearZ,this._farZ),((ht,pt,It,Ge)=>{for(let st=0;st<16;st++)ht[st]=s.ai(pt[st],It[st],Ge)})(k,k,I,s.cN(this.pitch>=xo?1:this.pitch/xo))}else k=I;const L=s.cB([],I,w);let O=s.cB([],k,w);if(this.projection.isReprojectedInTileSpace){const Ae=this.locationCoordinate(this.center),De=s.bx([]);s.bo(De,De,[Ae.x*this.worldSize,Ae.y*this.worldSize,0]),s.az(De,De,s.cC(this)),s.bo(De,De,[-Ae.x*this.worldSize,-Ae.y*this.worldSize,0]),s.az(O,O,De),s.az(L,L,De),this.inverseAdjustmentMatrix=s.cD(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=s.cE([],O,[this.worldSize,this.worldSize,this.worldSize/b,1]),this.projMatrix=O,this.invProjMatrix=s.bi(new Float64Array(16),this.projMatrix),c){const Ae=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Ae[8]=2*-i.x/this.width,Ae[9]=2*i.y/this.height,this.expandedFarZProjMatrix=s.cB([],Ae,w)}else this.expandedFarZProjMatrix=this.projMatrix;const N=s.bi([],k);this.frustumCorners=s.cF.fromInvProjectionMatrix(N,this.horizonLineFromTop(),this.height),this.cameraFrustum=s.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!c);const F=new Float32Array(16);s.bx(F),s.cE(F,F,[1,-1,1]),s.cG(F,F,this._pitch),s.by(F,F,this.angle);const V=s.c4(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=s.bw(V);const Z=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;V[8]=2*-i.x/this.width,V[9]=2*(i.y+Z)/this.height,this.skyboxMatrix=s.az(F,V,F);const G=this.point,Y=G.x,ee=G.y,ae=this.width%2/2,ve=this.height%2/2,we=Math.cos(this.angle),Pe=Math.sin(this.angle),Ee=Y-Math.round(Y)+we*ae+Pe*ve,ke=ee-Math.round(ee)+we*ve+Pe*ae,Se=new Float64Array(O);if(s.bo(Se,Se,[Ee>.5?Ee-1:Ee,ke>.5?ke-1:ke,0]),this.alignedProjMatrix=Se,O=s.bz(),s.cE(O,O,[this.width/2,-this.height/2,1]),s.bo(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=s.bz(),s.cE(O,O,[1,-1,1]),s.bo(O,O,[-1,-1,0]),s.cE(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O,this.pixelMatrix=s.az(new Float64Array(16),this.labelPlaneMatrix,L),this._calcFogMatrices(),this._distanceTileDataCache={},O=s.bi(new Float64Array(16),this.pixelMatrix),!O)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=O,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.cH(this);const Ae=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.ad(Ae,Ae,w),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=O;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSizeForFog,c=this.cameraPixelsPerMeter,f=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,b=[i,i,c];s.bY(b,b,v),s.bY(f,f,-1),s.cI(f,f,b);const w=s.bz();s.bo(w,w,f),s.cE(w,w,b),this.mercatorFogMatrix=w,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,c,v)}_computeCameraPosition(i){const c=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,f=this._camera.forward(),v=this.point,b=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-i/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-f[0]*b,v.y/this.worldSize-f[1]*b,i/this.worldSize*this._centerAltitude-f[2]*b]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),f=this._camera.position[2],v=i[2];let b=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(b=Math.min((c-f)/v,1)),this._camera.position=s.bE([],this._camera.position,i,b),this._updateStateFromCamera()}_updateStateFromCamera(){const i=this._camera.position,c=this._camera.forward(),{pitch:f,bearing:v}=this._camera.getPitchBearing(),b=s.c6(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,w=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.al(this._maxPitch)),k=Math.max((i[2]-b)/Math.cos(f),w),I=this._zoomFromMercatorZ(k);s.bE(i,i,c,k),this._pitch=s.ay(f,s.al(this.minPitch),s.al(this.maxPitch)),this.angle=s.bX(v,-Math.PI,Math.PI),this._setZoom(s.ay(I,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.ac(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(Math.max(0,i)*this.tileSize))}zoomFromMercatorZAdjusted(i){let c=0,f=s.cx,v=0,b=1/0;for(;f-c>1e-6&&f>c;){const w=c+.5*(f-c),k=this.tileSize*Math.pow(2,w),I=this.getCameraToCenterDistance(this.projection,w,k),L=this.scaleZoom(I/(Math.max(0,i)*this.tileSize)),O=Math.abs(w-L);O<b&&(b=O,v=w),w<L?c=w:f=w}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,c){const f=Math.min(i.x,c.x),v=Math.max(i.x,c.x),b=Math.min(i.y,c.y),w=Math.max(i.y,c.y);if(b<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new s.P(f,b),new s.P(v,w),new s.P(f,w),new s.P(v,b)],I=this.renderWorldCopies?-3:0,L=this.renderWorldCopies?4:1;for(const O of k){const N=this.pointRayIntersection(O);if(N.t<0)return!0;const F=this.rayIntersectionCoordinate(N);if(F.x<I||F.y<0||F.x>L||F.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.cJ(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.P(0,0),new s.P(this.width,this.height))}zoomDeltaToMovement(i,c){const f=s.ae(s.at([],this._camera.position,i)),v=this._zoomFromMercatorZ(f)+c;return f-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const i=function([c,f,v],b){const w=[c,f,v,1];s.aA(w,w,b);const k=w[3]=Math.max(w[3],1e-6);return w[0]/=k,w[1]/=k,w[2]/=k,w}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.P(i[0],i[1])}{const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,i))}}getCameraToCenterDistance(i,c=this.zoom,f=this.worldSize){const v=s.cA(i,c,this.width,this.height,1024),b=i.pixelSpaceConversion(this.center.lat,f,v);let w=.5/Math.tan(.5*this._fov)*this.height*b;return this.isOrthographic&&(w=s.ai(1,w,s.cN(this.pitch>=xo?1:this.pitch/xo))),w}getWorldToCameraMatrix(){const i=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.az(i,i,this.globeMatrix),i}getFrustum(i){return s.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,this.projection.zAxisUnit==="meters")}}const fa=(p,i)=>{if(i>0&&p.terrain&&s.w("Cutoff is currently disabled on terrain"),i<=0||p.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const c=p.transform,f=Math.max(Math.abs(c._zoom-(p.minCutoffZoom-1)),1),v=c.isLODDisabled(!1)?s.af(60,45,c.pitch):s.af(30,15,c.pitch),b=c._farZ-c._nearZ,w=i*c.height,k=((1-(I=v))*c.cameraToCenterDistance+I*(c._farZ+w))*f;var I;return{shouldRenderCutoff:v<1,uniformValues:{u_cutoff_params:[c._nearZ,c._farZ,(k-c._nearZ)/b,(k-w-c._nearZ)/b]}}},jo={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class xd{constructor(i,c){this.aabb=i,this.lastCascade=c}}class r1{add(i,c){const f=this.receivers[i.key];f!==void 0?(f.aabb.min[0]=Math.min(f.aabb.min[0],c.min[0]),f.aabb.min[1]=Math.min(f.aabb.min[1],c.min[1]),f.aabb.min[2]=Math.min(f.aabb.min[2],c.min[2]),f.aabb.max[0]=Math.max(f.aabb.max[0],c.max[0]),f.aabb.max[1]=Math.max(f.aabb.max[1],c.max[1]),f.aabb.max[2]=Math.max(f.aabb.max[2],c.max[2])):this.receivers[i.key]=new xd(c,null)}clear(){this.receivers={}}get(i){return this.receivers[i.key]}computeRequiredCascades(i,c,f){const v=s.cW.fromPoints(i.points);let b=0;for(const w in this.receivers){const k=this.receivers[w];if(!k||!v.intersectsAabb(k.aabb))continue;k.aabb.min=v.closestPoint(k.aabb.min),k.aabb.max=v.closestPoint(k.aabb.max);const I=k.aabb.getCorners();for(let L=0;L<f.length;L++){let O=!0;for(const N of I){const F=[N[0]*c,N[1]*c,N[2]];if(s.ad(F,F,f[L].matrix),F[0]<-1||F[0]>1||F[1]<-1||F[1]>1){O=!1;break}}if(k.lastCascade=L,b=Math.max(b,L),O)break}}return b+1}}class i1{constructor(i){this.painter=i,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new r1,this._depthMode=new en(i.context.gl.LEQUAL,en.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,i.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),i.tp.registerParameter(jo,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),i.tp.registerParameter(jo,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),i.tp.registerParameter(jo,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),i.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const i of this._cascades)i.texture.destroy(),i.framebuffer.destroy();this._cascades=[]}updateShadowParameters(i,c){const f=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!c||!c.properties)return;const v=c.properties.get("shadow-intensity");if(!c.shadowsEnabled()||v<=0||(this._shadowLayerCount=f.style.order.reduce((Z,G)=>{const Y=f.style._mergedLayers[G];return Z+(Y.hasShadowPass()&&!Y.isHidden(i.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const b=f.context,w=jo.shadowMapResolution,k=jo.shadowMapResolution;if(this._cascades.length===0||jo.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Z=0;Z<jo.cascadeCount;++Z){const G=f._shadowMapDebug,Y=b.gl,ee=b.createFramebuffer(w,k,G,"texture"),ae=new s.T(b,{width:w,height:k,data:null},Y.DEPTH_COMPONENT16);if(ee.depthAttachment.set(ae.texture),G){const ve=new s.T(b,{width:w,height:k,data:null},Y.RGBA8);ee.colorAttachment.set(ve.texture)}this._cascades.push({framebuffer:ee,texture:ae,matrix:[],far:0,boundingSphereRadius:0,frustum:new s.cn,scale:0})}}this.shadowDirection=Zc(c);let I=0;if(i.elevation){const Z=i.elevation,G=[1e4,-1e4];Z.visibleDemTiles.filter(Y=>Y.dem).forEach(Y=>{const ee=Y.dem.tree;G[0]=Math.min(G[0],ee.minimums[0]),G[1]=Math.max(G[1],ee.maximums[0])}),G[0]!==1e4&&(I=(G[1]-G[0])*Z.exaggeration())}const L=1.5*i.cameraToCenterDistance,O=3*L,N=new Float64Array(16);for(let Z=0;Z<this._cascades.length;++Z){const G=this._cascades[Z];let Y=i.height/50,ee=1;jo.cascadeCount===1?ee=O:Z===0?ee=L:(Y=L,ee=O);const[ae,ve]=Xc(i,this.shadowDirection,Y,ee,jo.shadowMapResolution,I);G.scale=i.scale,G.matrix=ae,G.boundingSphereRadius=ve,s.bi(N,G.matrix),G.frustum=s.cn.fromInvProjectionMatrix(N,1,0,!0),G.far=ee}const F=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[F].far,this._cascades[F].far],this._uniformValues.u_shadow_intensity=v,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/jo.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=jo.shadowMapResolution,this._uniformValues.u_shadowmap_0=Xo.ShadowMap0,this._uniformValues.u_shadowmap_1=Xo.ShadowMap0+1,this._groundShadowTiles=f.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const V=f.transform.elevation;for(const Z of this._groundShadowTiles){let G={min:0,max:0};if(V){const Y=V.getMinMaxForTile(Z);Y&&(G=Y)}this.addShadowReceiver(Z.toUnwrapped(),G.min,G.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(i){this._enabled=i}drawShadowPass(i,c){if(!this.enabled)return;const f=this.painter,v=f.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(f.transform.getFrustum(0),f.transform.worldSize,this._cascades),v.viewport.set([0,0,jo.shadowMapResolution,jo.shadowMapResolution]);for(let b=0;b<this._numCascadesToRender;++b){f.currentShadowCascade=b,v.bindFramebuffer.set(this._cascades[b].framebuffer.framebuffer),v.clear({color:s.am.white,depth:1});for(const w of i.order){const k=i._mergedLayers[w];if(!k.hasShadowPass()||k.isHidden(f.transform.zoom))continue;const I=i.getLayerSourceCache(k),L=I?c[I.id]:void 0;(k.type==="model"||L&&L.length)&&f.renderLayer(f,I,k,L)}}f.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const i=this.painter,c=i.style,f=i.context,v=f.gl,b=c.directionalLight,w=c.ambientLight;if(!b||!w)return;const k=[],I=fa(i,i.longestCutoffRange);I.shouldRenderCutoff&&k.push("RENDER_CUTOFF"),k.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&k.push("NORMAL_OFFSET");const L=lc(c,b,w),O=new en(v.LEQUAL,en.ReadOnly,i.depthRangeFor3D),N=new $n({func:v.EQUAL,mask:255},0,255,v.KEEP,v.KEEP,v.KEEP);for(const F of this._groundShadowTiles){const V=F.toUnwrapped(),Z=i.isTileAffectedByFog(F),G=i.getOrCreateProgram("groundShadow",{defines:k,overrideFog:Z});this.setupShadows(V,G),i.uploadCommonUniforms(f,G,V,null,I);const Y={u_matrix:i.transform.calculateProjMatrix(V),u_ground_shadow_factor:L};G.draw(i,v.TRIANGLES,O,N,or.multiply,An.disabled,Y,"ground_shadow",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments,null,i.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?or.unblended:or.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(i){const c=this.painter.transform,f=c.calculatePosMatrix(i,c.worldSize);return s.az(f,this._cascades[this.painter.currentShadowCascade].matrix,f),Float32Array.from(f)}calculateShadowPassMatrixFromMatrix(i){return s.az(i,this._cascades[this.painter.currentShadowCascade].matrix,i),Float32Array.from(i)}setupShadows(i,c,f,v=0){if(!this.enabled)return;const b=this.painter.transform,w=this.painter.context,k=w.gl,I=this._uniformValues,L=new Float64Array(16),O=b.calculatePosMatrix(i,b.worldSize);for(let N=0;N<this._cascades.length;N++)s.az(L,this._cascades[N].matrix,O),I[N===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(L),w.activeTexture.set(k.TEXTURE0+Xo.ShadowMap0+N),this._cascades[N].texture.bindExtraParam(k.LINEAR,k.LINEAR,k.CLAMP_TO_EDGE,k.CLAMP_TO_EDGE,k.GREATER);if(this.useNormalOffset=!!f,this.useNormalOffset){const N=s.cU(i.canonical),F=2/b.tileSize*s.aj/jo.shadowMapResolution,V=F*this._cascades[0].boundingSphereRadius,Z=F*this._cascades[this._cascades.length-1].boundingSphereRadius,G=(f==="vector-tile"?1:3)/Math.pow(2,v-i.canonical.z-(1-b.zoom+Math.floor(b.zoom)));I.u_shadow_normal_offset=[N,V*G,Z*G],I.u_shadow_bias=[6e-5,.0012,.012]}else I.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(w,I)}setupShadowsFromMatrix(i,c,f=!1){if(!this.enabled)return;const v=this.painter.context,b=v.gl,w=this._uniformValues,k=new Float64Array(16);for(let I=0;I<jo.cascadeCount;I++)s.az(k,this._cascades[I].matrix,i),w[I===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(k),v.activeTexture.set(b.TEXTURE0+Xo.ShadowMap0+I),this._cascades[I].texture.bindExtraParam(b.LINEAR,b.LINEAR,b.CLAMP_TO_EDGE,b.CLAMP_TO_EDGE,b.GREATER);if(this.useNormalOffset=f,f){const I=jo.normalOffset;w.u_shadow_normal_offset=[1,I,I],w.u_shadow_bias=[6e-5,.0012,.012]}else w.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(v,w)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(i,c,f,v){if(v[2]>=0)return{};const b=function(I,L,O){const N=O/(1<<I.canonical.z);return new s.cW([I.canonical.x*N+I.wrap*O,I.canonical.y*N+I.wrap*O,0],[(I.canonical.x+1)*N+I.wrap*O,(I.canonical.y+1)*N+I.wrap*O,L])}(i,c,f).getCorners(),w=c/-v[2];v[0]<0?(s.cV(b[0],b[0],[v[0]*w,0,0]),s.cV(b[3],b[3],[v[0]*w,0,0])):v[0]>0&&(s.cV(b[1],b[1],[v[0]*w,0,0]),s.cV(b[2],b[2],[v[0]*w,0,0])),v[1]<0?(s.cV(b[0],b[0],[0,v[1]*w,0]),s.cV(b[1],b[1],[0,v[1]*w,0])):v[1]>0&&(s.cV(b[2],b[2],[0,v[1]*w,0]),s.cV(b[3],b[3],[0,v[1]*w,0]));const k={};return k.vertices=b,k.planes=[fl(b[1],b[0],b[4]),fl(b[2],b[1],b[5]),fl(b[3],b[2],b[6]),fl(b[0],b[3],b[7])],k}addShadowReceiver(i,c,f){this._receivers.add(i,s.cW.fromTileIdAndHeight(i,c,f))}getMaxCascadeForTile(i){const c=this._receivers.get(i);return c&&c.lastCascade?c.lastCascade:0}}function fl(p,i,c){const f=s.at([],c,i),v=s.at([],p,i),b=s.bF([],f,v),w=s.ae(b);return w===0?[0,0,1,0]:(s.bY(b,b,1/w),[b[0],b[1],b[2],-s.bG(b,i)])}function Zc(p){const i=p.properties.get("direction"),c=s.cR(i.x,i.y,i.z);c[2]=s.ay(c[2],0,75);const f=s.cT([c[0],c[1],c[2]]);return s.cS(f.x,f.y,f.z)}function lc(p,i,c){const f=i.properties.get("color-use-theme")==="none",v=i.properties.get("color"),b=i.properties.get("intensity"),w=i.properties.get("direction"),k=[w.x,w.y,w.z],I=c.properties.get("color-use-theme")==="none",L=c.properties.get("color"),O=c.properties.get("intensity"),N=Math.max(s.bG([0,0,1],k),0),F=[0,0,0];s.bY(F,L.toPremultipliedRenderColor(I?null:p.getLut(i.scope)).toArray01Linear().slice(0,3),O);const V=[0,0,0];return s.bY(V,v.toPremultipliedRenderColor(f?null:p.getLut(c.scope)).toArray01Linear().slice(0,3),N*b),s.cY([F[0]>0?F[0]/(F[0]+V[0]):0,F[1]>0?F[1]/(F[1]+V[1]):0,F[2]>0?F[2]/(F[2]+V[2]):0])}function Xc(p,i,c,f,v,b){const w=p.zoom,k=p.scale,I=p.worldSize,L=1/I,O=p.aspect,N=Math.sqrt(1+O*O)*Math.tan(.5*p.fovX),F=N*N,V=f-c,Z=f+c;let G,Y;F>V/Z?(G=f,Y=f*N):(G=.5*Z*(1+F),Y=.5*Math.sqrt(V*V+2*(f*f+c*c)*F+Z*Z*F*F));const ee=p.projection.pixelsPerMeter(p.center.lat,I),ae=p._camera.getCameraToWorldMercator(),ve=[0,0,-G*L];s.ad(ve,ve,ae);let we=Y*L;const Pe=p._edgeInsets;if(!(Pe.left===0&&Pe.top===0&&Pe.right===0&&Pe.bottom===0||Pe.left===Pe.right&&Pe.top===Pe.bottom)){const St=p._camera.getWorldToCamera(p.worldSize,p.projection.zAxisUnit==="meters"?ee:1),Bt=p._camera.getCameraToClipPerspective(p._fov,p.width/p.height,c,f);Bt[8]=2*-p.centerOffset.x/p.width,Bt[9]=2*p.centerOffset.y/p.height;const mt=new Float64Array(16);s.cB(mt,Bt,St);const Ot=new Float64Array(16);s.bi(Ot,mt);const nn=s.cn.fromInvProjectionMatrix(Ot,I,w,!0);for(const rn of nn.points){const Yt=((Ee=rn)[0]/=k,Ee[1]/=k,Ee[2]=s.c6(Ee[2],p._center.lat),Ee);we=Math.max(we,s.bZ(s.cX([],ve,Yt)))}}var Ee;we*=v/(v-1);const ke=Math.acos(i[2]),Se=Math.atan2(-i[0],-i[1]),Ae=new $s;Ae.position=ve,Ae.setPitchBearing(ke,Se);const De=Ae.getWorldToCamera(I,ee),Ze=we*I,Ye=Math.min(p._mercatorZfromZoom(17)*I*-2,-2*Ze),ht=Ae.getCameraToClipOrthographic(-Ze,Ze,-Ze,Ze,Ye,(Ze+b*ee)/i[2]),pt=new Float64Array(16);s.az(pt,ht,De);const It=s.cS(Math.floor(1e6*ve[0])/1e6*I,Math.floor(1e6*ve[1])/1e6*I,0),Ge=.5*v,st=[0,0,0];s.ad(st,It,pt),s.bY(st,st,Ge);const Fe=[Math.floor(st[0]),Math.floor(st[1]),Math.floor(st[2])],gt=[0,0,0];s.at(gt,st,Fe),s.bY(gt,gt,-1/Ge);const nt=new Float64Array(16);return s.bx(nt),s.bo(nt,nt,gt),s.az(pt,nt,pt),[pt,Ze]}class g0 extends s.E{constructor(i){super(),this.requestManager=i,this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}loadModel(i,c){return s.aS(this.requestManager.transformRequest(c,s.R.Model).url).then(f=>{if(!f)return;const v=s.aT(f),b=new s.aU(i,void 0,void 0,v);return b.computeBoundsAndApplyParent(),b}).catch(f=>{if(f&&f.status===404)return null;this.fire(new s.z(new Error(`Could not load model ${i} from ${c}: ${f.message}`)))})}load(i,c,f={forceReload:!1}){this.models[c]||(this.models[c]={});const v=Object.keys(i),b=[],w=[];for(const k of v){const I=i[k];this.hasURLBeenRequested(I)&&!f.forceReload||(this.modelByURL[I]={modelId:k,scope:c},b.push(this.loadModel(k,I)),w.push(k)),this.models[c][k]||(this.models[c][k]={model:null,numReferences:1})}this.numModelsLoading[c]=(this.numModelsLoading[c]||0)+w.length,Promise.allSettled(b).then(k=>{for(let I=0;I<k.length;I++){const{status:L}=k[I];if(L==="rejected")continue;const{value:O}=k[I];this.models[c][w[I]]||(this.models[c][w[I]]={model:null,numReferences:1}),this.models[c][w[I]].model=O}this.numModelsLoading[c]-=w.length,this.fire(new s.A("data",{dataType:"style"}))}).catch(k=>{this.fire(new s.z(new Error(`Could not load models: ${k.message}`)))})}isLoaded(){for(const i in this.numModelsLoading)if(this.numModelsLoading[i]>0)return!1;return!0}hasModel(i,c,f={exactIdMatch:!1}){return!!(f.exactIdMatch?this.getModel(i,c):this.getModelByURL(this.modelUris[c][i]))}getModel(i,c){return this.models[c]||(this.models[c]={}),this.models[c][i]?this.models[c][i].model:void 0}getModelByURL(i){if(!i)return null;const c=this.modelByURL[i];return c?this.models[c.scope][c.modelId].model:null}hasModelBeenAdded(i,c){return this.models[c]&&this.models[c][i]!==void 0}getModelURIs(i){return this.modelUris[i]||{}}addModel(i,c,f){this.models[f]||(this.models[f]={}),this.modelUris[f]||(this.modelUris[f]={});const v=this.requestManager.normalizeModelURL(c);if((this.hasModel(i,f,{exactIdMatch:!0})||this.hasModelBeenAdded(i,f))&&this.modelUris[f][i]===v)this.models[f][i].numReferences++;else if(this.hasURLBeenRequested(v)){const{scope:b,modelId:w}=this.modelByURL[v];this.models[b][w].numReferences++}else this.modelUris[f][i]=v,this.load({[i]:this.modelUris[f][i]},f)}addModelURLs(i,c){this.models[c]||(this.models[c]={}),this.modelUris[c]||(this.modelUris[c]={});const f=this.modelUris[c];for(const v in i)f[v]=this.requestManager.normalizeModelURL(i[v])}reloadModels(i){this.load(this.modelUris[i],i,{forceReload:!0})}addModelsFromBucket(i,c){this.models[c]||(this.models[c]={}),this.modelUris[c]||(this.modelUris[c]={});const f={};for(const v of i)this.hasModel(v,c,{exactIdMatch:!0})||this.hasURLBeenRequested(v)?this.models[c][v].numReferences++:this.modelUris[c][v]&&!this.hasURLBeenRequested(v)?f[v]=this.modelUris[c][v]:!this.hasURLBeenRequested(v)&&s.cZ(v,!1)&&(this.modelUris[c][v]=this.requestManager.normalizeModelURL(v),f[v]=this.modelUris[c][v]);this.load(f,c)}hasURLBeenRequested(i){return this.modelByURL[i]!==void 0}removeModel(i,c,f=!1){if(this.models[c]&&this.models[c][i]&&(this.models[c][i].numReferences--,this.models[c][i].numReferences===0)){const v=this.modelUris[c][i];f||delete this.modelUris[c][i],delete this.modelByURL[v];const b=this.models[c][i].model;if(!b)return;delete this.models[c][i],b.destroy()}}destroy(){for(const i of Object.keys(this.models))for(const c of Object.keys(this.models[i])){const f=this.models[i][c].model;delete this.models[i][c],f&&f.destroy()}this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}listModels(i){return this.models[i]||(this.models[i]={}),Object.keys(this.models[i])}upload(i,c){this.models[c]||(this.models[c]={});for(const f in this.models[c])this.models[c][f].model&&this.models[c][f].model.upload(i.context)}}const Wh=new s.a7({data:new s.a8(s.a5.colorTheme.data)}),Wf={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function $a(p){return p=p||{},Object.assign(p,Wf)}class o1 extends s.E{constructor(i){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._floorplanStates={},s.aV(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=i,this._checkFloorplanVisible(),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(i=>{i.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new s.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=i.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=i.stylesheet.indoor.buildingFeaturesetId,this._scope=i.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:i=>(i.feature&&i.feature.properties.floorplan&&this.selectFloorplan(i.feature.properties.floorplan),!0)}),this._checkFloorplanVisible()}_onMove(){this._checkFloorplanVisible()}_checkFloorplanVisible(){if(!this._queryFeatureSetId||!this._map.isStyleLoaded())return;const i=()=>{this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new s.A("floorplangone"))};if(this._map.transform.zoom<13)return void i();const c={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},f=this._map.transform.width,v=this._map.transform.height,b=f*(2/3),w=v*(2/3),k=.5*(f-b),I=.5*(v-w),L=[new s.P(k,I),new s.P(k+b,I+w)],O=this._map.queryRenderedFeatures(L,c);O.length>0?this._selectedFloorplan&&O[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=O[0],this._floorplanSelected()):i()}_floorplanSelected(){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._floorplanStates[this._indoorData.id]=this._floorplanStates[this._indoorData.id]||{},this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[this._indoorData.id]]);const i=this._floorplanStates[this._indoorData.id].selectedBuilding,c=i?this._indoorData.buildings.find(k=>k.id===i):this._indoorData.buildings.length>0?this._indoorData.buildings[0]:null,f=this._floorplanStates[this._indoorData.id].selectedLevel,v=this._indoorData.levels.find(k=>k.id===f),b=this._indoorData.levels.find(k=>!(!c||!c.levels)&&Number(k.levelOrder)===0&&c.levels.includes(k.id)),w=v?v.id:b?b.id:void 0;this.fire(new s.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:w})),c&&this._buildingSelected(c,!1),w&&this._levelSelected(w)}_buildingSelected(i,c){if(!i||!i.id)return void console.warn("IndoorManager: Building or building id is undefined");c&&i.extent&&this._map.fitBounds(i.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=i?i.id:void 0;const f=this._indoorData.levels.filter(v=>i.levels.includes(v.id));this.fire(new s.A("buildingselected",{buildingId:i.id,levels:f}))}_levelSelected(i){const c=this._indoorData.levels.find(f=>f.id===i);c?(this._updateLevels(c,!0),this.fire(new s.A("levelselected",{levelId:c.id}))):console.warn(`IndoorManager: Level with ID ${i} not found in the current floorplan.`)}_updateLevels(i,c){if(!i||!i.id)throw new Error("IndoorManager: Selected level or level ID is undefined");function f(L){const O=L.indexOf("/floor/");if(O===-1)return L;const N=O+7,F=L.indexOf("/",N);return F===-1?L.slice(N):L.slice(N,F)}this._floorplanStates[this._indoorData.id].selectedLevel=i.id;const v=[],b={},w={},k={},I={};for(const L of this._indoorData.levels){if(v.push(L.id),b[L.id]=L.levelOrder>=0?3*Math.abs(L.levelOrder+1):3*Math.abs(L.levelOrder),w[L.id]=L.levelOrder>=0?3*L.levelOrder:0,this.mergeFloors){const O=f(i.id),N=f(L.id);k[L.id]=N===O?"true":"false"}else k[L.id]=L.id===i.id?"true":"false";I[L.id]=L.levelOrder<i.levelOrder?"true":"false"}this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",v]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",b]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",w]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",k]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",I]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",i.levelOrder<0)}selectFloorplan(i){const c={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},f=[new s.P(0,0),new s.P(this._map.transform.width,this._map.transform.height)],v=this._map.queryRenderedFeatures(f,c);if(v.length>0){for(const b of v)if(JSON.parse(b.properties["indoor-data"]).id===i){this._selectedFloorplan=b,this._floorplanSelected();break}}}selectBuilding(i){const c=this._indoorData.buildings.find(f=>f.id===i);this._buildingSelected(c,!0)}selectLevel(i){this._levelSelected(i)}}function s1(p){if(!p.metadata||!p.metadata.content_area)return;const i=s.q.devicePixelRatio,{left:c,top:f,width:v,height:b}=p.metadata.content_area,w=c*i,k=f*i;return[w,k,w+v*i,k+b*i]}function y0(p){if(p)return p.map(([i,c])=>[i*s.q.devicePixelRatio,c*s.q.devicePixelRatio])}class v0{constructor(i,c,f){this.id=i,this.scope=c,this.sourceCache=f,this.pendingRequests=new Set,this.missingRequests=new Set}addPendingRequest(i){this.missingRequests.has(i.name)||this.pendingRequests.has(i.name)||this.pendingRequests.add(i.name)}hasPendingRequests(){return this.pendingRequests.size>0}resolvePendingRequests(){const i=new Map;if(!this.sourceCache.loaded())return i;const c=this.sourceCache.getVisibleCoordinates();if(c.length===0)return i;const f=this.sourceCache.getSource();if(!(f instanceof ul))return i;const v=c.map(w=>this.sourceCache.getTile(w)),b=f.getImages(v,Array.from(this.pendingRequests));for(const[w,k]of b)i.set(s.I.from({name:w,iconsetId:this.id}),k),this.pendingRequests.delete(w);for(const w of this.pendingRequests)this.missingRequests.add(w);return this.pendingRequests.clear(),i}}const cc=(p,i)=>Te(p,i&&i.filter(c=>c.identifier!=="source.canvas")),Kf=s.aF(wr,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport","addIconset","removeIconset"]),b0=s.aF(wr,["setCenter","setZoom","setBearing","setPitch"]),Kh=new Set(["background","sky","slot","custom"]),Zf={version:8,layers:[],sources:{}},Xf={duration:300,delay:0};class Uo extends s.E{constructor(i,c={}){super(),this.map=i,this.scope=c.scope||"",this.globalId=null,this.fragments=[],this.importDepth=c.importDepth||0,this.importsCache=c.importsCache||new Map,this.resolvedImports=c.resolvedImports||new Set,this.transition=s.h({},Xf),this._buildingIndex=new h0(this),this.crossTileSymbolIndex=new os,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=c.styleChanges||new qe,this.dispatcher=c.dispatcher?c.dispatcher:new s.D(s.c$(),this),c.imageManager?this.imageManager=c.imageManager:(this.imageManager=new Xt(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.addScope(this.scope),this.glyphManager=c.glyphManager?c.glyphManager:new s.d0(i._requestManager,c.localFontFamily?s.d1.all:c.localIdeographFontFamily?s.d1.ideographs:s.d1.none,c.localFontFamily||c.localIdeographFontFamily),c.modelManager?this.modelManager=c.modelManager:(this.modelManager=new g0(i._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._availableModels={},this._order=[],this._markersNeedUpdate=!1,this.options=c.configOptions?c.configOptions:new Map,this._configDependentLayers=c.configDependentLayers?c.configDependentLayers:new Set,this._config=c.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:c.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=c.initialConfig,this.dispatcher.broadcast("setReferrer",s.d2());const f=this;this._rtlTextPluginCallback=Uo.registerForPluginStateChange(v=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(b,w)=>{if(s.d3(b),w&&w.every(k=>k))for(const k in f._sourceCaches){const I=f._sourceCaches[k],L=I.getSource().type;L!=="vector"&&L!=="geojson"||I.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const b=this.getOwnSource(v.sourceId);if(b&&b.vectorLayerIds)for(const w in this._layers){const k=this._layers[w];k.source===b.id&&this._validateLayer(k)}})}load(i){return i?(typeof i=="string"?this.loadURL(i):this.loadJSON(i),this):this}_getGlobalId(i){if(!i)return null;if(typeof i=="string"){if(s.j(i))return i;const c=s.d4(i);if(!c.startsWith("http"))try{return new URL(c,location.href).toString()}catch{return c}return c}return`json://${s.d5(JSON.stringify(i))}`}_diffStyle(i,c,f){this.globalId=this._getGlobalId(i);const v=(b,w)=>{try{w(null,this.setState(b,f))}catch(k){w(k,!1)}};if(typeof i=="string"){const b=this.map._requestManager.normalizeStyleURL(i),w=this.map._requestManager.transformRequest(b,s.R.Style);s.n(w,(k,I)=>{k?this.fire(new s.z(k)):I&&v(I,c)})}else typeof i=="object"&&v(i,c)}loadURL(i,c={}){this.fire(new s.A("dataloading",{dataType:"style"}));const f=typeof c.validate=="boolean"?c.validate:!s.j(i);this.globalId=this._getGlobalId(i),i=this.map._requestManager.normalizeStyleURL(i,c.accessToken),this.resolvedImports.add(i);const v=this.importsCache.get(i);if(v)return this._load(v,f);const b=this.map._requestManager.transformRequest(i,s.R.Style);this._request=s.n(b,(w,k)=>{if(this._request=null,w)this.fire(new s.z(w));else if(k)return this.importsCache.set(i,k),this._load(k,f)})}loadJSON(i,c={}){this.fire(new s.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(i),this._request=s.q.frame(()=>{this._request=null,this._load(i,c.validate!==!1)})}loadEmpty(){this.fire(new s.A("dataloading",{dataType:"style"})),this._load(Zf,!1)}_loadImports(i,c,f){if(this.importDepth>=4)return s.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const v=[];for(const b of i){const w=this._createFragmentStyle(b),k=new Promise(O=>{w.once("style.import.load",O),w.once("error",O)}).then(()=>this.mergeAll());if(v.push(k),this.resolvedImports.has(b.url)){w.loadEmpty();continue}const I=b.data||this.importsCache.get(b.url);I?(w.loadJSON(I,{validate:c}),this._isInternalStyle(I)&&(w.globalId=null)):b.url?w.loadURL(b.url,{validate:c}):w.loadEmpty();const L={style:w,id:b.id,config:b.config};if(f){const O=this.fragments.findIndex(({id:N})=>N===f);this.fragments=this.fragments.slice(0,O).concat(L).concat(this.fragments.slice(O))}else this.fragments.push(L)}return Promise.allSettled(v)}getImportGlobalIds(i=this,c=new Set){for(const f of i.fragments)f.style.globalId&&c.add(f.style.globalId),this.getImportGlobalIds(f.style,c);return[...c.values()]}_createFragmentStyle(i){const c=this.scope?s.C(i.id,this.scope):i.id;let f;const v=this._initialConfig&&this._initialConfig[c];(i.config||v)&&(f=s.h({},i.config,v));const b=new Uo(this.map,{scope:c,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:f,configOptions:this.options,colorThemeOverride:i["color-theme"],configDependentLayers:this._configDependentLayers});return b.setEventedParent(this.map,{style:b}),b}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(i){return this.isRootStyle()&&(i.fragment||!!i.schema&&i.fragment!==!1)}_load(i,c){const f=i.indoor?$a(i.schema):i.schema;if(this._isInternalStyle(i)){const w=s.h({},Zf,{imports:[{id:"basemap",data:i,url:""}]});return void this._load(w,c)}if(this.updateConfig(this._config,f),c&&cc(this,ls(i)))return;this._loaded=!0,this.stylesheet=s.d6(i);const v=()=>{for(const L in i.sources)this.addSource(L,i.sources[L],{validate:!1,isInitialLoad:!0});if(i.iconsets)for(const L in i.iconsets)this.addIconset(L,i.iconsets[L]);i.sprite?this._loadIconset(i.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(i.glyphs);const w=ud(this.stylesheet.layers);if(this._order=w.map(L=>L.id),this.stylesheet.light&&s.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const L=this.stylesheet.lights[0];this.light=new et(L.properties,L.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new et(this.stylesheet.light)),this._layers={};for(const L of w){const O=s.db(L,this.scope,this._styleColorTheme.lut,this.options);O.configDependencies.size!==0&&this._configDependentLayers.add(O.fqid),O.setEventedParent(this,{layer:{id:O.id}}),this._layers[O.id]=O;const N=this.getOwnLayerSourceCache(O),F=!!this.directionalLight&&this.directionalLight.shadowsEnabled();N&&O.canCastShadows()&&F&&(N.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.addModelURLs(this.stylesheet.models);const k=this.stylesheet.terrain;k&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(k,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new s.A("data",{dataType:"style"}));const I=this.isRootStyle();i.imports?this._loadImports(i.imports,c).then(()=>{this._reloadImports(),this.fire(new s.A(I?"style.load":"style.import.load"))}).catch(L=>{this.fire(new s.z(new Error("Failed to load imports",L))),this.fire(new s.A(I?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new s.A(I?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const b=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(b){const w=this._evaluateColorThemeData(b);this._loadColorTheme(w).then(()=>{v()}).catch(k=>{s.w(`Couldn't load color theme from the stylesheet: ${k}`),v()})}else this._styleColorTheme.lut=null,v()}isRootStyle(){return this.importDepth===0}mergeAll(){let i,c,f,v,b,w,k,I,L,O;const N={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(F=>{if(F.stylesheet){if(F.light!=null&&(i=F.light),F.stylesheet.lights)for(const V of F.stylesheet.lights)V.type==="ambient"&&F.ambientLight!=null&&(c=F.ambientLight),V.type==="directional"&&F.directionalLight!=null&&(f=F.directionalLight);v=this._prioritizeTerrain(v,F.terrain,F.stylesheet.terrain),F.stylesheet.fog&&F.fog!=null&&(b=F.fog),F.stylesheet.snow&&F.snow!=null&&(w=F.snow),F.stylesheet.rain&&F.rain!=null&&(k=F.rain),F.stylesheet.camera!=null&&(O=F.stylesheet.camera),F.stylesheet.projection!=null&&(I=F.stylesheet.projection),F.stylesheet.transition!=null&&(L=F.stylesheet.transition),N[F.scope]=F._styleColorTheme}}),this.light=i,this.ambientLight=c,this.directionalLight=f,this.fog=b,this.snow=w,this.rain=k,this._styleColorThemeForScope=N,v===null?delete this.terrain:this.terrain=v,this.camera=O||{"camera-projection":"perspective"},this.projection=I||{name:"mercator"},this.transition=s.h({},Xf,L),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(i){const c=f=>{for(const v of f.fragments)c(v.style);i(f)};c(this)}_prioritizeTerrain(i,c,f){const v=i&&i.drapeRenderMode===0;return f===null?c&&c.drapeRenderMode===0?c:v?i:null:c!=null&&(!i||v||c&&c.drapeRenderMode===1)?c:i}mergeTerrain(){let i;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(c=>{i=this._prioritizeTerrain(i,c.terrain,c.stylesheet.terrain)}),i===null?delete this.terrain:this.terrain=i}mergeProjection(){let i;this.forEachFragmentStyle(c=>{c.stylesheet.projection!=null&&(i=c.stylesheet.projection)}),this.projection=i||{name:"mercator"}}mergeSources(){const i={},c={},f={};this.forEachFragmentStyle(v=>{for(const b in v._sourceCaches){const w=s.C(b,v.scope);i[w]=v._sourceCaches[b]}for(const b in v._otherSourceCaches){const w=s.C(b,v.scope);c[w]=v._otherSourceCaches[b]}for(const b in v._symbolSourceCaches){const w=s.C(b,v.scope);f[w]=v._symbolSourceCaches[b]}}),this._mergedSourceCaches=i,this._mergedOtherSourceCaches=c,this._mergedSymbolSourceCaches=f}mergeLayers(){const i={},c=[],f={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(b=>{for(const w of b._order){const k=b._layers[w];if(k.type==="slot"){const I=s.d7(w);if(i[I])continue;i[I]=[]}k.slot&&i[k.slot]?i[k.slot].push(k):c.push(k)}}),this._mergedOrder=[];const v=(b=[])=>{for(const w of b)if(w.type==="slot"){const k=s.d7(w.id);i[k]&&v(i[k]),this._mergedSlots.push(k)}else{const k=s.C(w.id,w.scope);this._mergedOrder.push(k),f[k]=w,w.is3D(!!this.terrain)&&(this._has3DLayers=!0),w.type==="circle"&&(this._hasCircleLayers=!0),w.type==="symbol"&&(this._hasSymbolLayers=!0),w.type==="clip"&&(this._clipLayerPresent=!0)}};v(c),this._mergedOrder.sort((b,w)=>{const k=f[b],I=f[w];return k.hasInitialOcclusionOpacityProperties?I.is3D(!!this.terrain)?1:0:k.is3D(!!this.terrain)&&I.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=f,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(i){return this.stylesheet.camera=s.h({},this.stylesheet.camera,i),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(i){return i.data?function(c,f,v,b){const w=s.h({},f);for(const I of Object.keys(s.a5.colorTheme))w[I]===void 0&&(w[I]=s.a5.colorTheme[I].default);const k=new s.a6(Wh,c,new Map(v));return k.setTransitionOrValue(w,v),k.untransitioned().possiblyEvaluate(new s.aa(0,{worldview:void 0}))}(this.scope,i,this.options).get("data"):null}_loadColorTheme(i){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const c=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((f,v)=>{const b="data:image/png;base64,";if(!i||i.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void f();let w=i;w.startsWith(b)||(w=b+w);const k=s.I.from("mapbox-reserved-lut"),I=new Image;I.src=w,I.onerror=()=>{this._styleColorTheme.lutLoading=!1,v(new Error("Failed to load image data"))},I.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==c)return void f();this._styleColorTheme.lutLoading=!1;const{width:L,height:O,data:N}=s.q.getImageData(I);if(O>32)return void v(new Error("The height of the image must be less than or equal to 32 pixels."));if(L!==O*O)return void v(new Error("The width of the image must be equal to the height squared."));this.getImage(k)&&this.removeImage(k),this.addImage(k,{data:new s.r({width:L,height:O},N),pixelRatio:1,sdf:!1,usvg:!1,version:0});const F=this.imageManager.getImage(k,this.scope);F?(this._styleColorTheme.lut={image:F.data,data:i},f()):v(new Error("Missing LUT image."))}})}getLut(i){const c=this._styleColorThemeForScope[i];return c?c.lut:null}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(i){this._spriteRequest=function(c,f,v){let b,w,k;const I=s.q.devicePixelRatio>1?"@2x":"";let L=s.n(f.transformRequest(f.normalizeSpriteURL(c,I,".json"),s.R.SpriteJSON),(F,V)=>{L=null,k||(k=F,b=V,N())}),O=s.o(f.transformRequest(f.normalizeSpriteURL(c,I,".png"),s.R.SpriteImage),(F,V)=>{O=null,k||(k=F,w=V,N())});function N(){if(k)v(k);else if(b&&w){const F=s.q.getImageData(w),V={};for(const Z in b){const{width:G,height:Y,x:ee,y:ae,sdf:ve,pixelRatio:we,stretchX:Pe,stretchY:Ee,content:ke}=b[Z],Se=new s.r({width:G,height:Y});s.r.copy(F,Se,{x:ee,y:ae},{x:0,y:0},{width:G,height:Y},null),V[Z]={data:Se,pixelRatio:we,sdf:ve,stretchX:Pe,stretchY:Ee,content:ke,usvg:!1}}v(null,V)}}return{cancel(){L&&(L.cancel(),L=null),O&&(O.cancel(),O=null)}}}(i,this.map._requestManager,(c,f)=>{if(this._spriteRequest=null,c)this.fire(new s.z(c));else if(f){const v=new Map;for(const b in f)v.set(s.I.from(b),f[b]);this.addImages(v)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new s.A("data",{dataType:"style"}))})}addIconset(i,c){if(c.type==="sprite")return void this._loadSprite(c.url);const f=this.getOwnSourceCache(c.source);if(!f)return void this.fire(new s.z(new Error(`Source "${c.source}" as specified by iconset "${i}" does not exist and cannot be used as an iconset source`)));const v=f.getSource();if(v.type!=="raster-array")return void this.fire(new s.z(new Error(`Source "${c.source}" as specified by iconset "${i}" is not a "raster-array" source and cannot be used as an iconset source`)));v.partial=!1;const b=new v0(i,this.scope,f);this.imageManager.addImageProvider(b,this.scope)}removeIconset(i){this.imageManager.removeImageProvider(i,this.scope)}_loadIconset(i){if(!s.j(i)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(i);const c=this.map._spriteFormat==="auto";var f,v;this._spriteRequest=(v=(b,w)=>{if(this._spriteRequest=null,b)c?this._loadSprite(i):this.fire(new s.z(b));else if(w){const k=new Map;for(const I in w)k.set(s.I.from(I),w[I]);this.addImages(k)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new s.A("data",{dataType:"style"}))},s.br((f=this.map._requestManager).transformRequest(f.normalizeIconsetURL(i),s.R.Iconset),(b,w)=>{if(b)return void v(b);const k={},I=s.c_(new s.bq(w));for(const L of I.icons){const O={version:1,pixelRatio:s.q.devicePixelRatio,content:s1(L),stretchX:L.metadata?y0(L.metadata.stretch_x_areas):void 0,stretchY:L.metadata?y0(L.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:L};k[L.name]=O}v(null,k)}))}_validateLayer(i){const c=this.getOwnSource(i.source);if(!c)return;const f=i.sourceLayer;f&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(f)===-1)&&this.fire(new s.z(new Error(`Source layer "${f}" does not exist on source "${c.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:i}of this.fragments)if(!i.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((i,c)=>{const f=this.fragments[c];return f&&f.style&&(i.data=f.style.serialize()),i})}_serializeSources(){const i={};for(const c in this._sourceCaches){const f=this._sourceCaches[c].getSource();i[f.id]||(i[f.id]=f.serialize())}return i}_serializeLayers(i){const c=[];for(const f of i){const v=this._layers[f];v&&v.type!=="custom"&&c.push(v.serialize())}return c}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(i){return i?this.order:this._mergedOrder}isLayerDraped(i){return!!this.terrain&&i.isDraped(this.getLayerSourceCache(i))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(i){const c=this.getOwnLayer(i);if(c)return c;this.fire(new s.z(new Error(`The layer '${i}' does not exist in the map's style.`)))}_checkSource(i){const c=this.getOwnSource(i);if(c)return c;this.fire(new s.z(new Error(`The source '${i}' does not exist in the map's style.`)))}precompilePrograms(i,c){const f=this.map.painter;if(f)for(let v=i.minzoom||0;v<(i.maxzoom||25.5);v++){const b=i.getProgramIds();if(b)for(const w of b){const k=i.getDefaultProgramParams(w,c.zoom,this._styleColorTheme.lut);k&&(f.style=this,this.fog&&(f._fogVisible=!0,k.overrideFog=!0,f.getOrCreateProgram(w,k)),f._fogVisible=!1,k.overrideFog=!1,f.getOrCreateProgram(w,k),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(k.overrideRtt=!0,f.getOrCreateProgram(w,k)))}}}update(i){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(i),this.directionalLight&&this.directionalLight.recalculate(i);const c=this.calculateLightsBrightness();i.brightness=c||0,c!==this._brightness&&(this._brightness=c,this.dispatcher.broadcast("setBrightness",c)),i.worldview!==this._worldview&&(this._worldview=i.worldview,this.dispatcher.broadcast("setWorldview",this._worldview));const f=this._changes.isDirty();let v=!1;if(this._changes.isDirty()){const k=this._changes.getLayerUpdatesByScope();for(const I in k){const{updatedIds:L,removedIds:O}=k[I];(L||O)&&(this._updateWorkerLayers(I,L,O),v=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(i),this.light&&this.light.updateTransitions(i),this.ambientLight&&this.ambientLight.updateTransitions(i),this.directionalLight&&this.directionalLight.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this.snow&&this.snow.updateTransitions(i),this.rain&&this.rain.updateTransitions(i),this._changes.reset()}const b={};for(const k in this._mergedSourceCaches){const I=this._mergedSourceCaches[k];b[k]=I.used,I.used=!1,I.tileCoverLift=0}for(const k of this._mergedOrder){const I=this._mergedLayers[k];if(I.recalculate(i,this._availableImages),!I.isHidden(i.zoom)){const L=this.getLayerSourceCache(I);L&&(L.used=!0,L.tileCoverLift=Math.max(L.tileCoverLift,I.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(I,i)}):this.precompilePrograms(I,i))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&v&&this.mergeLayers();const w=this.imageManager.getPendingImageProviders();for(const k of w)k.sourceCache.used=!0;for(const k in b){const I=this._mergedSourceCaches[k];b[k]!==I.used&&I.getSource().fire(new s.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:I.getSource().id}))}this.light&&this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.snow&&this.snow.recalculate(i),this.rain&&this.rain.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),f&&this.fire(new s.A("data",{dataType:"style"}))}updateImageProviders(){const i=this.imageManager.getPendingImageProviders();for(const c of i){const f=c.resolvePendingRequests(),v=this.getFragmentStyle(c.scope);v&&v.addImages(f)}}_updateTilesForChangedImages(){const i={};for(const c in this._mergedSourceCaches){const f=this._mergedSourceCaches[c].getSource().scope;i[f]=i[f]||this._changes.getUpdatedImages(f),i[f].length!==0&&this._mergedSourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i[f])}for(const c in i)this._changes.resetUpdatedImages(c)}_updateWorkerLayers(i,c,f){const v=this.getFragmentStyle(i);v&&this.dispatcher.broadcast("updateLayers",{layers:c?v._serializeLayers(c):[],scope:i,removedIds:f||[],options:v.options})}setState(i,c){if(this._checkLoaded(),cc(this,ls(i)))return!1;(i=s.d6(i)).layers=ud(i.layers);const f=function(w,k){if(!w)return[{command:wr.setStyle,args:[k]}];let I=[];try{if(!s.bv(w.version,k.version))return[{command:wr.setStyle,args:[k]}];if(s.bv(w.center,k.center)||I.push({command:wr.setCenter,args:[k.center]}),s.bv(w.zoom,k.zoom)||I.push({command:wr.setZoom,args:[k.zoom]}),s.bv(w.bearing,k.bearing)||I.push({command:wr.setBearing,args:[k.bearing]}),s.bv(w.pitch,k.pitch)||I.push({command:wr.setPitch,args:[k.pitch]}),s.bv(w.sprite,k.sprite)||I.push({command:wr.setSprite,args:[k.sprite]}),s.bv(w.glyphs,k.glyphs)||I.push({command:wr.setGlyphs,args:[k.glyphs]}),s.bv(w.imports,k.imports)||function(V=[],Z=[],G){Z=Z||[];const Y=(V=V||[]).map(tc),ee=Z.map(tc),ae=V.reduce(dl,{}),ve=Z.reduce(dl,{}),we=Y.slice();let Pe,Ee,ke,Se;for(Pe=0,Ee=0;Pe<Y.length;Pe++)ke=Y[Pe],ve.hasOwnProperty(ke)?Ee++:(G.push({command:wr.removeImport,args:[ke]}),we.splice(we.indexOf(ke,Ee),1));for(Pe=0,Ee=0;Pe<ee.length;Pe++)ke=ee[ee.length-1-Pe],we[we.length-1-Pe]!==ke&&(ae.hasOwnProperty(ke)?(G.push({command:wr.removeImport,args:[ke]}),we.splice(we.lastIndexOf(ke,we.length-Ee),1)):Ee++,Se=we[we.length-Pe],G.push({command:wr.addImport,args:[ve[ke],Se]}),we.splice(we.length-Pe,0,ke));for(const Ae of Z){const De=ae[Ae.id];De&&(delete De.data,s.bv(De,Ae)||G.push({command:wr.updateImport,args:[Ae.id,Ae]}))}}(w.imports,k.imports,I),s.bv(w.transition,k.transition)||I.push({command:wr.setTransition,args:[k.transition]}),s.bv(w.light,k.light)||I.push({command:wr.setLight,args:[k.light]}),s.bv(w.fog,k.fog)||I.push({command:wr.setFog,args:[k.fog]}),s.bv(w.snow,k.snow)||I.push({command:wr.setSnow,args:[k.snow]}),s.bv(w.rain,k.rain)||I.push({command:wr.setRain,args:[k.rain]}),s.bv(w.projection,k.projection)||I.push({command:wr.setProjection,args:[k.projection]}),s.bv(w.lights,k.lights)||I.push({command:wr.setLights,args:[k.lights]}),s.bv(w.camera,k.camera)||I.push({command:wr.setCamera,args:[k.camera]}),s.bv(w.iconsets,k.iconsets)||function(V,Z,G){let Y;for(Y in Z=Z||{},V=V||{})V.hasOwnProperty(Y)&&(Z.hasOwnProperty(Y)||G.push({command:wr.removeIconset,args:[Y]}));for(Y in Z){if(!Z.hasOwnProperty(Y))continue;const ee=Z[Y];V.hasOwnProperty(Y)?s.bv(V[Y],ee)||(G.push({command:wr.removeIconset,args:[Y]}),G.push({command:wr.addIconset,args:[Y,ee]})):G.push({command:wr.addIconset,args:[Y,ee]})}}(w.iconsets,k.iconsets,I),!s.bv(w["color-theme"],k["color-theme"]))return[{command:wr.setStyle,args:[k]}];const L={},O=[];(function(V,Z,G,Y){let ee;for(ee in Z=Z||{},V=V||{})V.hasOwnProperty(ee)&&(Z.hasOwnProperty(ee)||Uc(ee,G,Y));for(ee in Z){if(!Z.hasOwnProperty(ee))continue;const ae=Z[ee];V.hasOwnProperty(ee)?s.bv(V[ee],ae)||(V[ee].type==="geojson"&&ae.type==="geojson"&&e1(V,Z,ee)?G.push({command:wr.setGeoJSONSourceData,args:[ee,ae.data]}):dd(ee,Z,G,Y)):Fh(ee,Z,G)}})(w.sources,k.sources,O,L);const N=[];w.layers&&w.layers.forEach(V=>{V.source&&L[V.source]?I.push({command:wr.removeLayer,args:[V.id]}):N.push(V)});let F=w.terrain;F&&L[F.source]&&(I.push({command:wr.setTerrain,args:[void 0]}),F=void 0),I=I.concat(O),s.bv(F,k.terrain)||I.push({command:wr.setTerrain,args:[k.terrain]}),function(V,Z,G){Z=Z||[];const Y=(V=V||[]).map(tc),ee=Z.map(tc),ae=V.reduce(dl,{}),ve=Z.reduce(dl,{}),we=Y.slice(),Pe=Object.create(null);let Ee,ke,Se,Ae,De,Ze,Ye;for(Ee=0,ke=0;Ee<Y.length;Ee++)Se=Y[Ee],ve.hasOwnProperty(Se)?ke++:(G.push({command:wr.removeLayer,args:[Se]}),we.splice(we.indexOf(Se,ke),1));for(Ee=0,ke=0;Ee<ee.length;Ee++)Se=ee[ee.length-1-Ee],we[we.length-1-Ee]!==Se&&(ae.hasOwnProperty(Se)?(G.push({command:wr.removeLayer,args:[Se]}),we.splice(we.lastIndexOf(Se,we.length-ke),1)):ke++,Ze=we[we.length-Ee],G.push({command:wr.addLayer,args:[ve[Se],Ze]}),we.splice(we.length-Ee,0,Se),Pe[Se]=!0);for(Ee=0;Ee<ee.length;Ee++)if(Se=ee[Ee],Ae=ae[Se],De=ve[Se],!Pe[Se]&&!s.bv(Ae,De))if(s.bv(Ae.source,De.source)&&s.bv(Ae["source-layer"],De["source-layer"])&&s.bv(Ae.type,De.type)){for(Ye in hd(Ae.layout,De.layout,G,Se,null,wr.setLayoutProperty),hd(Ae.paint,De.paint,G,Se,null,wr.setPaintProperty),s.bv(Ae.slot,De.slot)||G.push({command:wr.setSlot,args:[Se,De.slot]}),s.bv(Ae.filter,De.filter)||G.push({command:wr.setFilter,args:[Se,De.filter]}),s.bv(Ae.minzoom,De.minzoom)&&s.bv(Ae.maxzoom,De.maxzoom)||G.push({command:wr.setLayerZoomRange,args:[Se,De.minzoom,De.maxzoom]}),Ae)Ae.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&Ye!=="slot"&&(Ye.indexOf("paint.")===0?hd(Ae[Ye],De[Ye],G,Se,Ye.slice(6),wr.setPaintProperty):s.bv(Ae[Ye],De[Ye])||G.push({command:wr.setLayerProperty,args:[Se,Ye,De[Ye]]}));for(Ye in De)De.hasOwnProperty(Ye)&&!Ae.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&Ye!=="slot"&&(Ye.indexOf("paint.")===0?hd(Ae[Ye],De[Ye],G,Se,Ye.slice(6),wr.setPaintProperty):s.bv(Ae[Ye],De[Ye])||G.push({command:wr.setLayerProperty,args:[Se,Ye,De[Ye]]}))}else G.push({command:wr.removeLayer,args:[Se]}),Ze=we[we.lastIndexOf(Se)+1],G.push({command:wr.addLayer,args:[De,Ze]})}(N,k.layers,I)}catch(L){console.warn("Unable to compute style diff:",L),I=[{command:wr.setStyle,args:[k]}]}return I}(this.serialize(),i).filter(w=>!(w.command in b0));if(f.length===0)return!1;const v=f.filter(w=>!(w.command in Kf));if(v.length>0)throw new Error(`Unimplemented: ${v.map(w=>w.command).join(", ")}.`);const b=[];return f.forEach(w=>{b.push(this[w.command](...w.args))}),c&&Promise.all(b).then(c).catch(c),this.stylesheet=i,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}_updateWorkerModels(){this._availableModels=this.modelManager.getModelURIs(this.scope),this.dispatcher.broadcast("setModels",{scope:this.scope,models:this._availableModels})}addImages(i){for(const[c,f]of i.entries()){if(this.getImage(c))return this.fire(new s.z(new Error(`An image with the name "${c.name}" already exists.`)));this.imageManager.addImage(c,this.scope,f),this._changes.updateImage(c,this.scope)}return this._updateWorkerImages(),this.fire(new s.A("data",{dataType:"style"})),this}addImage(i,c){return this.getImage(i)?this.fire(new s.z(new Error(`An image with the name "${i.name}" already exists.`))):(this.imageManager.addImage(i,this.scope,c),this._changes.updateImage(i,this.scope),this._updateWorkerImages(),this.fire(new s.A("data",{dataType:"style"})),this)}updateImage(i,c,f=!1){this.imageManager.updateImage(i,this.scope,c),f&&(this._changes.updateImage(i,this.scope),this._updateWorkerImages(),this.fire(new s.A("data",{dataType:"style"})))}getImage(i){return this.imageManager.getImage(i,this.scope)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i,this.scope),this._changes.updateImage(i,this.scope),this._updateWorkerImages(),this.fire(new s.A("data",{dataType:"style"})),this):this.fire(new s.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModelURLs(i){return this.modelManager.addModelURLs(i,this.scope),this._updateWorkerModels(),this.fire(new s.A("data",{dataType:"style"})),this}addModel(i,c,f={}){return this._checkLoaded(),this._validate(xe,`models.${i}`,c,null,f)||(this.modelManager.addModel(i,c,this.scope),this.fire(new s.A("data",{dataType:"style"}))),this}hasModel(i){return this.modelManager.hasModel(i,this.scope)}removeModel(i){return this.hasModel(i)?(this.modelManager.removeModel(i,this.scope),this.fire(new s.A("data",{dataType:"style"})),this):this.fire(new s.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(i,c,f={}){if(this._checkLoaded(),this.getOwnSource(i)!==void 0)throw new Error(`There is already a source with ID "${i}".`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(zf,`sources.${i}`,c,null,f))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=id(i,c,this.dispatcher,this);v.scope=this.scope,v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(v.id),source:v.serialize(),sourceId:v.id}));const b=w=>{const k=(w?"symbol:":"other:")+v.id,I=s.C(k,this.scope),L=this._sourceCaches[k]=new is(I,v,w);(w?this._symbolSourceCaches:this._otherSourceCaches)[v.id]=L,L.onAdd(this.map)};b(!1),c.type!=="vector"&&c.type!=="geojson"||b(!0),v.onAdd&&v.onAdd(this.map),f.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(i){this._checkLoaded();const c=this.getOwnSource(i);if(!c)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===i)return this.fire(new s.z(new Error(`Source "${i}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===i)return this.fire(new s.z(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));if(this.stylesheet.iconsets){const v=Object.entries(this.stylesheet.iconsets).find(([b,w])=>w.type==="source"&&w.source===i);if(v)return this.fire(new s.z(new Error(`Source "${i}" cannot be removed while iconset "${v[0]}" is using it.`)))}const f=this.getOwnSourceCaches(i);for(const v of f){const b=s.d7(v.id);delete this._sourceCaches[b],this._changes.discardSourceCacheUpdate(v.id),v.fire(new s.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles()}return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],this.mergeSources(),c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(i,c){this._checkLoaded(),this.getOwnSource(i).setData(c),this._changes.setDirty()}getOwnSource(i){const c=this.getOwnSourceCache(i);return c&&c.getSource()}getOwnSources(){const i=[];for(const c in this._otherSourceCaches){const f=this.getOwnSourceCache(c);f&&i.push(f.getSource())}return i}areTilesLoaded(){const i=this._mergedSourceCaches;for(const c in i){const f=i[c]._tiles;for(const v in f){const b=f[v];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}setLights(i){if(this._checkLoaded(),!i)return delete this.ambientLight,void delete this.directionalLight;const c=this._getTransitionParameters();for(const b of i){if(this._validate(Yl,"lights",b))return;switch(b.type){case"ambient":if(this.ambientLight){const w=this.ambientLight;w.set(b),w.updateTransitions(c)}else this.ambientLight=new zr(b,Zn||(Zn=new s.a7({color:new s.a8(s.a5.properties_light_ambient.color),"color-use-theme":new s.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new s.a8(s.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const w=this.directionalLight;w.set(b),w.updateTransitions(c)}else this.directionalLight=new zr(b,Yr||(Yr=new s.a7({direction:new s.an(s.a5.properties_light_directional.direction),color:new s.a8(s.a5.properties_light_directional.color),"color-use-theme":new s.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new s.a8(s.a5.properties_light_directional.intensity),"cast-shadows":new s.a8(s.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new s.a8(s.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new s.a8(s.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const f=Object.assign(c,{worldview:this.map.getWorldview()}),v=new s.aa(this.z||0,f);this.ambientLight&&this.ambientLight.recalculate(v),this.directionalLight&&this.directionalLight.recalculate(v),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const i=this.directionalLight,c=this.ambientLight;if(!i||!c)return;const f=F=>.2126*(F[0]<=.03928?F[0]/12.92:Math.pow((F[0]+.055)/1.055,2.4))+.7152*(F[1]<=.03928?F[1]/12.92:Math.pow((F[1]+.055)/1.055,2.4))+.0722*(F[2]<=.03928?F[2]/12.92:Math.pow((F[2]+.055)/1.055,2.4)),v=i.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),b=i.properties.get("intensity"),w=i.properties.get("direction"),k=1-s.cR(w.x,w.y,w.z)[2]/90,I=f(v)*b*k,L=c.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),O=c.properties.get("intensity"),N=f(L)*O;return Number(((I+N)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const i=[];return this.directionalLight&&i.push(this.directionalLight.get()),this.ambientLight&&i.push(this.ambientLight.get()),i}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(i){if(i==null||i===""&&this.isRootStyle())return this;if(s.d8(i)){const c=s.d9(i),f=this.fragments.find(({id:b})=>b===c);if(!f)return;const v=s.d7(i);return f.style.getFragmentStyle(v)}{const c=this.fragments.find(({id:f})=>f===i);return c?c.style:void 0}}setFeaturesetSelectors(i){if(!i)return;const c={},f=(v,b="")=>`${v}::${b}`;this._featuresetSelectors={};for(const v in i){const b=this._featuresetSelectors[v]=[];for(const w of i[v].selectors){if(w.featureNamespace){const I=this.getOwnLayer(w.layer);if(!I){s.w(`Layer is undefined for selector: ${w.layer}`);continue}const L=f(I.source,I.sourceLayer);if(L in c&&c[L]!==w.featureNamespace){s.w(`"featureNamespace ${w.featureNamespace} of featureset ${v}'s selector is not associated to the same source, skip this selector`);continue}c[L]=w.featureNamespace}let k;if(w.properties)for(const I in w.properties){const L=s.X(w.properties[I]);L.result==="success"&&(k=k||{},k[I]=L.value)}b.push({layerId:w.layer,namespace:w.featureNamespace,properties:k,uniqueFeatureID:w._uniqueFeatureID})}}}getFeaturesetDescriptors(i){const c=this.getFragmentStyle(i);if(!c||!c.stylesheet.featuresets)return[];const f=[];for(const v in c.stylesheet.featuresets)f.push({featuresetId:v,importId:c.scope?c.scope:void 0});return f}getFeaturesetLayers(i,c){const f=this.getFragmentStyle(c),v=f.stylesheet.featuresets;if(!v||!v[i])return this.fire(new s.z(new Error(`The featureset '${i}' does not exist in the map's style and cannot be queried.`))),[];const b=[];for(const w of v[i].selectors){const k=f.getOwnLayer(w.layer);k&&b.push(k)}return b}getConfigProperty(i,c){const f=this.getFragmentStyle(i);if(!f)return null;const v=s.C(c,f.scope),b=f.options.get(v),w=b?b.value||b.default:null;return w?w.serialize():null}setConfigProperty(i,c,f){const v=this.getFragmentStyle(i);if(!v)return;const b=v.stylesheet.indoor?$a(v.stylesheet.schema):v.stylesheet.schema;if(!b||!b[c])return;const w=s.X(f);if(w.result!=="success")return void cc(this,w.value);const k=w.value.expression,I=s.C(c,v.scope),L=v.options.get(I);if(!L)return;let O;const{minValue:N,maxValue:F,stepValue:V,type:Z,values:G}=b[c],Y=s.X(b[c].default);Y.result==="success"&&(O=Y.value.expression),O?(this.options.set(I,Object.assign({},L,{value:k,default:O,minValue:N,maxValue:F,stepValue:V,type:Z,values:G})),this.updateConfigDependencies(c)):this.fire(new s.z(new Error(`No schema defined for the config option "${c}" in the "${i}" fragment.`)))}getConfig(i){const c=this.getFragmentStyle(i);if(!c)return null;const f=c.stylesheet.schema;if(!f)return null;const v={};for(const b in f){const w=s.C(b,c.scope),k=c.options.get(w),I=k?k.value||k.default:null;v[b]=I?I.serialize():null}return v}setConfig(i,c){const f=this.getFragmentStyle(i);f&&(f.updateConfig(c,f.stylesheet.schema),this.updateConfigDependencies())}getSchema(i){const c=this.getFragmentStyle(i);return c?c.stylesheet.schema:null}setSchema(i,c){const f=this.getFragmentStyle(i);f&&(f.stylesheet.schema=c,f.updateConfig(f._config,c),this.updateConfigDependencies())}updateConfig(i,c){if(this._config=i,i||c)if(c)for(const f in c){let v,b;const w=s.X(c[f].default);if(w.result==="success"&&(v=w.value.expression),i&&i[f]!==void 0){const F=s.X(i[f]);F.result==="success"&&(b=F.value.expression)}const{minValue:k,maxValue:I,stepValue:L,type:O,values:N}=c[f];if(v){const F=s.C(f,this.scope);this.options.set(F,{default:v,value:b,minValue:k,maxValue:I,stepValue:L,type:O,values:N})}else this.fire(new s.z(new Error(`No schema defined for config option "${f}".`)))}else this.fire(new s.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(i){for(const c of this._configDependentLayers){const f=this.getLayer(c);if(f){if(i&&!f.configDependencies.has(i))continue;f.possiblyEvaluateVisibility(),this._updateLayer(f)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(c=>{const f=c._styleColorTheme.colorThemeOverride?c._styleColorTheme.colorThemeOverride:c._styleColorTheme.colorTheme;if(f){const v=c._evaluateColorThemeData(f);(!c._styleColorTheme.lut&&v!==""||c._styleColorTheme.lut&&v!==c._styleColorTheme.lut.data)&&c.setColorTheme(f)}}),this._changes.setDirty()}addLayer(i,c,f={}){this._checkLoaded();const v=i.id;if(this._layers[v])return void this.fire(new s.z(new Error(`Layer with id "${v}" already exists on this map`)));let b;if(i.type==="custom"){if(cc(this,s.da(i)))return;b=s.db(i,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof i.source=="object"&&(this.addSource(v,i.source),i=s.d6(i),i=s.h(i,{source:v})),this._validate(Cr,`layers.${v}`,i,{arrayIndex:-1},f))return;b=s.db(i,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(b),b.setEventedParent(this,{layer:{id:v}})}b.configDependencies.size!==0&&this._configDependentLayers.add(b.fqid);let w=this._order.length;if(c){const O=this._order.indexOf(c);if(O===-1)return void this.fire(new s.z(new Error(`Layer with id "${c}" does not exist on this map.`)));b.slot===this._layers[c].slot?w=O:s.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(w,0,v),this._layerOrderChanged=!0,this._layers[v]=b;const k=this.getOwnLayerSourceCache(b),I=!!this.directionalLight&&this.directionalLight.shadowsEnabled();k&&b.canCastShadows()&&I&&(k.castsShadows=!0);const L=this._changes.getRemovedLayer(b);if(L&&b.source&&k&&b.type!=="custom"){this._changes.discardLayerRemoval(b);const O=s.C(b.source,b.scope);L.type!==b.type?this._changes.updateSourceCache(O,"clear"):(this._changes.updateSourceCache(O,"reload"),k.pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map),b.scope=this.scope,this.mergeLayers()}moveLayer(i,c){this._checkLoaded();const f=this._checkLayer(i);if(!f||i===c)return;const v=this._order.indexOf(i);this._order.splice(v,1);let b=this._order.length;if(c){const w=this._order.indexOf(c);if(w===-1)return void this.fire(new s.z(new Error(`Layer with id "${c}" does not exist on this map.`)));f.slot===this._layers[c].slot?b=w:s.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(b,0,i),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(i){this._checkLoaded();const c=this._checkLayer(i);if(!c)return;c.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),delete this._layers[i],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(c.fqid),this._changes.removeLayer(c);const v=this.getOwnLayerSourceCache(c);if(v&&v.castsShadows){let b=!1;for(const w in this._layers)if(this._layers[w].source===c.source&&this._layers[w].canCastShadows()){b=!0;break}v.castsShadows=b}c.onRemove&&c.onRemove(this.map),this.mergeLayers()}getOwnLayer(i){return this._layers[i]}hasLayer(i){return i in this._mergedLayers}hasLayerType(i){for(const c in this._layers)if(this._layers[c].type===i)return!0;return!1}setLayerZoomRange(i,c,f){this._checkLoaded();const v=this._checkLayer(i);v&&(v.minzoom===c&&v.maxzoom===f||(c!=null&&(v.minzoom=c),f!=null&&(v.maxzoom=f),this._updateLayer(v)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(i,c){this._checkLoaded();const f=this._checkLayer(i);f&&f.slot!==c&&(f.slot=c,this._updateLayer(f))}setFilter(i,c,f={}){this._checkLoaded();const v=this._checkLayer(i);if(v&&!s.bv(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(rt,`layers.${v.id}.filter`,c,{layerType:v.type},f)||(v.filter=s.d6(c),this._updateLayer(v)))}getFilter(i){const c=this._checkLayer(i);if(c)return s.d6(c.filter)}setLayoutProperty(i,c,f,v={}){this._checkLoaded();const b=this._checkLayer(i);if(b&&!s.bv(b.getLayoutProperty(c),f)){if(f!=null&&(!v||v.validate!==!1)&&cc(b,le.call(ls,{key:`layers.${i}.layout.${c}`,layerType:b.type,objectKey:c,value:f,styleSpec:s.a5,style:{glyphs:!0,sprite:!0}})))return;b.setLayoutProperty(c,f),b.configDependencies.size!==0&&this._configDependentLayers.add(b.fqid),this._updateLayer(b)}}getLayoutProperty(i,c){const f=this._checkLayer(i);if(f)return f.getLayoutProperty(c)}setPaintProperty(i,c,f,v={}){this._checkLoaded();const b=this._checkLayer(i);if(!b||s.bv(b.getPaintProperty(c),f)||f!=null&&(!v||v.validate!==!1)&&cc(b,Q.call(ls,{key:`layers.${i}.paint.${c}`,layerType:b.type,objectKey:c,value:f,styleSpec:s.a5})))return;const w=b.setPaintProperty(c,f);b.configDependencies.size!==0&&this._configDependentLayers.add(b.fqid),w&&this._updateLayer(b),this._changes.updatePaintProperties(b)}getPaintProperty(i,c){const f=this._checkLayer(i);if(f)return f.getPaintProperty(c)}setFeatureState(i,c){if(this._checkLoaded(),"target"in i){if("featuresetId"in i.target){const{featuresetId:I,importId:L}=i.target,O=this.getFragmentStyle(L),N=O.getFeaturesetLayers(I);for(const{source:F,sourceLayer:V}of N)O.setFeatureState({id:i.id,source:F,sourceLayer:V},c)}else if("layerId"in i.target){const{layerId:I}=i.target,L=this.getLayer(I);this.setFeatureState({id:i.id,source:L.source,sourceLayer:L.sourceLayer},c)}return}const f=i.source,v=i.sourceLayer,b=this._checkSource(f);if(!b)return;const w=b.type;if(w==="geojson"&&v)return void this.fire(new s.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(w==="vector"&&!v)return void this.fire(new s.z(new Error("The sourceLayer parameter must be provided for vector source types.")));i.id===void 0&&this.fire(new s.z(new Error("The feature id parameter must be provided.")));const k=this.getOwnSourceCaches(f);for(const I of k)I.setFeatureState(v,i.id,c)}removeFeatureState(i,c){if(this._checkLoaded(),"target"in i){if("featuresetId"in i.target){const{featuresetId:I,importId:L}=i.target,O=this.getFragmentStyle(L),N=O.getFeaturesetLayers(I);for(const{source:F,sourceLayer:V}of N)O.removeFeatureState({id:i.id,source:F,sourceLayer:V},c)}else if("layerId"in i.target){const{layerId:I}=i.target,L=this.getLayer(I);this.removeFeatureState({id:i.id,source:L.source,sourceLayer:L.sourceLayer},c)}return}const f=i.source,v=this._checkSource(f);if(!v)return;const b=v.type,w=b==="vector"?i.sourceLayer:void 0;if(b==="vector"&&!w)return void this.fire(new s.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof i.id!="string"&&typeof i.id!="number")return void this.fire(new s.z(new Error("A feature id is required to remove its specific state property.")));const k=this.getOwnSourceCaches(f);for(const I of k)I.removeFeatureState(w,i.id,c)}getFeatureState(i){if(this._checkLoaded(),"target"in i){let b;if("featuresetId"in i.target){const{featuresetId:w,importId:k}=i.target,I=this.getFragmentStyle(k),L=I.getFeaturesetLayers(w);for(const{source:O,sourceLayer:N}of L){const F=I.getFeatureState({id:i.id,source:O,sourceLayer:N});if(F&&!b)b=F;else if(!s.bv(b,F))return void this.fire(new s.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in i.target){const{layerId:w}=i.target,k=this.getLayer(w);b=this.getFeatureState({id:i.id,source:k.source,sourceLayer:k.sourceLayer})}return b}const c=i.source,f=i.sourceLayer,v=this._checkSource(c);if(v){if(v.type!=="vector"||f)return i.id===void 0&&this.fire(new s.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(c)[0].getFeatureState(f,i.id);this.fire(new s.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(i){return this.stylesheet.transition=s.h({},this.stylesheet.transition,i),this.transition=this.stylesheet.transition,this}getTransition(){return s.h({},this.stylesheet.transition)}serialize(){this._checkLoaded();const i=this.getTerrain(),c=i&&this.terrain&&this.terrain.scope===this.scope?i:this.stylesheet.terrain;return s.dc({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:c,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},f=>f!==void 0)}_updateFilteredLayers(i){for(const c of Object.values(this._mergedLayers))i(c)&&this._updateLayer(c)}_updateLayer(i){this._changes.updateLayer(i);const c=this.getLayerSourceCache(i),f=s.C(i.source,i.scope),v=this._changes.getUpdatedSourceCaches();i.source&&!v[f]&&c&&c.getSource().type!=="raster"&&(this._changes.updateSourceCache(f,"reload"),c.pause()),i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const c=k=>this._mergedLayers[k].is3D(!!this.terrain),f=this.order,v={},b=[];for(let k=f.length-1;k>=0;k--){const I=f[k];if(c(I)){v[I]=k;for(const L of i){const O=L[I];if(O)for(const N of O)b.push(N)}}}b.sort((k,I)=>I.intersectionZ-k.intersectionZ);const w=[];for(let k=f.length-1;k>=0;k--){const I=f[k];if(c(I))for(let L=b.length-1;L>=0;L--){const O=b[L].feature;if(O.layer&&v[O.layer.id]<k)break;w.push(O),b.pop()}else for(const L of i){const O=L[I];if(O)for(const N of O)w.push(N.feature)}}return w}queryRenderedFeatures(i,c,f){let v;c&&!Array.isArray(c)&&c.filter&&(this._validate(rt,"queryRenderedFeatures.filter",c.filter,null,c),v=s.b3(c.filter));const b={},w=O=>{if(Kh.has(O.type))return;const N=this.getOwnLayerSourceCache(O),F=b[N.id]=b[N.id]||{sourceCache:N,layers:{},has3DLayers:!1};O.is3D(!!this.terrain)&&(F.has3DLayers=!0),F.layers[O.fqid]=F.layers[O.fqid]||{styleLayer:O,targets:[]},F.layers[O.fqid].targets.push({filter:v})};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new s.z(new Error("parameters.layers must be an Array."))),[];for(const O of c.layers){const N=this._layers[O];if(!N)return this.fire(new s.z(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];w(N)}}else for(const O in this._layers)w(this._layers[O]);const k=this._queryRenderedFeatures(i,b,f),I=this._flattenAndSortRenderedFeatures(k),L=[];for(const O of I)s.dd(O.layer.id)===this.scope&&L.push(O);return L}queryRenderedFeatureset(i,c,f){let v;c&&!Array.isArray(c)&&c.filter&&(this._validate(rt,"queryRenderedFeatures.filter",c.filter,null,c),v=s.b3(c.filter));const b="mock",w=[];if(c&&c.target)w.push(Object.assign({},c,{targetId:b,filter:v}));else{const O=this.getFeaturesetDescriptors();for(const N of O)w.push({targetId:b,filter:v,target:N});for(const{style:N}of this.fragments){const F=N.getFeaturesetDescriptors();for(const V of F)w.push({targetId:b,filter:v,target:V})}}const k=this.queryRenderedTargets(i,w,f),I=[],L=new Set;for(const O of k)for(const N of O.variants[b])Oh(N,O,L)||I.push(new s.de(O,N));return I}queryRenderedTargets(i,c,f){const v={},b=(k,I,L,O)=>{const N=v[I.id]=v[I.id]||{sourceCache:I,layers:{},has3DLayers:!1};if(N.layers[k.fqid]=N.layers[k.fqid]||{styleLayer:k,targets:[]},k.is3D(!!this.terrain)&&(N.has3DLayers=!0),!O)return L.uniqueFeatureID=!1,void N.layers[k.fqid].targets.push(L);N.layers[k.fqid].targets.push(Object.assign({},L,{namespace:O.namespace,properties:O.properties,uniqueFeatureID:O.uniqueFeatureID}))};for(const k of c)if("featuresetId"in k.target){const{featuresetId:I,importId:L}=k.target,O=this.getFragmentStyle(L);if(!O||!O._featuresetSelectors)continue;const N=O._featuresetSelectors[I];if(!N){this.fire(new s.z(new Error(`The featureset '${I}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const F of N){const V=O.getOwnLayer(F.layerId);V&&!Kh.has(V.type)&&b(V,O.getOwnLayerSourceCache(V),k,F)}}else if("layerId"in k.target){const{layerId:I}=k.target,L=this.getLayer(I);if(!L||Kh.has(L.type))continue;b(L,this.getLayerSourceCache(L),k)}const w=this._queryRenderedFeatures(i,v,f);return this._flattenAndSortRenderedFeatures(w)}_queryRenderedFeatures(i,c,f){const v=[],b=!!this.map._showQueryGeometry,w=Tr.createFromScreenPoints(i,f);for(const k in c){const I=zh(w,c[k],this._availableImages,f,b);Object.keys(I).length&&v.push(I)}if(this.placement)for(const k in c){if(!c[k].sourceCache._onlySymbols)continue;const I=Jl(w.screenGeometry,c[k],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData,this.map.getWorldview());Object.keys(I).length&&v.push(I)}return v}querySourceFeatures(i,c){const f=c&&c.filter;f&&this._validate(rt,"querySourceFeatures.filter",f,null,c);let v=[];const b=this.getOwnSourceCaches(i);for(const w of b)v=v.concat(sd(w,c));return v}addSourceType(i,c,f){return Uo.getSourceType(i)?f(new Error(`A source type called "${i}" already exists.`)):(Uo.setSourceType(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},f):f(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(i,c,f={}){this._checkLoaded();const v=this.light.getLight();let b=!1;for(const k in i)if(!s.bv(i[k],v[k])){b=!0;break}if(!b)return;const w=this._getTransitionParameters();this.light.setLight(i,c,f),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=s.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&s.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(i,c=1){if(this._checkLoaded(),!i)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),c===0&&delete this.terrain,i===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let f=i;const v=i.source==null;if(c===1){if(this.disableElevatedTerrain)return;if(typeof f.source=="object"){const k="terrain-dem-src";this.addSource(k,f.source),f=s.d6(f),f=s.h(f,{source:k})}const b=s.h({},f),w={};if(this.terrain&&v){b.source=this.terrain.get().source;const k=this.terrain?this.getFragmentStyle(this.terrain.scope):null;k&&(w.style=k.serialize())}if(this._validate(Vt,"terrain",b,w))return}if(!this.terrain||this.terrain.scope!==this.scope&&!v||this.terrain&&c!==this.terrain.drapeRenderMode){if(!f)return;this._createTerrain(f,c),this.fire(new s.A("data",{dataType:"style"}))}else{const b=this.terrain,w=b.get();for(const k of Object.keys(s.a5.terrain))!f.hasOwnProperty(k)&&s.a5.terrain[k].default&&(f[k]=s.a5.terrain[k].default);for(const k in i)if(!s.bv(i[k],w[k])){b.set(i,this.options),this.stylesheet.terrain=i;const I=this._getTransitionParameters({duration:0});b.updateTransitions(I),this.fire(new s.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const c=this.fog=new Nn(i,this.map.transform,this.scope,this.options);this.stylesheet.fog=c.get();const f=this._getTransitionParameters({duration:0});c.updateTransitions(f)}_createSnow(i){const c=this.snow=new mi(i,this.map.transform,this.scope,this.options);this.stylesheet.snow=c.get();const f=this._getTransitionParameters({duration:0});c.updateTransitions(f)}_createRain(i){const c=this.rain=new gi(i,this.map.transform,this.scope,this.options);this.stylesheet.rain=c.get();const f=this._getTransitionParameters({duration:0});c.updateTransitions(f)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog;if(!s.bv(c.get(),i)){c.set(i,this.options),this.stylesheet.fog=c.get();const f=this._getTransitionParameters({duration:0});c.updateTransitions(f)}}else this._createFog(i);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(i){if(this._checkLoaded(),!i)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const c=this.snow;if(!s.bv(c.get(),i)){c.set(i,this.options),this.stylesheet.snow=c.get();const f=this._getTransitionParameters({duration:0});c.updateTransitions(f)}}else this._createSnow(i);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(i){if(this._checkLoaded(),!i)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const c=this.rain;if(!s.bv(c.get(),i)){c.set(i,this.options),this.stylesheet.rain=c.get();const f=this._getTransitionParameters({duration:0});c.updateTransitions(f)}}else this._createRain(i);this._markersNeedUpdate=!0}_reloadColorTheme(){const i=()=>{for(const v in this._layers)this._layers[v].lut=this._styleColorTheme.lut;for(const v in this._sourceCaches)this._sourceCaches[v].clearTiles()},c=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!c)return this._styleColorTheme.lut=null,void i();const f=this._evaluateColorThemeData(c);this._loadColorTheme(f).then(()=>{this.fire(new s.A("colorthemeset")),i()}).catch(v=>{s.w(`Couldn't set color theme: ${v}`)})}setColorTheme(i){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&s.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=i,this._reloadColorTheme()}setImportColorTheme(i,c){const f=this.getFragmentStyle(i);f&&(f._styleColorTheme.colorThemeOverride=c,f._reloadColorTheme())}_getTransitionParameters(i){return{now:s.q.now(),transition:s.h(this.transition,i)}}updateDrapeFirstLayers(){if(!this.terrain)return;const i=[],c=[];for(const f of this._mergedOrder)this.isLayerDraped(this._mergedLayers[f])?i.push(f):c.push(f);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...c)}_createTerrain(i,c){const f=this.terrain=new Ve(i,c,this.scope,this.options,this.map.getWorldview());c===1&&(this.stylesheet.terrain=i),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const v=this._getTransitionParameters({duration:0});f.updateTransitions(v)}_force3DLayerUpdate(){for(const i in this._layers){const c=this._layers[i];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const c=this._layers[i];c.type==="symbol"&&this._updateLayer(c)}}_validate(i,c,f,v,b={}){if(b&&b.validate===!1)return!1;const w=s.h({},this.serialize());return cc(this,i.call(ls,s.h({key:c,style:w,value:f,styleSpec:s.a5},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.df.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._mergedLayers)this._mergedLayers[i].setEventedParent(null);for(const i in this._mergedSourceCaches)this._mergedSourceCaches[i].clearTiles(),this._mergedSourceCaches[i].setEventedParent(null);this.imageManager.removeScope(this.scope),this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.modelManager.destroy(),this.dispatcher.remove())}clearSource(i){const c=this.getSourceCaches(i);for(const f of c)f.clearTiles()}clearSources(){for(const i in this._mergedSourceCaches)this._mergedSourceCaches[i].clearTiles()}reloadSource(i){const c=this.getSourceCaches(i);for(const f of c)f.resume(),f.reload()}reloadSources(){for(const i of this.getSources())i.reload&&i.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(i=>{i.modelManager.reloadModels(i.scope)})}updateSources(i){let c;this.directionalLight&&(c=Zc(this.directionalLight));const f=new Set;for(const v in this._mergedLayers){const b=this._mergedLayers[v];b.hasElevation()&&!f.has(b.source)&&f.add(b.source)}for(const v in this._mergedSourceCaches){const b=this._mergedSourceCaches[v],w=f.has(b._source.id);b.update(i,void 0,void 0,c,w)}}_generateCollisionBoxes(){for(const i in this._sourceCaches){const c=this._sourceCaches[i];c.resume(),c.reload()}}_updatePlacement(i,c,f,v,b,w,k=!1){let I=!1,L=!1;const O={},N={};for(const F of this._mergedOrder){const V=this._mergedLayers[F];if(V.type!=="symbol")continue;const Z=s.C(V.source,V.scope);let G=O[Z];if(!G){const ee=this.getLayerSourceCache(V);if(!ee)continue;const ae=ee.getRenderableIds(!0).map(ve=>ee.getTileByID(ve));N[Z]=ae.slice(),G=O[Z]=ae.sort((ve,we)=>we.tileID.overscaledZ-ve.tileID.overscaledZ||(ve.tileID.isLessThan(we.tileID)?-1:1))}const Y=this.crossTileSymbolIndex.addLayer(V,G,c.center.lng,c.projection);I=I||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),k=k||this._layerOrderChanged||v===0,this._layerOrderChanged&&this.fire(new s.A("neworder")),(k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.q.now(),c.zoom))&&(this.pauseablePlacement=new Hh(c,this._mergedOrder,k,f,v,b,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,O,N,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.q.now()),L=!0),I&&this.pauseablePlacement.placement.setStale()),L||I){this._buildingIndex.onNewFrame(c.zoom);for(let F=0;F<this._mergedOrder.length;F++){const V=this._mergedLayers[this._mergedOrder[F]];if(V.type!=="symbol")continue;const Z=this.isLayerClipped(V);this.placement.updateLayerOpacities(V,O[s.C(V.source,V.scope)],F,Z?w:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.q.now())}}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}addImport(i,c){this._checkLoaded();const f=this.stylesheet.imports=this.stylesheet.imports||[];if(f.findIndex(({id:b})=>b===i.id)!==-1)return void this.fire(new s.z(new Error(`Import with id '${i.id}' already exists in the map's style.`)));if(!c)return f.push(i),this._loadImports([i],!0);const v=f.findIndex(({id:b})=>b===c);return v===-1&&this.fire(new s.z(new Error(`Import with id "${c}" does not exist on this map.`))),this.stylesheet.imports=f.slice(0,v).concat(i).concat(f.slice(v)),this._loadImports([i],!0,c)}updateImport(i,c){this._checkLoaded();const f=this.stylesheet.imports||[],v=this.getImportIndex(i);return v===-1?this:typeof c=="string"?(this.setImportUrl(i,c),this):(c.url&&c.url!==f[v].url&&this.setImportUrl(i,c.url),s.bv(c.config,f[v].config)||this.setImportConfig(i,c.config,c.data.schema),s.bv(c.data,f[v].data)||this.setImportData(i,c.data),this)}moveImport(i,c){this._checkLoaded();let f=this.stylesheet.imports||[];const v=this.getImportIndex(i);if(v===-1)return this;const b=this.getImportIndex(c);if(b===-1)return this;const w=f[v],k=this.fragments[v];return f=f.filter(({id:I})=>I!==i),this.fragments=this.fragments.filter(({id:I})=>I!==i),this.stylesheet.imports=f.slice(0,b).concat(w).concat(f.slice(b)),this.fragments=this.fragments.slice(0,b).concat(k).concat(this.fragments.slice(b)),this.mergeLayers(),this}setImportUrl(i,c){this._checkLoaded();const f=this.stylesheet.imports||[],v=this.getImportIndex(i);if(v===-1)return this;f[v].url=c;const b=this.fragments[v];return b.style=this._createFragmentStyle(f[v]),b.style.on("style.import.load",()=>this.mergeAll()),b.style.loadURL(c),this}setImportData(i,c){this._checkLoaded();const f=this.getImportIndex(i),v=this.stylesheet.imports||[];return f===-1?this:c?(this.fragments[f].style.setState(c),this._reloadImports(),this):(delete v[f].data,this.setImportUrl(i,v[f].url))}setImportConfig(i,c,f){this._checkLoaded();const v=this.getImportIndex(i),b=this.stylesheet.imports||[];if(v===-1)return this;c?b[v].config=c:delete b[v].config;const w=this.fragments[v];f&&w.style.stylesheet&&(w.style.stylesheet.schema=f);const k=w.style.stylesheet&&w.style.stylesheet.schema;return w.config=c,w.style.updateConfig(c,k),this.updateConfigDependencies(),this}removeImport(i){this._checkLoaded();const c=this.stylesheet.imports||[],f=this.getImportIndex(i);f!==-1&&(c.splice(f,1),this.fragments[f].style._remove(),this.fragments.splice(f,1),this._reloadImports())}getImportIndex(i){const c=(this.stylesheet.imports||[]).findIndex(f=>f.id===i);return c===-1&&this.fire(new s.z(new Error(`Import '${i}' does not exist in the map's style and cannot be updated.`))),c}getLayer(i){return this._mergedLayers[i]}getSources(){const i=[];for(const c in this._mergedOtherSourceCaches){const f=this._mergedOtherSourceCaches[c];f&&i.push(f.getSource())}return i}getSource(i,c){const f=this.getSourceCache(i,c);return f&&f.getSource()}getLayerSource(i){const c=this.getLayerSourceCache(i);return c&&c.getSource()}getSourceCache(i,c){const f=s.C(i,c);return this._mergedOtherSourceCaches[f]}getLayerSourceCache(i){const c=s.C(i.source,i.scope);return i.type==="symbol"?this._mergedSymbolSourceCaches[c]:this._mergedOtherSourceCaches[c]}getSourceCaches(i){if(i==null)return Object.values(this._mergedSourceCaches);const c=[];return this._mergedOtherSourceCaches[i]&&c.push(this._mergedOtherSourceCaches[i]),this._mergedSymbolSourceCaches[i]&&c.push(this._mergedSymbolSourceCaches[i]),c}updateSourceCaches(){const i=this._changes.getUpdatedSourceCaches();for(const c in i){const f=i[c];f==="reload"?this.reloadSource(c):f==="clear"&&this.clearSource(c)}}updateLayers(i){const c=this._changes.getUpdatedPaintProperties();for(const f of c){const v=this.getLayer(f);v&&v.updateTransitions(i)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(i){this.stylesheet.glyphs=i,this.glyphManager.setURL(i,this.scope)}getImages(i,c,f){this.imageManager.getImages(c.images,c.scope,f),this._updateTilesForChangedImages();const v=w=>{if(w){const k=c.images.map(I=>s.I.toString(I));w.setDependencies(c.tileID.key,c.type,k)}},b=s.C(c.source,c.scope);v(this._mergedOtherSourceCaches[b]),v(this._mergedSymbolSourceCaches[b])}rasterizeImages(i,c,f){this.imageManager.rasterizeImages(c,f)}getGlyphs(i,c,f){this.glyphManager.getGlyphs(c.stacks,c.scope,f)}getResource(i,c,f){return s.dg(c,f)}getOwnSourceCache(i){return this._otherSourceCaches[i]}getOwnLayerSourceCache(i){return i.type==="symbol"?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}getOwnSourceCaches(i){const c=[];return this._otherSourceCaches[i]&&c.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&c.push(this._symbolSourceCaches[i]),c}_isSourceCacheLoaded(i){const c=this.getOwnSourceCaches(i);return c.length===0?(this.fire(new s.z(new Error(`There is no source with ID '${i}'`))),!1):c.every(f=>f.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(i,c){if(!this._clipLayerPresent&&i.type!=="fill-extrusion"&&i.type!=="building")return!1;const f=i.type==="fill-extrusion"&&i.sourceLayer==="building",v=i.type==="building";if(i.is3D(!!this.terrain)){if(f||v||c&&c.type==="batched-model"||i.type==="model")return!0}else if(i.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(i=>{i.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Uo.getSourceType=function(p){return Lh[p]},Uo.setSourceType=function(p,i){Lh[p]=i},Uo.registerForPluginStateChange=s.dh;var wd=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Yf=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Jf=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Yc="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Jc=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Qf=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Zh=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,ks=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Xh=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,Ut=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,em=`#ifdef RENDER_SHADOWS
precision highp sampler2DShadow;uniform sampler2DShadow u_shadowmap_0;uniform sampler2DShadow u_shadowmap_1;uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;float shadow_sample(sampler2DShadow shadowmap,highp vec3 pos,highp float bias) {highp vec3 coord=vec3(pos.xy*0.5+0.5,pos.z*0.5+0.5-bias);return texture(shadowmap,coord);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {light_view_pos0.xyz/=light_view_pos0.w;
#ifdef SHADOWS_SINGLE_CASCADE
vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);
#else
light_view_pos1.xyz/=light_view_pos1.w;vec4 abs_bounds=abs(vec4(light_view_pos0.xy,light_view_pos1.xy));if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}float occlusion1=shadow_sample(u_shadowmap_1,light_view_pos1.xyz,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Qc=[];Ns(wd,Qc),Ns(Jf,Qc),Ns(Yf,Qc);const eu={"_prelude_fog.vertex.glsl":Qf,"_prelude_terrain.vertex.glsl":Jc,"_prelude_shadow.vertex.glsl":Ut,"_prelude_fog.fragment.glsl":Zh,"_prelude_shadow.fragment.glsl":em,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":ks,"_prelude_raster_particle.glsl":Xh},Sd={};gr("",Jc),gr(Zh,Qf),gr(em,Ut),gr(ks,""),gr(Xh,"");const Cd=gr(Yf,Jf),ma=wd;var Yh={background:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),building:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in highp vec3 v_normal;in highp float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
uniform lowp float u_opacity;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 apply_lighting_linear(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return color*(ambient_contrib+directional_contrib);}void main() {vec4 color=vec4(v_color.rgb,1.0);vec3 normal=normalize(v_normal);vec3 xy_flipped_normal=vec3(-normal.xy,normal.z);float shadowed_lighting_factor=0.0;
#ifdef RENDER_SHADOWS
shadowed_lighting_factor=shadowed_light_factor_normal(xy_flipped_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
shadowed_lighting_factor=dot(normal,u_lighting_directional_dir);
#endif
color.rgb=apply_lighting_linear(color.rgb,xy_flipped_normal,shadowed_lighting_factor);color.rgb=mix(color.rgb,v_color.rgb,v_color.a);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,v_height));
#endif
color.rgb=linearTosRGB(color.rgb);color*=u_opacity;
#ifdef RENDER_CUTOFF
color*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_height);
#endif
glFragColor=color; 
#ifdef DEBUG_SHOW_NORMALS
color.rgb=xy_flipped_normal*0.5+vec3(0.5,0.5,0.5);color.a=1.0;glFragColor=color;
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;in vec3 a_normal_3f;out vec4 v_color;out highp vec3 v_normal;out highp float v_height;uniform mat4 u_matrix;uniform mat4 u_normal_matrix;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive
void main() {
#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive
vec4 color_emissive=decode_color(part_color_emissive);v_color=vec4(sRGBToLinear(color_emissive.rgb),color_emissive.a);v_normal=vec3(u_normal_matrix*vec4(a_normal_3f,0.0));vec3 pos=a_pos_3f;v_height=pos.z;gl_Position=u_matrix*vec4(pos,1.0);
#ifdef RENDER_SHADOWS
vec3 shadow_pos=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset_model(v_normal);shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1.0);v_depth_shadows=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),buildingDepth:gr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,"in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;void main() {gl_Position=u_matrix*vec4(a_pos_3f,1.0);v_depth=gl_Position.z/gl_Position.w;}"),circle:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:gr("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:gr(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:gr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:gr("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:gr("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:gr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:gr(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:gr(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}vec3 compute_view_dependent_emissive_color(float ndotl,float emissive_strength,vec3 color)
{color=sRGBToLinear(color);color=color*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);color=linearTosRGB(color.rgb);return color;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 structure_color
void main() {
#pragma mapbox: initialize highp vec4 structure_color
vec3 color=structure_color.xyz;
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);vec3 transformed_normal=vec3(-normal.xy,normal.z);float ndotl=calculate_NdotL(transformed_normal);float emissive_strength=u_emissive_strength;emissive_strength=0.0;vec3 emissive_color=compute_view_dependent_emissive_color(ndotl,emissive_strength,color.xyz);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,transformed_normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,transformed_normal);
#endif
color=mix(color,emissive_color,emissive_strength);if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#pragma mapbox: define highp vec4 structure_color
void main() {
#pragma mapbox: initialize highp vec4 structure_color
v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(-v_normal.xy,v_normal.z));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;v_road_z_offset=z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;v_road_z_offset=z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:gr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:gr(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:gr(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:gr(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float epsilon=0.0001;float extrude_length_without_perspective=max(length(dist),epsilon);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),epsilon);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;
#ifdef LINE_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LINE_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl*texel_size-texel_size,pattern_b_br*texel_size+texel_size,vec2(x,y));vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);color=color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:gr("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:gr("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:gr(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:gr(`#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
in highp float v_z_offset;
#endif
#endif
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(v_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#endif
#endif
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef ELEVATED_ROADS
in vec3 a_x_axis;in vec3 a_y_axis;uniform float u_normal_scale;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
out highp float v_z_offset;
#endif
#endif
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+z_offset : 0.0;
#else
z+=u_pitch_with_map ? z_offset : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
#ifdef ELEVATED_ROADS
vec3 xAxis=vec3(a_x_axis.xy,a_x_axis.z*u_normal_scale);vec3 yAxis=vec3(a_y_axis.xy,a_y_axis.z*u_normal_scale);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
pos=vec3(projected_pos.xy/projected_pos.w+offset,z);
#endif
#endif
gl_Position=mix(u_coord_matrix*vec4(pos,1.0),AWAY,hidden);float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
vec4 shd_pos=u_inv_matrix*vec4(pos,1.0);vec3 shd_pos0=shd_pos.xyz;vec3 shd_pos1=shd_pos.xyz;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
v_z_offset=e;
#endif
#endif
#endif
}`),terrainRaster:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:gr("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:gr(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Yc),skyboxGradient:gr(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Yc),skyboxCapture:gr(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:gr(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:gr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:gr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:gr(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:gr("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:gr("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:gr("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:gr("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Ns(p,i){const c=p.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let f of c)if(f=f.trim(),f[0]==="#"&&f.includes("if")&&!f.includes("endif")){f=f.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=f.split(" ");for(const b of v)i.includes(b)||i.push(b)}}function gr(p,i){const c=/#include\s+"([^"]+)"/g,f=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let v=i.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);v&&(v=v.map(L=>{const O=L.split(" ");return O[O.length-1]}),v=[...new Set(v)]);const b={},w=[],k=[];if(p=p.replace(c,(L,O)=>(k.push(O),"")),(i=i.replace(c,(L,O)=>(w.push(O),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let I=[...Qc];Ns(p,I),Ns(i,I);for(const L of[...w,...k])eu[L]||console.error(`Undefined include: ${L}`),Sd[L]||(Sd[L]=[],Ns(eu[L],Sd[L])),I=[...I,...Sd[L]];return{fragmentSource:p=p.replace(f,(L,O,N,F,V)=>(b[V]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${V}
in ${N} ${F} ${V};
#else
uniform ${N} ${F} u_${V};
#endif
`:O==="initialize"?`
#ifdef HAS_UNIFORM_u_${V}
    ${N} ${F} ${V} = u_${V};
#endif
`:O==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${V}
    in ${N} ${F} ${V};
#endif
`:O==="initialize-attribute"?"":void 0)),vertexSource:i=i.replace(f,(L,O,N,F,V)=>{const Z=F==="float"?"vec2":F,G=V.match(/color/)?"color":Z;return O==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${V}
in ${N} ${F} a_${V};
#endif
`:b[V]?O==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
in ${N} ${Z} a_${V};
out ${N} ${F} ${V};
#else
uniform ${N} ${F} u_${V};
#endif
`:O==="initialize"?G==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = a_${V};
#else
    ${N} ${F} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = unpack_mix_${G}(a_${V}, u_${V}_t);
#else
    ${N} ${F} ${V} = u_${V};
#endif
`:O==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${V}
    in ${N} ${F} a_${V};
    out ${N} ${F} ${V};
#endif
`:O==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${V}
    ${V} = a_${V};
#endif
`:void 0:O==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
in ${N} ${Z} a_${V};
#else
uniform ${N} ${F} u_${V};
#endif
`:O==="define-instanced"?G==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${V}0;
in vec4 a_${V}1;
in vec4 a_${V}2;
in vec4 a_${V}3;
#else
uniform ${N} ${F} u_${V};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${N} ${Z} a_${V};
#else
uniform ${N} ${F} u_${V};
#endif
`:O==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${V}
    ${N} ${F} ${V} = a_${V};
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${N} ${F} ${V} = a_${V};
#else
    ${N} ${F} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${N} ${F} ${V} = unpack_mix_${G}(a_${V}, u_${V}_t);
#else
    ${N} ${F} ${V} = u_${V};
#endif
`}),staticAttributes:v,usedDefines:I,vertexIncludes:w,fragmentIncludes:k}}class tu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(i,c,f,v,b,w,k,I){this.context=i;let L=this.boundPaintVertexBuffers.length!==v.length;for(let N=0;!L&&N<v.length;N++)this.boundPaintVertexBuffers[N]!==v[N]&&(L=!0);let O=this.boundDynamicVertexBuffers.length!==k.length;for(let N=0;!O&&N<k.length;N++)this.boundDynamicVertexBuffers[N]!==k[N]&&(O=!0);if(!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==f||L||O||this.boundIndexBuffer!==b||this.boundVertexOffset!==w)this.freshBind(c,f,v,b,w,k,I);else{i.bindVertexArrayOES.set(this.vao);for(const N of k)N&&(N.bind(),I&&N.instanceCount&&N.setVertexAttribDivisor(i.gl,c,I));b&&b.dynamicDraw&&b.bind()}}freshBind(i,c,f,v,b,w,k){const I=i.numAttributes,L=this.context,O=L.gl;this.vao&&this.destroy(),this.vao=L.gl.createVertexArray(),L.bindVertexArrayOES.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=v,this.boundVertexOffset=b,this.boundDynamicVertexBuffers=w,c.enableAttributes(O,i),c.bind(),c.setVertexAttribPointers(O,i,b);for(const N of f)N.enableAttributes(O,i),N.bind(),N.setVertexAttribPointers(O,i,b);for(const N of w)N&&(N.enableAttributes(O,i),N.bind(),N.setVertexAttribPointers(O,i,b),k&&N.instanceCount&&N.setVertexAttribDivisor(O,i,k));v&&v.bind(),L.currentNumAttributes=I}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function a1(p,i){const c=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new s.ac(0,f/c).toLngLat().lat,new s.ac(0,(f+1)/c).toLngLat().lat]}function l1(p,i,c,f,v,b,w){const k=p.context,I=k.gl,L=c.hillshadeFBO;if(!L)return;p.prepareDrawTile();const O=p.isTileAffectedByFog(i),N=p.getOrCreateProgram("hillshade",{overrideFog:O});k.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,L.colorAttachment.get());const F=((Y,ee,ae,ve)=>{const we=ae.paint.get("hillshade-shadow-color"),Pe=ae.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",Ee=ae.paint.get("hillshade-highlight-color"),ke=ae.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",Se=ae.paint.get("hillshade-accent-color"),Ae=ae.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",De=ae.paint.get("hillshade-emissive-strength");let Ze=s.al(ae.paint.get("hillshade-illumination-direction"));if(ae.paint.get("hillshade-illumination-anchor")==="viewport")Ze-=Y.transform.angle;else if(Y.style&&Y.style.enable3dLights()&&Y.style.directionalLight){const ht=Y.style.directionalLight.properties.get("direction"),pt=s.cR(ht.x,ht.y,ht.z);Ze=s.al(pt[1])}const Ye=!Y.options.moving;return{u_matrix:ve||Y.transform.calculateProjMatrix(ee.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:a1(0,ee.tileID),u_light:[ae.paint.get("hillshade-exaggeration"),Ze],u_shadow:we.toPremultipliedRenderColor(Pe?null:ae.lut),u_highlight:Ee.toPremultipliedRenderColor(ke?null:ae.lut),u_emissive_strength:De,u_accent:Se.toPremultipliedRenderColor(Ae?null:ae.lut)}})(p,c,f,p.terrain?i.projMatrix:null);p.uploadCommonUniforms(k,N,i.toUnwrapped());const{tileBoundsBuffer:V,tileBoundsIndexBuffer:Z,tileBoundsSegments:G}=p.getTileBoundsBuffers(c);N.draw(p,I.TRIANGLES,v,b,w,An.disabled,F,f.id,V,Z,G)}function Jh(p,i,c){if(!i.needsDEMTextureUpload)return;const f=p.context,v=f.gl;f.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||p.getTileTexture(c.stride);const b=c.getPixels();i.demTexture?i.demTexture.update(b,{premultiply:!1}):i.demTexture=new s.T(f,b,v.R32F,{premultiply:!1}),i.needsDEMTextureUpload=!1}function c1(p,i,c){const f=p.context,v=f.gl;if(!i.dem)return;const b=i.dem;if(f.activeTexture.set(v.TEXTURE1),Jh(p,i,b),!i.demTexture)return;i.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE);const w=b.dim;f.activeTexture.set(v.TEXTURE0);let k=i.hillshadeFBO;if(!k){const F=new s.T(f,{width:w,height:w,data:null},v.RGBA8);F.bind(v.LINEAR,v.CLAMP_TO_EDGE),k=i.hillshadeFBO=f.createFramebuffer(w,w,!0,"renderbuffer"),k.colorAttachment.set(F.texture)}f.bindFramebuffer.set(k.framebuffer),f.viewport.set([0,0,w,w]);const{tileBoundsBuffer:I,tileBoundsIndexBuffer:L,tileBoundsSegments:O}=p.getMercatorTileBoundsBuffers(),N=[];p.linearFloatFilteringSupported()&&N.push("TERRAIN_DEM_FLOAT_FORMAT"),p.getOrCreateProgram("hillshadePrepare",{defines:N}).draw(p,v.TRIANGLES,en.disabled,$n.disabled,or.unblended,An.disabled,((F,V)=>{const Z=V.stride,G=s.bz();return s.c5(G,0,s.aj,-8192,0,0,1),s.bo(G,G,[0,-8192,0]),{u_matrix:G,u_image:1,u_dimension:[Z,Z],u_zoom:F.overscaledZ}})(i.tileID,b),c.id,I,L,O),i.needsHillshadePrepare=!1}class Ei{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class _0 extends Ei{getDefault(){return s.am.transparent.toNonPremultipliedRenderColor(null)}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class tm extends Ei{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class u1 extends Ei{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class d1 extends Ei{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class h1 extends Ei{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class p1 extends Ei{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class x0 extends Ei{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class f1 extends Ei{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Qh extends Ei{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class m1 extends Ei{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class w0 extends Ei{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class nm extends Ei{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class ep extends Ei{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class rm extends Ei{getDefault(){const i=this.gl;return[i.ONE,i.ZERO,i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.blendFuncSeparate(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class uc extends Ei{getDefault(){return s.am.transparent.toNonPremultipliedRenderColor(null)}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class nu extends Ei{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(i,i),this.current=i,this.dirty=!1)}}class tp extends Ei{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class np extends Ei{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class ru extends Ei{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}let S0=class extends Ei{getDefault(){return null}set(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)}};class im extends Ei{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class C0 extends Ei{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class iu extends Ei{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class rp extends Ei{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ip extends Ei{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class om extends Ei{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class op extends Ei{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class kd extends Ei{getDefault(){return null}set(i){this.gl&&(i!==this.current||this.dirty)&&(this.gl.bindVertexArray(i),this.current=i,this.dirty=!1)}}class k0 extends Ei{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class T0 extends Ei{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class E0 extends Ei{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ml extends Ei{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class I0 extends ml{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class P0 extends ml{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class g1 extends ml{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,this.attachment(),c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class y1 extends P0{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const sm=(p,i,c)=>({u_matrix:p,u_image0:0,u_skirt_height:i,u_ground_shadow_factor:c}),sp=(p,i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(f),u_merc_matrix:c,u_zoom_transition:v,u_merc_center:b,u_image0:0,u_frustum_tl:w,u_frustum_tr:k,u_frustum_br:I,u_frustum_bl:L,u_globe_pos:O,u_globe_radius:N,u_viewport:F,u_grid_matrix:G?Float32Array.from(G):new Float32Array(9),u_skirt_height:V,u_far_z_cutoff:Z});function ap(p,i){return p!=null&&i!=null&&!(!p.hasData()||!i.hasData())&&p.demTexture!=null&&i.demTexture!=null&&p.tileID.key!==i.tileID.key}const gl=new class{constructor(){this.operations={}}newMorphing(p,i,c,f,v){if(p in this.operations){const b=this.operations[p];b.to.tileID.key!==c.tileID.key&&(b.queued=c)}else this.operations[p]={startTime:f,phase:0,duration:v,from:i,to:c,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const i=this.operations[p];return{from:i.from,to:i.to,phase:i.phase}}update(p){for(const i in this.operations){const c=this.operations[i];for(c.phase=(p-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,p)){delete this.operations[i];break}}}_nextOp(p,i){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=i,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},am={0:null,1:"TERRAIN_VERTEX_MORPHING"};function lm(p,i,c){if(i===0)return 0;const f=i<1&&c===514?.25/i:1;return 6*Math.pow(1.5,22-p)*Math.max(i,1)*f}function v1(p,i){const c=1<<p.z;return!i&&(p.x===0||p.x===c-1)||p.y===0||p.y===c-1}const dc=p=>({u_matrix:p});function hc(p,i,c,f,v){if(v>0){const b=s.q.now(),w=(b-p.timeAdded)/v,k=i?(b-i.timeAdded)/v:-1,I=c.getSource(),L=f.coveringZoomLevel({tileSize:I.tileSize,roundZoom:I.roundZoom}),O=!i||Math.abs(i.tileID.overscaledZ-L)>Math.abs(p.tileID.overscaledZ-L),N=O&&p.refreshedUponExpiration?1:s.ay(O?w:1-k,0,1);return p.refreshedUponExpiration&&w>=1&&(p.refreshedUponExpiration=!1),i?{opacity:1,mix:1-N}:{opacity:N,mix:0}}return{opacity:1,mix:0}}class A0 extends is{constructor(i){const c={type:"raster-dem",maxzoom:i.transform.maxZoom},f=new s.D(s.c$(),null),v=id("mock-dem",c,f,i.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,c){i.state="loaded",c(null)}}class Ts extends is{constructor(i){const c=id("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new s.D(s.c$(),null),i.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,c,f){if(i.freezeTileCoverage)return;this.transform=i;const v=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((b,w)=>{if(b[w.key]="",!this._tiles[w.key]){const k=new Ql(w,this._source.tileSize*w.overscaleFactor(),i.tileZoom,void 0,void 0,this._source.worldview);k.state="loaded",this._tiles[w.key]=k}return b},{});for(const b in this._tiles)b in v||(this.freeFBO(b),this._tiles[b].unloadVectorData(),delete this._tiles[b])}freeFBO(i){const c=this.proxyCachedFBO[i];if(c!==void 0){const f=Object.values(c);this.renderCachePool.push(...f),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class lp extends s.aM{constructor(i,c,f){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=c,this.projMatrix=f}}class Td extends s.dt{constructor(i,c){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},i.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[f,v,b]=function(I){const L=new s.ba,O=new s.a_,N=131;L.reserve(17161),O.reserve(33800);const F=s.aj/128,V=s.aj+F/2,Z=V+F;for(let Y=-64;Y<Z;Y+=F)for(let ee=-64;ee<Z;ee+=F){const ae=ee<0||ee>V||Y<0||Y>V?24575:0,ve=s.ay(Math.round(ee),0,s.aj),we=s.ay(Math.round(Y),0,s.aj);L.emplaceBack(ve+ae,we)}const G=(Y,ee)=>{const ae=ee*N+Y;O.emplaceBack(ae+1,ae,ae+N),O.emplaceBack(ae+N,ae+N+1,ae+1)};for(let Y=1;Y<129;Y++)for(let ee=1;ee<129;ee++)G(ee,Y);return[0,129].forEach(Y=>{for(let ee=0;ee<130;ee++)G(ee,Y),G(Y,ee)}),[L,O,32768]}(),w=i.context;this.gridBuffer=w.createVertexBuffer(f,s.bc.members),this.gridIndexBuffer=w.createIndexBuffer(v),this.gridSegments=s.bd.simpleSegment(0,0,f.length,v.length),this.gridNoSkirtSegments=s.bd.simpleSegment(0,0,f.length,b),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ts(c.map),this.orthoMatrix=s.bz(),s.c5(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.aj,0,s.aj,0,1);const k=w.gl;this._overlapStencilMode=new $n({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new A0(c.map),this._pendingGroundEffectLayers=[]}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),this._style=i,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(i,c,f){if(i&&i.terrain){this._style!==i&&(this.style=i,this._evaluationZoom=void 0);const v=i.terrain.properties,b=i.terrain.drapeRenderMode===0,w=i.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=s.q.now();const k=i.terrain&&i.terrain.scope,I=v.get("source"),L=b?this._mockSourceCache:i.getSourceCache(I,k);if(!L)return void s.w(`Couldn't find terrain source "${I}".`);if(this.sourceCache=L,this._attenuationRange=i.terrain.getAttenuationRange(),this._exaggeration=w?this.calculateExaggeration(c):v.get("exaggeration"),!c.projection.requiresDraping&&w&&this._exaggeration===0)return void this._disable();this.enabled=!0;const O=()=>{this.sourceCache.used&&s.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const N=this.getScaledDemTileSize();this.sourceCache.update(c,N,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,O(),this._initializing=!0),O(),c.updateElevation(!0,f),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0,this._previousZoom=c.zoom}else this._disable()}calculateExaggeration(i){if(this._attenuationRange&&i.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(i.zoom);const c=this._previousCameraAltitude,f=i.getFreeCameraOptions().position.z/i.pixelsPerMeter*i.worldSize;this._previousCameraAltitude=f;const v=c!=null?f-c:Number.MAX_VALUE;if(Math.abs(v)<2)return this._exaggeration;const b=i.zoom,w=this._style.terrain;if(!this._previousUpdateTimestamp)return w.getExaggeration(b);let k=b-this._previousZoom;const I=this._previousUpdateTimestamp;let L=b;this._evaluationZoom!=null&&(L=this._evaluationZoom,Math.abs(b-L)>.5&&(k=.5*(b-L+k)),k*v<0&&(L+=k)),this._evaluationZoom=L;const O=w.getExaggeration(L),N=O===w.getExaggeration(Math.max(0,L-.1));if(N&&Math.abs(O-this._exaggeration)<.01)return O;let F=Math.min(.1,.00375*(this._updateTimestamp-I));return(N||O<.1||Math.abs(k)<1e-4)&&(F=Math.min(.2,4*F)),s.ai(this._exaggeration,O,F)}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(i){i.coord&&i.dataType==="source"?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):i.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._mergedSourceCaches)this._style._mergedSourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,f=this.painter.transform;this._initializing&&(this._initializing=f._centerAltitude===0&&this.getAtPointOrZero(s.ac.fromLngLat(f.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=c.getIds().map(I=>{const L=c.getTileByID(I).tileID;return L.projMatrix=f.calculateProjMatrix(L.toUnwrapped()),L});(function(I,L){const O=L.transform.pointCoordinate(L.transform.getCameraPoint()),N=new s.P(O.x,O.y);I.sort((F,V)=>{if(V.overscaledZ-F.overscaledZ)return V.overscaledZ-F.overscaledZ;const Z=new s.P(F.canonical.x+(1<<F.canonical.z)*F.wrap,F.canonical.y),G=new s.P(V.canonical.x+(1<<V.canonical.z)*V.wrap,V.canonical.y),Y=N.mult(1<<F.canonical.z);return Y.x-=.5,Y.y-=.5,Y.distSqr(Z)-Y.distSqr(G)})})(v,this.painter);const b=this.proxyToSource||{};this.proxyToSource={},v.forEach(I=>{this.proxyToSource[I.key]={}}),this.terrainTileForTile={};const w=this._style._mergedSourceCaches;for(const I in w){const L=w[I];if(!L.used||(L!==this.sourceCache&&this.resetTileLookupCache(L.id),this._setupProxiedCoordsForOrtho(L,i[I],b),L.usedForTerrain))continue;const O=i[I];L.getSource().reparseOverscaled&&this._assignTerrainTiles(O)}this.proxiedCoords[c.id]=v.map(I=>new lp(I,I.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(b),this.renderingToTexture=!1;const k={};this._visibleDemTiles=[];for(const I of this.proxyCoords){const L=this.terrainTileForTile[I.key];if(!L)continue;const O=L.tileID.key;O in k||(this._visibleDemTiles.push(L),k[O]=O)}}_assignTerrainTiles(i){this._initializing||i.forEach(c=>{if(this.terrainTileForTile[c.key])return;const f=this._findTileCoveringTileID(c,this.sourceCache);f&&(this.terrainTileForTile[c.key]=f)})}_prepareDEMTextures(){const i=this.painter.context,c=i.gl;for(const f in this.terrainTileForTile){const v=this.terrainTileForTile[f],b=v.dem;!b||v.demTexture&&!v.needsDEMTextureUpload||(i.activeTexture.set(c.TEXTURE1),Jh(this.painter,v,b))}}_prepareDemTileUniforms(i,c,f,v){if(!c||c.demTexture==null)return!1;const b=i.tileID.canonical,w=Math.pow(2,c.tileID.canonical.z-b.z),k=v||"";return f[`u_dem_tl${k}`]=[b.x*w%1,b.y*w%1],f[`u_dem_scale${k}`]=w,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let i=0;const c=this._visibleDemTiles.reduce((f,v)=>{if(!v.dem)return f;const b=v.dem.tree.minimums[0];return b>0&&i++,f+b},0);return i?c/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,c=i.gl;i.activeTexture.set(c.TEXTURE2);const f=this._getLoadedAreaMinimum(),v=new s.du({width:1,height:1},new Float32Array([f]));this._emptyDEMTextureDirty=!1;let b=this._emptyDEMTexture;return b?b.update(v,{premultiply:!1}):b=this._emptyDEMTexture=new s.T(i,v,c.R32F,{premultiply:!1}),b}setupElevationDraw(i,c,f){const v=this.painter.context,b=v.gl,w={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};w.u_exaggeration=this.exaggeration();let k=null,I=null,L=1;if(f&&f.morphing&&this._useVertexMorphing){const V=f.morphing.srcDemTile,Z=f.morphing.dstDemTile;L=f.morphing.phase,V&&Z&&(this._prepareDemTileUniforms(i,V,w,"_prev")&&(I=V),this._prepareDemTileUniforms(i,Z,w)&&(k=Z))}const O=V=>V&&V.demTexture&&this.painter.linearFloatFilteringSupported()?b.LINEAR:b.NEAREST;let N=null;var F;if(this.enabled?I&&k?(N=k.demTexture,v.activeTexture.set(b.TEXTURE4),I.demTexture.bind(O(I),b.CLAMP_TO_EDGE),w.u_dem_lerp=L):(k=this.terrainTileForTile[i.tileID.key],N=this._prepareDemTileUniforms(i,k,w)?k.demTexture:this.emptyDEMTexture):N=this.emptyDEMTexture,v.activeTexture.set(b.TEXTURE2),N&&(w.u_dem_size=(F=N).size[0]===1?1:F.size[0]-2,N.bind(O(k),b.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(f&&f.useDepthForOcclusion,c,w),f&&f.useMeterToDem&&k){const V=(1<<k.tileID.canonical.z)*s.c6(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;w.u_meter_to_dem=V}if(f&&f.labelPlaneMatrixInv&&(w.u_label_plane_matrix_inv=f.labelPlaneMatrixInv),c.setTerrainUniformValues(v,w),this.painter.transform.projection.name==="globe"){const V=this.globeUniformValues(this.painter.transform,i.tileID.canonical,f&&f.useDenormalizedUpVectorScale);c.setGlobeUniformValues(v,V)}}globeUniformValues(i,c,f){const v=i.projection;return{u_tile_tl_up:v.upVector(c,0,0),u_tile_tr_up:v.upVector(c,s.aj,0),u_tile_br_up:v.upVector(c,s.aj,s.aj),u_tile_bl_up:v.upVector(c,0,s.aj),u_tile_up_scale:f?s.dv(1):v.upVectorScale(c,i.center.lat,i.worldSize).metersToTile}}renderToBackBuffer(i){const c=this.painter,f=this.painter.context;i.length!==0&&(f.bindFramebuffer.set(null),f.viewport.set([0,0,c.width,c.height]),c.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,b,w,k,I){if(v.transform.projection.name==="globe")(function(L,O,N,F,V){const Z=L.context,G=Z.gl;let Y,ee;const ae=L.transform,ve=s.dl(L,Z,ae),we=(ht,pt)=>{if(ee===pt)return;const It=[am[pt],"PROJECTION_GLOBE_VIEW"];ve&&It.push("CUSTOM_ANTIALIASING");const Ge=L.isTileAffectedByFog(ht);Y=L.getOrCreateProgram("globeRaster",{defines:It,overrideFog:Ge}),ee=pt},Pe=L.colorModeForRenderPass(),Ee=new en(G.LEQUAL,en.ReadWrite,L.depthRangeFor3D);gl.update(V);const ke=s.dm(ae),Se=[s.aD(ae.center.lng),s.aH(ae.center.lat)],Ae=L.globeSharedBuffers,De=[ae.width*s.q.devicePixelRatio,ae.height*s.q.devicePixelRatio],Ze=Float32Array.from(ae.globeMatrix),Ye={useDenormalizedUpVectorScale:!0};{const ht=L.transform,pt=lm(ht.zoom,O.exaggeration(),O.sourceCache._source.tileSize);ee=-1;const It=G.TRIANGLES;for(const Ge of F){const st=N.getTile(Ge),Fe=$n.disabled,gt=O.prevTerrainTileForTile[Ge.key],nt=O.terrainTileForTile[Ge.key];ap(gt,nt)&&gl.newMorphing(Ge.key,gt,nt,V,250),Z.activeTexture.set(G.TEXTURE0),st.texture&&st.texture.bind(G.LINEAR,G.CLAMP_TO_EDGE);const St=gl.getMorphValuesForProxy(Ge.key),Bt=St?1:0;St&&s.L(Ye,{morphing:{srcDemTile:St.from,dstDemTile:St.to,phase:s.dk(St.phase)}});const mt=s.dn(Ge.canonical),Ot=s.dp(mt.getCenter().lat),nn=s.dq(Ge.canonical,mt,Ot,ht.worldSize/ht._pixelsPerMercatorPixel),rn=s.bh(s.dr(Ge.canonical)),Yt=sp(ht.expandedFarZProjMatrix,Ze,ke,rn,s.ah(ht.zoom),Se,ht.frustumCorners.TL,ht.frustumCorners.TR,ht.frustumCorners.BR,ht.frustumCorners.BL,ht.globeCenterInViewSpace,ht.globeRadius,De,pt,ht._farZ,nn);if(we(Ge,Bt),Y&&(O.setupElevationDraw(st,Y,Ye),L.uploadCommonUniforms(Z,Y,Ge.toUnwrapped()),Ae)){const[mn,bn,Cn]=Ae.getGridBuffers(Ot,pt!==0);Y.draw(L,It,Ee,Fe,Pe,An.backCCW,Yt,"globe_raster",mn,bn,Cn)}}}if(Ae&&(L.renderDefaultNorthPole||L.renderDefaultSouthPole)){const ht=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ve&&ht.push("CUSTOM_ANTIALIASING"),Y=L.getOrCreateProgram("globeRaster",{defines:ht});for(const pt of F){const{x:It,y:Ge,z:st}=pt.canonical,Fe=Ge===0,gt=Ge===(1<<st)-1,[nt,St,Bt,mt]=Ae.getPoleBuffers(st,!1);if(mt&&(Fe||gt)){const Ot=N.getTile(pt);Z.activeTexture.set(G.TEXTURE0),Ot.texture&&Ot.texture.bind(G.LINEAR,G.CLAMP_TO_EDGE);let nn=s.ds(st,It,ae);const rn=s.bh(s.dr(pt.canonical)),Yt=(mn,bn)=>mn.draw(L,G.TRIANGLES,Ee,$n.disabled,Pe,An.disabled,sp(ae.expandedFarZProjMatrix,nn,nn,rn,0,Se,ae.frustumCorners.TL,ae.frustumCorners.TR,ae.frustumCorners.BR,ae.frustumCorners.BL,ae.globeCenterInViewSpace,ae.globeRadius,De,0,ae._farZ),"globe_pole_raster",bn,Bt,mt);O.setupElevationDraw(Ot,Y,Ye),L.uploadCommonUniforms(Z,Y,pt.toUnwrapped()),Fe&&L.renderDefaultNorthPole&&Yt(Y,nt),gt&&L.renderDefaultSouthPole&&(nn=s.cE(s.bz(),nn,[1,-1,1]),Yt(Y,St))}}}})(v,b,w,k,I);else{const L=v.context,O=L.gl;let N,F;const V=v.shadowRenderer,Z=fa(v,v.longestCutoffRange),G=Pe=>{if(F===Pe)return;const Ee=[];Ee.push(am[Pe]),Z.shouldRenderCutoff&&Ee.push("RENDER_CUTOFF"),V&&(Ee.push("RENDER_SHADOWS","DEPTH_TEXTURE"),V.useNormalOffset&&Ee.push("NORMAL_OFFSET")),N=v.getOrCreateProgram("terrainRaster",{defines:Ee}),F=Pe},Y=v.colorModeForRenderPass(),ee=new en(O.LEQUAL,en.ReadWrite,v.depthRangeFor3D);gl.update(I);const ae=v.transform,ve=lm(ae.zoom,b.exaggeration(),b.sourceCache._source.tileSize);let we=[0,0,0];if(V){const Pe=v.style.directionalLight,Ee=v.style.ambientLight;Pe&&Ee&&(we=lc(v.style,Pe,Ee))}{F=-1;const Pe=O.TRIANGLES,[Ee,ke]=[b.gridIndexBuffer,b.gridSegments];for(const Se of k){const Ae=w.getTile(Se),De=$n.disabled,Ze=b.prevTerrainTileForTile[Se.key],Ye=b.terrainTileForTile[Se.key];ap(Ze,Ye)&&gl.newMorphing(Se.key,Ze,Ye,I,250),L.activeTexture.set(O.TEXTURE0),Ae.texture&&Ae.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE);const ht=gl.getMorphValuesForProxy(Se.key),pt=ht?1:0;let It;ht&&(It={morphing:{srcDemTile:ht.from,dstDemTile:ht.to,phase:s.dk(ht.phase)}});const Ge=sm(Se.projMatrix,v1(Se.canonical,ae.renderWorldCopies)?ve/10:ve,we);if(G(pt),!N)continue;b.setupElevationDraw(Ae,N,It);const st=Se.toUnwrapped();V&&V.setupShadows(st,N),v.uploadCommonUniforms(L,N,st,null,Z),N.draw(v,Pe,ee,De,Y,An.backCCW,Ge,"terrain_raster",b.gridBuffer,Ee,ke)}}}}(c,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,c.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(this._drapedRenderBatches.length===0)return i+1;this.renderingToTexture=!0;const c=this.painter,f=this.painter.context,v=this.proxySourceCache,b=this.proxiedCoords[v.id],w=this._drapedRenderBatches.shift(),k=c.style.order,I=[];let L=0;for(const O of b){const N=v.getTileByID(O.proxyTileKey),F=v.proxyCachedFBO[O.key]?v.proxyCachedFBO[O.key][i]:void 0,V=F!==void 0?v.renderCache[F]:this.pool[L++],Z=F!==void 0;if(N.texture=V.tex,Z&&!V.dirty){I.push(N.tileID);continue}let G;f.bindFramebuffer.set(V.fb.framebuffer),this.renderedToTile=!1,V.dirty&&(f.clear({color:s.am.transparent,stencil:0}),V.dirty=!1);for(let Y=w.start;Y<=w.end;++Y){const ee=c.style._mergedLayers[k[Y]];if(ee.isHidden(c.transform.zoom))continue;const ae=c.style.getLayerSourceCache(ee),ve=ae?this.proxyToSource[O.key][ae.id]:[O];if(!ve)continue;const we=ve;f.viewport.set([0,0,V.fb.width,V.fb.height]),G!==(ae?ae.id:null)&&(this._setupStencil(V,ve,ee,ae),G=ae?ae.id:null),c.renderLayer(c,ae,ee,we)}if(this._drapedRenderBatches.length===0)for(const Y of this._pendingGroundEffectLayers){const ee=c.style._mergedLayers[k[Y]];if(ee.isHidden(c.transform.zoom))continue;const ae=c.style.getLayerSourceCache(ee),ve=ae?this.proxyToSource[O.key][ae.id]:[O];if(!ve)continue;const we=ve;f.viewport.set([0,0,V.fb.width,V.fb.height]),G!==(ae?ae.id:null)&&(this._setupStencil(V,ve,ee,ae),G=ae?ae.id:null),c.renderLayer(c,ae,ee,we)}this.renderedToTile?(V.dirty=!0,I.push(N.tileID)):Z||--L,L===5&&(L=0,this.renderToBackBuffer(I))}return this.renderToBackBuffer(I),this.renderingToTexture=!1,f.bindFramebuffer.set(null),f.viewport.set([0,0,c.width,c.height]),w.end+1}postRender(){}isLayerOrderingCorrect(i){const c=i.order.length;let f=-1,v=c;for(let b=0;b<c;++b)this._style.isLayerDraped(i._mergedLayers[i.order[b]])?f=Math.max(f,b):v=Math.min(v,b);return v>f}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{i=Math.min(i,c.dem.tree.minimums[0])}),i===0?i:(i-30)*this._exaggeration}raycast(i,c,f){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(b=>b.dem).map(b=>{const w=b.tileID,k=1<<w.overscaledZ,{x:I,y:L}=w.canonical,O=I/k,N=(I+1)/k,F=L/k,V=(L+1)/k;return{minx:O,miny:F,maxx:N,maxy:V,t:b.dem.tree.raycastRoot(O,F,N,V,i,c,f),tile:b}});v.sort((b,w)=>(b.t!==null?b.t:Number.MAX_VALUE)-(w.t!==null?w.t:Number.MAX_VALUE));for(const b of v){if(b.t==null)return null;const w=b.tile.dem.tree.raycast(b.minx,b.miny,b.maxx,b.maxy,i,c,f);if(w!=null)return w}return null}_createFBO(){const i=this.painter.context,c=i.gl,f=this.drapeBufferSize;i.activeTexture.set(c.TEXTURE0);const v=new s.T(i,{width:f[0],height:f[1],data:null},c.RGBA8);v.bind(c.LINEAR,c.CLAMP_TO_EDGE);const b=i.createFramebuffer(f[0],f[1],!0,null);return b.colorAttachment.set(v.texture),b.depthAttachment=new y1(i,b.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,f[0],f[1]),this._stencilRef=0,b.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):b.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&c.texParameterf(c.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:b,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const i in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const c=this._style._mergedLayers[i],f=c.isHidden(this.painter.transform.zoom);return c.type==="hillshade"||c.type==="custom"?!f&&c.shouldRedrape():!f&&c.hasTransition()})}_clearLineLayersFromRenderCache(){let i=!1;for(const f of this._style.getSources())if(f instanceof rd){i=!0;break}if(!i)return;const c={};for(let f=0;f<this._style.order.length;++f){const v=this._style._mergedLayers[this._style.order[f]],b=this._style.getLayerSourceCache(v);if(b&&!c[b.id]&&!v.isHidden(this.painter.transform.zoom)&&v.type==="line"&&v.widthExpression()instanceof s.ab){c[b.id]=!0;for(const w of this.proxyCoords){const k=this.proxyToSource[w.key][b.id];if(k)for(const I of k)this._clearRenderCacheForTile(b.id,I)}}}}_clearRasterLayersFromRenderCache(){let i=!1;for(const f in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[f]._source instanceof To){i=!0;break}if(!i)return;const c={};for(let f=0;f<this._style.order.length;++f){const v=this._style._mergedLayers[this._style.order[f]],b=this._style.getLayerSourceCache(v);if(!b||c[b.id]||v.isHidden(this.painter.transform.zoom)||v.type!=="raster")continue;const w=v.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const I=this.proxyToSource[k.key][b.id];if(I)for(const L of I){const O=hc(b.getTile(L),b.findLoadedParent(L,0),b,this.painter.transform,w);(O.opacity!==1||O.mix!==0)&&this._clearRenderCacheForTile(b.id,L)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const i=this._style.order,c=i.length;if(c===0)return;const f=[];this._pendingGroundEffectLayers=[];let v,b=0,w=this._style._mergedLayers[i[b]];for(;!this._style.isLayerDraped(w)&&w.isHidden(this.painter.transform.zoom)&&++b<c;)w=this._style._mergedLayers[i[b]];for(;b<c;++b){const k=this._style._mergedLayers[i[b]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?v===void 0&&(v=b):(k.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(b),v!==void 0&&(f.push({start:v,end:b-1}),v=void 0)))}if(v!==void 0&&f.push({start:v,end:b-1}),f.length!==0){const k=f[f.length-1];this._pendingGroundEffectLayers.every(I=>I>k.end)||s.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=f}_setupRenderCache(i){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const w=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let k=0;k<w.length;++k){const I=Object.values(w[k]);c.renderCachePool.push(...I)}}return}this._clearRasterLayersFromRenderCache();const f=this.proxyCoords,v=this._tilesDirty;for(let w=f.length-1;w>=0;w--){const k=f[w];if(c.getTileByID(k.key),c.proxyCachedFBO[k.key]!==void 0){const I=i[k.key],L=this.proxyToSource[k.key];let O=0;for(const N in L){const F=L[N],V=I[N];if(!V||V.length!==F.length||F.some((Z,G)=>Z!==V[G]||v[N]&&v[N].hasOwnProperty(Z.key))){O=-1;break}++O}for(const N in c.proxyCachedFBO[k.key])c.renderCache[c.proxyCachedFBO[k.key][N]].dirty=O<0||O!==Object.values(I).length}}const b=[...this._drapedRenderBatches];b.sort((w,k)=>k.end-k.start-(w.end-w.start));for(const w of b)for(const k of f){if(c.proxyCachedFBO[k.key])continue;let I=c.renderCachePool.pop();I===void 0&&c.renderCache.length<50&&(I=c.renderCache.length,c.renderCache.push(this._createFBO())),I!==void 0&&(c.proxyCachedFBO[k.key]={},c.proxyCachedFBO[k.key][w.start]=I,c.renderCache[I].dirty=!0)}this._tilesDirty={}}_setupStencil(i,c,f,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const b=this.painter.context,w=b.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let k;if(f.isTileClipped())k=c.length,this._overlapStencilMode.test={func:w.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:w.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(b.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,f.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):$n.disabled}_renderTileClippingMasks(i,c){const f=this.painter,v=this.painter.context,b=v.gl;f._tileClippingMaskIDs={},v.setColorMode(or.disabled),v.setDepthMode(en.disabled);const w=f.getOrCreateProgram("clippingMask");for(const k of i){const I=f._tileClippingMaskIDs[k.key]=--c;w.draw(f,b.TRIANGLES,en.disabled,new $n({func:b.ALWAYS,mask:0},I,255,b.KEEP,b.KEEP,b.REPLACE),or.disabled,An.disabled,dc(k.projMatrix),"$clipping",f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}}pointCoordinate(i){const c=this.painter.transform;if(i.x<0||i.x>c.width||i.y<0||i.y>c.height)return null;const f=[i.x,i.y,1,1];s.aA(f,f,c.pixelMatrixInverse),s.cw(f,f,1/f[3]),f[0]/=c.worldSize,f[1]/=c.worldSize;const v=c._camera.position,b=s.c6(1,c.center.lat),w=[v[0],v[1],v[2]/b,0],k=s.cX([],f.slice(0,3),w);s.au(k,k);const I=this.raycast(w,k,this._exaggeration);return I!==null&&I?(s.bE(w,w,k,I),w[3]=w[2],w[2]*=b,w):null}_setupProxiedCoordsForOrtho(i,c,f){if(i.getSource()instanceof s.aP)return this._setupProxiedCoordsForImageSource(i,c,f);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const v=this.proxiedCoords[i.id]=[],b=this.proxyCoords;for(let I=0;I<b.length;I++){const L=b[I],O=this._findTileCoveringTileID(L,i);if(O){const N=this._createProxiedId(L,O,f[L.key]&&f[L.key][i.id]);v.push(N),this.proxyToSource[L.key][i.id]=[N]}}let w=!1;const k=new Set;for(let I=0;I<c.length;I++){const L=i.getTile(c[I]);if(!L||!L.hasData())continue;const O=this._findTileCoveringTileID(L.tileID,this.proxySourceCache);if(O&&O.tileID.canonical.z!==L.tileID.canonical.z){const N=this.proxyToSource[O.tileID.key][i.id],F=this._createProxiedId(O.tileID,L,f[O.tileID.key]&&f[O.tileID.key][i.id]);N?N.splice(N.length-1,0,F):this.proxyToSource[O.tileID.key][i.id]=[F];const V=this.proxyToSource[O.tileID.key][i.id];k.has(V)||k.add(V),v.push(F),w=!0}}if(this._sourceTilesOverlap[i.id]=w,w&&this._debugParams.sortTilesHiZFirst)for(const I of k)I.sort((L,O)=>O.overscaledZ-L.overscaledZ)}_setupProxiedCoordsForImageSource(i,c,f){if(!i.getSource().loaded())return;const v=this.proxiedCoords[i.id]=[],b=this.proxyCoords,w=i.getSource(),k=w.tileID;if(!k)return;const I=new s.P(k.x,k.y)._div(1<<k.z),L=w.coordinates.map(s.ac.fromLngLat).reduce((N,F)=>(N.min.x=Math.min(N.min.x,F.x-I.x),N.min.y=Math.min(N.min.y,F.y-I.y),N.max.x=Math.max(N.max.x,F.x-I.x),N.max.y=Math.max(N.max.y,F.y-I.y),N),{min:new s.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),O=(N,F)=>{const V=N.wrap+N.canonical.x/(1<<N.canonical.z),Z=N.canonical.y/(1<<N.canonical.z),G=s.aj/(1<<N.canonical.z),Y=F.wrap+F.canonical.x/(1<<F.canonical.z),ee=F.canonical.y/(1<<F.canonical.z);return V+G<Y+L.min.x||V>Y+L.max.x||Z+G<ee+L.min.y||Z>ee+L.max.y};for(let N=0;N<b.length;N++){const F=b[N];for(let V=0;V<c.length;V++){const Z=i.getTile(c[V]);if(!Z||!Z.hasData()||O(F,Z.tileID))continue;const G=this._createProxiedId(F,Z,f[F.key]&&f[F.key][i.id]),Y=this.proxyToSource[F.key][i.id];Y?Y.push(G):this.proxyToSource[F.key][i.id]=[G],v.push(G)}}}_createProxiedId(i,c,f){let v=this.orthoMatrix;if(f){const b=f.find(w=>w.key===c.tileID.key);if(b)return b}if(c.tileID.key!==i.key){const b=i.canonical.z-c.tileID.canonical.z;let w,k,I;v=s.bz();const L=c.tileID.wrap-i.wrap<<i.overscaledZ;b>0?(w=s.aj>>b,k=w*((c.tileID.canonical.x<<b)-i.canonical.x+L),I=w*((c.tileID.canonical.y<<b)-i.canonical.y)):(w=s.aj<<-b,k=s.aj*(c.tileID.canonical.x-(i.canonical.x+L<<-b)),I=s.aj*(c.tileID.canonical.y-(i.canonical.y<<-b))),s.c5(v,0,w,0,w,0,1),s.bo(v,v,[k,I,0])}return new lp(c.tileID,i.key,v)}_findTileCoveringTileID(i,c){let f=c.getTile(i);if(f&&f.hasData())return f;const v=this._findCoveringTileCache[c.id],b=v[i.key];if(f=b?c.getTileByID(b):null,f&&f.hasData()||b===null)return f;let w=f?f.tileID:i,k=w.overscaledZ;const I=c.getSource().minzoom,L=[];if(!b){const N=c.getSource().maxzoom;if(i.canonical.z>=N){const F=i.canonical.z-N;c.getSource().reparseOverscaled?(k=Math.max(i.canonical.z+2,c.transform.tileZoom),w=new s.aM(k,i.wrap,N,i.canonical.x>>F,i.canonical.y>>F)):F!==0&&(k=N,w=new s.aM(k,i.wrap,N,i.canonical.x>>F,i.canonical.y>>F))}w.key!==i.key&&(L.push(w.key),f=c.getTile(w))}const O=N=>{L.forEach(F=>{v[F]=N}),L.length=0};for(k-=1;k>=I&&(!f||!f.hasData());k--){f&&O(f.tileID.key);const N=w.calculateScaledKey(k);if(f=c.getTileByID(N),f&&f.hasData())break;const F=v[N];if(F===null)break;F===void 0?L.push(N):f=c.getTileByID(F)}return O(f?f.tileID.key:null),f&&f.hasData()?f:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,c){let f=this._tilesDirty[i];f||(f=this._tilesDirty[i]={}),f[c.key]=!0}}function cp(p,i,c){const f=function(k,I,L){const O=s.bG(I,k),N=s.bG(L,[.2126,.7152,.0722]),F=(Z,G,Y)=>(1-Y)*Z+Y*G,V=F(1-.3*Math.min(N,1),1,Math.min(O+1,1));return F(.92,1,Math.asin(s.ay(I[2],-1,1))/Math.PI+.5)*V}(p,[0,0,1],i),v=[0,0,0];s.bY(v,c.slice(0,3),f);const b=[0,0,0];s.bY(b,i.slice(0,3),p[2]);const w=[0,0,0];return s.cV(w,v,b),s.cY(w)}const cm=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],um=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class up{static cacheKey(i,c,f,v){let b=`${c}${v?v.cacheKey:""}`;for(const w of f)i.usedDefines.includes(w)&&(b+=`/${w}`);return b}constructor(i,c,f,v,b,w){const k=i.gl;this.program=k.createProgram(),this.configuration=v,this.name=c,this.fixedDefines=[...w];const I=v?v.getBinderAttributes():[],L=(f.staticAttributes||[]).concat(I);let O=v?v.defines():[];O=O.concat(w.map(Y=>`#define ${Y}`));const N=`#version 300 es
`;let F=N+O.concat("precision mediump float;",ma,Cd.fragmentSource).join(`
`);for(const Y of f.fragmentIncludes)F+=`
${eu[Y]}`;F+=`
${f.fragmentSource}`;let V=N+O.concat("precision highp float;",ma,Cd.vertexSource).join(`
`);for(const Y of f.vertexIncludes)V+=`
${eu[Y]}`;this.forceManualRenderingForInstanceIDShaders=i.forceManualRenderingForInstanceIDShaders&&f.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(V+=`
uniform int u_instanceID;
`),V+=`
${f.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(V=V.replaceAll("gl_InstanceID","u_instanceID"));const Z=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(Z,F),k.compileShader(Z),k.attachShader(this.program,Z);const G=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(G,V),k.compileShader(G),k.attachShader(this.program,G),this.attributes={},this.numAttributes=L.length;for(let Y=0;Y<this.numAttributes;Y++)if(L[Y]){const ee=L[Y].startsWith("a_")?L[Y]:`a_${L[Y]}`;k.bindAttribLocation(this.program,Y,ee),this.attributes[ee]=Y}k.linkProgram(this.program),k.deleteShader(G),k.deleteShader(Z),this.fixedUniforms=b(i),this.binderUniforms=v?v.getUniforms(i):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(Y=>({u_instanceID:new s.c8(Y)}))(i)),(w.includes("TERRAIN")||c.indexOf("symbol")!==-1||c.indexOf("circle")!==-1)&&(this.terrainUniforms=(Y=>({u_dem:new s.c8(Y),u_dem_prev:new s.c8(Y),u_dem_tl:new s.cb(Y),u_dem_scale:new s.ca(Y),u_dem_tl_prev:new s.cb(Y),u_dem_scale_prev:new s.ca(Y),u_dem_size:new s.ca(Y),u_dem_lerp:new s.ca(Y),u_exaggeration:new s.ca(Y),u_depth:new s.c8(Y),u_depth_size_inv:new s.cb(Y),u_depth_range_unpack:new s.cb(Y),u_occluder_half_size:new s.ca(Y),u_occlusion_depth_offset:new s.ca(Y),u_meter_to_dem:new s.ca(Y),u_label_plane_matrix_inv:new s.cc(Y)}))(i)),w.includes("GLOBE")&&(this.globeUniforms=(Y=>({u_tile_tl_up:new s.c9(Y),u_tile_tr_up:new s.c9(Y),u_tile_br_up:new s.c9(Y),u_tile_bl_up:new s.c9(Y),u_tile_up_scale:new s.ca(Y)}))(i)),w.includes("FOG")&&(this.fogUniforms=(Y=>({u_fog_matrix:new s.cc(Y),u_fog_range:new s.cb(Y),u_fog_color:new s.cQ(Y),u_fog_horizon_blend:new s.ca(Y),u_fog_vertical_limit:new s.cb(Y),u_fog_temporal_offset:new s.ca(Y),u_frustum_tl:new s.c9(Y),u_frustum_tr:new s.c9(Y),u_frustum_br:new s.c9(Y),u_frustum_bl:new s.c9(Y),u_globe_pos:new s.c9(Y),u_globe_radius:new s.ca(Y),u_globe_transition:new s.ca(Y),u_is_globe:new s.c8(Y),u_viewport:new s.cb(Y)}))(i)),w.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(Y=>({u_cutoff_params:new s.cQ(Y)}))(i)),w.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(Y=>({u_lighting_ambient_color:new s.c9(Y),u_lighting_directional_dir:new s.c9(Y),u_lighting_directional_color:new s.c9(Y),u_ground_radiance:new s.c9(Y)}))(i)),w.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(Y=>({u_light_matrix_0:new s.cc(Y),u_light_matrix_1:new s.cc(Y),u_fade_range:new s.cb(Y),u_shadow_normal_offset:new s.c9(Y),u_shadow_intensity:new s.ca(Y),u_shadow_texel_size:new s.ca(Y),u_shadow_map_resolution:new s.ca(Y),u_shadow_direction:new s.c9(Y),u_shadow_bias:new s.c9(Y),u_shadowmap_0:new s.c8(Y),u_shadowmap_1:new s.c8(Y)}))(i))}}setTerrainUniformValues(i,c){if(!this.terrainUniforms)return;const f=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in c)f[v]&&f[v].set(this.program,v,c[v])}}setGlobeUniformValues(i,c){if(!this.globeUniforms)return;const f=this.globeUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in c)f[v]&&f[v].set(this.program,v,c[v])}}setFogUniformValues(i,c){if(!this.fogUniforms)return;const f=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in c)f[v].set(this.program,v,c[v])}}setCutoffUniformValues(i,c){if(!this.cutoffUniforms)return;const f=this.cutoffUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in c)f[v].set(this.program,v,c[v])}}setLightsUniformValues(i,c){if(!this.lightsUniforms)return;const f=this.lightsUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in c)f[v].set(this.program,v,c[v])}}setShadowUniformValues(i,c){if(this.failedToCreate||!this.shadowUniforms)return;const f=this.shadowUniforms;i.program.set(this.program);for(const v in c)f[v].set(this.program,v,c[v])}_drawDebugWireframe(i,c,f,v,b,w,k,I,L,O){const N=i.options.wireframe;if(N.terrain===!1&&N.layers2D===!1&&N.layers3D===!1)return;const F=i.context;if(!(!(!N.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!N.layers2D||i._terrain&&i._terrain.renderingToTexture||!cm.includes(this.name))||!(!N.layers3D||!um.includes(this.name))))return;const V=F.gl,Z=i.wireframeDebugCache.getLinesFromTrianglesBuffer(i.frameCounter,b,F);if(!Z)return;const G=[...this.fixedDefines];G.push("DEBUG_WIREFRAME");const Y=i.getOrCreateProgram(this.name,{config:this.configuration,defines:G});F.program.set(Y.program);const ee=(we,Pe,Ee)=>{if(Pe[we]&&Ee[we])for(const ke in Pe[we])Ee[we][ke]&&Ee[we][ke].set(Ee.program,ke,Pe[we][ke].current)};L&&L.setUniforms(Y.program,F,Y.binderUniforms,k,{zoom:I}),ee("fixedUniforms",this,Y),ee("terrainUniforms",this,Y),ee("globeUniforms",this,Y),ee("fogUniforms",this,Y),ee("lightsUniforms",this,Y),ee("shadowUniforms",this,Y),Z.bind(),F.setColorMode(new or([V.ONE,V.ONE_MINUS_SRC_ALPHA,V.ZERO,V.ONE],s.am.transparent,[!0,!0,!0,!1])),F.setDepthMode(new en(c.func===V.LESS?V.LEQUAL:c.func,en.ReadOnly,c.range)),F.setStencilMode($n.disabled);const ae=3*w.primitiveLength*2,ve=3*w.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const we=O||1;for(let Pe=0;Pe<we;++Pe)Y.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Pe),V.drawElements(V.LINES,ae,V.UNSIGNED_SHORT,ve)}else O&&O>1?V.drawElementsInstanced(V.LINES,ae,V.UNSIGNED_SHORT,ve,O):V.drawElements(V.LINES,ae,V.UNSIGNED_SHORT,ve);b.bind(),F.program.set(this.program),F.setDepthMode(c),F.setStencilMode(f),F.setColorMode(v)}checkUniforms(i,c,f){if(this.fixedDefines.includes(c)){for(const v of Object.keys(f))if(!f[v].initialized)throw new Error(`Program '${this.name}', from draw '${i}': uniform ${v} not set but required by ${c} being defined`)}}draw(i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G,Y){const ee=i.context,ae=ee.gl;if(this.failedToCreate)return;ee.program.set(this.program),ee.setDepthMode(f),ee.setStencilMode(v),ee.setColorMode(b),ee.setCullFace(w);for(const Pe of Object.keys(this.fixedUniforms))this.fixedUniforms[Pe].set(this.program,Pe,k[Pe]);Z&&Z.setUniforms(this.program,ee,this.binderUniforms,F,{zoom:V});const ve={[ae.POINTS]:1,[ae.LINES]:2,[ae.TRIANGLES]:3,[ae.LINE_STRIP]:1}[c];this.checkUniforms(I,"RENDER_SHADOWS",this.shadowUniforms);const we=Y&&Y>0?1:void 0;for(const Pe of N.get()){const Ee=Pe.vaos||(Pe.vaos={});if((Ee[I]||(Ee[I]=new tu)).bind(ee,this,L,Z?Z.getPaintVertexBuffers():[],O,Pe.vertexOffset,G||[],we),this.forceManualRenderingForInstanceIDShaders){const ke=Y||1;for(let Se=0;Se<ke;++Se)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Se),O?ae.drawElements(c,Pe.primitiveLength*ve,ae.UNSIGNED_SHORT,Pe.primitiveOffset*ve*2):ae.drawArrays(c,Pe.vertexOffset,Pe.vertexLength)}else Y&&Y>1?ae.drawElementsInstanced(c,Pe.primitiveLength*ve,ae.UNSIGNED_SHORT,Pe.primitiveOffset*ve*2,Y):O?ae.drawElements(c,Pe.primitiveLength*ve,ae.UNSIGNED_SHORT,Pe.primitiveOffset*ve*2):ae.drawArrays(c,Pe.vertexOffset,Pe.vertexLength);c===ae.TRIANGLES&&O&&this._drawDebugWireframe(i,f,v,b,O,Pe,F,V,Z,Y)}}}function Ed(p,i,c=0){const f=Math.pow(2,i.tileID.overscaledZ),v=i.tileSize*Math.pow(2,p.transform.tileZoom)/f,b=v*(i.tileID.canonical.x+i.tileID.wrap*f),w=v*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/s.aw(i,1,p.transform.tileZoom),u_pixel_coord_upper:[b>>16,w>>16],u_pixel_coord_lower:[65535&b,65535&w],u_pattern_transition:c}}const ou={terrain:0,flat:1},dm=s.bz(),Id=(p,i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G,Y,ee)=>{const ae=i.style.light,ve=ae.properties.get("position"),we=[ve.x,ve.y,ve.z],Pe=s.dx();ae.properties.get("anchor")==="viewport"&&(s.dy(Pe,-i.transform.angle),s.dz(we,we,Pe));const Ee=ae.properties.get("color").toPremultipliedRenderColor(null),ke=i.transform,Se={u_matrix:p,u_lightpos:we,u_lightintensity:ae.properties.get("intensity"),u_lightcolor:[Ee.r,Ee.g,Ee.b],u_vertical_gradient:+c,u_opacity:f,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:dm,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:ou[L],u_base_type:ou[O],u_ao:v,u_edge_radius:b,u_width_scale:w,u_flood_light_color:Z,u_vertical_scale:G,u_flood_light_intensity:Y,u_ground_shadow_factor:ee};return ke.projection.name==="globe"&&(Se.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],Se.u_zoom_transition=N,Se.u_inv_rot_matrix=V,Se.u_merc_center=F,Se.u_up_dir=ke.projection.upVector(new s.cp(0,0,0),F[0]*s.aj,F[1]*s.aj),Se.u_height_lift=I),Se},R0=(p,i,c,f,v,b)=>({u_matrix:p,u_edge_radius:i,u_width_scale:c,u_vertical_scale:f,u_height_type:ou[v],u_base_type:ou[b]}),M0=(p,i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G,Y,ee)=>{const ae=Id(p,i,c,f,v,b,w,k,L,O,N,F,V,Z,G,Y,1,[0,0,0]),ve={u_height_factor:-Math.pow(2,k.overscaledZ)/I.tileSize/8};return s.h(ae,Ed(i,I,ee),ve)},pc=(p,i,c)=>({u_matrix:p,u_emissive_strength:i,u_ground_shadow_factor:c}),D0=(p,i,c,f,v,b=0)=>s.h(pc(p,i,v),Ed(c,f,b)),b1=(p,i,c,f)=>({u_matrix:p,u_world:c,u_emissive_strength:i,u_ground_shadow_factor:f}),_1=(p,i,c,f,v,b,w=0)=>s.h(D0(p,i,c,f,b,w),{u_world:v}),x1=(p,i)=>({u_matrix:p,u_ground_shadow_factor:i}),dp=(p,i,c,f,v)=>({u_matrix:p,u_camera_pos:[i[0],i[1],i[2]],u_depth_bias:c,u_height_scale:f,u_reset_depth:v}),w1=(p,i,c,f)=>{const v=s.aj/c.tileSize;return{u_matrix:p,u_camera_to_center_distance:i.getCameraToCenterDistance(f),u_extrude_scale:[i.pixelsToGLUnits[0]/v,i.pixelsToGLUnits[1]/v]}},hp=(p,i,c=1)=>({u_matrix:p,u_color:i,u_overlay:0,u_overlay_scale:c}),hm=s.bz(),L0=(p,i,c,f,v,b,w)=>{const k=p.transform,I=k.projection.name==="globe",L=I?s.dA(k.zoom,i.canonical)*k._pixelsPerMercatorPixel:s.aw(c,1,b),O={u_matrix:i.projMatrix,u_extrude_scale:L,u_intensity:w,u_inv_rot_matrix:hm,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(I){O.u_inv_rot_matrix=f,O.u_merc_center=v,O.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],O.u_zoom_transition=s.ah(k.zoom);const N=v[0]*s.aj,F=v[1]*s.aj;O.u_up_dir=k.projection.upVector(new s.cp(0,0,0),N,F)}return O};function fc(p,[i,c,f,v],[b,w]){if(b===w)return[0,0,0,0];const k=255*(p-1)/(p*(w-b));return[i*k,c*k,f*k,v*k]}function pm(p,i,[c,f]){return c===f?0:.5/p+(i-c)*(p-1)/(p*(f-c))}const fm=(p,i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G,Y,ee,ae,ve,we)=>({u_matrix:p,u_normalize_matrix:i,u_globe_matrix:c,u_merc_matrix:f,u_grid_matrix:v,u_tl_parent:b,u_scale_parent:L,u_fade_t:O.mix,u_opacity:O.opacity*N.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:N.paint.get("raster-brightness-min"),u_brightness_high:N.paint.get("raster-brightness-max"),u_saturation_factor:s.dC(N.paint.get("raster-saturation")),u_contrast_factor:s.dB(N.paint.get("raster-contrast")),u_spin_weights:O0(N.paint.get("raster-hue-rotate")),u_perspective_transform:F,u_raster_elevation:V,u_zoom_transition:w,u_merc_center:k,u_cutoff_params:I,u_colorization_mix:fc(s.dD,G,ee),u_colorization_offset:pm(s.dD,Y,ee),u_color_ramp:Z,u_texture_offset:[ve/(ae+2*ve),ae/(ae+2*ve)],u_texture_res:[ae+2*ve,ae+2*ve],u_emissive_strength:we});function O0(p){p*=Math.PI/180;const i=Math.sin(p),c=Math.cos(p);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const yl=.05,mc=(p,i,c,f,v,b,w,k,I,L,O,N)=>({u_matrix:p,u_normalize_matrix:i,u_globe_matrix:c,u_merc_matrix:f,u_grid_matrix:v,u_tl_parent:b,u_scale_parent:L,u_fade_t:O.mix,u_opacity:O.opacity,u_image0:0,u_image1:1,u_raster_elevation:N,u_zoom_transition:w,u_merc_center:k,u_cutoff_params:I}),z0=(p,i,c,f,v,b,w,k,I,L)=>({u_particle_texture:p,u_particle_texture_side_len:i,u_tile_offset:c,u_velocity:f,u_color_ramp:b,u_velocity_res:v,u_max_speed:w,u_uv_offset:k,u_data_scale:[255*I[0],255*I[1]],u_data_offset:L,u_particle_pos_scale:1.1,u_particle_pos_offset:[yl,yl]}),vl=(p,i,c,f,v,b,w,k,I,L)=>({u_particle_texture:p,u_particle_texture_side_len:i,u_velocity:c,u_velocity_res:f,u_max_speed:v,u_speed_factor:b,u_reset_rate:w,u_rand_seed:Math.random(),u_uv_offset:k,u_data_scale:[255*I[0],255*I[1]],u_data_offset:L,u_particle_pos_scale:1.1,u_particle_pos_offset:[yl,yl]}),pp=s.bz(),Pd=(p,i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G,Y,ee,ae,ve,we,Pe,Ee,ke)=>{const Se=v.transform,Ae={u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:Se.getCameraToCenterDistance(ae),u_rotate_symbol:+c,u_aspect_ratio:Se.width/Se.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:w,u_coord_matrix:k,u_is_text:+L,u_elevation_from_sea:I?1:0,u_pitch_with_map:+f,u_texsize:O,u_texsize_icon:N,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:pp,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:pp,u_up_vector:[0,-1,0],u_color_adj_mat:Pe,u_icon_transition:Ee||0,u_gamma_scale:f?v.transform.getCameraToCenterDistance(ae)*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:s.q.devicePixelRatio,u_is_halo:1,u_scale_factor:ke||1,u_ground_shadow_factor:ve,u_inv_matrix:s.bi(s.bz(),w),u_normal_scale:we};return ae.name==="globe"&&(Ae.u_tile_id=[V.canonical.x,V.canonical.y,1<<V.canonical.z],Ae.u_zoom_transition=Z,Ae.u_inv_rot_matrix=Y,Ae.u_merc_center=G,Ae.u_camera_forward=Se._camera.forward(),Ae.u_ecef_origin=s.dE(Se.globeMatrix,V.toUnwrapped()),Ae.u_tile_matrix=Float32Array.from(Se.globeMatrix),Ae.u_up_vector=ee),Ae},mm=(p,i,c,f)=>({u_matrix:p,u_emissive_strength:i,u_opacity:c,u_color:f}),gm=(p,i,c,f,v,b,w,k,I)=>s.h(function(L,O,N,F,V,Z){const{width:G,height:Y}=F.imageManager.getPixelSize(O),ee=Math.pow(2,Z.tileID.overscaledZ),ae=Z.tileSize*Math.pow(2,F.transform.tileZoom)/ee,ve=ae*(Z.tileID.canonical.x+Z.tileID.wrap*ee),we=ae*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl:N.tl,u_pattern_br:N.br,u_texsize:[G,Y],u_pattern_size:N.displaySize,u_pattern_units_to_pixels:V?[F.transform.width,-1*F.transform.height]:[1/s.aw(Z,1,F.transform.tileZoom),1/s.aw(Z,1,F.transform.tileZoom)],u_pixel_coord_upper:[ve>>16,we>>16],u_pixel_coord_lower:[65535&ve,65535&we]}}(0,b,w,f,k,I),{u_matrix:p,u_emissive_strength:i,u_opacity:c}),Ad=new Float32Array(s.bx([])),Rd=(p,i,c,f,v,b,w,k,I,L,O,N,F,V=[0,0,0],Z)=>{const G=v.style.light,Y=G.properties.get("position"),ee=[-Y.x,-Y.y,Y.z],ae=s.dx();G.properties.get("anchor")==="viewport"&&(s.dy(ae,-v.transform.angle),s.dz(ee,ee,ae));const ve=O.alphaMode==="MASK",we=G.properties.get("color").toNonPremultipliedRenderColor(null),Pe=F.paint.get("model-ambient-occlusion-intensity"),Ee=F.paint.get("model-color").constantOr(s.am.white).toNonPremultipliedRenderColor(null);return Ee.a=F.paint.get("model-color-mix-intensity").constantOr(0),{u_matrix:p,u_lighting_matrix:i,u_normal_matrix:c,u_node_matrix:f||Ad,u_lightpos:ee,u_lightintensity:G.properties.get("intensity"),u_lightcolor:[we.r,we.g,we.b],u_camera_pos:V,u_opacity:b,u_baseTextureIsAlpha:0,u_alphaMask:+ve,u_alphaCutoff:O.alphaCutoff,u_baseColorFactor:w.toNonPremultipliedRenderColor(null).toArray01(),u_emissiveFactor:k.toNonPremultipliedRenderColor(null).toArray01(),u_metallicFactor:I,u_roughnessFactor:L,u_baseColorTexture:Xo.BaseColor,u_metallicRoughnessTexture:Xo.MetallicRoughness,u_normalTexture:Xo.Normal,u_occlusionTexture:Xo.Occlusion,u_emissionTexture:Xo.Emission,u_lutTexture:Xo.LUT,u_color_mix:Ee.toArray01(),u_aoIntensity:Pe,u_emissive_strength:N,u_occlusionTextureTransform:Z||[0,0,0,0]}},B0=(p,i=Ad,c=Ad)=>({u_matrix:p,u_instance:i,u_node_matrix:c}),F0={fillExtrusion:p=>({u_matrix:new s.cc(p),u_lightpos:new s.c9(p),u_lightintensity:new s.ca(p),u_lightcolor:new s.c9(p),u_vertical_gradient:new s.ca(p),u_opacity:new s.ca(p),u_edge_radius:new s.ca(p),u_width_scale:new s.ca(p),u_ao:new s.cb(p),u_height_type:new s.c8(p),u_base_type:new s.c8(p),u_tile_id:new s.c9(p),u_zoom_transition:new s.ca(p),u_inv_rot_matrix:new s.cc(p),u_merc_center:new s.cb(p),u_up_dir:new s.c9(p),u_height_lift:new s.ca(p),u_flood_light_color:new s.c9(p),u_vertical_scale:new s.ca(p),u_flood_light_intensity:new s.ca(p),u_ground_shadow_factor:new s.c9(p)}),fillExtrusionDepth:p=>({u_matrix:new s.cc(p),u_edge_radius:new s.ca(p),u_width_scale:new s.ca(p),u_vertical_scale:new s.ca(p),u_height_type:new s.c8(p),u_base_type:new s.c8(p)}),fillExtrusionPattern:p=>({u_matrix:new s.cc(p),u_lightpos:new s.c9(p),u_lightintensity:new s.ca(p),u_lightcolor:new s.c9(p),u_vertical_gradient:new s.ca(p),u_height_factor:new s.ca(p),u_edge_radius:new s.ca(p),u_width_scale:new s.ca(p),u_ao:new s.cb(p),u_height_type:new s.c8(p),u_base_type:new s.c8(p),u_tile_id:new s.c9(p),u_zoom_transition:new s.ca(p),u_inv_rot_matrix:new s.cc(p),u_merc_center:new s.cb(p),u_up_dir:new s.c9(p),u_height_lift:new s.ca(p),u_image:new s.c8(p),u_texsize:new s.cb(p),u_pixel_coord_upper:new s.cb(p),u_pixel_coord_lower:new s.cb(p),u_tile_units_to_pixels:new s.ca(p),u_opacity:new s.ca(p),u_pattern_transition:new s.ca(p)}),fillExtrusionGroundEffect:p=>({u_matrix:new s.cc(p),u_opacity:new s.ca(p),u_ao_pass:new s.ca(p),u_meter_to_tile:new s.ca(p),u_ao:new s.cb(p),u_flood_light_intensity:new s.ca(p),u_flood_light_color:new s.c9(p),u_attenuation:new s.ca(p),u_edge_radius:new s.ca(p),u_fb:new s.c8(p),u_fb_size:new s.ca(p),u_dynamic_offset:new s.ca(p)}),fill:p=>({u_matrix:new s.cc(p),u_emissive_strength:new s.ca(p),u_ground_shadow_factor:new s.c9(p)}),fillPattern:p=>({u_matrix:new s.cc(p),u_emissive_strength:new s.ca(p),u_image:new s.c8(p),u_texsize:new s.cb(p),u_pixel_coord_upper:new s.cb(p),u_pixel_coord_lower:new s.cb(p),u_tile_units_to_pixels:new s.ca(p),u_ground_shadow_factor:new s.c9(p),u_pattern_transition:new s.ca(p)}),fillOutline:p=>({u_matrix:new s.cc(p),u_emissive_strength:new s.ca(p),u_world:new s.cb(p),u_ground_shadow_factor:new s.c9(p)}),fillOutlinePattern:p=>({u_matrix:new s.cc(p),u_emissive_strength:new s.ca(p),u_world:new s.cb(p),u_image:new s.c8(p),u_texsize:new s.cb(p),u_pixel_coord_upper:new s.cb(p),u_pixel_coord_lower:new s.cb(p),u_tile_units_to_pixels:new s.ca(p),u_ground_shadow_factor:new s.c9(p),u_pattern_transition:new s.ca(p)}),building:p=>({u_matrix:new s.cc(p),u_normal_matrix:new s.cc(p),u_opacity:new s.ca(p)}),buildingDepth:p=>({u_matrix:new s.cc(p)}),elevatedStructuresDepth:p=>({u_matrix:new s.cc(p),u_depth_bias:new s.ca(p)}),elevatedStructures:p=>({u_matrix:new s.cc(p),u_ground_shadow_factor:new s.c9(p)}),elevatedStructuresDepthReconstruct:p=>({u_matrix:new s.cc(p),u_camera_pos:new s.c9(p),u_depth_bias:new s.ca(p),u_height_scale:new s.ca(p),u_reset_depth:new s.ca(p)}),circle:s.dH,collisionBox:p=>({u_matrix:new s.cc(p),u_camera_to_center_distance:new s.ca(p),u_extrude_scale:new s.cb(p)}),collisionCircle:p=>({u_matrix:new s.cc(p),u_inv_matrix:new s.cc(p),u_camera_to_center_distance:new s.ca(p),u_viewport_size:new s.cb(p)}),debug:p=>({u_color:new s.di(p),u_matrix:new s.cc(p),u_overlay:new s.c8(p),u_overlay_scale:new s.ca(p)}),clippingMask:p=>({u_matrix:new s.cc(p)}),heatmap:p=>({u_extrude_scale:new s.ca(p),u_intensity:new s.ca(p),u_matrix:new s.cc(p),u_inv_rot_matrix:new s.cc(p),u_merc_center:new s.cb(p),u_tile_id:new s.c9(p),u_zoom_transition:new s.ca(p),u_up_dir:new s.c9(p)}),heatmapTexture:p=>({u_image:new s.c8(p),u_color_ramp:new s.c8(p),u_opacity:new s.ca(p)}),hillshade:p=>({u_matrix:new s.cc(p),u_image:new s.c8(p),u_latrange:new s.cb(p),u_light:new s.cb(p),u_shadow:new s.di(p),u_highlight:new s.di(p),u_emissive_strength:new s.ca(p),u_accent:new s.di(p)}),hillshadePrepare:p=>({u_matrix:new s.cc(p),u_image:new s.c8(p),u_dimension:new s.cb(p),u_zoom:new s.ca(p)}),line:s.dG,linePattern:s.dF,raster:p=>({u_matrix:new s.cc(p),u_normalize_matrix:new s.cc(p),u_globe_matrix:new s.cc(p),u_merc_matrix:new s.cc(p),u_grid_matrix:new s.dj(p),u_tl_parent:new s.cb(p),u_scale_parent:new s.ca(p),u_fade_t:new s.ca(p),u_opacity:new s.ca(p),u_image0:new s.c8(p),u_image1:new s.c8(p),u_brightness_low:new s.ca(p),u_brightness_high:new s.ca(p),u_saturation_factor:new s.ca(p),u_contrast_factor:new s.ca(p),u_spin_weights:new s.c9(p),u_perspective_transform:new s.cb(p),u_raster_elevation:new s.ca(p),u_zoom_transition:new s.ca(p),u_merc_center:new s.cb(p),u_cutoff_params:new s.cQ(p),u_colorization_mix:new s.cQ(p),u_colorization_offset:new s.ca(p),u_color_ramp:new s.c8(p),u_texture_offset:new s.cb(p),u_texture_res:new s.cb(p),u_emissive_strength:new s.ca(p)}),rasterParticle:p=>({u_matrix:new s.cc(p),u_normalize_matrix:new s.cc(p),u_globe_matrix:new s.cc(p),u_merc_matrix:new s.cc(p),u_grid_matrix:new s.dj(p),u_tl_parent:new s.cb(p),u_scale_parent:new s.ca(p),u_fade_t:new s.ca(p),u_opacity:new s.ca(p),u_image0:new s.c8(p),u_image1:new s.c8(p),u_raster_elevation:new s.ca(p),u_zoom_transition:new s.ca(p),u_merc_center:new s.cb(p),u_cutoff_params:new s.cQ(p)}),rasterParticleTexture:p=>({u_texture:new s.c8(p),u_opacity:new s.ca(p)}),rasterParticleDraw:p=>({u_particle_texture:new s.c8(p),u_particle_texture_side_len:new s.ca(p),u_tile_offset:new s.cb(p),u_velocity:new s.c8(p),u_color_ramp:new s.c8(p),u_velocity_res:new s.cb(p),u_max_speed:new s.ca(p),u_uv_offset:new s.cb(p),u_data_scale:new s.cb(p),u_data_offset:new s.ca(p),u_particle_pos_scale:new s.ca(p),u_particle_pos_offset:new s.cb(p)}),rasterParticleUpdate:p=>({u_particle_texture:new s.c8(p),u_particle_texture_side_len:new s.ca(p),u_velocity:new s.c8(p),u_velocity_res:new s.cb(p),u_max_speed:new s.ca(p),u_speed_factor:new s.ca(p),u_reset_rate:new s.ca(p),u_rand_seed:new s.ca(p),u_uv_offset:new s.cb(p),u_data_scale:new s.cb(p),u_data_offset:new s.ca(p),u_particle_pos_scale:new s.ca(p),u_particle_pos_offset:new s.cb(p)}),symbol:p=>({u_is_size_zoom_constant:new s.c8(p),u_is_size_feature_constant:new s.c8(p),u_size_t:new s.ca(p),u_size:new s.ca(p),u_camera_to_center_distance:new s.ca(p),u_rotate_symbol:new s.c8(p),u_aspect_ratio:new s.ca(p),u_fade_change:new s.ca(p),u_matrix:new s.cc(p),u_label_plane_matrix:new s.cc(p),u_coord_matrix:new s.cc(p),u_is_text:new s.c8(p),u_elevation_from_sea:new s.c8(p),u_pitch_with_map:new s.c8(p),u_texsize:new s.cb(p),u_texsize_icon:new s.cb(p),u_texture:new s.c8(p),u_texture_icon:new s.c8(p),u_gamma_scale:new s.ca(p),u_device_pixel_ratio:new s.ca(p),u_tile_id:new s.c9(p),u_zoom_transition:new s.ca(p),u_inv_rot_matrix:new s.cc(p),u_merc_center:new s.cb(p),u_camera_forward:new s.c9(p),u_tile_matrix:new s.cc(p),u_up_vector:new s.c9(p),u_ecef_origin:new s.c9(p),u_is_halo:new s.c8(p),u_icon_transition:new s.ca(p),u_color_adj_mat:new s.cc(p),u_scale_factor:new s.ca(p),u_ground_shadow_factor:new s.c9(p),u_inv_matrix:new s.cc(p),u_normal_scale:new s.ca(p)}),background:p=>({u_matrix:new s.cc(p),u_emissive_strength:new s.ca(p),u_opacity:new s.ca(p),u_color:new s.di(p)}),backgroundPattern:p=>({u_matrix:new s.cc(p),u_emissive_strength:new s.ca(p),u_opacity:new s.ca(p),u_image:new s.c8(p),u_pattern_tl:new s.cb(p),u_pattern_br:new s.cb(p),u_texsize:new s.cb(p),u_pattern_size:new s.cb(p),u_pixel_coord_upper:new s.cb(p),u_pixel_coord_lower:new s.cb(p),u_pattern_units_to_pixels:new s.cb(p)}),terrainRaster:p=>({u_matrix:new s.cc(p),u_image0:new s.c8(p),u_skirt_height:new s.ca(p),u_ground_shadow_factor:new s.c9(p)}),skybox:p=>({u_matrix:new s.cc(p),u_sun_direction:new s.c9(p),u_cubemap:new s.c8(p),u_opacity:new s.ca(p),u_temporal_offset:new s.ca(p)}),skyboxGradient:p=>({u_matrix:new s.cc(p),u_color_ramp:new s.c8(p),u_center_direction:new s.c9(p),u_radius:new s.ca(p),u_opacity:new s.ca(p),u_temporal_offset:new s.ca(p)}),skyboxCapture:p=>({u_matrix_3f:new s.dj(p),u_sun_direction:new s.c9(p),u_sun_intensity:new s.ca(p),u_color_tint_r:new s.cQ(p),u_color_tint_m:new s.cQ(p),u_luminance:new s.ca(p)}),globeRaster:p=>({u_proj_matrix:new s.cc(p),u_globe_matrix:new s.cc(p),u_normalize_matrix:new s.cc(p),u_merc_matrix:new s.cc(p),u_zoom_transition:new s.ca(p),u_merc_center:new s.cb(p),u_image0:new s.c8(p),u_grid_matrix:new s.dj(p),u_skirt_height:new s.ca(p),u_far_z_cutoff:new s.ca(p),u_frustum_tl:new s.c9(p),u_frustum_tr:new s.c9(p),u_frustum_br:new s.c9(p),u_frustum_bl:new s.c9(p),u_globe_pos:new s.c9(p),u_globe_radius:new s.ca(p),u_viewport:new s.cb(p)}),globeAtmosphere:p=>({u_frustum_tl:new s.c9(p),u_frustum_tr:new s.c9(p),u_frustum_br:new s.c9(p),u_frustum_bl:new s.c9(p),u_horizon:new s.ca(p),u_transition:new s.ca(p),u_fadeout_range:new s.ca(p),u_color:new s.cQ(p),u_high_color:new s.cQ(p),u_space_color:new s.cQ(p),u_temporal_offset:new s.ca(p),u_horizon_angle:new s.ca(p)}),model:p=>({u_matrix:new s.cc(p),u_lighting_matrix:new s.cc(p),u_normal_matrix:new s.cc(p),u_node_matrix:new s.cc(p),u_lightpos:new s.c9(p),u_lightintensity:new s.ca(p),u_lightcolor:new s.c9(p),u_camera_pos:new s.c9(p),u_opacity:new s.ca(p),u_baseColorFactor:new s.cQ(p),u_emissiveFactor:new s.cQ(p),u_metallicFactor:new s.ca(p),u_roughnessFactor:new s.ca(p),u_baseTextureIsAlpha:new s.c8(p),u_alphaMask:new s.c8(p),u_alphaCutoff:new s.ca(p),u_baseColorTexture:new s.c8(p),u_metallicRoughnessTexture:new s.c8(p),u_normalTexture:new s.c8(p),u_occlusionTexture:new s.c8(p),u_emissionTexture:new s.c8(p),u_lutTexture:new s.c8(p),u_color_mix:new s.cQ(p),u_aoIntensity:new s.ca(p),u_emissive_strength:new s.ca(p),u_occlusionTextureTransform:new s.cQ(p)}),modelDepth:p=>({u_matrix:new s.cc(p),u_instance:new s.cc(p),u_node_matrix:new s.cc(p)}),groundShadow:p=>({u_matrix:new s.cc(p),u_ground_shadow_factor:new s.c9(p)}),stars:p=>({u_matrix:new s.cc(p),u_up:new s.c9(p),u_right:new s.c9(p),u_intensity_multiplier:new s.ca(p)}),snowParticle:p=>({u_modelview:new s.cc(p),u_projection:new s.cc(p),u_time:new s.ca(p),u_cam_pos:new s.c9(p),u_velocityConeAperture:new s.ca(p),u_velocity:new s.ca(p),u_horizontalOscillationRadius:new s.ca(p),u_horizontalOscillationRate:new s.ca(p),u_boxSize:new s.ca(p),u_billboardSize:new s.ca(p),u_simpleShapeParameters:new s.cb(p),u_screenSize:new s.cb(p),u_thinningCenterPos:new s.cb(p),u_thinningShape:new s.c9(p),u_thinningAffectedRatio:new s.ca(p),u_thinningParticleOffset:new s.ca(p),u_particleColor:new s.cQ(p),u_direction:new s.c9(p)}),rainParticle:p=>({u_modelview:new s.cc(p),u_projection:new s.cc(p),u_time:new s.ca(p),u_cam_pos:new s.c9(p),u_texScreen:new s.c8(p),u_velocityConeAperture:new s.ca(p),u_velocity:new s.ca(p),u_boxSize:new s.ca(p),u_rainDropletSize:new s.cb(p),u_distortionStrength:new s.ca(p),u_rainDirection:new s.c9(p),u_color:new s.cQ(p),u_screenSize:new s.cb(p),u_thinningCenterPos:new s.cb(p),u_thinningShape:new s.c9(p),u_thinningAffectedRatio:new s.ca(p),u_thinningParticleOffset:new s.ca(p),u_shapeDirectionalPower:new s.ca(p),u_shapeNormalPower:new s.ca(p),u_mode:new s.ca(p)}),vignette:p=>({u_vignetteShape:new s.c9(p),u_vignetteColor:new s.cQ(p)}),occlusion:p=>({u_matrix:new s.cc(p),u_anchorPos:new s.c9(p),u_screenSizePx:new s.cb(p),u_occluderSizePx:new s.cb(p),u_color:new s.cQ(p)})};class Vs{constructor(i,c,f,v){this.id=Vs.uniqueIdxCounter,Vs.uniqueIdxCounter++,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||v||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){this.id=Vs.uniqueIdxCounter,Vs.uniqueIdxCounter++;const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Vs.uniqueIdxCounter=0;const S1={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class C1{constructor(i,c,f,v,b,w){this.length=c.length,this.attributes=f,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.instanceCount=w,this.context=i;const k=i.gl;this.buffer=k.createBuffer(),i.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||b||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let f=0;f<this.attributes.length;f++){const v=c.attributes[this.attributes[f].name];v!==void 0&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,c,f){for(let v=0;v<this.attributes.length;v++){const b=this.attributes[v],w=c.attributes[b.name];w!==void 0&&i.vertexAttribPointer(w,b.components,i[S1[b.type]],!1,this.itemSize,b.offset+this.itemSize*(f||0))}}setVertexAttribDivisor(i,c,f){for(let v=0;v<this.attributes.length;v++){const b=c.attributes[this.attributes[v].name];b!==void 0&&this.instanceCount&&this.instanceCount>0&&i.vertexAttribDivisor(b,f)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ym{constructor(i,c,f,v,b){this.context=i,this.width=c,this.height=f;const w=this.framebuffer=i.gl.createFramebuffer();v&&(this.colorAttachment=new I0(i,w)),b&&(this.depthAttachmentType=b,this.depthAttachment=b==="renderbuffer"?new P0(i,w):new g1(i,w))}destroy(){const i=this.context.gl;if(this.colorAttachment){const c=this.colorAttachment.get();c&&i.deleteTexture(c)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const c=this.depthAttachment.get();c&&i.deleteRenderbuffer(c)}else{const c=this.depthAttachment.get();c&&i.deleteTexture(c)}i.deleteFramebuffer(this.framebuffer)}}class k1{constructor(i,c){this.gl=i,this.clearColor=new _0(this),this.clearDepth=new tm(this),this.clearStencil=new u1(this),this.colorMask=new d1(this),this.depthMask=new h1(this),this.stencilMask=new p1(this),this.stencilFunc=new x0(this),this.stencilOp=new f1(this),this.stencilTest=new Qh(this),this.depthRange=new m1(this),this.depthTest=new w0(this),this.depthFunc=new nm(this),this.blend=new ep(this),this.blendFunc=new rm(this),this.blendColor=new uc(this),this.blendEquation=new nu(this),this.cullFace=new tp(this),this.cullFaceSide=new np(this),this.frontFace=new ru(this),this.program=new S0(this),this.activeTexture=new im(this),this.viewport=new C0(this),this.bindFramebuffer=new iu(this),this.bindRenderbuffer=new rp(this),this.bindTexture=new ip(this),this.bindVertexBuffer=new om(this),this.bindElementBuffer=new op(this),this.bindVertexArrayOES=new kd(this),this.pixelStoreUnpack=new k0(this),this.pixelStoreUnpackPremultiplyAlpha=new T0(this),this.pixelStoreUnpackFlipY=new E0(this),this.options=c?Object.assign({},c):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=i.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=i.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=i.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=c&&!!c.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=i.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this.maxPointSize=i.getParameter(i.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c,f){return new Vs(this,i,c,f)}createVertexBuffer(i,c,f,v,b){return new C1(this,i,c,f,v,b)}createRenderbuffer(i,c,f){const v=this.gl,b=v.createRenderbuffer();return this.bindRenderbuffer.set(b),v.renderbufferStorage(v.RENDERBUFFER,i,c,f),this.bindRenderbuffer.set(null),b}createFramebuffer(i,c,f,v){return new ym(this,i,c,f,v)}clear({color:i,depth:c,stencil:f,colorMask:v}){const b=this.gl;let w=0;i&&(w|=b.COLOR_BUFFER_BIT,this.clearColor.set(i.toNonPremultipliedRenderColor(null)),this.colorMask.set(v||[!0,!0,!0,!0])),c!==void 0&&(w|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),f!==void 0&&(w|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),b.clear(w)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){s.bv(i.blendFunction,or.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor),i.blendEquation?this.blendEquation.set(i.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(i.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let su;function fp(p,i,c,f,v,b,w){const k=p.context,I=k.gl,L=p.transform,O=p.getOrCreateProgram("collisionBox"),N=[];let F=0,V=0;for(let we=0;we<f.length;we++){const Pe=f[we],Ee=i.getTile(Pe),ke=Ee.getBucket(c);if(!ke)continue;const Se=Mn(Pe,ke,L);let Ae=Se;v[0]===0&&v[1]===0||(Ae=p.translatePosMatrix(Se,Ee,v,b));const De=w?ke.textCollisionBox:ke.iconCollisionBox,Ze=ke.collisionCircleArray;if(Ze.length>0){const Ye=s.bz(),ht=Ae;s.cB(Ye,ke.placementInvProjMatrix,L.glCoordMatrix),s.cB(Ye,Ye,ke.placementViewportMatrix),N.push({circleArray:Ze,circleOffset:V,transform:ht,invTransform:Ye,projection:ke.getProjection()}),F+=Ze.length/4,V=F}De&&(p.terrain&&p.terrain.setupElevationDraw(Ee,O),O.draw(p,I.LINES,en.disabled,$n.disabled,p.colorModeForRenderPass(),An.disabled,w1(Ae,L,Ee,ke.getProjection()),c.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,null,L.zoom,null,[De.collisionVertexBuffer,De.collisionVertexBufferExt]))}if(!w||!N.length)return;const Z=p.getOrCreateProgram("collisionCircle"),G=new s.dI;G.resize(4*F),G._trim();let Y=0;for(const we of N)for(let Pe=0;Pe<we.circleArray.length/4;Pe++){const Ee=4*Pe,ke=we.circleArray[Ee+0],Se=we.circleArray[Ee+1],Ae=we.circleArray[Ee+2],De=we.circleArray[Ee+3];G.emplace(Y++,ke,Se,Ae,De,0),G.emplace(Y++,ke,Se,Ae,De,1),G.emplace(Y++,ke,Se,Ae,De,2),G.emplace(Y++,ke,Se,Ae,De,3)}(!su||su.length<2*F)&&(su=function(we){const Pe=2*we,Ee=new s.a_;Ee.resize(Pe),Ee._trim();for(let ke=0;ke<Pe;ke++){const Se=6*ke;Ee.uint16[Se+0]=4*ke+0,Ee.uint16[Se+1]=4*ke+1,Ee.uint16[Se+2]=4*ke+2,Ee.uint16[Se+3]=4*ke+2,Ee.uint16[Se+4]=4*ke+3,Ee.uint16[Se+5]=4*ke+0}return Ee}(F));const ee=k.createIndexBuffer(su,!0),ae=k.createVertexBuffer(G,s.dJ.members,!0);for(const we of N){const Pe={u_matrix:we.transform,u_inv_matrix:we.invTransform,u_camera_to_center_distance:(ve=L).getCameraToCenterDistance(we.projection),u_viewport_size:[ve.width,ve.height]};Z.draw(p,I.TRIANGLES,en.disabled,$n.disabled,p.colorModeForRenderPass(),An.disabled,Pe,c.id,ae,ee,s.bd.simpleSegment(0,2*we.circleOffset,we.circleArray.length,we.circleArray.length/2),null,L.zoom)}var ve;ae.destroy(),ee.destroy()}const Na=s.bz();function Md(p){const i=p._camera.getWorldToCamera(p.worldSize,1),c=s.az([],i,p.globeMatrix);s.bi(c,c);const f=[0,0,0],v=[0,1,0,0];return s.aA(v,v,c),f[0]=v[0],f[1]=v[1],f[2]=v[2],s.au(f,f),f}function Dd({width:p,height:i,anchor:c,textOffset:f,textScale:v},b){const{horizontalAlign:w,verticalAlign:k}=s.bT(c),I=-(w-.5)*p,L=-(k-.5)*i,O=s.bU(c,f);return new s.P((I/v+O[0])*b,(L/v+O[1])*b)}function $0(p,i,c,f,v,b,w,k,I,L){const O=p.text.placedSymbolArray,N=p.text.dynamicLayoutVertexArray,F=p.icon.dynamicLayoutVertexArray,V={},Z=p.getProjection(),G=Uh(w,Z,v),Y=v.elevation,ee=Z.upVectorScale(w.canonical,v.center.lat,v.worldSize).metersToTile;N.clear();for(let ae=0;ae<O.length;ae++){const ve=O.get(ae),{tileAnchorX:we,tileAnchorY:Pe,numGlyphs:Ee}=ve,ke=ve.hidden||!ve.crossTileID||p.allowVerticalPlacement&&!ve.placedOrientation?null:f[ve.crossTileID];if(ke){let Se=0,Ae=0,De=0;if(Y){const gt=Y?Y.getAtTileOffset(w,we,Pe):0,[nt,St,Bt]=Z.upVector(w.canonical,we,Pe);Se=gt*nt*ee,Ae=gt*St*ee,De=gt*Bt*ee}let[Ze,Ye,ht,pt]=ea(ve.projectedAnchorX+Se,ve.projectedAnchorY+Ae,ve.projectedAnchorZ+De,c?G:b);const It=pd(v.getCameraToCenterDistance(Z),pt);let Ge=s.bJ(p.textSizeData,I,ve)*It/s.bO;c&&(Ge*=p.tilePixelRatio/k);const st=Dd(ke,Ge);c?({x:Ze,y:Ye,z:ht}=Z.projectTilePoint(we+st.x,Pe+st.y,w.canonical),[Ze,Ye,ht]=ea(Ze+Se,Ye+Ae,ht+De,b)):(i&&st._rotate(-v.angle),Ze+=st.x,Ye+=st.y,ht=0);const Fe=p.allowVerticalPlacement&&ve.placedOrientation===s.bI.vertical?Math.PI/2:0;for(let gt=0;gt<Ee;gt++)s.bL(N,Ze,Ye,ht,Fe);L&&ve.associatedIconIndex>=0&&(V[ve.associatedIconIndex]={x:Ze,y:Ye,z:ht,angle:Fe})}else oc(Ee,N)}if(L){F.clear();const ae=p.icon.placedSymbolArray;for(let ve=0;ve<ae.length;ve++){const we=ae.get(ve),{numGlyphs:Pe}=we,Ee=V[ve];if(we.hidden||!Ee)oc(Pe,F);else{const{x:ke,y:Se,z:Ae,angle:De}=Ee;for(let Ze=0;Ze<Pe;Ze++)s.bL(F,ke,Se,Ae,De)}}p.icon.dynamicLayoutVertexBuffer.updateData(F)}p.text.dynamicLayoutVertexBuffer.updateData(N)}function au(p,i,c,f,v,b,w={}){const k=c.paint.get("icon-translate"),I=c.paint.get("text-translate"),L=c.paint.get("icon-translate-anchor"),O=c.paint.get("text-translate-anchor"),N=c.layout.get("icon-rotation-alignment"),F=c.layout.get("text-rotation-alignment"),V=c.layout.get("icon-pitch-alignment"),Z=c.layout.get("text-pitch-alignment"),G=c.layout.get("icon-keep-upright"),Y=c.layout.get("text-keep-upright"),ee=c.paint.get("icon-color-saturation"),ae=c.paint.get("icon-color-contrast"),ve=c.paint.get("icon-color-brightness-min"),we=c.paint.get("icon-color-brightness-max"),Pe=c.layout.get("symbol-elevation-reference")==="sea",Ee=p.context,ke=Ee.gl,Se=p.transform,Ae=N==="map",De=F==="map",Ze=V==="map",Ye=Z==="map",ht=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let pt=!1;const It=p.depthModeForSublayer(0,en.ReadOnly),Ge=new en(p.context.gl.LEQUAL,en.ReadOnly,p.depthRangeFor3D),st=[s.aD(Se.center.lng),s.aH(Se.center.lat)],Fe=c.layout.get("text-variable-anchor"),gt=Se.projection.name==="globe",nt=[],St=[0,-1,0];for(const Bt of f){const mt=i.getTile(Bt),Ot=mt.getBucket(c);if(!Ot||Ot.projection.name==="mercator"&&gt||Ot.fullyClipped)continue;const nn=Ot.projection.name==="globe",rn=nn?s.ah(Se.zoom):0,Yt=Uh(Bt,Ot.getProjection(),Se),mn=Se.calculatePixelsToTileUnitsMatrix(mt),bn=Fe&&Ot.hasTextData(),Cn=Ot.hasIconTextFit()&&bn&&Ot.hasIconData(),Bn=Ot.getProjection().createInversionMatrix(Se,Bt.canonical),Jn=(1<<mt.tileID.canonical.z)*s.aj/p.transform.worldSize,Mr=oi=>{let Er=[0,0,0];if(oi){const Di=p.style.directionalLight,vr=p.style.ambientLight;Di&&vr&&(Er=lc(p.style,Di,vr))}return Er},ii=oi=>{Se.depthOcclusionForSymbolsAndCircles&&(c.hasInitialOcclusionOpacityProperties||p.terrain)&&(oi.push("DEPTH_D24"),oi.push("DEPTH_OCCLUSION"))},Br=()=>{const oi=Ae&&c.layout.get("symbol-placement")!=="point",Er=[];ii(Er);const Di=oi||Cn,vr=Ot.elevationType==="road"&&Ze,Ki=p.shadowRenderer,ui=vr&&!!Ki&&Ki.enabled,ti=Mr(ui),di=vr?Ge:It,Pr=c.paint.get("icon-image-cross-fade");p.terrainRenderModeElevated()&&Ze&&Er.push("PITCH_WITH_MAP_TERRAIN"),nn&&(Er.push("PROJECTION_GLOBE_VIEW"),Di&&Er.push("PROJECTED_POS_ON_VIEWPORT")),Pr>0&&Er.push("ICON_TRANSITION"),Ot.icon.zOffsetVertexBuffer&&Er.push("Z_OFFSET"),ee===0&&ae===0&&ve===0&&we===1||Er.push("COLOR_ADJUSTMENT"),Ot.sdfIcons&&Er.push("RENDER_SDF"),ui&&Er.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),vr&&Ot.icon.orientationVertexBuffer&&Er.push("ELEVATED_ROADS");const Bi=Ot.icon.programConfigurations.get(c.id),Po=p.getOrCreateProgram("symbol",{config:Bi,defines:Er}),vi=mt.imageAtlasTexture?mt.imageAtlasTexture.size:[0,0],kr=Ot.iconSizeData,hs=s.bH(kr,Se.zoom),ss=Ze||!Se.isOrthographic,Es=za(Yt,mt.tileID.canonical,Ze,Ae,Se,Ot.getProjection(),mn),ia=Nh(Yt,mt.tileID.canonical,Ze,Ae,Se,Ot.getProjection(),mn),Us=p.translatePosMatrix(ia,mt,k,L,!0),as=p.translatePosMatrix(Yt,mt,k,L),El=Di?Na:Es,oa=Ae&&!Ze&&!oi;let Il=St;!gt&&!Se.mercatorFromTransition||Ae||(Il=Md(Se));const Xd=nn?Il:St,Vm=c.getColorAdjustmentMatrix(ee,ae,ve,we),xu=Pd(kr.kind,hs,oa,Ze,p,as,El,Us,Pe,!1,vi,[0,0],0,Bt,rn,st,Bn,Xd,Ot.getProjection(),ti,Jn,Vm,Pr,null),jm=mt.imageAtlasTexture?mt.imageAtlasTexture:null,Yd=c.layout.get("icon-size").constantOr(0)!==1||Ot.iconsNeedLinear,Dp=Ot.sdfIcons||p.options.rotating||p.options.zooming||Yd||ss?ke.LINEAR:ke.NEAREST,Lp=Ot.sdfIcons&&c.paint.get("icon-halo-width").constantOr(1)!==0,ba=p.terrain&&Ze&&oi?s.bi(s.bz(),Es):Na;if(oi&&Ot.icon){const wu=Se.elevation,xc=wu?wu.getAtTileOffsetFunc(Bt,Se.center.lat,Se.worldSize,Ot.getProjection()):null,Pl=$h(Yt,mt.tileID.canonical,Ze,Ae,Se,Ot.getProjection(),mn);Vh(Ot,Yt,p,!1,Pl,ia,Ze,G,xc,Bt)}return{program:Po,buffers:Ot.icon,uniformValues:xu,atlasTexture:jm,atlasTextureIcon:null,atlasInterpolation:Dp,atlasInterpolationIcon:null,isSDF:Ot.sdfIcons,hasHalo:Lp,depthMode:di,tile:mt,renderWithShadows:ui,labelPlaneMatrixInv:ba}},Nr=()=>{const oi=De&&c.layout.get("symbol-placement")!=="point",Er=[],Di=oi||Fe||Cn,vr=Ot.elevationType==="road"&&Ye,Ki=p.shadowRenderer,ui=vr&&!!Ki&&Ki.enabled,ti=Mr(ui),di=vr?Ge:It;p.terrainRenderModeElevated()&&Ye&&Er.push("PITCH_WITH_MAP_TERRAIN"),nn&&(Er.push("PROJECTION_GLOBE_VIEW"),Di&&Er.push("PROJECTED_POS_ON_VIEWPORT")),Ot.text.zOffsetVertexBuffer&&Er.push("Z_OFFSET"),Ot.iconsInText&&Er.push("RENDER_TEXT_AND_SYMBOL"),Er.push("RENDER_SDF"),ui&&Er.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),vr&&Ot.text.orientationVertexBuffer&&Er.push("ELEVATED_ROADS"),ii(Er);const Pr=Ot.text.programConfigurations.get(c.id),Bi=p.getOrCreateProgram("symbol",{config:Pr,defines:Er});let Po,vi=[0,0],kr=null;const hs=Ot.textSizeData;Ot.iconsInText&&(vi=mt.imageAtlasTexture?mt.imageAtlasTexture.size:[0,0],kr=mt.imageAtlasTexture?mt.imageAtlasTexture:null,Po=Ye||!Se.isOrthographic||p.options.rotating||p.options.zooming||hs.kind==="composite"||hs.kind==="camera"?ke.LINEAR:ke.NEAREST);const ss=mt.glyphAtlasTexture?mt.glyphAtlasTexture.size:[0,0],Es=c.layout.get("text-size-scale-range"),ia=s.ay(p.scaleFactor,Es[0],Es[1]),Us=s.bH(hs,Se.zoom,ia),as=za(Yt,mt.tileID.canonical,Ye,De,Se,Ot.getProjection(),mn),El=Nh(Yt,mt.tileID.canonical,Ye,De,Se,Ot.getProjection(),mn),oa=p.translatePosMatrix(El,mt,I,O,!0),Il=p.translatePosMatrix(Yt,mt,I,O),Xd=Di?Na:as,Vm=De&&!Ye&&!oi;let xu=St;!gt&&!Se.mercatorFromTransition||De||(xu=Md(Se));const jm=Pd(hs.kind,Us,Vm,Ye,p,Il,Xd,oa,Pe,!0,ss,vi,0,Bt,rn,st,Bn,nn?xu:St,Ot.getProjection(),ti,Jn,null,null,ia),Yd=mt.glyphAtlasTexture?mt.glyphAtlasTexture:null,Dp=ke.LINEAR,Lp=c.paint.get("text-halo-width").constantOr(1)!==0,ba=p.terrain&&Ye&&oi?s.bi(s.bz(),as):Na;if(oi&&Ot.text){const wu=Se.elevation,xc=wu?wu.getAtTileOffsetFunc(Bt,Se.center.lat,Se.worldSize,Ot.getProjection()):null,Pl=$h(Yt,mt.tileID.canonical,Ye,De,Se,Ot.getProjection(),mn);Vh(Ot,Yt,p,!0,Pl,El,Ye,Y,xc,Bt)}return{program:Bi,buffers:Ot.text,uniformValues:jm,atlasTexture:Yd,atlasTextureIcon:kr,atlasInterpolation:Dp,atlasInterpolationIcon:Po,isSDF:!0,hasHalo:Lp,depthMode:di,tile:mt,renderWithShadows:ui,labelPlaneMatrixInv:ba}},Vi=Ot.icon.segments.get().length,Gn=Ot.text.segments.get().length,nr=Vi&&!w.onlyText?Br():null,ur=Gn&&!w.onlyIcons?Nr():null,ci=c.paint.get("icon-opacity").constantOr(1),Yi=c.paint.get("text-opacity").constantOr(1);if(ht&&Ot.canOverlap){pt=!0;const oi=ci&&!w.onlyText?Ot.icon.segments.get():[],Er=Yi&&!w.onlyIcons?Ot.text.segments.get():[];for(const Di of oi)nt.push({segments:new s.bd([Di]),sortKey:Di.sortKey,state:nr});for(const Di of Er)nt.push({segments:new s.bd([Di]),sortKey:Di.sortKey,state:ur})}else w.onlyText||nt.push({segments:ci?Ot.icon.segments:new s.bd([]),sortKey:0,state:nr}),w.onlyIcons||nt.push({segments:Yi?Ot.text.segments:new s.bd([]),sortKey:0,state:ur})}pt&&nt.sort((Bt,mt)=>Bt.sortKey-mt.sortKey);for(const Bt of nt){const mt=Bt.state;if(mt)if(p.terrain?p.terrain.setupElevationDraw(mt.tile,mt.program,{useDepthForOcclusion:Se.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:mt.labelPlaneMatrixInv}):p.setupDepthForOcclusion(Se.depthOcclusionForSymbolsAndCircles,mt.program),Ee.activeTexture.set(ke.TEXTURE0),mt.atlasTexture&&mt.atlasTexture.bind(mt.atlasInterpolation,ke.CLAMP_TO_EDGE,!0),mt.atlasTextureIcon&&(Ee.activeTexture.set(ke.TEXTURE1),mt.atlasTextureIcon&&mt.atlasTextureIcon.bind(mt.atlasInterpolationIcon,ke.CLAMP_TO_EDGE,!0)),mt.renderWithShadows&&p.shadowRenderer.setupShadows(mt.tile.tileID.toUnwrapped(),mt.program,"vector-tile",mt.tile.tileID.overscaledZ),p.uploadCommonLightUniforms(p.context,mt.program),mt.hasHalo){const Ot=mt.uniformValues;Ot.u_is_halo=1,lu(mt.buffers,Bt.segments,c,p,mt.program,mt.depthMode,v,b,Ot,2),Ot.u_is_halo=0}else{if(mt.isSDF){const Ot=mt.uniformValues;mt.hasHalo&&(Ot.u_is_halo=1,lu(mt.buffers,Bt.segments,c,p,mt.program,mt.depthMode,v,b,Ot,1)),Ot.u_is_halo=0}lu(mt.buffers,Bt.segments,c,p,mt.program,mt.depthMode,v,b,mt.uniformValues,1)}}}function lu(p,i,c,f,v,b,w,k,I,L){const O=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.iconTransitioningVertexBuffer,p.globeExtVertexBuffer,p.zOffsetVertexBuffer,p.orientationVertexBuffer];v.draw(f,f.context.gl.TRIANGLES,b,w,k,An.disabled,I,c.id,p.layoutVertexBuffer,p.indexBuffer,i,c.paint,f.transform.zoom,p.programConfigurations.get(c.id),O,L)}function mp(p,i){const c=1<<p.canonical.z,f=(i.x*c-p.canonical.x-p.wrap*c)*s.aj,v=(i.y*c-p.canonical.y)*s.aj,b=s.dS(i.z,i.y);return s.cS(f,v,b)}function vm(p,i,c,f,v){if(!c.layout||c.layout.get("fill-elevation-reference")==="none")return;const b=p.context.gl,w=new en(p.context.gl.LEQUAL,en.ReadWrite,p.depthRangeFor3D),k=new en(p.context.gl.GREATER,en.ReadWrite,p.depthRangeFor3D),I=function(V){const Z=s.cJ(V.pitch);let G=.01;return V.isOrthographic&&(G=s.ai(1e-4,G,s.cN(Z>=xo?1:Z/xo))),2*G}(p.transform),L=p.transform.getFreeCameraOptions().position,O="elevatedStructuresDepthReconstruct",N=p.getOrCreateProgram(O,{defines:["DEPTH_RECONSTRUCTION"]}),F=p.getOrCreateProgram(O);for(const V of f){const Z=i.getTile(V),G=Z.getBucket(c);if(!G)continue;const Y=G.elevatedStructures;if(!Y)continue;const ee=G.elevationBufferData.heightRange,ae=mp(V.toUnwrapped(),L),ve=p.translatePosMatrix(V.projMatrix,Z,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));let we,Pe,Ee,ke;if(v==="initialize"){if(!ee||ee.min>=1||Y.depthSegments.segments[0].primitiveLength===0)continue;we=dp(ve,ae,I,1,0),Pe=w,Ee=Y.depthSegments,ke=N}else if(v==="reset"){if(!ee||ee.min>=0||Y.maskSegments.segments[0].primitiveLength===0)continue;we=dp(ve,ae,0,0,1),Pe=k,Ee=Y.maskSegments,ke=N}else if(v==="geometry"){if(Y.depthSegments.segments[0].primitiveLength===0)continue;we=dp(ve,ae,I,1,0),Pe=w,Ee=Y.depthSegments,ke=F}ke.draw(p,b.TRIANGLES,Pe,$n.disabled,or.disabled,An.disabled,we,c.id,Y.vertexBuffer,Y.indexBuffer,Ee,c.paint,p.transform.zoom)}}function bm(p,i,c){const{painter:f,sourceCache:v,layer:b,coords:w,colorMode:k,elevationType:I,terrainEnabled:L,pass:O}=p,N=f.context.gl,F=b.paint.get("fill-pattern"),V=b.paint.get("fill-pattern-cross-fade"),Z=F.constantOr(null);let G=I;I!=="road"||i&&!L||(G="none");const Y=G==="road",ee=p.painter.shadowRenderer,ae=Y&&!!ee&&ee.enabled,ve=new en(f.context.gl.LEQUAL,en.ReadOnly,f.depthRangeFor3D);let we=[0,0,0];if(ae){const ke=f.style.directionalLight,Se=f.style.ambientLight;ke&&Se&&(we=lc(f.style,ke,Se))}const Pe=F&&F.constantOr(1),Ee=(ke,Se)=>{let Ae,De,Ze,Ye,ht;Se?(Ae=Pe&&!b.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ze=N.LINES):(Ae=Pe?"fillPattern":"fill",Ze=N.TRIANGLES);for(const pt of w){const It=v.getTile(pt);if(Pe&&!It.patternsLoaded())continue;const Ge=It.getBucket(b);if(!Ge)continue;const st=i?Ge.elevationBufferData:Ge.bufferData;if(st.isEmpty())continue;f.prepareDrawTile();const Fe=st.programConfigurations.get(b.id),gt=f.isTileAffectedByFog(pt),nt=[],St=[];Y&&(nt.push("ELEVATED_ROADS"),St.push(st.elevatedLayoutVertexBuffer)),ae&&nt.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Pe&&(f.context.activeTexture.set(N.TEXTURE0),It.imageAtlasTexture&&It.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Fe.updatePaintBuffers());let Bt=!1;if(Z&&It.imageAtlas){const Yt=It.imageAtlas,mn=s.dN.from(Z),bn=mn.getPrimary().scaleSelf(s.q.devicePixelRatio).toString(),Cn=mn.getSecondary(),Bn=Yt.patternPositions.get(bn),Jn=Cn?Yt.patternPositions.get(Cn.scaleSelf(s.q.devicePixelRatio).toString()):null;Bt=!!Bn&&!!Jn,Bn&&Fe.setConstantPatternPositions(Bn,Jn)}V>0&&(Bt||Fe.getPatternTransitionVertexBuffer("fill-pattern"))&&nt.push("FILL_PATTERN_TRANSITION");const mt=f.getOrCreateProgram(Ae,{config:Fe,overrideFog:gt,defines:nt}),Ot=f.translatePosMatrix(pt.projMatrix,It,b.paint.get("fill-translate"),b.paint.get("fill-translate-anchor"));ae&&ee.setupShadows(It.tileID.toUnwrapped(),mt,"vector-tile",It.tileID.overscaledZ);const nn=b.paint.get("fill-emissive-strength");if(Se){Ye=st.lineIndexBuffer,ht=st.lineSegments;const Yt=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[N.drawingBufferWidth,N.drawingBufferHeight];De=Ae==="fillOutlinePattern"&&Pe?_1(Ot,nn,f,It,Yt,we,V):b1(Ot,nn,Yt,we)}else Ye=st.indexBuffer,ht=st.triangleSegments,De=Pe?D0(Ot,nn,f,It,we,V):pc(Ot,nn,we);f.uploadCommonUniforms(f.context,mt,pt.toUnwrapped());let rn=ke;(I==="road"&&!L||I==="offset")&&(rn=ve),mt.draw(f,Ze,rn,c||f.stencilModeForClipping(pt),k,An.disabled,De,b.id,st.layoutVertexBuffer,Ye,ht,b.paint,f.transform.zoom,Fe,St)}};f.renderPass===O&&Ee(f.depthModeForSublayer(1,f.renderPass==="opaque"?en.ReadWrite:en.ReadOnly),!1),G==="none"&&f.renderPass==="translucent"&&b.paint.get("fill-antialias")&&Ee(f.depthModeForSublayer(b.getPaintProperty("fill-outline-color")?2:0,en.ReadOnly),!0)}function Va(p,i,c,f,v,b,w,k){c.resetLayerRenderingStats(p);const I=p.context,L=I.gl,O=p.transform,N=c.paint.get("fill-extrusion-pattern"),F=c.paint.get("fill-extrusion-pattern-cross-fade"),V=N.constantOr(null),Z=N.constantOr(1),G=c.paint.get("fill-extrusion-opacity"),Y=p.style.enable3dLights(),ee=c.paint.get(Y&&!Z?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),ae=[c.paint.get("fill-extrusion-ambient-occlusion-intensity"),ee],ve=c.layout.get("fill-extrusion-edge-radius"),we=ve>0&&!c.paint.get("fill-extrusion-rounded-roof"),Pe=we?0:ve,Ee=O.projection.name==="globe"?s.dV():0,ke=O.projection.name==="globe",Se=ke?s.ah(O.zoom):0,Ae=[s.aD(O.center.lng),s.aH(O.center.lat)],De=c.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Ze=c.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(De?null:c.lut).toArray01().slice(0,3),Ye=c.paint.get("fill-extrusion-flood-light-intensity"),ht=c.paint.get("fill-extrusion-vertical-scale"),pt=c.paint.get("fill-extrusion-line-width").constantOr(1)!==0,It=c.paint.get("fill-extrusion-height-alignment"),Ge=c.paint.get("fill-extrusion-base-alignment"),st=fa(p,c.paint.get("fill-extrusion-cutoff-fade-range")),Fe=[];let gt;ke&&Fe.push("PROJECTION_GLOBE_VIEW"),ae[0]>0&&Fe.push("FAUX_AO"),we&&Fe.push("ZERO_ROOF_RADIUS"),k&&Fe.push("HAS_CENTROID"),Ye>0&&Fe.push("FLOOD_LIGHT"),st.shouldRenderCutoff&&Fe.push("RENDER_CUTOFF"),pt&&Fe.push("RENDER_WALL_MODE");const nt=p.renderPass==="shadow",St=p.shadowRenderer,Bt=nt&&!!St,mt=nt?An.disabled:An.backCCW;p.shadowRenderer&&(p.shadowRenderer.useNormalOffset=!0);let Ot=[0,0,0];if(St){const Yt=p.style.directionalLight,mn=p.style.ambientLight;Yt&&mn&&(Ot=lc(p.style,Yt,mn)),nt||(Fe.push("RENDER_SHADOWS","DEPTH_TEXTURE"),St.useNormalOffset&&Fe.push("NORMAL_OFFSET")),gt=Fe.concat(["SHADOWS_SINGLE_CASCADE"])}const nn=Bt?"fillExtrusionDepth":Z?"fillExtrusionPattern":"fillExtrusion",rn=c.getLayerRenderingStats();for(const Yt of f){const mn=i.getTile(Yt),bn=mn.getBucket(c);if(!bn||bn.projection.name!==O.projection.name)continue;let Cn=!1;St&&(Cn=St.getMaxCascadeForTile(Yt.toUnwrapped())===0);const Bn=p.isTileAffectedByFog(Yt),Jn=bn.programConfigurations.get(c.id);let Mr=!1;if(V&&mn.imageAtlas){const ur=mn.imageAtlas,ci=s.dN.from(V),Yi=ci.getPrimary().scaleSelf(s.q.devicePixelRatio).toString(),oi=ci.getSecondary(),Er=ur.patternPositions.get(Yi),Di=oi?ur.patternPositions.get(oi.scaleSelf(s.q.devicePixelRatio).toString()):null;Mr=!!Er&&!!Di,Er&&Jn.setConstantPatternPositions(Er,Di)}F>0&&(Mr||Jn.getPatternTransitionVertexBuffer("fill-extrusion-pattern"))&&Fe.push("FILL_EXTRUSION_PATTERN_TRANSITION");const ii=p.getOrCreateProgram(nn,{config:Jn,defines:Cn?gt:Fe,overrideFog:Bn});if(p.terrain&&p.terrain.setupElevationDraw(mn,ii,{useMeterToDem:!0}),!bn.centroidVertexBuffer){const ur=ii.attributes.a_centroid_pos;ur!==void 0&&L.vertexAttrib2f(ur,0,0)}!nt&&St&&St.setupShadows(mn.tileID.toUnwrapped(),ii,"vector-tile",mn.tileID.overscaledZ),Z&&(p.context.activeTexture.set(L.TEXTURE0),mn.imageAtlasTexture&&mn.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Jn.updatePaintBuffers());const Br=c.paint.get("fill-extrusion-vertical-gradient"),Nr=1/bn.tileToMeter;let Vi;if(nt&&St){if(_l(mn.tileID,bn,p))continue;const ur=St.calculateShadowPassMatrixFromTile(mn.tileID.toUnwrapped());Vi=R0(ur,Pe,Nr,ht,It,Ge)}else{const ur=p.translatePosMatrix(Yt.expandedProjMatrix,mn,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ci=O.projection.createInversionMatrix(O,Yt.canonical);Vi=Z?M0(ur,p,Br,G,ae,Pe,Nr,Yt,mn,Ee,It,Ge,Se,Ae,ci,Ze,ht,F):Id(ur,p,Br,G,ae,Pe,Nr,Yt,Ee,It,Ge,Se,Ae,ci,Ze,ht,Ye,Ot)}p.uploadCommonUniforms(I,ii,Yt.toUnwrapped(),null,st);let Gn=bn.segments;if(O.projection.name==="mercator"&&!nt&&(Gn=bn.getVisibleSegments(mn.tileID,p.terrain,p.transform.getFrustum(0)),!Gn.get().length))continue;if(rn)if(nt)for(const ur of Gn.get())rn.numRenderedVerticesInShadowPass+=ur.primitiveLength;else for(const ur of Gn.get())rn.numRenderedVerticesInTransparentPass+=ur.primitiveLength;const nr=[];(p.terrain||k)&&nr.push(bn.centroidVertexBuffer),ke&&nr.push(bn.layoutVertexExtBuffer),pt&&nr.push(bn.wallVertexBuffer),ii.draw(p,I.gl.TRIANGLES,v,b,w,mt,Vi,c.id,bn.layoutVertexBuffer,bn.indexBuffer,Gn,c.paint,p.transform.zoom,Jn,nr)}p.shadowRenderer&&(p.shadowRenderer.useNormalOffset=!1)}function ja(p,i,c,f,v,b,w,k,I,L,O,N,F,V,Z,G,Y,ee,ae){const ve=p.context,we=ve.gl,Pe=p.transform,Ee=p.transform.zoom,ke=[],Se=fa(p,c.paint.get("fill-extrusion-cutoff-fade-range"));L==="clear"?(ke.push("CLEAR_SUBPASS"),ae&&(ke.push("CLEAR_FROM_TEXTURE"),ve.activeTexture.set(we.TEXTURE0),ae.bind(we.LINEAR,we.CLAMP_TO_EDGE))):L==="sdf"&&ke.push("SDF_SUBPASS"),Y&&ke.push("HAS_CENTROID"),Se.shouldRenderCutoff&&ke.push("RENDER_CUTOFF");const Ae=c.layout.get("fill-extrusion-edge-radius"),De=(Ze,Ye,ht,pt,It)=>{const Ge=Ye.programConfigurations.get(c.id),st=p.isTileAffectedByFog(Ze),Fe=p.getOrCreateProgram("fillExtrusionGroundEffect",{config:Ge,defines:ke,overrideFog:st}),gt=((St,Bt,mt,Ot,nn,rn,Yt,mn,bn,Cn,Bn)=>({u_matrix:Bt,u_opacity:mt,u_ao_pass:Ot?1:0,u_meter_to_tile:nn,u_ao:rn,u_flood_light_intensity:Yt,u_flood_light_color:mn,u_attenuation:bn,u_edge_radius:Cn,u_fb:0,u_fb_size:Bn,u_dynamic_offset:1}))(0,pt,O,I,It,[N,F*It],V,Z,G,Ee>=17?0:Ae*It,ae?ae.size[0]:0),nt=[];Y&&nt.push(Ye.hiddenByLandmarkVertexBuffer),p.uploadCommonUniforms(ve,Fe,Ze.toUnwrapped(),null,Se),Fe.draw(p,ve.gl.TRIANGLES,v,b,w,k,gt,c.id,Ye.vertexBuffer,Ye.indexBuffer,ht,c.paint,Ee,Ge,nt)};for(const Ze of f){const Ye=i.getTile(Ze),ht=Ye.getBucket(c);if(!ht||ht.projection.name!==Pe.projection.name||!ht.groundEffect||ht.groundEffect&&!ht.groundEffect.hasData())continue;const pt=ht.groundEffect,It=1/ht.tileToMeter;{const Ge=p.translatePosMatrix(Ze.projMatrix,Ye,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),st=pt.getDefaultSegment();De(Ze,pt,st,Ge,It)}if(ee)for(let Ge=0;Ge<4;Ge++){const st=s.dT[Ge](Ze),Fe=i.getTile(st);if(!Fe)continue;const gt=Fe.getBucket(c);if(!gt||gt.projection.name!==Pe.projection.name||!gt.groundEffect||gt.groundEffect&&!gt.groundEffect.hasData())continue;const nt=gt.groundEffect;let St,Bt;Ge===0?(St=[-8192,0,0],Bt=1):Ge===1?(St=[s.aj,0,0],Bt=0):Ge===2?(St=[0,-8192,0],Bt=3):(St=[0,s.aj,0],Bt=2);const mt=nt.regionSegments[Bt];if(!mt)continue;const Ot=new Float32Array(16);s.bo(Ot,Ze.projMatrix,St),De(Ze,nt,mt,p.translatePosMatrix(Ot,Ye,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),It)}}}function tn(p,i,c,f,v,b,w){f.centroidVertexArray.length===0&&f.createCentroidsBuffer();const k=b?b.findDEMTileFor(c):null;if(!(k&&k.dem||w))return;b&&k&&k.dem&&f.selfDEMTileTimestamp!==k.dem._timestamp&&(f.borderDoneWithNeighborZ=[-1,-1,-1,-1],f.selfDEMTileTimestamp=k.dem._timestamp);const I=ee=>new s.P(Math.ceil((ee+s.dX)*s.dY),0),L=ee=>{const ae=i.getSource().minzoom,ve=Pe=>{const Ee=i.getTileByID(Pe);if(Ee&&Ee.hasData())return Ee.getBucket(v)},we=[0,-1,1];for(const Pe of we){if(ee.overscaledZ+Pe<ae)continue;const Ee=ve(ee.calculateScaledKey(ee.overscaledZ+Pe));if(Ee)return Ee}},O=[0,0,0],N=(ee,ae)=>(O[0]=Math.min(ee.min.y,ae.min.y),O[1]=Math.max(ee.max.y,ae.max.y),O[2]=s.aj-ae.min.x>ee.max.x?ae.min.x-s.aj:ee.max.x,O),F=(ee,ae)=>(O[0]=Math.min(ee.min.x,ae.min.x),O[1]=Math.max(ee.max.x,ae.max.x),O[2]=s.aj-ae.min.y>ee.max.y?ae.min.y-s.aj:ee.max.y,O),V=[(ee,ae)=>N(ee,ae),(ee,ae)=>N(ae,ee),(ee,ae)=>F(ee,ae),(ee,ae)=>F(ae,ee)],Z=(ee,ae,ve,we,Pe,Ee,ke)=>{if(!b)return 0;const Se=[[Ee?ve:ee,Ee?ee:ve,0],[Ee?ve:ae,Ee?ae:ve,0]],Ae=ke<0?s.aj+ke:ke,De=[Ee?Ae:(ee+ae)/2,Ee?(ee+ae)/2:Ae,0];return ve===0&&ke<0||ve!==0&&ke>0?b.getForTilePoints(Pe,[De],!0,we):Se.push(De),b.getForTilePoints(c,Se,!0,k),Math.max(Se[0][2],Se[1][2],De[2])/b.exaggeration()};for(let ee=0;ee<4;ee++){const ae=f.borderFeatureIndices[ee];if(ae.length===0)continue;const ve=s.dT[ee](c),we=L(ve);if(!(we&&we instanceof s.dU))continue;const Pe=b?b.findDEMTileFor(ve):null;if(!(Pe&&Pe.dem||w)||(b&&Pe&&Pe.dem&&f.borderDEMTileTimestamp[ee]!==Pe.dem._timestamp&&(f.borderDoneWithNeighborZ[ee]=-1,f.borderDEMTileTimestamp[ee]=Pe.dem._timestamp),f.borderDoneWithNeighborZ[ee]===we.canonical.z))continue;we.centroidVertexArray.length===0&&we.createCentroidsBuffer();const Ee=(ee<2?1:5)-ee,ke=we.borderDoneWithNeighborZ[Ee]!==f.canonical.z,Se=we.borderFeatureIndices[Ee];let Ae=0;if(f.canonical.z!==we.canonical.z){for(const De of ae)f.showCentroid(f.featuresOnBorder[De]);if(ke)for(const De of Se)we.showCentroid(we.featuresOnBorder[De]);f.borderDoneWithNeighborZ[ee]=we.canonical.z,we.borderDoneWithNeighborZ[Ee]=f.canonical.z}for(const De of ae){const Ze=f.featuresOnBorder[De],Ye=f.centroidData[Ze.centroidDataIndex],ht=Ze.borders[ee];let pt;for(;Ae<Se.length;){pt=we.featuresOnBorder[Se[Ae]];const It=pt.borders[Ee];if(It[1]>ht[0]+3||It[0]>ht[0]-3)break;we.showCentroid(pt),Ae++}if(pt&&Ae<Se.length){const It=Ae;let Ge=0;for(;!(pt.borders[Ee][0]>ht[1]-3)&&(Ge++,++Ae!==Se.length);)pt=we.featuresOnBorder[Se[Ae]];pt=we.featuresOnBorder[Se[It]];let st=!1;if(Ge>=1){const nt=pt.borders[Ee];Math.abs(ht[0]-nt[0])<3&&Math.abs(ht[1]-nt[1])<3&&(Ge=1,st=!0,Ae=It+1)}else if(Ge===0){f.showCentroid(Ze);continue}const Fe=we.centroidData[pt.centroidDataIndex];w&&st&&(((G=Ye).flags|(Y=Fe).flags)&s.dW?(G.flags|=s.dW,Y.flags|=s.dW):(G.flags&=2147483647,Y.flags&=2147483647));const gt=Ze.intersectsCount()>1||pt.intersectsCount()>1;if(Ge>1)Ae=It,Ye.centroidXY=Fe.centroidXY=new s.P(0,0);else if(Pe&&Pe.dem&&!gt){const nt=V[ee](Ye,Fe),St=ee%2?s.aj-1:0,Bt=Z(nt[0],Math.min(s.aj-1,nt[1]),St,Pe,ve,ee<2,nt[2]);Ye.centroidXY=Fe.centroidXY=I(Bt)}else gt?Ye.centroidXY=Fe.centroidXY=new s.P(0,0):(Ye.centroidXY=f.encodeBorderCentroid(Ze),Fe.centroidXY=we.encodeBorderCentroid(pt));f.writeCentroidToBuffer(Ye),we.writeCentroidToBuffer(Fe)}else f.showCentroid(Ze)}f.borderDoneWithNeighborZ[ee]=we.canonical.z,we.borderDoneWithNeighborZ[Ee]=f.canonical.z}var G,Y;(f.needsCentroidUpdate||!f.centroidVertexBuffer&&f.centroidVertexArray.length!==0)&&f.uploadCentroid(p)}const N0=[1,0,0],V0=[0,1,0],bl=[0,0,1];function _l(p,i,c){const f=c.transform,v=c.shadowRenderer;if(!v)return!0;const b=p.toUnwrapped(),w=f.tileSize*v._cascades[c.currentShadowCascade].scale;let k=i.maxHeight;if(f.elevation){const G=f.elevation.getMinMaxForTile(p);G&&(k+=G.max)}const I=[...v.shadowDirection];I[2]=-I[2];const L=v.computeSimplifiedTileShadowVolume(b,k,w,I);if(!L)return!1;const O=[N0,V0,bl,I,[I[0],0,I[2]],[0,I[1],I[2]]],N=f.projection.name==="globe",F=f.scaleZoom(w),V=s.cn.fromInvProjectionMatrix(f.invProjMatrix,f.worldSize,F,!N),Z=v.getCurrentCascadeFrustum();return V.intersectsPrecise(L.vertices,L.planes,O)===0||Z.intersectsPrecise(L.vertices,L.planes,O)===0}function En(p){return[p[0]*s.dZ,p[1]*s.dZ,p[2]*s.dZ,0]}function Ld(p,i,c,f,v,b,w,k,I){const L=f.getSource(),O=c.globeSharedBuffers;if(!O)return;let N,F,V;if(i&&(N=f.getTile(i)),L instanceof s.aP?(F=L.texture,V=s.ds(0,0,c.transform)):N&&i&&(F=N.texture,V=s.ds(i.canonical.z,i.canonical.x,c.transform)),!F||!V)return;p||(V=s.cE(s.bz(),V,[1,-1,1]));const Z=c.context,G=Z.gl,Y=v.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR,ee=c.colorModeForDrapableLayerRenderPass(b),ae=w.defines;ae.push("GLOBE_POLES");const ve=new en(G.LEQUAL,en.ReadWrite,c.depthRangeFor3D),we=Float32Array.from(c.transform.expandedFarZProjMatrix),Pe=Float32Array.from(s.bh(s.dr(new s.cp(0,0,0))));c.terrain&&c.terrain.prepareDrawTile(),Z.activeTexture.set(G.TEXTURE0),F.bind(Y,G.CLAMP_TO_EDGE),Z.activeTexture.set(G.TEXTURE1),F.bind(Y,G.CLAMP_TO_EDGE),"useMipmap"in F&&Z.extTextureFilterAnisotropic&&c.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,Z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Z.extTextureFilterAnisotropicMax);const[Ee,ke,Se,Ae]=i?O.getPoleBuffers(i.canonical.z,!1):O.getPoleBuffers(0,!0),De=v.paint.get("raster-elevation");let Ze;p?(Ze=Ee,c.renderDefaultNorthPole=De!==0):(Ze=ke,c.renderDefaultSouthPole=De!==0);const Ye=En(w.mix),ht=((It,Ge,st,Fe,gt,nt,St,Bt,mt,Ot,nn,rn,Yt)=>fm(It,Ge,st,new Float32Array(16),new Float32Array(9),[0,0],Fe,[0,0],[0,0,0,0],1,{opacity:1,mix:0},nt,[0,0],Bt,2,Ot,nn,rn,1,0,Yt))(we,Pe,V,s.ah(c.transform.zoom),0,v,0,De,0,Ye,w.offset,w.range,b),pt=c.getOrCreateProgram("raster",{defines:ae});c.uploadCommonUniforms(Z,pt,null),pt.draw(c,G.TRIANGLES,ve,I,ee,k,ht,v.id,Ze,Se,Ae)}function T1(p){const i=p._nearZ,c=p.projection.farthestPixelDistance(p),f=c-i,v=.2*p.height,b=i+v;return[i,c,(b-v-i)/f,(b-i)/f]}function E1(p,i,c,f){if(p)return i instanceof ul&&p instanceof Vc?i.getTextureDescriptor(p,c,!0):{texture:p.texture,mix:En(f.mix),offset:f.offset,buffer:0,tileSize:1}}var _m=s.d_([{name:"a_index",type:"Int16",components:1}]);class j0{constructor(i,c,f,v){const b={width:f[0],height:f[1],data:null},w=i.gl;this.targetColorTexture=new s.T(i,b,w.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new s.T(i,b,w.RGBA8,{useMipmap:!1}),this.context=i,this.updateParticleTexture(c,v),this.lastInvalidatedAt=0}updateParticleTexture(i,c){if(this.particleTextureDimension===c.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const f=this.context.gl,v=c.width*c.height;this.particleTexture0=new s.T(this.context,c,f.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new s.T(this.context,c,f.RGBA8,{premultiply:!1,useMipmap:!1});const b=new s.d$;b.reserve(v);for(let w=0;w<v;w++)b.emplaceBack(w);this.particleIndexBuffer=this.context.createVertexBuffer(b,_m.members,!0),this.particleSegment=s.bd.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=c.width}update(i){return!(this.lastInvalidatedAt<i&&(this.lastInvalidatedAt=s.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function I1(p,i,c){if(!p)return null;const f=i.getTextureDescriptor(p,c,!0);if(!f)return null;let{texture:v,mix:b,offset:w,tileSize:k,buffer:I,format:L}=f;if(!v||!L)return null;let O=!1;return L==="uint32"&&(O=!0,b[3]=0,b=fc(s.e0,b,[0,c.paint.get("raster-particle-max-speed")]),w=pm(s.e0,w,[0,c.paint.get("raster-particle-max-speed")])),{texture:v,textureOffset:[I/(k+2*I),k/(k+2*I)],tileSize:k,scalarData:O,scale:b,offset:w,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[L]]}}function U0(p){const i=p._nearZ,c=p.projection.farthestPixelDistance(p),f=c-i,v=.2*p.height,b=i+v;return[i,c,(b-v-i)/f,(b-i)/f]}const P1=new s.am(1,0,0,1),A1=new s.am(0,1,0,1),ds=new s.am(0,0,1,1),xm=new s.am(1,0,1,1),Yo=new s.am(0,1,1,1);function Ua(p,i,c,f,v,b){for(let w=0;w<c.length;w++)if(v){const L=new s.am(f.r*.8,f.g*.8,f.b*.8,1);gc(p,i,c[w],f,-1,-1,b),gc(p,i,c[w],f,-1,1,b),gc(p,i,c[w],f,1,1,b),gc(p,i,c[w],f,1,-1,b),gc(p,i,c[w],L,0,0,b)}else gc(p,i,c[w],f,0,0,b)}function gc(p,i,c,f,v,b,w){const k=p.context,I=p.transform,L=k.gl,O=I.projection.name==="globe",N=O?["PROJECTION_GLOBE_VIEW"]:[];let F=s.bw(c.projMatrix);if(O&&s.ah(I.zoom)>0){const Ye=s.bg(c.canonical,I),ht=s.e1(Ye);F=s.az(new Float32Array(16),I.globeMatrix,ht),s.az(F,I.projMatrix,F)}const V=s.bz();V[12]+=2*v/(s.q.devicePixelRatio*I.width),V[13]+=2*b/(s.q.devicePixelRatio*I.height),s.az(F,V,F);const Z=p.getOrCreateProgram("debug",{defines:N}),G=i.getTileByID(c.key);p.terrain&&p.terrain.setupElevationDraw(G,Z);const Y=en.disabled,ee=$n.disabled,ae=p.colorModeForRenderPass(),ve="$debug";k.activeTexture.set(L.TEXTURE0),p.emptyTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),O?G._makeGlobeTileDebugBuffers(p.context,I):G._makeDebugTileBoundsBuffers(p.context,I.projection);const we=G._tileDebugBuffer||p.debugBuffer,Pe=G._tileDebugIndexBuffer||p.debugIndexBuffer,Ee=G._tileDebugSegments||p.debugSegments;if(Z.draw(p,L.LINE_STRIP,Y,ee,ae,An.disabled,hp(F,f.toPremultipliedRenderColor(null)),ve,we,Pe,Ee,null,null,null,[G._globeTileDebugBorderBuffer]),w){const Ye=G.latestRawTileData,ht=Math.floor((Ye&&Ye.byteLength||0)/1024);let pt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(pt+=` => ${c.overscaledZ}`),pt+=` ${G.state}`,pt+=` ${ht}kb`,function(It,Ge){It.initDebugOverlayCanvas();const st=It.debugOverlayCanvas,Fe=It.context.gl,gt=It.debugOverlayCanvas.getContext("2d");gt.clearRect(0,0,st.width,st.height),gt.shadowColor="white",gt.shadowBlur=2,gt.lineWidth=1.5,gt.strokeStyle="white",gt.textBaseline="top",gt.font="bold 36px Open Sans, sans-serif",gt.fillText(Ge,5,5),gt.strokeText(Ge,5,5),It.debugOverlayTexture.update(st),It.debugOverlayTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE)}(p,pt)}const ke=i.getTile(c).tileSize,Se=512/Math.min(ke,512)*(c.overscaledZ/I.zoom)*.5,Ae=G._tileDebugTextBuffer||p.debugBuffer,De=G._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,Ze=G._tileDebugTextSegments||p.debugSegments;Z.draw(p,L.TRIANGLES,Y,ee,or.alphaBlended,An.disabled,hp(F,s.am.transparent.toPremultipliedRenderColor(null),Se),ve,Ae,De,Ze,null,null,null,[G._globeTileDebugTextBuffer])}function gp(p,i,c,f){cu(p,0,i+c/2,p.transform.width,c,f)}function yp(p,i,c,f){cu(p,i-c/2,0,c,p.transform.height,f)}function cu(p,i,c,f,v,b){const w=p.context,k=w.gl;k.enable(k.SCISSOR_TEST),k.scissor(i*s.q.devicePixelRatio,c*s.q.devicePixelRatio,f*s.q.devicePixelRatio,v*s.q.devicePixelRatio),w.clear({color:b}),k.disable(k.SCISSOR_TEST)}const q0=s.d_([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:qa}=q0;function Ur(p,i,c,f){p.emplaceBack(i,c,f)}class Od{constructor(i){this.vertexArray=new s.e2,this.indices=new s.a_,Ur(this.vertexArray,-1,-1,1),Ur(this.vertexArray,1,-1,1),Ur(this.vertexArray,-1,1,1),Ur(this.vertexArray,1,1,1),Ur(this.vertexArray,-1,-1,-1),Ur(this.vertexArray,1,-1,-1),Ur(this.vertexArray,-1,1,-1),Ur(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,qa),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=s.bd.simpleSegment(0,0,36,12)}}function xl(p,i,c,f,v,b){const w=p.context.gl,k=i.paint.get("sky-atmosphere-color"),I=i.paint.get("sky-atmosphere-halo-color"),L=i.paint.get("sky-atmosphere-sun-intensity"),O=((N,F,V,Z,G)=>({u_matrix_3f:N,u_sun_direction:F,u_sun_intensity:V,u_color_tint_r:[Z.r,Z.g,Z.b,Z.a],u_color_tint_m:[G.r,G.g,G.b,G.a],u_luminance:5e-5}))(s.e4(s.dx(),f),v,L,k.toPremultipliedRenderColor(null),I.toPremultipliedRenderColor(null));w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_CUBE_MAP_POSITIVE_X+b,i.skyboxTexture,0),c.draw(p,w.TRIANGLES,en.disabled,$n.disabled,or.unblended,An.frontCW,O,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const H0=s.d_([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class G0{constructor(i){const c=new s.e5;c.emplaceBack(-1,1,1,0,0),c.emplaceBack(1,1,1,1,0),c.emplaceBack(1,-1,1,1,1),c.emplaceBack(-1,-1,1,0,1);const f=new s.a_;f.emplaceBack(0,1,2),f.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(c,H0.members),this.indexBuffer=i.createIndexBuffer(f),this.segments=s.bd.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const W0=s.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class R1{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class uu{constructor(i){this.colorModeAlphaBlendedWriteRGB=new or([1,ac,1,ac],s.am.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new or([1,0,1,0],s.am.transparent,[!1,!1,!1,!0]),this.params=new R1,this.updateNeeded=!0,i.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),i.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),i.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),i.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(i){const c=i.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new G0(c);const f=this.params.sizeRange,v=this.params.intensityRange,b=function(O){const N=s.e7(30),F=[];for(let V=0;V<O;++V){const Z=2*Math.PI*N(),G=Math.acos(1-2*N())-.5*Math.PI;F.push(s.cS(Math.cos(G)*Math.cos(Z),Math.cos(G)*Math.sin(Z),Math.sin(G)))}return F}(this.params.starsCount),w=s.e7(300),k=new s.e6,I=new s.a_;let L=0;for(let O=0;O<b.length;++O){const N=s.bY([],b[O],200),F=Math.max(0,1+.01*f*(1*w()-.5)),V=Math.max(0,1+.01*v*(1*w()-.5));k.emplaceBack(N[0],N[1],N[2],-1,-1,F,V),k.emplaceBack(N[0],N[1],N[2],1,-1,F,V),k.emplaceBack(N[0],N[1],N[2],1,1,F,V),k.emplaceBack(N[0],N[1],N[2],-1,1,F,V),I.emplaceBack(L+0,L+1,L+2),I.emplaceBack(L+0,L+2,L+3),L+=4}this.starsVx=c.createVertexBuffer(k,W0.members),this.starsIdx=c.createIndexBuffer(I),this.starsSegments=s.bd.simpleSegment(0,0,k.length,I.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(i,c){const f=i.context,v=f.gl,b=i.transform,w=new en(v.LEQUAL,en.ReadOnly,[0,1]),k=s.ah(b.zoom),I=i.style.getLut(c.scope),L=c.properties.get("color-use-theme")==="none",O=c.properties.get("color").toNonPremultipliedRenderColor(L?null:I).toArray01(),N=c.properties.get("high-color-use-theme")==="none",F=c.properties.get("high-color").toNonPremultipliedRenderColor(N?null:I).toArray01(),V=c.properties.get("space-color-use-theme")==="none",Z=c.properties.get("space-color").toNonPremultipliedRenderColor(V?null:I).toArray01(),G=5e-4,Y=s.e8(c.properties.get("horizon-blend"),0,1,G,.25),ee=s.dl(i,f,b)&&Y===G?b.worldSize/(2*Math.PI*1.025)-1:b.globeRadius,ae=i.frameCounter/1e3%1,ve=s.ae(b.globeCenterInViewSpace),we=Math.sqrt(Math.pow(ve,2)-Math.pow(ee,2)),Pe=Math.acos(we/ve),Ee=ke=>{const Se=b.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ke&&Se.push("ALPHA_PASS");const Ae=i.getOrCreateProgram("globeAtmosphere",{defines:Se}),De=((Ye,ht,pt,It,Ge,st,Fe,gt,nt,St,Bt,mt)=>({u_frustum_tl:Ye,u_frustum_tr:ht,u_frustum_br:pt,u_frustum_bl:It,u_horizon:Ge,u_transition:st,u_fadeout_range:Fe,u_color:gt,u_high_color:nt,u_space_color:St,u_temporal_offset:Bt,u_horizon_angle:mt}))(b.frustumCorners.TL,b.frustumCorners.TR,b.frustumCorners.BR,b.frustumCorners.BL,b.frustumCorners.horizon,k,Y,O,F,Z,ae,Pe);i.uploadCommonUniforms(f,Ae);const Ze=this.atmosphereBuffer;Ze&&Ae.draw(i,v.TRIANGLES,w,$n.disabled,ke?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,An.backCW,De,ke?"atmosphere_glow_alpha":"atmosphere_glow",Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)};Ee(!1),Ee(!0)}drawStars(i,c){const f=s.ay(c.properties.get("star-intensity"),0,1);if(f===0)return;const v=i.context,b=v.gl,w=i.transform,k=i.getOrCreateProgram("stars"),I=s.b_([]);s.c0(I,I,-w._pitch),s.b$(I,I,-w.angle),s.c0(I,I,s.al(w._center.lat)),s.e9(I,I,-s.al(w._center.lng));const L=s.c3(new Float32Array(16),I),O=s.az([],w.starsProjMatrix,L),N=s.e4([],L),F=s.ea([],N),V=[0,1,0];s.dz(V,V,F),s.bY(V,V,this.params.sizeMultiplier);const Z=[1,0,0];s.dz(Z,Z,F),s.bY(Z,Z,this.params.sizeMultiplier);const G=(Y=V,ee=Z,ae=f,{u_matrix:Float32Array.from(O),u_up:Y,u_right:ee,u_intensity_multiplier:ae});var Y,ee,ae;i.uploadCommonUniforms(v,k),this.starsVx&&this.starsIdx&&k.draw(i,b.TRIANGLES,en.disabled,$n.disabled,this.colorModeAlphaBlendedWriteRGB,An.disabled,G,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function yc(p,i){const c=[...p],f=i.cameraWorldSizeForFog/i.worldSize,v=s.bx([]);return s.cE(v,v,[f,f,1]),s.az(c,v,c),s.az(c,i.worldToFogMatrix,c),c}function Mt(p,i,c,f,v){const b=c.material,w=f.context,{baseColorTexture:k,metallicRoughnessTexture:I}=b.pbrMetallicRoughness,{normalTexture:L,occlusionTexture:O,emissionTexture:N}=b;function F(Z,G,Y){if(Z&&(p.push(G),w.activeTexture.set(w.gl.TEXTURE0+Y),Z.gfxTexture)){const{minFilter:ee,magFilter:ae,wrapS:ve,wrapT:we}=Z.sampler;Z.gfxTexture.bindExtraParam(ee,ae,ve,we)}}F(k,"HAS_TEXTURE_u_baseColorTexture",Xo.BaseColor),F(I,"HAS_TEXTURE_u_metallicRoughnessTexture",Xo.MetallicRoughness),F(L,"HAS_TEXTURE_u_normalTexture",Xo.Normal),F(O,"HAS_TEXTURE_u_occlusionTexture",Xo.Occlusion),F(N,"HAS_TEXTURE_u_emissionTexture",Xo.Emission),v&&(v.texture||(v.texture=new s.eh(f.context,v.image,[v.image.height,v.image.height,v.image.height],w.gl.RGBA8)),w.activeTexture.set(w.gl.TEXTURE0+Xo.LUT),v.texture&&v.texture.bind(w.gl.LINEAR,w.gl.CLAMP_TO_EDGE),p.push("APPLY_LUT_ON_GPU")),c.texcoordBuffer&&(p.push("HAS_ATTRIBUTE_a_uv_2f"),i.push(c.texcoordBuffer)),c.colorBuffer&&(p.push(c.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),i.push(c.colorBuffer)),c.normalBuffer&&(p.push("HAS_ATTRIBUTE_a_normal_3f"),i.push(c.normalBuffer)),c.pbrBuffer&&(p.push("HAS_ATTRIBUTE_a_pbr"),p.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),i.push(c.pbrBuffer)),b.alphaMode!=="OPAQUE"&&b.alphaMode!=="MASK"||p.push("UNPREMULT_TEXTURE_IN_SHADER"),b.defined||p.push("DIFFUSE_SHADED");const V=f.shadowRenderer;V&&(p.push("RENDER_SHADOWS","DEPTH_TEXTURE"),V.useNormalOffset&&p.push("NORMAL_OFFSET"))}function Zt(p,i,c,f,v,b){const w=c.paint.get("model-opacity").constantOr(1),k=i.context,I=new en(i.context.gl.LEQUAL,en.ReadWrite,i.depthRangeFor3D),L=i.transform,O=p.mesh,N=O.material,F=N.pbrMetallicRoughness,V=i.style.fog;let Z;Z=i.transform.projection.zAxisUnit==="pixels"?[...p.nodeModelMatrix]:s.az([],f.zScaleMatrix,p.nodeModelMatrix),s.az(Z,f.negCameraPosMatrix,Z);const G=s.bi([],Z);s.ee(G,G);const Y=c.paint.get("model-color-use-theme").constantOr("default")==="none",ee=c.paint.get("model-emissive-strength").constantOr(0),ae=Rd(new Float32Array(p.worldViewProjection),new Float32Array(Z),new Float32Array(G),null,i,w,F.baseColorFactor,N.emissiveFactor,F.metallicFactor,F.roughnessFactor,N,ee,c),ve={defines:[]},we=[],Pe=i.shadowRenderer;Pe&&(Pe.useNormalOffset=!1),Mt(ve.defines,we,O,i,Y?null:c.lut);let Ee=null;if(V){const Ae=yc(p.nodeModelMatrix,i.transform);if(Ee=new Float32Array(Ae),L.projection.name!=="globe"){const De=O.aabb.min,Ze=O.aabb.max,[Ye,ht]=V.getOpacityForBounds(Ae,De[0],De[1],Ze[0],Ze[1]);ve.overrideFog=Ye>=it||ht>=it}}const ke=fa(i,c.paint.get("model-cutoff-fade-range"));ke.shouldRenderCutoff&&ve.defines.push("RENDER_CUTOFF");const Se=i.getOrCreateProgram("model",ve);i.uploadCommonUniforms(k,Se,null,Ee,ke),i.renderPass!=="shadow"&&Pe&&Pe.setupShadowsFromMatrix(p.nodeModelMatrix,Se),Se.draw(i,k.gl.TRIANGLES,I,v,b,O.material.doubleSided?An.disabled:An.backCCW,ae,c.id,O.vertexBuffer,O.indexBuffer,O.segments,c.paint,i.transform.zoom,void 0,we)}function vc(p,i,c,f,v,b,w){let k;k=p.projection.name==="globe"?s.ed(c,p):[...c],s.az(k,k,i.matrix);const I=s.az([],f,k);if(i.meshes)for(const L of i.meshes){if(L.material.alphaMode!=="BLEND"){w.push({mesh:L,depth:0,modelIndex:v,worldViewProjection:I,nodeModelMatrix:k});continue}const O=s.ad([],L.centroid,I);!p.isOrthographic&&O[2]<=0||b.push({mesh:L,depth:O[2],modelIndex:v,worldViewProjection:I,nodeModelMatrix:k})}if(i.children)for(const L of i.children)vc(p,L,c,f,v,b,w)}function Mi(p,i,c,f){const v=c.shadowRenderer;if(!v)return;const b=v.getShadowPassDepthMode(),w=v.getShadowPassColorMode(),k=v.calculateShadowPassMatrixFromMatrix(i),I=B0(k);c.getOrCreateProgram("modelDepth",{defines:c._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(c,c.context.gl.TRIANGLES,b,$n.disabled,w,An.backCCW,I,f.id,p.vertexBuffer,p.indexBuffer,p.segments,f.paint,c.transform.zoom,void 0,void 0)}function We(p,i,c){const f=i.updateZoomBasedPaintProperties(),v=function(b,w,k){let I,L,O,N=b.terrain?b.terrain.exaggeration():0;if(b.terrain&&N>0){const F=b.terrain,V=F.findDEMTileFor(k);V&&V.dem?I=s.ei.create(F,k,V):N=0}if(N===0&&(w.terrainElevationMin=0,w.terrainElevationMax=0),N===w.validForExaggeration&&(N===0||I&&I._demTile&&I._demTile.tileID===w.validForDEMTile.id&&I._dem._timestamp===w.validForDEMTile.timestamp))return!1;for(const F in w.instancesPerModel){const V=w.instancesPerModel[F];for(let Z=0;Z<V.instancedDataArray.length;++Z){const G=(I?N*I.getElevationAt(0|V.instancedDataArray.float32[16*Z],0|V.instancedDataArray.float32[16*Z+1],!0,!0):0)+V.instancesEvaluatedElevation[Z];V.instancedDataArray.float32[16*Z+6]=G,L=L?Math.min(w.terrainElevationMin,G):G,O=O?Math.max(w.terrainElevationMax,G):G}}return w.terrainElevationMin=L||0,w.terrainElevationMax=O||0,w.validForExaggeration=N,w.validForDEMTile=I&&I._demTile?{id:I._demTile.tileID,timestamp:I._dem._timestamp}:{id:void 0,timestamp:0},!0}(p,i,c);(f||v)&&(i.uploaded=!1,i.upload(p.context))}const na={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new s.cW([0,0,0],[s.aj,s.aj,0])};function vp(p,i){const c=1<<p.canonical.z,f=i.getFreeCameraOptions().position,v=i.elevation,b=p.canonical.x/c,w=(p.canonical.x+1)/c,k=p.canonical.y/c,I=(p.canonical.y+1)/c;let L=i._centerAltitude;if(v){const V=v.getMinMaxForTile(p);V&&V.max>L&&(L=V.max)}const O=s.ay(f.x,b,w)-f.x,N=s.ay(f.y,k,I)-f.y,F=s.c6(L,i.center.lat)-f.z;return i._zoomFromMercatorZ(Math.sqrt(O*O+N*N+F*F))}function bp(p,i,c,f,v,b,w){const k=p.context,I=p.renderPass==="shadow",L=p.shadowRenderer,O=I&&L?L.getShadowPassDepthMode():new en(k.gl.LEQUAL,en.ReadWrite,p.depthRangeFor3D),N=p.isTileAffectedByFog(b);if(c.meshes)for(const F of c.meshes){const V=["MODEL_POSITION_ON_GPU"],Z=[];let G,Y,ee;f.instancedDataArray.length>20&&V.push("INSTANCED_ARRAYS");const ae=fa(p,i.paint.get("model-cutoff-fade-range"));if(ae.shouldRenderCutoff&&V.push("RENDER_CUTOFF"),I&&L)G=p.getOrCreateProgram("modelDepth",{defines:V}),Y=B0(w.shadowTileMatrix,w.shadowTileMatrix,Float32Array.from(c.matrix)),ee=L.getShadowPassColorMode();else{Mt(V,Z,F,p,i.paint.get("model-color-use-theme").constantOr("default")==="none"?null:i.lut),G=p.getOrCreateProgram("model",{defines:V,overrideFog:N});const we=F.material,Pe=we.pbrMetallicRoughness,Ee=i.paint.get("model-opacity").constantOr(1),ke=i.paint.get("model-emissive-strength").constantOr(0);Y=Rd(b.expandedProjMatrix,Float32Array.from(c.matrix),new Float32Array(16),null,p,Ee,Pe.baseColorFactor,we.emissiveFactor,Pe.metallicFactor,Pe.roughnessFactor,we,ke,i,v),L&&(w.shadowUniformsInitialized?G.setShadowUniformValues(k,L.getShadowUniformValues()):(L.setupShadows(b.toUnwrapped(),G,"model-tile",b.overscaledZ),w.shadowUniformsInitialized=!0)),ee=ae.shouldRenderCutoff||Ee<1||we.alphaMode!=="OPAQUE"?or.alphaBlended:or.unblended}p.uploadCommonUniforms(k,G,b.toUnwrapped(),null,ae);const ve=F.material.doubleSided?An.disabled:An.backCCW;if(f.instancedDataArray.length>20)Z.push(f.instancedDataBuffer),G.draw(p,k.gl.TRIANGLES,O,$n.disabled,ee,ve,Y,i.id,F.vertexBuffer,F.indexBuffer,F.segments,i.paint,p.transform.zoom,void 0,Z,f.instancedDataArray.length);else{const we=I?"u_instance":"u_normal_matrix";for(let Pe=0;Pe<f.instancedDataArray.length;++Pe)Y[we]=new Float32Array(f.instancedDataArray.arrayBuffer,64*Pe,16),G.draw(p,k.gl.TRIANGLES,O,$n.disabled,ee,ve,Y,i.id,F.vertexBuffer,F.indexBuffer,F.segments,i.paint,p.transform.zoom,void 0,Z)}}if(c.children)for(const F of c.children)bp(p,i,F,f,v,b,w)}const wm=[1,-1,1];function K0(p,i,c,f){if(!c.modelManager)return!0;const v=c.modelManager;if(!c.shadowRenderer)return!0;const b=c.shadowRenderer,w=i.aabb;let k=!0,I=p.maxHeight;if(I===0){let O=0;for(const N in p.instancesPerModel){const F=v.getModel(N,f);F?O=Math.max(O,Math.max(Math.max(F.aabb.max[0],F.aabb.max[1]),F.aabb.max[2])):k=!1}I=p.maxScale*O*1.41+p.maxVerticalOffset,k&&(p.maxHeight=I)}w.max[2]=I,w.min[2]+=p.terrainElevationMin,w.max[2]+=p.terrainElevationMax,s.ad(w.min,w.min,i.tileMatrix),s.ad(w.max,w.max,i.tileMatrix);const L=w.intersects(b.getCurrentCascadeFrustum());return c.currentShadowCascade===0&&(p.isInsideFirstShadowMapFrustum=L===2),L===0}function Z0(p,i){const c=p.uniformValues.u_cutoff_params[0],f=p.uniformValues.u_cutoff_params[1],v=p.uniformValues.u_cutoff_params[2],b=p.uniformValues.u_cutoff_params[3];return f===c||b===v?1:s.ay(((i-c)/(f-c)-v)/(b-v),0,1)}function du(p,i,c,f){if(i.pitch<20)return 1;const v=i.getWorldToCameraMatrix();s.az(v,v,p);const b=s.ej(c.min[0],c.min[1],c.min[2],1);let w=s.aA(s.ek(),b,v),k=w,I=w;b[1]=c.max[1],w=s.aA(s.ek(),b,v),k=w[1]<k[1]?w:k,I=w[1]>I[1]?w:I,b[0]=c.max[0],w=s.aA(s.ek(),b,v),k=w[1]<k[1]?w:k,I=w[1]>I[1]?w:I,b[1]=c.min[1],w=s.aA(s.ek(),b,v),k=w[1]<k[1]?w:k,I=w[1]>I[1]?w:I;const L=s.ay(f[0],0,1),O=100*i.pixelsPerMeter*s.ay(f[1],0,1),N=s.ay(f[2],0,1),F=s.el(s.ek(),k,I,L),V=Math.tan(.5*i.fovX),Z=-F[2]*V;if(O===0)return F[1]<-Math.abs(Z)?N:1;const G=(-Math.abs(Z)-F[1])/O,Y=(ae,ve,we)=>(1-we)*ae+we*ve,ee=s.ay(Y(1,N,G),N,1);return Y(1,ee,s.ay((i.pitch-20)/20,0,1))}class M1{}class D1{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(i,c,f){{const N=this._storage.get(c.id);if(N)return N.lastUsedFrameIdx=i,N.buf}const v=f.gl,b=v.getBufferParameter(v.ELEMENT_ARRAY_BUFFER,v.BUFFER_SIZE),w=new ArrayBuffer(b),k=new Int16Array(w);v.getBufferSubData(v.ELEMENT_ARRAY_BUFFER,0,new Int16Array(w));const I=new s.en;for(let N=0;N<b/2;N+=3){const F=k[N],V=k[N+1],Z=k[N+2];I.emplaceBack(F,V),I.emplaceBack(V,Z),I.emplaceBack(Z,F)}const L=f.bindVertexArrayOES.current,O=new M1;return O.buf=new Vs(f,I),O.lastUsedFrameIdx=i,this._storage.set(c.id,O),f.bindVertexArrayOES.set(L),O.buf}update(i){for(const[c,f]of this._storage)i-f.lastUsedFrameIdx>30&&(f.buf.destroy(),this._storage.delete(c))}destroy(){for(const[i,c]of this._storage)c.buf.destroy(),this._storage.delete(i)}}class X0{constructor(i){this.occluderSize=30,this.depthOffset=-1e-4,i.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),i.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const _p=s.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Sm{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class Cm{constructor(i,c){this.revealStart=11,this.revealRange=2,i.registerParameter(this,[...c,"Reveal"],"revealStart",{min:0,max:17,step:.05}),i.registerParameter(this,[...c,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const Y0=s.d_([{type:"Float32",name:"a_pos_2f",components:2}]);class xp{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(i,c){const f=i.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const w=new s.eo,k=new s.a_;w.emplaceBack(-1,-1),w.emplaceBack(1,-1),w.emplaceBack(1,1),w.emplaceBack(-1,1),k.emplaceBack(0,1,2),k.emplaceBack(0,2,3),this.vignetteVx=i.context.createVertexBuffer(w,Y0.members),this.vignetteIdx=i.context.createIndexBuffer(k)}const v=s.bd.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){i.uploadCommonUniforms(i.context,f);const w={u_vignetteShape:(b={vignetteShape:[c.start,c.range,Math.pow(10,c.fadePower)],vignetteColor:[c.color.r,c.color.g,c.color.b,c.color.a*c.strength]}).vignetteShape,u_vignetteColor:b.vignetteColor};f.draw(i,i.context.gl.TRIANGLES,en.disabled,$n.disabled,or.alphaBlended,An.disabled,w,"vignette",this.vignetteVx,this.vignetteIdx,v)}var b}}class zd{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(i,c){const f=i.getFreeCameraOptions().position,v=f.toAltitude(),b=f.toLngLat(),w=s.al(b.lng),k=s.al(b.lat),I=i.pixelsPerMeter/c,L=w*s.eq,O=s.eq*Math.log(Math.tan(Math.PI/4+k/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const N=-this._offsetYPrev+O,F=-this._elevationPrev+v;this._accumulatedOffsetX+=(-this._offsetXPrev+L)*I,this._accumulatedOffsetY+=N*I,this._accumulatedElevation+=F*I,this._offsetXPrev=L,this._offsetYPrev=O,this._elevationPrev=v}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function bc(p,i){return[-(p[0]-Math.floor(p[0]/i)*i),-(p[1]-Math.floor(p[1]/i)*i),-(p[2]-Math.floor(p[2]/i)*i)]}function km(p){const i=s.e7(1323123451230),c=[];for(let f=0;f<p;++f){const v=2*i()-1,b=2*i()-1,w=2*i()-1;c.push(s.cS(v,b,w))}return c}function wl(p,i,c,f,v){const b=s.ay((v-c)/(f-c),0,1);return(1-b)*p+b*i}class qo{constructor(i){this._movement=new zd,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new xp,this._ppmScaleFactor=i}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(i,c){const f=i.transform;this._movement.update(f,this._ppmScaleFactor);const v=f.starsProjMatrix,b=s.b_([]);s.c0(b,b,s.al(90)-f._pitch),s.b$(b,b,-f.angle);const w=s.c3(new Float32Array(16),b),k=s.ep(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),I=s.ee([],k),L=s.az([],I,w),O=Date.now()/1e3;return this._accumulatedTimeFromStart+=(O-this._prevTime)*c,this._prevTime=O,{projectionMatrix:v,modelviewMatrix:L}}}class L1 extends qo{constructor(i){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new Cm(i.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(i){const c=i.context;if(!this.particlesVx){const f=km(this.particlesCount),v=new s.er,b=new s.a_;let w=0;const k=s.e7(1323123451230);for(let I=0;I<f.length;++I){const L=f[I],O=[2*k()-1,k(),k(),k()];v.emplaceBack(L[0],L[1],L[2],-1,-1,...O),v.emplaceBack(L[0],L[1],L[2],1,-1,...O),v.emplaceBack(L[0],L[1],L[2],1,1,...O),v.emplaceBack(L[0],L[1],L[2],-1,1,...O),b.emplaceBack(w+0,w+1,w+2),b.emplaceBack(w+0,w+2,w+3),w+=4}this.particlesVx=c.createVertexBuffer(v,_p.members),this.particlesIdx=c.createIndexBuffer(b)}}draw(i){if(!this._params.overrideStyleParameters&&!i.style.rain)return;const c=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},f=i.transform.zoom;if(c.revealStart>f)return;const v=wl(0,1,c.revealStart,c.revealStart+c.revealRange,f);if(!this.particlesVx||!this.particlesIdx)return;const b=structuredClone(this._params);let w=[-b.direction.x,b.direction.y,-100];s.au(w,w);const k=structuredClone(this._vignetteParams);k.strength*=v,b.overrideStyleParameters||(b.intensity=i.style.rain.state.density,b.timeFactor=i.style.rain.state.intensity,b.color=structuredClone(i.style.rain.state.color),w=structuredClone(i.style.rain.state.direction),b.screenThinning.intensity=i.style.rain.state.centerThinning,b.dropletSizeX=i.style.rain.state.dropletSize[0],b.dropletSizeYScale=i.style.rain.state.dropletSize[1]/i.style.rain.state.dropletSize[0],b.distortionStrength=100*i.style.rain.state.distortionStrength,k.strength=1,k.color=structuredClone(i.style.rain.state.vignetteColor));const I=this.updateOnRender(i,b.timeFactor),L=i.context,O=L.gl,N=i.transform;this.screenTexture&&this.screenTexture.size[0]===i.width&&this.screenTexture.size[1]===i.height||(this.screenTexture=new s.T(L,{width:i.width,height:i.height,data:null},O.RGBA8)),b.distortionStrength>0&&(L.activeTexture.set(O.TEXTURE0),this.screenTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),O.copyTexSubImage2D(O.TEXTURE_2D,0,0,0,0,0,i.width,i.height));const F=i.getOrCreateProgram("rainParticle");i.uploadCommonUniforms(L,F),L.activeTexture.set(O.TEXTURE0),this.screenTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE);const V=[b.color.r,b.color.g,b.color.b,b.color.a],Z=(G,Y)=>{const ee=bc(this._movement.getPosition(),G),ae=b.dropletSizeX,ve=b.dropletSizeX*b.dropletSizeYScale,we=i.width/2,Pe=i.height/2,Ee=wl(0,b.screenThinning.start,0,1,b.screenThinning.intensity),ke=wl(.001,b.screenThinning.range,0,1,b.screenThinning.intensity),Se=wl(0,b.screenThinning.particleOffset,0,1,b.screenThinning.intensity),Ae=(De={modelview:I.modelviewMatrix,projection:I.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:ee,velocityConeAperture:b.velocityConeAperture,velocity:b.velocity,boxSize:G,rainDropletSize:[ae,ve],distortionStrength:b.distortionStrength,rainDirection:w,color:V,screenSize:[N.width,N.height],thinningCenterPos:[we,Pe],thinningShape:[Ee,ke,Math.pow(10,b.screenThinning.fadePower)],thinningAffectedRatio:b.screenThinning.affectedRatio,thinningParticleOffset:Se,shapeDirectionalPower:b.shapeDirPower,shapeNormalPower:b.shapeNormalPower,mode:Y?0:1},{u_modelview:Float32Array.from(De.modelview),u_projection:Float32Array.from(De.projection),u_time:De.time,u_cam_pos:De.camPos,u_texScreen:0,u_velocityConeAperture:De.velocityConeAperture,u_velocity:De.velocity,u_boxSize:De.boxSize,u_rainDropletSize:De.rainDropletSize,u_distortionStrength:De.distortionStrength,u_rainDirection:De.rainDirection,u_color:De.color,u_screenSize:De.screenSize,u_thinningCenterPos:De.thinningCenterPos,u_thinningShape:De.thinningShape,u_thinningAffectedRatio:De.thinningAffectedRatio,u_thinningParticleOffset:De.thinningParticleOffset,u_shapeDirectionalPower:De.shapeDirectionalPower,u_shapeNormalPower:De.shapeNormalPower,u_mode:De.mode});var De;const Ze=Math.round(b.intensity*this.particlesCount),Ye=s.bd.simpleSegment(0,0,4*Ze,2*Ze);F.draw(i,O.TRIANGLES,en.disabled,$n.disabled,or.alphaBlended,An.disabled,Ae,"rain_particles",this.particlesVx,this.particlesIdx,Ye)};b.distortionStrength>0&&Z(b.boxSize,!0),Z(b.boxSize,!1),this._vignette.draw(i,k)}}const Bd=s.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class yi extends qo{constructor(i){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new Cm(i.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(i){const c=i.context;if(!this.particlesVx){const f=km(this.particlesCount),v=new s.es,b=new s.a_;let w=0;const k=s.e7(1323123451230);for(let I=0;I<f.length;++I){const L=f[I],O=k(),N=k(),F=k(),V=[I/f.length,O,N,F],Z=[k(),k()];v.emplaceBack(L[0],L[1],L[2],-1,-1,...V,...Z),v.emplaceBack(L[0],L[1],L[2],1,-1,...V,...Z),v.emplaceBack(L[0],L[1],L[2],1,1,...V,...Z),v.emplaceBack(L[0],L[1],L[2],-1,1,...V,...Z),b.emplaceBack(w+0,w+1,w+2),b.emplaceBack(w+0,w+2,w+3),w+=4}this.particlesVx=c.createVertexBuffer(v,Bd.members),this.particlesIdx=c.createIndexBuffer(b)}}draw(i){if(!this._params.overrideStyleParameters&&!i.style.snow)return;const c=structuredClone(this._params);let f=[-c.direction.x,c.direction.y,-100];s.au(f,f);const v=structuredClone(this._vignetteParams),b=c.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},w=i.transform.zoom;if(b.revealStart>w)return;const k=wl(0,1,b.revealStart,b.revealStart+b.revealRange,w);v.strength*=k,c.overrideStyleParameters||(c.intensity=i.style.snow.state.density,c.timeFactor=i.style.snow.state.intensity,c.color=structuredClone(i.style.snow.state.color),f=structuredClone(i.style.snow.state.direction),c.screenThinning.intensity=i.style.snow.state.centerThinning,c.billboardSize=2.79*i.style.snow.state.flakeSize,v.strength=1,v.color=structuredClone(i.style.snow.state.vignetteColor));const I=this.updateOnRender(i,c.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const L=i.context,O=L.gl,N=i.transform,F=i.getOrCreateProgram("snowParticle");i.uploadCommonUniforms(L,F),((V,Z,G)=>{const Y=bc(this._movement.getPosition(),V),ee=N.width/2,ae=N.height/2,ve=wl(0,G.screenThinning.start,0,1,G.screenThinning.intensity),we=wl(.001,G.screenThinning.range,0,1,G.screenThinning.intensity),Pe=wl(0,G.screenThinning.particleOffset,0,1,G.screenThinning.intensity),Ee=(ke={modelview:I.modelviewMatrix,projection:I.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Y,velocityConeAperture:G.velocityConeAperture,velocity:G.velocity,horizontalOscillationRadius:G.horizontalOscillationRadius,horizontalOscillationRate:G.horizontalOscillationRate,boxSize:V,billboardSize:1*G.billboardSize,simpleShapeParameters:[G.shapeFadeStart,G.shapeFadePower],screenSize:[N.width,N.height],thinningCenterPos:[ee,ae],thinningShape:[ve,we,Math.pow(10,G.screenThinning.fadePower)],thinningAffectedRatio:G.screenThinning.affectedRatio,thinningParticleOffset:Pe,color:[G.color.r,G.color.g,G.color.b,G.color.a],direction:f},{u_modelview:Float32Array.from(ke.modelview),u_projection:Float32Array.from(ke.projection),u_time:ke.time,u_cam_pos:ke.camPos,u_velocityConeAperture:ke.velocityConeAperture,u_velocity:ke.velocity,u_horizontalOscillationRadius:ke.horizontalOscillationRadius,u_horizontalOscillationRate:ke.horizontalOscillationRate,u_boxSize:ke.boxSize,u_billboardSize:ke.billboardSize,u_simpleShapeParameters:ke.simpleShapeParameters,u_screenSize:ke.screenSize,u_thinningCenterPos:ke.thinningCenterPos,u_thinningShape:ke.thinningShape,u_thinningAffectedRatio:ke.thinningAffectedRatio,u_thinningParticleOffset:ke.thinningParticleOffset,u_particleColor:ke.color,u_direction:ke.direction});var ke;const Se=Math.round(G.intensity*this.particlesCount),Ae=s.bd.simpleSegment(0,0,4*Se,2*Se);this.particlesVx&&this.particlesIdx&&F.draw(i,O.TRIANGLES,en.disabled,$n.disabled,or.alphaBlended,An.disabled,Ee,"snow_particles",this.particlesVx,this.particlesIdx,Ae)})(c.boxSize,0,c),this._vignette.draw(i,v)}}const Sr={symbol:function(p,i,c,f,v){if(p.renderPass!=="translucent")return;const b=$n.disabled,w=p.colorModeForRenderPass(),k=c.layout.get("text-variable-anchor"),I=c.layout.get("text-size-scale-range"),L=s.ay(p.scaleFactor,I[0],I[1]);k&&function(F,V,Z,G,Y,ee,ae,ve){const we=V.transform,Pe=Y==="map",Ee=ee==="map";for(const ke of F){const Se=G.getTile(ke),Ae=Se.getBucket(Z);if(!Ae||!Ae.text||!Ae.text.segments.get().length)continue;const De=s.bH(Ae.textSizeData,we.zoom,ve),Ze=Uh(ke,Ae.getProjection(),we),Ye=we.calculatePixelsToTileUnitsMatrix(Se),ht=za(Ze,Se.tileID.canonical,Ee,Pe,we,Ae.getProjection(),Ye),pt=Ae.hasIconTextFit()&&Ae.hasIconData();De&&$0(Ae,Pe,Ee,ae,we,ht,ke,Math.pow(2,we.zoom-Se.tileID.overscaledZ),De,pt)}}(f,p,c,i,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),v,L);const O=c.paint.get("icon-opacity").constantOr(1)!==0,N=c.paint.get("text-opacity").constantOr(1)!==0;c.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(O||N)?au(p,i,c,f,b,w):(O&&au(p,i,c,f,b,w,{onlyIcons:!0}),N&&au(p,i,c,f,b,w,{onlyText:!0})),i.map.showCollisionBoxes&&(fp(p,i,c,f,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),fp(p,i,c,f,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(p,i,c,f){if(p.renderPass!=="translucent")return;const v=c.paint.get("circle-opacity"),b=c.paint.get("circle-stroke-width"),w=c.paint.get("circle-stroke-opacity"),k=c.layout.get("circle-sort-key").constantOr(1)!==void 0,I=c.paint.get("circle-emissive-strength");if(v.constantOr(1)===0&&(b.constantOr(1)===0||w.constantOr(1)===0))return;const L=p.context,O=L.gl,N=p.transform,F=!(!p.terrain||!p.terrain.enabled),V=c.layout.get("circle-elevation-reference"),Z=p.depthModeForSublayer(0,en.ReadOnly),G=new en(p.context.gl.LEQUAL,en.ReadOnly,p.depthRangeFor3D),Y=V==="none"||F?Z:G,ee=$n.disabled,ae=p.colorModeForDrapableLayerRenderPass(I),ve=N.projection.name==="globe",we=[s.aD(N.center.lng),s.aH(N.center.lat)],Pe=[];for(let ke=0;ke<f.length;ke++){const Se=f[ke],Ae=i.getTile(Se),De=Ae.getBucket(c);if(!De||De.projection.name!==N.projection.name)continue;const Ze=De.programConfigurations.get(c.id),Ye=De.layoutVertexBuffer,ht=De.globeExtVertexBuffer,pt=De.indexBuffer,It=s.dK(c),Ge=[ht],st=p.isTileAffectedByFog(Se);ve&&It.push("PROJECTION_GLOBE_VIEW"),It.push("DEPTH_D24"),p.terrain&&N.depthOcclusionForSymbolsAndCircles&&It.push("DEPTH_OCCLUSION"),De.hasElevation&&(It.push("ELEVATED_ROADS"),Ge.push(De.elevatedLayoutVertexBuffer));const Fe=p.getOrCreateProgram("circle",{config:Ze,defines:It,overrideFog:st}),gt=N.projection.createInversionMatrix(N,Se.canonical),nt={programConfiguration:Ze,program:Fe,layoutVertexBuffer:Ye,dynamicBuffers:Ge,indexBuffer:pt,uniformValues:s.dL(p,Se,Ae,gt,we,c),tile:Ae};if(k){const St=De.segments.get();for(const Bt of St)Pe.push({segments:new s.bd([Bt]),sortKey:Bt.sortKey,state:nt})}else Pe.push({segments:De.segments,sortKey:0,state:nt})}k&&Pe.sort((ke,Se)=>ke.sortKey-Se.sortKey);const Ee={useDepthForOcclusion:N.depthOcclusionForSymbolsAndCircles};for(const ke of Pe){const{programConfiguration:Se,program:Ae,layoutVertexBuffer:De,dynamicBuffers:Ze,indexBuffer:Ye,uniformValues:ht,tile:pt}=ke.state,It=ke.segments;p.terrain&&p.terrain.setupElevationDraw(pt,Ae,Ee),p.uploadCommonUniforms(L,Ae,pt.tileID.toUnwrapped()),Ae.draw(p,O.TRIANGLES,Y,ee,ae,An.disabled,ht,c.id,De,Ye,It,c.paint,N.zoom,Se,Ze)}},heatmap:function(p,i,c,f){if(c.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const v=p.context,b=v.gl,w=$n.disabled,k=new or([b.ONE,b.ONE,b.ONE,b.ONE],s.am.transparent,[!0,!0,!0,!0]);(function(V,Z,G,Y){const ee=V.gl,ae=Z.width*Y,ve=Z.height*Y;V.activeTexture.set(ee.TEXTURE1),V.viewport.set([0,0,ae,ve]);let we=G.heatmapFbo;if(!we||we&&(we.width!==ae||we.height!==ve)){we&&we.destroy();const Pe=ee.createTexture();ee.bindTexture(ee.TEXTURE_2D,Pe),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MAG_FILTER,ee.LINEAR),we=G.heatmapFbo=V.createFramebuffer(ae,ve,!0,null),function(Ee,ke,Se,Ae,De,Ze){const Ye=Ee.gl;Ye.texImage2D(Ye.TEXTURE_2D,0,Ee.extRenderToTextureHalfFloat?Ye.RGBA16F:Ye.RGBA,De,Ze,0,Ye.RGBA,Ee.extRenderToTextureHalfFloat?Ye.HALF_FLOAT:Ye.UNSIGNED_BYTE,null),Ae.colorAttachment.set(Se)}(V,0,Pe,we,ae,ve)}else ee.bindTexture(ee.TEXTURE_2D,we.colorAttachment.get()),V.bindFramebuffer.set(we.framebuffer)})(v,p,c,p.transform.projection.name==="globe"?.5:.25),v.clear({color:s.am.transparent});const I=p.transform,L=I.projection.name==="globe",O=L?["PROJECTION_GLOBE_VIEW"]:[],N=L?An.frontCCW:An.disabled,F=[s.aD(I.center.lng),s.aH(I.center.lat)];for(let V=0;V<f.length;V++){const Z=f[V];if(i.hasRenderableParent(Z))continue;const G=i.getTile(Z),Y=G.getBucket(c);if(!Y||Y.projection.name!==I.projection.name)continue;const ee=p.isTileAffectedByFog(Z),ae=Y.programConfigurations.get(c.id),ve=p.getOrCreateProgram("heatmap",{config:ae,defines:O,overrideFog:ee}),{zoom:we}=p.transform;p.terrain&&p.terrain.setupElevationDraw(G,ve),p.uploadCommonUniforms(v,ve,Z.toUnwrapped());const Pe=I.projection.createInversionMatrix(I,Z.canonical);ve.draw(p,b.TRIANGLES,en.disabled,w,k,N,L0(p,Z,G,Pe,F,we,c.paint.get("heatmap-intensity")),c.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,c.paint,p.transform.zoom,ae,L?[Y.globeExtVertexBuffer]:null)}v.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(v,b){const w=v.context,k=w.gl,I=b.heatmapFbo;if(!I)return;w.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,I.colorAttachment.get()),w.activeTexture.set(k.TEXTURE1);let L=b.colorRampTexture;L||(L=b.colorRampTexture=new s.T(w,b.colorRamp,k.RGBA8)),L.bind(k.LINEAR,k.CLAMP_TO_EDGE),v.getOrCreateProgram("heatmapTexture").draw(v,k.TRIANGLES,en.disabled,$n.disabled,v.colorModeForRenderPass(),An.disabled,((O,N,F,V)=>({u_image:0,u_color_ramp:1,u_opacity:N.paint.get("heatmap-opacity")}))(0,b),b.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,b.paint,v.transform.zoom)}(p,c))},line:function(p,i,c,f){if(p.renderPass!=="translucent")return;const v=c.paint.get("line-opacity"),b=c.paint.get("line-width");if(v.constantOr(1)===0||b.constantOr(1)===0)return;const w=c.paint.get("line-emissive-strength"),k=c.paint.get("line-occlusion-opacity"),I=c.layout.get("line-elevation-reference"),L=c.layout.get("line-width-unit")==="meters",O=I==="sea",N=!(!p.terrain||!p.terrain.enabled),F=p.context,V=F.gl;if(c.hasElevatedBuckets&&p.transform.projection.name==="globe")return;const Z=c.layout.get("line-cross-slope"),G=Z!==void 0,Y=Z<1,ee=p.colorModeForDrapableLayerRenderPass(w),ae=p.terrain&&p.terrain.renderingToTexture,ve=ae?1:s.q.devicePixelRatio,we=c.paint.get("line-dasharray"),Pe=we.constantOr(1),Ee=c.layout.get("line-cap"),ke=we.constantOr(null),Se=Ee.constantOr(null),Ae=c.paint.get("line-pattern"),De=Ae.constantOr(1),Ze=c.paint.get("line-pattern-cross-fade"),Ye=Ae.constantOr(null),ht=c.paint.get("line-opacity").constantOr(1);let pt=!De&&ht!==1||p.depthOcclusion&&k>0&&k<1;const It=c.paint.get("line-gradient"),Ge=De?"linePattern":"line",st=s.dM(c);let Fe;if(ae&&p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(pt=!1),k!==0&&p.depthOcclusion){const Bt=c.paint._values["line-opacity"];Bt&&Bt.value&&Bt.value.kind==="constant"?Fe=Bt.value:s.w(`Occlusion opacity for layer ${c.id} is supported only when line-opacity isn't data-driven.`)}b.value.kind!=="constant"&&b.value.isLineProgressConstant===!1&&st.push("VARIABLE_LINE_WIDTH");const gt=(Bt,mt,Ot,nn,rn,Yt)=>{for(const mn of Bt){const bn=i.getTile(mn);if(De&&!bn.patternsLoaded())continue;const Cn=bn.getBucket(c);if(!Cn||Cn.elevationType!=="none"&&!rn||Cn.elevationType==="none"&&rn)continue;p.prepareDrawTile();const Bn=[...mt],Jn=p.shadowRenderer,Mr=Cn.elevationType==="road"&&!!Jn&&Jn.enabled;let ii=[0,0,0];if(Mr){const vr=p.style.directionalLight,Ki=p.style.ambientLight;vr&&Ki&&(ii=lc(p.style,vr,Ki)),Bn.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET")}const Br=Cn.programConfigurations.get(c.id);let Nr=!1;if(Ye&&bn.imageAtlas){const vr=s.dN.from(Ye),Ki=vr.getPrimary().scaleSelf(ve).toString(),ui=bn.imageAtlas.patternPositions.get(Ki),ti=vr.getSecondary(),di=ti?bn.imageAtlas.patternPositions.get(ti.scaleSelf(ve).toString()):null;Nr=!!ui&&!!di,ui&&Br.setConstantPatternPositions(ui,di)}Ze>0&&(Nr||Br.getPatternTransitionVertexBuffer("line-pattern"))&&Bn.push("LINE_PATTERN_TRANSITION");const Vi=p.isTileAffectedByFog(mn),Gn=p.getOrCreateProgram(Ge,{config:Br,defines:Bn,overrideFog:Vi,overrideRtt:!rn&&void 0});if(!De&&ke&&Se&&bn.lineAtlas){const vr=bn.lineAtlas.getDash(ke,Se);vr&&Br.setConstantPatternPositions(vr)}Mr&&Jn.setupShadows(bn.tileID.toUnwrapped(),Gn,"vector-tile",bn.tileID.overscaledZ);let[nr,ur]=c.paint.get("line-trim-offset");(Se==="round"||Se==="square")&&nr!==ur&&(nr===0&&(nr-=1),ur===1&&(ur+=1));const ci=ae?mn.projMatrix:null,Yi=L?1/Cn.tileToMeter/s.aw(bn,1,p.transform.zoom):1,oi=L?1/Cn.tileToMeter/s.aw(bn,1,Math.floor(p.transform.zoom)):1,Er=De?s.dO(p,bn,c,ci,ve,Yi,oi,[nr,ur],ii,Ze):s.dP(p,bn,c,ci,Cn.lineClipsArray.length,ve,Yi,oi,[nr,ur],ii);if(It){const vr=Cn.gradients[c.id];let Ki=vr.texture;if(c.gradientVersion!==vr.version){let ui=256;if(c.stepInterpolant){const ti=i.getSource().maxzoom,di=mn.canonical.z===ti?Math.ceil(1<<p.transform.maxZoom-mn.canonical.z):1;ui=s.ay(s.dQ(Cn.maxLineLength/s.aj*1024*di),256,F.maxTextureSize)}vr.gradient=s.dR({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:ui,image:vr.gradient||void 0,clips:Cn.lineClipsArray}),vr.texture?vr.texture.update(vr.gradient):vr.texture=new s.T(F,vr.gradient,V.RGBA8),vr.version=c.gradientVersion,Ki=vr.texture}F.activeTexture.set(V.TEXTURE1),Ki.bind(c.stepInterpolant?V.NEAREST:V.LINEAR,V.CLAMP_TO_EDGE)}Pe&&(F.activeTexture.set(V.TEXTURE0),bn.lineAtlasTexture&&bn.lineAtlasTexture.bind(V.LINEAR,V.REPEAT),Br.updatePaintBuffers()),De&&(F.activeTexture.set(V.TEXTURE0),bn.imageAtlasTexture&&bn.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),Br.updatePaintBuffers()),rn&&!O&&p.terrain.setupElevationDraw(bn,Gn),p.uploadCommonUniforms(F,Gn,mn.toUnwrapped());const Di=vr=>{Fe!=null&&(Fe.value=ht*k),Gn.draw(p,V.TRIANGLES,Ot,vr,ee,An.disabled,Er,c.id,Cn.layoutVertexBuffer,Cn.indexBuffer,Cn.segments,c.paint,p.transform.zoom,Br,[Cn.layoutVertexBuffer2,Cn.patternVertexBuffer,Cn.zOffsetVertexBuffer]),Fe!=null&&(Fe.value=ht)};if(pt&&!rn){const vr=p.stencilModeForClipping(mn).ref;vr===0&&ae&&F.clear({stencil:0});const Ki={func:V.EQUAL,mask:255};Er.u_alpha_discard_threshold=.8,Di(new $n(Ki,vr,255,V.KEEP,V.KEEP,V.INVERT)),Er.u_alpha_discard_threshold=0,Di(new $n(Ki,vr,255,V.KEEP,V.KEEP,V.KEEP))}else Er.u_alpha_discard_threshold=pt&&rn&&Yt?.8:0,Di(rn?nn:p.stencilModeForClipping(mn))}};let nt=p.depthModeForSublayer(0,en.ReadOnly);const St=new en(p.depthOcclusion?V.GREATER:V.LEQUAL,en.ReadOnly,p.depthRangeFor3D);if(c.hasNonElevatedBuckets){const Bt=!ae&&p.terrain;k!==0&&Bt?s.w(`Occlusion opacity for layer ${c.id} is supported on terrain only if the layer has line-z-offset enabled.`):Bt?s.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${c.id}.`):gt(f,st,nt,$n.disabled,!1,!0)}if(c.hasElevatedBuckets){I==="hd-road-markup"?N||(nt=St,st.push("ELEVATED_ROADS")):(st.push("ELEVATED"),nt=St,G&&st.push(Y?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),O&&st.push("ELEVATION_REFERENCE_SEA"));const Bt=pt?p.stencilModeFor3D():$n.disabled;p.forceTerrainMode=!0,gt(f,st,nt,Bt,!0,!0),pt&&gt(f,st,nt,Bt,!0,!1),p.forceTerrainMode=!1}pt&&(p.resetStencilClippingMasks(),ae&&F.clear({stencil:0})),k===0||p.depthOcclusion||ae||p.layersWithOcclusionOpacity.push(p.currentLayer)},fill:function(p,i,c,f){const v=c.paint.get("fill-color"),b=c.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const w=c.paint.get("fill-emissive-strength"),k=p.colorModeForDrapableLayerRenderPass(w),I=c.paint.get("fill-pattern"),L=p.opaquePassEnabledForLayer()&&!I.constantOr(1)&&v.constantOr(s.am.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";let O="none";c.layout.get("fill-elevation-reference")!=="none"?O="road":c.paint.get("fill-z-offset").constantOr(1)!==0&&(O="offset");const N=!(!p.terrain||!p.terrain.enabled),F={painter:p,sourceCache:i,layer:c,coords:f,colorMode:k,elevationType:O,terrainEnabled:N,pass:L};if(p.renderPass!=="shadow")if(O!=="offset"){if(bm(F,!1),O==="road"){const V=!N&&p.renderPass==="translucent";V&&vm(p,i,c,f,"geometry"),bm(F,!0,$n.disabled),V&&function(Z){const{painter:G,sourceCache:Y,layer:ee,coords:ae,colorMode:ve}=Z,we=G.context.gl,Pe=Z.painter.shadowRenderer,Ee=!!Pe&&Pe.enabled,ke=new en(G.context.gl.LEQUAL,en.ReadOnly,G.depthRangeFor3D);let Se=[0,0,0];if(Ee){const De=G.style.directionalLight,Ze=G.style.ambientLight;De&&Ze&&(Se=lc(G.style,De,Ze))}const Ae=De=>{for(const Ze of ae){const Ye=Y.getTile(Ze),ht=Ye.getBucket(ee);if(!ht)continue;const pt=ht.elevatedStructures;if(!pt)continue;let It,Ge;if(De?(It=pt.renderableBridgeSegments,Ge=pt.bridgeProgramConfigurations.get(ee.id)):(It=pt.renderableTunnelSegments,Ge=pt.tunnelProgramConfigurations.get(ee.id)),!It||It.segments[0].primitiveLength===0)continue;Ge.updatePaintBuffers(),G.prepareDrawTile();const st=G.isTileAffectedByFog(Ze),Fe=[];Ee&&Fe.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const gt=G.getOrCreateProgram("elevatedStructures",{config:Ge,overrideFog:st,defines:Fe}),nt=G.translatePosMatrix(Ze.projMatrix,Ye,ee.paint.get("fill-translate"),ee.paint.get("fill-translate-anchor"));Ee&&Pe.setupShadows(Ye.tileID.toUnwrapped(),gt,"vector-tile",Ye.tileID.overscaledZ);const St=x1(nt,Se);G.uploadCommonUniforms(G.context,gt,Ze.toUnwrapped()),gt.draw(G,we.TRIANGLES,ke,$n.disabled,ve,An.backCCW,St,ee.id,pt.vertexBuffer,pt.indexBuffer,It,ee.paint,G.transform.zoom,Ge,[pt.vertexBufferNormal])}};Ae(!0),Ae(!1)}(F)}}else bm(F,!1,p.stencilModeFor3D());else p.shadowRenderer&&O==="road"&&!N&&function(V){const{painter:Z,sourceCache:G,layer:Y,coords:ee}=V,ae=Z.context.gl,ve=V.painter.shadowRenderer;for(const we of ee){const Pe=G.getTile(we),Ee=Pe.getBucket(Y);if(!Ee)continue;const ke=Ee.elevatedStructures;if(!ke||!ke.shadowCasterSegments||ke.shadowCasterSegments.segments[0].primitiveLength===0)continue;Z.prepareDrawTile();const Se=Ee.bufferData.programConfigurations.get(Y.id),Ae=Z.isTileAffectedByFog(we),De=Z.getOrCreateProgram("elevatedStructuresDepth",{config:Se,overrideFog:Ae}),Ze=ve.calculateShadowPassMatrixFromTile(Pe.tileID.toUnwrapped());Z.uploadCommonUniforms(Z.context,De,we.toUnwrapped());const Ye={u_matrix:Ze,u_depth_bias:.001};De.draw(Z,ae.TRIANGLES,ve.getShadowPassDepthMode(),$n.disabled,ve.getShadowPassColorMode(),An.disabled,Ye,Y.id,ke.vertexBuffer,ke.indexBuffer,ke.shadowCasterSegments,Y.paint,Z.transform.zoom,Se)}}(F)},"fill-extrusion":function(p,i,c,f){const v=c.paint.get("fill-extrusion-opacity"),b=p.context,w=b.gl,k=p.terrain,I=k&&k.renderingToTexture;if(v===0)return;const L=p.conflationActive&&p.style.isLayerClipped(c,i.getSource()),O=p.style.order.indexOf(c.fqid);if(L&&function(N,F,V,Z,G){for(const Y of Z){const ee=F.getTile(Y).getBucket(V);ee&&(ee.updateReplacement(Y,N.replacementSource,G),ee.uploadCentroid(N.context))}}(p,i,c,f,O),k||L)for(const N of f){const F=i.getTile(N).getBucket(c);F&&tn(p.context,i,N,F,c,k,L)}if(p.renderPass==="shadow"&&p.shadowRenderer){const N=p.shadowRenderer;if(k&&v<.65&&c._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof s.ab)return;const F=N.getShadowPassDepthMode(),V=N.getShadowPassColorMode();Va(p,i,c,f,F,$n.disabled,V,L)}else if(p.renderPass==="translucent"){const N=!c.paint.get("fill-extrusion-pattern").constantOr(1),F=c.paint.get("fill-extrusion-color").constantOr(s.am.white);if(!I&&F.a!==0){const V=new en(p.context.gl.LEQUAL,en.ReadWrite,p.depthRangeFor3D);v===1&&N?Va(p,i,c,f,V,$n.disabled,or.unblended,L):(Va(p,i,c,f,V,$n.disabled,or.disabled,L),Va(p,i,c,f,V,p.stencilModeFor3D(),p.colorModeForRenderPass(),L),p.resetStencilClippingMasks())}if(p.style.enable3dLights()&&N&&(!k&&p.transform.projection.name!=="globe"||I)){const V=c.paint.get("fill-extrusion-opacity"),Z=c.paint.get("fill-extrusion-ambient-occlusion-intensity"),G=c.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),Y=c.paint.get("fill-extrusion-flood-light-intensity"),ee=c.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",ae=c.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(ee?null:c.lut).toArray01().slice(0,3),ve=Z>0&&G>0,we=Y>0,Pe=(ke,Se,Ae)=>(1-Ae)*ke+Ae*Se,Ee=ke=>{const Se=p.depthModeForSublayer(1,en.ReadOnly,w.LEQUAL,!0),Ae=c.paint.get(ke?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),De=Pe(.1,3,Ae),Ze=p._showOverdrawInspector;if(!Ze){const Ye=new $n({func:w.ALWAYS,mask:255},255,255,w.KEEP,w.KEEP,w.REPLACE),ht=new or([w.ONE,w.ONE,w.ONE,w.ONE],s.am.transparent,[!1,!1,!1,!0],w.MIN);ja(p,i,c,f,Se,Ye,ht,An.disabled,ke,"sdf",V,Z,G,Y,ae,De,L,!1)}{const Ye=Ze?$n.disabled:new $n({func:w.EQUAL,mask:255},255,255,w.KEEP,w.DECR,w.DECR),ht=Ze?p.colorModeForRenderPass():new or([w.ONE_MINUS_DST_ALPHA,w.DST_ALPHA,w.ONE,w.ONE],s.am.transparent,[!0,!0,!0,!0]);ja(p,i,c,f,Se,Ye,ht,An.disabled,ke,"color",V,Z,G,Y,ae,De,L,!1)}};if(I){const ke=(Se,Ae,De)=>{const Ze=p.depthModeForSublayer(1,en.ReadOnly,w.LEQUAL,!1),Ye=c.paint.get(Se?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),ht=Pe(.1,3,Ye);{const pt=new or([w.ONE,w.ONE,w.ONE,w.ONE],s.am.transparent,[!1,!1,!1,!0]);ja(p,i,c,f,Ze,$n.disabled,pt,An.disabled,Se,"clear",V,Z,G,Y,ae,ht,L,Ae)}{const pt=new $n({func:w.ALWAYS,mask:255},255,255,w.KEEP,w.KEEP,w.REPLACE),It=new or([w.ONE,w.ONE,w.ONE,w.ONE],s.am.transparent,[!1,!1,!1,!0],w.MIN);ja(p,i,c,f,Ze,pt,It,An.disabled,Se,"sdf",V,Z,G,Y,ae,ht,L,Ae)}{const pt=Se?w.ZERO:w.ONE_MINUS_DST_ALPHA,It=new $n({func:w.EQUAL,mask:255},255,255,w.KEEP,w.DECR,w.DECR),Ge=new or([pt,w.DST_ALPHA,w.ONE_MINUS_DST_ALPHA,w.ZERO],s.am.transparent,[!0,!0,!0,!0]);ja(p,i,c,f,Ze,It,Ge,An.disabled,Se,"color",V,Z,G,Y,ae,ht,L,Ae)}{const pt=new or([w.ONE,w.ONE,w.ONE,Se?w.ZERO:w.ONE],s.am.transparent,[!1,!1,!1,!0],Se?w.FUNC_ADD:w.MAX);ja(p,i,c,f,Ze,$n.disabled,pt,An.disabled,Se,"clear",V,Z,G,Y,ae,ht,L,Ae,De)}};if(ve||we){let Se;if(p.prepareDrawTile(),k){const Ae=k.drapeBufferSize[0],De=k.drapeBufferSize[1];Se=k.framebufferCopyTexture,Se&&(!Se||Se.size[0]===Ae&&Se.size[1]===De)||(Se&&Se.destroy(),Se=k.framebufferCopyTexture=new s.T(b,new s.r({width:Ae,height:De}),w.RGBA8)),Se.bind(w.LINEAR,w.CLAMP_TO_EDGE),w.copyTexSubImage2D(w.TEXTURE_2D,0,0,0,0,0,Ae,De)}ve&&ke(!0,!1,Se),we&&ke(!1,!0,Se)}}else ve&&Ee(!0),we&&Ee(!1),(ve||we)&&p.resetStencilClippingMasks()}}},building:function(p,i,c,f){},hillshade:function(p,i,c,f){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent"||p.style.disableElevatedTerrain)return;const v=p.context,b=p.terrain&&p.terrain.renderingToTexture,[w,k]=p.renderPass!=="translucent"||b?[{},f]:p.stencilConfigForOverlap(f);for(const I of k){const L=i.getTile(I);if(L.needsHillshadePrepare&&p.renderPass==="offscreen")c1(p,L,c);else if(p.renderPass==="translucent"){const O=p.depthModeForSublayer(0,en.ReadOnly),N=c.paint.get("hillshade-emissive-strength"),F=p.colorModeForDrapableLayerRenderPass(N),V=b&&p.terrain?p.terrain.stencilModeForRTTOverlap(I):w[I.overscaledZ];l1(p,I,L,c,O,V,F)}}v.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,i,c,f,v,b){if(p.renderPass!=="translucent"||c.paint.get("raster-opacity")===0)return;const w=p.transform.projection.name==="globe",k=c.paint.get("raster-elevation")!==0,I=k&&w;if(p.renderElevatedRasterBackface&&!I)return;const L=p.context,O=L.gl,N=i.getSource(),F=function(Ee,ke,Se,Ae){const De=ke.paint.get("raster-color"),Ze=Ee.type==="raster-array",Ye=[],ht=ke.paint.get("raster-resampling"),pt=ke.paint.get("raster-color-mix");let It=ke.paint.get("raster-color-range");const Ge=[pt[0],pt[1],pt[2],0],st=pt[3];let Fe=ht==="nearest"?Ae.NEAREST:Ae.LINEAR;if(Ze&&(Ye.push("RASTER_ARRAY"),De||Ye.push("RASTER_COLOR"),ht==="linear"&&Ye.push("RASTER_ARRAY_LINEAR"),Fe=Ae.NEAREST,!It&&Ee.rasterLayers)){const gt=Ee.rasterLayers.find(({id:nt})=>nt===ke.sourceLayer);gt&&gt.fields&&gt.fields.range&&(It=gt.fields.range)}if(It=It||[0,1],De){Ye.push("RASTER_COLOR"),Se.activeTexture.set(Ae.TEXTURE2),ke.updateColorRamp(It);let gt=ke.colorRampTexture;gt||(gt=ke.colorRampTexture=new s.T(Se,ke.colorRamp,Ae.RGBA8)),gt.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE)}return{mix:Ge,range:It,offset:st,defines:Ye,resampling:Fe}}(N,c,L,O);if(N instanceof s.aP&&!f.length&&!w)return;const V=c.paint.get("raster-emissive-strength"),Z=p.colorModeForDrapableLayerRenderPass(V),G=p.terrain&&p.terrain.renderingToTexture,Y=!p.options.moving,ee=c.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;if(N instanceof s.aP&&!f.length&&(N.onNorthPole||N.onSouthPole)){const Ee=k?p.stencilModeFor3D():$n.disabled;return void Ld(!!N.onNorthPole,null,p,i,c,V,F,An.disabled,Ee)}if(!f.length)return;const[ae,ve]=N instanceof s.aP||G?[{},f]:p.stencilConfigForOverlap(f),we=ve[ve.length-1].overscaledZ;I&&F.defines.push("PROJECTION_GLOBE_VIEW"),k&&F.defines.push("RENDER_CUTOFF");const Pe=(Ee,ke,Se)=>{for(const Ae of Ee){const De=Ae.toUnwrapped(),Ze=i.getTile(Ae);if(G&&(!Ze||!Ze.hasData()))continue;L.activeTexture.set(O.TEXTURE0);const Ye=E1(Ze,N,c,F);if(!Ye||!Ye.texture)continue;const{texture:ht,mix:pt,offset:It,tileSize:Ge,buffer:st}=Ye;let Fe,gt;G?(Fe=en.disabled,gt=Ae.projMatrix):k?(Fe=new en(O.LEQUAL,en.ReadWrite,p.depthRangeFor3D),gt=w?Float32Array.from(p.transform.expandedFarZProjMatrix):p.transform.calculateProjMatrix(De,Y)):(Fe=p.depthModeForSublayer(Ae.overscaledZ-we,c.paint.get("raster-opacity")===1?en.ReadWrite:en.ReadOnly,O.LESS),gt=p.transform.calculateProjMatrix(De,Y));const nt=p.terrain&&G?p.terrain.stencilModeForRTTOverlap(Ae):ae[Ae.overscaledZ],St=b?0:c.paint.get("raster-fade-duration");Ze.registerFadeDuration(St);const Bt=i.findLoadedParent(Ae,0),mt=hc(Ze,Bt,i,p.transform,St);let Ot,nn;p.terrain&&p.terrain.prepareDrawTile(),L.activeTexture.set(O.TEXTURE0),ht.bind(ee,O.CLAMP_TO_EDGE),L.activeTexture.set(O.TEXTURE1),Bt?(Bt.texture&&Bt.texture.bind(ee,O.CLAMP_TO_EDGE),Ot=Math.pow(2,Bt.tileID.overscaledZ-Ze.tileID.overscaledZ),nn=[Ze.tileID.canonical.x*Ot%1,Ze.tileID.canonical.y*Ot%1]):ht.bind(ee,O.CLAMP_TO_EDGE),"useMipmap"in ht&&L.extTextureFilterAnisotropic&&p.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,L.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,L.extTextureFilterAnisotropicMax);const rn=p.transform;let Yt;const mn=k?T1(rn):[0,0,0,0];let bn,Cn,Bn,Jn,Mr,ii=0;if(I&&N instanceof s.aP&&N.coordinates.length>3)bn=Float32Array.from(s.bh(s.dr(new s.cp(0,0,0)))),Cn=Float32Array.from(rn.globeMatrix),Bn=Float32Array.from(s.dm(rn)),Jn=[s.aD(rn.center.lng),s.aH(rn.center.lat)],Yt=N.elevatedGlobePerspectiveTransform,Mr=N.elevatedGlobeGridMatrix||new Float32Array(9);else if(I){const Gn=s.dn(Ae.canonical);ii=s.dp(Gn.getCenter().lat),bn=Float32Array.from(s.bh(s.dr(Ae.canonical))),Cn=Float32Array.from(rn.globeMatrix),Bn=Float32Array.from(s.dm(rn)),Jn=[s.aD(rn.center.lng),s.aH(rn.center.lat)],Yt=[0,0],Mr=Float32Array.from(s.dq(Ae.canonical,Gn,ii,rn.worldSize/rn._pixelsPerMercatorPixel))}else Yt=N instanceof s.aP?N.perspectiveTransform:[0,0],bn=new Float32Array(16),Cn=new Float32Array(9),Bn=new Float32Array(16),Jn=[0,0],Mr=new Float32Array(9);const Br=fm(gt,bn,Cn,Bn,Mr,nn||[0,0],s.ah(p.transform.zoom),Jn,mn,Ot||1,mt,c,Yt,k?c.paint.get("raster-elevation"):0,2,pt,It,F.range,Ge,st,V),Nr=p.isTileAffectedByFog(Ae),Vi=p.getOrCreateProgram("raster",{defines:F.defines,overrideFog:Nr});if(p.uploadCommonUniforms(L,Vi,De),N instanceof s.aP){const Gn=N.elevatedGlobeVertexBuffer,nr=N.elevatedGlobeIndexBuffer;if(G||!w)N.boundsBuffer&&N.boundsSegments&&Vi.draw(p,O.TRIANGLES,Fe,$n.disabled,Z,An.disabled,Br,c.id,N.boundsBuffer,p.quadTriangleIndexBuffer,N.boundsSegments);else if(Gn&&nr){const ur=rn.zoom<=s.cL?N.elevatedGlobeSegments:N.getSegmentsForLongitude(rn.center.lng);ur&&Vi.draw(p,O.TRIANGLES,Fe,$n.disabled,Z,ke,Br,c.id,Gn,nr,ur)}}else if(I){Fe=new en(O.LEQUAL,en.ReadOnly,p.depthRangeFor3D);const Gn=p.globeSharedBuffers;if(Gn){const[nr,ur,ci]=Gn.getGridBuffers(ii,!1);Vi.draw(p,O.TRIANGLES,Fe,Se||nt,p.colorModeForRenderPass(),ke,Br,c.id,nr,ur,ci)}}else{const{tileBoundsBuffer:Gn,tileBoundsIndexBuffer:nr,tileBoundsSegments:ur}=p.getTileBoundsBuffers(Ze);Vi.draw(p,O.TRIANGLES,Fe,nt,Z,An.disabled,Br,c.id,Gn,nr,ur)}}if(!(N instanceof s.aP)&&I)for(const Ae of Ee){const De=Ae.canonical.y===(1<<Ae.canonical.z)-1;Ae.canonical.y===0&&Ld(!0,Ae,p,i,c,V,F,ke,Se||$n.disabled),De&&Ld(!1,Ae,p,i,c,V,F,ke===An.frontCW?An.backCW:An.frontCW,Se||$n.disabled)}};I?Pe(ve,p.renderElevatedRasterBackface?An.backCW:An.frontCW,p.stencilModeFor3D()):Pe(ve,An.disabled,void 0),p.resetStencilClippingMasks()},"raster-particle":function(p,i,c,f,v,b){p.renderPass==="offscreen"&&function(w,k,I,L){if(!L.length)return;const O=w.context,N=O.gl,F=k.getSource();if(!(F instanceof ul))return;const V=Math.ceil(Math.sqrt(I.paint.get("raster-particle-count")));let Z=I.particlePositionRGBAImage;if(!Z||Z.width!==V){const ve=function(we){const Pe=we*we,Ee=new Uint8Array(4*Pe),ke=function(Ae){return Ae|=0,Ae=Math.imul(2747636419^Ae,2654435769),Ae=Math.imul(Ae^Ae>>>16,2654435769),((Ae=Math.imul(Ae^Ae>>>16,2654435769))>>>0)/4294967296},Se=1/1.1;for(let Ae=0;Ae<Pe;Ae++){const De=Se*(ke(2*Ae+0)+yl),Ze=Se*(ke(2*Ae+1)+yl),Ye=255*De%1,ht=255*Ze%1,pt=Ye,It=Ze-ht/255,Ge=ht;Ee[4*Ae+0]=255*(De-Ye/255),Ee[4*Ae+1]=255*pt,Ee[4*Ae+2]=255*It,Ee[4*Ae+3]=255*Ge}return Ee}(V);Z=I.particlePositionRGBAImage=new s.r({width:V,height:V},ve)}let G=I.particleFramebuffer;G?G.width!==V&&(G.destroy(),G=I.particleFramebuffer=O.createFramebuffer(V,V,!0,null)):G=I.particleFramebuffer=O.createFramebuffer(V,V,!0,null);const Y=[];for(const ve of L){const we=k.getTile(ve);if(!(we instanceof Vc))continue;const Pe=I1(we,F,I);if(!Pe)continue;const Ee=[we.tileSize,we.tileSize];let ke=I.tileFramebuffer;ke||(ke=I.tileFramebuffer=O.createFramebuffer(Ee[0],Ee[1],!0,null));let Se=we.rasterParticleState;Se||(Se=we.rasterParticleState=new j0(O,ve,Ee,Z));const Ae=Se.update(I.lastInvalidatedAt);Se.particleTextureDimension!==V&&Se.updateParticleTexture(ve,Z);const De=Se.targetColorTexture;Se.targetColorTexture=Se.backgroundColorTexture,Se.backgroundColorTexture=De;const Ze=Se.particleTexture0;Se.particleTexture0=Se.particleTexture1,Se.particleTexture1=Ze,Y.push([ve,Pe,Se,Ae])}if(Y.length===0)return;const ee=s.q.now(),ae=I.previousDrawTimestamp?.001*(ee-I.previousDrawTimestamp):.0167;if(I.previousDrawTimestamp=ee,I.hasColorMap()){O.activeTexture.set(N.TEXTURE0+2);let ve=I.colorRampTexture;ve||(ve=I.colorRampTexture=new s.T(O,I.colorRamp,N.RGBA8)),ve.bind(N.LINEAR,N.CLAMP_TO_EDGE)}O.bindFramebuffer.set(I.tileFramebuffer.framebuffer),function(ve,we,Pe){const Ee=ve.context,ke=Ee.gl,Se=we.tileFramebuffer;Ee.activeTexture.set(ke.TEXTURE0);const Ae={u_texture:0,u_opacity:1.05*(Ze=we.paint.get("raster-particle-fade-opacity-factor"))/(Ze+.05)},De=ve.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Ze;for(const Ye of Pe){const[,,ht,pt]=Ye;Se.colorAttachment.set(ht.targetColorTexture.texture),Ee.viewport.set([0,0,Se.width,Se.height]),Ee.clear({color:s.am.transparent}),pt&&(ht.backgroundColorTexture.bind(ke.NEAREST,ke.CLAMP_TO_EDGE),De.draw(ve,ke.TRIANGLES,en.disabled,$n.disabled,or.alphaBlended,An.disabled,Ae,we.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments))}}(w,I,Y),function(ve,we,Pe,Ee){const ke=ve.context,Se=ke.gl,Ae=Pe.tileFramebuffer,De=ve.transform.projection.name==="globe",Ze=Pe.paint.get("raster-particle-max-speed");for(const Ye of Ee){const[ht,pt,It]=Ye;ke.activeTexture.set(Se.TEXTURE0+0),pt.texture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),Ae.colorAttachment.set(It.targetColorTexture.texture);const Ge=ve.getOrCreateProgram("rasterParticleDraw",{defines:pt.defines,overrideFog:!1});ke.activeTexture.set(Se.TEXTURE0+1);const st=pt.scalarData?[]:[0,1,2,3].map(nt=>s.dT[nt](ht));st.push(ht);const Fe=ht.canonical.x,gt=ht.canonical.y;for(const nt of st){const St=we.getTile(De?nt.wrapped():nt);if(!St)continue;const Bt=St.rasterParticleState;if(!Bt)continue;const mt=nt.canonical.x+(1<<nt.canonical.z)*(nt.wrap-ht.wrap),Ot=nt.canonical.y;Bt.particleTexture0.bind(Se.NEAREST,Se.CLAMP_TO_EDGE);const nn=z0(1,Bt.particleTexture0.size[0],[mt-Fe,Ot-gt],0,pt.texture.size,2,Ze,pt.textureOffset,pt.scale,pt.offset);Ge.draw(ve,Se.POINTS,en.disabled,$n.disabled,or.alphaBlended,An.disabled,nn,Pe.id,Bt.particleIndexBuffer,void 0,Bt.particleSegment)}}}(w,k,I,Y),O.bindFramebuffer.set(I.particleFramebuffer.framebuffer),function(ve,we,Pe,Ee){const ke=ve.context,Se=ke.gl,Ae=we.paint.get("raster-particle-max-speed"),De=Ee*we.paint.get("raster-particle-speed-factor")*.15,Ze=function(ht){return Math.pow(ht,6)}(.01+1*we.paint.get("raster-particle-reset-rate-factor")),Ye=we.particleFramebuffer;ke.viewport.set([0,0,Ye.width,Ye.height]);for(const ht of Pe){const[,pt,It]=ht;ke.activeTexture.set(Se.TEXTURE0+0),pt.texture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),ke.activeTexture.set(Se.TEXTURE0+1);const Ge=It.particleTexture0;Ge.bind(Se.NEAREST,Se.CLAMP_TO_EDGE);const st=vl(1,Ge.size[0],0,pt.texture.size,Ae,De,Ze,pt.textureOffset,pt.scale,pt.offset);Ye.colorAttachment.set(It.particleTexture1.texture),ke.clear({color:s.am.transparent}),ve.getOrCreateProgram("rasterParticleUpdate",{defines:pt.defines}).draw(ve,Se.TRIANGLES,en.disabled,$n.disabled,or.unblended,An.disabled,st,we.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments)}}(w,I,Y,ae)}(p,i,c,f),p.renderPass==="translucent"&&(function(w,k,I,L,O){const N=w.context,F=N.gl,V=k.getSource().tileSize,Z=5*(1-s.af(s.cx,s.cx+1,w.transform.zoom))*V+I.paint.get("raster-particle-elevation"),G=!w.options.moving,Y=w.transform.projection.name==="globe";if(!L.length)return;const[ee,ae]=w.stencilConfigForOverlap(L),ve=[];Y&&ve.push("PROJECTION_GLOBE_VIEW");const we=w.stencilModeFor3D();for(const Pe of ae){const Ee=Pe.toUnwrapped(),ke=k.getTile(Pe);if(!ke.rasterParticleState)continue;const Se=ke.rasterParticleState,Ae=100;ke.registerFadeDuration(Ae);const De=k.findLoadedParent(Pe,0),Ze=hc(ke,De,k,w.transform,Ae);let Ye,ht;w.terrain&&w.terrain.prepareDrawTile(),N.activeTexture.set(F.TEXTURE0),Se.targetColorTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),N.activeTexture.set(F.TEXTURE1),De&&De.rasterParticleState?(De.rasterParticleState.targetColorTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),Ye=Math.pow(2,De.tileID.overscaledZ-ke.tileID.overscaledZ),ht=[ke.tileID.canonical.x*Ye%1,ke.tileID.canonical.y*Ye%1]):Se.targetColorTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE);const pt=Y?Float32Array.from(w.transform.expandedFarZProjMatrix):w.transform.calculateProjMatrix(Ee,G),It=w.transform,Ge=U0(It),st=s.dn(Pe.canonical),Fe=s.dp(st.getCenter().lat);let gt,nt,St,Bt,mt;Y?(gt=Float32Array.from(s.bh(s.dr(Pe.canonical))),nt=Float32Array.from(It.globeMatrix),St=Float32Array.from(s.dm(It)),Bt=[s.aD(It.center.lng),s.aH(It.center.lat)],mt=Float32Array.from(s.dq(Pe.canonical,st,Fe,It.worldSize/It._pixelsPerMercatorPixel))):(gt=new Float32Array(16),nt=new Float32Array(9),St=new Float32Array(16),Bt=[0,0],mt=new Float32Array(9));const Ot=mc(pt,gt,nt,St,mt,ht||[0,0],s.ah(w.transform.zoom),Bt,Ge,Ye||1,Ze,Z),nn=w.isTileAffectedByFog(Pe),rn=w.getOrCreateProgram("rasterParticle",{defines:ve,overrideFog:nn});if(w.uploadCommonUniforms(N,rn,Ee),Y){const Yt=new en(F.LEQUAL,en.ReadOnly,w.depthRangeFor3D),mn=0,bn=w.globeSharedBuffers;if(bn){const[Cn,Bn,Jn]=bn.getGridBuffers(Fe,mn!==0);rn.draw(w,F.TRIANGLES,Yt,we,or.alphaBlended,w.renderElevatedRasterBackface?An.frontCCW:An.backCCW,Ot,I.id,Cn,Bn,Jn)}}else{const Yt=w.depthModeForSublayer(0,en.ReadOnly),mn=ee[Pe.overscaledZ],{tileBoundsBuffer:bn,tileBoundsIndexBuffer:Cn,tileBoundsSegments:Bn}=w.getTileBoundsBuffers(ke);rn.draw(w,F.TRIANGLES,Yt,mn,or.alphaBlended,An.disabled,Ot,I.id,bn,Cn,Bn)}}w.resetStencilClippingMasks()}(p,i,c,f),p.style.map.triggerRepaint())},background:function(p,i,c,f){const v=c.paint.get("background-color"),b=c.paint.get("background-color-use-theme").constantOr("default")==="none",w=c.paint.get("background-opacity"),k=c.paint.get("background-emissive-strength"),I=c.paint.get("background-pitch-alignment")==="viewport";if(w===0)return;const L=p.context,O=L.gl,N=p.transform,F=N.tileSize,V=c.paint.get("background-pattern");let Z;if(V!==void 0&&(V===null||(Z=p.imageManager.getPattern(s.I.from(V.toString()),c.scope,p.style.getLut(c.scope)),!Z)))return;const G=!V&&v.a===1&&w===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==G)return;const Y=$n.disabled,ee=p.depthModeForSublayer(0,G==="opaque"?en.ReadWrite:en.ReadOnly),ae=p.colorModeForDrapableLayerRenderPass(k),ve=V?"backgroundPattern":"background";let we,Pe=f;if(Pe||(we=p.getBackgroundTiles(),Pe=Object.values(we).map(Ee=>Ee.tileID)),V&&(L.activeTexture.set(O.TEXTURE0),p.imageManager.bind(p.context,c.scope)),I){const Ee=p.getOrCreateProgram(ve,{overrideFog:!1,overrideRtt:!0}),ke=new Float32Array(s.bx([])),Se=new s.aM(0,0,0,0,0),Ae=V?gm(ke,k,w,p,0,c.scope,Z,I,{tileID:Se,tileSize:F}):mm(ke,k,w,v.toPremultipliedRenderColor(b?null:c.lut));Ee.draw(p,O.TRIANGLES,ee,Y,ae,An.disabled,Ae,c.id,p.viewportBuffer,p.quadTriangleIndexBuffer,p.viewportSegments)}else for(const Ee of Pe){const ke=p.isTileAffectedByFog(Ee),Se=p.getOrCreateProgram(ve,{overrideFog:ke}),Ae=Ee.toUnwrapped(),De=f?Ee.projMatrix:p.transform.calculateProjMatrix(Ae);p.prepareDrawTile();const Ze=i?i.getTile(Ee):we?we[Ee.key]:new Ql(Ee,F,N.zoom,p),Ye=V?gm(De,k,w,p,0,c.scope,Z,I,{tileID:Ee,tileSize:F}):mm(De,k,w,v.toPremultipliedRenderColor(b?null:c.lut));p.uploadCommonUniforms(L,Se,Ae);const{tileBoundsBuffer:ht,tileBoundsIndexBuffer:pt,tileBoundsSegments:It}=p.getTileBoundsBuffers(Ze);Se.draw(p,O.TRIANGLES,ee,Y,ae,An.disabled,Ye,c.id,ht,pt,It)}},sky:function(p,i,c){const f=p._atmosphere?s.ah(p.transform.zoom):1,v=c.paint.get("sky-opacity")*f;if(v===0)return;const b=p.context,w=c.paint.get("sky-type"),k=new en(b.gl.LEQUAL,en.ReadOnly,[0,1]),I=p.frameCounter/1e3%1;w==="atmosphere"?p.renderPass==="offscreen"?c.needsSkyboxCapture(p)&&(function(L,O,N,F){const V=L.context,Z=V.gl;let G=O.skyboxFbo;if(!G){G=O.skyboxFbo=V.createFramebuffer(32,32,!0,null),O.skyboxGeometry=new Od(V),O.skyboxTexture=V.gl.createTexture(),Z.bindTexture(Z.TEXTURE_CUBE_MAP,O.skyboxTexture),Z.texParameteri(Z.TEXTURE_CUBE_MAP,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_CUBE_MAP,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_CUBE_MAP,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_CUBE_MAP,Z.TEXTURE_MAG_FILTER,Z.LINEAR);for(let ve=0;ve<6;++ve)Z.texImage2D(Z.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,Z.RGBA,32,32,0,Z.RGBA,Z.UNSIGNED_BYTE,null)}V.bindFramebuffer.set(G.framebuffer),V.viewport.set([0,0,32,32]);const Y=O.getCenter(L,!0),ee=L.getOrCreateProgram("skyboxCapture"),ae=new Float64Array(16);s.bx(ae),s.e3(ae,ae,.5*-Math.PI),xl(L,O,ee,ae,Y,0),s.bx(ae),s.e3(ae,ae,.5*Math.PI),xl(L,O,ee,ae,Y,1),s.bx(ae),s.cG(ae,ae,.5*-Math.PI),xl(L,O,ee,ae,Y,2),s.bx(ae),s.cG(ae,ae,.5*Math.PI),xl(L,O,ee,ae,Y,3),s.bx(ae),xl(L,O,ee,ae,Y,4),s.bx(ae),s.e3(ae,ae,Math.PI),xl(L,O,ee,ae,Y,5),V.viewport.set([0,0,L.width,L.height])}(p,c),c.markSkyboxValid(p)):p.renderPass==="sky"&&function(L,O,N,F,V){const Z=L.context,G=Z.gl,Y=L.transform,ee=L.getOrCreateProgram("skybox");Z.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_CUBE_MAP,O.skyboxTexture);const ae=((ve,we,Pe,Ee,ke)=>({u_matrix:ve,u_sun_direction:we,u_cubemap:0,u_opacity:Ee,u_temporal_offset:ke}))(Y.skyboxMatrix,O.getCenter(L,!1),0,F,V);L.uploadCommonUniforms(Z,ee),ee.draw(L,G.TRIANGLES,N,$n.disabled,L.colorModeForRenderPass(),An.backCW,ae,"skybox",O.skyboxGeometry.vertexBuffer,O.skyboxGeometry.indexBuffer,O.skyboxGeometry.segment)}(p,c,k,v,I):w==="gradient"&&p.renderPass==="sky"&&function(L,O,N,F,V){const Z=L.context,G=Z.gl,Y=L.transform,ee=L.getOrCreateProgram("skyboxGradient");O.skyboxGeometry||(O.skyboxGeometry=new Od(Z)),Z.activeTexture.set(G.TEXTURE0);let ae=O.colorRampTexture;ae||(ae=O.colorRampTexture=new s.T(Z,O.colorRamp,G.RGBA8)),ae.bind(G.LINEAR,G.CLAMP_TO_EDGE);const ve=((we,Pe,Ee,ke,Se)=>({u_matrix:we,u_color_ramp:0,u_center_direction:Pe,u_radius:s.al(Ee),u_opacity:ke,u_temporal_offset:Se}))(Y.skyboxMatrix,O.getCenter(L,!1),O.paint.get("sky-gradient-radius"),F,V);L.uploadCommonUniforms(Z,ee),ee.draw(L,G.TRIANGLES,N,$n.disabled,L.colorModeForRenderPass(),An.backCW,ve,"skyboxGradient",O.skyboxGeometry.vertexBuffer,O.skyboxGeometry.indexBuffer,O.skyboxGeometry.segment)}(p,c,k,v,I)},custom:function(p,i,c,f){const v=p.context,b=c.implementation;if(!p.transform.projection.unsupportedLayers||!p.transform.projection.unsupportedLayers.includes("custom")||p.terrain&&(p.terrain.renderingToTexture||p.renderPass==="offscreen")&&c.isDraped(i)){if(p.renderPass==="offscreen"){const w=b.prerender;if(w){if(p.setCustomLayerDefaults(),v.setColorMode(p.colorModeForRenderPass()),p.transform.projection.name==="globe"){const k=p.transform.pointMerc;w.call(b,v.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),s.ah(p.transform.zoom),[k.x,k.y],p.transform.pixelsPerMeterRatio)}else w.call(b,v.gl,p.transform.customLayerMatrix());v.setDirty(),p.setBaseState()}}else if(p.renderPass==="translucent"){if(p.terrain&&p.terrain.renderingToTexture){const k=b.renderToTile;if(k){const I=f[0].canonical,L={x:I.x+f[0].wrap*(b.wrapTileId?0:1<<I.z),y:I.y,z:I.z};v.setDepthMode(en.disabled),v.setStencilMode($n.disabled),v.setColorMode(p.colorModeForRenderPass()),p.setCustomLayerDefaults(),k.call(b,v.gl,L),v.setDirty(),p.setBaseState()}return}p.setCustomLayerDefaults(),v.setColorMode(p.colorModeForRenderPass()),v.setStencilMode($n.disabled);const w=b.renderingMode==="3d"?new en(p.context.gl.LEQUAL,en.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,en.ReadOnly);if(v.setDepthMode(w),p.transform.projection.name==="globe"){const k=p.transform.pointMerc;b.render(v.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),s.ah(p.transform.zoom),[k.x,k.y],p.transform.pixelsPerMeterRatio)}else b.render(v.gl,p.transform.customLayerMatrix());v.setDirty(),p.setBaseState(),v.bindFramebuffer.set(null)}}else s.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(p,i,c,f){if(p.renderPass==="opaque")return;const v=c.paint.get("model-opacity").constantOr(1);if(v===0)return;const b=c.paint.get("model-cast-shadows");if(p.renderPass==="shadow"&&(!b||p.terrain&&v<.65&&c._transitionablePaint._values["model-opacity"].value.expression instanceof s.ab))return;const w=p.shadowRenderer,k=c.paint.get("model-receive-shadows");w&&(w.useNormalOffset=!0,k||(w.enabled=!1));const I=()=>{w&&(w.useNormalOffset=!0,k||(w.enabled=!0))},L=i.getSource();if(p.renderPass==="light-beam"&&L.type!=="batched-model")return;if(L.type==="vector"||L.type==="geojson")return function(ee,ae,ve,we,Pe){const Ee=ee.transform;if(Ee.projection.name!=="mercator")return void s.w(`Drawing 3D models for ${Ee.projection.name} projection is not yet implemented`);const ke=Ee.getFreeCameraOptions().position;if(!ee.modelManager)return;const Se=ee.modelManager;ve.modelManager=Se;const Ae=ee.shadowRenderer;if(!ve._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const De=ve._unevaluatedLayout._values["model-id"],Ze=Object.assign({},ve.layout.get("model-id").parameters),Ye=ee.style.order.indexOf(ve.fqid);for(const ht of we){const pt=ae.getTile(ht).getBucket(ve);if(!pt||pt.projection.name!==Ee.projection.name)continue;const It=pt.getModelUris();It&&!pt.modelsRequested&&(Se.addModelsFromBucket(It,Pe),pt.modelsRequested=!0);const Ge=vp(ht,Ee);Ze.zoom=Ge;const st=De.possiblyEvaluate(Ze);if(We(ee,pt,ht),na.shadowUniformsInitialized=!1,na.useSingleShadowCascade=!!Ae&&Ae.getMaxCascadeForTile(ht.toUnwrapped())===0,ee.renderPass==="shadow"&&Ae){if(ee.currentShadowCascade===1&&pt.isInsideFirstShadowMapFrustum)continue;const nt=Ee.calculatePosMatrix(ht.toUnwrapped(),Ee.worldSize);if(na.tileMatrix.set(nt),na.shadowTileMatrix=Float32Array.from(Ae.calculateShadowPassMatrixFromMatrix(nt)),na.aabb.min.fill(0),na.aabb.max[0]=na.aabb.max[1]=s.aj,na.aabb.max[2]=0,K0(pt,na,ee,ve.scope))continue}const Fe=1<<ht.canonical.z,gt=[((ke.x-ht.wrap)*Fe-ht.canonical.x)*s.aj,(ke.y*Fe-ht.canonical.y)*s.aj,ke.z*Fe*s.aj];ee.conflationActive&&Object.keys(pt.instancesPerModel).length>0&&ee.style.isLayerClipped(ve,ae.getSource())&&pt.updateReplacement(ht,ee.replacementSource,Ye,Pe)&&(pt.uploaded=!1,pt.upload(ee.context));for(let nt in pt.instancesPerModel){const St=pt.instancesPerModel[nt];St.features.length>0&&(nt=st.evaluate(St.features[0].feature,{}));const Bt=Se.getModel(nt,Pe);if(Bt||Se.hasURLBeenRequested(nt)||pt.modelUris.includes(nt)||(pt.modelUris.push(nt),pt.modelsRequested=!1),Bt&&Bt.uploaded)for(const mt of Bt.nodes)bp(ee,ve,mt,St,gt,ht,na)}}}(p,i,c,f,L.type==="vector"?c.scope:""),void I();if(!L.loaded())return;if(L.type==="batched-model")return function(ee,ae,ve,we){ve.resetLayerRenderingStats(ee);const Pe=ee.context,Ee=ee.transform,ke=ee.style.fog,Se=ee.shadowRenderer;if(Ee.projection.name!=="mercator")return void s.w(`Drawing 3D landmark models for ${Ee.projection.name} projection is not yet implemented`);const Ae=ee.transform.getFreeCameraOptions().position,De=s.bY([],[Ae.x,Ae.y,Ae.z],ee.transform.worldSize),Ze=s.eb([],De),Ye=s.bx([]),ht=s.ec(Ee.center.lat,Ee.zoom),pt=s.bn([],[1,1,1/ht]);s.bo(Ye,Ye,Ze);const It=ve.paint.get("model-opacity").constantOr(1),Ge=new en(Pe.gl.LEQUAL,en.ReadWrite,ee.depthRangeFor3D),st=new en(Pe.gl.LEQUAL,en.ReadOnly,ee.depthRangeFor3D),Fe=new s.cW([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),gt=ee.renderPass==="shadow",nt=gt&&Se?Se.getCurrentCascadeFrustum():Ee.getFrustum(Ee.scaleZoom(Ee.worldSize)),St=ve.paint.get("model-front-cutoff"),Bt=St[2]<1,mt=fa(ee,ve.paint.get("model-cutoff-fade-range")),Ot=ve.getLayerRenderingStats();(function(nn,rn,Yt,mn){const bn=nn.terrain?nn.terrain.exaggeration():0,Cn=nn.transform.zoom;for(const Bn of mn){const Jn=rn.getTile(Bn).getBucket(Yt);Jn&&(Jn.setFilter(Yt.filter),nn.conflationActive&&Jn.updateReplacement(Bn,nn.replacementSource),Jn.evaluateTransform(nn,Yt),nn.terrain&&bn>0&&Jn.elevationUpdate(nn.terrain,bn,Bn,Yt.source),Jn.needsReEvaluation(nn,Cn,Yt)&&Jn.evaluate(Yt))}})(ee,ae,ve,we),function(){let nn,rn,Yt;Bt?(nn=we.length-1,rn=-1,Yt=-1):(nn=0,rn=we.length,Yt=1);const mn=new Float64Array(16),bn=s.ef(),Cn=new s.P(0,0);for(let Bn=nn;Bn!==rn;Bn+=Yt){const Jn=we[Bn],Mr=ae.getTile(Jn).getBucket(ve);if(!Mr||!Mr.uploaded)continue;let ii=!1;Se&&(ii=Se.getMaxCascadeForTile(Jn.toUnwrapped())===0);const Br=Ee.calculatePosMatrix(Jn.toUnwrapped(),Ee.worldSize),Nr=Mr.modelTraits;!gt&&Bt&&(s.bi(mn,Br),s.ad(bn,De,mn),Cn.x=bn[0],Cn.y=bn[1]);const Vi=[];Mr.setFilter(ve.filter);for(const Gn of Mr.getNodesInfo()){if(Gn.hiddenByReplacement||!Gn.node.meshes)continue;const nr=Gn.node;let ur=0;ee.terrain&&nr.elevation&&(ur=nr.elevation*ee.terrain.exaggeration());const ci=(()=>{const Bi=Gn.aabb;return Fe.min=[...Bi.min],Fe.max=[...Bi.max],Fe.min[2]+=ur,Fe.max[2]+=ur,s.ad(Fe.min,Fe.min,Br),s.ad(Fe.max,Fe.max,Br),Fe})(),Yi=Gn.evaluatedScale;if(Yi[0]<=1&&Yi[1]<=1&&Yi[2]<=1&&ci.intersects(nt)===0)continue;if(!gt&&Bt){const Bi=.16666666666666666;Gn.cameraCollisionOpacity=De[0]>ci.min[0]&&De[0]<ci.max[0]&&De[1]>ci.min[1]&&De[1]<ci.max[1]&&De[2]*ht<ci.max[2]&&nr.footprint&&s.bS(Cn,nr.footprint)?Math.max(Gn.cameraCollisionOpacity-Bi,0):Math.min(1,Gn.cameraCollisionOpacity+Bi)}const oi=[...Br],Er=1/s.cU(Jn.canonical),Di=nr.anchor?nr.anchor[0]:0,vr=nr.anchor?nr.anchor[1]:0;s.bo(oi,oi,[Di*(Yi[0]-1)+Gn.evaluatedTranslation[0]*Er,vr*(Yi[1]-1)+Gn.evaluatedTranslation[1]*Er,ur+Gn.evaluatedTranslation[2]]),s.ci(Yi,s.eg)||s.cE(oi,oi,Yi);const Ki=s.az([],oi,nr.matrix),ui=s.az([],Ee.expandedFarZProjMatrix,Ki),ti=s.az([],Ee.expandedFarZProjMatrix,oi),di=s.aA([],[Di,vr,ur,1],ui)[2];nr.hidden=!1;let Pr=It;gt||(Bt&&(Pr*=Gn.cameraCollisionOpacity,Pr*=du(oi,Ee,Gn.aabb,St)),Pr*=Z0(mt,di)),Pr!==0?Vi.push({nodeInfo:Gn,depth:di,opacity:Pr,wvpForNode:ui,wvpForTile:ti,nodeModelMatrix:Ki,tileModelMatrix:oi}):nr.hidden=!0}gt||Vi.sort((Gn,nr)=>!Bt||Gn.opacity===1&&nr.opacity===1?Gn.depth<nr.depth?-1:1:Gn.opacity===1?-1:nr.opacity===1?1:Gn.depth>nr.depth?-1:1);for(const Gn of Vi){const nr=Gn.nodeInfo,ur=nr.node;let ci=s.az([],pt,Gn.tileModelMatrix);s.az(ci,Ye,ci);const Yi=s.bi([],ci);s.ee(Yi,Yi),s.cE(Yi,Yi,wm),ci=s.az(ci,ci,ur.matrix);const oi=ee.renderPass==="light-beam",Er=ve.paint.get("model-color-use-theme").constantOr("default")==="none",Di=Nr&s.em.HasMapboxMeshFeatures,vr=Di?0:nr.evaluatedRMEA[0][2];for(let Ki=0;Ki<ur.meshes.length;++Ki){const ui=ur.meshes[Ki],ti=Ki===ur.lightMeshIndex;let di=Gn.wvpForNode;if(ti){if(!oi&&!ee.terrain&&ee.shadowRenderer){ee.currentLayer<ee.firstLightBeamLayer&&(ee.firstLightBeamLayer=ee.currentLayer);continue}di=Gn.wvpForTile}else if(oi)continue;const Pr={defines:[]},Bi=[];if(!gt&&Se&&(Se.useNormalOffset=!!ui.normalBuffer),Mt(Pr.defines,Bi,ui,ee,Er?null:ve.lut),Di||Pr.defines.push("DIFFUSE_SHADED"),ii&&Pr.defines.push("SHADOWS_SINGLE_CASCADE"),Ot&&(gt?Ot.numRenderedVerticesInShadowPass+=ui.vertexArray.length:Ot.numRenderedVerticesInTransparentPass+=ui.vertexArray.length),gt){Mi(ui,Gn.nodeModelMatrix,ee,ve);continue}let Po=null;if(ke){const ia=yc(Gn.nodeModelMatrix,ee.transform);if(Po=new Float32Array(ia),Ee.projection.name!=="globe"){const Us=ui.aabb.min,as=ui.aabb.max,[El,oa]=ke.getOpacityForBounds(ia,Us[0],Us[1],as[0],as[1]);Pr.overrideFog=El>=it||oa>=it}}const vi=ui.material;let kr;vi.occlusionTexture&&vi.occlusionTexture.offsetScale&&(kr=vi.occlusionTexture.offsetScale,Pr.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const hs=ee.getOrCreateProgram("model",Pr);!gt&&Se&&Se.setupShadowsFromMatrix(Gn.tileModelMatrix,hs,Se.useNormalOffset),ee.uploadCommonUniforms(Pe,hs,null,Po);const ss=vi.pbrMetallicRoughness;ss.metallicFactor=.9,ss.roughnessFactor=.5;const Es=Rd(new Float32Array(di),new Float32Array(ci),new Float32Array(Yi),new Float32Array(ur.matrix),ee,Gn.opacity,ss.baseColorFactor,vi.emissiveFactor,ss.metallicFactor,ss.roughnessFactor,vi,vr,ve,[0,0,0],kr);!ti&&(nr.hasTranslucentParts||Gn.opacity<1)&&hs.draw(ee,Pe.gl.TRIANGLES,Ge,$n.disabled,or.disabled,An.backCCW,Es,ve.id,ui.vertexBuffer,ui.indexBuffer,ui.segments,ve.paint,ee.transform.zoom,void 0,Bi),hs.draw(ee,Pe.gl.TRIANGLES,ti?st:Ge,$n.disabled,ti||Gn.opacity<1||nr.hasTranslucentParts?or.alphaBlended:or.unblended,An.backCCW,Es,ve.id,ui.vertexBuffer,ui.indexBuffer,ui.segments,ve.paint,ee.transform.zoom,void 0,Bi)}}}}()}(p,i,c,f),void I();if(L.type!=="model")return;const O=L.getModels(),N=[],F=p.transform.getFreeCameraOptions().position,V=s.bY([],[F.x,F.y,F.z],p.transform.worldSize);s.eb(V,V);const Z=[],G=[];let Y=0;for(const ee of O){const ae=c.paint.get("model-rotation").constantOr(null),ve=c.paint.get("model-scale").constantOr(null),we=c.paint.get("model-translation").constantOr(null);ee.computeModelMatrix(p,ae,ve,we,!0,!0,!1);const Pe=s.bx([]),Ee=s.ec(ee.position.lat,p.transform.zoom),ke=s.bn([],[1,1,1/Ee]);s.bo(Pe,Pe,V),N.push({zScaleMatrix:ke,negCameraPosMatrix:Pe});for(const Se of ee.nodes)vc(p.transform,Se,ee.matrix,p.transform.expandedFarZProjMatrix,Y,Z,G);Y++}if(Z.sort((ee,ae)=>ae.depth-ee.depth),p.renderPass!=="shadow"){if(v===1)for(const ee of G)Zt(ee,p,c,N[ee.modelIndex],$n.disabled,p.colorModeForRenderPass());else{for(const ee of G)Zt(ee,p,c,N[ee.modelIndex],$n.disabled,or.disabled);for(const ee of G)Zt(ee,p,c,N[ee.modelIndex],p.stencilModeFor3D(),p.colorModeForRenderPass());p.resetStencilClippingMasks()}for(const ee of Z)Zt(ee,p,c,N[ee.modelIndex],$n.disabled,p.colorModeForRenderPass());I()}else{for(const ee of G)Mi(ee.mesh,ee.nodeModelMatrix,p,c);for(const ee of Z)Mi(ee.mesh,ee.nodeModelMatrix,p,c);I()}}},Tm={line:function(p,i,c){if(p.hasElevatedBuckets=!1,p.hasNonElevatedBuckets=!1,p._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||p._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(i){const f=i.getVisibleCoordinates();for(const v of f){const b=i.getTile(v).getBucket(p);if(b&&(b.elevationType!=="none"?p.hasElevatedBuckets=!0:p.hasNonElevatedBuckets=!0,p.hasElevatedBuckets&&p.hasNonElevatedBuckets))break}}}else p.hasNonElevatedBuckets=!0},model:function(p,i,c){const f=i.getSource();if(!f.loaded())return;if(f.type==="vector"||f.type==="geojson")return void(c.modelManager&&c.modelManager.upload(c,f.type==="vector"?p.scope:""));if(f.type==="batched-model"||f.type!=="model")return;const v=f.getModels();for(const b of v)b.upload(c.context)},raster:function(p,i,c){const f=i.getSource();if(!(f instanceof ul&&f.loaded()))return;const v=p.sourceLayer||f.rasterLayerIds&&f.rasterLayerIds[0];if(!v)return;const b=p.paint.get("raster-array-band")||f.getInitialBand(v);if(b==null)return;const w=i.getIds().map(k=>i.getTileByID(k));for(const k of w)k.updateNeeded(v,b)&&f.prepareTile(k,v,b)},"raster-particle":function(p,i,c){const f=i.getSource();if(!(f instanceof ul&&f.loaded()))return;const v=p.sourceLayer||f.rasterLayerIds&&f.rasterLayerIds[0];if(!v)return;const b=p.paint.get("raster-particle-array-band")||f.getInitialBand(v);if(b==null)return;const w=i.getIds().map(k=>i.getTileByID(k));for(const k of w)k.updateNeeded(v,b)&&f.prepareTile(k,v,b)}},Ha={fill:vm},Fd={fill:function(p,i,c,f){if(!c.layout||c.layout.get("fill-elevation-reference")==="none")return;const v=p.context.gl,b=new en(v.LEQUAL,en.ReadOnly,p.depthRangeFor3D),w=new $n({func:v.ALWAYS,mask:255},255,255,v.KEEP,v.KEEP,v.REPLACE),k=p.transform.getFreeCameraOptions().position,I=p.getOrCreateProgram("elevatedStructuresDepthReconstruct",{defines:["DEPTH_RECONSTRUCTION"]});for(const L of f){const O=i.getTile(L),N=O.getBucket(c);if(!N)continue;const F=N.elevatedStructures;if(!F||F.maskSegments.segments[0].primitiveLength===0)continue;const V=mp(L.toUnwrapped(),k),Z=p.translatePosMatrix(L.projMatrix,O,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor")),G=dp(Z,V,0,0,0);I.draw(p,v.TRIANGLES,b,w,or.disabled,An.disabled,G,c.id,F.vertexBuffer,F.indexBuffer,F.maskSegments,c.paint,p.transform.zoom)}}};class hu{constructor(i,c,f,v,b,w){this.context=new k1(i,c),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=b,this._timeStamp=s.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const k=["fill","line","symbol","circle","heatmap","fill-extrusion","building","raster","raster-particle","hillshade","model","background","sky"];for(const L of k)this._debugParams.enabledLayers[L]=!0;b.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),b.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),b.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),b.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),b.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),b.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const L of k)b.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],L);this.occlusionParams=new X0(b),this.setup(),this.numSublayers=is.maxUnderzooming+is.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new s.et,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new i1(this),this._wireframeDebugCache=new D1,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const I=new s.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new s.T(this.context,I,i.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=v,this.worldview=w}updateTerrain(i,c){const f=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(f||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Td(this,i));const v=this._terrain;this.transform.elevation=f?v:null,v.update(i,this.transform,c),this.transform.elevation&&!v.enabled&&(this.transform.elevation=null)}_updateFog(i){const c=i.fog;if(!c||this.transform.projection.name==="globe"||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[f,v]=c.getFovAdjustedRange(this.transform._fov);if(f>v)return void(this.transform.fogCullDistSq=null);const b=f+.78*(v-f);this.transform.fogCullDistSq=b*b}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(i){i&&!this._terrain&&(this._terrain=new Td(this,this.style)),this._forceTerrainMode=i}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(i,c){if(this.width=i*s.q.devicePixelRatio,this.height=c*s.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style.order)this.style._mergedLayers[f].resize()}setup(){const i=this.context,c=new s.ba;c.emplaceBack(0,0),c.emplaceBack(s.aj,0),c.emplaceBack(0,s.aj),c.emplaceBack(s.aj,s.aj),this.tileExtentBuffer=i.createVertexBuffer(c,s.bc.members),this.tileExtentSegments=s.bd.simpleSegment(0,0,4,2);const f=new s.ba;f.emplaceBack(0,0),f.emplaceBack(s.aj,0),f.emplaceBack(0,s.aj),f.emplaceBack(s.aj,s.aj),this.debugBuffer=i.createVertexBuffer(f,s.bc.members),this.debugSegments=s.bd.simpleSegment(0,0,4,5);const v=new s.ba;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(v,s.bc.members),this.viewportSegments=s.bd.simpleSegment(0,0,4,2);const b=new s.aZ;b.emplaceBack(0,0,0,0),b.emplaceBack(s.aj,0,s.aj,0),b.emplaceBack(0,s.aj,0,s.aj),b.emplaceBack(s.aj,s.aj,s.aj,s.aj),this.mercatorBoundsBuffer=i.createVertexBuffer(b,s.bf.members),this.mercatorBoundsSegments=s.bd.simpleSegment(0,0,4,2);const w=new s.a_;w.emplaceBack(0,1,2),w.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(w);const k=new s.bb;for(const L of[0,1,3,2,0])k.emplaceBack(L);this.debugIndexBuffer=i.createIndexBuffer(k),this.emptyTexture=new s.T(i,new s.r({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA8),this.identityMat=s.bz();const I=this.context.gl;this.stencilClearMode=new $n({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,i.TRIANGLES,en.disabled,this.stencilClearMode,or.disabled,An.disabled,dc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,c,f){if(!c||this.currentStencilSource===c.id||!i.isTileClipped()||!f||f.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const I of f)if(this._tileClippingMaskIDs[I.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=c.id;const v=this.context,b=v.gl;this.nextStencilID+f.length>256&&this.clearStencil(),v.setColorMode(or.disabled),v.setDepthMode(en.disabled);const w=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of f){const I=c.getTile(k),L=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:O,tileBoundsIndexBuffer:N,tileBoundsSegments:F}=this.getTileBoundsBuffers(I);w.draw(this,b.TRIANGLES,en.disabled,new $n({func:b.ALWAYS,mask:0},L,255,b.KEEP,b.KEEP,b.REPLACE),or.disabled,An.disabled,dc(k.projMatrix),"$clipping",O,N,F)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new $n({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const c=this.context.gl;return new $n({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,f=i.sort((w,k)=>k.overscaledZ-w.overscaledZ),v=f[f.length-1].overscaledZ,b=f[0].overscaledZ-v+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const w={};for(let k=0;k<b;k++)w[k+v]=new $n({func:c.GEQUAL,mask:255},k+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[w,f]}return[{[v]:$n.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new or([i.CONSTANT_COLOR,i.ONE,i.CONSTANT_COLOR,i.ONE],new s.am(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?or.unblended:or.alphaBlended}colorModeForDrapableLayerRenderPass(i){const c=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new or([c.ONE,c.ONE_MINUS_SRC_ALPHA,c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA],new s.am(0,0,0,i===void 0?0:i),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(i,c,f,v=!1){if(this.depthOcclusion)return new en(this.context.gl.GREATER,en.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!v)return en.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new en(f||this.context.gl.LEQUAL,c,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const i=this.context.gl,c=Math.ceil(this.width),f=Math.ceil(this.height),v=this.context.bindFramebuffer.get(),b=i.getParameter(i.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===c&&this.depthFBO.height===f||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),c!==0&&f!==0&&(this.depthFBO=new ym(this.context,c,f,!1,"texture"),this.depthTexture=new s.T(this.context,{width:c,height:f,data:null},i.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(v),i.bindTexture(i.TEXTURE_2D,b),this.depthFBO&&(i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),i.blitFramebuffer(0,0,c,f,0,0,c,f,i.DEPTH_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((i,c)=>i+c/this._fpsHistory.length,0))}render(i,c){const f=s.q.now();this._dt=f-this._timeStamp,this._timeStamp=f,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=i.map.repaint,this.style=i,this.options=c;const v=this.style._mergedLayers,b=!(!this.terrain||!this.terrain.enabled),w=()=>this.style._getOrder(b).filter(Ge=>{const st=v[Ge];return!(st.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[st.type]});let k=w(),I=!1,L=!1;for(const Ge of k){const st=v[Ge];st.type==="circle"&&(I=!0),st.type==="symbol"&&(st.hasInitialOcclusionOpacityProperties?L=!0:I=!0)}let O=k.map(Ge=>v[Ge]);const N=this.style._mergedSourceCaches;this.imageManager=i.imageManager,this.modelManager=i.modelManager,this.symbolFadeChange=i.placement.symbolFadeChange(s.q.now()),this.imageManager.beginFrame();let F=0,V=!1;for(const Ge in N){const st=N[Ge];st.used&&(st.prepare(this.context),st.getSource().usedInConflation&&++F)}let Z=!1;for(const Ge of O)Ge.isHidden(this.transform.zoom)||(Ge.type==="clip"&&(Z=!0),this.prepareLayer(Ge));const G={},Y={},ee={},ae={},ve={};for(const Ge in N){const st=N[Ge];G[Ge]=st.getVisibleCoordinates(),Y[Ge]=G[Ge].slice().reverse(),ee[Ge]=st.getVisibleCoordinates(!0).reverse(),ae[Ge]=st.getShadowCasterCoordinates(),ve[Ge]=st.sortCoordinatesByDistance(G[Ge])}const we=Ge=>{const st=this.style.getLayerSourceCache(Ge);return st&&st.used?st.getSource():null};if(F||Z||this._clippingActiveLastFrame){const Ge=[],st=[];let Fe=0;for(const gt of O)this.isSourceForClippingOrConflation(gt,we(gt))&&(Ge.push(gt),st.push(Fe)),Fe++;if(Ge&&(Z||Ge.length>1)||this._clippingActiveLastFrame){Z=!1;const gt=[];for(let nt=0;nt<Ge.length;nt++){const St=Ge[nt],Bt=st[nt],mt=this.style.getLayerSourceCache(St);if(!mt||!mt.used||!mt.getSource().usedInConflation&&St.type!=="clip")continue;let Ot=s.eu,nn=s.bQ.None;const rn=[];let Yt=!0;if(St.type==="clip"){Ot=Bt;for(const mn of St.layout.get("clip-layer-types"))nn|=mn==="model"?s.bQ.Model:mn==="symbol"?s.bQ.Symbol:s.bQ.FillExtrusion;for(const mn of St.layout.get("clip-layer-scope"))rn.push(mn);St.isHidden(this.transform.zoom)?Yt=!1:Z=!0}Yt&&gt.push({layer:St.fqid,cache:mt,order:Ot,clipMask:nn,clipScope:rn})}this.replacementSource.setSources(gt),V=!0}}this._clippingActiveLastFrame=Z,V||this.replacementSource.clear(),this.conflationActive=V,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Ge=0;Ge<O.length;Ge++){const st=O[Ge],Fe=st.cutoffRange();if(this.longestCutoffRange=Math.max(Fe,this.longestCutoffRange),Fe>0){const gt=we(st);gt&&(this.minCutoffZoom=Math.max(gt.minzoom,this.minCutoffZoom)),st.minzoom&&(this.minCutoffZoom=Math.max(st.minzoom,this.minCutoffZoom))}st.is3D(b)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Ge),this._lastOcclusionLayer=Ge)}const Pe=this.style&&this.style.fog;Pe?(this._fogVisible=Pe.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Pe.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(ee),this.opaquePassCutoff=0,k=w(),O=k.map(Ge=>v[Ge]));const Ee=this._shadowRenderer;if(Ee){Ee.updateShadowParameters(this.transform,this.style.directionalLight);for(const Ge in N)for(const st of G[Ge]){let Fe={min:0,max:0};this.terrain&&(Fe=this.terrain.getMinMaxForTile(st)||Fe),Ee.addShadowReceiver(st.toUnwrapped(),Fe.min,Fe.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.ev(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new uu(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const ke=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),Se=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(ke&&!this._snow&&(this._snow=new yi(this)),!ke&&this._snow&&(this._snow.destroy(),delete this._snow),Se&&!this._rain&&(this._rain=new L1(this)),!Se&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!ei.has(this.context.gl))return;this.renderPass="offscreen";for(const Ge of O){const st=i.getLayerSourceCache(Ge);if(!Ge.hasOffscreenPass()||Ge.isHidden(this.transform.zoom))continue;const Fe=st?Y[st.id]:void 0;(Ge.type==="custom"||Ge.type==="raster"||Ge.type==="raster-particle"||Ge.isSky()||Fe&&Fe.length)&&this.renderLayer(this,st,Ge,Fe)}this.depthRangeFor3D=[0,1-(O.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,ae)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Ae=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),De=(()=>{if(c.showOverdrawInspector)return s.am.black;const Ge=this.style.fog;if(Ge&&this.transform.projection.supportsFog){const st=this.style.getLut(Ge.scope);if(!Ae){const Fe=Ge.properties.get("color-use-theme")==="none",gt=Ge.properties.get("color").toNonPremultipliedRenderColor(Fe?null:st).toArray01();return new s.am(...gt)}if(Ae){const Fe=Ge.properties.get("space-color-use-theme")==="none",gt=Ge.properties.get("space-color").toNonPremultipliedRenderColor(Fe?null:st).toArray01();return new s.am(...gt)}}return s.am.transparent})();if(this.context.clear({color:De,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ae&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const Ge=O[this.currentLayer],st=i.getLayerSourceCache(Ge);if(Ge.isSky())continue;const Fe=st?(Ge.is3D(b)?ve:Y)[st.id]:void 0;this._renderTileClippingMasks(Ge,st,Fe),this.renderLayer(this,st,Ge,Fe)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ae&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||s.ah(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const Ge=O[this.currentLayer],st=i.getLayerSourceCache(Ge);Ge.isSky()&&this.renderLayer(this,st,Ge,st?Y[st.id]:void 0)}function Ze(Ge,st){let Fe;return st&&(Fe=(Ge.type==="symbol"?ee:Ge.is3D(b)?ve:Y)[st.id]),Fe}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<k.length;){const Ge=O[this.currentLayer];if(Ge.type==="raster"||Ge.type==="raster-particle"){const st=i.getLayerSourceCache(Ge);this.renderLayer(this,st,Ge,Ze(Ge,st))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Ye=0;Ee&&(Ye=Ee.getShadowCastingLayerCount());let ht=!1,pt=-1;for(let Ge=0;Ge<k.length;++Ge){const st=O[Ge];st.isHidden(this.transform.zoom)||st.is3D(b)&&(pt=Ge)}L&&pt===-1&&(I=!0);let It=!1;for(;this.currentLayer<k.length;){const Ge=O[this.currentLayer],st=i.getLayerSourceCache(Ge);if(Ge.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Ge)){if(Ge.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!It&&Ge.is3D(b)&&!b){const Fe=this.currentLayer,gt=nt=>{for(this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){const St=O[this.currentLayer];if(Ha[St.type]){const Bt=this.style.getLayerSourceCache(St);Ha[St.type](this,Bt,St,Ze(St,Bt),nt)}}};gt("initialize"),gt("reset"),this.currentLayer=Fe,It=!0}if(I&&!ht&&this.terrain&&!this.transform.isOrthographic&&(ht=!0,this.blitDepth()),L&&pt!==-1&&this.currentLayer===pt+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(Ge,st,st?G[st.id]:void 0),this.renderLayer(this,st,Ge,Ze(Ge,st)),!this.terrain&&Ee&&Ye>0&&Ge.hasShadowPass()&&--Ye==0){{this.clearStencil();const Fe=this.currentLayer;for(this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){const gt=O[this.currentLayer];if(Fd[gt.type]){const nt=this.style.getLayerSourceCache(gt);Fd[gt.type](this,nt,gt,Ze(gt,nt))}}this.currentLayer=Fe}if(Ee.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer){const Fe=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Fe;this.currentLayer++){const gt=O[this.currentLayer];if(!gt.hasLightBeamPass())continue;const nt=i.getLayerSourceCache(gt);this.renderLayer(this,nt,gt,nt?Y[nt.id]:void 0)}this.currentLayer=Fe,this.renderPass="translucent"}}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const Fe=this.currentLayer;this.depthOcclusion=!0;for(const gt of this.layersWithOcclusionOpacity){this.currentLayer=gt;const nt=O[this.currentLayer],St=i.getLayerSourceCache(nt),Bt=St?Y[St.id]:void 0;this.terrain||this._renderTileClippingMasks(nt,St,St?G[St.id]:void 0),this.renderLayer(this,St,nt,Bt)}this.depthOcclusion=!1,this.currentLayer=Fe,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Ge=null;O.forEach(st=>{const Fe=i.getLayerSourceCache(st);Fe&&!st.isHidden(this.transform.zoom)&&Fe.getVisibleCoordinates().length&&(!Ge||Ge.getSource().maxzoom<Fe.getSource().maxzoom)&&(Ge=Fe)}),Ge&&this.options.showTileBoundaries&&Ua(this,Ge,Ge.getVisibleCoordinates(),s.am.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Ua(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new s.am(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Ge){const st=Ge.transform.padding;gp(Ge,Ge.transform.height-(st.top||0),3,P1),gp(Ge,st.bottom||0,3,A1),yp(Ge,st.left||0,3,ds),yp(Ge,Ge.transform.width-(st.right||0),3,xm);const Fe=Ge.transform.centerPoint;(function(gt,nt,St,Bt){cu(gt,nt-1,St-10,2,20,Bt),cu(gt,nt-10,St-1,20,2,Bt)})(Ge,Fe.x,Ge.transform.height-Fe.y,Yo)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),V||(this.conflationActive=!1)}prepareLayer(i){this.gpuTimingStart(i);const{unsupportedLayers:c}=this.transform.projection,f=!c||!c.includes(i.type);if(Tm[i.type]&&(f||this.terrain&&i.type==="custom")){const v=this.style.getLayerSourceCache(i);Tm[i.type](i,v,this)}this.gpuTimingEnd()}renderLayer(i,c,f,v){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="sky"||f.type==="custom"||f.type==="model"||f.type==="raster"||f.type==="raster-particle"||v&&v.length)&&(this.id=f.id,this.gpuTimingStart(f),i.transform.projection.unsupportedLayers&&i.transform.projection.unsupportedLayers.includes(f.type)&&(!i.terrain||f.type!=="custom")||f.type==="clip"||Sr[f.type](i,c,f,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery,f=this.context.gl;let v=this.gpuTimers[i.id];v||(v=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:f.createQuery()}),v.calls++,f.beginQuery(c.TIME_ELAPSED_EXT,v.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const i=this.context.extTimerQuery,c=this.context.gl,f=c.createQuery();this.deferredRenderGpuTimeQueries.push(f),c.beginQuery(i.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}collectDeferredRenderGpuQueries(){const i=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],i}queryGpuTimers(i){const c={};for(const f in i){const v=i[f],b=this.context.extTimerQuery,w=b.getQueryParameter(v.query,this.context.gl.QUERY_RESULT)/1e6;b.deleteQueryEXT(v.query),c[f]=w}return c}queryGpuTimeDeferredRender(i){if(!this.options.gpuTimingDeferredRender)return 0;const c=this.context.gl;let f=0;for(const v of i)f+=c.getQueryParameter(v,c.QUERY_RESULT)/1e6,c.deleteQuery(v);return f}translatePosMatrix(i,c,f,v,b){if(!f[0]&&!f[1])return i;const w=b?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(w){const L=Math.sin(w),O=Math.cos(w);f=[f[0]*O-f[1]*L,f[0]*L+f[1]*O]}const k=[b?f[0]:s.aw(c,f[0],this.transform.zoom),b?f[1]:s.aw(c,f[1],this.transform.zoom),0],I=new Float32Array(16);return s.bo(I,i,k),I}saveTileTexture(i){const c=i.size[0],f=this._tileTextures[c];f?f.push(i):this._tileTextures[c]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(i,c,f){const v=f===void 0?this.terrain&&this.terrain.renderingToTexture:f,b=[];return this.style&&this.style.enable3dLights()&&(i==="globeRaster"||i==="terrainRaster"?(b.push("LIGHTING_3D_MODE"),b.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):v||b.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||b.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(b.push("TERRAIN"),this.linearFloatFilteringSupported()&&b.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&b.push("GLOBE"),!this._fogVisible||v||c!==void 0&&!c||b.push("FOG","FOG_DITHERING"),v&&b.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&b.push("OVERDRAW_INSPECTOR"),b}getOrCreateProgram(i,c){this.cache=this.cache||{};const f=c&&c.defines||[],v=c&&c.config,b=this.currentGlobalDefines(i,c&&c.overrideFog,c&&c.overrideRtt).concat(f),w=up.cacheKey(Yh[i],i,b,v);return this.cache[w]||(this.cache[w]=new up(this.context,i,Yh[i],v,F0[i],b)),this.cache[w]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(i,c){if(this.style.enable3dLights()){const f=this.style.directionalLight,v=this.style.ambientLight;if(f&&v){const b=((w,k,I)=>{const L=w.properties.get("direction"),O=w.properties.get("color-use-theme")==="none",N=w.properties.get("color").toNonPremultipliedRenderColor(O?null:I.getLut(w.scope)).toArray01(),F=w.properties.get("intensity"),V=k.properties.get("color-use-theme")==="none",Z=k.properties.get("color").toNonPremultipliedRenderColor(V?null:I.getLut(k.scope)).toArray01(),G=k.properties.get("intensity"),Y=[L.x,L.y,L.z],ee=s.dw(Z,G),ae=s.dw(N,F);return{u_lighting_ambient_color:ee,u_lighting_directional_dir:Y,u_lighting_directional_color:ae,u_ground_radiance:cp(Y,ae,ee)}})(f,v,this.style);c.setLightsUniformValues(i,b)}}}uploadCommonUniforms(i,c,f,v,b){if(this.uploadCommonLightUniforms(i,c),this.terrain&&this.terrain.renderingToTexture)return;const w=this.style.fog;if(w){const k=w.getOpacity(this.transform.pitch),I=((L,O,N,F,V,Z,G,Y,ee,ae,ve,we)=>{const Pe=L.transform,Ee=O.properties.get("color-use-theme")==="none",ke=O.properties.get("color").toNonPremultipliedRenderColor(Ee?null:L.style.getLut(O.scope)).toArray01();ke[3]=F;const Se=L.frameCounter/1e3%1,[Ae,De]=O.properties.get("vertical-range");return{u_fog_matrix:N?Pe.calculateFogTileMatrix(N):we||L.identityMat,u_fog_range:O.getFovAdjustedRange(Pe._fov),u_fog_color:ke,u_fog_horizon_blend:O.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Ae,De),De],u_fog_temporal_offset:Se,u_frustum_tl:V,u_frustum_tr:Z,u_frustum_br:G,u_frustum_bl:Y,u_globe_pos:ee,u_globe_radius:ae,u_viewport:ve,u_globe_transition:s.ah(Pe.zoom),u_is_globe:+(Pe.projection.name==="globe")}})(this,w,f,k,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.q.devicePixelRatio,this.transform.height*s.q.devicePixelRatio],v);c.setFogUniformValues(i,I)}b&&c.setCutoffUniformValues(i,b.uniformValues)}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){const i=this.canvasCopy();i&&(this.frameCopies.push(i),this.tileLoaded=!1)}canvasCopy(){const i=this.context.gl,c=i.createTexture();return i.bindTexture(i.TEXTURE_2D,c),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&i.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const i=this._backgroundTiles,c=this._backgroundTiles={},f=this.transform.coveringTiles({tileSize:512});for(const v of f)c[v.key]=i[v.key]||new Ql(v,512,this.transform.tileZoom,this,void 0,this.worldview);return c}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(i,c){return!(!i.is3D(!(!this.terrain||!this.terrain.enabled))||i.type!=="clip"&&(i.minzoom&&i.minzoom>this.transform.zoom||(this.style._clipLayerPresent||i.sourceLayer!=="building")&&(!c||c.type!=="batched-model")))}isTileAffectedByFog(i){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let c=this._cachedTileFogOpacities[i.key];return c||(this._cachedTileFogOpacities[i.key]=c=this.style.fog.getOpacityForTile(i)),c[0]>=it||c[1]>=it}setupDepthForOcclusion(i,c,f){const v=this.context,b=v.gl,w=!!f;var k;f||(f={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),v.activeTexture.set(b.TEXTURE3),i&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),f.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],f.u_depth_range_unpack=[2/((k=this.depthRangeFor3D)[1]-k[0]),-1-2*k[0]/(k[1]-k[0])],f.u_occluder_half_size=.5*this.occlusionParams.occluderSize,f.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),v.activeTexture.set(b.TEXTURE0),w||c.setTerrainUniformValues(v,f)}}function Sl(p,i){let c=!1,f=null;const v=()=>{f=null,c&&(p(),f=setTimeout(v,i),c=!1)};return()=>(c=!0,f||v(),f)}class Em{constructor(i){this._hashName=i&&encodeURIComponent(i),s.aV(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Sl(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const i=this._map;if(!i)return"";const c=wp(i);if(this._hashName){const f=this._hashName;let v=!1;const b=location.hash.slice(1).split("&").map(w=>{const k=w.split("=")[0];return k===f?(v=!0,`${k}=${c}`):w}).filter(w=>w);return v||b.push(`${f}=${c}`),`#${b.join("&")}`}return`#${c}`}_getCurrentHash(){const i=location.hash.replace("#","");if(this._hashName){let c;return i.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(c=f)}),(c&&c[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(f=>isNaN(Number(f)))){const f=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(c[3]||0):i.getBearing();return i.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:f,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function wp(p,i){const c=p.getCenter(),f=Math.round(100*p.getZoom())/100,v=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,v),w=Math.round(c.lng*b)/b,k=Math.round(c.lat*b)/b,I=p.getBearing(),L=p.getPitch();let O=i?`/${w}/${k}/${f}`:`${f}/${k}/${w}`;return(I||L)&&(O+="/"+Math.round(10*I)/10),L&&(O+=`/${Math.round(L)}`),O}const pu={linearity:.3,easing:s.ew(0,0,.3,1)},Im=s.h({deceleration:2500,maxSpeed:1400},pu),ga=s.h({deceleration:20,maxSpeed:1400},pu),Cl=s.h({deceleration:1e3,maxSpeed:360},pu),$d=s.h({deceleration:1e3,maxSpeed:90},pu);class Sp{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.q.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=s.q.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const c={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const b=mu(c.pan.mag(),f,s.h({},Im,i||{}));v.offset=c.pan.mult(b.amount/c.pan.mag()),v.center=this._map.transform.center,fu(v,b)}if(c.zoom){const b=mu(c.zoom,f,ga);v.zoom=this._map.transform.zoom+b.amount,fu(v,b)}if(c.bearing){const b=mu(c.bearing,f,Cl);v.bearing=this._map.transform.bearing+s.ay(b.amount,-179,179),fu(v,b)}if(c.pitch){const b=mu(c.pitch,f,$d);v.pitch=this._map.transform.pitch+b.amount,fu(v,b)}if(v.zoom||v.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;v.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function fu(p,i){(!p.duration||p.duration<i.duration)&&(p.duration=i.duration,p.easing=i.easing)}function mu(p,i,c){const{maxSpeed:f,linearity:v,deceleration:b}=c,w=s.ay(p*v/(i/1e3),-f,f),k=Math.abs(w)/(b*v);return{easing:c.easing,duration:1e3*k,amount:w*(k/2)}}class Eo extends s.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f,v={}){const b=he(c.getCanvasContainer(),f),w=c.unproject(b);super(i,s.h({point:b,lngLat:w,originalEvent:f},v)),this._defaultPrevented=!1,this.target=c}}class gu extends s.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f){const v=i==="touchend"?f.changedTouches:f.touches,b=Ce(c.getCanvasContainer(),v),w=b.map(I=>c.unproject(I)),k=b.reduce((I,L,O,N)=>I.add(L.div(N.length)),new s.P(0,0));super(i,{points:b,point:k,lngLats:w,lngLat:c.unproject(k),originalEvent:f}),this._defaultPrevented=!1}}class kl extends s.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c){super("wheel",{originalEvent:c}),this._defaultPrevented=!1}}class Pm{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new kl(this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new Eo(i.type,this._map,i))}mouseup(i){this._map.fire(new Eo(i.type,this._map,i))}preclick(i){const c=s.h({},i);c.type="preclick",this._map.fire(new Eo(c.type,this._map,c))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(i),this._map.fire(new Eo(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new Eo(i.type,this._map,i))}mouseover(i){this._map.fire(new Eo(i.type,this._map,i))}mouseout(i){this._map.fire(new Eo(i.type,this._map,i))}touchstart(i){return this._firePreventable(new gu(i.type,this._map,i))}touchmove(i){this._map.fire(new gu(i.type,this._map,i))}touchend(i){this._map.fire(new gu(i.type,this._map,i))}touchcancel(i){this._map.fire(new gu(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Cp{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new Eo(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Eo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new Eo(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Am{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(re(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const f=c,v=this._startPos,b=this._lastPos;if(!v||!b||b.equals(f)||!this._box&&f.dist(v)<this._clickTolerance)return;this._lastPos=f,this._box||(this._box=oe("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const w=Math.min(v.x,f.x),k=Math.max(v.x,f.x),I=Math.min(v.y,f.y),L=Math.max(v.y,f.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${w}px,${I}px)`,this._box.style.width=k-w+"px",this._box.style.height=L-I+"px")})}mouseupWindow(i,c){if(!this._active)return;const f=this._startPos,v=c;if(f&&i.button===0){if(this.reset(),Me(),f.x!==v.x||f.y!==v.y)return this._map.fire(new s.A("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(f,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ze(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new s.A(i,{originalEvent:c}))}}function Nd(p,i){const c={};for(let f=0;f<p.length;f++)c[p[f].identifier]=i[f];return c}class Io{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,c,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(v){const b=new s.P(0,0);for(const w of v)b._add(w);return b.div(v.length)}(c),this.touches=Nd(f,c)))}touchmove(i,c,f){if(this.aborted||!this.centroid)return;const v=Nd(f,c);for(const b in this.touches){const w=v[b];(!w||w.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(i,c,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Vd{constructor(i){this.singleTap=new Io(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,c,f){this.singleTap.touchstart(i,c,f)}touchmove(i,c,f){this.singleTap.touchmove(i,c,f)}touchend(i,c,f){const v=this.singleTap.touchend(i,c,f);if(v){const b=i.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(v)<30;if(b&&w||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Rm{constructor(){this._zoomIn=new Vd({numTouches:1,numTaps:2}),this._zoomOut=new Vd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,f){this._zoomIn.touchstart(i,c,f),this._zoomOut.touchstart(i,c,f)}touchmove(i,c,f){this._zoomIn.touchmove(i,c,f),this._zoomOut.touchmove(i,c,f)}touchend(i,c,f){const v=this._zoomIn.touchend(i,c,f),b=this._zoomOut.touchend(i,c,f);return v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:w.getZoom()+1,around:w.unproject(v)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:w.getZoom()-1,around:w.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Mm={0:1,2:2},Tl={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class jd{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,c){return!1}_move(i,c){return{}}mousedown(i,c){if(this._lastPoint)return;const f=$e(i);this._correctButton(i,f)&&(this._lastPoint=c,this._eventButton=f)}mousemoveWindow(i,c){const f=this._lastPoint;if(f){if(i.preventDefault(),this._eventButton!=null&&function(v,b){const w=Mm[b];return v.buttons===void 0||(v.buttons&w)!==w}(i,this._eventButton))this.reset();else if(this._moved||!(c.dist(f)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(f,c)}}mouseupWindow(i){this._lastPoint&&$e(i)===this._eventButton&&(this._moved&&Me(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dm extends jd{mousedown(i,c){super.mousedown(i,c),this._lastPoint&&(this._active=!0)}_correctButton(i,c){return c===0&&!i.ctrlKey}_move(i,c){return{around:c,panDelta:c.sub(i)}}}class kp extends jd{constructor(i){super(i),this._pitchRotateKey=i.pitchRotateKey?Tl[i.pitchRotateKey]:void 0}_correctButton(i,c){return this._pitchRotateKey?c===0&&i[this._pitchRotateKey]:c===0&&i.ctrlKey||c===2}_move(i,c){const f=.8*(c.x-i.x);if(f)return this._active=!0,{bearingDelta:f}}contextmenu(i){this._pitchRotateKey||i.preventDefault()}}class _c extends jd{constructor(i){super(i),this._pitchRotateKey=i.pitchRotateKey?Tl[i.pitchRotateKey]:void 0}_correctButton(i,c){return this._pitchRotateKey?c===0&&i[this._pitchRotateKey]:c===0&&i.ctrlKey||c===2}_move(i,c){const f=-.5*(c.y-i.y);if(f)return this._active=!0,{pitchDelta:f}}contextmenu(i){this._pitchRotateKey||i.preventDefault()}}class Lm{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),s.aV(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}touchstart(i,c,f){return this._calculateTransform(i,c,f)}touchmove(i,c,f){if(this._active&&!(f.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(f.length===1&&!s.ex())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.cancelable&&i.preventDefault(),this._calculateTransform(i,c,f)}}touchend(i,c,f){this._calculateTransform(i,c,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,f){f.length>0&&(this._active=!0);const v=Nd(f,c),b=new s.P(0,0),w=new s.P(0,0);let k=0;for(const L in v){const O=v[L],N=this._touches[L];N&&(b._add(O),w._add(O.sub(N)),k++,v[L]=O)}if(this._touches=v,k<this._minTouches||!w.mag())return;const I=w.div(k);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(k),panDelta:I}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=oe("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Ud{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,c,f){return{}}touchstart(i,c,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,f){const v=this._firstTwoTouches;if(!v)return;i.preventDefault();const[b,w]=v,k=yu(f,c,b),I=yu(f,c,w);if(!k||!I)return;const L=this._aroundCenter?null:k.add(I).div(2);return this._move([k,I],L,i)}touchend(i,c,f){if(!this._firstTwoTouches)return;const[v,b]=this._firstTwoTouches,w=yu(f,c,v),k=yu(f,c,b);w&&k||(this._active&&Me(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function yu(p,i,c){for(let f=0;f<p.length;f++)if(p[f].identifier===c)return i[f]}function qd(p,i){return Math.log(p/i)/Math.LN2}class Om extends Ud{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(qd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qd(this._distance,f),pinchAround:c}}}function Tp(p,i){return 180*p.angleWith(i)/Math.PI}class J0 extends Ud{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const f=this._vector;if(this._vector=i[0].sub(i[1]),f&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Tp(this._vector,f),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,f=this._startVector;if(!f)return!1;const v=Tp(i,f);return Math.abs(v)<c}}function Ep(p){return Math.abs(p.y)>Math.abs(p.x)}class Q0 extends Ud{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,Ep(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,f){const v=this._lastPoints;if(!v)return;const b=i[0].sub(v[0]),w=i[1].sub(v[1]);return this._map._cooperativeGestures&&!s.ex()&&f.touches.length<3||(this._valid=this.gestureBeginsVertically(b,w,f.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(b.y+w.y)/2*-.5})}gestureBeginsVertically(i,c,f){if(this._valid!==void 0)return this._valid;const v=i.mag()>=2,b=c.mag()>=2;if(!v&&!b)return;if(!v||!b)return this._firstMove==null&&(this._firstMove=f),f-this._firstMove<100&&void 0;const w=i.y>0==c.y>0;return Ep(i)&&Ep(c)&&w}}const ev={panStep:100,bearingStep:15,pitchStep:10};class tv{constructor(){const i=ev;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,f=0,v=0,b=0,w=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),w=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(f=0,v=0),{cameraAnimation:k=>{const I=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:nv,zoom:c?Math.round(I)+c*(i.shiftKey?2:1):I,bearing:k.getBearing()+f*this._bearingStep,pitch:k.getPitch()+v*this._pitchStep,offset:[-b*this._panStep,-w*this._panStep],center:k.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function nv(p){return p*(2-p)}const zm=4.000244140625,rv=1/450;class iv{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._handler=c,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=rv,s.aV(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||s.ex()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=s.q.now(),v=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,c!==0&&c%zm==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=window.setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=he(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;this._type==="wheel"&&i.projection.wrap&&(i._center.lng>=180||i._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const c=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>zm?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&O!==0&&(O=1/O);const N=c(),F=Math.pow(2,N),V=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):F;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(V*O))),this._type==="wheel"&&(this._startZoom=N,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const f=typeof this._targetZoom=="number"?this._targetZoom:c(),v=this._startZoom,b=this._easing;let w,k=!1;if(this._type==="wheel"&&v&&b){const L=Math.min((s.q.now()-this._lastWheelEventTime)/200,1),O=b(L);w=s.ai(v,f,O),L<1?this._frameId||(this._frameId=!0):k=!0}else w=f,k=!0;this._active=!0,k&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let I=w-c();return I*this._lastDelta<0&&(I=0),{noInertia:!0,needsRenderFrame:!k,zoomDelta:I,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=s.ey;if(this._prevEase){const f=this._prevEase,v=(s.q.now()-f.start)/f.duration,b=f.easing(v+.01)-f.easing(v),w=.27/Math.sqrt(b*b+1e-4)*.01,k=Math.sqrt(.0729-w*w);c=s.ew(w,k,.25,1)}return this._prevEase={start:s.q.now(),duration:i,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=oe("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class ov{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class sv{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,c){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:f.getZoom()+(i.shiftKey?-1:1),around:f.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class av{constructor(){this._tap=new Vd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,c,f){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=c[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(i,c,f))}touchmove(i,c,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const v=c[0],b=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,c,f)}touchend(i,c,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(i,c,f)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lv{constructor(i,c,f){this._el=i,this._mousePan=c,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class O1{constructor(i,c,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class z1{constructor(i,c,f,v){this._el=i,this._touchZoom=c,this._touchRotate=f,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ip=p=>p.zoom||p.drag||p.pitch||p.rotate;class zi extends s.A{}class cv{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,c){const f=s.at([],c,i);this.radius=s.ae(f[2]<0?s.eA([],f,this.constants):[f[0],f[1],0])}projectRay(i){s.eA(i,i,this.constants),s.au(i,i),s.eB(i,i,this.constants);const c=s.bY([],i,this.radius);if(c[2]>0){const f=s.bY([],[0,0,1],s.bG(c,[0,0,1])),v=s.bY([],s.au([],[c[0],c[1],0]),this.radius),b=s.cV([],c,s.bY([],s.at([],s.cV([],v,f),c),2));c[0]=b[0],c[1]=b[1]}return c}}function Pp(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Bm{constructor(i,c){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Sp(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new cv,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),s.aV(["handleEvent","handleWindowEvent"],this);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,b,w]of this._listeners){const k=v===document?this.handleWindowEvent:this.handleEvent;v.addEventListener(b,k,w)}}destroy(){for(const[i,c,f]of this._listeners){const v=i===document?this.handleWindowEvent:this.handleEvent;i.removeEventListener(c,v,f)}}_addDefaultHandlers(i){const c=this._map,f=c.getCanvasContainer();this._add("mapEvent",new Pm(c,i));const v=c.boxZoom=new Am(c,i);this._add("boxZoom",v);const b=new Rm,w=new sv;c.doubleClickZoom=new ov(w,b),this._add("tapZoom",b),this._add("clickZoom",w);const k=new av;this._add("tapDragZoom",k);const I=c.touchPitch=new Q0(c);this._add("touchPitch",I);const L=new kp(i),O=new _c(i);c.dragRotate=new O1(i,L,O),this._add("mouseRotate",L,["mousePitch"]),this._add("mousePitch",O,["mouseRotate"]);const N=new Dm(i),F=new Lm(c,i);c.dragPan=new lv(f,N,F),this._add("mousePan",N),this._add("touchPan",F,["touchZoom","touchRotate"]);const V=new J0,Z=new Om;c.touchZoomRotate=new z1(f,Z,V,k),this._add("touchRotate",V,["touchPan","touchZoom"]),this._add("touchZoom",Z,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Cp(c));const G=c.scrollZoom=new iv(c,this);this._add("scrollZoom",G,["mousePan"]);const Y=c.keyboard=new tv;this._add("keyboard",Y);for(const ee of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[ee]&&c[ee].enable(i[ee])}_add(i,c,f){this._handlers.push({handlerName:i,handler:c,allowed:f}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ip(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(i,c,f){for(const v in i)if(v!==f&&(!c||c.indexOf(v)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const c=[];for(const f of i)this._el.contains(f.target)&&c.push(f);return c}handleEvent(i,c){this._updatingCamera=!0;const f=i.type==="renderFrame",v=f?void 0:i,b={needsRenderFrame:!1},w={},k={},I=i.touches?this._getMapTouches(i.touches):void 0,L=I?Ce(this._el,I):f?void 0:he(this._el,i);for(const{handlerName:F,handler:V,allowed:Z}of this._handlers){if(!V.isEnabled())continue;let G;this._blockedByActive(k,Z,F)?V.reset():V[c||i.type]&&(G=V[c||i.type](i,L,I),this.mergeHandlerResult(b,w,G,F,v),G&&G.needsRenderFrame&&this._triggerRenderFrame()),(G||V.isActive())&&(k[F]=V)}const O={};for(const F in this._previousActiveHandlers)k[F]||(O[F]=v);this._previousActiveHandlers=k,(Object.keys(O).length||Pp(b))&&(this._changes.push([b,w,O]),this._triggerRenderFrame()),(Object.keys(k).length||Pp(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:N}=b;N&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],N(this._map))}mergeHandlerResult(i,c,f,v,b){if(!f)return;s.h(i,f);const w={handlerName:v,originalEvent:f.originalEvent||b};f.zoomDelta!==void 0&&(c.zoom=w),f.panDelta!==void 0&&(c.drag=w),f.pitchDelta!==void 0&&(c.pitch=w),f.bearingDelta!==void 0&&(c.rotate=w)}_applyChanges(){const i={},c={},f={};for(const[v,b,w]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new s.P(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(i.around=v.around),v.aroundCoord!==void 0&&(i.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),s.h(c,b),s.h(f,w);this._updateMapTransform(i,c,f),this._changes=[]}_updateMapTransform(i,c,f){const v=this._map,b=v.transform,w=ae=>[ae.x,ae.y,ae.z];if((ae=>{const ve=this._eventsInProgress.drag;return ve&&!this._handlersById[ve.handlerName].isActive()})()&&!Pp(i)){const ae=b.zoom;b.cameraElevationReference="sea",this._originalZoom!=null&&b._orthographicProjectionAtLowPitch&&b.projection.name!=="globe"&&b.pitch===0?(b.cameraElevationReference="ground",b.zoom=this._originalZoom):(b.recenterOnTerrain(),b.cameraElevationReference="ground"),ae!==b.zoom&&this._map._update(!0)}if(b._isCameraConstrained&&v._stop(!0),!Pp(i))return void this._fireEvents(c,f,!0);let{panDelta:k,zoomDelta:I,bearingDelta:L,pitchDelta:O,around:N,aroundCoord:F,pinchAround:V}=i;b._isCameraConstrained&&(I>0&&(I=0),b._isCameraConstrained=!1),V!==void 0&&(N=V),(I||(ae=>c[ae]&&!this._eventsInProgress[ae])("drag"))&&N&&(this._dragOrigin=w(b.pointCoordinate3D(N)),this._originalZoom=b.zoom,this._trackingEllipsoid.setup(b._camera.position,this._dragOrigin)),b.cameraElevationReference="sea",v._stop(!0),N=N||v.transform.centerPoint,L&&(b.bearing+=L),O&&(b.pitch+=O),b._updateCameraState();const Z=[0,0,0];if(k)if(b.projection.name==="mercator"){const ae=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(N).dir),ve=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(N.sub(k)).dir);Z[0]=ve[0]-ae[0],Z[1]=ve[1]-ae[1]}else{const ae=b.pointCoordinate(N);if(b.projection.name==="globe"){k=k.rotate(-b.angle);const ve=b._pixelsPerMercatorPixel/b.worldSize;Z[0]=-k.x*s.ez(s.aY(ae.y))*ve,Z[1]=-k.y*s.ez(b.center.lat)*ve}else{const ve=b.pointCoordinate(N.sub(k));ae&&ve&&(Z[0]=ve.x-ae.x,Z[1]=ve.y-ae.y)}}const G=b.zoom,Y=[0,0,0];if(I){const ae=w(F||b.pointCoordinate3D(N)),ve={dir:s.au([],s.at([],ae,b._camera.position))};if(ve.dir[2]<0){const we=b.zoomDeltaToMovement(ae,I);s.bY(Y,ve.dir,we)}}const ee=s.cV(Z,Z,Y);b._translateCameraConstrained(ee),I&&Math.abs(b.zoom-G)>1e-4&&b.recenterOnTerrain(),b.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,f,!0)}_fireEvents(i,c,f){const v=Ip(this._eventsInProgress),b=Ip(i),w={};for(const O in i){const{originalEvent:N}=i[O];this._eventsInProgress[O]||(w[`${O}start`]=N),this._eventsInProgress[O]=i[O]}!v&&b&&this._fireEvent("movestart",b.originalEvent);for(const O in w)this._fireEvent(O,w[O]);b&&this._fireEvent("move",b.originalEvent);for(const O in i){const{originalEvent:N}=i[O];this._fireEvent(O,N)}const k={};let I;for(const O in this._eventsInProgress){const{handlerName:N,originalEvent:F}=this._eventsInProgress[O];this._handlersById[N].isActive()||(delete this._eventsInProgress[O],I=c[N]||F,k[`${O}end`]=I)}for(const O in k)this._fireEvent(O,k[O]);const L=Ip(this._eventsInProgress);if(f&&(v||b)&&!L){this._updatingCamera=!0;const O=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=F=>F!==0&&-this._bearingSnap<F&&F<this._bearingSnap;O?(N(O.bearing||this._map.getBearing())&&(O.bearing=0),this._map.easeTo(O,{originalEvent:I})):(this._map.fire(new s.A("moveend",{originalEvent:I})),N(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new s.A(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new zi("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const uv="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Hd extends s.E{constructor(i,c){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this._respectPrefersReducedMotion=c.respectPrefersReducedMotion!==!1,s.aV(["_renderFrameCallback"],this)}getCenter(){return new s.cd(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,f){return i=s.P.convert(i).mult(-1),this.panTo(this.transform.center,s.h({offset:i},c),f)}panTo(i,c,f){return this.easeTo(s.h({center:i},c),f)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,f){return this.easeTo(s.h({zoom:i},c),f)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,f){return this.easeTo(s.h({bearing:i},c),f)}resetNorth(i,c){return this.rotateTo(0,s.h({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(s.h({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=s.aG.convert(i);const f=c&&c.bearing||0,v=c&&c.pitch||0,b=i.getNorthWest(),w=i.getSouthEast();return this._cameraForBounds(this.transform,b,w,f,v,c)}_extendPadding(i){const c={top:0,right:0,bottom:0,left:0};return i==null?s.h({},c,this.transform.padding):typeof i=="number"?{top:i,bottom:i,right:i,left:i}:s.h({},c,i)}_extendCameraOptions(i){return(i=s.h({offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding=this._extendPadding(i.padding),i}_minimumAABBFrustumDistance(i,c){const f=c.max[0]-c.min[0],v=c.max[1]-c.min[1];return f/v>i.aspect?f/(2*Math.tan(.5*i.fovX)*i.aspect):v/(2*Math.tan(.5*i.fovY)*i.aspect)}_cameraForBoundsOnGlobe(i,c,f,v,b,w){const k=i.clone(),I=this._extendCameraOptions(w);k.bearing=v,k.pitch=b;const L=s.cd.convert(c),O=s.cd.convert(f),N=.5*(L.lat+O.lat),F=.5*(L.lng+O.lng),V=s.eC(N,F),Z=s.au([],V),G=s.au([],s.bF([],Z,[0,1,0])),Y=s.bF([],G,Z),ee=[G[0],G[1],G[2],0,Y[0],Y[1],Y[2],0,Z[0],Z[1],Z[2],0,0,0,0,1],ae=[V,s.eC(L.lat,L.lng),s.eC(O.lat,L.lng),s.eC(O.lat,O.lng),s.eC(L.lat,O.lng),s.eC(N,L.lng),s.eC(N,O.lng),s.eC(L.lat,F),s.eC(O.lat,F)];let ve=s.cW.fromPoints(ae.map(nt=>[s.bG(G,nt),s.bG(Y,nt),s.bG(Z,nt)]));const we=s.ad([],ve.center,ee);s.eD(we)===0&&s.eE(we,0,0,1),s.au(we,we),s.bY(we,we,s.aB),k.center=s.eF(we);const Pe=k.getWorldToCameraMatrix(),Ee=s.bi(new Float64Array(16),Pe);ve=s.cW.applyTransform(ve,s.az([],Pe,ee));const ke=this._extendAABB(ve,k,I,v);if(!ke)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");ve=ke,s.ad(we,we,Pe);const Se=.5*(ve.max[2]-ve.min[2]),Ae=this._minimumAABBFrustumDistance(k,ve),De=s.bY([],[0,0,1],Se),Ze=s.cV(De,we,De),Ye=Ae+(k.pitch===0?0:s.bD(we,Ze)),ht=k.globeCenterInViewSpace,pt=s.at([],we,[ht[0],ht[1],ht[2]]);s.au(pt,pt),s.bY(pt,pt,Ye);const It=s.cV([],we,pt);s.ad(It,It,Ee);const Ge=s.eq/s.aB,st=s.ae(It),Fe=s.c6(Math.max(st*Ge-s.eq,Number.EPSILON),0),gt=Math.min(k.zoomFromMercatorZAdjusted(Fe),I.maxZoom);return gt>.5*(s.cL+s.cx)?(k.setProjection({name:"mercator"}),k.zoom=gt,this._cameraForBounds(k,c,f,v,b,w)):{center:k.center,zoom:gt,bearing:v,pitch:b}}_extendAABB(i,c,f,v){const b=.5*((f.padding.left||0)+(f.padding.right||0)),w=.5*((f.padding.top||0)+(f.padding.bottom||0)),k=w,I=b,L=b,O=w,N=c.width-(I+L),F=c.height-(k+O),V=s.at([],i.max,i.min),Z=Math.min(N/V[0],F/V[1]),G=Math.min(c.scaleZoom(c.scale*Z),f.maxZoom);if(isNaN(G))return null;const Y=c.scale/c.zoomScale(G),ee=new s.cW([i.min[0]-I*Y,i.min[1]-O*Y,i.min[2]],[i.max[0]+L*Y,i.max[1]+k*Y,i.max[2]]),ae=(typeof f.offset.x=="number"&&typeof f.offset.y=="number"?new s.P(f.offset.x,f.offset.y):s.P.convert(f.offset)).rotate(-s.al(v));return ee.center[0]-=ae.x*Y,ee.center[1]+=ae.y*Y,ee}queryTerrainElevation(i,c){const f=this.transform.elevation;return f?(c=s.h({},{exaggerated:!0},c),f.getAtPoint(s.ac.fromLngLat(i),null,c.exaggerated)):null}_cameraForBounds(i,c,f,v,b,w){if(i.projection.name==="globe")return this._cameraForBoundsOnGlobe(i,c,f,v,b,w);const k=i.clone(),I=this._extendCameraOptions(w);k.bearing=v,k.pitch=b;const L=s.cd.convert(c),O=s.cd.convert(f),N=new s.cd(L.lng,O.lat),F=new s.cd(O.lng,L.lat),V=k.project(L),Z=k.project(O),G=this.queryTerrainElevation(L),Y=this.queryTerrainElevation(O),ee=this.queryTerrainElevation(N),ae=this.queryTerrainElevation(F),ve=[[V.x,V.y,Math.min(G||0,Y||0,ee||0,ae||0)],[Z.x,Z.y,Math.max(G||0,Y||0,ee||0,ae||0)]];let we=s.cW.fromPoints(ve);const Pe=k.getWorldToCameraMatrix(),Ee=s.bi(new Float64Array(16),Pe);we=s.cW.applyTransform(we,Pe);const ke=this._extendAABB(we,k,I,v);if(!ke)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");we=ke;const Se=.5*s.at([],we.max,we.min)[2],Ae=this._minimumAABBFrustumDistance(k,we),De=[0,0,1,0];s.aA(De,De,Pe),s.eG(De,De);const Ze=s.bY([],De,Ae+Se),Ye=s.cV([],we.center,Ze);s.ad(we.center,we.center,Ee),s.ad(Ye,Ye,Ee);const ht=k.unproject(new s.P(we.center[0],we.center[1])),pt=s.eH(k.projection,ht),It=Math.pow(2,pt),Ge=Math.min(k._zoomFromMercatorZ(Ye[2]*k.pixelsPerMeter*It/k.worldSize),I.maxZoom);return k.mercatorFromTransition&&Ge<.5*(s.cL+s.cx)?(k.setProjection({name:"globe"}),k.zoom=Ge,this._cameraForBounds(k,c,f,v,b,w)):{center:ht,zoom:Ge,bearing:v,pitch:b}}fitBounds(i,c,f){const v=this.cameraForBounds(i,c);return this._fitInternal(v,c,f)}fitScreenCoordinates(i,c,f,v,b){const w=s.P.convert(i),k=s.P.convert(c),I=new s.P(Math.min(w.x,k.x),Math.min(w.y,k.y)),L=new s.P(Math.max(w.x,k.x),Math.max(w.y,k.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(w,k))return this;const O=this.transform.pointLocation3D(I),N=this.transform.pointLocation3D(L),F=this.transform.pointLocation3D(new s.P(I.x,L.y)),V=this.transform.pointLocation3D(new s.P(L.x,I.y)),Z=[Math.min(O.lng,N.lng,F.lng,V.lng),Math.min(O.lat,N.lat,F.lat,V.lat)],G=[Math.max(O.lng,N.lng,F.lng,V.lng),Math.max(O.lat,N.lat,F.lat,V.lat)],Y=v&&v.pitch?v.pitch:this.getPitch(),ee=this._cameraForBounds(this.transform,Z,G,f,Y,v);return this._fitInternal(ee,v,b)}_fitInternal(i,c,f){return i?(c=s.h(i,c)).linear?this.easeTo(c,f):this.flyTo(c,f):this}jumpTo(i,c){this.stop();const f=i.preloadOnly?this.transform.clone():this.transform;let v=!1,b=!1,w=!1;"zoom"in i&&f.zoom!==+i.zoom&&(v=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=s.cd.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(b=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(w=!0,f.pitch=+i.pitch);const k=typeof i.padding=="number"?this._extendPadding(i.padding):i.padding;if(i.padding!=null&&!f.isPaddingEqual(k))if(i.retainPadding===!1){const I=f.clone();I.padding=k,f.setLocationAtPoint(f.center,I.centerPoint)}else f.padding=k;return i.preloadOnly?(this._preloadTiles(f),this):(this.fire(new s.A("movestart",c)).fire(new s.A("move",c)),v&&this.fire(new s.A("zoomstart",c)).fire(new s.A("zoom",c)).fire(new s.A("zoomend",c)),b&&this.fire(new s.A("rotatestart",c)).fire(new s.A("rotate",c)).fire(new s.A("rotateend",c)),w&&this.fire(new s.A("pitchstart",c)).fire(new s.A("pitch",c)).fire(new s.A("pitchend",c)),this.fire(new s.A("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.w(uv),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,c){const f=this.transform;if(!f.projection.supportsFreeCamera)return s.w(uv),this;this.stop();const v=f.zoom,b=f.pitch,w=f.bearing;f.setFreeCameraOptions(i);const k=v!==f.zoom,I=b!==f.pitch,L=w!==f.bearing;return this.fire(new s.A("movestart",c)).fire(new s.A("move",c)),k&&this.fire(new s.A("zoomstart",c)).fire(new s.A("zoom",c)).fire(new s.A("zoomend",c)),L&&this.fire(new s.A("rotatestart",c)).fire(new s.A("rotate",c)).fire(new s.A("rotateend",c)),I&&this.fire(new s.A("pitchstart",c)).fire(new s.A("pitch",c)).fire(new s.A("pitchend",c)),this.fire(new s.A("moveend",c)),this}easeTo(i,c){this._stop(!1,i.easeId),((i=s.h({offset:[0,0],duration:500,easing:s.ey},i)).animate===!1||this._prefersReducedMotion(i))&&(i.duration=0);const f=this.transform,v=this.getZoom(),b=this.getBearing(),w=this.getPitch(),k=this.getPadding(),I="zoom"in i?+i.zoom:v,L="bearing"in i?this._normalizeBearing(i.bearing,b):b,O="pitch"in i?+i.pitch:w,N=this._extendPadding(i.padding),F=s.P.convert(i.offset);let V,Z,G;if(f.projection.name==="globe"){const De=s.ac.fromLngLat(f.center),Ze=F.rotate(-f.angle);De.x+=Ze.x/f.worldSize,De.y+=Ze.y/f.worldSize;const Ye=De.toLngLat(),ht=s.cd.convert(i.center||Ye);this._normalizeCenter(ht),V=f.centerPoint.add(Ze),Z=new s.P(De.x,De.y).mult(f.worldSize),G=new s.P(s.aD(ht.lng),s.aH(ht.lat)).mult(f.worldSize).sub(Z)}else{V=f.centerPoint.add(F);const De=f.pointLocation(V),Ze=s.cd.convert(i.center||De);this._normalizeCenter(Ze),Z=f.project(De),G=f.project(Ze).sub(Z)}const Y=f.zoomScale(I-v);let ee,ae;i.around&&(ee=s.cd.convert(i.around),ae=f.locationPoint(ee));const ve=this._zooming||I!==v,we=this._rotating||b!==L,Pe=this._pitching||O!==w,Ee=!f.isPaddingEqual(N),ke=i.retainPadding===!1?f.clone():f,Se=De=>Ze=>{if(ve&&(De.zoom=s.ai(v,I,Ze)),we&&(De.bearing=s.ai(b,L,Ze)),Pe&&(De.pitch=s.ai(w,O,Ze)),Ee&&(ke.interpolatePadding(k,N,Ze),V=ke.centerPoint.add(F)),ee)De.setLocationAtPoint(ee,ae);else{const Ye=De.zoomScale(De.zoom-v),ht=I>v?Math.min(2,Y):Math.max(.5,Y),pt=Math.pow(ht,1-Ze),It=De.unproject(Z.add(G.mult(Ze*pt)).mult(Ye));De.setLocationAtPoint(De.renderWorldCopies?It.wrap():It,V)}return i.preloadOnly||this._fireMoveEvents(c),De};if(i.preloadOnly){const De=this._emulate(Se,i.duration,f);return this._preloadTiles(De),this}const Ae={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ve,this._rotating=we,this._pitching=Pe,this._padding=Ee,this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,Ae),this._ease(Se(f),De=>{f.cameraElevationReference==="sea"&&f.recenterOnTerrain(),this._afterEase(c,De)},i),this}_prepareEase(i,c,f={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),c||f.moving||this.fire(new s.A("movestart",i)),this._zooming&&!f.zooming&&this.fire(new s.A("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new s.A("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new s.A("pitchstart",i))}_fireMoveEvents(i){this.fire(new s.A("move",i)),this._zooming&&this.fire(new s.A("zoom",i)),this._rotating&&this.fire(new s.A("rotate",i)),this._pitching&&this.fire(new s.A("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const f=this._zooming,v=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new s.A("zoomend",i)),v&&this.fire(new s.A("rotateend",i)),b&&this.fire(new s.A("pitchend",i)),this.fire(new s.A("moveend",i))}flyTo(i,c){if(this._prefersReducedMotion(i)){const nt=s.aF(i,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(nt,c)}this.stop(),i=s.h({offset:[0,0],speed:1.2,curve:1.42,easing:s.ey},i);const f=this.transform,v=this.getZoom(),b=this.getBearing(),w=this.getPitch(),k=this.getPadding(),I="zoom"in i?s.ay(+i.zoom,f.minZoom,f.maxZoom):v,L="bearing"in i?this._normalizeBearing(i.bearing,b):b,O="pitch"in i?+i.pitch:w,N=this._extendPadding(i.padding),F=f.zoomScale(I-v),V=s.P.convert(i.offset);let Z=f.centerPoint.add(V);const G=f.pointLocation(Z),Y=s.cd.convert(i.center||G);this._normalizeCenter(Y);const ee=f.project(G),ae=f.project(Y).sub(ee);let ve=i.curve;const we=Math.max(f.width,f.height),Pe=we/F,Ee=ae.mag();if("minZoom"in i){const nt=s.ay(Math.min(i.minZoom,v,I),f.minZoom,f.maxZoom),St=we/f.zoomScale(nt-v);ve=Math.sqrt(St/Ee*2)}const ke=ve*ve;function Se(nt){const St=(Pe*Pe-we*we+(nt?-1:1)*ke*ke*Ee*Ee)/(2*(nt?Pe:we)*ke*Ee);return Math.log(Math.sqrt(St*St+1)-St)}function Ae(nt){return(Math.exp(nt)-Math.exp(-nt))/2}function De(nt){return(Math.exp(nt)+Math.exp(-nt))/2}const Ze=Se(0);let Ye=function(nt){return De(Ze)/De(Ze+ve*nt)},ht=function(nt){return we*((De(Ze)*(Ae(St=Ze+ve*nt)/De(St))-Ae(Ze))/ke)/Ee;var St},pt=(Se(1)-Ze)/ve;if(Math.abs(Ee)<1e-6||!isFinite(pt)){if(Math.abs(we-Pe)<1e-6)return this.easeTo(i,c);const nt=Pe<we?-1:1;pt=Math.abs(Math.log(Pe/we))/ve,ht=function(){return 0},Ye=function(St){return Math.exp(nt*ve*St)}}i.duration="duration"in i?+i.duration:1e3*pt/("screenSpeed"in i?+i.screenSpeed/ve:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const It=b!==L,Ge=O!==w,st=!f.isPaddingEqual(N),Fe=i.retainPadding===!1?f.clone():f,gt=nt=>St=>{const Bt=St*pt,mt=1/Ye(Bt);nt.zoom=St===1?I:v+nt.scaleZoom(mt),It&&(nt.bearing=s.ai(b,L,St)),Ge&&(nt.pitch=s.ai(w,O,St)),st&&(Fe.interpolatePadding(k,N,St),Z=Fe.centerPoint.add(V));const Ot=St===1?Y:nt.unproject(ee.add(ae.mult(ht(Bt))).mult(mt));return nt.setLocationAtPoint(nt.renderWorldCopies?Ot.wrap():Ot,Z),nt._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(c),nt};if(i.preloadOnly){const nt=this._emulate(gt,i.duration,f);return this._preloadTiles(nt),this}return this._zooming=!0,this._rotating=It,this._pitching=Ge,this._padding=st,this._prepareEase(c,!1),this._ease(gt(f),()=>this._afterEase(c),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(i){}_cancelRenderFrame(i){}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const f=this._onEaseEnd;this._onEaseEnd=void 0,f.call(this,c)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,c,f){f.animate===!1||f.duration===0?(i(1),c()):(this._easeStart=s.q.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((s.q.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,c){i=s.bX(i,-180,180);const f=Math.abs(i-c);return Math.abs(i-360-c)<f&&(i-=360),Math.abs(i+360-c)<f&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(c.maxBounds||c.projection.name!=="globe"&&!c.renderWorldCopies)return;const f=i.lng-c.center.lng;i.lng+=f>180?-360:f<-180?360:0}_prefersReducedMotion(i){return this._respectPrefersReducedMotion&&s.q.prefersReducedMotion&&!(i&&i.essential)}_emulate(i,c,f){const v=Math.ceil(15*c/1e3),b=[],w=i(f.clone());for(let k=0;k<=v;k++){const I=w(k/v);b.push(I.clone())}return b}_preloadTiles(i,c){}}class Fm{constructor(i={}){this.options=i,s.aV(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const c=this.options&&this.options.compact,f=i._getUIString("AttributionControl.ToggleAttribution");this._map=i,this._container=oe("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=oe("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",f);const v=oe("span","mapboxgl-ctrl-icon",this._compactButton);return v.setAttribute("aria-hidden","true"),v.setAttribute("title",f),this._innerContainer=oe("div","mapboxgl-ctrl-attrib-inner",this._container),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.e.ACCESS_TOKEN}];if(i){const f=c.reduce((v,b,w)=>(b.value&&(v+=`${b.key}=${b.value}${w<c.length-1?"&":""}`),v),"?");i.href=`${s.e.FEEDBACK_URL}/${f}#${wp(this._map,!0)}`,i.rel="noopener nofollow"}}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style._mergedSourceCaches;for(const v in c){const b=c[v];if(b.used){const w=b.getSource();w.attribution&&i.indexOf(w.attribution)<0&&i.push(w.attribution)}}i.sort((v,b)=>v.length-b.length),i=i.filter((v,b)=>{for(let w=b+1;w<i.length;w++)if(i[w].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ap{constructor(){s.aV(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=oe("div","mapboxgl-ctrl");const c=oe("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(Object.entries(i).length===0)return!0;for(const c in i){const f=i[c].getSource();if(f.hasOwnProperty("mapbox_logo")&&!f.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const c=i[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class Gd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,f=c?this._queue.concat(c):this._queue;for(const v of f)if(v.id===i)return void(v.cancelled=!0)}run(i=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const f of c)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Ga{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const c=s.dk((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,c,f){this._start=this.getValue(c),this._end=i,this._startTime=c,this._endTime=c+f}}const Rp={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class Wi extends s.A{constructor(i,c,f,v){const{point:b,lngLat:w,originalEvent:k,target:I}=i;super(i.type,{point:b,lngLat:w,originalEvent:k,target:I}),this.preventDefault=()=>{i.preventDefault()},this.id=c,this.interaction=f,this.feature=v}}class ya{constructor(i){this.map=i,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(i,c){if(this.typeById.has(i))throw new Error(`Interaction id "${i}" already exists.`);const f=c.filter;let v=c.type;f&&this.filters.set(i,s.b3(f)),v==="mouseover"&&(v="mouseenter"),v==="mouseout"&&(v="mouseleave");const b=this.interactionsByType.get(v)||new Map;v==="mouseenter"||v==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(i,c)):b.size===0&&this.map.on(v,this.handleType),b.size===0&&this.interactionsByType.set(v,b),b.set(i,c),this.typeById.set(i,v)}get(i){const c=this.typeById.get(i);if(!c)return;const f=this.interactionsByType.get(c);return f?f.get(i):void 0}remove(i){const c=this.typeById.get(i);if(!c)return;this.typeById.delete(i),this.filters.delete(i);const f=this.interactionsByType.get(c);f&&(f.delete(i),c==="mouseenter"||c==="mouseleave"?(this.delegatedInteractions.delete(i),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):f.size===0&&this.map.off(c,this.handleType))}queryTargets(i,c){const f=[];for(const[v,b]of c)b.target&&f.push({targetId:v,target:b.target,filter:this.filters.get(v)});return this.map.style.queryRenderedTargets(i,f,this.map.transform)}handleMove(i){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const c=this.queryTargets(i.point,Array.from(this.delegatedInteractions).reverse());c.length&&(i.type="mouseenter",this.handleType(i,c));const f=new Map;for(const[v,{feature:b}]of this.prevHoveredFeatures)this.hoveredFeatures.has(v)||f.set(b.id,b);f.size&&(i.type="mouseleave",this.handleType(i,Array.from(f.values())))}handleOut(i){const c=Array.from(this.hoveredFeatures.values()).map(({feature:f})=>f);c.length&&(i.type="mouseleave",this.handleType(i,c)),this.hoveredFeatures.clear()}handleType(i,c){const f=i.type==="mouseenter";if(f&&!this.interactionsByType.has(i.type))return void s.w("mouseenter interaction required for mouseleave to work.");const v=Array.from(this.interactionsByType.get(i.type)).reverse(),b=!!c;c=c||this.queryTargets(i.point,v);let w=!1;const k=new Set;for(const I of c){for(const[L,O]of v){if(!O.target)continue;const N=I.variants?I.variants[L]:null;if(N){for(const F of N){if(Oh(F,I,k,L))continue;const V=new s.de(I,F),Z=od(F,I,L);b&&(V.state=this.map.getFeatureState(V));const G=f?this.prevHoveredFeatures.get(Z):null,Y=new Wi(i,L,O,V),ee=G?G.stop:O.handler(Y);if(f&&this.hoveredFeatures.set(Z,{feature:I,stop:ee}),ee!==!1){w=!0;break}}if(w)break}}if(w)break}if(!w)for(const[I,L]of v){const{handler:O,target:N}=L;if(!N&&O(new Wi(i,I,L,null))!==!1)break}}}function Wd(p,i){if(Array.isArray(p)&&Array.isArray(i)){const c=new Set(p),f=new Set(i);return c.size===f.size&&p.every(v=>f.has(v))}return s.bv(p,i)}const Mp={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},dv={showCompass:!0,showZoom:!0,visualizePitch:!1};class B1{constructor(i,c,f=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new kp({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,f&&(this.mousePitch=new _c({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),s.aV(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(i,c){this.mouseRotate.mousedown(i,c),this.mousePitch&&this.mousePitch.mousedown(i,c),re()}move(i,c){const f=this.map,v=this.mouseRotate.mousemoveWindow(i,c),b=v&&v.bearingDelta;if(b&&f.setBearing(f.getBearing()+b),this.mousePitch){const w=this.mousePitch.mousemoveWindow(i,c),k=w&&w.pitchDelta;k&&f.setPitch(f.getPitch()+k)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ze(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(s.h({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),he(this.element,i)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,he(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ce(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=Ce(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function vu(p,i,c){if(p=new s.cd(p.lng,p.lat),i){const f=new s.cd(p.lng-360,p.lat),v=new s.cd(p.lng+360,p.lat),b=360*Math.ceil(Math.abs(p.lng-c.center.lng)/360),w=c.locationPoint3D(p).distSqr(i),k=i.x<0||i.y<0||i.x>c.width||i.y>c.height;c.locationPoint3D(f).distSqr(i)<w&&(k||Math.abs(f.lng-c.center.lng)<b)?p=f:c.locationPoint3D(v).distSqr(i)<w&&(k||Math.abs(v.lng-c.center.lng)<b)&&(p=v)}for(;Math.abs(p.lng-c.center.lng)>180;){const f=c.locationPoint3D(p);if(f.x>=0&&f.y>=0&&f.x<=c.width&&f.y<=c.height)break;p.lng>c.center.lng?p.lng-=360:p.lng+=360}return p}const $m={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},va={rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Kd extends s.E{constructor(i,c){super(),(i instanceof HTMLElement||c)&&(i=s.h({element:i},c)),s.aV(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this);const{anchor:f="center",color:v="#3FB1CE",scale:b=1,draggable:w=!1,clickTolerance:k=0,rotation:I=va.rotation,rotationAlignment:L=va.rotationAlignment,pitchAlignment:O=va.pitchAlignment,occludedOpacity:N=va.occludedOpacity,altitude:F=va.altitude}=i||{};this._anchor=f,this._color=v,this._scale=b,this._draggable=w,this._clickTolerance=k,this._rotation=I,this._rotationAlignment=L,this._pitchAlignment=O,this._occludedOpacity=N,this._altitude=F,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),i&&i.element?(this._element=i.element,this._offset=s.P.convert(i&&i.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=s.P.convert(i&&i.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",G=>{G.preventDefault()}),this._element.addEventListener("mousedown",G=>{G.preventDefault()});const V=this._element.classList;for(const G in $m)V.remove(`mapboxgl-marker-anchor-${G}`);V.add(`mapboxgl-marker-anchor-${this._anchor}`);const Z=i&&i.className?i.className.trim().split(/\s+/):[];V.add(...Z),this._popup=null}_createDefaultMarker(){const i=oe("div"),c=fe("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},i);if(this._altitude===0){const f=fe("radialGradient",{id:"shadowGradient"},fe("defs",{},c));fe("stop",{offset:"10%","stop-opacity":.4},f),fe("stop",{offset:"100%","stop-opacity":.05},f),fe("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c)}return fe("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),fe("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),fe("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),i}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.cd.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(i){return i===this._altitude||(this._defaultMarker&&(this._altitude===0&&i!==0||this._altitude!==0&&i===0)&&(this._element=this._createDefaultMarker()),this._altitude=i||va.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,i._marker=this,i._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const c=i.code,f=i.charCode||i.keyCode;c!=="Space"&&c!=="Enter"&&f!==32&&f!==13||this.togglePopup()}_onMapClick(i){const c=i.originalEvent.target,f=this._element;this._popup&&(c===f||f.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const i=this._map,c=this._pos;if(!i||!c)return!1;const f=i.unproject(c,this._altitude),v=i.getFreeCameraOptions();if(!v.position)return!1;const b=v.position.toLngLat();return b.distanceTo(f)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const i=this._map;if(!i)return;const c=this._pos;if(!c||c.x<0||c.x>i.transform.width||c.y<0||c.y>i.transform.height)return void this._clearFadeTimer();const f=i.unproject(c,this._altitude);let v;i._showingGlobe()&&s.eK(i.transform,this._lngLat)?v=0:(v=1-i._queryFogOpacity(f),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i||!this._map)return;const c=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${i.x}px,${i.y}px)
            ${$m[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${c.x}px,${c.y}px)
        `}_calculateXYTransform(){const i=this._pos,c=this._map,f=this.getPitchAlignment();if(!c||!i||f!=="map")return"";if(!c._showingGlobe()){const I=c.getPitch();return I?`rotateX(${I}deg)`:""}const v=s.cJ(s.eL(c.transform,this._lngLat)),b=i.sub(s.eM(c.transform)),w=Math.abs(b.x)+Math.abs(b.y);if(w===0)return"";const k=v/w;return`rotateX(${-b.y*k}deg) rotateY(${b.x*k}deg)`}_calculateZTransform(){const i=this._pos,c=this._map;if(!c||!i)return"";let f=0;const v=this.getRotationAlignment();if(v==="map")if(c._showingGlobe()){const b=c.project(new s.cd(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),w=c.project(new s.cd(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(b);f=s.cJ(Math.atan2(w.y,w.x))-90}else f=-c.getBearing();else if(v==="horizon"){const b=s.af(4,6,c.getZoom()),w=s.eM(c.transform);w.y+=b*c.transform.height;const k=i.sub(w),I=s.cJ(Math.atan2(k.y,k.x));f=(I>90?I-270:I+90)*(1-b)}return f+=this._rotation,f?`rotateZ(${f}deg)`:""}_update(i){cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=vu(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat,this._altitude),i===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(c._showingGlobe()||c.getTerrain()||c.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=s.P.convert(i),this._update(),this}addClassName(i){return this._element.classList.add(i),this}removeClassName(i){return this._element.classList.remove(i),this}toggleClassName(i){return this._element.classList.toggle(i)}_onMove(i){const c=this._map;if(!c)return;const f=this._pointerdownPos,v=this._positionDelta;if(f&&v){if(!this._isDragging){const b=this._clickTolerance||c._clickTolerance;if(i.point.dist(f)<b)return;this._isDragging=!0}this._pos=i.point.sub(v),this._lngLat=c.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.A("dragstart"))),this.fire(new s.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.A("dragend")),this._state="inactive"}_addDragHandler(i){const c=this._map,f=this._pos;c&&f&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(f),this._pointerdownPos=i.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const c=this._map;return c&&(i?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||va.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||va.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i||va.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(i){return this._occludedOpacity=i||va.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Nm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Zd={maxWidth:100,unit:"metric"},bu={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Wa={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},ra=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function js(p=new s.P(0,0),i="bottom"){if(typeof p=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(i){case"top":return new s.P(0,p);case"top-left":return new s.P(c,c);case"top-right":return new s.P(-c,c);case"bottom":return new s.P(0,-p);case"bottom-left":return new s.P(c,-c);case"bottom-right":return new s.P(-c,-c);case"left":return new s.P(p,0);case"right":return new s.P(-p,0)}return new s.P(0,0)}return p instanceof s.P||Array.isArray(p)?s.P.convert(p):s.P.convert(p[i]||[0,0])}return{version:T,supported:K.supported,setRTLTextPlugin:s.eQ,getRTLTextPluginStatus:s.eP,Map:class extends Hd{constructor(p){A.mark(E.create);const i=p;if((p=s.h({},Mp,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&s.eI(window)&&(p.antialias=!1,s.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Gf(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies,null,null),p),this._repaint=!!p.repaint,this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._collectResourceTiming=p.collectResourceTiming,this._language=this._parseLanguage(p.language),this._worldview=p.worldview,this._renderTaskQueue=new Gd,this._domRenderTaskQueue=new Gd,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.a$(),this._locale=s.h({},Rp,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._performanceMetricsCollection=p.performanceMetricsCollection,this._tessellationStep=p.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=p.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Ga(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=p.scaleFactor,this._requestManager=new Qe(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,this._contextCreateOptions=p.contextCreateOptions?Object.assign({},p.contextCreateOptions):{},typeof p.container=="string"){const c=document.getElementById(p.container);if(!c)throw new Error(`Container '${p.container.toString()}' not found.`);this._container=c}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&s.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),this._spriteFormat=p.spriteFormat,s.aV(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Sm),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Bm(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,(p.style||!p.testMode)&&this.setStyle(p.style||s.e.DEFAULT_STYLE,{config:p.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this.indoor=new o1(this),p.hash&&(this._hash=new Em(typeof p.hash=="string"&&p.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){i.center==null&&i.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch});const c=p.bounds;c&&(this.resize(),this.fitBounds(c,s.h({},p.fitBoundsOptions,{duration:0})))}this.resize(),p.attributionControl&&this.addControl(new Fm({customAttribution:p.customAttribution})),this._logoControl=new Ap,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new s.A(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new s.A(`${c.dataType}dataloading`,c))}),this._interactions=new ya(this)}_getMapId(){return this._mapId}addControl(p,i){if(i===void 0&&(i=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new s.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=p.onAdd(this);this._controls.push(p);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(c,f.firstChild):f.appendChild(c),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new s.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(p);return i>-1&&this._controls.splice(i,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new s.A("movestart",p)).fire(new s.A("move",p)),this.fire(new s.A("resize",p)),i&&this.fire(new s.A("moveend",p)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(s.aG.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new s.A("zoomstart")).fire(new s.A("zoom")).fire(new s.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new s.A("zoomstart")).fire(new s.A("zoom")).fire(new s.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new s.A("pitchstart")).fire(new s.A("pitch")).fire(new s.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new s.A("pitchstart")).fire(new s.A("pitch")).fire(new s.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(p){return this._scaleFactor=p,this.painter.scaleFactor=p,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(i=>i.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(p){return p==="auto"?navigator.language:Array.isArray(p)?p.length===0?void 0:p.map(i=>i==="auto"?navigator.language:i):p}setLanguage(p){const i=this._parseLanguage(p);if(!this.style||i===this._language)return this;this._language=i,this.style.reloadSources();for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){return this.style&&p!==this._worldview?(this._worldview=p,this._styleDirty=!0,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(p){return this._lazyInitEmptyStyle(),p?typeof p=="string"&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const p=this.transform,i=p.projection.name;let c;i==="globe"&&p.zoom>=s.cx?(p.setMercatorFromTransition(),c=!0):i==="mercator"&&p.zoom<s.cx&&(p.setProjection({name:"globe"}),c=!0),c&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate(),this._update(!0))}_prioritizeAndUpdateProjection(p,i){return this._updateProjection(p||i||{name:"mercator"})}_updateProjection(p){let i;return i=p.name==="globe"&&this.transform.zoom>=s.cx?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),i&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(p,i){return this.transform.locationPoint3D(s.cd.convert(p),i)}unproject(p,i){return this.transform.pointLocation3D(s.P.convert(p),i)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(p,i,c){const f=v=>{let b=[];if(Array.isArray(i)){const w=i.filter(k=>this.getLayer(k));b=w.length?this.queryRenderedFeatures(v,{layers:w}):[]}else b=this.queryRenderedFeatures(v,{target:i});return b};if(p==="mouseenter"||p==="mouseover"){let v=!1;return{listener:c,targets:i,delegates:{mousemove:w=>{const k=f(w.point);k.length?v||(v=!0,c.call(this,new Eo(p,this,w.originalEvent,{features:k}))):v=!1},mouseout:()=>{v=!1}}}}if(p==="mouseleave"||p==="mouseout"){let v=!1;return{listener:c,targets:i,delegates:{mousemove:k=>{f(k.point).length?v=!0:v&&(v=!1,c.call(this,new Eo(p,this,k.originalEvent)))},mouseout:k=>{v&&(v=!1,c.call(this,new Eo(p,this,k.originalEvent)))}}}}{const v=b=>{const w=f(b.point);w.length&&(b.features=w,c.call(this,b),delete b.features)};return{listener:c,targets:i,delegates:{[p]:v}}}}on(p,i,c){if(typeof i=="function"||c===void 0)return super.on(p,i);if(typeof i=="string"&&(i=[i]),!this._areTargetsValid(i))return this;const f=this._createDelegatedListener(p,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(f);for(const v in f.delegates)this.on(v,f.delegates[v]);return this}once(p,i,c){if(typeof i=="function"||c===void 0)return super.once(p,i);if(typeof i=="string"&&(i=[i]),!this._areTargetsValid(i))return this;const f=this._createDelegatedListener(p,i,c);for(const v in f.delegates)this.once(v,f.delegates[v]);return this}off(p,i,c){if(typeof i=="function"||c===void 0)return super.off(p,i);if(typeof i=="string"&&(i=[i]),!this._areTargetsValid(i))return this;const f=this._delegatedListeners?this._delegatedListeners[p]:void 0;return f&&(v=>{for(let b=0;b<v.length;b++){const w=v[b];if(w.listener===c&&Wd(w.targets,i)){for(const k in w.delegates)this.off(k,w.delegates[k]);return v.splice(b,1),this}}})(f),this}queryRenderedFeatures(p,i){if(!this.style)return[];if(p===void 0||p instanceof s.P||Array.isArray(p)||i!==void 0||(i=p,p=void 0),p=p||[[0,0],[this.transform.width,this.transform.height]],!i){const b=this.style.queryRenderedFeatures(p,void 0,this.transform),w=this.style.queryRenderedFeatureset(p,void 0,this.transform);return b.concat(w)}let c=!0;if(i.target&&(c=this._isTargetValid(i.target),c&&!i.layers))return this.style.queryRenderedFeatureset(p,i,this.transform);let f=!0;if(i.layers&&Array.isArray(i.layers)){for(const b of i.layers)if(!this._isValidId(b)){f=!1;break}if(f&&!i.target)return this.style.queryRenderedFeatures(p,i,this.transform)}let v=[];return f&&(v=v.concat(this.style.queryRenderedFeatures(p,i,this.transform))),c&&(v=v.concat(this.style.queryRenderedFeatureset(p,i,this.transform))),v}querySourceFeatures(p,i){return!p||typeof p=="string"&&!this._isValidId(p)?[]:this.style.querySourceFeatures(p,i)}isPointOnSurface(p){const{name:i}=this.transform.projection;return i!=="globe"&&i!=="mercator"&&s.w(`${i} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.P.convert(p))}addInteraction(p,i){return this._interactions.add(p,i),this}removeInteraction(p){return this._interactions.remove(p),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(p){return this._cooperativeGestures=p,this}setStyle(p,i){return i=s.h({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i),this.style&&p&&i.diff!==!1&&i.localFontFamily===this._localFontFamily&&i.localIdeographFontFamily===this._localIdeographFontFamily&&!i.config?(this.style._diffStyle(p,(c,f)=>{if(c){const v=typeof c=="string"?c:c instanceof Error?c.message:c.error;s.w(`Unable to perform style diff: ${v}. Rebuilding the style from scratch.`),this._updateStyle(p,i)}else f&&this._update(!0)},()=>this._postStyleLoadEvent()),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(p,i))}_getUIString(p){const i=this._locale[p];if(i==null)throw new Error(`Missing UI string '${p}'`);return i}_updateStyle(p,i){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p){const c=s.h({},i);i&&i.config&&(c.initialConfig=i.config,delete c.config),this.style=new Uo(this,c).load(p),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Uo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.w("There is no style added to the map."),!1)}_isValidId(p){return p==null?(this.fire(new s.z(new Error("IDs can't be empty."))),!1):!s.d8(p)||(this.fire(new s.z(new Error(`IDs can't contain special symbols: "${p}".`))),!1)}_isTargetValid(p){return"featuresetId"in p?this._isValidId("importId"in p?p.importId:p.featuresetId):"layerId"in p&&this._isValidId(p.layerId)}_areTargetsValid(p){if(Array.isArray(p)){for(const i of p)if(!this._isValidId(i))return!1;return!0}return this._isTargetValid(p)}addSource(p,i){return this._isValidId(p)?(this._lazyInitEmptyStyle(),this.style.addSource(p,i),this._update(!0)):this}isSourceLoaded(p){return!!this._isValidId(p)&&!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(p,i,c){this._lazyInitEmptyStyle(),this.style.addSourceType(p,i,c)}removeSource(p){return this._isValidId(p)?(this.style.removeSource(p),this._updateTerrain(),this._update(!0)):this}getSource(p){return this._isValidId(p)?this.style.getOwnSource(p):null}addImage(p,i,{pixelRatio:c=1,sdf:f=!1,stretchX:v,stretchY:b,content:w}={}){this._lazyInitEmptyStyle();const k=s.I.from(p);if(i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap){const{width:I,height:L,data:O}=s.q.getImageData(i);this.style.addImage(k,{data:new s.r({width:I,height:L},O),pixelRatio:c,stretchX:v,stretchY:b,content:w,sdf:f,version:0,usvg:!1})}else if(i.width===void 0||i.height===void 0)this.fire(new s.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:I,height:L}=i,O=i;this.style.addImage(k,{data:new s.r({width:I,height:L},new Uint8Array(O.data)),pixelRatio:c,stretchX:v,stretchY:b,content:w,sdf:f,usvg:!1,version:0,userImage:O}),O.onAdd&&O.onAdd(this,p)}}updateImage(p,i){this._lazyInitEmptyStyle();const c=s.I.from(p),f=this.style.getImage(c);if(!f)return void this.fire(new s.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap?s.q.getImageData(i):i,{width:b,height:w,data:k}=v;if(b===void 0||w===void 0)return void this.fire(new s.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==(f.usvg?f.icon.usvg_tree.width:f.data.width)||w!==(f.usvg?f.icon.usvg_tree.height:f.data.height))return void this.fire(new s.z(new Error(`The width and height of the updated image (${b}, ${w})
                must be that same as the previous version of the image
                (${f.data.width}, ${f.data.height})`)));const I=!(i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap);let L=!1;f.usvg?(f.data=new s.r({width:b,height:w},new Uint8Array(k)),f.usvg=!1,f.icon=void 0,L=!0):f.data.replace(k,I),this.style.updateImage(c,f,L)}hasImage(p){return p?!!this.style&&!!this.style.getImage(s.I.from(p)):(this.fire(new s.z(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(s.I.from(p))}loadImage(p,i){s.o(this._requestManager.transformRequest(p,s.R.Image),(c,f)=>{i(c,f instanceof HTMLImageElement?s.q.getImageData(f):f)})}listImages(){return this.style.listImages().map(p=>p.name)}addModel(p,i){this._lazyInitEmptyStyle(),this.style.addModel(p,i)}hasModel(p){return p?this.style.hasModel(p):(this.fire(new s.z(new Error("Missing required model id"))),!1)}removeModel(p){this.style.removeModel(p)}listModels(){return this.style.listModels()}addLayer(p,i){return this._isValidId(p.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(p,i),this._update(!0)):this}getSlot(p){const i=this.getLayer(p);return i&&i.slot||null}setSlot(p,i){return this.style.setSlot(p,i),this.style.mergeLayers(),this._update(!0)}addImport(p,i){return this.style.addImport(p,i).catch(c=>this.fire(new s.z(new Error("Failed to add import",c)))),this}updateImport(p,i){return typeof i!="string"&&i.id!==p?(this.removeImport(p),this.addImport(i)):(this.style.updateImport(p,i),this._update(!0))}removeImport(p){return this.style.removeImport(p),this}moveImport(p,i){return this.style.moveImport(p,i),this._update(!0)}moveLayer(p,i){return this._isValidId(p)?(this.style.moveLayer(p,i),this._update(!0)):this}removeLayer(p){return this._isValidId(p)?(this.style.removeLayer(p),this._update(!0)):this}getLayer(p){if(!this._isValidId(p))return null;const i=this.style.getOwnLayer(p);return i?i.type==="custom"?i.implementation:i.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(p,i,c){return this._isValidId(p)?(this.style.setLayerZoomRange(p,i,c),this._update(!0)):this}setFilter(p,i,c={}){return this._isValidId(p)?(this.style.setFilter(p,i,c),this._update(!0)):this}getFilter(p){return this._isValidId(p)?this.style.getFilter(p):null}setPaintProperty(p,i,c,f={}){return this._isValidId(p)?(this.style.setPaintProperty(p,i,c,f),this._update(!0)):this}getPaintProperty(p,i){return this._isValidId(p)?this.style.getPaintProperty(p,i):null}setLayoutProperty(p,i,c,f={}){return this._isValidId(p)?(this.style.setLayoutProperty(p,i,c,f),this._update(!0)):this}getLayoutProperty(p,i){return this._isValidId(p)?this.style.getLayoutProperty(p,i):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(p){return this.style.setGlyphsUrl(p),this._update(!0)}getSchema(p){return this.style.getSchema(p)}setSchema(p,i){return this.style.setSchema(p,i),this._update(!0)}getConfig(p){return this.style.getConfig(p)}setConfig(p,i){return this.style.setConfig(p,i),this._update(!0)}getConfigProperty(p,i){return this.style.getConfigProperty(p,i)}setConfigProperty(p,i,c){return this.style.setConfigProperty(p,i,c),this._update(!0)}getFeaturesetDescriptors(p){return this.style.getFeaturesetDescriptors(p)}setLights(p){if(this._lazyInitEmptyStyle(),p&&p.length===1&&p[0].type==="flat"){const i=p[0];i.properties?this.style.setFlatLight(i.properties,i.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(p),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const p=this.style.getLights()||[];return p.length===0&&p.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),p}setLight(p,i={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:p}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(p){return this._lazyInitEmptyStyle(),this.style.setSnow(p),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(p){return this._lazyInitEmptyStyle(),this.style.setRain(p),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(p){return this._lazyInitEmptyStyle(),this.style.setColorTheme(p),this._update(!0)}setImportColorTheme(p,i){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(p,i),this._update(!0)}setCamera(p){return this.style.setCamera(p),this._triggerCameraUpdate(p)}_triggerCameraUpdate(p){return this._update(this.transform.setOrthographicProjectionAtLowPitch(p["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.cd.convert(p),this.transform):0}setFeatureState(p,i){return p.source&&!this._isValidId(p.source)?this:(this.style.setFeatureState(p,i),this._update())}removeFeatureState(p,i){return p.source&&!this._isValidId(p.source)?this:(this.style.removeFeatureState(p,i),this._update())}getFeatureState(p){return p.source&&!this._isValidId(p.source)?null:this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let c,f,v,b=this._container;for(;b&&(!f||!v);){const w=window.getComputedStyle(b).transform;w&&w!=="none"&&(c=w.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&c[0]!=="0"&&c[0]!=="1"&&(f=c[0]),c[3]&&c[3]!=="0"&&c[3]!=="1"&&(v=c[3])),b=b.parentElement}this._containerWidth=f?Math.abs(p/f):p,this._containerHeight=v?Math.abs(i/v):i}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=oe("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=oe("div","mapboxgl-canvas-container",p);this._canvas=oe("canvas","mapboxgl-canvas",i),this._interactive&&(i.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=oe("div","mapboxgl-control-container",p),f=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(v=>{f[v]=oe("div",`mapboxgl-ctrl-${v}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,i){const c=s.q.devicePixelRatio||1;this._canvas.width=c*Math.ceil(p),this._canvas.height=c*Math.ceil(i),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${i}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const i=this._markers.indexOf(p);i!==-1&&this._markers.splice(i,1)}_addPopup(p){this._popups.push(p)}_removePopup(p){const i=this._popups.indexOf(p);i!==-1&&this._popups.splice(i,1)}_setupPainter(){const p=s.h({},K.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl2",p);i?(He(i,!0),this.painter=new hu(i,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp,this._worldview),this.on("data",c=>{c.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.l.testSupport(i)):this.fire(new s.z(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.A("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style&&(this.style.reloadModels(),this.style.clearSources()),this._update(),this.fire(new s.A("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let i;this.fire(new s.A("renderstart")),++this._frameId;const c=this.painter.context.extTimerQuery,f=s.q.now(),v=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(i=v.createQuery(),v.beginQuery(c.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();const b=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const L=this.transform.zoom,O=this.transform.pitch,N=s.q.now(),F=new s.aa(L,{now:N,fadeDuration:b,pitch:O,transition:this.style.transition,worldview:this._worldview});this.style.update(F)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let w=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),w=this._updateAverageElevation(f),this.style.updateSources(this.transform),this.style.updateImageProviders(),this.isMoving()||this._forceMarkerAndPopupUpdate()):w=this._updateAverageElevation(f);const k=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,b,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),k&&(this._placementDirty=k.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,A.mark(E.load),this.fire(new s.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this.style.modelManager.isLoaded()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const L=s.q.now()-f;v.endQuery(c.TIME_ELAPSED_EXT),setTimeout(()=>{const O=v.getQueryParameter(i,v.QUERY_RESULT)/1e6;v.deleteQuery(i),this.fire(new s.A("gpu-timing-frame",{cpuTime:L,gpuTime:O}))},50)}if(this.listens("gpu-timing-layer")){const L=this.painter.collectGpuTimers();setTimeout(()=>{const O=this.painter.queryGpuTimers(L);this.fire(new s.A("gpu-timing-layer",{layerTimes:O}))},50)}if(this.listens("gpu-timing-deferred-render")){const L=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const O=this.painter.queryGpuTimeDeferredRender(L);this.fire(new s.A("gpu-timing-deferred-render",{gpuTime:O}))},50)}const I=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(I||this._repaint)this.triggerRepaint();else{const L=this.idle();if(L&&(w=this._updateAverageElevation(f,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),L&&(this.fire(new s.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const O=this._calculateSpeedIndex();this.fire(new s.A("speedindexcompleted",{speedIndex:O})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||I||(this._fullyLoaded=!0,A.mark(E.fullLoad),this._performanceMetricsCollection&&Ln(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(p){for(const i of this._markers)p&&!this.getRenderWorldCopies()&&(i._lngLat=i._lngLat.wrap()),i._update();for(const i of this._popups)!p||this.getRenderWorldCopies()||i._trackPointer||(i._lngLat=i._lngLat.wrap()),i._update()}_updateAverageElevation(p,i=!1){const c=v=>(this.transform.averageElevation=v,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);const f=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(f||(i||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const v=this.transform.averageElevation;let b=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(b)?b=0:this._averageElevationLastSampledAt=p;const w=Math.abs(v-b);if(w>1){if(this._isInitialLoad||f)return this._averageElevation.jumpTo(b),c(b);this._averageElevation.easeTo(b,p,300)}else if(w>1e-4)return this._averageElevation.jumpTo(b),c(b)}return!!this._averageElevation.isEasing(p)&&c(this._averageElevation.getValue(p))}_authenticate(){Yn(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===ut||p.status===401)){const i=this.painter.context.gl;He(i,!1),this._logoControl instanceof Ap&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),Un(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&kn(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const p=this._isDragging();this.painter.updateTerrain(this.style,p)}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const c=this.painter.context.gl,f=c.createFramebuffer();function v(b){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,b,0);const w=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,w),w}return c.bindFramebuffer(c.FRAMEBUFFER,f),this._canvasPixelComparison(v(p),i.canvasCopies.map(v),i.timeStamps)}_canvasPixelComparison(p,i,c){let f=c[1]-c[0];const v=p.length/4;for(let b=0;b<i.length;b++){const w=i[b];let k=0;for(let I=0;I<w.length;I+=4)w[I]===p[I]&&w[I+1]===p[I+1]&&w[I+2]===p[I+2]&&w[I+3]===p[I+3]&&(k+=1);f+=(c[b+2]-c[b+1])*(1-k/v)}return f}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),ei.delete(this.painter.context.gl),cn.remove(),oo.remove(),this._removed=!0,this.fire(new s.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=s.q.frame(i=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(i)}))}_preloadTiles(p){const i=this.style?this.style.getSourceCaches():[];return s.bt(i,(c,f)=>c._preloadTiles(p,f),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(p){this._showParseStatus!==p&&(this._showParseStatus=p,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(p){this._showLayers2DWireframe!==p&&(this._showLayers2DWireframe=p,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(p){this._showLayers3DWireframe!==p&&(this._showLayers3DWireframe=p,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,this._tp.refreshUI(),p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(p){this._showTileAABBs!==p&&(this._showTileAABBs=p,this._tp.refreshUI(),p&&this._update())}_setCacheLimits(p,i){s.eJ(p,i)}get version(){return T}},NavigationControl:class{constructor(p={}){this.options=s.h({},dv,p),this._container=oe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(s.aV(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),oe("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),oe("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.aV(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:i}):c.resetNorth({},{originalEvent:i}))}),this._compassIcon=oe("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const i=p.getZoom(),c=i===p.getMaxZoom(),f=i===p.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new B1(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,i){const c=oe("button",p,this._container);return c.type="button",c.addEventListener("click",i),c}_setButtonTitle(p,i){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${i}`);p.setAttribute("aria-label",c),p.firstElementChild&&p.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends s.E{constructor(p={}){super();const i=navigator.geolocation;this.options=s.h({geolocation:i},Nm,p),s.aV(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Sl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=oe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){const i=(c=!!this.options.geolocation)=>{this._supportsGeolocation=c,p(c)};this._supportsGeolocation!==void 0?p(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(c=>i(c.state!=="denied")).catch(()=>i()):i()}_isOutOfMapMaxBounds(p){const i=this._map.getMaxBounds(),c=p.coords;return!!i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new s.A("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new s.A("geolocate",p)),this._finish()}}_updateCamera(p){const i=new s.cd(p.coords.longitude,p.coords.latitude),c=p.coords.accuracy,f=this._map.getBearing(),v=s.h({bearing:f},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(c),v,{geolocateSource:!0})}_updateMarker(p){if(p){const i=new s.cd(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,i=s.c6(1,p._center.lat)*p.worldSize,c=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new s.A("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=oe("button","mapboxgl-ctrl-geolocate",this._container),oe("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=oe("div","mapboxgl-user-location"),this._dotElement.appendChild(oe("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(oe("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Kd({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=oe("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Kd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.A("trackuserlocationend")))})}}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Fm,ScaleControl:class{constructor(p={}){this.options=s.h({},Zd,p),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),s.aV(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,i=this._map,c=i._containerHeight/2,f=i._containerWidth/2-p/2,v=i.unproject([f,c]),b=i.unproject([f+p,c]),w=v.distanceTo(b);if(this.options.unit==="imperial"){const k=3.2808*w;k>5280?this._setScale(p,k/5280,"mile"):this._setScale(p,k,"foot")}else this.options.unit==="nautical"?this._setScale(p,w/1852,"nautical-mile"):w>=1e3?this._setScale(p,w/1e3,"kilometer"):this._setScale(p,w,"meter")}_setScale(p,i,c){this._map._requestDomTask(()=>{const f=function(b){const w=Math.pow(10,`${Math.floor(b)}`.length-1);let k=b/w;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(I){const L=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*L)/L}(k),w*k}(i),v=f/i;this._container.innerHTML=this._isNumberFormatSupported&&c!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:c}).format(f):`${f}&nbsp;${bu[c]}`,this._container.style.width=p*v+"px"})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=oe("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p={}){this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:s.w("Full screen control 'container' must be a DOM element.")),s.aV(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=oe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=oe("button","mapboxgl-ctrl-fullscreen",this._controlContainer);oe("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.E{constructor(p){super(),this.options=s.h(Object.create(Wa),p),this._altitude=this.options.altitude,s.aV(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),p._addPopup(this),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new s.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),p._canvasContainer&&p._canvasContainer.classList.remove("mapboxgl-track-pointer"),p._removePopup(this),this._map=void 0),this.fire(new s.A("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=s.cd.convert(p),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(p){return this._altitude=p,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const i=document.createDocumentFragment(),c=document.createElement("body");let f;for(c.innerHTML=p;f=c.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=oe("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(p),this.options.closeButton){const c=this._closeButton=oe("button","mapboxgl-popup-close-button",i);c.type="button",c.setAttribute("aria-label","Close popup"),c.innerHTML='<span aria-hidden="true">&#215;</span>',c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let i;return this._classList.delete(p)?i=!1:(this._classList.add(p),i=!0),this._updateClassList(),i}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const i=this._map,c=this._container,f=this._pos;if(!i||!c||!f)return"bottom";const v=c.offsetWidth,b=c.offsetHeight,w=f.x<v/2,k=f.x>i.transform.width-v/2;if(f.y+p<b)return w?"top-left":k?"top-right":"top";if(f.y>i.transform.height-b){if(w)return"bottom-left";if(k)return"bottom-right"}return w?"left":k?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),p.className=i.join(" ")}_update(p){const i=this._map,c=this._content;if(!i||!this._lngLat&&!this._trackPointer||!c)return;let f=this._container;if(f||(f=this._container=oe("div","mapboxgl-popup",i.getContainer()),this._tip=oe("div","mapboxgl-popup-tip",f),f.appendChild(c)),this.options.maxWidth&&f.style.maxWidth!==this.options.maxWidth&&(f.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=vu(this._lngLat,this._pos,i.transform)),!this._trackPointer||p){const v=this._pos=this._trackPointer&&p instanceof s.P?p:i.project(this._lngLat,this._altitude),b=js(this.options.offset),w=this._anchor=this._getAnchor(b.y),k=js(this.options.offset,w),I=v.add(k).round();i._requestDomTask(()=>{this._container&&w&&(this._container.style.transform=`${$m[w]} translate(${I.x}px,${I.y}px)`)})}if(!this._marker&&i._showingGlobe()){const v=s.eK(i.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(ra);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:Kd,Style:Uo,LngLat:s.cd,LngLatBounds:s.aG,Point:s.P,MercatorCoordinate:s.ac,FreeCameraOptions:m0,Evented:s.E,config:s.e,prewarm:s.eO,clearPrewarmedResources:s.eN,get accessToken(){return s.e.ACCESS_TOKEN},set accessToken(p){s.e.ACCESS_TOKEN=p},get baseApiUrl(){return s.e.API_URL},set baseApiUrl(p){s.e.API_URL=p},get workerCount(){return s.eX.workerCount},set workerCount(p){s.eX.workerCount=p},get maxParallelImageRequests(){return s.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){s.e.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){s.eW(p)},get workerUrl(){return s.eV.workerUrl},set workerUrl(p){s.eV.workerUrl=p},get workerClass(){return s.eV.workerClass},set workerClass(p){s.eV.workerClass=p},get workerParams(){return s.eV.workerParams},set workerParams(p){s.eV.workerParams=p},get dracoUrl(){return s.eU()},set dracoUrl(p){s.eT(p)},get meshoptUrl(){return s.eS()},set meshoptUrl(p){s.eR(p)},setNow:s.q.setNow,restoreNow:s.q.restoreNow}});var x=m;return x})}(Fb)),Fb.exports}var _J=bJ();const Og=yJ(_J),xJ={class:"p-4"},wJ={class:"mb-4 p-4 bg-gray-50 rounded-lg"},SJ={class:"grid grid-cols-2 gap-3"},CJ={class:"col-span-2"},kJ={class:"mb-4"},TJ={class:"flex gap-3"},EJ=["disabled"],IJ=Xr({__name:"MapPicker",emits:["address-selected"],setup(t,{emit:e}){const n=e,l="pk.eyJ1IjoiZHV5dnUyNjEyMDAzIiwiYSI6ImNtZDBmbXA5azBpbjYya3E4NzJ2YXpkaDEifQ.hW7NOC5igG7_F9yUV5E9Mg",m=Ke(""),d=Ke({name:"",phone:"",email:""});let x=null,s=null;Co(()=>{Og.accessToken=l,x=new Og.Map({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[106.7009,10.7769],zoom:15,pitch:60,bearing:-17.6}),x.on("click",async A=>{const{lng:z,lat:j}=A.lngLat;s?s.setLngLat([z,j]):s=new Og.Marker().setLngLat([z,j]).addTo(x);const K=await(await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${z},${j}.json?access_token=${l}`)).json();K.features&&K.features[0]?(console.log(K.features[0]),m.value=K.features[0].place_name):m.value="Khng tm thy a ch"}),x.on("load",()=>{if(!x)return;const A=x.getStyle().layers;let z;for(const j of A)if(j.type==="symbol"&&j.layout&&j.layout["text-field"]){z=j.id;break}x.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},z),x.on("click","poi-label",function(j){var U;if(j.features&&j.features.length>0){const K=j.features[0],oe=((U=K.properties)==null?void 0:U.name)||"Khng r tn",fe=K.geometry;if(fe.type==="Point"&&fe.coordinates){const me=fe.coordinates;s?s.setLngLat(me):s=new Og.Marker().setLngLat(me).addTo(x),new Og.Popup().setLngLat(me).setHTML(`<strong>${oe}</strong>`).addTo(x),m.value=oe}}}),x.on("mouseenter","poi-label",()=>{x&&(x.getCanvas().style.cursor="pointer")}),x.on("mouseleave","poi-label",()=>{x&&(x.getCanvas().style.cursor="")})})}),n0(()=>{x&&x.remove()});function T(){m.value="",d.value={name:"",phone:"",email:""},s&&(s.remove(),s=null)}function E(){if(m.value&&m.value!=="Khng tm thy a ch"){const A={address:m.value,name:d.value.name,phone:d.value.phone,email:d.value.email};n("address-selected",A)}else alert("Vui lng chn mt a ch hp l trn bn ")}return(A,z)=>(X(),pe("div",xJ,[z[9]||(z[9]=M("h2",{class:"text-xl font-bold mb-4"},"Chn a ch giao hng",-1)),M("div",wJ,[z[7]||(z[7]=M("h3",{class:"font-semibold mb-3"},"Thng tin ngi nhn",-1)),M("div",SJ,[M("div",null,[z[4]||(z[4]=M("label",{class:"block text-sm font-medium mb-1"},"H tn",-1)),_r(M("input",{type:"text","onUpdate:modelValue":z[0]||(z[0]=j=>d.value.name=j),placeholder:"Nhp h tn",class:"w-full p-2 border border-gray-300 rounded-md"},null,512),[[ms,d.value.name]])]),M("div",null,[z[5]||(z[5]=M("label",{class:"block text-sm font-medium mb-1"},"S in thoi",-1)),_r(M("input",{type:"tel","onUpdate:modelValue":z[1]||(z[1]=j=>d.value.phone=j),placeholder:"Nhp s in thoi",class:"w-full p-2 border border-gray-300 rounded-md"},null,512),[[ms,d.value.phone]])]),M("div",CJ,[z[6]||(z[6]=M("label",{class:"block text-sm font-medium mb-1"},"Email",-1)),_r(M("input",{type:"email","onUpdate:modelValue":z[2]||(z[2]=j=>d.value.email=j),placeholder:"Nhp email",class:"w-full p-2 border border-gray-300 rounded-md"},null,512),[[ms,d.value.email]])])])]),z[10]||(z[10]=M("div",{id:"map",style:{height:"400px",width:"100%","border-radius":"8px","margin-bottom":"16px"}},null,-1)),M("div",kJ,[z[8]||(z[8]=M("label",{class:"block text-sm font-medium mb-2"},"a ch c chn:",-1)),_r(M("input",{type:"text","onUpdate:modelValue":z[3]||(z[3]=j=>m.value=j),readonly:"",placeholder:"a ch s hin th  y sau khi chn trn bn ",class:"w-full p-3 border border-gray-300 rounded-md bg-gray-50"},null,512),[[ms,m.value]])]),M("div",TJ,[M("button",{onClick:E,class:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",disabled:!m.value||m.value==="Khng tm thy a ch"}," S dng a ch ny ",8,EJ),M("button",{onClick:T,class:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"}," Xa ")])]))}}),PJ=Lo(IJ,[["__scopeId","data-v-6e85cf7f"]]),AJ={},RJ={class:"flex gap-2 bg-[#f1f1f1] rounded-lg"};function MJ(t,e){return X(),pe("div",RJ,e[0]||(e[0]=[da('<div class="border-r-2 max-w-6 min-w-6 relative border-dashed border-[#d9d9d9] flex-1 before:absolute before:top-1/2 before:left-0 before:-translate-x-1/2 before:-translate-y-1/2 before:rotate-45 before:w-7 before:h-7 before:bg-white before:rounded-full before:content-[&#39;&#39;]"></div><div class="flex flex-col p-2"><div class=""><p class="text-lg font-bold">PICKLEMATE</p><p class="text-xs mb-4"> [Ra mt PickleBall] Gim thm 50k cho n PickleBall t 499k </p></div><div class="flex justify-between items-end"><span class="text-xs">HSD: 12/12/2025</span><span class="text-xs text-blue-500 font-bold cursor-pointer">iu kin</span></div><div class=""></div></div>',2)]))}const Uu=Lo(AJ,[["render",MJ]]),DJ=async(t=0,e=10,n)=>{let l=`/api/order?page=${t}&size=${e}`;return n&&(l+=`&status=${n}`),(await Oi.get(l)).data},LJ=async t=>(await Oi.post("/api/order",t)).data,OJ=async(t=0,e=10)=>{try{return(await Oi.get(`/api/order/me?page=${t}&size=${e}`)).data}catch(n){throw console.error("Error fetching my orders:",n),n}},zJ={class:"relative p-8"},BJ={class:"grid"},FJ={class:"col-6"},$J={class:"flex justify-between mb-4 items-center"},NJ={action:"",class:"mt-2"},VJ={class:"grid items-center"},jJ={class:"col-8"},UJ={class:"flex flex-col gap-2"},qJ={class:"flex flex-col gap-2 col-4"},HJ={class:"flex flex-col gap-2"},GJ={class:"flex flex-col gap-2 mt-2"},WJ={class:"flex mt-4 gap-2 justify-between"},KJ={class:"flex flex-col gap-2 mt-3"},ZJ=["for"],XJ=["src"],YJ={class:"w-full cursor-pointer flex gap-1 flex-col"},JJ={key:0,class:"flex items-center gap-1"},QJ={class:"text-xs"},eQ=["src"],tQ={class:"col-6 max-h-screen overflow-y-auto hide-scrollbar"},nQ={class:"flex items-center justify-between"},rQ={key:0,class:"flex justify-center items-center py-8"},iQ={key:1,class:"text-center py-8"},oQ={class:"flex flex-col"},sQ={class:"text-sm text-gray-500"},aQ={class:"font-bold"},lQ={class:"font-bold"},cQ={class:"my-2 flex gap-4 overflow-x-auto w-full whitespace-nowrap pb-2"},uQ={class:"flex justify-between my-4"},dQ={class:"flex justify-between my-2 border-y py-2 border-[#e6e6e680]"},hQ={class:"flex items-center gap-2 flex-col text-right"},pQ={class:"ml-auto"},fQ={class:"flex justify-between my-2"},mQ={class:"text-primary"},gQ={class:"fixed bottom-0 left-0 right-0 bg-white shadow-lg z-10 border-t border-[#e6e6e680]"},yQ={class:"flex justify-between"},vQ={class:"flex-1 flex items-center bg-[#2f5acf1a] p-4"},bQ={class:"flex-1 flex items-center justify-center"},_Q=["src"],xQ={class:"flex-1 text-right flex items-center justify-end gap-4"},wQ={class:"flex flex-col"},SQ={class:"text-[20px] font-bold text-[#2f5acf]"},CQ=["disabled"],kQ=Xr({__name:"CartPage",setup(t){const e=Xl(),n=U9(),l=Fc(),m=Ke(!1),d=Ke(null),x=Ke([]),s=Ke(""),T=Ke(""),E=Ke(""),A=Ke({name:"Anh/Ch"}),z=Ke([{name:"Anh"},{name:"Ch"},{name:"Anh/Ch"}]),j=Ke(null),U=Ke([{name:"H Ni"},{name:"TP. H Ch Minh"},{name:" Nng"},{name:"Hi Phng"},{name:"Cn Th"}]),K=Ke(""),oe=Ke(""),fe=Ke("Thanh ton khi nhn hng"),me=Ke([{name:"Thanh ton khi nhn hng",key:"cash",image:"https://mcdn.coolmate.me/image/October2024/mceclip2_42.png"},{name:"V momo",key:"momo",image:"https://mcdn.coolmate.me/image/October2024/mceclip1_171.png"},{name:"Thanh ton qua ZaloPay",key:"zalo",image:"https://mcdn.coolmate.me/image/October2024/mceclip3_6.png",sub:"H tr mi hnh thc thanh ton",imageSub:"https://mcdn.coolmate.me/image/October2024/mceclip0_27.png"},{name:"V in t VNPAY",key:"vnpay",image:"https://mcdn.coolmate.me/image/October2024/mceclip0_81.png",sub:"Qut Qr  thanh ton"}]),ne=ki(()=>{const ut=me.value.find(Qe=>Qe.name===fe.value);return ut?ut.image:""}),te=Ke([]),re=Ke(!1),ze=ki(()=>te.value.reduce((ut,Qe)=>ut+Qe.price*Qe.quantity,0)),_t=ut=>{console.log("Received address data:",ut),ut.address&&(K.value=ut.address),ut.name&&(s.value=ut.name),ut.phone&&(T.value=ut.phone),ut.email&&(E.value=ut.email),re.value=!1,e.add({severity:"success",summary:"Thnh cng",detail:" cp nht thng tin a ch giao hng",life:2e3})},Me=async()=>{if(te.value.length===0){e.add({severity:"warn",summary:"Cnh bo",detail:"Vui lng chn sn phm  thanh ton.",life:3e3});return}const ut={items:te.value.map(Qe=>{var wt,Et,on;let Qt;const kt=(Et=(wt=Qe.productDetails)==null?void 0:wt.images)==null?void 0:Et[0];return typeof kt=="string"&&(Qt=kt),{cartItemId:Qe.id,productSku:Qe.sku,productName:((on=Qe.productDetails)==null?void 0:on.name)||"",quantity:Qe.quantity,price:Qe.price,image:Qt}}),shippingAddress:K.value,paymentMethod:fe.value==="Thanh ton khi nhn hng"?"CASH":fe.value,receiverName:s.value,receiverPhone:T.value,receiverEmail:E.value,note:oe.value};try{await LJ(ut),e.add({severity:"success",summary:"Thnh cng",detail:"n hng  c to thnh cng!",life:2e3}),l.push("/order-success")}catch{e.add({severity:"error",summary:"Li",detail:"Khng th to n hng. Vui lng th li.",life:3e3})}},he=ut=>{console.log("Updated quantity for item:",ut),AY(ut.id,ut.quantity).then(()=>{e.add({severity:"success",summary:"Thnh cng",detail:" cp nht s lng sn phm",life:2e3}),Je()}).catch(Qe=>{console.error("Error updating quantity:",Qe),e.add({severity:"error",summary:"Li",detail:"Khng th cp nht s lng sn phm",life:3e3})})},Ce=ut=>ut&&ut.length>0&&typeof ut[0]=="string"?ut[0]:"https://via.placeholder.com/120",$e=ut=>{const Qe=ut.split("-");if(Qe.length>=3){const Qt=Qe[1],kt=Qe[2];return`${{"#FF0000":"Red","#0000FF":"Blue","#000000":"Black","#FFFFFF":"White","#FFFF00":"Yellow","#00FF00":"Green"}[Qt]||Qt} - ${kt}`}return ut},Je=async()=>{m.value=!0;try{const ut=await IY();d.value=ut,x.value=ut.items}catch(ut){console.log(ut),e.add({severity:"error",summary:"Li",detail:"Khng th ti gi hng",life:3e3})}finally{m.value=!1}};Co(()=>{Je()});const ft=()=>{if(te.value.length===0){e.add({severity:"warn",summary:"Cnh bo",detail:"Vui lng chn sn phm  xa.",life:3e3});return}n.require({message:`Bn c chc chn mun xa ${te.value.length} sn phm  chn khi gi hng khng?`,header:"Xc nhn xa nhiu sn phm",icon:"pi pi-exclamation-triangle",accept:()=>{const ut=te.value.map(Qe=>Qe.id);RY(ut).then(()=>{e.add({severity:"success",summary:"Thnh cng",detail:` xa ${ut.length} sn phm khi gi hng.`,life:3e3}),Je(),te.value=[]}).catch(Qe=>{console.error("Error deleting bulk cart items:",Qe),e.add({severity:"error",summary:"Li",detail:"Khng th xa sn phm khi gi hng.",life:3e3})})},reject:()=>{}})};return(ut,Qe)=>{var kt,wt;const Qt=wn("router-link");return X(),pe(an,null,[M("div",zJ,[M("div",BJ,[M("div",FJ,[M("div",$J,[Qe[13]||(Qe[13]=M("p",{class:"text-[30px] font-bold"},"Thng tin t hng",-1)),M("p",{class:"cursor-pointer text-[#2f5acf]",onClick:Qe[0]||(Qe[0]=Et=>re.value=!0)},"Chn t s a ch")]),M("form",NJ,[M("div",VJ,[M("div",jJ,[M("div",UJ,[Qe[14]||(Qe[14]=M("label",{for:"name",class:"text-[#000000b3]"},"H tn",-1)),ge(Ie(Qg),{class:"rounded-full h-12"},{default:Xe(()=>[ge(Ie(ey),{class:"!rounded-l-full !bg-[#f1f1f1]"},{default:Xe(()=>[ge(Ie(xs),{modelValue:A.value,"onUpdate:modelValue":Qe[1]||(Qe[1]=Et=>A.value=Et),options:z.value,optionLabel:"name",placeholder:"Select a Gender",class:"border-none !w-32 shadow-none !bg-inherit"},null,8,["modelValue","options"])]),_:1}),ge(Ie(vo),{modelValue:s.value,"onUpdate:modelValue":Qe[2]||(Qe[2]=Et=>s.value=Et),placeholder:"Nhp h tn ca bn",class:"!rounded-r-full focus:!border-[#cbd5e1]",id:"name"},null,8,["modelValue"])]),_:1})])]),M("div",qJ,[Qe[15]||(Qe[15]=M("label",{for:"phone"},"S in thoi",-1)),ge(Ie(vo),{modelValue:T.value,"onUpdate:modelValue":Qe[3]||(Qe[3]=Et=>T.value=Et),placeholder:"Nhp s in thoi",class:"!rounded-r-full focus:!border-[#cbd5e1] h-12",id:"phone"},null,8,["modelValue"])])]),M("div",HJ,[Qe[16]||(Qe[16]=M("label",{for:"email"},"Email",-1)),ge(Ie(vo),{modelValue:E.value,"onUpdate:modelValue":Qe[4]||(Qe[4]=Et=>E.value=Et),placeholder:"Nhp email ca bn",class:"!rounded-r-full focus:!border-[#cbd5e1] h-12",type:"email",id:"email"},null,8,["modelValue"])]),M("div",GJ,[Qe[17]||(Qe[17]=M("label",{for:"address"},"a ch",-1)),ge(Ie(vo),{modelValue:K.value,"onUpdate:modelValue":Qe[5]||(Qe[5]=Et=>K.value=Et),placeholder:"Nhp a ch ca bn",class:"!rounded-r-full focus:!border-[#cbd5e1] h-12",id:"address"},null,8,["modelValue"])]),M("div",WJ,[ge(Ie(xs),{modelValue:j.value,"onUpdate:modelValue":Qe[6]||(Qe[6]=Et=>j.value=Et),options:U.value,optionLabel:"name",placeholder:"Select a City",class:"!rounded-r-full flex-1"},null,8,["modelValue","options"]),ge(Ie(xs),{modelValue:j.value,"onUpdate:modelValue":Qe[7]||(Qe[7]=Et=>j.value=Et),options:U.value,optionLabel:"name",placeholder:"Select a City",class:"!rounded-r-full flex-1"},null,8,["modelValue","options"]),ge(Ie(xs),{modelValue:j.value,"onUpdate:modelValue":Qe[8]||(Qe[8]=Et=>j.value=Et),options:U.value,optionLabel:"name",placeholder:"Select a City",class:"!rounded-r-full flex-1"},null,8,["modelValue","options"])]),M("div",KJ,[Qe[18]||(Qe[18]=M("label",{for:"note"},"Ghi ch",-1)),ge(Ie(vo),{modelValue:oe.value,"onUpdate:modelValue":Qe[9]||(Qe[9]=Et=>oe.value=Et),placeholder:"Nhp ghi ch",class:"!rounded-r-full focus:!border-[#cbd5e1] h-12",id:"note"},null,8,["modelValue"])]),ge(Ie(Rh),{class:"my-4"}),Qe[19]||(Qe[19]=M("p",null,"Hnh thc thanh ton",-1)),(X(!0),pe(an,null,fr(me.value,Et=>(X(),pe("div",{key:Et.key,class:"flex items-center gap-2"},[M("label",{for:Et.key,class:vn(["border border-[#e6e6e680] flex gap-2 w-full my-2 px-4 py-2 rounded-lg items-center cursor-pointer transition-colors duration-200",{"bg-[#e6e6e680]":fe.value===Et.name}])},[ge(Ie(gs),{modelValue:fe.value,"onUpdate:modelValue":Qe[10]||(Qe[10]=on=>fe.value=on),inputId:Et.key,name:"dynamic",value:Et.name},null,8,["modelValue","inputId","value"]),M("img",{src:Et.image,alt:"",class:"max-w-[55px] max-h-[44px] min-w-[44px]"},null,8,XJ),M("div",YJ,[M("span",null,Ue(Et.name),1),Et.sub?(X(),pe("span",JJ,[M("span",QJ,Ue(Et.sub),1),Et.imageSub?(X(),pe("img",{key:0,src:Et.imageSub,alt:"",class:"w-4 h-4"},null,8,eQ)):Ct("",!0)])):Ct("",!0)])],10,ZJ)]))),128))])]),M("div",tQ,[M("div",nQ,[Qe[20]||(Qe[20]=M("div",{class:"text-[30px] font-bold"},"Gi hng",-1)),ge(Ie(jr),{icon:"pi pi-trash",class:"p-button-sm bg-white !text-black !border-black cursor-pointer hover:!bg-black hover:!text-white transition-all duration-300",onClick:ft,label:"Xa",disabled:x.value.length===0},null,8,["disabled"])]),m.value?(X(),pe("div",rQ,Qe[21]||(Qe[21]=[M("div",{class:"loading-spinner"},null,-1),M("span",{class:"ml-2"},"ang ti gi hng...",-1)]))):x.value.length===0?(X(),pe("div",iQ,Qe[22]||(Qe[22]=[M("p",{class:"text-gray-500"},"Gi hng trng",-1)]))):(X(),bt(Ie(Xs),{key:2,selection:te.value,"onUpdate:selection":Qe[11]||(Qe[11]=Et=>te.value=Et),value:x.value,dataKey:"id",tableStyle:"min-width: 50rem"},{default:Xe(()=>[ge(Ie(jn),{selectionMode:"multiple",headerStyle:"width: 3rem"}),ge(Ie(jn),{field:"image",header:"Hnh nh",headerStyle:"width: 100px",bodyStyle:"width: 100px"},{body:Xe(Et=>{var on;return[ge(Ie(jy),{src:Ce((on=Et.data.productDetails)==null?void 0:on.images),alt:"Product image",width:"120",height:"120",class:"rounded square-image",preview:"",pt:{image:{class:"object-cover w-full h-full"},root:{class:"w-[120px] h-[120px]"}}},null,8,["src"])]}),_:1}),ge(Ie(jn),{field:"name",header:"Tn sn phm",headerStyle:"width: 220px",bodyStyle:"width: 220px"},{body:Xe(Et=>[M("div",oQ,[ge(Qt,{to:{name:"product",params:{id:Et.data.productDetails.id}},class:"font-semibold text-blue-600 hover:underline"},{default:Xe(()=>{var on;return[tr(Ue(((on=Et.data.productDetails)==null?void 0:on.name)||"ang ti..."),1)]}),_:2},1032,["to"]),M("span",sQ,Ue($e(Et.data.sku)),1)])]),_:1}),ge(Ie(jn),{field:"price",header:"Gi",headerStyle:"width: 100px",bodyStyle:"width: 100px"},{body:Xe(Et=>[M("span",aQ,Ue(Ie(Vl)(Et.data.price)),1)]),_:1}),ge(Ie(jn),{field:"quantity",header:"S lng",headerStyle:"width: 160px",bodyStyle:"width: 160px"},{body:Xe(Et=>[ge(Ie(j_),{modelValue:Et.data.quantity,"onUpdate:modelValue":on=>Et.data.quantity=on,showButtons:"",buttonLayout:"horizontal",min:1,max:99,size:"small","input-class":"w-[42px]",onChange:on=>he(Et.data)},{incrementbuttonicon:Xe(()=>Qe[23]||(Qe[23]=[M("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:Xe(()=>Qe[24]||(Qe[24]=[M("span",{class:"pi pi-minus"},null,-1)])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),ge(Ie(jn),{field:"total",header:"Tng",headerStyle:"width: 220px",bodyStyle:"width: 220px"},{body:Xe(Et=>[M("span",lQ,Ue(Ie(Vl)(Et.data.price*Et.data.quantity)),1)]),_:1})]),_:1},8,["selection","value"])),M("div",cQ,[ge(Uu),ge(Uu),ge(Uu),ge(Uu)]),Qe[29]||(Qe[29]=M("div",{class:"my-2 flex gap-2"},[M("input",{type:"text",class:"w-full rounded-full border border-[#e6e6e680] p-2 bg-[#eeeeee]",placeholder:"Nhp m gim gi"}),M("button",{class:"bg-black text-white px-6 py-1 rounded-full cursor-pointer text-sm w-[30%]"},"p dng Voucher")],-1)),M("div",uQ,[Qe[25]||(Qe[25]=M("span",null,"Tm tnh",-1)),M("span",null,Ue(Ie(Vl)(ze.value)),1)]),Qe[30]||(Qe[30]=M("div",{class:"flex justify-between my-2"},[M("span",null,"Gim gi"),M("span",null,"35000")],-1)),Qe[31]||(Qe[31]=M("div",{class:"flex justify-between my-2"},[M("span",null,"Ph vn chuyn"),M("span",null,"356000")],-1)),M("div",dQ,[Qe[27]||(Qe[27]=M("span",null,"Tng cng",-1)),M("div",hQ,[M("span",pQ,Ue(Ie(Vl)(((kt=d.value)==null?void 0:kt.totalPrice)||0)),1),Qe[26]||(Qe[26]=M("span",{class:"text-red-400"},"( gim 40.000 trn gi gc)",-1))])]),M("div",fQ,[Qe[28]||(Qe[28]=M("span",null,"Hon tin",-1)),M("span",mQ,Ue(Ie(Vl)(((wt=d.value)==null?void 0:wt.totalPrice)||0)),1)])])]),M("div",gQ,[M("div",yQ,[M("div",vQ,[M("div",bQ,[M("img",{src:ne.value,alt:"",class:"max-w-[55px] max-h-[44px] min-w-[44px]"},null,8,_Q)]),Qe[32]||(Qe[32]=M("span",{class:"border-l border-black pl-4 flex-1 text-center"},"Cha dng voucher",-1))]),M("div",xQ,[M("div",wQ,[M("p",null,[Qe[33]||(Qe[33]=tr("Thnh tin ")),M("span",SQ,Ue(Ie(Vl)(ze.value)),1)]),Qe[34]||(Qe[34]=M("p",null,[tr("c hon "),M("span",{class:"border-r border-black mr-2 pr-2 font-bold"},"1000"),tr("Tit kim "),M("span",{class:"font-bold"},"1000")],-1))]),M("button",{class:"bg-black text-white px-8 py-2 rounded-full cursor-pointer pay-btn",onClick:Me,disabled:te.value.length===0},"Thanh ton",8,CQ)])])])]),ge(Ie(Ra),{visible:re.value,"onUpdate:visible":Qe[12]||(Qe[12]=Et=>re.value=Et),modal:"",header:"Edit Profile",style:{width:"900px",maxWidth:"95vw"}},{default:Xe(()=>[ge(PJ,{onAddressSelected:_t})]),_:1},8,["visible"]),ge(Ie(s6)),ge(Ie(Mh))],64)}}}),TQ={class:"bg-[#d9d9d9] min-h-screen p-8"},EQ={class:"bg-white rounded-lg py-6 px-8 flex"},IQ={class:"w-[70%]"},PQ=["src"],AQ={class:"rounded mt-6 flex"},RQ={class:"w-1/4 mr-8"},MQ=["onClick"],DQ={class:"flex justify-between items-center gap-2"},LQ={class:"w-full bg-white rounded-lg p-4"},OQ=Xr({__name:"AccountPage",setup(t){const e=Fc(),n=M_(),l=ki(()=>n.path),m=Ke([{title:"Thng tin ti khon",subtitle:"Thng tin c nhn",icon:"pi pi-user",path:"/account/info"},{title:"Sn phm yu thch",subtitle:"Sn phm yu thch",icon:"pi pi-heart",path:"/account/favorites"},{title:"n hng ca ti",subtitle:"Theo di n hng",icon:"pi pi-shopping-bag",path:"/account/orders"},{title:"a ch giao hng",subtitle:"Qun l a ch",icon:"pi pi-map-marker",path:"/account/address"},{title:"V Voucher",subtitle:"V Voucher",icon:"pi pi-ticket",path:"/account/voucher"},{title:"i mt khu",subtitle:"Bo mt ti khon",icon:"pi pi-lock",path:"/account/password"}]),d=s=>{e.push(s)},x=Ke(["https://mcdn.coolmate.me/image/October2023/mceclip0_92.png","https://mcdn.coolmate.me/image/September2023/mceclip0_56.png","https://mcdn.coolmate.me/image/September2023/mceclip3_45.png","https://mcdn.coolmate.me/image/September2023/mceclip1_32.png"]);return Ke(!1),Ke({shopName:"",phone:"",email:""}),(s,T)=>{const E=wn("router-view");return X(),pe("div",TQ,[M("div",EQ,[M("div",IQ,[T[0]||(T[0]=da('<div class="font-bold text-2xl">Hi V Nguyn Duy</div><div class=""><img src="https://mcdn.coolmate.me/image/October2023/mceclip0_92.png" alt="" class="h-8 mt-2"></div><div class="flex items-center gap-2 mt-2"><p>Chi thm <span class="text-primary font-bold">500.000</span>  ln hng</p><img src="https://mcdn.coolmate.me/image/October2023/mceclip0_92.png" alt="" class="h-4"></div>',3)),ge(Ie(OS),{value:x.value,layout:"horizontal",align:"top",class:"mr-8",pt:{eventContent:({context:A})=>({class:A.index===x.value.length-1?"!w-[70px]":""})}},{content:Xe(A=>[M("img",{src:A.item,alt:"",class:"h-6"},null,8,PQ)]),_:1},8,["value","pt"]),T[1]||(T[1]=M("p",{class:"italic text-sm text-gray-500"},"Hng thnh vin c va c xt li vo ngy 01/04/2025, ngy xt hng tip theo: 01/07/2025 ",-1))])]),M("div",AQ,[M("div",RQ,[(X(!0),pe(an,null,fr(m.value,A=>(X(),pe("div",{key:A.title,class:vn(["rounded-lg p-3 flex justify-between items-center cursor-pointer mb-4 transition-all duration-300",l.value===A.path?"bg-black text-white":"bg-white hover:!bg-black hover:text-white"]),onClick:z=>d(A.path)},[M("div",DQ,[M("i",{class:vn(A.icon)},null,2),M("p",null,Ue(A.title),1)]),T[2]||(T[2]=M("i",{class:"pi pi-arrow-right"},null,-1))],10,MQ))),128))]),M("div",LQ,[M("div",null,[ge(E)])])])])}}}),m_={getUsers:async(t={})=>(await Oi.get("/api/profile",{params:t})).data,getUserById:async t=>(await Oi.get(`/api/profile/${t}`)).data,updateUserStatus:async(t,e)=>(await Oi.patch(`/api/profile/${t}/status`,{status:e})).data,deleteUser:async t=>{await Oi.delete(`/api/profile/${t}`)},getCurrentProfile:async()=>{try{return(await Oi.get("/api/profile/current")).data}catch(t){throw console.error("Error fetching current profile:",t),t}},updateProfile:async t=>{try{return(await Oi.put("/api/profile",t)).data}catch(e){throw console.error("Error updating profile:",e),e}}},zQ={key:0,class:"flex items-center gap-2 my-4"},BQ={key:1},FQ={class:"grid my-2"},$Q={class:"col-8"},NQ={class:"grid my-2"},VQ={class:"col-8"},jQ={class:"grid my-2"},UQ={class:"col-8"},qQ={class:"grid my-2"},HQ={class:"col-8"},GQ={class:"grid my-2"},WQ={class:"col-8"},KQ={class:"grid my-2"},ZQ={class:"col-8"},XQ={class:"grid my-2"},YQ={class:"col-8"},JQ={key:2,class:"text-gray-500 my-4"},QQ={class:"flex flex-wrap gap-4 my-4"},eee={class:"flex items-center gap-2"},tee={class:"flex items-center gap-2"},nee={class:"flex items-center gap-2"},ree={class:"mb-4"},iee={class:"my-4 flex items-center gap-2 justify-between"},oee={class:"flex items-center gap-4"},see={class:"text-sm text-primary w-[60px] text-right"},aee={class:"my-4 flex items-center gap-2 justify-between"},lee={class:"flex items-center gap-4"},cee={class:"text-sm text-primary w-[60px] text-right"},uee=["disabled"],dee={class:"gap-2 flex flex-col"},hee=Xr({__name:"InfoPage",setup(t){const e=Ke(!1),n=Ke(!1),l=Ke(""),m=Ke(""),d=Ke(""),x=Ke(null),s=Ke(!1),T=Ke(""),E=Ke(""),A=Ke(0),z=Ke(0),j=Ke(""),U=Ke(""),K=Ke(""),oe=Ke(null),fe=Ke(!1),me=async()=>{try{s.value=!0;const Me=await m_.getCurrentProfile();x.value={userId:Me.userId,phone:Me.phone,email:Me.email,username:Me.username,fullName:Me.fullName,type:Me.type,image:Me.image,height:Me.height,weight:Me.weight,gender:Me.gender,shopName:Me.shopName,role:Array.isArray(Me.role)?Me.role:[Me.role||""],dob:Me.dob},oe.value=x.value.dob?new Date(x.value.dob):null}finally{s.value=!1}};Co(()=>{me()});function ne(Me){return Me?Me==="male"||Me==="Nam"?"Nam":Me==="female"||Me==="N"?"N":Me==="lgbt"?"LGBT":Me:"Cha cp nht"}function te(Me){if(!Me)return"Cha cp nht";const he=Me.split("T")[0],[Ce,$e,Je]=he.split("-");return Ce&&$e&&Je?`${Je}/${$e}/${Ce}`:Me}function re(Me){if(!Me)return;if(typeof Me=="string")return Me;const he=Me.getFullYear(),Ce=String(Me.getMonth()+1).padStart(2,"0"),$e=String(Me.getDate()).padStart(2,"0");return`${he}-${Ce}-${$e}`}function ze(){x.value&&(T.value=x.value.fullName||x.value.username,E.value=x.value.gender||"",A.value=x.value.height||0,z.value=x.value.weight||0,j.value=x.value.email||"",U.value=x.value.phone||"",K.value=x.value.image||"",oe.value=x.value.dob?new Date(x.value.dob):null,e.value=!0)}const _t=async()=>{if(!x.value)return;const Me={email:j.value||void 0,phone:U.value||void 0,fullName:T.value||void 0,image:K.value||void 0,gender:E.value||void 0,dob:re(oe.value),height:A.value||void 0,weight:z.value||void 0};try{fe.value=!0,await m_.updateProfile(Me),x.value&&(x.value={...x.value,email:j.value||x.value.email,phone:U.value||x.value.phone,fullName:T.value||x.value.fullName,image:K.value||x.value.image,gender:E.value||x.value.gender,dob:re(oe.value)||x.value.dob,height:A.value||x.value.height,weight:z.value||x.value.weight}),e.value=!1,alert("Cp nht thng tin thnh cng!")}catch(he){console.error("Error updating profile:",he),alert("Cp nht thng tin tht bi.")}finally{fe.value=!1}};return(Me,he)=>(X(),pe(an,null,[he[38]||(he[38]=M("p",{class:"text-2xl font-bold"},"Thng tin ti khon",-1)),s.value?(X(),pe("div",zQ,he[15]||(he[15]=[M("div",{class:"loading-spinner"},null,-1),M("span",null,"ang ti thng tin...",-1)]))):x.value?(X(),pe("div",BQ,[M("div",FQ,[he[16]||(he[16]=M("span",{class:"col-4"},"H v Tn",-1)),M("span",$Q,Ue(x.value.fullName||x.value.username),1)]),M("div",NQ,[he[17]||(he[17]=M("span",{class:"col-4"},"S in thoi",-1)),M("span",VQ,Ue(x.value.phone||"Cha cp nht"),1)]),M("div",jQ,[he[18]||(he[18]=M("span",{class:"col-4"},"Gii tnh",-1)),M("span",UQ,Ue(ne(x.value.gender)),1)]),M("div",qQ,[he[19]||(he[19]=M("span",{class:"col-4"},"Ngy sinh",-1)),M("span",HQ,Ue(te(x.value.dob)),1)]),M("div",GQ,[he[20]||(he[20]=M("span",{class:"col-4"},"Chiu cao",-1)),M("span",WQ,Ue(x.value.height?x.value.height+"cm":"Cha cp nht"),1)]),M("div",KQ,[he[21]||(he[21]=M("span",{class:"col-4"},"Cn nng",-1)),M("span",ZQ,Ue(x.value.weight?x.value.weight+"kg":"Cha cp nht"),1)]),M("button",{class:"px-4 py-2 rounded-full mt-2 border font-bold cursor-pointer hover:!bg-gray-200 transition-all duration-300",onClick:ze}," Cp nht "),he[23]||(he[23]=M("p",{class:"text-2xl font-bold mt-4"},"Thng tin ng nhp",-1)),M("div",XQ,[he[22]||(he[22]=M("span",{class:"col-4"},"Email",-1)),M("span",YQ,Ue(x.value.email),1)]),he[24]||(he[24]=M("div",{class:"grid my-2"},[M("span",{class:"col-4"},"Mt khu"),M("span",{class:"col-8"},"*****************")],-1)),M("button",{class:"px-4 py-2 rounded-full mt-2 border font-bold cursor-pointer hover:!bg-gray-200 transition-all duration-300",onClick:he[0]||(he[0]=Ce=>n.value=!0)}," Cp nht ")])):(X(),pe("div",JQ,"Khng th ti thng tin ti khon")),ge(Ie(Ra),{visible:e.value,"onUpdate:visible":he[10]||(he[10]=Ce=>e.value=Ce),modal:"",header:"Chnh sa thng tin ti khon",style:{width:"50vw"}},{default:Xe(()=>[ge(Ie(Qg),{class:"md:w-80 !rounded-full mb-4"},{default:Xe(()=>[ge(Ie(ey),{class:"!rounded-l-full"},{default:Xe(()=>he[25]||(he[25]=[M("i",{class:"pi pi-envelope"},null,-1)])),_:1}),ge(Ie(Db),null,{default:Xe(()=>[ge(Ie(vo),{modelValue:j.value,"onUpdate:modelValue":he[1]||(he[1]=Ce=>j.value=Ce),inputId:"email",class:"!rounded-r-full focus:!border-gray-300",style:{"border-left":"none"}},null,8,["modelValue"]),he[26]||(he[26]=M("label",{for:"email"},"Email",-1))]),_:1})]),_:1}),ge(Ie(Qg),{class:"md:w-80 !rounded-full mb-4"},{default:Xe(()=>[ge(Ie(ey),{class:"!rounded-l-full"},{default:Xe(()=>he[27]||(he[27]=[M("i",{class:"pi pi-phone"},null,-1)])),_:1}),ge(Ie(Db),null,{default:Xe(()=>[ge(Ie(vo),{modelValue:U.value,"onUpdate:modelValue":he[2]||(he[2]=Ce=>U.value=Ce),inputId:"phone",class:"!rounded-r-full focus:!border-gray-300",style:{"border-left":"none"}},null,8,["modelValue"]),he[28]||(he[28]=M("label",{for:"phone"},"S in thoi",-1))]),_:1})]),_:1}),ge(Ie(Qg),{class:"md:w-80 !rounded-full mb-4"},{default:Xe(()=>[ge(Ie(ey),{class:"!rounded-l-full"},{default:Xe(()=>he[29]||(he[29]=[M("i",{class:"pi pi-user"},null,-1)])),_:1}),ge(Ie(Db),null,{default:Xe(()=>[ge(Ie(vo),{modelValue:T.value,"onUpdate:modelValue":he[3]||(he[3]=Ce=>T.value=Ce),inputId:"name",class:"!rounded-r-full focus:!border-gray-300",style:{"border-left":"none"}},null,8,["modelValue"]),he[30]||(he[30]=M("label",{for:"name"},"H v tn",-1))]),_:1})]),_:1}),M("div",QQ,[M("div",eee,[ge(Ie(gs),{modelValue:E.value,"onUpdate:modelValue":he[4]||(he[4]=Ce=>E.value=Ce),inputId:"male",name:"gender",value:"male",class:vn({"border-2 border-black rounded-full":E.value==="male"})},null,8,["modelValue","class"]),he[31]||(he[31]=M("label",{for:"male",class:"cursor-pointer"},"Nam",-1))]),M("div",tee,[ge(Ie(gs),{modelValue:E.value,"onUpdate:modelValue":he[5]||(he[5]=Ce=>E.value=Ce),inputId:"female",name:"gender",value:"female",class:vn({"border-2 border-black rounded-full":E.value==="female"})},null,8,["modelValue","class"]),he[32]||(he[32]=M("label",{for:"female",class:"cursor-pointer"},"N",-1))]),M("div",nee,[ge(Ie(gs),{modelValue:E.value,"onUpdate:modelValue":he[6]||(he[6]=Ce=>E.value=Ce),inputId:"lgbt",name:"gender",value:"lgbt",class:vn({"border-2 border-black rounded-full":E.value==="lgbt"})},null,8,["modelValue","class"]),he[33]||(he[33]=M("label",{for:"lgbt",class:"cursor-pointer"},"LGBT",-1))])]),M("div",ree,[he[34]||(he[34]=M("label",{class:"block mb-2 font-semibold"},"Ngy sinh",-1)),ge(Ie(TS),{modelValue:oe.value,"onUpdate:modelValue":he[7]||(he[7]=Ce=>oe.value=Ce),class:"w-full",placeholder:"Chn ngy sinh",dateFormat:"dd/mm/yy"},null,8,["modelValue"])]),M("div",iee,[he[35]||(he[35]=M("span",null,"Chiu cao",-1)),M("div",oee,[ge(Ie(k2),{modelValue:A.value,"onUpdate:modelValue":he[8]||(he[8]=Ce=>A.value=Ce),class:"w-56",min:0,max:250},null,8,["modelValue"]),M("span",see,Ue(A.value)+"cm",1)])]),M("div",aee,[he[36]||(he[36]=M("span",null,"Cn nng",-1)),M("div",lee,[ge(Ie(k2),{modelValue:z.value,"onUpdate:modelValue":he[9]||(he[9]=Ce=>z.value=Ce),class:"w-56",min:0,max:250},null,8,["modelValue"]),M("span",cee,Ue(z.value)+"kg",1)])]),M("button",{class:"px-4 py-2 rounded-full mt-2 border font-bold cursor-pointer w-full bg-black text-white hover:!bg-gray-600 transition-all duration-300",onClick:_t,disabled:fe.value},Ue(fe.value?"ang cp nht...":"Cp nht"),9,uee)]),_:1},8,["visible"]),ge(Ie(Ra),{visible:n.value,"onUpdate:visible":he[14]||(he[14]=Ce=>n.value=Ce),modal:"",header:"Thay i mt khu",style:{width:"40vw"}},{default:Xe(()=>[M("div",dee,[ge(Ie(yf),{modelValue:l.value,"onUpdate:modelValue":he[11]||(he[11]=Ce=>l.value=Ce),placeholder:"Mt khu c",toggleMask:"",class:"!w-full"},null,8,["modelValue"]),ge(Ie(yf),{modelValue:m.value,"onUpdate:modelValue":he[12]||(he[12]=Ce=>m.value=Ce),placeholder:"Mt khu mi",toggleMask:""},null,8,["modelValue"]),ge(Ie(yf),{modelValue:d.value,"onUpdate:modelValue":he[13]||(he[13]=Ce=>d.value=Ce),placeholder:"Xc nhn mt khu",toggleMask:""},null,8,["modelValue"]),he[37]||(he[37]=M("button",{class:"px-4 py-2 rounded-full mt-2 border font-bold cursor-pointer w-full bg-black text-white hover:!bg-gray-600 transition-all duration-300"}," Cp nht ",-1))])]),_:1},8,["visible"])],64))}}),pee=Lo(hee,[["__scopeId","data-v-0c13eef0"]]),fee={class:"bg-[#2f5acf] px-4 py-2 flex justify-between items-center rounded-lg"},mee={class:"text-white flex flex-col gap-2"},gee={class:"font-bold"},yee={class:"text-xs"},vee={class:"bg-white text-black px-4 py-2 rounded-full text-xs"},bee={class:"border-b border-gray-200 px-4 py-2 flex gap-4"},_ee=["src"],xee={class:"px-4 flex justify-between items-center py-2"},wee={class:"flex gap-4"},See={class:"font-bold text-xs"},Cee=Xr({__name:"OrderCard",props:{order:{}},setup(t){const e=Fc(),n=d=>new Date(d).toLocaleDateString("vi-VN"),l=d=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(d),m=d=>{switch(d){case"PENDING":return"Ch x l";case"PROCESSING":return"ang x l";case"SHIPPED":return"ang giao hng";case"DELIVERED":return" giao hng";case"CANCELLED":return" hy";case"REFUNDED":return" hon tr";default:return d}};return(d,x)=>(X(),pe("div",{class:"rounded-lg bg-gray-100 cursor-pointer",onClick:x[1]||(x[1]=s=>Ie(e).push(`/account/orders/${d.order.orderId}`))},[M("div",fee,[M("div",mee,[M("span",gee,"#"+Ue(d.order.orderId),1),M("span",yee,Ue(n(d.order.createdAt)),1)]),M("button",vee,Ue(m(d.order.status)),1)]),M("div",null,[M("div",bee,[M("img",{src:d.order.image,alt:"",class:"rounded-lg !w-24 !h-24 object-cover"},null,8,_ee),x[2]||(x[2]=M("div",{class:"flex flex-col gap-2 justify-center"},[M("span",{class:"font-bold"},"o ba l nam mc trong thong kh nhanh kh"),M("span",null,"Trng / L"),M("span",null,"x4"),M("span",{class:"font-bold"},"89.000")],-1))]),M("div",xee,[M("div",wee,[M("button",{class:"bg-white text-black px-4 py-2 rounded-full text-xs border border-black hover:!bg-black hover:!text-white transition-all duration-300",onClick:x[0]||(x[0]=Ih(s=>Ie(e).push("/message"),["stop"]))}," Cn h tr "),x[3]||(x[3]=M("button",{class:"bg-black text-white px-4 py-2 rounded-full text-xs hover:!bg-white hover:!text-black transition-all duration-300 border border-black"}," Mua li ",-1))]),M("span",See,Ue(l(d.order.totalAmount)),1)])])]))}}),kee={class:"text-sm text-gray-500 mt-2"},Tee={class:"!grid grid-cols-1 gap-4 mt-4"},Eee=Xr({__name:"OrderPage",setup(t){const e=Ke([]),n=Ke(!1),l=Ke(0),m=Ke(10),d=Ke(0),x=async()=>{n.value=!0;try{const T=await OJ(l.value,m.value);e.value=T.orders,d.value=T.totalElements}catch{}finally{n.value=!1}};Co(()=>{x()});const s=T=>{l.value=T.page,m.value=T.rows,x()};return(T,E)=>(X(),pe("div",null,[E[0]||(E[0]=M("p",{class:"text-2xl font-bold"},"Lch s n hng",-1)),M("p",kee,"n hng ca bn: "+Ue(d.value)+" n hng",1),M("div",Tee,[(X(!0),pe(an,null,fr(e.value,A=>(X(),bt(Cee,{key:A.orderId,order:A},null,8,["order"]))),128))]),ge(Ie(U_),{rows:m.value,totalRecords:d.value,first:l.value*m.value,onPage:s,lazy:!0,rowsPerPageOptions:[5,10,20,50],class:"mt-6"},null,8,["rows","totalRecords","first"])]))}}),Iee={};function Pee(t,e){return e[0]||(e[0]=da('<div class="flex justify-between items-center border-b pb-4 border-gray-200"><span class="text-2xl font-bold">a ch ca ti</span><button class="bg-primary text-white rounded-lg p-3 cursor-pointer">Thm a ch mi</button></div><p class="text-lg font-bold my-4">S a ch</p><div class="border-b pb-4 border-gray-200"><div class="flex justify-between items-center"><div class="flex items-center gap-2"><span>V Nguyn Duy</span><div class="flex items-center gap-2 rounded-full border px-2 py-1"><i class="pi pi-star-fill" style="font-size:10px;"></i><span>Mc nh</span></div></div><div class=""><span class="border-r pr-4">Cp nht</span><span class="pl-4">Xa</span></div></div><p class="my-2">0329028367</p><p>Ph Yn, Phng Ho Hip Trung, Th x ng Ha, Ph Yn</p></div>',3))}const Aee=Lo(Iee,[["render",Pee]]),Ree={};function Mee(t,e){return X(),pe("div",null,e[0]||(e[0]=[M("h1",null,"t hng thnh cng",-1)]))}const Dee=Lo(Ree,[["render",Mee]]),Lee={class:"my-4 grid grid-cols-3 gap-4"},Oee=Xr({__name:"VoucherPage",setup(t){return(e,n)=>(X(),pe(an,null,[n[0]||(n[0]=M("h2",{class:"text-2xl font-bold"},"V voucher ca ti",-1)),M("div",Lee,[ge(Uu),ge(Uu),ge(Uu),ge(Uu)]),n[1]||(n[1]=da('<div class="w-full relative"><img src="https://mcdn.coolmate.me/image/September2023/mceclip0_96.jpg" alt="" class="w-full object-cover"><div class="absolute bottom-10 left-10"><p class="text-xl font-bold">Nhiu u i hp dn</p><p class="text-xl font-bold">ang ch bn</p><button class="bg-black text-white px-4 py-2 rounded-full mt-4">Xem thm</button></div></div>',1))],64))}}),zee={class:"min-h-screen py-4"},Bee={class:"flex gap-4 items-center border-b pb-4 px-24 border-gray-200"},Fee={class:"px-24 mt-4"},$ee=Xr({__name:"SpotlightPage",setup(t){const e=Ke(""),n=Ke({name:"o polo"}),l=Ke([{name:"o polo"},{name:"o s mi"},{name:"o khoc"},{name:"Qun"},{name:" bng"},{name:"Ph kin"},{name:"Giy"},{name:"Bng"},{name:"Bng bn"}]),m=()=>{console.log("Searching for:",e.value)};return(d,x)=>(X(),pe("div",zee,[M("div",Bee,[x[2]||(x[2]=M("p",{class:"font-bold text-2xl"},"Sn phm",-1)),ge(Ie(vo),{modelValue:e.value,"onUpdate:modelValue":x[0]||(x[0]=s=>e.value=s),placeholder:"Tm kim",class:"w-52",onKeyup:qi(m,["enter"]),pt:{root:()=>({class:"!rounded-2xl"})}},null,8,["modelValue"]),ge(Ie(xs),{modelValue:n.value,"onUpdate:modelValue":x[1]||(x[1]=s=>n.value=s),options:l.value,optionLabel:"name",placeholder:"Select a City",class:"w-32",pt:{root:()=>({class:"!rounded-2xl"})}},null,8,["modelValue","options"])]),M("div",Fee,[x[3]||(x[3]=M("p",{class:"text-2xl font-bold"},"Kt qu",-1)),x[4]||(x[4]=M("div",{class:"!grid grid-cols-5 gap-4 mt-4"},null,-1)),ge(Ie(jr),{label:"Xem thm",class:"!rounded-full mt-4 !px-4 !mx-auto !block !bg-black !text-white !border-black"})])]))}}),Nee={class:"my-4"},Vee={class:"text-surface-500 dark:text-surface-400 text-xs"},jee={class:"text-surface-500 dark:text-surface-400 text-xs"},Uee={class:"text-sm font-bold"},qee={class:"text-xs"},Hee=Xr({__name:"OrderDetailPage",setup(t){const e=Ke([{status:" hy",description:"n hng  b hy",date:"15-10-2020",icon:"pi pi-shopping-cart",color:"#2f5acf",time:"10:30"},{status:"Ch xc nhn",description:"H thng ang xc nhn n hng ca bn",date:"15-10-2020",icon:"pi pi-cog",color:"#525252",time:"14:00"},{status:"Ch xc nhn",description:"H thng ang xc nhn n hng ca bn",date:"15-10-2020",icon:"pi pi-cog",color:"#525252",time:"14:00"}]);return(n,l)=>(X(),pe(an,null,[l[1]||(l[1]=da('<div class="flex gap-4"><h2 class="text-2xl font-bold">Thng tin n hng #45326960942</h2><button class="bg-black text-white px-4 py-2 rounded-full text-xs hover:!bg-white hover:!text-black transition-all duration-300 border border-black block">  hy </button></div><div class="flex gap-4 my-4 text-sm"><div class="flex flex-col gap-1"><span>Ngy t hng:</span><span>Tn ngi nhn:</span><span>a ch email:</span><span>S in thoi:</span><span>Phng thc thanh ton:</span><span>a ch giao hng:</span><span>Ghi ch:</span></div><div class="flex flex-col gap-1"><span>13.08.2025</span><span>Nguyn Duy V</span><span>nguyenduyvu@gmail.com</span><span>0909090909</span><span>Thanh ton khi nhn hng</span><span>123 ng ABC, Qun XYZ, TP. HCM</span><span></span></div></div><div class="flex gap-4"><button class="bg-white text-black px-4 py-2 rounded-full text-xs hover:!bg-black hover:!text-white transition-all duration-300 border border-black"> Cn h tr </button><button class="bg-black text-white px-4 py-2 rounded-full text-xs hover:!bg-white hover:!text-black transition-all duration-300 border border-black"> Mua li </button></div>',3)),M("div",Nee,[l[0]||(l[0]=M("p",{class:"text-xl font-bold"},"Tnh trng n hng",-1)),ge(Ie(OS),{value:e.value,class:"my-8",pt:{eventOpposite:()=>({class:"!flex-0 whitespace-nowrap pl-0"})}},{marker:Xe(m=>[M("span",{class:"flex !w-3 !h-3 items-center justify-center text-white rounded-full z-10 shadow-sm",style:Wl({backgroundColor:m.item.color})},null,4)]),opposite:Xe(m=>[M("div",Vee,Ue(m.item.time),1),M("div",jee,Ue(m.item.date),1)]),content:Xe(m=>[M("div",Uee,Ue(m.item.status),1),M("div",qee,Ue(m.item.description),1)]),_:1},8,["value"])]),l[2]||(l[2]=da('<div class="rounded-lg"><div class=""><div class="bg-[#2f5acf] !grid grid-cols-12 text-white text-center py-4 rounded-lg"><span class="col-span-4">Tn sn phm</span><span class="col-span-2">S lng</span><span class="col-span-2">Gi nim yt</span><span class="col-span-2">Bin th</span><span class="col-span-2">Thnh tin</span></div><div class="bg-gray-100 rounded-b-lg"><div class="!grid grid-cols-12 text-center py-4 px-2 items-center border-b border-gray-200"><div class="col-span-4 flex gap-2 items-center"><img src="https://media3.coolmate.me/cdn-cgi/image/width=160,height=181,quality=80/uploads/May2025/ao-ba-lo-mac-trong-excool-261-trang_89.jpg" alt="" class="rounded-lg !w-18 object-cover border border-[#2f5acf]"><span class="text-xs">o ba l nam mc trong thong kh nhanh kh</span></div><span class="col-span-2">4</span><span class="col-span-2">89.000</span><span class="col-span-2">L</span><span class="col-span-2">356.000</span></div><div class="!grid grid-cols-12 text-center py-4 px-2 items-center border-b border-gray-200"><div class="col-span-4 flex gap-2 items-center"><img src="https://media3.coolmate.me/cdn-cgi/image/width=160,height=181,quality=80/uploads/May2025/ao-ba-lo-mac-trong-excool-261-trang_89.jpg" alt="" class="rounded-lg !w-18 object-cover border border-[#2f5acf]"><span class="text-xs">o ba l nam mc trong thong kh nhanh kh</span></div><span class="col-span-2">4</span><span class="col-span-2">89.000</span><span class="col-span-2">L</span><span class="col-span-2">356.000</span></div></div></div><div class="flex justify-between items-center py-4 border-b border-gray-200"><span class="font-bold text-sm">M gim gi</span></div><div class="flex justify-between items-center py-4 border-b border-gray-200"><span class="font-bold text-sm">Tng gi tr sn phm</span><span class="font-bold text-sm">356.000</span></div><div class="flex justify-between items-center py-4 border-b border-gray-200"><span class="font-bold text-sm">Tng khuyn mi</span><span class="font-bold text-sm">0</span></div><div class="flex justify-between items-center py-4 border-b border-gray-200"><span class="font-bold text-sm">Ph vn chuyn</span><span class="font-bold text-sm">0</span></div><div class="bg-black rounded-b-lg text-white p-4 flex justify-between items-center"><span class="font-bold text-sm">Tng thanh ton</span><span class="font-bold text-sm">356.000</span></div><div class=""></div></div>',1))],64))}}),Gee={},Wee={class:"flex flex-col gap-4"};function Kee(t,e){return X(),pe("div",Wee,e[0]||(e[0]=[M("div",{class:"flex flex-col gap-2"},[M("div",{class:"flex flex-col gap-2"},[M("div",{class:"flex flex-col gap-2"},"aa")])],-1)]))}const Zee=Lo(Gee,[["render",Kee]]),Xee={class:"h-full relative min-h-screen"},Yee={class:"w-[17%] bg-white fixed top-10 left-10 rounded-lg p-4 h-[90%]"},Jee={class:"flex flex-col justify-between gap-4 pt-4"},Qee={class:"!ml-100 !pt-10 w-[76%] rounded-lg relative z-10"},ete=Xr({__name:"AdminLayout",setup(t){const e=M_(),n=[{id:1,name:"Dashboard",path:"/admin/dashboard",icon:"pi pi-home"},{id:2,name:"Qun l ngi dng",path:"/admin/users",icon:"pi pi-users"},{id:3,name:"Qun l sn phm",path:"/admin/products",icon:"pi pi-box"},{id:4,name:"Qun l n hng",path:"/admin/orders",icon:"pi pi-shopping-bag"}];return Co(()=>{document.body.classList.add("!bg-[#f8f9fa]")}),Ef(()=>{document.body.classList.remove("!bg-[#f8f9fa]")}),(l,m)=>{const d=wn("router-link"),x=wn("router-view");return X(),pe("div",Xee,[m[1]||(m[1]=M("div",{class:"bg-[#344767] h-[300px] w-full absolute top-0 left-0 z-[-1]"},null,-1)),M("aside",Yee,[m[0]||(m[0]=M("div",{class:""},[M("div",{class:"pb-4 flex items-center gap-2"},[M("img",{src:"https://demos.creative-tim.com/argon-dashboard/assets/img/logo-ct-dark.png",alt:"",class:"!w-10 !h-10 object-cover"}),M("span",null,"Duy Vu")]),M("hr",{style:{border:"none",height:"1px","background-image":`linear-gradient(
              90deg,
              transparent 0%,
              rgba(0, 0, 0, 0.4) 40%,
              rgba(0, 0, 0, 0.8) 50%,
              rgba(0, 0, 0, 0.4) 60%,
              transparent 100%
            )`}})],-1)),M("div",Jee,[(X(),pe(an,null,fr(n,s=>ge(d,{key:s.id,to:s.path,class:vn(["p-2 rounded-lg transition-all duration-300 cursor-pointer text-[#344767] flex items-center gap-2",[Ie(e).path===s.path?"bg-[#f6f9fc] ":""]])},{default:Xe(()=>[M("i",{class:vn([s.icon,"text-lg"])},null,2),M("span",{class:vn(["text-[#344767]",[Ie(e).path===s.path?" font-bold":""]])},Ue(s.name),3)]),_:2},1032,["to","class"])),64))])]),M("main",Qee,[ge(x)])])}}});var tte={root:{position:"relative"}},nte={root:"p-chart"},rte=Xn.extend({name:"chart",classes:nte,inlineStyles:tte}),ite={name:"BaseChart",extends:mr,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:rte,provide:function(){return{$pcChart:this,$parentInstance:this}}},kf={name:"Chart",extends:ite,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var e=this;xS(()=>import("./auto-C3mEb9gQ.js"),[]).then(function(n){e.chart&&(e.chart.destroy(),e.chart=null),n&&n.default&&(e.chart=new n.default(e.$refs.canvas,{type:e.type,data:e.data,options:e.options,plugins:e.plugins})),e.$emit("loaded",e.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(e){if(this.chart){var n=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),l=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);n&&n[0]&&l&&this.$emit("select",{originalEvent:e,element:n[0],dataset:l})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function Jy(t){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jy(t)}function wE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function SE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wE(Object(n),!0).forEach(function(l){ote(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function ote(t,e,n){return(e=ste(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ste(t){var e=ate(t,"string");return Jy(e)=="symbol"?e:e+""}function ate(t,e){if(Jy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Jy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lte=["width","height"];function cte(t,e,n,l,m,d){return X(),pe("div",ie({class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[M("canvas",ie({ref:"canvas",width:t.width,height:t.height,onClick:e[0]||(e[0]=function(x){return d.onCanvasClick(x)})},SE(SE({},t.canvasProps),t.ptm("canvas"))),null,16,lte)],16)}kf.render=cte;const ute={class:""},dte={class:"!grid grid-cols-4 gap-4"},hte={class:"bg-white rounded-lg p-4"},pte={class:"flex justify-between items-center"},fte={class:"flex flex-col gap-1 mb-2"},mte={class:"text-xl font-bold"},gte={class:"bg-white rounded-lg p-4"},yte={class:"flex justify-between items-center"},vte={class:"flex flex-col gap-1 mb-2"},bte={class:"text-xl font-bold"},_te={class:"bg-white rounded-lg p-4"},xte={class:"flex justify-between items-center"},wte={class:"flex flex-col gap-1 mb-2"},Ste={class:"text-xl font-bold"},Cte={class:"bg-white rounded-lg p-4"},kte={class:"flex justify-between items-center"},Tte={class:"flex flex-col gap-1 mb-2"},Ete={class:"text-xl font-bold"},Ite={class:"!mt-3"},Pte={class:"!grid grid-cols-10 gap-4"},Ate={class:"col-span-6 bg-white rounded-lg p-4"},Rte={class:"col-span-4 bg-white rounded-lg p-4"},Mte={class:"flex flex-col gap-4"},Dte=["src","alt"],Lte={class:"flex-1"},Ote={class:"font-medium"},zte={class:"flex justify-between items-center"},Bte={class:"text-sm text-gray-500"},Fte={class:"font-medium"},$te={class:"!grid grid-cols-10 gap-4 mt-4"},Nte={class:"col-span-6 bg-white rounded-lg p-4"},Vte={class:"col-span-4 bg-white rounded-lg p-4"},jte={class:"flex flex-col gap-2"},Ute={class:"flex items-center gap-2"},qte={class:"!w-12 !h-12 flex items-center justify-center rounded-full bg-gray-200"},Hte={class:"text-sm font-bold"},Gte={class:"font-medium"},Wte=Xr({__name:"DashboardPage",setup(t){Co(()=>{e.value=me(),n.value=ne(),K.value=_t()});const e=Ke(),n=Ke(),l=Ke([{id:"1000",code:"f230fh0g3",name:"Bamboo Watch",description:"Product Description",image:"bamboo-watch.jpg",price:65,category:"Accessories",quantity:24,inventoryStatus:"INSTOCK",rating:5}]),m=Ke([]),d=Ke([{label:"In Stock",value:"INSTOCK"},{label:"Low Stock",value:"LOWSTOCK"},{label:"Out of Stock",value:"OUTOFSTOCK"}]),x=Ke(15e5),s=Ke(45),T=Ke(12),E=Ke(3.2),A=Ke(15),z=Ke(-5),j=Ke(25),U=Ke(10),K=Ke(),oe=Ke([{id:"1",name:"iPhone 15 Pro Max",image:"https://example.com/iphone.jpg",sold:150,revenue:15e8},{id:"2",name:"Samsung Galaxy S24 Ultra",image:"https://example.com/samsung.jpg",sold:120,revenue:12e8},{id:"3",name:"MacBook Pro M3",image:"https://example.com/macbook.jpg",sold:80,revenue:8e8}]),fe=Ke([{name:"in thoi",icon:"pi pi-mobile",products:250,sold:346,revenue:35e8},{name:"Laptop",icon:"pi pi-laptop",products:150,sold:245,revenue:25e8},{name:"Ph kin",icon:"pi pi-headphones",products:500,sold:1200,revenue:8e8},{name:"ng h",icon:"pi pi-clock",products:200,sold:180,revenue:6e8}]),me=()=>{const Me=getComputedStyle(document.documentElement);return{labels:["January","February","March","April","May","June","July"],datasets:[{label:"First Dataset",data:[65,59,80,81,56,55,40],fill:!1,tension:.4,borderColor:Me.getPropertyValue("--p-cyan-500")},{label:"Second Dataset",data:[28,48,40,19,86,27,90],fill:!1,borderDash:[5,5],tension:.4,borderColor:Me.getPropertyValue("--p-orange-500")},{label:"Third Dataset",data:[12,51,62,33,21,62,45],fill:!0,borderColor:Me.getPropertyValue("--p-gray-500"),tension:.4,backgroundColor:"rgba(107, 114, 128, 0.2)"}]}},ne=()=>{const Me=getComputedStyle(document.documentElement),he=Me.getPropertyValue("--p-text-color"),Ce=Me.getPropertyValue("--p-text-muted-color"),$e=Me.getPropertyValue("--p-content-border-color");return{maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:he}}},scales:{x:{ticks:{color:Ce},grid:{color:$e}},y:{ticks:{color:Ce},grid:{color:$e}}}}},te=Me=>{const{newData:he,index:Ce}=Me;l.value[Ce]=he},re=Me=>{switch(Me){case"INSTOCK":return"success";case"LOWSTOCK":return"warn";case"OUTOFSTOCK":return"danger";default:return"secondary"}},ze=Me=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Me),_t=()=>{const Me=getComputedStyle(document.documentElement);return{labels:["T2","T3","T4","T5","T6","T7","CN"],datasets:[{label:"n hng",data:[65,59,80,81,56,55,40],fill:!1,tension:.4,borderColor:Me.getPropertyValue("--p-cyan-500")},{label:"Doanh thu",data:[28,48,40,19,86,27,90],fill:!1,borderDash:[5,5],tension:.4,borderColor:Me.getPropertyValue("--p-orange-500")}]}};return(Me,he)=>{const Ce=wn("InputText"),$e=wn("Tag"),Je=wn("Select"),ft=wn("InputNumber");return X(),pe("div",ute,[he[17]||(he[17]=M("div",{class:"flex justify-between items-center text-white mb-4"},[M("div",{class:"flex flex-col gap-2"},[M("span",null,"Page / Dashboard"),M("span",{class:"text-lg font-bold"},"Dashboard")]),M("div",{class:""},[M("span",null,"input")])],-1)),M("div",dte,[M("div",hte,[M("div",pte,[M("div",fte,[he[1]||(he[1]=M("span",{class:"uppercase"},"Doanh thu hm nay",-1)),M("span",mte,Ue(ze(x.value)),1)]),he[2]||(he[2]=M("div",{class:"rounded-full p-2 !w-12 !h-12 flex items-center justify-center",style:{"background-image":"linear-gradient(310deg, #2dce89, #2dcecc)"}},[M("i",{class:"pi pi-wallet text-white text-2xl"})],-1))]),M("span",{class:vn([A.value>=0?"text-green-400":"text-red-400","mr-2"])},Ue(A.value>=0?"+":"")+Ue(A.value)+"%",3),he[3]||(he[3]=M("span",{class:"text-sm"},"So vi hm qua",-1))]),M("div",gte,[M("div",yte,[M("div",vte,[he[4]||(he[4]=M("span",{class:"uppercase"},"n hng hm nay",-1)),M("span",bte,Ue(s.value),1)]),he[5]||(he[5]=M("div",{class:"rounded-full p-2 !w-12 !h-12 flex items-center justify-center",style:{"background-image":"linear-gradient(310deg, #11cdef, #1171ef)"}},[M("i",{class:"pi pi-shopping-cart text-white text-2xl"})],-1))]),M("span",{class:vn([z.value>=0?"text-green-400":"text-red-400","mr-2"])},Ue(z.value>=0?"+":"")+Ue(z.value)+"%",3),he[6]||(he[6]=M("span",{class:"text-sm"},"So vi hm qua",-1))]),M("div",_te,[M("div",xte,[M("div",wte,[he[7]||(he[7]=M("span",{class:"uppercase"},"Ngi dng mi",-1)),M("span",Ste,Ue(T.value),1)]),he[8]||(he[8]=M("div",{class:"rounded-full p-2 !w-12 !h-12 flex items-center justify-center",style:{"background-image":"linear-gradient(310deg, #fb6340, #fbb140)"}},[M("i",{class:"pi pi-users text-white text-2xl"})],-1))]),M("span",{class:vn([j.value>=0?"text-green-400":"text-red-400","mr-2"])},Ue(j.value>=0?"+":"")+Ue(j.value)+"%",3),he[9]||(he[9]=M("span",{class:"text-sm"},"So vi hm qua",-1))]),M("div",Cte,[M("div",kte,[M("div",Tte,[he[10]||(he[10]=M("span",{class:"uppercase"},"T l chuyn i",-1)),M("span",Ete,Ue(E.value)+"%",1)]),he[11]||(he[11]=M("div",{class:"rounded-full p-2 !w-12 !h-12 flex items-center justify-center",style:{"background-image":"linear-gradient(310deg, #8965e0, #bc65e0)"}},[M("i",{class:"pi pi-chart-line text-white text-2xl"})],-1))]),M("span",{class:vn([U.value>=0?"text-green-400":"text-red-400","mr-2"])},Ue(U.value>=0?"+":"")+Ue(U.value)+"%",3),he[12]||(he[12]=M("span",{class:"text-sm"},"So vi hm qua",-1))])]),M("div",Ite,[M("div",Pte,[M("div",Ate,[he[13]||(he[13]=M("h3",{class:"text-lg font-semibold mb-4"},"Xu hng tiu dng",-1)),ge(Ie(kf),{type:"line",data:K.value,options:n.value,class:"h-[250px]"},null,8,["data","options"])]),M("div",Rte,[he[14]||(he[14]=M("h3",{class:"text-lg font-semibold mb-4"},"Sn phm bn chy",-1)),M("div",Mte,[(X(!0),pe(an,null,fr(oe.value,ut=>(X(),pe("div",{key:ut.id,class:"flex items-center gap-3"},[M("img",{src:ut.image,alt:ut.name,class:"w-12 h-12 rounded-lg object-cover"},null,8,Dte),M("div",Lte,[M("p",Ote,Ue(ut.name),1),M("div",zte,[M("span",Bte,Ue(ut.sold)+"  bn",1),M("span",Fte,Ue(ze(ut.revenue)),1)])])]))),128))])])]),M("div",$te,[M("div",Nte,[he[15]||(he[15]=M("h3",{class:"text-lg font-semibold mb-4"},"Danh sch sn phm",-1)),ge(Ie(Xs),{editingRows:m.value,"onUpdate:editingRows":he[0]||(he[0]=ut=>m.value=ut),value:l.value,editMode:"row",dataKey:"id",onRowEditSave:te,pt:{table:{style:"min-width: 50rem"},column:{bodycell:({state:ut})=>({style:ut.d_editing?"padding-top: 0.75rem; padding-bottom: 0.75rem":void 0})}}},{default:Xe(()=>[ge(Ie(jn),{field:"code",header:"Code",style:{width:"20%"}},{editor:Xe(({data:ut,field:Qe})=>[ge(Ce,{modelValue:ut[Qe],"onUpdate:modelValue":Qt=>ut[Qe]=Qt},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),ge(Ie(jn),{field:"name",header:"Name",style:{width:"20%"}},{editor:Xe(({data:ut,field:Qe})=>[ge(Ce,{modelValue:ut[Qe],"onUpdate:modelValue":Qt=>ut[Qe]=Qt,fluid:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),ge(Ie(jn),{field:"inventoryStatus",header:"Status",style:{width:"20%"}},{editor:Xe(({data:ut,field:Qe})=>[ge(Je,{modelValue:ut[Qe],"onUpdate:modelValue":Qt=>ut[Qe]=Qt,options:d.value,optionLabel:"label",optionValue:"value",placeholder:"Select a Status",fluid:""},{option:Xe(Qt=>[ge($e,{value:Qt.option.value,severity:re(Qt.option.value)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),body:Xe(ut=>[ge($e,{value:ut.data.inventoryStatus,severity:re(ut.data.inventoryStatus)},null,8,["value","severity"])]),_:1}),ge(Ie(jn),{field:"price",header:"Price",style:{width:"20%"}},{body:Xe(({data:ut,field:Qe})=>[tr(Ue(ze(ut[Qe])),1)]),editor:Xe(({data:ut,field:Qe})=>[ge(ft,{modelValue:ut[Qe],"onUpdate:modelValue":Qt=>ut[Qe]=Qt,mode:"currency",currency:"USD",locale:"en-US",fluid:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),ge(Ie(jn),{rowEditor:!0,style:{width:"10%","min-width":"8rem"},bodyStyle:"text-align:center"})]),_:1},8,["editingRows","value","pt"])]),M("div",Vte,[he[16]||(he[16]=M("h3",{class:"text-lg font-semibold mb-4"},"Thng k theo danh mc",-1)),M("div",jte,[(X(!0),pe(an,null,fr(fe.value,ut=>(X(),pe("div",{key:ut.name,class:"flex justify-between items-center hover:bg-gray-100 rounded-lg p-2 cursor-pointer mt-2 transition-all duration-300 px-2"},[M("div",Ute,[M("span",qte,[M("i",{class:vn(ut.icon)},null,2)]),M("div",null,[M("span",Hte,Ue(ut.name),1),M("div",null,[M("span",null,Ue(ut.products)+" sn phm,",1),M("span",null,Ue(ut.sold)+"  bn",1)])])]),M("div",null,[M("span",Gte,Ue(ze(ut.revenue)),1)])]))),128))])])])])])}}}),Lw={getVendors:async(t={})=>(await Oi.get("/api/profile/vendors",{params:t})).data,getVendorById:async t=>(await Oi.get(`/api/profile/vendors/${t}`)).data,updateVendorStatus:async(t,e)=>(await Oi.patch(`/api/profile/vendors/${t}/status`,{status:e})).data,deleteVendor:async t=>{await Oi.delete(`/api/profile/vendors/${t}`)}},Kte={class:"bg-white rounded-lg p-4 min-h-[500px]"},Zte={class:"flex gap-4 mb-4"},Xte={class:"flex gap-2"},Yte={class:"flex gap-4 mb-4"},Jte={class:"flex gap-2"},Qte={key:0,class:"p-4"},ene={class:"grid"},tne={class:"col-6"},nne={class:"col-6"},rne={key:0,class:"p-4"},ine={class:"grid"},one={class:"col-6"},sne={class:"col-6"},ane=Xr({__name:"UserPage",setup(t){const e=Xl();Ke(!1);const n=Ke(""),l=Ke(null),m=Ke(null),d=Ke({}),x=Ke(!1),s=Ke(!1),T=Ke(null),E=Ke(null),A=Ke(null),z=Ke([]);Ke("0");const j=[{name:"Ngi dng"},{name:"Admin"},{name:"Moderator"}],U=[{name:"Hot ng"},{name:"B kha"}],K=Ke([]),oe=Ke(!1),fe=Ke({page:0,size:10,totalElements:0,totalPages:0}),me=async()=>{try{oe.value=!0;const Un={page:fe.value.page,size:fe.value.size},pn=await m_.getUsers(Un);console.log("Users API Response:",pn),K.value=pn.profiles,fe.value={page:pn.page,size:pn.size,totalElements:pn.totalElements,totalPages:pn.totalPages},console.log("Users Pagination state:",{page:pn.page,size:pn.size,totalElements:pn.totalElements,totalPages:pn.totalPages,first:pn.page*pn.size})}catch(Un){console.error("Error loading users:",Un),e.add({severity:"error",summary:"Li",detail:"Khng th ti danh sch ngi dng",life:3e3})}finally{oe.value=!1}},ne=Un=>{console.log("User page change event:",Un),fe.value.page=Un.page,fe.value.size=Un.rows,me()},te=Ke([]),re=Ke(!1),ze=Ke({page:0,size:5,totalElements:0,totalPages:0}),_t=Ke(null),Me=Ke(""),he=[{name:"Ch duyt",value:"PENDING"},{name:" duyt",value:"APPROVED"},{name:"T chi",value:"REJECTED"},{name:"Tm kha",value:"SUSPENDED"}],Ce=async()=>{try{re.value=!0;const Un={page:ze.value.page,size:ze.value.size};_t.value&&(Un.status=_t.value);const pn=await Lw.getVendors(Un);console.log("API Response:",pn),te.value=pn.vendors,ze.value={page:pn.page,size:pn.size,totalElements:pn.totalElements,totalPages:pn.totalPages},console.log("Pagination state:",{page:pn.page,size:pn.size,totalElements:pn.totalElements,totalPages:pn.totalPages,first:pn.page*pn.size})}catch(Un){console.error("Error loading vendors:",Un),e.add({severity:"error",summary:"Li",detail:"Khng th ti danh sch ngi bn",life:3e3})}finally{re.value=!1}};ho([_t],()=>{ze.value.page=0,Ce()}),Co(()=>{me(),Ce()});const $e=Un=>{console.log("Page change event:",Un),ze.value.page=Un.page,ze.value.size=Un.rows,Ce()},Je=Un=>new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(Un),ft=Un=>{switch(Un){case"Admin":return"danger";case"Moderator":return"warning";case"Ngi dng":return"info";default:return"info"}},ut=Un=>{switch(Un){case"APPROVED":return"success";case"PENDING":return"warning";case"REJECTED":return"danger";case"SUSPENDED":return"danger";case"Hot ng":return"success";case"B kha":return"danger";default:return"info"}},Qe=Un=>{switch(Un){case"APPROVED":return" duyt";case"PENDING":return"Ch duyt";case"REJECTED":return"T chi";case"SUSPENDED":return"Tm kha";case"Hot ng":return"Hot ng";case"B kha":return"B kha";default:return Un}},Qt=Un=>{if(!Un)return"Ngi dng";switch(Un){case"ADMIN":return"Admin";case"VENDOR":return"Ngi bn";case"USER":return"Ngi dng";default:return Un}},kt=Un=>{if(!Un)return"Cha xc nh";switch(Un){case"CUSTOMER":return"Khch hng";case"VENDOR":return"Ngi bn";case"ADMIN":return"Qun tr vin";default:return Un}},wt=Un=>{if(!Un)return"info";switch(Un){case"ADMIN":return"danger";case"VENDOR":return"warning";case"CUSTOMER":return"success";default:return"info"}},Et=[{name:"Tt c",value:"all"},{name:"Hm nay",value:"today"},{name:"Tun ny",value:"this_week"},{name:"Thng ny",value:"this_month"},{name:"3 thng gn nht",value:"last_3_months"}],on=Un=>{T.value=Un,A.value=Et[0],z.value=[],x.value=!0},In=Un=>{E.value=Un,s.value=!0},ir=async(Un,pn)=>{try{await Lw.updateVendorStatus(Un.id,pn),await Ce(),e.add({severity:"success",summary:"Cp nht thnh cng",detail:`Ca hng ${Un.name||"N/A"}  c cp nht trng thi thnh ${pn}`,life:3e3})}catch(kn){console.error("Error updating vendor status:",kn),e.add({severity:"error",summary:"Li",detail:"Khng th cp nht trng thi ca hng",life:3e3})}},Or=async Un=>{try{await m_.deleteUser(Un.userId),await me(),e.add({severity:"success",summary:"Xa thnh cng",detail:`Ngi dng ${Un.fullName||Un.username}  c xa`,life:3e3})}catch(pn){console.error("Error deleting user:",pn),e.add({severity:"error",summary:"Li",detail:"Khng th xa ngi dng",life:3e3})}},oo=async Un=>{try{await Lw.deleteVendor(Un.id),await Ce(),e.add({severity:"success",summary:"Xa thnh cng",detail:`Ca hng ${Un.name||"N/A"}  c xa`,life:3e3})}catch(pn){console.error("Error deleting vendor:",pn),e.add({severity:"error",summary:"Li",detail:"Khng th xa ca hng",life:3e3})}};return(Un,pn)=>(X(),pe("div",Kte,[pn[16]||(pn[16]=M("p",{class:"text-2xl font-bold mb-4"},"Qun l ngi dng",-1)),M("div",Zte,[ge(Ie(vo),{modelValue:n.value,"onUpdate:modelValue":pn[0]||(pn[0]=kn=>n.value=kn),placeholder:"Tm kim ngi dng...",class:"w-64"},null,8,["modelValue"]),ge(Ie(xs),{modelValue:l.value,"onUpdate:modelValue":pn[1]||(pn[1]=kn=>l.value=kn),options:j,optionLabel:"name",placeholder:"Vai tr",class:"w-48"},null,8,["modelValue"]),ge(Ie(xs),{modelValue:m.value,"onUpdate:modelValue":pn[2]||(pn[2]=kn=>m.value=kn),options:U,optionLabel:"name",placeholder:"Trng thi",class:"w-48"},null,8,["modelValue"])]),ge(Ie(LS),{value:"0"},{default:Xe(()=>[ge(Ie(MS),null,{default:Xe(()=>[ge(Ie(Hy),{value:"0"},{default:Xe(()=>pn[7]||(pn[7]=[tr("Ngi dng")])),_:1}),ge(Ie(Hy),{value:"1"},{default:Xe(()=>pn[8]||(pn[8]=[tr("Ngi bn")])),_:1})]),_:1}),ge(Ie(DS),null,{default:Xe(()=>[ge(Ie(Cf),{value:"0"},{default:Xe(()=>[ge(Ie(Xs),{value:K.value,tableStyle:"min-width: 50rem",class:"bg-white rounded-lg",paginator:!0,rows:fe.value.size,rowsPerPageOptions:[5,10,20,50],loading:oe.value,filters:d.value,filterDisplay:"menu",totalRecords:fe.value.totalElements,first:fe.value.page*fe.value.size,lazy:!0,onPage:ne},{default:Xe(()=>[ge(Ie(jn),{field:"userId",header:"ID",sortable:""}),ge(Ie(jn),{field:"fullName",header:"H tn",sortable:""},{body:Xe(kn=>[tr(Ue(kn.data.fullName||kn.data.username||"Cha c tn"),1)]),_:1}),ge(Ie(jn),{field:"email",header:"Email",sortable:""}),ge(Ie(jn),{field:"username",header:"Tn ng nhp",sortable:""}),ge(Ie(jn),{field:"role",header:"Vai tr",sortable:""},{body:Xe(kn=>[ge(Ie(Hs),{severity:ft(kn.data.role||"USER"),value:Qt(kn.data.role)},null,8,["severity","value"])]),_:1}),ge(Ie(jn),{field:"type",header:"Loi ti khon",sortable:""},{body:Xe(kn=>[ge(Ie(Hs),{severity:wt(kn.data.type),value:kt(kn.data.type)},null,8,["severity","value"])]),_:1}),ge(Ie(jn),{header:"Thao tc"},{body:Xe(kn=>[M("div",Xte,[ge(Ie(jr),{icon:"pi pi-eye",severity:"info",onClick:$t=>on(kn.data)},null,8,["onClick"]),ge(Ie(jr),{icon:"pi pi-trash",severity:"danger",onClick:$t=>Or(kn.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","rows","loading","filters","totalRecords","first"])]),_:1}),ge(Ie(Cf),{value:"1"},{default:Xe(()=>[M("div",Yte,[ge(Ie(vo),{modelValue:Me.value,"onUpdate:modelValue":pn[3]||(pn[3]=kn=>Me.value=kn),placeholder:"Tm kim ca hng...",class:"w-64"},null,8,["modelValue"]),ge(Ie(xs),{modelValue:_t.value,"onUpdate:modelValue":pn[4]||(pn[4]=kn=>_t.value=kn),options:he,optionLabel:"name",optionValue:"value",placeholder:"Trng thi",class:"w-48"},null,8,["modelValue"])]),ge(Ie(Xs),{value:te.value,tableStyle:"min-width: 50rem",class:"bg-white rounded-lg",paginator:!0,rows:ze.value.size,rowsPerPageOptions:[5,10,20,50],loading:re.value,filters:d.value,filterDisplay:"menu",totalRecords:ze.value.totalElements,first:ze.value.page*ze.value.size,lazy:!0,onPage:$e},{default:Xe(()=>[ge(Ie(jn),{field:"id",header:"ID",sortable:""}),ge(Ie(jn),{field:"name",header:"Tn ca hng",sortable:""},{body:Xe(kn=>[tr(Ue(kn.data.name||"Cha c tn"),1)]),_:1}),ge(Ie(jn),{field:"email",header:"Email",sortable:""},{body:Xe(kn=>[tr(Ue(kn.data.email||"Cha c email"),1)]),_:1}),ge(Ie(jn),{field:"phone",header:"S in thoi"},{body:Xe(kn=>[tr(Ue(kn.data.phone||"Cha c s in thoi"),1)]),_:1}),ge(Ie(jn),{field:"status",header:"Trng thi",sortable:""},{body:Xe(kn=>[ge(Ie(Hs),{severity:ut(kn.data.status),value:Qe(kn.data.status)},null,8,["severity","value"])]),_:1}),ge(Ie(jn),{field:"createdAt",header:"Ngy to",sortable:""},{body:Xe(kn=>[tr(Ue(Je(new Date(kn.data.createdAt))),1)]),_:1}),ge(Ie(jn),{header:"Thao tc"},{body:Xe(kn=>[M("div",Jte,[ge(Ie(jr),{icon:"pi pi-eye",severity:"info",onClick:$t=>In(kn.data)},null,8,["onClick"]),kn.data.status==="APPROVED"?(X(),bt(Ie(jr),{key:0,icon:"pi pi-ban",severity:"warning",onClick:$t=>ir(kn.data,"SUSPENDED")},null,8,["onClick"])):Ct("",!0),kn.data.status==="PENDING"?(X(),bt(Ie(jr),{key:1,icon:"pi pi-check",severity:"success",onClick:$t=>ir(kn.data,"APPROVED")},null,8,["onClick"])):Ct("",!0),kn.data.status==="SUSPENDED"?(X(),bt(Ie(jr),{key:2,icon:"pi pi-check",severity:"success",onClick:$t=>ir(kn.data,"APPROVED")},null,8,["onClick"])):Ct("",!0),ge(Ie(jr),{icon:"pi pi-trash",severity:"danger",onClick:$t=>oo(kn.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","rows","loading","filters","totalRecords","first"])]),_:1})]),_:1})]),_:1}),ge(Ie(Ra),{visible:x.value,"onUpdate:visible":pn[5]||(pn[5]=kn=>x.value=kn),modal:"",header:"Chi tit ngi dng",style:{width:"50vw"}},{default:Xe(()=>[T.value?(X(),pe("div",Qte,[M("div",ene,[M("div",tne,[pn[9]||(pn[9]=M("p",{class:"font-bold"},"Thng tin c nhn",-1)),M("p",null,"H tn: "+Ue(T.value.fullName||"Cha c tn"),1),M("p",null,"Email: "+Ue(T.value.email),1),M("p",null,"Tn ng nhp: "+Ue(T.value.username),1),M("p",null,"Ngy sinh: "+Ue(T.value.dob||"Cha c thng tin"),1),M("p",null,"Gii tnh: "+Ue(T.value.gender||"Cha c thng tin"),1)]),M("div",nne,[pn[12]||(pn[12]=M("p",{class:"font-bold"},"Thng tin ti khon",-1)),M("p",null,"ID: "+Ue(T.value.userId),1),M("p",null,[pn[10]||(pn[10]=tr("Vai tr: ")),ge(Ie(Hs),{severity:ft(T.value.role||"USER"),value:Qt(T.value.role)},null,8,["severity","value"])]),M("p",null,[pn[11]||(pn[11]=tr("Loi ti khon: ")),ge(Ie(Hs),{severity:wt(T.value.type),value:kt(T.value.type)},null,8,["severity","value"])]),M("p",null,"Tn ca hng: "+Ue(T.value.shopName||"Khng c"),1)])])])):Ct("",!0)]),_:1},8,["visible"]),ge(Ie(Ra),{visible:s.value,"onUpdate:visible":pn[6]||(pn[6]=kn=>s.value=kn),modal:"",header:"Chi tit ngi bn",style:{width:"50vw"}},{default:Xe(()=>[E.value?(X(),pe("div",rne,[M("div",ine,[M("div",one,[pn[13]||(pn[13]=M("p",{class:"font-bold"},"Thng tin ca hng",-1)),M("p",null,"Tn ca hng: "+Ue(E.value.name||"Cha c tn"),1),M("p",null,"M t: "+Ue(E.value.description||"Cha c m t"),1),M("p",null,"a ch: "+Ue(E.value.address||"Cha c a ch"),1),M("p",null,"Email: "+Ue(E.value.email||"Cha c email"),1),M("p",null,"S in thoi: "+Ue(E.value.phone||"Cha c s in thoi"),1),M("p",null,"Ngy to: "+Ue(Je(new Date(E.value.createdAt))),1)]),M("div",sne,[pn[15]||(pn[15]=M("p",{class:"font-bold"},"Thng tin ti khon",-1)),M("p",null,[pn[14]||(pn[14]=tr("Trng thi: ")),ge(Ie(Hs),{severity:ut(E.value.status),value:Qe(E.value.status)},null,8,["severity","value"])]),M("p",null,"ID: "+Ue(E.value.id),1),M("p",null,"Cp nht ln cui: "+Ue(Je(new Date(E.value.updatedAt))),1)])])])):Ct("",!0)]),_:1},8,["visible"])]))}}),lne=Lo(ane,[["__scopeId","data-v-e40be184"]]),cne={class:"bg-white rounded-lg p-4 min-h-[500px]"},une={class:"flex flex-col gap-4"},dne={key:0,class:"flex justify-center items-center py-8"},hne={class:"flex gap-2"},pne={class:"flex flex-col gap-4"},fne={key:0,class:"flex justify-center items-center py-8"},mne={class:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800"},gne={class:"flex gap-2"},yne=Xr({__name:"ProductPage",setup(t){const e=Xl(),n=Ke(!1),l=Ke({page:0,size:10,totalElements:0,totalPages:0}),m=Ke({page:0,size:10,totalElements:0,totalPages:0}),d=Ke([]),x=Ke([]),s=async()=>{try{n.value=!0;const me={page:l.value.page,size:l.value.size,status:"IN_PROGRESS"},ne=await O2(me);console.log("Pending Products API Response:",ne),d.value=ne.products.map(te=>({id:te.id.toString(),name:te.name,description:te.description,price:te.price,rating:te.rating,status:te.status||"",variants:te.variants||[],images:te.images||[],createdBy:te.createdBy})),l.value={page:ne.page,size:ne.size,totalElements:ne.totalElements,totalPages:ne.totalPages}}catch(me){console.error("Error loading pending products:",me),e.add({severity:"error",summary:"Li",detail:"Khng th ti danh sch sn phm ch duyt",life:3e3})}finally{n.value=!1}},T=async()=>{try{n.value=!0;const me={page:m.value.page,size:m.value.size,status:"REPORTED"},ne=await O2(me);console.log("Reported Products API Response:",ne),x.value=ne.products.map(te=>({id:te.id.toString(),name:te.name,description:te.description,price:te.price,rating:te.rating,status:te.status||"",variants:te.variants||[],images:te.images||[],createdBy:te.createdBy,reportCount:0})),m.value={page:ne.page,size:ne.size,totalElements:ne.totalElements,totalPages:ne.totalPages}}catch(me){console.error("Error loading reported products:",me),e.add({severity:"error",summary:"Li",detail:"Khng th ti danh sch sn phm b bo co",life:3e3})}finally{n.value=!1}},E=me=>{console.log("Pending products page change event:",me),l.value.page=me.page,l.value.size=me.rows,s()},A=me=>{console.log("Reported products page change event:",me),m.value.page=me.page,m.value.size=me.rows,T()},z=me=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(me),j=me=>{switch(me){case"IN_PROGRESS":return"Ch duyt";case"APPROVED":return" duyt";case"REJECTED":return"T chi";case"REPORTED":return"B bo co";default:return me}},U=me=>{console.log("Approving product:",me)},K=me=>{console.log("Rejecting product:",me)},oe=me=>{console.log("Viewing report details for product:",me)},fe=me=>{console.log("Removing product:",me)};return Co(()=>{s(),T()}),(me,ne)=>(X(),pe("div",cne,[ne[4]||(ne[4]=M("p",{class:"text-2xl font-bold"},"Qun l sn phm",-1)),ge(Ie(LS),{value:"0"},{default:Xe(()=>[ge(Ie(MS),null,{default:Xe(()=>[ge(Ie(Hy),{value:"0"},{default:Xe(()=>ne[0]||(ne[0]=[tr("Sn phm ch duyt")])),_:1}),ge(Ie(Hy),{value:"1"},{default:Xe(()=>ne[1]||(ne[1]=[tr("Sn phm b bo co")])),_:1})]),_:1}),ge(Ie(DS),null,{default:Xe(()=>[ge(Ie(Cf),{value:"0"},{default:Xe(()=>[M("div",une,[n.value?(X(),pe("div",dne,ne[2]||(ne[2]=[M("div",{class:"loading-spinner"},null,-1),M("span",{class:"ml-2"},"ang ti sn phm...",-1)]))):(X(),bt(Ie(Xs),{key:1,value:d.value,tableStyle:"min-width: 50rem",class:"bg-white rounded-lg",paginator:!0,rows:l.value.size,totalRecords:l.value.totalElements,first:l.value.page*l.value.size,rowsPerPageOptions:[5,10,20,50],lazy:!0,onPage:E},{default:Xe(()=>[ge(Ie(jn),{field:"id",header:"M sn phm"}),ge(Ie(jn),{field:"name",header:"Tn sn phm"}),ge(Ie(jn),{field:"description",header:"M t"},{body:Xe(te=>{var re,ze;return[tr(Ue((re=te.data.description)==null?void 0:re.substring(0,50))+Ue(((ze=te.data.description)==null?void 0:ze.length)>50?"...":""),1)]}),_:1}),ge(Ie(jn),{field:"price",header:"Gi"},{body:Xe(te=>[tr(Ue(z(te.data.price)),1)]),_:1}),ge(Ie(jn),{field:"createdBy",header:"Ngi to"}),ge(Ie(jn),{field:"status",header:"Trng thi"},{body:Xe(te=>[M("span",{class:vn(["px-2 py-1 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800":te.data.status==="IN_PROGRESS","bg-green-100 text-green-800":te.data.status==="APPROVED","bg-red-100 text-red-800":te.data.status==="REJECTED"}])},Ue(j(te.data.status)),3)]),_:1}),ge(Ie(jn),{header:"Thao tc"},{body:Xe(te=>[M("div",hne,[ge(Ie(jr),{icon:"pi pi-check",severity:"success",onClick:re=>U(te.data)},null,8,["onClick"]),ge(Ie(jr),{icon:"pi pi-times",severity:"danger",onClick:re=>K(te.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]))])]),_:1}),ge(Ie(Cf),{value:"1"},{default:Xe(()=>[M("div",pne,[n.value?(X(),pe("div",fne,ne[3]||(ne[3]=[M("div",{class:"loading-spinner"},null,-1),M("span",{class:"ml-2"},"ang ti sn phm...",-1)]))):(X(),bt(Ie(Xs),{key:1,value:x.value,tableStyle:"min-width: 50rem",class:"bg-white rounded-lg",paginator:!0,rows:m.value.size,totalRecords:m.value.totalElements,first:m.value.page*m.value.size,rowsPerPageOptions:[5,10,20,50],lazy:!0,onPage:A},{default:Xe(()=>[ge(Ie(jn),{field:"id",header:"M sn phm"}),ge(Ie(jn),{field:"name",header:"Tn sn phm"}),ge(Ie(jn),{field:"description",header:"M t"},{body:Xe(te=>{var re,ze;return[tr(Ue((re=te.data.description)==null?void 0:re.substring(0,50))+Ue(((ze=te.data.description)==null?void 0:ze.length)>50?"...":""),1)]}),_:1}),ge(Ie(jn),{field:"price",header:"Gi"},{body:Xe(te=>[tr(Ue(z(te.data.price)),1)]),_:1}),ge(Ie(jn),{field:"createdBy",header:"Ngi to"}),ge(Ie(jn),{field:"reportCount",header:"S ln bo co"},{body:Xe(te=>[M("span",mne,Ue(te.data.reportCount||0),1)]),_:1}),ge(Ie(jn),{header:"Thao tc"},{body:Xe(te=>[M("div",gne,[ge(Ie(jr),{icon:"pi pi-eye",severity:"info",onClick:re=>oe(te.data)},null,8,["onClick"]),ge(Ie(jr),{icon:"pi pi-trash",severity:"danger",onClick:re=>fe(te.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]))])]),_:1})]),_:1})]),_:1})]))}}),vne=Lo(yne,[["__scopeId","data-v-d4376bc8"]]),bne={class:"bg-white rounded-lg p-4 min-h-[500px]"},_ne={class:"flex gap-4 mb-4"},xne={class:"flex gap-2"},wne={key:0,class:"p-4"},Sne={class:"grid"},Cne={class:"col-6"},kne={class:"col-6"},Tne={class:"flex justify-content-end mt-4"},Ene={class:"font-bold"},Ine=Xr({__name:"OrderPage",setup(t){const e=Xl(),n=Ke(!1),l=Ke(""),m=Ke(null),d=Ke(null),x=Ke(!1),s=Ke(null),T=Ke({}),E=[{name:"Ch xc nhn"},{name:" xc nhn"},{name:"ang giao hng"},{name:"Hon thnh"},{name:" hy"}],A=Ke([{orderId:"ORD001",customerName:"Nguyn Vn A",customerPhone:"0123456789",customerAddress:"123 ng ABC, Qun 1, TP.HCM",orderDate:new Date("2024-03-15"),totalAmount:15e5,status:"Ch xc nhn",paymentMethod:"Chuyn khon",items:[{name:"o thun nam",quantity:2,price:25e4},{name:"Qun jean",quantity:1,price:1e6}]},{orderId:"ORD002",customerName:"Trn Th B",customerPhone:"0987654321",customerAddress:"456 ng XYZ, Qun 2, TP.HCM",orderDate:new Date("2024-03-14"),totalAmount:23e5,status:"ang giao hng",paymentMethod:"Tin mt",items:[{name:"Giy th thao",quantity:1,price:15e5},{name:"Ti xch",quantity:1,price:8e5}]}]),z=fe=>new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(fe),j=fe=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(fe),U=fe=>{switch(fe){case"Ch xc nhn":return"warning";case" xc nhn":return"info";case"ang giao hng":return"contrast";case"Hon thnh":return"success";case" hy":return"danger";default:return"info"}},K=fe=>{s.value=fe,x.value=!0},oe=(fe,me)=>{const ne=A.value.findIndex(te=>te.orderId===fe.orderId);ne!==-1&&(A.value[ne].status=me,e.add({severity:"success",summary:"Cp nht thnh cng",detail:`n hng ${fe.orderId}  c cp nht trng thi thnh ${me}`,life:3e3}))};return Co(()=>{}),(fe,me)=>(X(),pe("div",bne,[me[8]||(me[8]=M("p",{class:"text-2xl font-bold mb-4"},"Qun l n hng",-1)),M("div",_ne,[ge(Ie(vo),{modelValue:l.value,"onUpdate:modelValue":me[0]||(me[0]=ne=>l.value=ne),placeholder:"Tm kim n hng...",class:"w-64"},null,8,["modelValue"]),ge(Ie(xs),{modelValue:m.value,"onUpdate:modelValue":me[1]||(me[1]=ne=>m.value=ne),options:E,optionLabel:"name",placeholder:"Trng thi",class:"w-48"},null,8,["modelValue"]),ge(Ie(TS),{modelValue:d.value,"onUpdate:modelValue":me[2]||(me[2]=ne=>d.value=ne),selectionMode:"range",showIcon:!0,placeholder:"Chn ngy",class:"w-64"},null,8,["modelValue"])]),ge(Ie(Xs),{value:A.value,tableStyle:"min-width: 50rem",class:"bg-white rounded-lg",paginator:!0,rows:10,rowsPerPageOptions:[5,10,20,50],loading:n.value,filters:T.value,filterDisplay:"menu"},{default:Xe(()=>[ge(Ie(jn),{field:"orderId",header:"M n hng",sortable:""}),ge(Ie(jn),{field:"customerName",header:"Khch hng",sortable:""}),ge(Ie(jn),{field:"orderDate",header:"Ngy t",sortable:""},{body:Xe(ne=>[tr(Ue(z(ne.data.orderDate)),1)]),_:1}),ge(Ie(jn),{field:"totalAmount",header:"Tng tin",sortable:""},{body:Xe(ne=>[tr(Ue(j(ne.data.totalAmount)),1)]),_:1}),ge(Ie(jn),{field:"status",header:"Trng thi",sortable:""},{body:Xe(ne=>[ge(Ie(Hs),{severity:U(ne.data.status),value:ne.data.status},null,8,["severity","value"])]),_:1}),ge(Ie(jn),{field:"paymentMethod",header:"Phng thc thanh ton"}),ge(Ie(jn),{header:"Thao tc"},{body:Xe(ne=>[M("div",xne,[ge(Ie(jr),{icon:"pi pi-eye",severity:"info",onClick:te=>K(ne.data)},null,8,["onClick"]),ne.data.status==="Ch xc nhn"?(X(),bt(Ie(jr),{key:0,icon:"pi pi-check",severity:"success",onClick:te=>oe(ne.data," xc nhn")},null,8,["onClick"])):Ct("",!0),ne.data.status===" xc nhn"?(X(),bt(Ie(jr),{key:1,icon:"pi pi-truck",severity:"warning",onClick:te=>oe(ne.data,"ang giao hng")},null,8,["onClick"])):Ct("",!0),ne.data.status==="ang giao hng"?(X(),bt(Ie(jr),{key:2,icon:"pi pi-check-circle",severity:"success",onClick:te=>oe(ne.data,"Hon thnh")},null,8,["onClick"])):Ct("",!0),["Ch xc nhn"," xc nhn"].includes(ne.data.status)?(X(),bt(Ie(jr),{key:3,icon:"pi pi-times",severity:"danger",onClick:te=>oe(ne.data," hy")},null,8,["onClick"])):Ct("",!0)])]),_:1})]),_:1},8,["value","loading","filters"]),ge(Ie(Ra),{visible:x.value,"onUpdate:visible":me[3]||(me[3]=ne=>x.value=ne),modal:"",header:"Chi tit n hng",style:{width:"50vw"}},{default:Xe(()=>[s.value?(X(),pe("div",wne,[M("div",Sne,[M("div",Cne,[me[4]||(me[4]=M("p",{class:"font-bold"},"Thng tin khch hng",-1)),M("p",null,"Tn: "+Ue(s.value.customerName),1),M("p",null,"S in thoi: "+Ue(s.value.customerPhone),1),M("p",null,"a ch: "+Ue(s.value.customerAddress),1)]),M("div",kne,[me[6]||(me[6]=M("p",{class:"font-bold"},"Thng tin n hng",-1)),M("p",null,"M n hng: "+Ue(s.value.orderId),1),M("p",null,"Ngy t: "+Ue(z(s.value.orderDate)),1),M("p",null,[me[5]||(me[5]=tr("Trng thi: ")),ge(Ie(Hs),{severity:U(s.value.status),value:s.value.status},null,8,["severity","value"])])])]),ge(Ie(Rh)),me[7]||(me[7]=M("p",{class:"font-bold mb-2"},"Chi tit sn phm",-1)),ge(Ie(Xs),{value:s.value.items,class:"mt-2"},{default:Xe(()=>[ge(Ie(jn),{field:"name",header:"Sn phm"}),ge(Ie(jn),{field:"quantity",header:"S lng"}),ge(Ie(jn),{field:"price",header:"n gi"},{body:Xe(ne=>[tr(Ue(j(ne.data.price)),1)]),_:1}),ge(Ie(jn),{field:"total",header:"Thnh tin"},{body:Xe(ne=>[tr(Ue(j(ne.data.price*ne.data.quantity)),1)]),_:1})]),_:1},8,["value"]),M("div",Tne,[M("p",Ene,"Tng tin: "+Ue(j(s.value.totalAmount)),1)])])):Ct("",!0)]),_:1},8,["visible"])]))}}),Pne=Lo(Ine,[["__scopeId","data-v-27f4dc20"]]),Ane={class:"bg-white rounded-lg p-4 min-h-[500px]"},Rne={class:"grid grid-cols-4 gap-4 mb-6"},Mne={class:"bg-white rounded-lg p-4 shadow-sm border"},Dne={class:"flex justify-between items-center"},Lne={class:"flex flex-col gap-1"},One={class:"text-xl font-bold"},zne={class:"mt-2"},Bne={class:"bg-white rounded-lg p-4 shadow-sm border"},Fne={class:"flex justify-between items-center"},$ne={class:"flex flex-col gap-1"},Nne={class:"text-xl font-bold"},Vne={class:"mt-2"},jne={class:"bg-white rounded-lg p-4 shadow-sm border"},Une={class:"flex justify-between items-center"},qne={class:"flex flex-col gap-1"},Hne={class:"text-xl font-bold"},Gne={class:"mt-2"},Wne={class:"bg-white rounded-lg p-4 shadow-sm border"},Kne={class:"flex justify-between items-center"},Zne={class:"flex flex-col gap-1"},Xne={class:"text-xl font-bold"},Yne={class:"mt-2"},Jne={class:"grid grid-cols-3 gap-4 mb-6"},Qne={class:"col-span-2 bg-white rounded-lg p-4 shadow-sm border"},ere={class:"bg-white rounded-lg p-4 shadow-sm border"},tre={class:"bg-white rounded-lg p-4 shadow-sm border"},nre={class:"flex justify-between items-center mb-4"},rre={class:"flex gap-2"},ire={class:"flex gap-2"},ore={key:0,class:"p-4"},sre={class:"grid"},are={class:"col-6"},lre={class:"col-6"},cre={key:0},ure=Xr({__name:"FinancePage",setup(t){const e=Ke(15e8),n=Ke(5e8),l=Ke(1e9),m=Ke(15e7),d=Ke(15),x=Ke(-5),s=Ke(25),T=Ke(10),E=Ke(),A=Ke(),z=Ke(),j=Ke(),U=Ke([{id:"TXN001",date:new Date("2024-03-15"),type:"Thu",amount:15e5,description:"Thanh ton n hng #ORD001",status:"Hon thnh",history:[{date:new Date("2024-03-15 10:00"),action:"To giao dch",user:"System"},{date:new Date("2024-03-15 10:05"),action:"Xc nhn thanh ton",user:"Admin"}]},{id:"TXN002",date:new Date("2024-03-14"),type:"Chi",amount:5e5,description:"Hoa hng nh cung cp #V001",status:"ang x l",history:[{date:new Date("2024-03-14 15:00"),action:"To giao dch",user:"System"},{date:new Date("2024-03-14 15:30"),action:"Ch xc nhn",user:"Admin"}]}]),K=[{name:"Tt c",value:"all"},{name:"Thu",value:"Thu"},{name:"Chi",value:"Chi"}],oe=Ke(K[0]),fe=Ke(null),me=Ke(!1),ne=Ke(null),te=Ce=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(Ce),re=Ce=>new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(Ce),ze=Ce=>Ce==="Thu"?"success":"danger",_t=Ce=>{switch(Ce){case"Hon thnh":return"success";case"ang x l":return"warning";case"Tht bi":return"danger";default:return"info"}},Me=Ce=>{ne.value=Ce,me.value=!0},he=Ce=>{console.log("Export transaction:",Ce)};return Co(()=>{const Ce=getComputedStyle(document.documentElement);E.value={labels:["Thng 1","Thng 2","Thng 3","Thng 4","Thng 5","Thng 6"],datasets:[{label:"Doanh thu",data:[65,59,80,81,56,55],fill:!1,borderColor:Ce.getPropertyValue("--green-500"),tension:.4},{label:"Chi ph",data:[28,48,40,19,86,27],fill:!1,borderColor:Ce.getPropertyValue("--red-500"),tension:.4}]},A.value={labels:["Sn phm","Dch v","Hoa hng","Khc"],datasets:[{data:[40,30,20,10],backgroundColor:[Ce.getPropertyValue("--blue-500"),Ce.getPropertyValue("--yellow-500"),Ce.getPropertyValue("--green-500"),Ce.getPropertyValue("--red-500")]}]},z.value={maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:Ce.getPropertyValue("--text-color")}}},scales:{x:{ticks:{color:Ce.getPropertyValue("--text-color-secondary")},grid:{color:Ce.getPropertyValue("--surface-border")}},y:{ticks:{color:Ce.getPropertyValue("--text-color-secondary")},grid:{color:Ce.getPropertyValue("--surface-border")}}}},j.value={plugins:{legend:{labels:{color:Ce.getPropertyValue("--text-color")}}}}}),(Ce,$e)=>(X(),pe("div",Ane,[$e[23]||($e[23]=M("p",{class:"text-2xl font-bold mb-4"},"Qun l ti chnh",-1)),M("div",Rne,[M("div",Mne,[M("div",Dne,[M("div",Lne,[$e[3]||($e[3]=M("span",{class:"text-sm text-gray-500"},"Tng doanh thu",-1)),M("span",One,Ue(te(e.value)),1)]),$e[4]||($e[4]=M("div",{class:"rounded-full p-2 w-12 h-12 flex items-center justify-center bg-green-100"},[M("i",{class:"pi pi-wallet text-green-600 text-xl"})],-1))]),M("div",zne,[M("span",{class:vn(d.value>=0?"text-green-500":"text-red-500")},Ue(d.value>=0?"+":"")+Ue(d.value)+"% ",3),$e[5]||($e[5]=M("span",{class:"text-sm text-gray-500 ml-2"},"So vi thng trc",-1))])]),M("div",Bne,[M("div",Fne,[M("div",$ne,[$e[6]||($e[6]=M("span",{class:"text-sm text-gray-500"},"Chi ph",-1)),M("span",Nne,Ue(te(n.value)),1)]),$e[7]||($e[7]=M("div",{class:"rounded-full p-2 w-12 h-12 flex items-center justify-center bg-red-100"},[M("i",{class:"pi pi-money-bill text-red-600 text-xl"})],-1))]),M("div",Vne,[M("span",{class:vn(x.value>=0?"text-red-500":"text-green-500")},Ue(x.value>=0?"+":"")+Ue(x.value)+"% ",3),$e[8]||($e[8]=M("span",{class:"text-sm text-gray-500 ml-2"},"So vi thng trc",-1))])]),M("div",jne,[M("div",Une,[M("div",qne,[$e[9]||($e[9]=M("span",{class:"text-sm text-gray-500"},"Li nhun",-1)),M("span",Hne,Ue(te(l.value)),1)]),$e[10]||($e[10]=M("div",{class:"rounded-full p-2 w-12 h-12 flex items-center justify-center bg-blue-100"},[M("i",{class:"pi pi-chart-line text-blue-600 text-xl"})],-1))]),M("div",Gne,[M("span",{class:vn(s.value>=0?"text-green-500":"text-red-500")},Ue(s.value>=0?"+":"")+Ue(s.value)+"% ",3),$e[11]||($e[11]=M("span",{class:"text-sm text-gray-500 ml-2"},"So vi thng trc",-1))])]),M("div",Wne,[M("div",Kne,[M("div",Zne,[$e[12]||($e[12]=M("span",{class:"text-sm text-gray-500"},"Hoa hng",-1)),M("span",Xne,Ue(te(m.value)),1)]),$e[13]||($e[13]=M("div",{class:"rounded-full p-2 w-12 h-12 flex items-center justify-center bg-purple-100"},[M("i",{class:"pi pi-percentage text-purple-600 text-xl"})],-1))]),M("div",Yne,[M("span",{class:vn(T.value>=0?"text-green-500":"text-red-500")},Ue(T.value>=0?"+":"")+Ue(T.value)+"% ",3),$e[14]||($e[14]=M("span",{class:"text-sm text-gray-500 ml-2"},"So vi thng trc",-1))])])]),M("div",Jne,[M("div",Qne,[$e[15]||($e[15]=M("h3",{class:"text-lg font-semibold mb-4"},"Xu hng doanh thu",-1)),ge(Ie(kf),{type:"line",data:E.value,options:z.value,class:"h-[300px]"},null,8,["data","options"])]),M("div",ere,[$e[16]||($e[16]=M("h3",{class:"text-lg font-semibold mb-4"},"Phn b doanh thu",-1)),ge(Ie(kf),{type:"pie",data:A.value,options:j.value,class:"h-[300px]"},null,8,["data","options"])])]),M("div",tre,[M("div",nre,[$e[17]||($e[17]=M("h3",{class:"text-lg font-semibold"},"Giao dch gn y",-1)),M("div",rre,[ge(Ie(xs),{modelValue:oe.value,"onUpdate:modelValue":$e[0]||($e[0]=Je=>oe.value=Je),options:K,optionLabel:"name",placeholder:"Loi giao dch",class:"w-48"},null,8,["modelValue"]),ge(Ie(TS),{modelValue:fe.value,"onUpdate:modelValue":$e[1]||($e[1]=Je=>fe.value=Je),selectionMode:"range",showIcon:!0,placeholder:"Chn khong thi gian",class:"w-64"},null,8,["modelValue"])])]),ge(Ie(Xs),{value:U.value,paginator:!0,rows:10,rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem"},{default:Xe(()=>[ge(Ie(jn),{field:"id",header:"M giao dch",sortable:""}),ge(Ie(jn),{field:"date",header:"Ngy",sortable:""},{body:Xe(Je=>[tr(Ue(re(Je.data.date)),1)]),_:1}),ge(Ie(jn),{field:"type",header:"Loi",sortable:""},{body:Xe(Je=>[ge(Ie(Hs),{severity:ze(Je.data.type),value:Je.data.type},null,8,["severity","value"])]),_:1}),ge(Ie(jn),{field:"amount",header:"S tin",sortable:""},{body:Xe(Je=>[M("span",{class:vn(Je.data.type==="Thu"?"text-green-600":"text-red-600")},Ue(te(Je.data.amount)),3)]),_:1}),ge(Ie(jn),{field:"description",header:"M t"}),ge(Ie(jn),{field:"status",header:"Trng thi",sortable:""},{body:Xe(Je=>[ge(Ie(Hs),{severity:_t(Je.data.status),value:Je.data.status},null,8,["severity","value"])]),_:1}),ge(Ie(jn),{header:"Thao tc"},{body:Xe(Je=>[M("div",ire,[ge(Ie(jr),{icon:"pi pi-eye",severity:"info",onClick:ft=>Me(Je.data)},null,8,["onClick"]),ge(Ie(jr),{icon:"pi pi-file-pdf",severity:"secondary",onClick:ft=>he(Je.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["value"])]),ge(Ie(Ra),{visible:me.value,"onUpdate:visible":$e[2]||($e[2]=Je=>me.value=Je),modal:"",header:"Chi tit giao dch",style:{width:"50vw"}},{default:Xe(()=>[ne.value?(X(),pe("div",ore,[M("div",sre,[M("div",are,[$e[19]||($e[19]=M("p",{class:"font-bold"},"Thng tin giao dch",-1)),M("p",null,"M giao dch: "+Ue(ne.value.id),1),M("p",null,"Ngy: "+Ue(re(ne.value.date)),1),M("p",null,[$e[18]||($e[18]=tr("Loi: ")),ge(Ie(Hs),{severity:ze(ne.value.type),value:ne.value.type},null,8,["severity","value"])]),M("p",null,"S tin: "+Ue(te(ne.value.amount)),1)]),M("div",lre,[$e[21]||($e[21]=M("p",{class:"font-bold"},"Thng tin b sung",-1)),M("p",null,[$e[20]||($e[20]=tr("Trng thi: ")),ge(Ie(Hs),{severity:_t(ne.value.status),value:ne.value.status},null,8,["severity","value"])]),M("p",null,"M t: "+Ue(ne.value.description),1),ne.value.relatedTransaction?(X(),pe("p",cre,"Giao dch lin quan: "+Ue(ne.value.relatedTransaction),1)):Ct("",!0)])]),ge(Ie(Rh)),$e[22]||($e[22]=M("p",{class:"font-bold mb-2"},"Lch s giao dch",-1)),ge(Ie(Xs),{value:ne.value.history,class:"mt-2"},{default:Xe(()=>[ge(Ie(jn),{field:"date",header:"Thi gian"},{body:Xe(Je=>[tr(Ue(re(Je.data.date)),1)]),_:1}),ge(Ie(jn),{field:"action",header:"Hnh ng"}),ge(Ie(jn),{field:"user",header:"Ngi thc hin"})]),_:1},8,["value"])])):Ct("",!0)]),_:1},8,["visible"])]))}}),dre=Lo(ure,[["__scopeId","data-v-d7704278"]]),hre={class:"h-full relative min-h-screen"},pre={class:"w-[17%] bg-white fixed top-10 left-10 rounded-lg p-4 h-[90%]"},fre={class:"flex flex-col justify-between gap-4 pt-4"},mre={class:"!ml-100 !pt-10 w-[76%] rounded-lg relative z-10"},gre=Xr({__name:"VendorLayout",setup(t){const e=M_(),n=[{id:1,name:"Dashboard",path:"/vendor/dashboard",icon:"pi pi-home"},{id:2,name:"Sn phm ca ti",path:"/vendor/products",icon:"pi pi-box"},{id:3,name:"n hng",path:"/vendor/orders",icon:"pi pi-shopping-bag"},{id:6,name:"Ti chnh",path:"/vendor/finance",icon:"pi pi-money-bill"},{id:7,name:"Qung co",path:"/vendor/advertisement",icon:"pi pi-bullhorn"},{id:8,name:"H tr",path:"/vendor/support",icon:"pi pi-support"}];return Co(()=>{document.body.classList.add("!bg-[#f8f9fa]")}),Ef(()=>{document.body.classList.remove("!bg-[#f8f9fa]")}),(l,m)=>{const d=wn("router-link"),x=wn("router-view");return X(),pe("div",hre,[m[1]||(m[1]=M("div",{class:"bg-[#344767] h-[300px] w-full absolute top-0 left-0 z-[-1]"},null,-1)),M("aside",pre,[m[0]||(m[0]=M("div",{class:""},[M("div",{class:"pb-4 flex items-center gap-2"},[M("img",{src:"https://demos.creative-tim.com/argon-dashboard/assets/img/logo-ct-dark.png",alt:"",class:"!w-10 !h-10 object-cover"}),M("span",null,"Vendor Dashboard")]),M("hr",{style:{border:"none",height:"1px","background-image":`linear-gradient(
              90deg,
              transparent 0%,
              rgba(0, 0, 0, 0.4) 40%,
              rgba(0, 0, 0, 0.8) 50%,
              rgba(0, 0, 0, 0.4) 60%,
              transparent 100%
            )`}})],-1)),M("div",fre,[(X(),pe(an,null,fr(n,s=>ge(d,{key:s.id,to:s.path,class:vn(["p-2 rounded-lg transition-all duration-300 cursor-pointer text-[#344767] flex items-center gap-2",[Ie(e).path===s.path?"bg-[#f6f9fc] ":""]])},{default:Xe(()=>[M("i",{class:vn([s.icon,"text-lg"])},null,2),M("span",{class:vn(["text-[#344767]",[Ie(e).path===s.path?" font-bold":""]])},Ue(s.name),3)]),_:2},1032,["to","class"])),64))])]),M("main",mre,[ge(x)])])}}}),yre={class:"rounded-lg"},vre={class:"mt-8"},bre=["innerHTML"],_re=["innerHTML"],xre=Xr({__name:"StoreManagement",setup(t){const e=[{id:"ORD001",customer:"John Smith",date:"2024-01-15",amount:"299.99",status:"Delivered"},{id:"ORD002",customer:"Mary Johnson",date:"2024-01-10",amount:"149.99",status:"Processing"},{id:"ORD003",customer:"Robert Brown",date:"2024-01-05",amount:"499.99",status:"Pending"}],n=m=>`$${m.amount}`,l=m=>m.status==="Delivered"?"<span class='!bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-medium'>Delivered</span>":m.status==="Processing"?"<span class='!bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-xs font-medium'>Processing</span>":"<span class='!bg-blue-50 text-blue-500 px-3 py-1 rounded-full text-xs font-medium'>Pending</span>";return(m,d)=>(X(),pe("div",yre,[d[1]||(d[1]=da('<div class="bg-white rounded-xl shadow flex items-center justify-between p-6 mb-6"><div class="flex items-center gap-4"><img src="https://randomuser.me/api/portraits/men/32.jpg" alt="avatar" class="w-16 h-16 rounded-full border-4 border-blue-100 object-cover"><div><div class="text-2xl font-bold text-gray-800">Vendor Store</div><div class="text-gray-500">Premium Electronics Store</div></div></div><button class="text-gray-500 hover:text-blue-600 text-2xl"><i class="pi pi-external-link"></i></button></div><div class="!grid grid-cols-1 md:grid-cols-4 gap-6"><div class="bg-white rounded-xl shadow p-6 flex items-center justify-between"><div><div class="text-gray-500 text-sm mb-1">Total Revenue</div><div class="text-2xl font-bold">$45890.75</div></div><div class="bg-blue-100 rounded-full !w-12 !h-12 flex items-center justify-center"><i class="pi pi-dollar text-blue-500 text-2xl"></i></div></div><div class="bg-white rounded-xl shadow p-6 flex items-center justify-between"><div><div class="text-gray-500 text-sm mb-1">Total Orders</div><div class="text-2xl font-bold">167</div></div><div class="bg-blue-100 rounded-full !w-12 !h-12 flex items-center justify-center"><i class="pi pi-shopping-bag text-blue-500 text-2xl"></i></div></div><div class="bg-white rounded-xl shadow p-6 flex items-center justify-between"><div><div class="text-gray-500 text-sm mb-1">Customers</div><div class="text-2xl font-bold">124</div></div><div class="bg-blue-100 rounded-full !w-12 !h-12 flex items-center justify-center"><i class="pi pi-users text-blue-500 text-2xl"></i></div></div><div class="bg-white rounded-xl shadow p-6 flex items-center justify-between"><div><div class="text-gray-500 text-sm mb-1">Average Order</div><div class="text-2xl font-bold">$274.79</div></div><div class="bg-blue-100 rounded-full !w-12 !h-12 flex items-center justify-center"><i class="pi pi-chart-bar text-blue-500 text-2xl"></i></div></div></div>',2)),M("div",vre,[d[0]||(d[0]=M("div",{class:"flex items-center justify-between mb-4"},[M("h2",{class:"text-xl font-semibold"},"Recent Orders")],-1)),ge(Ie(Xs),{value:e,class:"w-full",pt:{table:{class:"min-w-full"}}},{default:Xe(()=>[ge(Ie(jn),{field:"id",header:"ORDER ID","body-class":"px-4 py-3 font-medium"}),ge(Ie(jn),{field:"customer",header:"CUSTOMER","body-class":"px-4 py-3"}),ge(Ie(jn),{field:"date",header:"DATE","body-class":"px-4 py-3"}),ge(Ie(jn),{field:"amount",header:"AMOUNT","body-class":"px-4 py-3 font-semibold"},{body:Xe(x=>[M("span",{innerHTML:n(x.data)},null,8,bre)]),_:1}),ge(Ie(jn),{field:"status",header:"STATUS","body-class":"px-4 py-3"},{body:Xe(x=>[M("span",{innerHTML:l(x.data)},null,8,_re)]),_:1})]),_:1})])]))}}),wre={class:"p-6"},Sre={class:"bg-white rounded-lg shadow-sm"},Cre={class:"p-4 border-b"},kre={class:"flex items-center gap-4"},Tre={class:"flex-1"},Ere={class:"p-input-icon-left w-full"},Ire={class:"flex items-center"},Pre={class:"font-medium text-gray-900"},Are={class:"text-sm text-gray-500"},Rre={class:"font-medium"},Mre={class:"font-medium"},Dre={class:"flex items-center"},Lre={class:"font-medium mr-1"},Ore={class:"flex gap-2"},zre={class:"!grid grid-cols-2 gap-4 my-2"},Bre={key:0,class:"mt-3"},Fre={class:"text-sm text-gray-600 mb-2"},$re={class:"grid grid-cols-3 gap-3"},Nre=["onClick"],Vre={class:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded z-10"},jre={class:"pt-6"},Ure={key:0,class:"!space-y-4"},qre={class:"flex justify-between items-center mb-3"},Hre={class:"font-medium text-gray-900"},Gre=["onClick"],Wre={class:"!grid grid-cols-2 gap-4 my-2"},Kre=["onUpdate:modelValue"],Zre=["onUpdate:modelValue"],Xre={class:"flex items-center gap-2"},Yre=["onUpdate:modelValue"],Jre=["onUpdate:modelValue"],Qre=["onUpdate:modelValue"],eie={class:"col-span-2"},tie=["onUpdate:modelValue"],nie={key:1,class:"text-center py-8 text-gray-500"},rie={class:"flex justify-end gap-3 pt-4 border-t"},iie={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},oie=Xr({__name:"ProductManagement",setup(t){const e=Xl(),n=Ke(!1),l=Ke(!1),m=Ke(0),d=Ke(10),x=Ke("name"),s=Ke(1),T=Ke([]),E=Ke(""),A=Ke("name"),z=Ke(!1),j=Ke(!1),U=Ke({}),K=Ke([]),oe=Ke([{label:"Tn sn phm",value:"name"},{label:"Gi",value:"price"},{label:"Tn kho",value:"stock"},{label:"nh gi",value:"rating"},{label:"Trng thi",value:"status"}]);ho([E,A],()=>{m.value=0});const fe=async()=>{n.value=!0;try{const kt=await YZ();T.value=kt}catch(kt){console.error("Error loading products:",kt),e.add({severity:"error",summary:"Li",detail:"Khng th ti danh sch sn phm",life:5e3})}finally{n.value=!1}};Co(()=>{fe()});const me=ki(()=>{let kt=[...T.value];if(E.value){const wt=E.value.toLowerCase();kt=kt.filter(Et=>Et.name.toLowerCase().includes(wt)||Et.description.toLowerCase().includes(wt))}return kt}),ne=kt=>{x.value=typeof kt.sortField=="string"?kt.sortField:"",s.value=typeof kt.sortOrder=="number"?kt.sortOrder:1},te=kt=>{switch(kt){case"active":return"success";case"inactive":return"danger";default:return"warning"}},re=kt=>{var wt;return((wt=kt.variants)==null?void 0:wt.reduce((Et,on)=>Et+on.stockQuantity,0))||0},ze=kt=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(kt),_t=kt=>kt.images&&kt.images.length>0?kt.images[0]:"https://via.placeholder.com/150",Me=()=>{j.value=!1,U.value={name:"",description:"",price:0,variants:[],images:[],rating:0,status:null},z.value=!0},he=kt=>{j.value=!0,U.value={...kt},z.value=!0},Ce=()=>{z.value=!1,U.value={}},$e=kt=>{const wt=kt.target;wt.files&&wt.files.length>0&&(U.value.images||(U.value.images=[]),K.value=[],Array.from(wt.files).forEach(Et=>{const on=new FileReader;on.onload=In=>{var Or,oo;const ir=(Or=In.target)==null?void 0:Or.result;(oo=U.value.images)==null||oo.push(ir)},on.readAsDataURL(Et)}))},Je=kt=>{U.value.images&&Array.isArray(U.value.images)&&U.value.images.splice(kt,1),K.value&&Array.isArray(K.value)&&K.value.splice(kt,1)},ft=()=>{U.value.variants||(U.value.variants=[]),U.value.variants.push({size:"",colorName:"",colorHex:"#000000",price:U.value.price||0,stockQuantity:0})},ut=kt=>{U.value.variants&&U.value.variants.splice(kt,1)},Qe=async()=>{if(!U.value.variants||U.value.variants.length===0){e.add({severity:"warn",summary:"Cnh bo",detail:"Vui lng thm t nht mt bin th sn phm",life:3e3});return}for(const kt of U.value.variants)if(!kt.size||!kt.colorName||!kt.colorHex||kt.stockQuantity<0){e.add({severity:"error",summary:"Li",detail:"Vui lng in y  thng tin cho tt c bin th",life:3e3});return}if(l.value=!0,j.value){const kt=T.value.findIndex(wt=>wt.id===U.value.id);kt!==-1&&(T.value[kt]={...T.value[kt],...U.value}),e.add({severity:"success",summary:"Thnh cng",detail:"Sn phm  c cp nht",life:3e3}),Ce()}else{const kt={name:U.value.name||"",description:U.value.description||"",price:U.value.price||0,variants:U.value.variants||[],images:U.value.images||[]};QZ(kt).then(wt=>{console.log("Product created successfully:",wt),e.add({severity:"success",summary:"Thnh cng",detail:"Sn phm  c to thnh cng",life:3e3}),Ce(),fe()}).catch(wt=>{console.error("Error creating product:",wt),e.add({severity:"error",summary:"Li",detail:"C li xy ra khi to sn phm. Vui lng th li.",life:5e3})}).finally(()=>{l.value=!1})}},Qt=kt=>{confirm("Bn c chc chn mun xa sn phm ny?")&&(T.value=T.value.filter(wt=>wt.id!==kt.id),e.add({severity:"success",summary:"Thnh cng",detail:"Sn phm  c xa",life:3e3}))};return(kt,wt)=>{const Et=No("tooltip");return X(),pe("div",wre,[ge(Ie(Mh)),M("div",{class:"flex justify-between items-center mb-6"},[wt[7]||(wt[7]=M("h1",{class:"text-2xl font-semibold text-white"},"Qun l sn phm",-1)),M("button",{onClick:Me,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},wt[6]||(wt[6]=[M("i",{class:"pi pi-plus mr-2"},null,-1),tr("Thm sn phm mi ")]))]),M("div",Sre,[M("div",Cre,[M("div",kre,[M("div",Tre,[M("span",Ere,[wt[8]||(wt[8]=M("i",{class:"pi pi-search"},null,-1)),ge(Ie(vo),{modelValue:E.value,"onUpdate:modelValue":wt[0]||(wt[0]=on=>E.value=on),placeholder:"Tm kim sn phm...",class:"w-full"},null,8,["modelValue"])])]),ge(Ie(eq),{modelValue:A.value,"onUpdate:modelValue":wt[1]||(wt[1]=on=>A.value=on),options:oe.value,optionLabel:"label",optionValue:"value",placeholder:"Sp xp theo",class:"w-48"},null,8,["modelValue","options"])])]),M("div",null,[ge(Ie(Xs),{value:me.value,paginator:!0,rows:d.value,rowsPerPageOptions:[5,10,20,50],loading:n.value,globalFilterFields:["name","description"],sortField:x.value,sortOrder:s.value,onSort:ne,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Hin th {first} n {last} trong tng s {totalRecords} sn phm",responsiveLayout:"scroll",class:"p-datatable-sm"},{default:Xe(()=>[ge(Ie(jn),{field:"name",header:"Sn phm",sortable:!0,style:{"min-width":"200px"}},{body:Xe(({data:on})=>[M("div",Ire,[ge(Ie(jy),{src:_t(on),alt:on.name,class:"!w-14 !h-14 rounded-lg !object-cover mr-3",preview:"",pt:{image:"!w-14 !h-14 rounded-lg !object-cover"}},null,8,["src","alt"]),M("div",null,[M("div",Pre,Ue(on.name),1),M("div",Are,Ue(on.category||"Cha phn loi"),1)])])]),_:1}),ge(Ie(jn),{field:"price",header:"Gi",sortable:!0,style:{"min-width":"120px"}},{body:Xe(({data:on})=>[M("span",Rre,Ue(ze(on.price)),1)]),_:1}),ge(Ie(jn),{field:"stock",header:"Tn kho",sortable:!0,style:{"min-width":"100px"}},{body:Xe(({data:on})=>[M("span",Mre,Ue(re(on)),1)]),_:1}),ge(Ie(jn),{field:"rating",header:"nh gi",sortable:!0,style:{"min-width":"100px"}},{body:Xe(({data:on})=>[M("div",Dre,[M("span",Lre,Ue(on.rating),1),wt[9]||(wt[9]=M("i",{class:"pi pi-star-fill text-yellow-400"},null,-1))])]),_:1}),ge(Ie(jn),{field:"status",header:"Trng thi",sortable:!0,style:{"min-width":"120px"}},{body:Xe(({data:on})=>[ge(Ie(Hs),{value:on.status||"Cha xc nh",severity:te(on.status)},null,8,["value","severity"])]),_:1}),ge(Ie(jn),{header:"Thao tc",style:{"min-width":"120px"}},{body:Xe(({data:on})=>[M("div",Ore,[_r(ge(Ie(jr),{icon:"pi pi-pencil",class:"p-button-text p-button-sm p-button-info",onClick:In=>he(on)},null,8,["onClick"]),[[Et,"Chnh sa",void 0,{top:!0}]]),_r(ge(Ie(jr),{icon:"pi pi-trash",class:"p-button-text p-button-sm p-button-danger",onClick:In=>Qt(on)},null,8,["onClick"]),[[Et,"Xa",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","loading","sortField","sortOrder"])])]),ge(Ie(Ra),{visible:z.value,"onUpdate:visible":wt[5]||(wt[5]=on=>z.value=on),modal:!0,closable:!0,style:{width:"800px"},header:j.value?"Chnh sa sn phm":"Thm sn phm mi"},{default:Xe(()=>[ge(RP,{isLoading:l.value},{default:Xe(()=>[M("form",{onSubmit:Ih(Qe,["prevent"]),class:"space-y-6"},[M("div",zre,[M("div",null,[wt[10]||(wt[10]=M("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tn sn phm *",-1)),_r(M("input",{"onUpdate:modelValue":wt[2]||(wt[2]=on=>U.value.name=on),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[ms,U.value.name]])]),M("div",null,[wt[11]||(wt[11]=M("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gi c bn *",-1)),_r(M("input",{"onUpdate:modelValue":wt[3]||(wt[3]=on=>U.value.price=on),type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[ms,U.value.price]])])]),M("div",null,[wt[12]||(wt[12]=M("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"M t *",-1)),_r(M("textarea",{"onUpdate:modelValue":wt[4]||(wt[4]=on=>U.value.description=on),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[ms,U.value.description]])]),M("div",null,[wt[15]||(wt[15]=M("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Hnh nh",-1)),M("input",{type:"file",onChange:$e,accept:"image/*",multiple:"",class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),K.value.length>0?(X(),pe("div",Bre,[M("p",Fre," nh  chn ("+Ue(K.value.length)+" nh): ",1),M("div",$re,[(X(!0),pe(an,null,fr(K.value,(on,In)=>(X(),pe("div",{key:In,class:"relative border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow"},[ge(Ie(jy),{src:on,alt:`Product image ${In+1}`,class:"w-full h-24 object-cover",preview:"",pt:{image:"w-full h-24 object-cover"}},null,8,["src","alt"]),M("button",{type:"button",onClick:ir=>Je(In),class:"absolute top-1 right-1 cursor-pointer bg-red-500 hover:bg-red-600 text-white rounded-full !w-6 !h-6 flex items-center justify-center text-xs shadow-lg transition-all duration-200 z-10",title:"Xa nh ny"},wt[13]||(wt[13]=[M("i",{class:"pi pi-times"},null,-1)]),8,Nre),M("div",Vre,Ue(In+1),1)]))),128))]),wt[14]||(wt[14]=M("p",{class:"text-xs text-gray-500 mt-2"},"Click nt X  xa nh",-1))])):Ct("",!0)]),M("div",jre,[M("div",{class:"flex justify-between items-center mb-4"},[wt[17]||(wt[17]=M("h3",{class:"text-lg font-medium text-gray-900"}," Bin th sn phm ",-1)),M("button",{type:"button",onClick:ft,class:"px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500"},wt[16]||(wt[16]=[M("i",{class:"pi pi-plus mr-1"},null,-1),tr("Thm bin th ")]))]),U.value.variants&&U.value.variants.length>0?(X(),pe("div",Ure,[(X(!0),pe(an,null,fr(U.value.variants,(on,In)=>(X(),pe("div",{key:In,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},[M("div",qre,[M("h4",Hre," Bin th "+Ue(In+1),1),M("button",{type:"button",onClick:ir=>ut(In),class:"text-red-600 hover:text-red-800"},wt[18]||(wt[18]=[M("i",{class:"pi pi-trash"},null,-1)]),8,Gre)]),M("div",Wre,[M("div",null,[wt[20]||(wt[20]=M("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Kch thc *",-1)),_r(M("select",{"onUpdate:modelValue":ir=>on.size=ir,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},wt[19]||(wt[19]=[M("option",{value:""},"Chn kch thc",-1),M("option",{value:"XS"},"XS",-1),M("option",{value:"S"},"S",-1),M("option",{value:"M"},"M",-1),M("option",{value:"L"},"L",-1),M("option",{value:"XL"},"XL",-1),M("option",{value:"XXL"},"XXL",-1)]),8,Kre),[[ff,on.size]])]),M("div",null,[wt[21]||(wt[21]=M("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tn mu *",-1)),_r(M("input",{"onUpdate:modelValue":ir=>on.colorName=ir,type:"text",placeholder:"VD: Red, Blue, Black",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,8,Zre),[[ms,on.colorName]])]),M("div",null,[wt[22]||(wt[22]=M("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"M mu *",-1)),M("div",Xre,[_r(M("input",{"onUpdate:modelValue":ir=>on.colorHex=ir,type:"color",class:"w-12 h-10 border border-gray-300 rounded-md"},null,8,Yre),[[ms,on.colorHex]]),_r(M("input",{"onUpdate:modelValue":ir=>on.colorHex=ir,type:"text",placeholder:"#FF0000",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,8,Jre),[[ms,on.colorHex]])])]),M("div",null,[wt[23]||(wt[23]=M("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gi bin th",-1)),_r(M("input",{"onUpdate:modelValue":ir=>on.price=ir,type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,Qre),[[ms,on.price]])]),M("div",eie,[wt[24]||(wt[24]=M("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"S lng tn kho *",-1)),_r(M("input",{"onUpdate:modelValue":ir=>on.stockQuantity=ir,type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,8,tie),[[ms,on.stockQuantity]])])])]))),128))])):(X(),pe("div",nie,wt[25]||(wt[25]=[M("i",{class:"pi pi-box text-4xl mb-2"},null,-1),M("p",null,"Cha c bin th no. Hy thm bin th u tin.",-1)])))]),M("div",rie,[M("button",{type:"button",onClick:Ce,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500"}," Hy "),M("button",iie,Ue(j.value?"Cp nht":"Thm mi"),1)])],32)]),_:1},8,["isLoading"])]),_:1},8,["visible","header"])])}}}),sie={class:"p-6 rounded-lg"},aie={class:"bg-white rounded-lg shadow-sm"},lie={class:"text-sm text-gray-900"},cie={class:"text-sm text-gray-500"},uie={class:"text-sm text-gray-900"},die={class:"text-sm text-gray-900"},hie=["onClick"],pie=["onClick"],fie={class:"mt-3"},mie={key:0,class:"space-y-4"},gie={class:"bg-gray-50 p-4 rounded-lg"},yie={class:"grid grid-cols-2 gap-4"},vie={class:"font-medium"},bie={class:"font-medium"},_ie={class:"col-span-2"},xie={class:"font-medium"},wie={class:"border rounded-lg"},Sie={key:0},Cie={class:"ml-0 flex-1"},kie={class:"font-medium"},Tie={class:"text-sm text-gray-500"},Eie={class:"text-right"},Iie={class:"font-medium"},Pie={class:"text-sm text-gray-500"},Aie={key:1,class:"p-4 text-gray-500"},Rie={class:"bg-gray-50 p-4 rounded-lg"},Mie={class:"flex justify-between font-medium text-lg border-t pt-2 mt-2"},Die={class:"relative"},Lie={class:"font-medium"},Oie={class:"text-sm text-gray-500"},zie={class:"flex justify-end gap-3 mt-4"},Bie=Xr({__name:"OrderManagement",setup(t){const e=[{value:"PENDING",label:"Ch x l"},{value:"PROCESSING",label:"ang x l"},{value:"SHIPPED",label:"ang giao hng"},{value:"DELIVERED",label:" giao hng"},{value:"CANCELLED",label:" hy"},{value:"REFUNDED",label:" hon tr"}],n=Ke([]),l=Ke(!1);Ke(""),Ke("createdAt");const m=Ke(0),d=Ke(!1),x=Ke(null),s=Ke(0),T=Ke(5),E=Ke(0),A=Ke(e[0].value),z=async()=>{l.value=!0;try{const Me=await DJ(s.value,T.value,A.value);n.value=Me.orders,E.value=Me.totalElements}catch{}finally{l.value=!1}};Co(()=>{z()}),ho(m,Me=>{A.value=e[Me].value,s.value=0,z()});const j=Me=>{s.value=Me.page,T.value=Me.rows,z()},U=Me=>new Date(Me).toLocaleString("vi-VN"),K=Me=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(Me),oe=Me=>{var he;return((he=e.find(Ce=>Ce.value===Me))==null?void 0:he.label)||Me},fe=Me=>({PENDING:"bg-yellow-100 text-yellow-800",PROCESSING:"bg-blue-100 text-blue-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800",REFUNDED:"bg-gray-100 text-gray-800"})[Me]||"bg-gray-100 text-gray-800",me=Me=>{const he=["PENDING","PROCESSING","SHIPPED","DELIVERED"],Ce=he.indexOf(Me.status);return Ce>=0&&Ce<he.length-1},ne=Me=>({PENDING:"Xc nhn n hng",PROCESSING:"ng gi v giao hng",SHIPPED:"Xc nhn  giao"})[Me]||"Cp nht trng thi",te=Me=>{x.value=Me,d.value=!0},re=Me=>{const he=["PENDING","PROCESSING","SHIPPED","DELIVERED"],Ce=he.indexOf(Me.status);if(Ce>=0&&Ce<he.length-1){const $e=he[Ce+1];Me.status=$e}},ze=(Me,he)=>{const Ce=["PENDING","PROCESSING","SHIPPED","DELIVERED"],$e=Ce.indexOf(Me);return Ce.indexOf(he)<=$e},_t=(Me,he)=>"-";return(Me,he)=>(X(),pe("div",sie,[he[16]||(he[16]=M("h1",{class:"text-2xl font-semibold text-white mb-6"},"Qun l n hng",-1)),ge(Ie(J6),{activeIndex:m.value,"onUpdate:activeIndex":he[0]||(he[0]=Ce=>m.value=Ce),class:"rounded-lg"},{default:Xe(()=>[(X(),pe(an,null,fr(e,Ce=>ge(Ie(Cf),{key:Ce.value,value:Ce.value},{header:Xe(()=>[tr(Ue(Ce.label),1)]),default:Xe(()=>[M("div",aie,[ge(Ie(Xs),{value:n.value,class:"w-full",pt:{table:{class:"min-w-full"}},rows:T.value,paginator:"",rowsPerPageOptions:[5,10,20,50],totalRecords:E.value,first:s.value*T.value,loading:l.value,lazy:!0,onPage:j},{default:Xe(()=>[ge(Ie(jn),{field:"orderId",header:"M n hng","body-class":"px-6 py-4 whitespace-nowrap font-medium"}),ge(Ie(jn),{header:"Khch hng","body-class":"px-6 py-4 whitespace-nowrap"},{body:Xe($e=>[M("div",lie,Ue($e.data.receiverName),1),M("div",cie,Ue($e.data.receiverPhone),1)]),_:1}),ge(Ie(jn),{field:"createdAt",header:"Ngy t","body-class":"px-6 py-4 whitespace-nowrap"},{body:Xe($e=>[M("div",uie,Ue(U($e.data.createdAt)),1)]),_:1}),ge(Ie(jn),{field:"totalAmount",header:"Tng tin","body-class":"px-6 py-4 whitespace-nowrap"},{body:Xe($e=>[M("div",die,Ue(K($e.data.totalAmount||0)),1)]),_:1}),ge(Ie(jn),{field:"status",header:"Trng thi","body-class":"px-6 py-4 whitespace-nowrap"},{body:Xe($e=>[M("span",{class:vn(["px-2 py-1 text-xs font-medium rounded-full",fe($e.data.status)])},Ue(oe($e.data.status)),3)]),_:2},1024),ge(Ie(jn),{header:"Thao tc","body-class":"px-6 py-4 whitespace-nowrap text-sm font-medium"},{body:Xe($e=>[M("button",{onClick:Je=>te($e.data),class:"text-blue-600 hover:text-blue-900 mr-3"},he[3]||(he[3]=[M("i",{class:"pi pi-eye"},null,-1)]),8,hie),me($e.data)?(X(),pe("button",{key:0,onClick:Je=>re($e.data),class:"text-green-600 hover:text-green-900"},he[4]||(he[4]=[M("i",{class:"pi pi-check"},null,-1)]),8,pie)):Ct("",!0)]),_:1})]),_:2},1032,["value","rows","totalRecords","first","loading"])])]),_:2},1032,["value"])),64))]),_:1},8,["activeIndex"]),ge(Ie(Ra),{visible:d.value,"onUpdate:visible":he[2]||(he[2]=Ce=>d.value=Ce),modal:!0,closable:!0,style:{width:"800px"},header:x.value?`Chi tit n hng #${x.value.orderId}`:""},{default:Xe(()=>[M("div",fie,[he[15]||(he[15]=M("div",{class:"flex justify-between items-center mb-4"},null,-1)),x.value?(X(),pe("div",mie,[M("div",gie,[he[8]||(he[8]=M("h4",{class:"font-medium mb-2"},"Thng tin khch hng",-1)),M("div",yie,[M("div",null,[he[5]||(he[5]=M("p",{class:"text-sm text-gray-600"},"Tn khch hng",-1)),M("p",vie,Ue(x.value.receiverName),1)]),M("div",null,[he[6]||(he[6]=M("p",{class:"text-sm text-gray-600"},"S in thoi",-1)),M("p",bie,Ue(x.value.receiverPhone),1)]),M("div",_ie,[he[7]||(he[7]=M("p",{class:"text-sm text-gray-600"},"a ch giao hng",-1)),M("p",xie,Ue(x.value.note||"---"),1)])])]),M("div",null,[he[10]||(he[10]=M("h4",{class:"font-medium mb-2"},"Sn phm",-1)),M("div",wie,[x.value.items&&x.value.items.length>0?(X(),pe("div",Sie,[(X(!0),pe(an,null,fr(x.value.items,Ce=>(X(),pe("div",{key:Ce.productSku,class:"flex items-center p-4 border-b last:border-b-0"},[he[9]||(he[9]=M("div",{class:"w-16 h-16 flex items-center justify-center bg-gray-100 rounded-lg mr-4"},[M("span",{class:"text-xs text-gray-400"},"No Image")],-1)),M("div",Cie,[M("h5",kie,Ue(Ce.productName),1),M("p",Tie,"S lng: "+Ue(Ce.quantity),1)]),M("div",Eie,[M("p",Iie,Ue(K(Ce.price)),1),M("p",Pie," Tng: "+Ue(K(Ce.price*Ce.quantity)),1)])]))),128))])):(X(),pe("div",Aie,"Khng c sn phm"))])]),M("div",Rie,[M("div",Mie,[he[11]||(he[11]=M("span",null,"Tng cng",-1)),M("span",null,Ue(K(x.value.totalAmount||0)),1)])]),M("div",null,[he[14]||(he[14]=M("h4",{class:"font-medium mb-2"},"Trng thi n hng",-1)),M("div",Die,[he[13]||(he[13]=M("div",{class:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"},null,-1)),(X(),pe(an,null,fr(e,Ce=>M("div",{key:Ce.value,class:"relative pl-10 pb-4"},[M("div",{class:vn(["absolute left-0 w-8 h-8 rounded-full flex items-center justify-center",ze(x.value.status,Ce.value)?"bg-green-500 text-white":"bg-gray-200 text-gray-600"])},he[12]||(he[12]=[M("i",{class:"pi pi-check"},null,-1)]),2),M("div",null,[M("p",Lie,Ue(Ce.label),1),M("p",Oie,Ue(_t(x.value,Ce.value)),1)])])),64))])]),M("div",zie,[me(x.value)?(X(),pe("button",{key:0,onClick:he[1]||(he[1]=Ce=>re(x.value)),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500"},Ue(ne(x.value.status)),1)):Ct("",!0)])])):Ct("",!0)])]),_:1},8,["visible","header"])]))}}),Fie={class:"p-6"},$ie={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},Nie={class:"bg-white rounded-lg p-6 shadow-sm"},Vie={class:"flex items-center justify-between"},jie={class:"text-2xl font-semibold mt-1"},Uie={class:"mt-4"},qie={class:"text-sm text-green-600"},Hie={class:"bg-white rounded-lg p-6 shadow-sm"},Gie={class:"flex items-center justify-between"},Wie={class:"text-2xl font-semibold mt-1"},Kie={class:"mt-4"},Zie={class:"text-sm text-gray-500"},Xie={class:"bg-white rounded-lg p-6 shadow-sm"},Yie={class:"flex items-center justify-between"},Jie={class:"text-2xl font-semibold mt-1"},Qie={class:"bg-white rounded-lg p-6 shadow-sm"},eoe={class:"flex items-center justify-between"},toe={class:"text-2xl font-semibold mt-1"},noe={class:"mt-4"},roe={class:"text-sm text-green-600"},ioe={class:"bg-white rounded-lg p-6 shadow-sm mb-6"},ooe={class:"flex justify-between items-center mb-4"},soe={class:"h-80"},aoe={class:"bg-white rounded-lg shadow-sm"},loe={class:"overflow-x-auto"},coe={class:"w-full"},uoe={class:"bg-white divide-y divide-gray-200"},doe={class:"px-6 py-4 whitespace-nowrap"},hoe={class:"text-sm text-gray-900"},poe={class:"px-6 py-4 whitespace-nowrap"},foe={class:"text-sm text-gray-900"},moe={class:"px-6 py-4 whitespace-nowrap"},goe={class:"px-6 py-4 whitespace-nowrap"},yoe={class:"px-6 py-4 whitespace-nowrap"},voe={class:"px-6 py-4 whitespace-nowrap"},boe={class:"text-sm text-gray-500"},_oe={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full"},xoe={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},woe={class:"mt-3"},Soe=["max"],Coe=Xr({__name:"FinanceManagement",setup(t){const e=Ke({totalRevenue:15e6,revenueGrowth:15,totalCommission:15e5,commissionRate:10,currentBalance:135e5,successfulOrders:150,orderGrowth:20}),n=Ke("month"),l=Ke([{id:1,date:"2024-03-15T10:30:00",type:"income",amount:1e6,status:"completed",note:"Thanh ton n hng #123"},{id:2,date:"2024-03-14T15:45:00",type:"expense",amount:1e5,status:"completed",note:"Hoa hng h thng"}]),m=Ke(!1),d=Ke(0),x=Ke("bank"),s=Ke(""),T=Ke({labels:["Tun 1","Tun 2","Tun 3","Tun 4"],datasets:[{label:"Doanh thu",backgroundColor:"#3b82f6",data:[5e6,7e6,6e6,8e6]}]}),E=Ke({responsive:!0,plugins:{legend:{display:!0,position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(te){return te.toLocaleString("vi-VN")+" "}}}}}),A=te=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(te),z=te=>new Date(te).toLocaleString("vi-VN"),j=te=>te==="income"?"Thu nhp":"Chi ph",U=te=>te==="income"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",K=te=>({pending:"ang x l",completed:"Hon thnh",failed:"Tht bi"})[te]||te,oe=te=>({pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"})[te]||"bg-gray-100 text-gray-800",fe=()=>{m.value=!0},me=()=>{m.value=!1,d.value=0,x.value="bank",s.value=""},ne=()=>{console.log("Withdrawal request:",{amount:d.value,method:x.value,info:s.value}),me()};return(te,re)=>(X(),pe("div",Fie,[M("div",$ie,[M("div",Nie,[M("div",Vie,[M("div",null,[re[4]||(re[4]=M("p",{class:"text-sm text-gray-500"},"Tng doanh thu",-1)),M("h3",jie,Ue(A(e.value.totalRevenue)),1)]),re[5]||(re[5]=M("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},[M("i",{class:"pi pi-dollar text-blue-600 text-xl"})],-1))]),M("div",Uie,[M("span",qie,[re[6]||(re[6]=M("i",{class:"pi pi-arrow-up"},null,-1)),tr(" "+Ue(e.value.revenueGrowth)+"% so vi thng trc ",1)])])]),M("div",Hie,[M("div",Gie,[M("div",null,[re[7]||(re[7]=M("p",{class:"text-sm text-gray-500"},"Hoa hng phi tr",-1)),M("h3",Wie,Ue(A(e.value.totalCommission)),1)]),re[8]||(re[8]=M("div",{class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center"},[M("i",{class:"pi pi-percentage text-red-600 text-xl"})],-1))]),M("div",Kie,[M("span",Zie,Ue(e.value.commissionRate)+"% trn mi n hng ",1)])]),M("div",Xie,[M("div",Yie,[M("div",null,[re[9]||(re[9]=M("p",{class:"text-sm text-gray-500"},"S d hin ti",-1)),M("h3",Jie,Ue(A(e.value.currentBalance)),1)]),re[10]||(re[10]=M("div",{class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"},[M("i",{class:"pi pi-wallet text-green-600 text-xl"})],-1))]),M("div",{class:"mt-4"},[M("button",{onClick:fe,class:"text-sm text-blue-600 hover:text-blue-800"}," Yu cu rt tin ")])]),M("div",Qie,[M("div",eoe,[M("div",null,[re[11]||(re[11]=M("p",{class:"text-sm text-gray-500"},"n hng thnh cng",-1)),M("h3",toe,Ue(e.value.successfulOrders),1)]),re[12]||(re[12]=M("div",{class:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center"},[M("i",{class:"pi pi-check-circle text-purple-600 text-xl"})],-1))]),M("div",noe,[M("span",roe,[re[13]||(re[13]=M("i",{class:"pi pi-arrow-up"},null,-1)),tr(" "+Ue(e.value.orderGrowth)+"% so vi thng trc ",1)])])])]),M("div",ioe,[M("div",ooe,[re[15]||(re[15]=M("h2",{class:"text-lg font-semibold"},"Biu  doanh thu",-1)),_r(M("select",{"onUpdate:modelValue":re[0]||(re[0]=ze=>n.value=ze),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},re[14]||(re[14]=[M("option",{value:"week"},"Tun ny",-1),M("option",{value:"month"},"Thng ny",-1),M("option",{value:"year"},"Nm nay",-1)]),512),[[ff,n.value]])]),M("div",soe,[ge(Ie(kf),{type:"bar",data:T.value,options:E.value,style:{height:"100%"}},null,8,["data","options"])])]),M("div",aoe,[re[17]||(re[17]=M("div",{class:"p-4 border-b"},[M("h2",{class:"text-lg font-semibold"},"Lch s giao dch")],-1)),M("div",loe,[M("table",coe,[re[16]||(re[16]=M("thead",{class:"bg-gray-50"},[M("tr",null,[M("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ngy "),M("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," M giao dch "),M("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Loi "),M("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," S tin "),M("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Trng thi "),M("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ghi ch ")])],-1)),M("tbody",uoe,[(X(!0),pe(an,null,fr(l.value,ze=>(X(),pe("tr",{key:ze.id},[M("td",doe,[M("div",hoe,Ue(z(ze.date)),1)]),M("td",poe,[M("div",foe,"#"+Ue(ze.id),1)]),M("td",moe,[M("span",{class:vn(["px-2 py-1 text-xs font-medium rounded-full",U(ze.type)])},Ue(j(ze.type)),3)]),M("td",goe,[M("div",{class:vn(["text-sm font-medium",ze.type==="income"?"text-green-600":"text-red-600"])},Ue(ze.type==="income"?"+":"-")+Ue(A(ze.amount)),3)]),M("td",yoe,[M("span",{class:vn(["px-2 py-1 text-xs font-medium rounded-full",oe(ze.status)])},Ue(K(ze.status)),3)]),M("td",voe,[M("div",boe,Ue(ze.note),1)])]))),128))])])])]),m.value?(X(),pe("div",_oe,[M("div",xoe,[M("div",woe,[re[23]||(re[23]=M("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"}," Yu cu rt tin ",-1)),M("form",{onSubmit:Ih(ne,["prevent"]),class:"space-y-4"},[M("div",null,[re[18]||(re[18]=M("label",{class:"block text-sm font-medium text-gray-700"},"S tin",-1)),_r(M("input",{"onUpdate:modelValue":re[1]||(re[1]=ze=>d.value=ze),type:"number",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",max:e.value.currentBalance},null,8,Soe),[[ms,d.value]])]),M("div",null,[re[20]||(re[20]=M("label",{class:"block text-sm font-medium text-gray-700"},"Phng thc nhn tin",-1)),_r(M("select",{"onUpdate:modelValue":re[2]||(re[2]=ze=>x.value=ze),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},re[19]||(re[19]=[M("option",{value:"bank"},"Chuyn khon ngn hng",-1),M("option",{value:"momo"},"V MoMo",-1),M("option",{value:"zalopay"},"V ZaloPay",-1)]),512),[[ff,x.value]])]),M("div",null,[re[21]||(re[21]=M("label",{class:"block text-sm font-medium text-gray-700"},"Thng tin nhn tin",-1)),_r(M("input",{"onUpdate:modelValue":re[3]||(re[3]=ze=>s.value=ze),type:"text",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"S ti khon / S in thoi"},null,512),[[ms,s.value]])]),M("div",{class:"flex justify-end gap-3 mt-4"},[M("button",{type:"button",onClick:me,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500"}," Hy "),re[22]||(re[22]=M("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Gi yu cu ",-1))])],32)])])])):Ct("",!0)]))}}),koe={class:"p-6"},Toe={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},Eoe={class:"bg-white rounded-lg p-6 shadow-sm"},Ioe={class:"flex items-center justify-between"},Poe={class:"text-2xl font-semibold mt-1"},Aoe={class:"mt-4"},Roe={class:"text-sm text-green-600"},Moe={class:"bg-white rounded-lg p-6 shadow-sm"},Doe={class:"flex items-center justify-between"},Loe={class:"text-2xl font-semibold mt-1"},Ooe={class:"mt-4"},zoe={class:"text-sm text-green-600"},Boe={class:"bg-white rounded-lg p-6 shadow-sm"},Foe={class:"flex items-center justify-between"},$oe={class:"text-2xl font-semibold mt-1"},Noe={class:"mt-4"},Voe={class:"text-sm text-gray-500"},joe={class:"bg-white rounded-lg p-6 shadow-sm mb-6"},Uoe={class:"flex justify-between items-center mb-6"},qoe={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Hoe={class:"flex justify-between items-start mb-4"},Goe={class:"text-lg font-semibold"},Woe={class:"text-sm text-gray-500"},Koe={class:"space-y-2 mb-4"},Zoe={class:"flex justify-between"},Xoe={class:"font-medium"},Yoe={class:"flex justify-between"},Joe={class:"font-medium"},Qoe={class:"flex justify-between"},ese={class:"font-medium"},tse={class:"flex justify-between items-center"},nse=["onClick"],rse=["onClick"],ise={class:"bg-white rounded-lg shadow-sm"},ose={class:"p-4"},sse={class:"mb-4"},ase=["value"],lse={key:0,class:"space-y-6"},cse={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},use={class:"bg-gray-50 p-4 rounded-lg"},dse={class:"text-xl font-semibold mt-1"},hse={class:"bg-gray-50 p-4 rounded-lg"},pse={class:"text-xl font-semibold mt-1"},fse={class:"bg-gray-50 p-4 rounded-lg"},mse={class:"text-xl font-semibold mt-1"},gse={class:"bg-gray-50 p-4 rounded-lg"},yse={class:"text-xl font-semibold mt-1"},vse={class:"h-80"},bse=["value"],_se=Xr({__name:"AdvertisementManagement",setup(t){const e=Ke({activeCampaigns:3,campaignGrowth:50,totalViews:15e3,viewGrowth:25,totalSpent:5e6,remainingBudget:2e6}),n=Ke([{id:1,name:"Gi C bn",description:"Hin th sn phm  v tr c bn",status:"active",duration:30,price:1e6,minViews:1e3},{id:2,name:"Gi Premium",description:"Hin th sn phm  v tr ni bt",status:"expired",duration:30,price:2e6,minViews:3e3},{id:3,name:"Gi VIP",description:"Hin th sn phm  v tr c bit",status:"pending",duration:30,price:5e6,minViews:1e4}]),l=Ke([{id:1,name:"Sn phm 1",price:1e5,image:"https://via.placeholder.com/150"},{id:2,name:"Sn phm 2",price:2e5,image:"https://via.placeholder.com/150"}]),m=Ke([{id:1,name:"Chin dch 1",packageId:1,productId:1,startDate:"2024-03-01",endDate:"2024-03-31",status:"active"}]),d=Ke(""),x=Ke({views:5e3,clicks:250,ctr:5,avgCost:2e3}),s=Ke(!1),T=Ke({type:"",productId:"",duration:30,budget:0}),E=Ke({labels:["Ngy 1","Ngy 2","Ngy 3","Ngy 4","Ngy 5","Ngy 6","Ngy 7"],datasets:[{label:"Lt xem",borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.2)",data:[500,700,800,600,900,1e3,1200],fill:!0,tension:.4},{label:"Lt click",borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.2)",data:[50,70,60,80,90,100,110],fill:!0,tension:.4}]}),A=Ke({responsive:!0,plugins:{legend:{display:!0,position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(te){return te.toLocaleString("vi-VN")}}}}}),z=te=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(te),j=te=>new Intl.NumberFormat("vi-VN").format(te),U=te=>({active:"ang hot ng",expired:" ht hn",pending:"ang ch duyt"})[te]||te,K=te=>({active:"bg-green-100 text-green-800",expired:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"})[te]||"bg-gray-100 text-gray-800",oe=te=>{console.log("View campaign details:",te)},fe=te=>{console.log("Renew package:",te)},me=()=>{s.value=!1,T.value={type:"",productId:"",duration:30,budget:0}},ne=()=>{console.log("Register new package:",T.value),me()};return(te,re)=>(X(),pe("div",koe,[M("div",Toe,[M("div",Eoe,[M("div",Ioe,[M("div",null,[re[7]||(re[7]=M("p",{class:"text-sm text-gray-500"},"Chin dch ang chy",-1)),M("h3",Poe,Ue(e.value.activeCampaigns),1)]),re[8]||(re[8]=M("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},[M("i",{class:"pi pi-chart-line text-blue-600 text-xl"})],-1))]),M("div",Aoe,[M("span",Roe,[re[9]||(re[9]=M("i",{class:"pi pi-arrow-up"},null,-1)),tr(" "+Ue(e.value.campaignGrowth)+"% so vi thng trc ",1)])])]),M("div",Moe,[M("div",Doe,[M("div",null,[re[10]||(re[10]=M("p",{class:"text-sm text-gray-500"},"Tng lt xem",-1)),M("h3",Loe,Ue(j(e.value.totalViews)),1)]),re[11]||(re[11]=M("div",{class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"},[M("i",{class:"pi pi-eye text-green-600 text-xl"})],-1))]),M("div",Ooe,[M("span",zoe,[re[12]||(re[12]=M("i",{class:"pi pi-arrow-up"},null,-1)),tr(" "+Ue(e.value.viewGrowth)+"% so vi thng trc ",1)])])]),M("div",Boe,[M("div",Foe,[M("div",null,[re[13]||(re[13]=M("p",{class:"text-sm text-gray-500"},"Tng chi ph",-1)),M("h3",$oe,Ue(z(e.value.totalSpent)),1)]),re[14]||(re[14]=M("div",{class:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center"},[M("i",{class:"pi pi-wallet text-purple-600 text-xl"})],-1))]),M("div",Noe,[M("span",Voe," Ngn sch cn li: "+Ue(z(e.value.remainingBudget)),1)])])]),M("div",joe,[M("div",Uoe,[re[16]||(re[16]=M("h2",{class:"text-lg font-semibold"},"Gi qung co",-1)),M("button",{onClick:re[0]||(re[0]=ze=>s.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},re[15]||(re[15]=[M("i",{class:"pi pi-plus mr-2"},null,-1),tr("ng k gi mi ")]))]),M("div",qoe,[(X(!0),pe(an,null,fr(n.value,ze=>(X(),pe("div",{key:ze.id,class:"border rounded-lg p-6 hover:shadow-md transition-shadow"},[M("div",Hoe,[M("div",null,[M("h3",Goe,Ue(ze.name),1),M("p",Woe,Ue(ze.description),1)]),M("span",{class:vn(["px-2 py-1 text-xs font-medium rounded-full",K(ze.status)])},Ue(U(ze.status)),3)]),M("div",Koe,[M("div",Zoe,[re[17]||(re[17]=M("span",{class:"text-gray-500"},"Thi hn:",-1)),M("span",Xoe,Ue(ze.duration)+" ngy",1)]),M("div",Yoe,[re[18]||(re[18]=M("span",{class:"text-gray-500"},"Gi:",-1)),M("span",Joe,Ue(z(ze.price)),1)]),M("div",Qoe,[re[19]||(re[19]=M("span",{class:"text-gray-500"},"Lt xem ti thiu:",-1)),M("span",ese,Ue(j(ze.minViews)),1)])]),M("div",tse,[ze.status==="active"?(X(),pe("button",{key:0,onClick:_t=>oe(ze),class:"text-blue-600 hover:text-blue-800"}," Xem chi tit ",8,nse)):Ct("",!0),ze.status==="expired"?(X(),pe("button",{key:1,onClick:_t=>fe(ze),class:"text-green-600 hover:text-green-800"}," Gia hn ",8,rse)):Ct("",!0)])]))),128))])]),M("div",ise,[re[25]||(re[25]=M("div",{class:"p-4 border-b"},[M("h2",{class:"text-lg font-semibold"},"Hiu qu chin dch")],-1)),M("div",ose,[M("div",sse,[_r(M("select",{"onUpdate:modelValue":re[1]||(re[1]=ze=>d.value=ze),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[re[20]||(re[20]=M("option",{value:""},"Chn chin dch",-1)),(X(!0),pe(an,null,fr(m.value,ze=>(X(),pe("option",{key:ze.id,value:ze.id},Ue(ze.name),9,ase))),128))],512),[[ff,d.value]])]),d.value?(X(),pe("div",lse,[M("div",cse,[M("div",use,[re[21]||(re[21]=M("p",{class:"text-sm text-gray-500"},"Lt xem",-1)),M("h4",dse,Ue(j(x.value.views)),1)]),M("div",hse,[re[22]||(re[22]=M("p",{class:"text-sm text-gray-500"},"Lt click",-1)),M("h4",pse,Ue(j(x.value.clicks)),1)]),M("div",fse,[re[23]||(re[23]=M("p",{class:"text-sm text-gray-500"},"T l click",-1)),M("h4",mse,Ue(x.value.ctr)+"% ",1)]),M("div",gse,[re[24]||(re[24]=M("p",{class:"text-sm text-gray-500"},"Chi ph trung bnh",-1)),M("h4",yse,Ue(z(x.value.avgCost)),1)])]),M("div",vse,[ge(Ie(kf),{type:"line",data:E.value,options:A.value,style:{height:"100%"}},null,8,["data","options"])])])):Ct("",!0)])]),ge(Ie(Ra),{visible:s.value,"onUpdate:visible":re[6]||(re[6]=ze=>s.value=ze),modal:!0,closable:!0,style:{width:"600px"},header:"ng k gi qung co mi"},{default:Xe(()=>[M("form",{onSubmit:Ih(ne,["prevent"]),class:"space-y-4"},[M("div",null,[re[27]||(re[27]=M("label",{class:"block text-sm font-medium text-gray-700"},"Chn gi qung co",-1)),_r(M("select",{"onUpdate:modelValue":re[2]||(re[2]=ze=>T.value.type=ze),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},re[26]||(re[26]=[M("option",{value:"basic"},"Gi C bn",-1),M("option",{value:"premium"},"Gi Premium",-1),M("option",{value:"vip"},"Gi VIP",-1)]),512),[[ff,T.value.type]])]),M("div",null,[re[29]||(re[29]=M("label",{class:"block text-sm font-medium text-gray-700"},"Sn phm qung co",-1)),_r(M("select",{"onUpdate:modelValue":re[3]||(re[3]=ze=>T.value.productId=ze),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[re[28]||(re[28]=M("option",{value:""},"Chn sn phm",-1)),(X(!0),pe(an,null,fr(l.value,ze=>(X(),pe("option",{key:ze.id,value:ze.id},Ue(ze.name),9,bse))),128))],512),[[ff,T.value.productId]])]),M("div",null,[re[30]||(re[30]=M("label",{class:"block text-sm font-medium text-gray-700"},"Thi hn (ngy)",-1)),_r(M("input",{"onUpdate:modelValue":re[4]||(re[4]=ze=>T.value.duration=ze),type:"number",min:"1",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[ms,T.value.duration]])]),M("div",null,[re[31]||(re[31]=M("label",{class:"block text-sm font-medium text-gray-700"},"Ngn sch",-1)),_r(M("input",{"onUpdate:modelValue":re[5]||(re[5]=ze=>T.value.budget=ze),type:"number",min:"0",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[ms,T.value.budget]])]),M("div",{class:"flex justify-end gap-3 mt-4"},[M("button",{type:"button",onClick:me,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500"}," Hy "),re[32]||(re[32]=M("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}," ng k ",-1))])],32)]),_:1},8,["visible"])]))}}),xse=async()=>{try{return(await Oi.get("/api/chat/conversations/my-conversations")).data}catch(t){throw console.error("Error fetching conversations:",t),t}},wse=async({conversationId:t,message:e})=>{try{return(await Oi.post("/api/chat/messages",{conversationId:t,message:e})).data}catch(n){throw console.error("Error sending message:",n),n}},Sse=async t=>{try{return(await Oi.get(`/api/chat/messages?conversationId=${t}`)).data}catch(e){throw console.error("Error fetching messages:",e),e}},Zl=Object.create(null);Zl.open="0";Zl.close="1";Zl.ping="2";Zl.pong="3";Zl.message="4";Zl.upgrade="5";Zl.noop="6";const $b=Object.create(null);Object.keys(Zl).forEach(t=>{$b[Zl[t]]=t});const z2={type:"error",data:"parser error"},IA=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",PA=typeof ArrayBuffer=="function",AA=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,NS=({type:t,data:e},n,l)=>IA&&e instanceof Blob?n?l(e):CE(e,l):PA&&(e instanceof ArrayBuffer||AA(e))?n?l(e):CE(new Blob([e]),l):l(Zl[t]+(e||"")),CE=(t,e)=>{const n=new FileReader;return n.onload=function(){const l=n.result.split(",")[1];e("b"+(l||""))},n.readAsDataURL(t)};function kE(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Ow;function Cse(t,e){if(IA&&t.data instanceof Blob)return t.data.arrayBuffer().then(kE).then(e);if(PA&&(t.data instanceof ArrayBuffer||AA(t.data)))return e(kE(t.data));NS(t,!1,n=>{Ow||(Ow=new TextEncoder),e(Ow.encode(n))})}const TE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$g=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<TE.length;t++)$g[TE.charCodeAt(t)]=t;const kse=t=>{let e=t.length*.75,n=t.length,l,m=0,d,x,s,T;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const E=new ArrayBuffer(e),A=new Uint8Array(E);for(l=0;l<n;l+=4)d=$g[t.charCodeAt(l)],x=$g[t.charCodeAt(l+1)],s=$g[t.charCodeAt(l+2)],T=$g[t.charCodeAt(l+3)],A[m++]=d<<2|x>>4,A[m++]=(x&15)<<4|s>>2,A[m++]=(s&3)<<6|T&63;return E},Tse=typeof ArrayBuffer=="function",VS=(t,e)=>{if(typeof t!="string")return{type:"message",data:RA(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Ese(t.substring(1),e)}:$b[n]?t.length>1?{type:$b[n],data:t.substring(1)}:{type:$b[n]}:z2},Ese=(t,e)=>{if(Tse){const n=kse(t);return RA(n,e)}else return{base64:!0,data:t}},RA=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},MA="",Ise=(t,e)=>{const n=t.length,l=new Array(n);let m=0;t.forEach((d,x)=>{NS(d,!1,s=>{l[x]=s,++m===n&&e(l.join(MA))})})},Pse=(t,e)=>{const n=t.split(MA),l=[];for(let m=0;m<n.length;m++){const d=VS(n[m],e);if(l.push(d),d.type==="error")break}return l};function Ase(){return new TransformStream({transform(t,e){Cse(t,n=>{const l=n.length;let m;if(l<126)m=new Uint8Array(1),new DataView(m.buffer).setUint8(0,l);else if(l<65536){m=new Uint8Array(3);const d=new DataView(m.buffer);d.setUint8(0,126),d.setUint16(1,l)}else{m=new Uint8Array(9);const d=new DataView(m.buffer);d.setUint8(0,127),d.setBigUint64(1,BigInt(l))}t.data&&typeof t.data!="string"&&(m[0]|=128),e.enqueue(m),e.enqueue(n)})}})}let zw;function Sb(t){return t.reduce((e,n)=>e+n.length,0)}function Cb(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let l=0;for(let m=0;m<e;m++)n[m]=t[0][l++],l===t[0].length&&(t.shift(),l=0);return t.length&&l<t[0].length&&(t[0]=t[0].slice(l)),n}function Rse(t,e){zw||(zw=new TextDecoder);const n=[];let l=0,m=-1,d=!1;return new TransformStream({transform(x,s){for(n.push(x);;){if(l===0){if(Sb(n)<1)break;const T=Cb(n,1);d=(T[0]&128)===128,m=T[0]&127,m<126?l=3:m===126?l=1:l=2}else if(l===1){if(Sb(n)<2)break;const T=Cb(n,2);m=new DataView(T.buffer,T.byteOffset,T.length).getUint16(0),l=3}else if(l===2){if(Sb(n)<8)break;const T=Cb(n,8),E=new DataView(T.buffer,T.byteOffset,T.length),A=E.getUint32(0);if(A>Math.pow(2,21)-1){s.enqueue(z2);break}m=A*Math.pow(2,32)+E.getUint32(4),l=3}else{if(Sb(n)<m)break;const T=Cb(n,m);s.enqueue(VS(d?T:zw.decode(T),e)),l=0}if(m===0||m>t){s.enqueue(z2);break}}}})}const DA=4;function Fo(t){if(t)return Mse(t)}function Mse(t){for(var e in Fo.prototype)t[e]=Fo.prototype[e];return t}Fo.prototype.on=Fo.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Fo.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Fo.prototype.off=Fo.prototype.removeListener=Fo.prototype.removeAllListeners=Fo.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var l,m=0;m<n.length;m++)if(l=n[m],l===e||l.fn===e){n.splice(m,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Fo.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],l=1;l<arguments.length;l++)e[l-1]=arguments[l];if(n){n=n.slice(0);for(var l=0,m=n.length;l<m;++l)n[l].apply(this,e)}return this};Fo.prototype.emitReserved=Fo.prototype.emit;Fo.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Fo.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Y_=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Ta=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Dse="arraybuffer";function LA(t,...e){return e.reduce((n,l)=>(t.hasOwnProperty(l)&&(n[l]=t[l]),n),{})}const Lse=Ta.setTimeout,Ose=Ta.clearTimeout;function J_(t,e){e.useNativeTimers?(t.setTimeoutFn=Lse.bind(Ta),t.clearTimeoutFn=Ose.bind(Ta)):(t.setTimeoutFn=Ta.setTimeout.bind(Ta),t.clearTimeoutFn=Ta.clearTimeout.bind(Ta))}const zse=1.33;function Bse(t){return typeof t=="string"?Fse(t):Math.ceil((t.byteLength||t.size)*zse)}function Fse(t){let e=0,n=0;for(let l=0,m=t.length;l<m;l++)e=t.charCodeAt(l),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(l++,n+=4);return n}function OA(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function $se(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Nse(t){let e={},n=t.split("&");for(let l=0,m=n.length;l<m;l++){let d=n[l].split("=");e[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return e}class Vse extends Error{constructor(e,n,l){super(e),this.description=n,this.context=l,this.type="TransportError"}}class jS extends Fo{constructor(e){super(),this.writable=!1,J_(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,l){return super.emitReserved("error",new Vse(e,n,l)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=VS(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=$se(e);return n.length?"?"+n:""}}class jse extends jS{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let l=0;this._polling&&(l++,this.once("pollComplete",function(){--l||n()})),this.writable||(l++,this.once("drain",function(){--l||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=l=>{if(this.readyState==="opening"&&l.type==="open"&&this.onOpen(),l.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(l)};Pse(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Ise(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=OA()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let zA=!1;try{zA=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Use=zA;function qse(){}class Hse extends jse{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let l=location.port;l||(l=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||l!==e.port}}doWrite(e,n){const l=this.request({method:"POST",data:e});l.on("success",n),l.on("error",(m,d)=>{this.onError("xhr post error",m,d)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,l)=>{this.onError("xhr poll error",n,l)}),this.pollXhr=e}}let vf=class Nb extends Fo{constructor(e,n,l){super(),this.createRequest=e,J_(this,l),this._opts=l,this._method=l.method||"GET",this._uri=n,this._data=l.data!==void 0?l.data:null,this._create()}_create(){var e;const n=LA(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const l=this._xhr=this.createRequest(n);try{l.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){l.setDisableHeaderCheck&&l.setDisableHeaderCheck(!0);for(let m in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(m)&&l.setRequestHeader(m,this._opts.extraHeaders[m])}}catch{}if(this._method==="POST")try{l.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{l.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(l),"withCredentials"in l&&(l.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(l.timeout=this._opts.requestTimeout),l.onreadystatechange=()=>{var m;l.readyState===3&&((m=this._opts.cookieJar)===null||m===void 0||m.parseCookies(l.getResponseHeader("set-cookie"))),l.readyState===4&&(l.status===200||l.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof l.status=="number"?l.status:0)},0))},l.send(this._data)}catch(m){this.setTimeoutFn(()=>{this._onError(m)},0);return}typeof document<"u"&&(this._index=Nb.requestsCount++,Nb.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=qse,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Nb.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};vf.requestsCount=0;vf.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",EE);else if(typeof addEventListener=="function"){const t="onpagehide"in Ta?"pagehide":"unload";addEventListener(t,EE,!1)}}function EE(){for(let t in vf.requests)vf.requests.hasOwnProperty(t)&&vf.requests[t].abort()}const Gse=function(){const t=BA({xdomain:!1});return t&&t.responseType!==null}();class Wse extends Hse{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Gse&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new vf(BA,this.uri(),e)}}function BA(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Use))return new XMLHttpRequest}catch{}if(!e)try{return new Ta[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const FA=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Kse extends jS{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,l=FA?{}:LA(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(l.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,l)}catch(m){return this.emitReserved("error",m)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const l=e[n],m=n===e.length-1;NS(l,this.supportsBinary,d=>{try{this.doWrite(l,d)}catch{}m&&Y_(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=OA()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Bw=Ta.WebSocket||Ta.MozWebSocket;class Zse extends Kse{createSocket(e,n,l){return FA?new Bw(e,n,l):n?new Bw(e,n):new Bw(e)}doWrite(e,n){this.ws.send(n)}}class Xse extends jS{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Rse(Number.MAX_SAFE_INTEGER,this.socket.binaryType),l=e.readable.pipeThrough(n).getReader(),m=Ase();m.readable.pipeTo(e.writable),this._writer=m.writable.getWriter();const d=()=>{l.read().then(({done:s,value:T})=>{s||(this.onPacket(T),d())}).catch(s=>{})};d();const x={type:"open"};this.query.sid&&(x.data=`{"sid":"${this.query.sid}"}`),this._writer.write(x).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const l=e[n],m=n===e.length-1;this._writer.write(l).then(()=>{m&&Y_(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Yse={websocket:Zse,webtransport:Xse,polling:Wse},Jse=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Qse=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function B2(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),l=t.indexOf("]");n!=-1&&l!=-1&&(t=t.substring(0,n)+t.substring(n,l).replace(/:/g,";")+t.substring(l,t.length));let m=Jse.exec(t||""),d={},x=14;for(;x--;)d[Qse[x]]=m[x]||"";return n!=-1&&l!=-1&&(d.source=e,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d.pathNames=eae(d,d.path),d.queryKey=tae(d,d.query),d}function eae(t,e){const n=/\/{2,9}/g,l=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&l.splice(0,1),e.slice(-1)=="/"&&l.splice(l.length-1,1),l}function tae(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(l,m,d){m&&(n[m]=d)}),n}const F2=typeof addEventListener=="function"&&typeof removeEventListener=="function",Vb=[];F2&&addEventListener("offline",()=>{Vb.forEach(t=>t())},!1);class Ku extends Fo{constructor(e,n){if(super(),this.binaryType=Dse,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const l=B2(e);n.hostname=l.host,n.secure=l.protocol==="https"||l.protocol==="wss",n.port=l.port,l.query&&(n.query=l.query)}else n.host&&(n.hostname=B2(n.host).host);J_(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(l=>{const m=l.prototype.name;this.transports.push(m),this._transportsByName[m]=l}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Nse(this.opts.query)),F2&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Vb.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=DA,n.transport=e,this.id&&(n.sid=this.id);const l=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](l)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Ku.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ku.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let l=0;l<this.writeBuffer.length;l++){const m=this.writeBuffer[l].data;if(m&&(n+=Bse(m)),l>0&&n>this._maxPayload)return this.writeBuffer.slice(0,l);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Y_(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,l){return this._sendPacket("message",e,n,l),this}send(e,n,l){return this._sendPacket("message",e,n,l),this}_sendPacket(e,n,l,m){if(typeof n=="function"&&(m=n,n=void 0),typeof l=="function"&&(m=l,l=null),this.readyState==="closing"||this.readyState==="closed")return;l=l||{},l.compress=l.compress!==!1;const d={type:e,data:n,options:l};this.emitReserved("packetCreate",d),this.writeBuffer.push(d),m&&this.once("flush",m),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},l=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?l():e()}):this.upgrading?l():e()),this}_onError(e){if(Ku.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),F2&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const l=Vb.indexOf(this._offlineEventListener);l!==-1&&Vb.splice(l,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ku.protocol=DA;class nae extends Ku{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),l=!1;Ku.priorWebsocketSuccess=!1;const m=()=>{l||(n.send([{type:"ping",data:"probe"}]),n.once("packet",z=>{if(!l)if(z.type==="pong"&&z.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ku.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{l||this.readyState!=="closed"&&(A(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const j=new Error("probe error");j.transport=n.name,this.emitReserved("upgradeError",j)}}))};function d(){l||(l=!0,A(),n.close(),n=null)}const x=z=>{const j=new Error("probe error: "+z);j.transport=n.name,d(),this.emitReserved("upgradeError",j)};function s(){x("transport closed")}function T(){x("socket closed")}function E(z){n&&z.name!==n.name&&d()}const A=()=>{n.removeListener("open",m),n.removeListener("error",x),n.removeListener("close",s),this.off("close",T),this.off("upgrading",E)};n.once("open",m),n.once("error",x),n.once("close",s),this.once("close",T),this.once("upgrading",E),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{l||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let l=0;l<e.length;l++)~this.transports.indexOf(e[l])&&n.push(e[l]);return n}}let rae=class extends nae{constructor(e,n={}){const l=typeof e=="object"?e:n;(!l.transports||l.transports&&typeof l.transports[0]=="string")&&(l.transports=(l.transports||["polling","websocket","webtransport"]).map(m=>Yse[m]).filter(m=>!!m)),super(e,l)}};function iae(t,e="",n){let l=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),l=B2(t)),l.port||(/^(http|ws)$/.test(l.protocol)?l.port="80":/^(http|ws)s$/.test(l.protocol)&&(l.port="443")),l.path=l.path||"/";const d=l.host.indexOf(":")!==-1?"["+l.host+"]":l.host;return l.id=l.protocol+"://"+d+":"+l.port+e,l.href=l.protocol+"://"+d+(n&&n.port===l.port?"":":"+l.port),l}const oae=typeof ArrayBuffer=="function",sae=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,$A=Object.prototype.toString,aae=typeof Blob=="function"||typeof Blob<"u"&&$A.call(Blob)==="[object BlobConstructor]",lae=typeof File=="function"||typeof File<"u"&&$A.call(File)==="[object FileConstructor]";function US(t){return oae&&(t instanceof ArrayBuffer||sae(t))||aae&&t instanceof Blob||lae&&t instanceof File}function jb(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,l=t.length;n<l;n++)if(jb(t[n]))return!0;return!1}if(US(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return jb(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&jb(t[n]))return!0;return!1}function cae(t){const e=[],n=t.data,l=t;return l.data=$2(n,e),l.attachments=e.length,{packet:l,buffers:e}}function $2(t,e){if(!t)return t;if(US(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let l=0;l<t.length;l++)n[l]=$2(t[l],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(n[l]=$2(t[l],e));return n}return t}function uae(t,e){return t.data=N2(t.data,e),delete t.attachments,t}function N2(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=N2(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=N2(t[n],e));return t}const dae=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],hae=5;var Ai;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ai||(Ai={}));class pae{constructor(e){this.replacer=e}encode(e){return(e.type===Ai.EVENT||e.type===Ai.ACK)&&jb(e)?this.encodeAsBinary({type:e.type===Ai.EVENT?Ai.BINARY_EVENT:Ai.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Ai.BINARY_EVENT||e.type===Ai.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=cae(e),l=this.encodeAsString(n.packet),m=n.buffers;return m.unshift(l),m}}function IE(t){return Object.prototype.toString.call(t)==="[object Object]"}class qS extends Fo{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const l=n.type===Ai.BINARY_EVENT;l||n.type===Ai.BINARY_ACK?(n.type=l?Ai.EVENT:Ai.ACK,this.reconstructor=new fae(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(US(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const l={type:Number(e.charAt(0))};if(Ai[l.type]===void 0)throw new Error("unknown packet type "+l.type);if(l.type===Ai.BINARY_EVENT||l.type===Ai.BINARY_ACK){const d=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const x=e.substring(d,n);if(x!=Number(x)||e.charAt(n)!=="-")throw new Error("Illegal attachments");l.attachments=Number(x)}if(e.charAt(n+1)==="/"){const d=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););l.nsp=e.substring(d,n)}else l.nsp="/";const m=e.charAt(n+1);if(m!==""&&Number(m)==m){const d=n+1;for(;++n;){const x=e.charAt(n);if(x==null||Number(x)!=x){--n;break}if(n===e.length)break}l.id=Number(e.substring(d,n+1))}if(e.charAt(++n)){const d=this.tryParse(e.substr(n));if(qS.isPayloadValid(l.type,d))l.data=d;else throw new Error("invalid payload")}return l}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Ai.CONNECT:return IE(n);case Ai.DISCONNECT:return n===void 0;case Ai.CONNECT_ERROR:return typeof n=="string"||IE(n);case Ai.EVENT:case Ai.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&dae.indexOf(n[0])===-1);case Ai.ACK:case Ai.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class fae{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=uae(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const mae=Object.freeze(Object.defineProperty({__proto__:null,Decoder:qS,Encoder:pae,get PacketType(){return Ai},protocol:hae},Symbol.toStringTag,{value:"Module"}));function tl(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const gae=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class NA extends Fo{constructor(e,n,l){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,l&&l.auth&&(this.auth=l.auth),this._opts=Object.assign({},l),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[tl(e,"open",this.onopen.bind(this)),tl(e,"packet",this.onpacket.bind(this)),tl(e,"error",this.onerror.bind(this)),tl(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var l,m,d;if(gae.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const x={type:Ai.EVENT,data:n};if(x.options={},x.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const A=this.ids++,z=n.pop();this._registerAckCallback(A,z),x.id=A}const s=(m=(l=this.io.engine)===null||l===void 0?void 0:l.transport)===null||m===void 0?void 0:m.writable,T=this.connected&&!(!((d=this.io.engine)===null||d===void 0)&&d._hasPingExpired());return this.flags.volatile&&!s||(T?(this.notifyOutgoingListeners(x),this.packet(x)):this.sendBuffer.push(x)),this.flags={},this}_registerAckCallback(e,n){var l;const m=(l=this.flags.timeout)!==null&&l!==void 0?l:this._opts.ackTimeout;if(m===void 0){this.acks[e]=n;return}const d=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===e&&this.sendBuffer.splice(s,1);n.call(this,new Error("operation has timed out"))},m),x=(...s)=>{this.io.clearTimeoutFn(d),n.apply(this,s)};x.withError=!0,this.acks[e]=x}emitWithAck(e,...n){return new Promise((l,m)=>{const d=(x,s)=>x?m(x):l(s);d.withError=!0,n.push(d),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const l={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((m,...d)=>l!==this._queue[0]?void 0:(m!==null?l.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(m)):(this._queue.shift(),n&&n(null,...d)),l.pending=!1,this._drainQueue())),this._queue.push(l),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ai.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(l=>String(l.id)===e)){const l=this.acks[e];delete this.acks[e],l.withError&&l.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ai.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ai.EVENT:case Ai.BINARY_EVENT:this.onevent(e);break;case Ai.ACK:case Ai.BINARY_ACK:this.onack(e);break;case Ai.DISCONNECT:this.ondisconnect();break;case Ai.CONNECT_ERROR:this.destroy();const l=new Error(e.data.message);l.data=e.data.data,this.emitReserved("connect_error",l);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const l of n)l.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let l=!1;return function(...m){l||(l=!0,n.packet({type:Ai.ACK,id:e,data:m}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ai.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let l=0;l<n.length;l++)if(e===n[l])return n.splice(l,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let l=0;l<n.length;l++)if(e===n[l])return n.splice(l,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const l of n)l.apply(this,e.data)}}}function Lf(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Lf.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Lf.prototype.reset=function(){this.attempts=0};Lf.prototype.setMin=function(t){this.ms=t};Lf.prototype.setMax=function(t){this.max=t};Lf.prototype.setJitter=function(t){this.jitter=t};class V2 extends Fo{constructor(e,n){var l;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,J_(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((l=n.randomizationFactor)!==null&&l!==void 0?l:.5),this.backoff=new Lf({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const m=n.parser||mae;this.encoder=new m.Encoder,this.decoder=new m.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new rae(this.uri,this.opts);const n=this.engine,l=this;this._readyState="opening",this.skipReconnect=!1;const m=tl(n,"open",function(){l.onopen(),e&&e()}),d=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),e?e(s):this.maybeReconnectOnOpen()},x=tl(n,"error",d);if(this._timeout!==!1){const s=this._timeout,T=this.setTimeoutFn(()=>{m(),d(new Error("timeout")),n.close()},s);this.opts.autoUnref&&T.unref(),this.subs.push(()=>{this.clearTimeoutFn(T)})}return this.subs.push(m),this.subs.push(x),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(tl(e,"ping",this.onping.bind(this)),tl(e,"data",this.ondata.bind(this)),tl(e,"error",this.onerror.bind(this)),tl(e,"close",this.onclose.bind(this)),tl(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Y_(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let l=this.nsps[e];return l?this._autoConnect&&!l.active&&l.connect():(l=new NA(this,e,n),this.nsps[e]=l),l}_destroy(e){const n=Object.keys(this.nsps);for(const l of n)if(this.nsps[l].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let l=0;l<n.length;l++)this.engine.write(n[l],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var l;this.cleanup(),(l=this.engine)===null||l===void 0||l.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const l=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(m=>{m?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",m)):e.onreconnect()}))},n);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const zg={};function Ub(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=iae(t,e.path||"/socket.io"),l=n.source,m=n.id,d=n.path,x=zg[m]&&d in zg[m].nsps,s=e.forceNew||e["force new connection"]||e.multiplex===!1||x;let T;return s?T=new V2(l,e):(zg[m]||(zg[m]=new V2(l,e)),T=zg[m]),n.query&&!e.query&&(e.query=n.queryKey),T.socket(n.path,e)}Object.assign(Ub,{Manager:V2,Socket:NA,io:Ub,connect:Ub});function yae(){const t=Ke(null),e=Ke(!1),n=Ke(!1),l=Ke(null),m=(z=8099)=>{var j;if((j=t.value)!=null&&j.connected){console.log("Socket.IO  c kt ni");return}n.value=!0,l.value=null;try{const U=`http://localhost:${z}`;t.value=Ub(U,{transports:["websocket","polling"],timeout:2e4,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),t.value.on("connect",()=>{var K;console.log("Socket.IO  kt ni thnh cng:",(K=t.value)==null?void 0:K.id),e.value=!0,n.value=!1,l.value=null}),t.value.on("disconnect",K=>{console.log("Socket.IO  ng kt ni:",K),e.value=!1,n.value=!1}),t.value.on("connect_error",K=>{console.error("Socket.IO connection error:",K),l.value="Li kt ni Socket.IO",e.value=!1,n.value=!1}),t.value.on("reconnect",K=>{console.log("Socket.IO reconnected after",K,"attempts"),e.value=!0,l.value=null}),t.value.on("message",K=>{console.log("Nhn tin nhn Socket.IO:",K)}),t.value.on("new_message",K=>{console.log("Tin nhn mi t Socket.IO:",K)})}catch(U){console.error("Li to Socket.IO:",U),l.value="Khng th to kt ni Socket.IO",n.value=!1}},d=()=>{t.value&&(console.log("Disconnecting Socket.IO..."),t.value.removeAllListeners(),t.value.disconnect(),t.value=null),e.value=!1,n.value=!1,l.value=null},x=(z,j)=>{var U;return(U=t.value)!=null&&U.connected?(t.value.emit(z,j),!0):(console.warn("Socket.IO cha kt ni"),!1)},s=(z,j)=>{var U;return(U=t.value)!=null&&U.connected?(t.value.emit(z,j),!0):(console.warn("Socket.IO cha kt ni, khng th emit event:",z),!1)},T=(z,j)=>{t.value&&t.value.on(z,j)},E=(z,j)=>{t.value&&(j?t.value.off(z,j):t.value.off(z))},A=()=>{d(),setTimeout(()=>{m()},1e3)};return Ef(()=>{console.log("useSocketIO: Cleaning up Socket.IO connection..."),d()}),{socket:t,isConnected:e,isConnecting:n,error:l,connect:m,disconnect:d,sendMessage:x,emit:s,on:T,off:E,reconnect:A}}const vae={class:"bg-gray-100 rounded-lg"},bae={class:"chat-list bg-white border-r flex flex-col"},_ae={class:"flex-1 overflow-y-auto"},xae=["onClick"],wae=["src"],Sae={class:"flex-1 text-left"},Cae={class:"font-semibold text-base"},kae={class:"text-xs text-gray-500 truncate max-w-[10rem]"},Tae={class:"text-xs text-gray-400 ml-2 min-w-[3.5rem] text-right"},Eae={class:"flex flex-col h-full overflow-y-hidden"},Iae={class:"flex items-center gap-3 px-6 py-4 border-b bg-white border-gray-200"},Pae=["src"],Aae={class:"font-semibold text-lg"},Rae={class:"ml-auto flex items-center gap-2"},Mae={class:"flex items-center gap-1"},Dae={class:"text-xs text-gray-500"},Lae={key:0,class:"flex-1 flex items-center justify-center text-gray-400 text-lg"},Oae=["src"],zae={key:0,class:"text-xs text-gray-400 mb-1"},Bae=["innerHTML"],Fae={class:"border-t bg-white px-6 py-3 border-gray-200"},$ae={class:"flex gap-2 items-end"},Nae=Xr({__name:"ChatPage",setup(t){const e=Ke([]),n=Ke(!1),l=Ke(null),m=Ke(""),d=Ke(null),x=Ke({}),{socket:s,isConnected:T,isConnecting:E,connect:A,disconnect:z,sendMessage:j}=yae(),U=Me=>{var he;if(Me.type==="NEW_MESSAGE"&&typeof Me.conversationId=="string"){const Ce={id:Date.now(),text:Me.message||"",sender:Me.sender==="user"?"user":"other",timestamp:new Date(Me.timestamp||Date.now())};x.value[Me.conversationId]||(x.value[Me.conversationId]=[]),x.value[Me.conversationId].push(Ce),((he=l.value)==null?void 0:he.id)===Me.conversationId&&re()}},K=()=>{s.value&&(s.value.on("new_message",U),s.value.on("message",U))},oe=ki(()=>l.value?x.value[l.value.id]||[]:[]),fe=async Me=>{l.value=Me;try{const he=await Sse(Me.id);x.value[Me.id]=he.map(Ce=>({id:Ce.id,text:Ce.message,sender:Ce.isMe?"user":"other",timestamp:new Date(Ce.createdDate)}))}catch{x.value[Me.id]=[]}re()},me=Me=>{const he=typeof Me=="string"?new Date(Me):Me;return new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"2-digit"}).format(he)},ne=Me=>{const he=typeof Me=="string"?new Date(Me):Me;return new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"2-digit"}).format(he)},te=async()=>{if(m.value.trim()&&l.value)try{const Me=await wse({conversationId:l.value.id,message:m.value});T.value&&j("NEW_MESSAGE",{type:"NEW_MESSAGE",data:{conversationId:l.value.id,message:m.value,sender:"user"},conversationId:l.value.id,message:m.value,sender:"user",timestamp:new Date().toISOString()});const he={id:Date.now(),text:m.value,sender:"user",timestamp:new Date};x.value[l.value.id]||(x.value[l.value.id]=[]),x.value[l.value.id].push(he),m.value="",re()}catch(Me){console.error("Gi tin nhn tht bi:",Me)}},re=async()=>{await Th(),d.value&&(d.value.scrollTop=d.value.scrollHeight)};ho(oe,()=>{re()});const ze=async()=>{n.value=!0;try{const Me=await xse();e.value=Me,Me.forEach(he=>{x.value[he.id]||(x.value[he.id]=[])}),Me.length>0&&await fe(Me[0])}catch{}finally{n.value=!1}};Co(()=>{ze(),A(8099),ho(T,Me=>{Me&&K()})}),Ef(()=>{console.log("Disconnecting Socket.IO..."),z()});const _t=Me=>{if(Me.conversationAvatar)return Me.conversationAvatar;const he=Me.participants.find(Ce=>Ce.avatar);return(he==null?void 0:he.avatar)||"https://ui-avatars.com/api/?name="+encodeURIComponent(Me.conversationName)};return(Me,he)=>(X(),pe("div",vae,[ge(Ie(Y6),{style:{height:"calc(100vh - 60px)"},class:"overflow-y-hidden"},{default:Xe(()=>[ge(Ie(E2),{size:25,minSize:15},{default:Xe(()=>[M("section",bae,[he[2]||(he[2]=M("div",{class:"flex items-center justify-between px-4 py-3 border-b border-gray-200"},[M("span",{class:"font-semibold text-lg"},"Chats")],-1)),M("div",_ae,[(X(!0),pe(an,null,fr(e.value,Ce=>{var $e,Je;return X(),pe("button",{key:Ce.id,onClick:ft=>fe(Ce),class:vn(["chat-list-item flex items-center gap-3 w-full px-4 py-3 border-b hover:bg-gray-50 transition",(($e=l.value)==null?void 0:$e.id)===Ce.id?"bg-gray-100":"bg-white"])},[M("img",{src:_t(Ce),class:"!w-12 !h-12 rounded-full object-cover border"},null,8,wae),M("div",Sae,[M("div",Cae,Ue(Ce.conversationName),1),M("div",kae,Ue(((Je=x.value[Ce.id])==null?void 0:Je.length)>0?x.value[Ce.id][x.value[Ce.id].length-1].text:"Bt u cuc tr chuyn"),1)]),M("div",Tae,Ue(ne(Ce.updatedAt)),1)],10,xae)}),128))])])]),_:1}),ge(Ie(E2),{size:75,minSize:25},{default:Xe(()=>{var Ce;return[M("main",Eae,[M("div",Iae,[l.value?(X(),pe("img",{key:0,src:_t(l.value),class:"!w-10 !h-10 rounded-full object-cover border"},null,8,Pae)):Ct("",!0),M("span",Aae,Ue(((Ce=l.value)==null?void 0:Ce.conversationName)||""),1),M("div",Rae,[M("div",Mae,[M("div",{class:vn(["w-2 h-2 rounded-full",Ie(T)?"bg-green-500":Ie(E)?"bg-yellow-500":"bg-red-500"])},null,2),M("span",Dae,Ue(Ie(T)?"Socket.IO  kt ni":Ie(E)?"ang kt ni Socket.IO...":"Socket.IO mt kt ni"),1)]),!Ie(T)&&!Ie(E)?(X(),bt(Ie(jr),{key:0,icon:"pi pi-refresh",onClick:he[0]||(he[0]=$e=>Ie(A)(8099)),class:"p-button-sm p-button-text",title:"Kt ni li"})):Ct("",!0)])]),M("div",{class:"flex-1 overflow-y-auto px-6 py-4 bg-gray-50 flex flex-col gap-3",ref_key:"messagesContainer",ref:d},[l.value?(X(!0),pe(an,{key:1},fr(oe.value,$e=>(X(),pe("div",{key:$e.id,class:vn(["flex gap-2",$e.sender==="user"?"flex-row-reverse":"flex-row"])},[$e.sender!=="user"?(X(),pe("img",{key:0,src:_t(l.value),class:"!w-8 !h-8 rounded-full object-cover border self-end"},null,8,Oae)):Ct("",!0),M("div",{class:vn(["p-3 border rounded-lg max-w-[60%]",$e.sender==="user"?"bg-primary text-white ml-auto":"bg-white text-black"])},[$e.timestamp?(X(),pe("div",zae,Ue(me($e.timestamp)),1)):Ct("",!0),M("div",{innerHTML:$e.text,class:"chat-message-content"},null,8,Bae)],2)],2))),128)):(X(),pe("div",Lae," Chn mt cuc tr chuyn  bt u "))],512),M("div",Fae,[M("div",$ae,[ge(Ie($S),{modelValue:m.value,"onUpdate:modelValue":he[1]||(he[1]=$e=>m.value=$e),placeholder:"Nhp tin nhn...",editorStyle:"height: 80px; width: 100%;",class:"flex-1",disabled:!l.value,onKeydown:qi(Ih(te,["exact","prevent"]),["enter"])},null,8,["modelValue","disabled","onKeydown"]),ge(Ie(jr),{icon:"pi pi-send",onClick:te,disabled:!l.value||!m.value.trim(),class:"p-button-primary"},null,8,["disabled"])])])])]}),_:1})]),_:1})]))}}),VA=Lo(Nae,[["__scopeId","data-v-6727e8f6"]]),Vae={class:"rounded-lg"},jae=Xr({__name:"CustomerSupport",setup(t){return(e,n)=>(X(),pe("div",Vae,[ge(VA)]))}}),Uae=async t=>{const e=new FormData;e.append("image",t);try{const n=await Oi.post("/api/recommend/recommend_by_image",e,{headers:{"Content-Type":"multipart/form-data"}});return Promise.resolve(n.data)}catch(n){return Promise.reject(n)}},qae={class:"p-6"},Hae={class:"bg-white rounded-lg p-6 shadow-sm mb-6"},Gae={class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center"},Wae={key:0,class:"space-y-4"},Kae={key:1,class:"space-y-4"},Zae=["src"],Xae={class:"flex justify-center gap-4"},Yae=["disabled"],Jae={key:0,class:"bg-white rounded-lg p-6 shadow-sm mb-6"},Qae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ele={class:"space-y-4"},tle={class:"flex flex-wrap gap-2"},nle={key:1,class:"bg-white rounded-lg p-6 shadow-sm"},rle={class:"!grid grid-cols-1 md:grid-cols-5 gap-6"},ile=Xr({__name:"AIRecommendationPage",setup(t){const e=Ke(!1),n=Ke(null),l=Ke(null),m=Ke(null),d=Ke(!1),x=Ke(null),s=Ke([]),T=ki(()=>[...s.value]),E=U=>{const K=U.target;if(K.files&&K.files[0]){const oe=K.files[0];m.value=oe;const fe=new FileReader;fe.onload=me=>{var ne;l.value=(ne=me.target)==null?void 0:ne.result},fe.readAsDataURL(oe)}},A=()=>{l.value=null,m.value=null,x.value=null,s.value=[],n.value&&(n.value.value="")},z=U=>U.map(K=>({id:K.product_id,name:K.product_name||K.category_vi,description:K.product_description||"",price:K.product_price,rating:(K.confidence||.8)*5,status:"available",variants:[],images:K.images&&Array.isArray(K.images)?K.images:[]})),j=async()=>{if(m.value){e.value=!0,d.value=!0;try{const U=await Uae(m.value);console.log(U),U&&U.recommendations?s.value=z(U.recommendations):s.value=[]}catch(U){console.error("Error analyzing image:",U)}finally{d.value=!1,e.value=!1}}};return(U,K)=>(X(),pe("div",qae,[M("div",Hae,[K[5]||(K[5]=M("h2",{class:"text-lg font-semibold mb-4"},"Ti ln hnh nh  nhn gi ",-1)),ge(RP,{isLoading:e.value},{default:Xe(()=>[M("div",Gae,[l.value?(X(),pe("div",Kae,[M("img",{src:l.value,alt:"Selected image",class:"max-h-64 mx-auto rounded-lg"},null,8,Zae),M("div",Xae,[M("button",{onClick:j,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:d.value},[K[3]||(K[3]=M("i",{class:"pi pi-search mr-2"},null,-1)),tr(" "+Ue(d.value?"ang phn tch...":"Phn tch hnh nh"),1)],8,Yae),M("button",{onClick:A,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500"},K[4]||(K[4]=[M("i",{class:"pi pi-times mr-2"},null,-1),tr(" Xa hnh nh ")]))])])):(X(),pe("div",Wae,[K[1]||(K[1]=M("i",{class:"pi pi-image text-4xl text-gray-400"},null,-1)),K[2]||(K[2]=M("p",{class:"text-gray-500"},"Ko th hnh nh vo y hoc",-1)),M("input",{type:"file",ref_key:"fileInput",ref:n,onChange:E,accept:"image/*",class:"hidden"},null,544),M("button",{onClick:K[0]||(K[0]=oe=>{var fe;return(fe=n.value)==null?void 0:fe.click()}),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Chn hnh nh ")]))])]),_:1},8,["isLoading"])]),x.value?(X(),pe("div",Jae,[K[7]||(K[7]=M("h2",{class:"text-lg font-semibold mb-4"},"Kt qu phn tch",-1)),M("div",Qae,[M("div",ele,[K[6]||(K[6]=M("h3",{class:"font-medium"},"Phong cch",-1)),M("div",tle,[(X(!0),pe(an,null,fr(x.value.styles,oe=>(X(),pe("span",{key:oe,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"},Ue(oe),1))),128))])])])])):Ct("",!0),s.value.length>0?(X(),pe("div",nle,[M("div",rle,[(X(!0),pe(an,null,fr(T.value,oe=>(X(),bt(Qa,{key:oe.id,product:oe},null,8,["product"]))),128))])])):Ct("",!0)]))}}),ole={class:"p-6"},sle={key:0,class:"text-gray-500"},ale={key:1,class:"!grid grid-cols-1 md:grid-cols-3 gap-6"},lle=Xr({__name:"FavoriteProductsPage",setup(t){const e=Ke([{id:"1",name:"o thun basic",price:199e3,images:["https://via.placeholder.com/300"],description:"M t sn phm",rating:4.5,status:"available",variants:[]},{id:"2",name:"Qun jean slim fit",price:499e3,images:["https://via.placeholder.com/300"],description:"M t sn phm",rating:4,status:"available",variants:[]}]),n=l=>{e.value=e.value.filter(m=>m.id!==l)};return(l,m)=>(X(),pe("div",ole,[m[0]||(m[0]=M("h1",{class:"text-2xl font-bold mb-6"},"Sn phm yu thch",-1)),e.value.length===0?(X(),pe("div",sle," Bn cha c sn phm yu thch no. ")):(X(),pe("div",ale,[(X(!0),pe(an,null,fr(e.value,d=>(X(),bt(Qa,{key:d.id,product:d,onRemove:x=>n(d.id)},null,8,["product","onRemove"]))),128))]))]))}}),cle={class:"layout"},ule={class:"!h-[calc(100vh-60px)]"},dle=Xr({__name:"OnlyHeaderLayout",setup(t){return(e,n)=>{const l=wn("router-view");return X(),pe("div",cle,[ge(c0),M("main",ule,[ge(l)])])}}}),hle=Lo(dle,[["__scopeId","data-v-f56a7188"]]);/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let jA;const Q_=t=>jA=t,UA=Symbol();function j2(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ty;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ty||(ty={}));function ple(){const t=qE(!0),e=t.run(()=>Ke({}));let n=[],l=[];const m=nS({install(d){Q_(m),m._a=d,d.provide(UA,m),d.config.globalProperties.$pinia=m,l.forEach(x=>n.push(x)),l=[]},use(d){return this._a?n.push(d):l.push(d),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return m}const qA=()=>{};function PE(t,e,n,l=qA){t.push(e);const m=()=>{const d=t.indexOf(e);d>-1&&(t.splice(d,1),l())};return!n&&HE()&&CD(m),m}function tf(t,...e){t.slice().forEach(n=>{n(...e)})}const fle=t=>t(),AE=Symbol(),Fw=Symbol();function U2(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,l)=>t.set(l,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const l=e[n],m=t[n];j2(m)&&j2(l)&&t.hasOwnProperty(n)&&!Mo(l)&&!Hu(l)?t[n]=U2(m,l):t[n]=l}return t}const mle=Symbol();function gle(t){return!j2(t)||!Object.prototype.hasOwnProperty.call(t,mle)}const{assign:Ou}=Object;function yle(t){return!!(Mo(t)&&t.effect)}function vle(t,e,n,l){const{state:m,actions:d,getters:x}=e,s=n.state.value[t];let T;function E(){s||(n.state.value[t]=m?m():{});const A=WD(n.state.value[t]);return Ou(A,d,Object.keys(x||{}).reduce((z,j)=>(z[j]=nS(ki(()=>{Q_(n);const U=n._s.get(t);return x[j].call(U,U)})),z),{}))}return T=HA(t,E,e,n,l,!0),T}function HA(t,e,n={},l,m,d){let x;const s=Ou({actions:{}},n),T={deep:!0};let E,A,z=[],j=[],U;const K=l.state.value[t];!d&&!K&&(l.state.value[t]={}),Ke({});let oe;function fe(he){let Ce;E=A=!1,typeof he=="function"?(he(l.state.value[t]),Ce={type:ty.patchFunction,storeId:t,events:U}):(U2(l.state.value[t],he),Ce={type:ty.patchObject,payload:he,storeId:t,events:U});const $e=oe=Symbol();Th().then(()=>{oe===$e&&(E=!0)}),A=!0,tf(z,Ce,l.state.value[t])}const me=d?function(){const{state:Ce}=n,$e=Ce?Ce():{};this.$patch(Je=>{Ou(Je,$e)})}:qA;function ne(){x.stop(),z=[],j=[],l._s.delete(t)}const te=(he,Ce="")=>{if(AE in he)return he[Fw]=Ce,he;const $e=function(){Q_(l);const Je=Array.from(arguments),ft=[],ut=[];function Qe(wt){ft.push(wt)}function Qt(wt){ut.push(wt)}tf(j,{args:Je,name:$e[Fw],store:ze,after:Qe,onError:Qt});let kt;try{kt=he.apply(this&&this.$id===t?this:ze,Je)}catch(wt){throw tf(ut,wt),wt}return kt instanceof Promise?kt.then(wt=>(tf(ft,wt),wt)).catch(wt=>(tf(ut,wt),Promise.reject(wt))):(tf(ft,kt),kt)};return $e[AE]=!0,$e[Fw]=Ce,$e},re={_p:l,$id:t,$onAction:PE.bind(null,j),$patch:fe,$reset:me,$subscribe(he,Ce={}){const $e=PE(z,he,Ce.detached,()=>Je()),Je=x.run(()=>ho(()=>l.state.value[t],ft=>{(Ce.flush==="sync"?A:E)&&he({storeId:t,type:ty.direct,events:U},ft)},Ou({},T,Ce)));return $e},$dispose:ne},ze=Tf(re);l._s.set(t,ze);const Me=(l._a&&l._a.runWithContext||fle)(()=>l._e.run(()=>(x=qE()).run(()=>e({action:te}))));for(const he in Me){const Ce=Me[he];if(Mo(Ce)&&!yle(Ce)||Hu(Ce))d||(K&&gle(Ce)&&(Mo(Ce)?Ce.value=K[he]:U2(Ce,K[he])),l.state.value[t][he]=Ce);else if(typeof Ce=="function"){const $e=te(Ce,he);Me[he]=$e,s.actions[he]=Ce}}return Ou(ze,Me),Ou(Li(ze),Me),Object.defineProperty(ze,"$state",{get:()=>l.state.value[t],set:he=>{fe(Ce=>{Ou(Ce,he)})}}),l._p.forEach(he=>{Ou(ze,x.run(()=>he({store:ze,app:l._a,pinia:l,options:s})))}),K&&d&&n.hydrate&&n.hydrate(ze.$state,K),E=!0,A=!0,ze}/*! #__NO_SIDE_EFFECTS__ */function ble(t,e,n){let l;const m=typeof e=="function";l=m?n:e;function d(x,s){const T=CL();return x=x||(T?Gs(UA,null):null),x&&Q_(x),x=jA,x._s.has(t)||(m?HA(t,e,l,x):vle(t,l,x)),x._s.get(t)}return d.$id=t,d}const _le=ble("auth",{state:()=>({user:null}),actions:{login(t){this.user=t},logout(){this.user=null},hasRole(t){return this.user&&this.user.role.includes(t)}}}),GA=$z({history:mz("/"),routes:[{path:"/",component:gJ,children:[{path:"",name:"home",component:ZW},{path:"products",name:"product-list",component:yX},{path:"cart",name:"cart",component:kQ},{path:"order-success",name:"order-success",component:Dee},{path:"spotlight",name:"spotlight",component:$ee},{path:"message",name:"message",component:Zee},{path:"ai-recommendation",name:"vendor-ai-recommendation",component:ile},{path:"account",name:"account",component:OQ,children:[{path:"info",name:"info",component:pee},{path:"orders",name:"orders",component:Eee},{path:"orders/:id",name:"order-detail",component:Hee},{path:"address",name:"address",component:Aee},{path:"voucher",name:"voucher",component:Oee},{path:"favorites",name:"favorites",component:lle}]}]},{path:"/about",name:"about",component:()=>xS(()=>import("./AboutView-d3JIr0Hu.js"),__vite__mapDeps([0,1]))},{path:"/login",name:"login",component:GZ},{path:"/signup",name:"signup",component:CX},{path:"/product/:id",component:hJ,children:[{path:"",name:"product",component:iJ}]},{path:"/admin",component:ete,children:[{path:"dashboard",name:"dashboard",component:Wte},{path:"users",name:"users",component:lne},{path:"products",name:"products",component:vne},{path:"orders",name:"orders-admin",component:Pne},{path:"finance",name:"finance",component:dre}]},{path:"/vendor",component:gre,meta:{requiresAuth:!0,roles:["VENDOR"]},children:[{path:"dashboard",name:"vendor-dashboard",component:xre},{path:"products",name:"vendor-products",component:oie},{path:"orders",name:"vendor-orders",component:Bie},{path:"finance",name:"vendor-finance",component:Coe},{path:"advertisement",name:"vendor-advertisement",component:_se},{path:"support",name:"vendor-support",component:jae}]},{path:"/chat",component:hle,children:[{path:"",name:"chat",component:VA}]},{path:"/:pathMatch(.*)*",name:"not-found-catch-all",component:rB}]});GA.beforeEach((t,e,n)=>{_le(),n()});var xle={root:{transitionDuration:"{transition.duration}"},panel:{borderWidth:"0 0 1px 0",borderColor:"{content.border.color}"},header:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",padding:"1.125rem",fontWeight:"600",borderRadius:"0",borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",hoverBackground:"{content.background}",activeBackground:"{content.background}",activeHoverBackground:"{content.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",activeHoverColor:"{text.color}"},first:{topBorderRadius:"{content.border.radius}",borderWidth:"0"},last:{bottomBorderRadius:"{content.border.radius}",activeBottomBorderRadius:"0"}},content:{borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",color:"{text.color}",padding:"0 1.125rem 1.125rem 1.125rem"}},wle={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}"},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},dropdown:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},chip:{borderRadius:"{border.radius.sm}"},emptyMessage:{padding:"{list.option.padding}"},colorScheme:{light:{chip:{focusBackground:"{surface.200}",focusColor:"{surface.800}"},dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",focusColor:"{surface.0}"},dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"}}}},Sle={root:{width:"2rem",height:"2rem",fontSize:"1rem",background:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},icon:{size:"1rem"},group:{borderColor:"{content.background}",offset:"-0.75rem"},lg:{width:"3rem",height:"3rem",fontSize:"1.5rem",icon:{size:"1.5rem"},group:{offset:"-1rem"}},xl:{width:"4rem",height:"4rem",fontSize:"2rem",icon:{size:"2rem"},group:{offset:"-1.5rem"}}},Cle={root:{borderRadius:"{border.radius.md}",padding:"0 0.5rem",fontSize:"0.75rem",fontWeight:"700",minWidth:"1.5rem",height:"1.5rem"},dot:{size:"0.5rem"},sm:{fontSize:"0.625rem",minWidth:"1.25rem",height:"1.25rem"},lg:{fontSize:"0.875rem",minWidth:"1.75rem",height:"1.75rem"},xl:{fontSize:"1rem",minWidth:"2rem",height:"2rem"},colorScheme:{light:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.500}",color:"{surface.0}"},info:{background:"{sky.500}",color:"{surface.0}"},warn:{background:"{orange.500}",color:"{surface.0}"},danger:{background:"{red.500}",color:"{surface.0}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"{green.400}",color:"{green.950}"},info:{background:"{sky.400}",color:"{sky.950}"},warn:{background:"{orange.400}",color:"{orange.950}"},danger:{background:"{red.400}",color:"{red.950}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}}},kle={primitive:{borderRadius:{none:"0",xs:"2px",sm:"4px",md:"6px",lg:"8px",xl:"12px"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"}},semantic:{transitionDuration:"0.2s",focusRing:{width:"1px",style:"solid",color:"{primary.color}",offset:"2px",shadow:"none"},disabledOpacity:"0.6",iconSize:"1rem",anchorGutter:"2px",primary:{50:"{emerald.50}",100:"{emerald.100}",200:"{emerald.200}",300:"{emerald.300}",400:"{emerald.400}",500:"{emerald.500}",600:"{emerald.600}",700:"{emerald.700}",800:"{emerald.800}",900:"{emerald.900}",950:"{emerald.950}"},formField:{paddingX:"0.75rem",paddingY:"0.5rem",sm:{fontSize:"0.875rem",paddingX:"0.625rem",paddingY:"0.375rem"},lg:{fontSize:"1.125rem",paddingX:"0.875rem",paddingY:"0.625rem"},borderRadius:"{border.radius.md}",focusRing:{width:"0",style:"none",color:"transparent",offset:"0",shadow:"none"},transitionDuration:"{transition.duration}"},list:{padding:"0.25rem 0.25rem",gap:"2px",header:{padding:"0.5rem 1rem 0.25rem 1rem"},option:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}"},optionGroup:{padding:"0.5rem 0.75rem",fontWeight:"600"}},content:{borderRadius:"{border.radius.md}"},mask:{transitionDuration:"0.15s"},navigation:{list:{padding:"0.25rem 0.25rem",gap:"2px"},item:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}",gap:"0.5rem"},submenuLabel:{padding:"0.5rem 0.75rem",fontWeight:"600"},submenuIcon:{size:"0.875rem"}},overlay:{select:{borderRadius:"{border.radius.md}",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},popover:{borderRadius:"{border.radius.md}",padding:"0.75rem",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},modal:{borderRadius:"{border.radius.xl}",padding:"1.25rem",shadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},navigation:{shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"}},colorScheme:{light:{surface:{0:"#ffffff",50:"{slate.50}",100:"{slate.100}",200:"{slate.200}",300:"{slate.300}",400:"{slate.400}",500:"{slate.500}",600:"{slate.600}",700:"{slate.700}",800:"{slate.800}",900:"{slate.900}",950:"{slate.950}"},primary:{color:"{primary.500}",contrastColor:"#ffffff",hoverColor:"{primary.600}",activeColor:"{primary.700}"},highlight:{background:"{primary.50}",focusBackground:"{primary.100}",color:"{primary.700}",focusColor:"{primary.800}"},mask:{background:"rgba(0,0,0,0.4)",color:"{surface.200}"},formField:{background:"{surface.0}",disabledBackground:"{surface.200}",filledBackground:"{surface.50}",filledHoverBackground:"{surface.50}",filledFocusBackground:"{surface.50}",borderColor:"{surface.300}",hoverBorderColor:"{surface.400}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.400}",color:"{surface.700}",disabledColor:"{surface.500}",placeholderColor:"{surface.500}",invalidPlaceholderColor:"{red.600}",floatLabelColor:"{surface.500}",floatLabelFocusColor:"{primary.600}",floatLabelActiveColor:"{surface.500}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.700}",hoverColor:"{surface.800}",mutedColor:"{surface.500}",hoverMutedColor:"{surface.600}"},content:{background:"{surface.0}",hoverBackground:"{surface.100}",borderColor:"{surface.200}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},popover:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},modal:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.100}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.100}",activeBackground:"{surface.100}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}}},dark:{surface:{0:"#ffffff",50:"{zinc.50}",100:"{zinc.100}",200:"{zinc.200}",300:"{zinc.300}",400:"{zinc.400}",500:"{zinc.500}",600:"{zinc.600}",700:"{zinc.700}",800:"{zinc.800}",900:"{zinc.900}",950:"{zinc.950}"},primary:{color:"{primary.400}",contrastColor:"{surface.900}",hoverColor:"{primary.300}",activeColor:"{primary.200}"},highlight:{background:"color-mix(in srgb, {primary.400}, transparent 84%)",focusBackground:"color-mix(in srgb, {primary.400}, transparent 76%)",color:"rgba(255,255,255,.87)",focusColor:"rgba(255,255,255,.87)"},mask:{background:"rgba(0,0,0,0.6)",color:"{surface.200}"},formField:{background:"{surface.950}",disabledBackground:"{surface.700}",filledBackground:"{surface.800}",filledHoverBackground:"{surface.800}",filledFocusBackground:"{surface.800}",borderColor:"{surface.600}",hoverBorderColor:"{surface.500}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.300}",color:"{surface.0}",disabledColor:"{surface.400}",placeholderColor:"{surface.400}",invalidPlaceholderColor:"{red.400}",floatLabelColor:"{surface.400}",floatLabelFocusColor:"{primary.color}",floatLabelActiveColor:"{surface.400}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.0}",hoverColor:"{surface.0}",mutedColor:"{surface.400}",hoverMutedColor:"{surface.300}"},content:{background:"{surface.900}",hoverBackground:"{surface.800}",borderColor:"{surface.700}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},popover:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},modal:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.800}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.800}",activeBackground:"{surface.800}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}}}}}},Tle={root:{borderRadius:"{content.border.radius}"}},Ele={root:{padding:"1rem",background:"{content.background}",gap:"0.5rem",transitionDuration:"{transition.duration}"},item:{color:"{text.muted.color}",hoverColor:"{text.color}",borderRadius:"{content.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",hoverColor:"{navigation.item.icon.focus.color}"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},separator:{color:"{navigation.item.icon.color}"}},Ile={root:{borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",gap:"0.5rem",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",iconOnlyWidth:"2.5rem",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"},label:{fontWeight:"500"},raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"},badgeSize:"1rem",transitionDuration:"{form.field.transition.duration}"},colorScheme:{light:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",borderColor:"{surface.100}",hoverBorderColor:"{surface.200}",activeBorderColor:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}",focusRing:{color:"{surface.600}",shadow:"none"}},info:{background:"{sky.500}",hoverBackground:"{sky.600}",activeBackground:"{sky.700}",borderColor:"{sky.500}",hoverBorderColor:"{sky.600}",activeBorderColor:"{sky.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{sky.500}",shadow:"none"}},success:{background:"{green.500}",hoverBackground:"{green.600}",activeBackground:"{green.700}",borderColor:"{green.500}",hoverBorderColor:"{green.600}",activeBorderColor:"{green.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{green.500}",shadow:"none"}},warn:{background:"{orange.500}",hoverBackground:"{orange.600}",activeBackground:"{orange.700}",borderColor:"{orange.500}",hoverBorderColor:"{orange.600}",activeBorderColor:"{orange.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{orange.500}",shadow:"none"}},help:{background:"{purple.500}",hoverBackground:"{purple.600}",activeBackground:"{purple.700}",borderColor:"{purple.500}",hoverBorderColor:"{purple.600}",activeBorderColor:"{purple.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{purple.500}",shadow:"none"}},danger:{background:"{red.500}",hoverBackground:"{red.600}",activeBackground:"{red.700}",borderColor:"{red.500}",hoverBorderColor:"{red.600}",activeBorderColor:"{red.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{red.500}",shadow:"none"}},contrast:{background:"{surface.950}",hoverBackground:"{surface.900}",activeBackground:"{surface.800}",borderColor:"{surface.950}",hoverBorderColor:"{surface.900}",activeBorderColor:"{surface.800}",color:"{surface.0}",hoverColor:"{surface.0}",activeColor:"{surface.0}",focusRing:{color:"{surface.950}",shadow:"none"}}},outlined:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",borderColor:"{primary.200}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",borderColor:"{green.200}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",borderColor:"{sky.200}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",borderColor:"{orange.200}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",borderColor:"{purple.200}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",borderColor:"{red.200}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.700}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.700}"}},text:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.700}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}},dark:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",borderColor:"{surface.800}",hoverBorderColor:"{surface.700}",activeBorderColor:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}",focusRing:{color:"{surface.300}",shadow:"none"}},info:{background:"{sky.400}",hoverBackground:"{sky.300}",activeBackground:"{sky.200}",borderColor:"{sky.400}",hoverBorderColor:"{sky.300}",activeBorderColor:"{sky.200}",color:"{sky.950}",hoverColor:"{sky.950}",activeColor:"{sky.950}",focusRing:{color:"{sky.400}",shadow:"none"}},success:{background:"{green.400}",hoverBackground:"{green.300}",activeBackground:"{green.200}",borderColor:"{green.400}",hoverBorderColor:"{green.300}",activeBorderColor:"{green.200}",color:"{green.950}",hoverColor:"{green.950}",activeColor:"{green.950}",focusRing:{color:"{green.400}",shadow:"none"}},warn:{background:"{orange.400}",hoverBackground:"{orange.300}",activeBackground:"{orange.200}",borderColor:"{orange.400}",hoverBorderColor:"{orange.300}",activeBorderColor:"{orange.200}",color:"{orange.950}",hoverColor:"{orange.950}",activeColor:"{orange.950}",focusRing:{color:"{orange.400}",shadow:"none"}},help:{background:"{purple.400}",hoverBackground:"{purple.300}",activeBackground:"{purple.200}",borderColor:"{purple.400}",hoverBorderColor:"{purple.300}",activeBorderColor:"{purple.200}",color:"{purple.950}",hoverColor:"{purple.950}",activeColor:"{purple.950}",focusRing:{color:"{purple.400}",shadow:"none"}},danger:{background:"{red.400}",hoverBackground:"{red.300}",activeBackground:"{red.200}",borderColor:"{red.400}",hoverBorderColor:"{red.300}",activeBorderColor:"{red.200}",color:"{red.950}",hoverColor:"{red.950}",activeColor:"{red.950}",focusRing:{color:"{red.400}",shadow:"none"}},contrast:{background:"{surface.0}",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{surface.0}",hoverBorderColor:"{surface.100}",activeBorderColor:"{surface.200}",color:"{surface.950}",hoverColor:"{surface.950}",activeColor:"{surface.950}",focusRing:{color:"{surface.0}",shadow:"none"}}},outlined:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",borderColor:"{primary.700}",color:"{primary.color}"},secondary:{hoverBackground:"rgba(255,255,255,0.04)",activeBackground:"rgba(255,255,255,0.16)",borderColor:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",borderColor:"{green.700}",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",borderColor:"{sky.700}",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",borderColor:"{orange.700}",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",borderColor:"{purple.700}",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",borderColor:"{red.700}",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.500}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.600}",color:"{surface.0}"}},text:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",color:"{primary.color}"},secondary:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}}}},Ple={root:{background:"{content.background}",borderRadius:"{border.radius.xl}",color:"{content.color}",shadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)"},body:{padding:"1.25rem",gap:"0.5rem"},caption:{gap:"0.5rem"},title:{fontSize:"1.25rem",fontWeight:"500"},subtitle:{color:"{text.muted.color}"}},Ale={root:{transitionDuration:"{transition.duration}"},content:{gap:"0.25rem"},indicatorList:{padding:"1rem",gap:"0.5rem"},indicator:{width:"2rem",height:"0.5rem",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{indicator:{background:"{surface.200}",hoverBackground:"{surface.300}",activeBackground:"{primary.color}"}},dark:{indicator:{background:"{surface.700}",hoverBackground:"{surface.600}",activeBackground:"{primary.color}"}}}},Rle={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",mobileIndent:"1rem"},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",icon:{color:"{list.option.icon.color}",focusColor:"{list.option.icon.focus.color}",size:"0.875rem"}},clearIcon:{color:"{form.field.icon.color}"}},Mle={root:{borderRadius:"{border.radius.sm}",width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},icon:{size:"0.875rem",color:"{form.field.color}",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.75rem"},lg:{size:"1rem"}}},Dle={root:{borderRadius:"16px",paddingX:"0.75rem",paddingY:"0.5rem",gap:"0.5rem",transitionDuration:"{transition.duration}"},image:{width:"2rem",height:"2rem"},icon:{size:"1rem"},removeIcon:{size:"1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"}},colorScheme:{light:{root:{background:"{surface.100}",color:"{surface.800}"},icon:{color:"{surface.800}"},removeIcon:{color:"{surface.800}"}},dark:{root:{background:"{surface.800}",color:"{surface.0}"},icon:{color:"{surface.0}"},removeIcon:{color:"{surface.0}"}}}},Lle={root:{transitionDuration:"{transition.duration}"},preview:{width:"1.5rem",height:"1.5rem",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},panel:{shadow:"{overlay.popover.shadow}",borderRadius:"{overlay.popover.borderRadius}"},colorScheme:{light:{panel:{background:"{surface.800}",borderColor:"{surface.900}"},handle:{color:"{surface.0}"}},dark:{panel:{background:"{surface.900}",borderColor:"{surface.700}"},handle:{color:"{surface.0}"}}}},Ole={icon:{size:"2rem",color:"{overlay.modal.color}"},content:{gap:"1rem"}},zle={root:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},content:{padding:"{overlay.popover.padding}",gap:"1rem"},icon:{size:"1.5rem",color:"{overlay.popover.color}"},footer:{gap:"0.5rem",padding:"0 {overlay.popover.padding} {overlay.popover.padding} {overlay.popover.padding}"}},Ble={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{mobileIndent:"1rem"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"}},Fle={root:{transitionDuration:"{transition.duration}"},header:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},headerCell:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{datatable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},columnTitle:{fontWeight:"600"},row:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},bodyCell:{borderColor:"{datatable.border.color}",padding:"0.75rem 1rem"},footerCell:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",padding:"0.75rem 1rem"},columnFooter:{fontWeight:"600"},footer:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},dropPoint:{color:"{primary.color}"},columnResizerWidth:"0.5rem",resizeIndicator:{width:"1px",color:"{primary.color}"},sortIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},loadingIcon:{size:"2rem"},rowToggleButton:{hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},filter:{inlineGap:"0.5rem",overlaySelect:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},overlayPopover:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}",gap:"0.5rem"},rule:{borderColor:"{content.border.color}"},constraintList:{padding:"{list.padding}",gap:"{list.gap}"},constraint:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",separator:{borderColor:"{content.border.color}"},padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"}},paginatorTop:{borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},colorScheme:{light:{root:{borderColor:"{content.border.color}"},row:{stripedBackground:"{surface.50}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},row:{stripedBackground:"{surface.950}"},bodyCell:{selectedBorderColor:"{primary.900}"}}}},$le={root:{borderColor:"transparent",borderWidth:"0",borderRadius:"0",padding:"0"},header:{background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",borderRadius:"0"},content:{background:"{content.background}",color:"{content.color}",borderColor:"transparent",borderWidth:"0",padding:"0",borderRadius:"0"},footer:{background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"1px 0 0 0",padding:"0.75rem 1rem",borderRadius:"0"},paginatorTop:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{content.border.color}",borderWidth:"1px 0 0 0"}},Nle={root:{transitionDuration:"{transition.duration}"},panel:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}"},header:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",padding:"0 0 0.5rem 0"},title:{gap:"0.5rem",fontWeight:"500"},dropdown:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},inputIcon:{color:"{form.field.icon.color}"},selectMonth:{hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},selectYear:{hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},group:{borderColor:"{content.border.color}",gap:"{overlay.popover.padding}"},dayView:{margin:"0.5rem 0 0 0"},weekDay:{padding:"0.25rem",fontWeight:"500",color:"{content.color}"},date:{hoverBackground:"{content.hover.background}",selectedBackground:"{primary.color}",rangeSelectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{primary.contrast.color}",rangeSelectedColor:"{highlight.color}",width:"2rem",height:"2rem",borderRadius:"50%",padding:"0.25rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},monthView:{margin:"0.5rem 0 0 0"},month:{padding:"0.375rem",borderRadius:"{content.border.radius}"},yearView:{margin:"0.5rem 0 0 0"},year:{padding:"0.375rem",borderRadius:"{content.border.radius}"},buttonbar:{padding:"0.5rem 0 0 0",borderColor:"{content.border.color}"},timePicker:{padding:"0.5rem 0 0 0",borderColor:"{content.border.color}",gap:"0.5rem",buttonGap:"0.25rem"},colorScheme:{light:{dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"},today:{background:"{surface.200}",color:"{surface.900}"}},dark:{dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"},today:{background:"{surface.700}",color:"{surface.0}"}}}},Vle={root:{background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",borderRadius:"{overlay.modal.border.radius}",shadow:"{overlay.modal.shadow}"},header:{padding:"{overlay.modal.padding}",gap:"0.5rem"},title:{fontSize:"1.25rem",fontWeight:"600"},content:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},footer:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}",gap:"0.5rem"}},jle={root:{borderColor:"{content.border.color}"},content:{background:"{content.background}",color:"{text.color}"},horizontal:{margin:"1rem 0",padding:"0 1rem",content:{padding:"0 0.5rem"}},vertical:{margin:"0 1rem",padding:"0.5rem 0",content:{padding:"0.5rem 0"}}},Ule={root:{background:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.2)",padding:"0.5rem",borderRadius:"{border.radius.xl}"},item:{borderRadius:"{content.border.radius}",padding:"0.5rem",size:"3rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},qle={root:{background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",shadow:"{overlay.modal.shadow}"},header:{padding:"{overlay.modal.padding}"},title:{fontSize:"1.5rem",fontWeight:"600"},content:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},footer:{padding:"{overlay.modal.padding}"}},Hle={toolbar:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}"},toolbarItem:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}",padding:"{list.padding}"},overlayOption:{focusBackground:"{list.option.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},content:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"}},Gle={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",padding:"0 1.125rem 1.125rem 1.125rem",transitionDuration:"{transition.duration}"},legend:{background:"{content.background}",hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",borderRadius:"{content.border.radius}",borderWidth:"1px",borderColor:"transparent",padding:"0.5rem 0.75rem",gap:"0.5rem",fontWeight:"600",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}"},content:{padding:"0"}},Wle={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},header:{background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"unset",borderWidth:"0",borderRadius:"0",gap:"0.5rem"},content:{highlightBorderColor:"{primary.color}",padding:"0 1.125rem 1.125rem 1.125rem",gap:"1rem"},file:{padding:"1rem",gap:"1rem",borderColor:"{content.border.color}",info:{gap:"0.5rem"}},fileList:{gap:"0.5rem"},progressbar:{height:"0.25rem"},basic:{gap:"0.5rem"}},Kle={root:{color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",activeColor:"{form.field.float.label.active.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",positionY:"{form.field.padding.y}",fontWeight:"500",active:{fontSize:"0.75rem",fontWeight:"400"}},over:{active:{top:"-1.25rem"}},in:{input:{paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"},active:{top:"{form.field.padding.y}"}},on:{borderRadius:"{border.radius.xs}",active:{background:"{form.field.background}",padding:"0 0.125rem"}}},Zle={root:{borderWidth:"1px",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},navButton:{background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.100}",hoverColor:"{surface.0}",size:"3rem",gutter:"0.5rem",prev:{borderRadius:"50%"},next:{borderRadius:"50%"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},navIcon:{size:"1.5rem"},thumbnailsContent:{background:"{content.background}",padding:"1rem 0.25rem"},thumbnailNavButton:{size:"2rem",borderRadius:"{content.border.radius}",gutter:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},thumbnailNavButtonIcon:{size:"1rem"},caption:{background:"rgba(0, 0, 0, 0.5)",color:"{surface.100}",padding:"1rem"},indicatorList:{gap:"0.5rem",padding:"1rem"},indicatorButton:{width:"1rem",height:"1rem",activeBackground:"{primary.color}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},insetIndicatorList:{background:"rgba(0, 0, 0, 0.5)"},insetIndicatorButton:{background:"rgba(255, 255, 255, 0.4)",hoverBackground:"rgba(255, 255, 255, 0.6)",activeBackground:"rgba(255, 255, 255, 0.9)"},closeButton:{size:"3rem",gutter:"0.5rem",background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.50}",hoverColor:"{surface.0}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},closeButtonIcon:{size:"1.5rem"},colorScheme:{light:{thumbnailNavButton:{hoverBackground:"{surface.100}",color:"{surface.600}",hoverColor:"{surface.700}"},indicatorButton:{background:"{surface.200}",hoverBackground:"{surface.300}"}},dark:{thumbnailNavButton:{hoverBackground:"{surface.700}",color:"{surface.400}",hoverColor:"{surface.0}"},indicatorButton:{background:"{surface.700}",hoverBackground:"{surface.600}"}}}},Xle={icon:{color:"{form.field.icon.color}"}},Yle={root:{color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",top:"{form.field.padding.y}",fontSize:"0.75rem",fontWeight:"400"},input:{paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"}},Jle={root:{transitionDuration:"{transition.duration}"},preview:{icon:{size:"1.5rem"},mask:{background:"{mask.background}",color:"{mask.color}"}},toolbar:{position:{left:"auto",right:"1rem",top:"1rem",bottom:"auto"},blur:"8px",background:"rgba(255,255,255,0.1)",borderColor:"rgba(255,255,255,0.2)",borderWidth:"1px",borderRadius:"30px",padding:".5rem",gap:"0.5rem"},action:{hoverBackground:"rgba(255,255,255,0.1)",color:"{surface.50}",hoverColor:"{surface.0}",size:"3rem",iconSize:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},Qle={handle:{size:"15px",hoverSize:"30px",background:"rgba(255,255,255,0.3)",hoverBackground:"rgba(255,255,255,0.3)",borderColor:"unset",hoverBorderColor:"unset",borderWidth:"0",borderRadius:"50%",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"rgba(255,255,255,0.3)",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},ece={root:{padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",gap:"0.5rem"},text:{fontWeight:"500"},icon:{size:"1rem"},colorScheme:{light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}}}},tce={root:{padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{transition.duration}"},display:{hoverBackground:"{content.hover.background}",hoverColor:"{content.hover.color}"}},nce={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},chip:{borderRadius:"{border.radius.sm}"},colorScheme:{light:{chip:{focusBackground:"{surface.200}",color:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",color:"{surface.0}"}}}},rce={addon:{background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.icon.color}",borderRadius:"{form.field.border.radius}",padding:"0.5rem",minWidth:"2.5rem"}},ice={root:{transitionDuration:"{transition.duration}"},button:{width:"2.5rem",borderRadius:"{form.field.border.radius}",verticalPadding:"{form.field.padding.y}"},colorScheme:{light:{button:{background:"transparent",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.500}",activeColor:"{surface.600}"}},dark:{button:{background:"transparent",hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.300}",activeColor:"{surface.200}"}}}},oce={root:{gap:"0.5rem"},input:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"}}},sce={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}}},ace={root:{transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},value:{background:"{primary.color}"},range:{background:"{content.border.color}"},text:{color:"{text.muted.color}"}},lce={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",borderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",shadow:"{form.field.shadow}",borderRadius:"{form.field.border.radius}",transitionDuration:"{form.field.transition.duration}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},checkmark:{color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},emptyMessage:{padding:"{list.option.padding}"},colorScheme:{light:{option:{stripedBackground:"{surface.50}"}},dark:{option:{stripedBackground:"{surface.900}"}}}},cce={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",verticalOrientation:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},horizontalOrientation:{padding:"0.5rem 0.75rem",gap:"0.5rem"},transitionDuration:"{transition.duration}"},baseItem:{borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},overlay:{padding:"0",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",shadow:"{overlay.navigation.shadow}",gap:"0.5rem"},submenu:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},submenuLabel:{padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background.}",color:"{navigation.submenu.label.color}"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"},mobileButton:{borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},uce={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},submenuLabel:{padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background}",color:"{navigation.submenu.label.color}"},separator:{borderColor:"{content.border.color}"}},dce={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.5rem 0.75rem",transitionDuration:"{transition.duration}"},baseItem:{borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",mobileIndent:"1rem",icon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"}},separator:{borderColor:"{content.border.color}"},mobileButton:{borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},hce={root:{borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},content:{padding:"0.5rem 0.75rem",gap:"0.5rem",sm:{padding:"0.375rem 0.625rem"},lg:{padding:"0.625rem 0.875rem"}},text:{fontSize:"1rem",fontWeight:"500",sm:{fontSize:"0.875rem"},lg:{fontSize:"1.125rem"}},icon:{size:"1.125rem",sm:{size:"1rem"},lg:{size:"1.25rem"}},closeButton:{width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},closeIcon:{size:"1rem",sm:{size:"0.875rem"},lg:{size:"1.125rem"}},outlined:{root:{borderWidth:"1px"}},simple:{content:{padding:"0"}},colorScheme:{light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}},outlined:{color:"{blue.600}",borderColor:"{blue.600}"},simple:{color:"{blue.600}"}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}},outlined:{color:"{green.600}",borderColor:"{green.600}"},simple:{color:"{green.600}"}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}},outlined:{color:"{yellow.600}",borderColor:"{yellow.600}"},simple:{color:"{yellow.600}"}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}},outlined:{color:"{red.600}",borderColor:"{red.600}"},simple:{color:"{red.600}"}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}},outlined:{color:"{surface.500}",borderColor:"{surface.500}"},simple:{color:"{surface.500}"}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}},outlined:{color:"{surface.950}",borderColor:"{surface.950}"},simple:{color:"{surface.950}"}}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}},outlined:{color:"{blue.500}",borderColor:"{blue.500}"},simple:{color:"{blue.500}"}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}},outlined:{color:"{green.500}",borderColor:"{green.500}"},simple:{color:"{green.500}"}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}},outlined:{color:"{yellow.500}",borderColor:"{yellow.500}"},simple:{color:"{yellow.500}"}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}},outlined:{color:"{red.500}",borderColor:"{red.500}"},simple:{color:"{red.500}"}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}},outlined:{color:"{surface.400}",borderColor:"{surface.400}"},simple:{color:"{surface.400}"}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}},outlined:{color:"{surface.0}",borderColor:"{surface.0}"},simple:{color:"{surface.0}"}}}}},pce={root:{borderRadius:"{content.border.radius}",gap:"1rem"},meters:{background:"{content.border.color}",size:"0.5rem"},label:{gap:"0.5rem"},labelMarker:{size:"0.5rem"},labelIcon:{size:"1rem"},labelList:{verticalGap:"0.5rem",horizontalGap:"1rem"}},fce={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",gap:"0.5rem"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},clearIcon:{color:"{form.field.icon.color}"},chip:{borderRadius:"{border.radius.sm}"},emptyMessage:{padding:"{list.option.padding}"}},mce={root:{gap:"1.125rem"},controls:{gap:"0.5rem"}},gce={root:{gutter:"0.75rem",transitionDuration:"{transition.duration}"},node:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{content.border.color}",color:"{content.color}",selectedColor:"{highlight.color}",hoverColor:"{content.hover.color}",padding:"0.75rem 1rem",toggleablePadding:"0.75rem 1rem 1.25rem 1rem",borderRadius:"{content.border.radius}"},nodeToggleButton:{background:"{content.background}",hoverBackground:"{content.hover.background}",borderColor:"{content.border.color}",color:"{text.muted.color}",hoverColor:"{text.color}",size:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},connector:{color:"{content.border.color}",borderRadius:"{content.border.radius}",height:"24px"}},yce={root:{outline:{width:"2px",color:"{content.background}"}}},vce={root:{padding:"0.5rem 1rem",gap:"0.25rem",borderRadius:"{content.border.radius}",background:"{content.background}",color:"{content.color}",transitionDuration:"{transition.duration}"},navButton:{background:"transparent",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}",width:"2.5rem",height:"2.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},currentPageReport:{color:"{text.muted.color}"},jumpToPageInput:{maxWidth:"2.5rem"}},bce={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},header:{background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"{content.border.color}",borderWidth:"0",borderRadius:"0"},toggleableHeader:{padding:"0.375rem 1.125rem"},title:{fontWeight:"600"},content:{padding:"0 1.125rem 1.125rem 1.125rem"},footer:{padding:"0 1.125rem 1.125rem 1.125rem"}},_ce={root:{gap:"0.5rem",transitionDuration:"{transition.duration}"},panel:{background:"{content.background}",borderColor:"{content.border.color}",borderWidth:"1px",color:"{content.color}",padding:"0.25rem 0.25rem",borderRadius:"{content.border.radius}",first:{borderWidth:"1px",topBorderRadius:"{content.border.radius}"},last:{borderWidth:"1px",bottomBorderRadius:"{content.border.radius}"}},item:{focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",gap:"0.5rem",padding:"{navigation.item.padding}",borderRadius:"{content.border.radius}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},submenu:{indent:"1rem"},submenuIcon:{color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}"}},xce={meter:{background:"{content.border.color}",borderRadius:"{content.border.radius}",height:".75rem"},icon:{color:"{form.field.icon.color}"},overlay:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",padding:"{overlay.popover.padding}",shadow:"{overlay.popover.shadow}"},content:{gap:"0.5rem"},colorScheme:{light:{strength:{weakBackground:"{red.500}",mediumBackground:"{amber.500}",strongBackground:"{green.500}"}},dark:{strength:{weakBackground:"{red.400}",mediumBackground:"{amber.400}",strongBackground:"{green.400}"}}}},wce={root:{gap:"1.125rem"},controls:{gap:"0.5rem"}},Sce={root:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},content:{padding:"{overlay.popover.padding}"}},Cce={root:{background:"{content.border.color}",borderRadius:"{content.border.radius}",height:"1.25rem"},value:{background:"{primary.color}"},label:{color:"{primary.contrast.color}",fontSize:"0.75rem",fontWeight:"600"}},kce={colorScheme:{light:{root:{"color.1":"{red.500}","color.2":"{blue.500}","color.3":"{green.500}","color.4":"{yellow.500}"}},dark:{root:{"color.1":"{red.400}","color.2":"{blue.400}","color.3":"{green.400}","color.4":"{yellow.400}"}}}},Tce={root:{width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},icon:{size:"0.75rem",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.5rem"},lg:{size:"1rem"}}},Ece={root:{gap:"0.25rem",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},icon:{size:"1rem",color:"{text.muted.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}},Ice={colorScheme:{light:{root:{background:"rgba(0,0,0,0.1)"}},dark:{root:{background:"rgba(255,255,255,0.3)"}}}},Pce={root:{transitionDuration:"{transition.duration}"},bar:{size:"9px",borderRadius:"{border.radius.sm}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{bar:{background:"{surface.100}"}},dark:{bar:{background:"{surface.800}"}}}},Ace={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},clearIcon:{color:"{form.field.icon.color}"},checkmark:{color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},emptyMessage:{padding:"{list.option.padding}"}},Rce={root:{borderRadius:"{form.field.border.radius}"},colorScheme:{light:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}},dark:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}}}},Mce={root:{borderRadius:"{content.border.radius}"},colorScheme:{light:{root:{background:"{surface.200}",animationBackground:"rgba(255,255,255,0.4)"}},dark:{root:{background:"rgba(255, 255, 255, 0.06)",animationBackground:"rgba(255, 255, 255, 0.04)"}}}},Dce={root:{transitionDuration:"{transition.duration}"},track:{background:"{content.border.color}",borderRadius:"{content.border.radius}",size:"3px"},range:{background:"{primary.color}"},handle:{width:"20px",height:"20px",borderRadius:"50%",background:"{content.border.color}",hoverBackground:"{content.border.color}",content:{borderRadius:"50%",hoverBackground:"{content.background}",width:"16px",height:"16px",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.08), 0px 1px 1px 0px rgba(0, 0, 0, 0.14)"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{handle:{contentBackground:"{surface.0}"}},dark:{handle:{contentBackground:"{surface.950}"}}}},Lce={root:{gap:"0.5rem",transitionDuration:"{transition.duration}"}},Oce={root:{borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"}},zce={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",transitionDuration:"{transition.duration}"},gutter:{background:"{content.border.color}"},handle:{size:"24px",background:"transparent",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},Bce={root:{transitionDuration:"{transition.duration}"},separator:{background:"{content.border.color}",activeBackground:"{primary.color}",margin:"0 0 0 1.625rem",size:"2px"},step:{padding:"0.5rem",gap:"1rem"},stepHeader:{padding:"0",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},stepTitle:{color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},stepNumber:{background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"},steppanels:{padding:"0.875rem 0.5rem 1.125rem 0.5rem"},steppanel:{background:"{content.background}",color:"{content.color}",padding:"0",indent:"1rem"}},Fce={root:{transitionDuration:"{transition.duration}"},separator:{background:"{content.border.color}"},itemLink:{borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},itemLabel:{color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},itemNumber:{background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"}},$ce={root:{transitionDuration:"{transition.duration}"},tablist:{borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},item:{background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},itemIcon:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},activeBar:{height:"1px",bottom:"-1px",background:"{primary.color}"}},Nce={root:{transitionDuration:"{transition.duration}"},tablist:{borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},tab:{background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},tabpanel:{background:"{content.background}",color:"{content.color}",padding:"0.875rem 1.125rem 1.125rem 1.125rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"inset {focus.ring.shadow}"}},navButton:{background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",width:"2.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},activeBar:{height:"1px",bottom:"-1px",background:"{primary.color}"},colorScheme:{light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}}},Vce={root:{transitionDuration:"{transition.duration}"},tabList:{background:"{content.background}",borderColor:"{content.border.color}"},tab:{borderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},tabPanel:{background:"{content.background}",color:"{content.color}"},navButton:{background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}"},colorScheme:{light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}}},jce={root:{fontSize:"0.875rem",fontWeight:"700",padding:"0.25rem 0.5rem",gap:"0.25rem",borderRadius:"{content.border.radius}",roundedBorderRadius:"{border.radius.xl}"},icon:{size:"0.75rem"},colorScheme:{light:{primary:{background:"{primary.100}",color:"{primary.700}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.100}",color:"{green.700}"},info:{background:"{sky.100}",color:"{sky.700}"},warn:{background:"{orange.100}",color:"{orange.700}"},danger:{background:"{red.100}",color:"{red.700}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"color-mix(in srgb, {primary.500}, transparent 84%)",color:"{primary.300}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",color:"{green.300}"},info:{background:"color-mix(in srgb, {sky.500}, transparent 84%)",color:"{sky.300}"},warn:{background:"color-mix(in srgb, {orange.500}, transparent 84%)",color:"{orange.300}"},danger:{background:"color-mix(in srgb, {red.500}, transparent 84%)",color:"{red.300}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}}},Uce={root:{background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.color}",height:"18rem",padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{form.field.border.radius}"},prompt:{gap:"0.25rem"},commandResponse:{margin:"2px 0"}},qce={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}}},Hce={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{mobileIndent:"1rem"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"}},Gce={event:{minHeight:"5rem"},horizontal:{eventContent:{padding:"1rem 0"}},vertical:{eventContent:{padding:"0 1rem"}},eventMarker:{size:"1.125rem",borderRadius:"50%",borderWidth:"2px",background:"{content.background}",borderColor:"{content.border.color}",content:{borderRadius:"50%",size:"0.375rem",background:"{primary.color}",insetShadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"}},eventConnector:{color:"{content.border.color}",size:"2px"}},Wce={root:{width:"25rem",borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},icon:{size:"1.125rem"},content:{padding:"{overlay.popover.padding}",gap:"0.5rem"},text:{gap:"0.5rem"},summary:{fontWeight:"500",fontSize:"1rem"},detail:{fontWeight:"500",fontSize:"0.875rem"},closeButton:{width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},closeIcon:{size:"1rem"},colorScheme:{light:{blur:"1.5px",info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}}}},dark:{blur:"10px",info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",detailColor:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}}}}}},Kce={root:{padding:"0.5rem 1rem",borderRadius:"{content.border.radius}",gap:"0.5rem",fontWeight:"500",disabledBackground:"{form.field.disabled.background}",disabledBorderColor:"{form.field.disabled.background}",disabledColor:"{form.field.disabled.color}",invalidBorderColor:"{form.field.invalid.border.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",padding:"0.375rem 0.75rem"},lg:{fontSize:"{form.field.lg.font.size}",padding:"0.625rem 1.25rem"}},icon:{disabledColor:"{form.field.disabled.color}"},content:{left:"0.25rem",top:"0.25rem",checkedShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.02), 0px 1px 2px 0px rgba(0, 0, 0, 0.04)"},colorScheme:{light:{root:{background:"{surface.100}",checkedBackground:"{surface.100}",hoverBackground:"{surface.100}",borderColor:"{surface.100}",color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}",checkedBorderColor:"{surface.100}"},content:{checkedBackground:"{surface.0}"},icon:{color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}"}},dark:{root:{background:"{surface.950}",checkedBackground:"{surface.950}",hoverBackground:"{surface.950}",borderColor:"{surface.950}",color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}",checkedBorderColor:"{surface.950}"},content:{checkedBackground:"{surface.800}"},icon:{color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}"}}}},Zce={root:{width:"2.5rem",height:"1.5rem",borderRadius:"30px",gap:"0.25rem",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},borderWidth:"1px",borderColor:"transparent",hoverBorderColor:"transparent",checkedBorderColor:"transparent",checkedHoverBorderColor:"transparent",invalidBorderColor:"{form.field.invalid.border.color}",transitionDuration:"{form.field.transition.duration}",slideDuration:"0.2s"},handle:{borderRadius:"50%",size:"1rem"},colorScheme:{light:{root:{background:"{surface.300}",disabledBackground:"{form.field.disabled.background}",hoverBackground:"{surface.400}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.0}",disabledBackground:"{form.field.disabled.color}",hoverBackground:"{surface.0}",checkedBackground:"{surface.0}",checkedHoverBackground:"{surface.0}",color:"{text.muted.color}",hoverColor:"{text.color}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}},dark:{root:{background:"{surface.700}",disabledBackground:"{surface.600}",hoverBackground:"{surface.600}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.400}",disabledBackground:"{surface.900}",hoverBackground:"{surface.300}",checkedBackground:"{surface.900}",checkedHoverBackground:"{surface.900}",color:"{surface.900}",hoverColor:"{surface.800}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}}}},Xce={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.75rem"}},Yce={root:{maxWidth:"12.5rem",gutter:"0.25rem",shadow:"{overlay.popover.shadow}",padding:"0.5rem 0.75rem",borderRadius:"{overlay.popover.border.radius}"},colorScheme:{light:{root:{background:"{surface.700}",color:"{surface.0}"}},dark:{root:{background:"{surface.700}",color:"{surface.0}"}}}},Jce={root:{background:"{content.background}",color:"{content.color}",padding:"1rem",gap:"2px",indent:"1rem",transitionDuration:"{transition.duration}"},node:{padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.color}",hoverColor:"{text.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},gap:"0.25rem"},nodeIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}"},nodeToggleButton:{borderRadius:"50%",size:"1.75rem",hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedHoverColor:"{primary.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},loadingIcon:{size:"2rem"},filter:{margin:"0 0 0.5rem 0"}},Qce={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},tree:{padding:"{list.padding}"},clearIcon:{color:"{form.field.icon.color}"},emptyMessage:{padding:"{list.option.padding}"},chip:{borderRadius:"{border.radius.sm}"}},eue={root:{transitionDuration:"{transition.duration}"},header:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},headerCell:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{treetable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},columnTitle:{fontWeight:"600"},row:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},bodyCell:{borderColor:"{treetable.border.color}",padding:"0.75rem 1rem",gap:"0.5rem"},footerCell:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",padding:"0.75rem 1rem"},columnFooter:{fontWeight:"600"},footer:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},columnResizerWidth:"0.5rem",resizeIndicator:{width:"1px",color:"{primary.color}"},sortIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},loadingIcon:{size:"2rem"},nodeToggleButton:{hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},paginatorTop:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},colorScheme:{light:{root:{borderColor:"{content.border.color}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},bodyCell:{selectedBorderColor:"{primary.900}"}}}},tue={loader:{mask:{background:"{content.background}",color:"{text.muted.color}"},icon:{size:"2rem"}}};function Qy(t){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qy(t)}function RE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,l)}return n}function ME(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RE(Object(n),!0).forEach(function(l){nue(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RE(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function nue(t,e,n){return(e=rue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rue(t){var e=iue(t,"string");return Qy(e)=="symbol"?e:e+""}function iue(t,e){if(Qy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(Qy(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oue=ME(ME({},kle),{},{components:{accordion:xle,autocomplete:wle,avatar:Sle,badge:Cle,blockui:Tle,breadcrumb:Ele,button:Ile,datepicker:Nle,card:Ple,carousel:Ale,cascadeselect:Rle,checkbox:Mle,chip:Dle,colorpicker:Lle,confirmdialog:Ole,confirmpopup:zle,contextmenu:Ble,dataview:$le,datatable:Fle,dialog:Vle,divider:jle,dock:Ule,drawer:qle,editor:Hle,fieldset:Gle,fileupload:Wle,iftalabel:Yle,floatlabel:Kle,galleria:Zle,iconfield:Xle,image:Jle,imagecompare:Qle,inlinemessage:ece,inplace:tce,inputchips:nce,inputgroup:rce,inputnumber:ice,inputotp:oce,inputtext:sce,knob:ace,listbox:lce,megamenu:cce,menu:uce,menubar:dce,message:hce,metergroup:pce,multiselect:fce,orderlist:mce,organizationchart:gce,overlaybadge:yce,popover:Sce,paginator:vce,password:xce,panel:bce,panelmenu:_ce,picklist:wce,progressbar:Cce,progressspinner:kce,radiobutton:Tce,rating:Ece,scrollpanel:Pce,select:Ace,selectbutton:Rce,skeleton:Mce,slider:Dce,speeddial:Lce,splitter:zce,splitbutton:Oce,stepper:Bce,steps:Fce,tabmenu:$ce,tabs:Nce,tabview:Vce,textarea:qce,tieredmenu:Hce,tag:jce,terminal:Uce,timeline:Gce,togglebutton:Kce,toggleswitch:Zce,tree:Jce,treeselect:Qce,treetable:eue,toast:Wce,toolbar:Xce,virtualscroller:tue},directives:{tooltip:Yce,ripple:Ice}}),sue=Object.defineProperty,DE=Object.getOwnPropertySymbols,aue=Object.prototype.hasOwnProperty,lue=Object.prototype.propertyIsEnumerable,LE=(t,e,n)=>e in t?sue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cue=(t,e)=>{for(var n in e||(e={}))aue.call(e,n)&&LE(t,n,e[n]);if(DE)for(var n of DE(e))lue.call(e,n)&&LE(t,n,e[n]);return t};function OE(t,e=!0){return t instanceof Object&&t.constructor===Object&&(e||Object.keys(t).length!==0)}function WA(t={},e={}){const n=cue({},t);return Object.keys(e).forEach(l=>{const m=l;OE(e[m])&&m in t&&OE(t[m])?n[m]=WA(t[m],e[m]):n[m]=e[m]}),n}function uue(...t){return t.reduce((e,n,l)=>l===0?n:WA(e,n),{})}function due(...t){return uue(...t)}var hue=(...t)=>due(...t);const Of=zO(Y7),pue=ple();Of.use(pue);const fue=hue(oue,{semantic:{primary:{50:"{indigo.50}",100:"{indigo.100}",200:"{indigo.200}",300:"{indigo.300}",400:"{indigo.400}",500:"{indigo.500}",600:"{indigo.600}",700:"{indigo.700}",800:"{indigo.800}",900:"{indigo.900}",950:"{indigo.950}"}}});Of.use(GA);Of.use(kN,{theme:{preset:fue}});Of.use(pW);Of.use(TN);Of.mount("#app");const{initializeAuth:mue}=l0();mue();export{Ie as A,Xn as B,tr as C,Oue as D,yJ as E,ES as F,Eh as T,bo as Z,td as a,jr as b,mr as c,n_ as d,Lc as e,Ro as f,No as g,bt as h,pe as i,Ct as j,ge as k,_r as l,ie as m,jt as n,X as o,an as p,M as q,wn as r,Rf as s,vn as t,hy as u,Ue as v,Xe as w,Tn as x,Xr as y,Ke as z};
